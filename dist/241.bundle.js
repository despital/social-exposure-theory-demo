/*! For license information please see 241.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunksocial_exposure_theory=self.webpackChunksocial_exposure_theory||[]).push([[241],{0:(e,t,s)=>{s.d(t,{MF:()=>ue,j6:()=>re,xZ:()=>ae,om:()=>ie,Sx:()=>he,Wp:()=>de,KO:()=>ce});var n=s(1711),i=s(722),r=s(3047);let a,o;const l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,c=new WeakMap;let p={get(e,t,s){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return m(e[t])},set:(e,t,s)=>(e[t]=s,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(v(this),e),m(l.get(this))}:function(...e){return m(t.apply(v(this),e))}:function(e,...s){const n=t.call(v(this),e,...s);return d.set(n,e.sort?e.sort():[e]),m(n)}:(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,s)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",r),e.removeEventListener("abort",r)},i=()=>{t(),n()},r=()=>{s(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",r),e.addEventListener("abort",r)});u.set(e,t)}(e),s=e,(a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>s instanceof e)?new Proxy(e,p):e);var t,s}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,s)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",r)},i=()=>{t(m(e.result)),n()},r=()=>{s(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",r)});return t.then(t=>{t instanceof IDBCursor&&l.set(t,e)}).catch(()=>{}),c.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),c.set(t,e)),t}const v=e=>c.get(e),f=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],y=new Map;function C(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(y.get(t))return y.get(t);const s=t.replace(/FromIndex$/,""),n=t!==s,i=b.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!f.includes(s))return;const r=async function(e,...t){const r=this.transaction(e,i?"readwrite":"readonly");let a=r.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[s](...t),i&&r.done]))[0]};return y.set(t,r),r}var w;w=p,p={...w,get:(e,t,s)=>C(e,t)||w.get(e,t,s),has:(e,t)=>!!C(e,t)||w.has(e,t)};class x{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const _="@firebase/app",V="0.14.3",I=new i.Vy("@firebase/app"),S="@firebase/app-compat",P="@firebase/analytics-compat",T="@firebase/analytics",E="@firebase/app-check-compat",R="@firebase/app-check",k="@firebase/auth",A="@firebase/auth-compat",L="@firebase/database",D="@firebase/data-connect",N="@firebase/database-compat",O="@firebase/functions",j="@firebase/functions-compat",q="@firebase/installations",M="@firebase/installations-compat",F="@firebase/messaging",B="@firebase/messaging-compat",z="@firebase/performance",H="@firebase/performance-compat",Q="@firebase/remote-config",U="@firebase/remote-config-compat",W="@firebase/storage",G="@firebase/storage-compat",Z="@firebase/firestore",K="@firebase/ai",J="@firebase/firestore-compat",Y="firebase",$="[DEFAULT]",X={[_]:"fire-core",[S]:"fire-core-compat",[T]:"fire-analytics",[P]:"fire-analytics-compat",[R]:"fire-app-check",[E]:"fire-app-check-compat",[k]:"fire-auth",[A]:"fire-auth-compat",[L]:"fire-rtdb",[D]:"fire-data-connect",[N]:"fire-rtdb-compat",[O]:"fire-fn",[j]:"fire-fn-compat",[q]:"fire-iid",[M]:"fire-iid-compat",[F]:"fire-fcm",[B]:"fire-fcm-compat",[z]:"fire-perf",[H]:"fire-perf-compat",[Q]:"fire-rc",[U]:"fire-rc-compat",[W]:"fire-gcs",[G]:"fire-gcs-compat",[Z]:"fire-fst",[J]:"fire-fst-compat",[K]:"fire-vertex","fire-js":"fire-js",[Y]:"fire-js-all"},ee=new Map,te=new Map,se=new Map;function ne(e,t){try{e.container.addComponent(t)}catch(s){I.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,s)}}function ie(e){const t=e.name;if(se.has(t))return I.debug(`There were multiple attempts to register component ${t}.`),!1;se.set(t,e);for(const t of ee.values())ne(t,e);for(const t of te.values())ne(t,e);return!0}function re(e,t){const s=e.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),e.container.getProvider(t)}function ae(e){return null!=e&&void 0!==e.settings}const oe=new r.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class le{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new n.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oe.create("app-deleted",{appName:this._name})}}const ue="12.3.0";function de(e,t={}){let s=e;"object"!=typeof t&&(t={name:t});const i={name:$,automaticDataCollectionEnabled:!0,...t},a=i.name;if("string"!=typeof a||!a)throw oe.create("bad-app-name",{appName:String(a)});if(s||(s=(0,r.T9)()),!s)throw oe.create("no-options");const o=ee.get(a);if(o){if((0,r.bD)(s,o.options)&&(0,r.bD)(i,o.config))return o;throw oe.create("duplicate-app",{appName:a})}const l=new n.h1(a);for(const e of se.values())l.addComponent(e);const u=new le(s,i,l);return ee.set(a,u),u}function he(e=$){const t=ee.get(e);if(!t&&e===$&&(0,r.T9)())return de();if(!t)throw oe.create("no-app",{appName:e});return t}function ce(e,t,s){let i=X[e]??e;s&&(i+=`-${s}`);const r=i.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const e=[`Unable to register library "${i}" with version "${t}":`];return r&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void I.warn(e.join(" "))}ie(new n.uA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const pe="firebase-heartbeat-store";let ge=null;function me(){return ge||(ge=function(e,t,{blocked:s,upgrade:n,blocking:i,terminated:r}={}){const a=indexedDB.open(e,t),o=m(a);return n&&a.addEventListener("upgradeneeded",e=>{n(m(a.result),e.oldVersion,e.newVersion,m(a.transaction),e)}),s&&a.addEventListener("blocked",e=>s(e.oldVersion,e.newVersion,e)),o.then(e=>{r&&e.addEventListener("close",()=>r()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pe)}catch(e){console.warn(e)}}}).catch(e=>{throw oe.create("idb-open",{originalErrorMessage:e.message})})),ge}async function ve(e,t){try{const s=(await me()).transaction(pe,"readwrite"),n=s.objectStore(pe);await n.put(t,fe(e)),await s.done}catch(e){if(e instanceof r.g)I.warn(e.message);else{const t=oe.create("idb-set",{originalErrorMessage:e?.message});I.warn(t.message)}}}function fe(e){return`${e.name}!${e.options.appId}`}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ce(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ye();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,s=e[0].date;for(let n=1;n<e.length;n++)e[n].date<s&&(s=e[n].date,t=n);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){I.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=ye(),{heartbeatsToSend:t,unsentEntries:s}=function(e,t=1024){const s=[];let n=e.slice();for(const i of e){const e=s.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),we(s)>t){e.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),we(s)>t){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=(0,r.Uj)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}catch(e){return I.warn(e),""}}}function ye(){return(new Date).toISOString().substring(0,10)}class Ce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,r.zW)()&&(0,r.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await me()).transaction(pe),s=await t.objectStore(pe).get(fe(e));return await t.done,s}catch(e){if(e instanceof r.g)I.warn(e.message);else{const t=oe.create("idb-get",{originalErrorMessage:e?.message});I.warn(t.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ve(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ve(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function we(e){return(0,r.Uj)(JSON.stringify({version:2,heartbeats:e})).length}ie(new n.uA("platform-logger",e=>new x(e),"PRIVATE")),ie(new n.uA("heartbeat",e=>new be(e),"PRIVATE")),ce(_,V,""),ce(_,V,"esm2020"),ce("fire-js","")},223:(e,t,s)=>{s.d(t,{Wp:()=>n.Wp});var n=s(0);(0,n.KO)("firebase","12.3.0","app")},722:(e,t,s)=>{s.d(t,{$b:()=>i,Vy:()=>u});const n=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const r={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=(e,t,...s)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),i=o[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${n}]  ${e.name}:`,...s)};class u{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?r[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}},1711:(e,t,s)=>{s.d(t,{h1:()=>o,uA:()=>i});var n=s(3047);class i{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const r="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new n.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&e.resolve(s)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(s)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:r})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:s});t.resolve(e)}catch(e){}}}}clearInstance(e=r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=r){return this.instances.has(e)}getOptions(e=r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[e,t]of this.instancesDeferred.entries())s===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),n=this.onInitCallbacks.get(s)??new Set;n.add(e),this.onInitCallbacks.set(s,n);const i=this.instances.get(s);return i&&e(i,s),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const n of s)try{n(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===r?void 0:n),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}var n;return s||null}normalizeInstanceIdentifier(e=r){return this.component?this.component.multipleInstances?e:r:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},1971:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(7299);const i={name:"external-html",version:"2.1.0",parameters:{url:{type:n.QL.STRING,default:void 0},cont_key:{type:n.QL.KEY,default:null},cont_btn:{type:n.QL.STRING,default:null},check_fn:{type:n.QL.FUNCTION,default:()=>!0},force_refresh:{type:n.QL.BOOL,default:!1},execute_script:{type:n.QL.BOOL,pretty_name:"Execute scripts",default:!1}},data:{url:{type:n.QL.STRING},rt:{type:n.QL.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}};class r{constructor(e){this.jsPsych=e}static{this.info=i}trial(e,t,s){let n;var i=t.url;return t.force_refresh&&(i=t.url+"?t="+performance.now()),fetch(i).then(e=>e.text()).then(i=>{e.innerHTML=i,s();var r=performance.now();const a=e=>{this.jsPsych.pluginAPI.compareKeys(e.key,t.cont_key)&&o()},o=()=>{if(!t.check_fn||t.check_fn(e)){t.cont_key&&e.removeEventListener("keydown",a);var s={rt:Math.round(performance.now()-r),url:t.url};this.jsPsych.finishTrial(s),n()}};if(t.execute_script)for(var l=e.getElementsByTagName("script"),u=0;u<l.length;u++){const e=document.createElement("script"),t=l[u];e.text=t.text,t.parentNode.replaceChild(e,t)}t.cont_btn&&e.querySelector("#"+t.cont_btn).addEventListener("click",o),t.cont_key&&e.addEventListener("keydown",a)}).catch(e=>{console.error("Something went wrong with fetch() in plugin-external-html.",e)}),new Promise(e=>{n=e})}simulate(e,t,s,n){"data-only"==t&&(n(),this.simulate_data_only(e,s)),"visual"==t&&this.simulate_visual(e,s,n)}create_simulation_data(e,t){const s={url:e.url,rt:this.jsPsych.randomization.sampleExGaussian(2e3,200,.005,!0)},n=this.jsPsych.pluginAPI.mergeSimulationData(s,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,n),n}simulate_data_only(e,t){const s=this.create_simulation_data(e,t);this.jsPsych.finishTrial(s)}simulate_visual(e,t,s){const n=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e,()=>{s(),e.cont_key?this.jsPsych.pluginAPI.pressKey(e.cont_key,n.rt):e.cont_btn&&this.jsPsych.pluginAPI.clickTarget(i.querySelector("#"+e.cont_btn),n.rt)})}}},2716:(e,t,s)=>{var n=s(5072),i=s.n(n),r=s(7825),a=s.n(r),o=s(7659),l=s.n(o),u=s(5056),d=s.n(u),h=s(540),c=s.n(h),p=s(1113),g=s.n(p),m=s(4633),v={};v.styleTagTransform=g(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=c(),i()(m.A,v),m.A&&m.A.locals&&m.A.locals},3047:(e,t,s)=>{s.d(t,{cY:()=>C,FA:()=>j,g:()=>O,gz:()=>X,vA:()=>i,Hk:()=>r,K3:()=>o,u:()=>h,KA:()=>u,Uj:()=>d,gR:()=>Q,Fy:()=>_,tD:()=>ee,A4:()=>c,bD:()=>Z,dI:()=>ne,hp:()=>$,T9:()=>b,Tj:()=>v,yU:()=>f,XA:()=>y,Ku:()=>ae,ZQ:()=>P,qc:()=>H,sr:()=>R,zJ:()=>w,c1:()=>E,Im:()=>W,lT:()=>A,zW:()=>D,jZ:()=>T,$g:()=>L,lV:()=>k,Cv:()=>z,$L:()=>M,kH:()=>G,gE:()=>x,Am:()=>J,I9:()=>Y,yw:()=>U,OE:()=>re,kj:()=>ie,As:()=>F,P1:()=>S,eX:()=>N});const n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(e,t){if(!e)throw r(t)},r=function(e){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){const t=[];let s=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[s++]=i:i<2048?(t[s++]=i>>6|192,t[s++]=63&i|128):55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[s++]=i>>18|240,t[s++]=i>>12&63|128,t[s++]=i>>6&63|128,t[s++]=63&i|128):(t[s++]=i>>12|224,t[s++]=i>>6&63|128,t[s++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){const i=e[t],r=t+1<e.length,a=r?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=i>>2,d=(3&i)<<4|a>>4;let h=(15&a)<<2|l>>6,c=63&l;o||(c=64,r||(h=64)),n.push(s[u],s[d],s[h],s[c])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let s=0,n=0;for(;s<e.length;){const i=e[s++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[s++];t[n++]=String.fromCharCode((31&i)<<6|63&r)}else if(i>239&&i<365){const r=((7&i)<<18|(63&e[s++])<<12|(63&e[s++])<<6|63&e[s++])-65536;t[n++]=String.fromCharCode(55296+(r>>10)),t[n++]=String.fromCharCode(56320+(1023&r))}else{const r=e[s++],a=e[s++];t[n++]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){const i=s[e.charAt(t++)],r=t<e.length?s[e.charAt(t)]:0;++t;const a=t<e.length?s[e.charAt(t)]:64;++t;const o=t<e.length?s[e.charAt(t)]:64;if(++t,null==i||null==r||null==a||null==o)throw new l;const u=i<<2|r>>4;if(n.push(u),64!==a){const e=r<<4&240|a>>2;if(n.push(e),64!==o){const e=a<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(e){const t=a(e);return o.encodeByteArray(t,!0)},d=function(e){return u(e).replace(/\./g,"")},h=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const s in t)t.hasOwnProperty(s)&&g(s)&&(e[s]=p(e[s],t[s]));return e}function g(e){return"__proto__"!==e}const m=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&h(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},v=e=>m()?.emulatorHosts?.[e],f=e=>{const t=v(e);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(s+1),10);return"["===t[0]?[t.substring(1,s-1),n]:[t.substring(0,s),n]},b=()=>m()?.config,y=e=>m()?.[`_${e}`];class C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,s))}}}function w(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function x(e){return(await fetch(e,{credentials:"include"})).ok}function _(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r={iss:`https://securetoken.google.com/${s}`,aud:s,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(r)),""].join(".")}const V={};let I=!1;function S(e,t){if("undefined"==typeof window||"undefined"==typeof document||!w(window.location.host)||V[e]===t||V[e]||I)return;function s(e){return`__firebase__banner__${e}`}V[e]=t;const n="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(V))V[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function r(){const e=function(e){let t=document.getElementById(e),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),s=!0),{created:s,element:t}}(n),t=s("text"),r=document.getElementById(t)||document.createElement("span"),a=s("learnmore"),o=document.getElementById(a)||document.createElement("a"),l=s("preprendIcon"),u=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(o,a);const s=function(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{I=!0,function(){const e=document.getElementById(n);e&&e.remove()}()},e}();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,l),t.append(u,r,o,s),document.body.appendChild(t)}i?(r.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',r.innerText="Preview backend running in this workspace."),r.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",r):r()}function P(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function T(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(P())}function E(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function R(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function k(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function A(){const e=P();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function L(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN}function D(){try{return"object"==typeof indexedDB}catch(e){return!1}}function N(){return new Promise((e,t)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(e){t(e)}})}class O extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,O.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j.prototype.create)}}class j{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],r=i?function(e,t){return e.replace(q,(e,s)=>{const n=t[s];return null!=n?String(n):`<${s}?>`})}(i,s):"Error",a=`${this.serviceName}: ${r} (${n}).`;return new O(n,a,s)}}const q=/\{\$([^}]+)}/g;function M(e){return JSON.parse(e)}function F(e){return JSON.stringify(e)}const B=function(e){let t={},s={},n={},i="";try{const r=e.split(".");t=M(h(r[0])||""),s=M(h(r[1])||""),i=r[2],n=s.d||{},delete s.d}catch(e){}return{header:t,claims:s,data:n,signature:i}},z=function(e){const t=B(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},H=function(e){const t=B(e).claims;return"object"==typeof t&&!0===t.admin};function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function W(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function G(e,t,s){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=t.call(s,e[i],i,e));return n}function Z(e,t){if(e===t)return!0;const s=Object.keys(e),n=Object.keys(t);for(const i of s){if(!n.includes(i))return!1;const s=e[i],r=t[i];if(K(s)&&K(r)){if(!Z(s,r))return!1}else if(s!==r)return!1}for(const e of n)if(!s.includes(e))return!1;return!0}function K(e){return null!==e&&"object"==typeof e}function J(e){const t=[];for(const[s,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Y(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[s,n]=e.split("=");t[decodeURIComponent(s)]=decodeURIComponent(n)}}),t}function $(e){const t=e.indexOf("?");if(!t)return"";const s=e.indexOf("#",t);return e.substring(t,s>0?s:void 0)}class X{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)s[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)s[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=s[e-3]^s[e-8]^s[e-14]^s[e-16];s[e]=4294967295&(t<<1|t>>>31)}let n,i,r=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=l^a&(o^l),i=1518500249):(n=a^o^l,i=1859775393):e<60?(n=a&o|l&(a|o),i=2400959708):(n=a^o^l,i=3395469782);const t=(r<<5|r>>>27)+n+u+i+s[e]&4294967295;u=l,l=o,o=4294967295&(a<<30|a>>>2),a=r,r=t}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const s=t-this.blockSize;let n=0;const i=this.buf_;let r=this.inbuf_;for(;n<t;){if(0===r)for(;n<=s;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(i[r]=e.charCodeAt(n),++r,++n,r===this.blockSize){this.compress_(i),r=0;break}}else for(;n<t;)if(i[r]=e[n],++r,++n,r===this.blockSize){this.compress_(i),r=0;break}}this.inbuf_=r,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let s=0;for(let t=0;t<5;t++)for(let n=24;n>=0;n-=8)e[s]=this.chain_[t]>>n&255,++s;return e}}function ee(e,t){const s=new te(e,t);return s.subscribe.bind(s)}class te{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let n;if(void 0===e&&void 0===t&&void 0===s)throw new Error("Missing Observer.");n=function(e){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:s},void 0===n.next&&(n.next=se),void 0===n.error&&(n.error=se),void 0===n.complete&&(n.complete=se);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function se(){}function ne(e,t){return`${e} failed: ${t} argument `}const ie=function(e){const t=[];let s=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r>=55296&&r<=56319){const t=r-55296;n++,i(n<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(n)-56320)}r<128?t[s++]=r:r<2048?(t[s++]=r>>6|192,t[s++]=63&r|128):r<65536?(t[s++]=r>>12|224,t[s++]=r>>6&63|128,t[s++]=63&r|128):(t[s++]=r>>18|240,t[s++]=r>>12&63|128,t[s++]=r>>6&63|128,t[s++]=63&r|128)}return t},re=function(e){let t=0;for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,s++):t+=3}return t};function ae(e){return e&&e._delegate?e._delegate:e}},4633:(e,t,s)=>{s.d(t,{A:()=>c});var n=s(1601),i=s.n(n),r=s(6314),a=s.n(r),o=s(4417),l=s.n(o),u=new URL(s(3707),s.b),d=a()(i()),h=l()(u);d.push([e.id,`@charset "UTF-8";\n/*!\n * surveyjs - Survey JavaScript library v2.2.0\n * Copyright (c) 2015-2025 Devsoft Baltic OÜ  - http://surveyjs.io/\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\n */\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 400;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu1aB.woff2) format("woff2");\n  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 400;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu1aB.woff2) format("woff2");\n  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 400;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu1aB.woff2) format("woff2");\n  unicode-range: U+1F00-1FFF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 400;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu1aB.woff2) format("woff2");\n  unicode-range: U+0370-03FF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 400;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu1aB.woff2) format("woff2");\n  unicode-range: U+0590-05FF, U+200C-2010, U+20AA, U+25CC, U+FB1D-FB4F;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 400;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu1aB.woff2) format("woff2");\n  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 400;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu1aB.woff2) format("woff2");\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 400;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-muw.woff2) format("woff2");\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 600;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu1aB.woff2) format("woff2");\n  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 600;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu1aB.woff2) format("woff2");\n  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 600;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu1aB.woff2) format("woff2");\n  unicode-range: U+1F00-1FFF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 600;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu1aB.woff2) format("woff2");\n  unicode-range: U+0370-03FF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 600;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu1aB.woff2) format("woff2");\n  unicode-range: U+0590-05FF, U+200C-2010, U+20AA, U+25CC, U+FB1D-FB4F;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 600;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu1aB.woff2) format("woff2");\n  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 600;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu1aB.woff2) format("woff2");\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 600;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-muw.woff2) format("woff2");\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 700;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu1aB.woff2) format("woff2");\n  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 700;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu1aB.woff2) format("woff2");\n  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 700;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu1aB.woff2) format("woff2");\n  unicode-range: U+1F00-1FFF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 700;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu1aB.woff2) format("woff2");\n  unicode-range: U+0370-03FF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 700;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu1aB.woff2) format("woff2");\n  unicode-range: U+0590-05FF, U+200C-2010, U+20AA, U+25CC, U+FB1D-FB4F;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 700;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu1aB.woff2) format("woff2");\n  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 700;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu1aB.woff2) format("woff2");\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\n}\n@font-face {\n  font-family: "Open Sans";\n  font-style: normal;\n  font-weight: 700;\n  font-stretch: 100%;\n  src: url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-muw.woff2) format("woff2");\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n}\n:root {\n  --font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;\n}\n\n:root {\n  --sjs-transition-duration: 150ms;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes changeHeight {\n  from {\n    height: var(--animation-height-from);\n  }\n  to {\n    height: var(--animation-height-to);\n  }\n}\n@keyframes moveInWithOverflow {\n  from {\n    overflow: hidden;\n    height: var(--animation-height-from);\n    min-height: var(--animation-height-from);\n    margin-top: 0;\n    margin-bottom: 0;\n    padding-top: 0;\n    padding-bottom: 0;\n    border-top-width: 0;\n    border-bottom-width: 0;\n  }\n  99% {\n    overflow: hidden;\n    margin-top: var(--animation-margin-top);\n    margin-bottom: var(--animation-margin-bottom);\n    padding-top: var(--animation-padding-top);\n    padding-bottom: var(--animation-padding-bottom);\n    border-top-width: var(--animation-border-top-width);\n    border-bottom-width: var(--animation-border-bottom-width);\n    height: var(--animation-height-to);\n    min-height: var(--animation-height-to);\n  }\n  to {\n    overflow: visible;\n    margin-top: var(--animation-margin-top);\n    margin-bottom: var(--animation-margin-bottom);\n    padding-top: var(--animation-padding-top);\n    padding-bottom: var(--animation-padding-bottom);\n    border-top-width: var(--animation-border-top-width);\n    border-bottom-width: var(--animation-border-bottom-width);\n    height: var(--animation-height-to);\n    min-height: var(--animation-height-to);\n  }\n}\n@keyframes moveIn {\n  from {\n    height: 0;\n  }\n  to {\n    height: var(--animation-height);\n  }\n}\n@keyframes paddingFadeIn {\n  from {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n  to {\n    padding-bottom: var(--animation-padding-bottom);\n    padding-top: var(--animation-padding-top);\n  }\n}\n.sv-action-bar {\n  display: flex;\n  box-sizing: content-box;\n  position: relative;\n  align-items: center;\n  margin-left: auto;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.sv-action-bar-separator {\n  display: inline-block;\n  width: 1px;\n  height: 24px;\n  vertical-align: middle;\n  margin-right: 16px;\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sv-action-bar--default-size-mode .sv-action-bar-separator {\n  margin: 0 var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sv-action-bar--small-size-mode .sv-action-bar-separator {\n  margin: 0 calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-action-bar-item {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  display: flex;\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n  box-sizing: border-box;\n  border: none;\n  border-radius: calc(0.5 * (var(--sjs-corner-radius, 4px)));\n  background-color: rgba(0, 0, 0, 0);\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  cursor: pointer;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  overflow-x: hidden;\n  white-space: nowrap;\n}\n\nbutton.sv-action-bar-item {\n  overflow: hidden;\n}\n\n.sv-action-bar--default-size-mode .sv-action-bar-item {\n  height: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  margin: 0 var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sv-action-bar--small-size-mode .sv-action-bar-item {\n  height: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  line-height: var(--sjs-font-size, 16px);\n  margin: 0 calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-action:first-of-type .sv-action-bar-item {\n  margin-inline-start: 0;\n}\n\n.sv-action:last-of-type .sv-action-bar-item {\n  margin-inline-end: 0;\n}\n\n.sv-action-bar--default-size-mode .sv-action-bar-item__title--with-icon {\n  margin-inline-start: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sv-action-bar--small-size-mode .sv-action-bar-item__title--with-icon {\n  margin-inline-start: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-action-bar-item__icon svg {\n  display: block;\n}\n\n.sv-action-bar-item__icon use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-action-bar-item:hover, .sv-action-bar-item:focus {\n  outline: none;\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sv-action-bar-item:active, .sv-action-bar-item.svc-toolbar__item--pressed {\n  opacity: 0.5;\n}\n\n.sv-action-bar-item.svc-toolbar__item--active {\n  outline: none;\n}\n\n.sv-action-bar-item:disabled {\n  opacity: 0.25;\n  cursor: default;\n}\n\n.sv-action-bar-item__title {\n  color: inherit;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n\n.sv-action-bar-item--secondary .sv-action-bar-item__icon use {\n  fill: var(--sjs-secondary-backcolor, var(--secondary, #ff9814));\n}\n\n.sv-action-bar-item--active .sv-action-bar-item__icon use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv-action-bar-item-dropdown {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  display: flex;\n  height: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n  box-sizing: border-box;\n  border: none;\n  border-radius: calc(0.5 * (var(--sjs-corner-radius, 4px)));\n  background-color: rgba(0, 0, 0, 0);\n  cursor: pointer;\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  font-size: var(--sjs-font-size, 16px);\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n}\n\n.sv-expand-action:before {\n  content: "";\n  display: inline-block;\n  background-image: url(${h});\n  background-repeat: no-repeat;\n  background-position: center center;\n  height: 10px;\n  width: 12px;\n  margin: auto 8px;\n}\n\n.sv-expand-action--expanded:before {\n  transform: rotate(180deg);\n}\n\n.sv-dots {\n  width: 48px;\n}\n\n.sv-dots__item {\n  width: 100%;\n}\n\n.sv-dots__item .sv-action-bar-item__icon {\n  margin: auto;\n}\n\n.sv-action--hidden {\n  width: 0px;\n  height: 0px;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.sv-action--hidden .sv-action__content {\n  min-width: fit-content;\n}\n\n.sv-action__content {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.sv-action__content > * {\n  flex: 0 0 auto;\n}\n\n.sv-action--space {\n  margin-left: auto;\n}\n\n.sv-action-bar-item--pressed:not(.sv-action-bar-item--active) {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  opacity: 50%;\n}\n\n.sv-dragged-element-shortcut {\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-width: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: calc(4.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  cursor: grabbing;\n  position: absolute;\n  z-index: 10000;\n  box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.1);\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-size, 16px);\n  padding-left: calc(2.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n}\n\n.sv-matrixdynamic__drag-icon {\n  padding-top: calc(1.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-matrixdynamic__drag-icon:after {\n  content: " ";\n  display: block;\n  height: calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(2.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border: 1px solid #e7e7e7;\n  box-sizing: border-box;\n  border-radius: calc(1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  cursor: move;\n  margin-top: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-matrixdynamic-dragged-row {\n  cursor: grabbing;\n  position: absolute;\n  z-index: 10000;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n}\n\n.sv-matrixdynamic-dragged-row .sd-table__row {\n  box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  display: flex;\n  flex-grow: 0;\n  flex-shrink: 0;\n  align-items: center;\n  line-height: 0;\n}\n\n.sv-matrixdynamic-dragged-row .sd-table__cell.sd-table__cell--drag > div {\n  background-color: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  min-height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-table__cell--header.sd-table__cell--drag, .sd-table__cell.sd-table__cell--drag {\n  padding-right: 0;\n  padding-left: 0;\n}\n\n.sd-question--mobile .sd-table__cell--header.sd-table__cell--drag, .sd-question--mobile .sd-table__cell.sd-table__cell--drag {\n  display: none;\n}\n\n.sv-matrix-row--drag-drop-ghost-mod td {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sv-matrix-row--drag-drop-ghost-mod td > * {\n  visibility: hidden;\n}\n\n.sv-drag-drop-choices-shortcut {\n  cursor: grabbing;\n  position: absolute;\n  z-index: 10000;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  min-width: 100px;\n  max-width: 400px;\n}\n\n.sv-drag-drop-choices-shortcut .sv-ranking-item {\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-drag-drop-choices-shortcut .sv-ranking-item .sv-ranking-item__text .sv-string-viewer, .sv-drag-drop-choices-shortcut .sv-ranking-item .sv-ranking-item__text .sv-string-editor {\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.sv-drag-drop-choices-shortcut__content.sv-drag-drop-choices-shortcut__content {\n  min-width: 100px;\n  box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  border-radius: calc(4.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  padding-right: calc(2 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  margin-left: 0;\n}\n\n.sv-drag-drop-image-picker-shortcut {\n  cursor: grabbing;\n  position: absolute;\n  z-index: 10000;\n  box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  padding: calc(0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  border-radius: calc(0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\nsv-popup {\n  display: block;\n  position: absolute;\n}\n\n.sv-popup {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  outline: none;\n  z-index: 2000;\n  height: 100vh;\n}\n\n.sv-dropdown-popup {\n  height: 0;\n}\n\n.sv-popup.sv-popup-inner {\n  height: 0;\n}\n\n.sv-popup-inner > .sv-popup__container {\n  margin-top: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-list__item--with-icon .sv-popup-inner > .sv-popup__container {\n  margin-top: calc(-0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-popup--menu-popup > .sv-popup__container {\n  background: var(--lbr-popup-menu-background-color-global, var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3)));\n  border-radius: var(--lbr-popup-menu-corner-radius, var(--sjs-corner-radius, 4px));\n  box-shadow: var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1));\n}\n\n.sv-popup--menu-popup > .sv-popup__container > .sv-popup__body-content {\n  background-color: var(--lbr-popup-menu-background-color, var(--sjs-general-backcolor, var(--background, #fff)));\n  border-radius: var(--lbr-popup-menu-corner-radius, var(--sjs-corner-radius, 4px));\n  height: 100%;\n}\n\n.sv-popup__container {\n  position: absolute;\n  padding: 0;\n}\n\n.sv-popup__content {\n  min-width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  position: relative;\n}\n\n.sv-popup__body-content {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  max-height: 90vh;\n  max-width: 100vw;\n}\n\n.sv-popup--modal-popup {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--lbr-dialog-screen-color, var(--background-semitransparent, rgba(144, 144, 144, 0.5)));\n  padding: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(15 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(8 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n}\n\n.sv-popup--modal-popup > .sv-popup__container {\n  position: static;\n  display: flex;\n  background-color: var(--lbr-dialog-background-color, var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9)));\n  border-radius: var(--lbr-dialog-corner-radius, calc(2 * (var(--sjs-corner-radius, 4px))));\n  box-shadow: var(--lbr-dialog-shadow-2-offset-x, 0px) var(--lbr-dialog-shadow-2-offset-y, 2px) var(--lbr-dialog-shadow-2-blur, 6px) var(--lbr-dialog-shadow-2-spread, 0px) var(--lbr-dialog-shadow-2-color, rgba(0, 0, 0, 0.1)), var(--lbr-dialog-shadow-1-offset-x, 0px) var(--lbr-dialog-shadow-1-offset-y, 8px) var(--lbr-dialog-shadow-1-blur, 16px) var(--lbr-dialog-shadow-1-spread, 0px) var(--lbr-dialog-shadow-1-color, rgba(0, 0, 0, 0.1));\n}\n\n.sv-popup--modal-popup > .sv-popup__container > .sv-popup__body-content {\n  padding: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: auto;\n  min-width: 452px;\n  gap: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-popup--modal-popup .sv-popup__body-footer .sv-modal-footer-action-bar {\n  overflow: visible;\n}\n\n.sv-popup--modal-popup .sv-popup__scrolling-content {\n  padding: 2px;\n  margin: -2px;\n}\n\n.sd-root-modern--mobile .sv-popup--modal-popup .sv-popup__body-content {\n  min-width: auto;\n}\n\n.sv-popup--confirm .sv-popup__body-content .sv-string-viewer {\n  color: var(--sjs-font-editorfont-color, var(--sjs-general-forecolor, rgba(0, 0, 0, 0.91)));\n  align-self: self-start;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-size, 16px);\n  font-style: normal;\n  font-weight: 400;\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n}\n\n.sv-popup__scrolling-content {\n  height: 100%;\n  overflow: auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.sv-popup__scrolling-content::-webkit-scrollbar, .sv-popup__scrolling-content *::-webkit-scrollbar {\n  height: 6px;\n  width: 6px;\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sv-popup__scrolling-content::-webkit-scrollbar-thumb, .sv-popup__scrolling-content *::-webkit-scrollbar-thumb {\n  background: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n}\n\n.sv-popup--show-pointer.sv-popup--top .sv-popup__pointer {\n  transform: translate(calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))))) rotate(180deg);\n}\n\n.sv-popup--show-pointer.sv-popup--bottom .sv-popup__pointer {\n  transform: translate(calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px)))), calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n}\n\n.sv-popup--show-pointer.sv-popup--right .sv-popup__container {\n  transform: translate(var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sv-popup--show-pointer.sv-popup--right .sv-popup__container .sv-popup__pointer {\n  transform: translate(-12px, -4px) rotate(-90deg);\n}\n\n.sv-popup--show-pointer.sv-popup--left .sv-popup__container {\n  transform: translate(calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n}\n\n.sv-popup--show-pointer.sv-popup--left .sv-popup__container .sv-popup__pointer {\n  transform: translate(-4px, -4px) rotate(90deg);\n}\n\n.sv-popup__pointer {\n  display: block;\n  position: absolute;\n}\n\n.sv-popup__pointer:after {\n  content: " ";\n  display: block;\n  width: 0;\n  height: 0;\n  border-left: var(--sjs-base-unit, var(--base-unit, 8px)) solid rgba(0, 0, 0, 0);\n  border-right: var(--sjs-base-unit, var(--base-unit, 8px)) solid rgba(0, 0, 0, 0);\n  border-bottom: var(--sjs-base-unit, var(--base-unit, 8px)) solid var(--sjs-general-backcolor, var(--background, #fff));\n  align-self: center;\n}\n\n.sv-popup__body-header {\n  font-family: Open Sans;\n  font-size: calc(1.5 * (var(--sjs-font-size, 16px)));\n  line-height: calc(2 * (var(--sjs-font-size, 16px)));\n  font-style: normal;\n  font-weight: 700;\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sv-popup__body-footer {\n  display: flex;\n}\n\n.sv-popup__body-footer .sv-action-bar {\n  gap: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  overflow: visible;\n}\n\n.sv-popup--menu-phone, .sv-popup--menu-tablet {\n  z-index: 2001;\n  padding: 0;\n  width: 100%;\n  height: var(--sv-popup-overlay-height, 100vh);\n}\n\n.sv-popup--menu-phone .sv-popup__body-footer-item, .sv-popup--menu-tablet .sv-popup__body-footer-item {\n  width: 100%;\n}\n\n.sv-popup--menu-phone .sv-popup__body-footer .sv-action-bar, .sv-popup--menu-tablet .sv-popup__body-footer .sv-action-bar {\n  width: 100%;\n  justify-content: flex-start;\n}\n\n.sv-popup--menu-phone .sv-popup__body-footer .sv-action-bar .sv-action, .sv-popup--menu-tablet .sv-popup__body-footer .sv-action-bar .sv-action {\n  flex: 0 0 auto;\n}\n\n.sv-popup--menu-phone .sv-popup__body-footer, .sv-popup--menu-tablet .sv-popup__body-footer {\n  padding: var(--lbr-popup-menu-footer-padding-top, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))))) var(--lbr-popup-menu-footer-padding-right, 0px) var(--lbr-popup-menu-footer-padding-bottom, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))))) var(--lbr-popup-menu-footer-padding-left, 0px);\n  border-top: var(--lbr-popup-menu-footer-border-width-top, 1px) solid var(--lbr-popup-menu-footer-border-color, var(--sjs-border-light, var(--border-light, #eaeaea)));\n  background: var(--lbr-popup-menu-footer-background-color, var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9)));\n}\n\n.sv-popup--menu-phone .sv-list__filter, .sv-popup--menu-tablet .sv-list__filter {\n  display: flex;\n  align-items: center;\n  margin-bottom: 0;\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-popup--menu-phone .sv-list, .sv-popup--menu-tablet .sv-list {\n  flex-grow: 1;\n}\n\n.sv-popup--menu-phone .sv-list__filter-icon, .sv-popup--menu-tablet .sv-list__filter-icon {\n  position: static;\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-popup--menu-phone .sv-list__empty-container, .sv-popup--menu-tablet .sv-list__empty-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-grow: 1;\n}\n\n.sv-popup--menu-phone .sv-list__filter-clear-button, .sv-popup--menu-tablet .sv-list__filter-clear-button {\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  appearance: none;\n  border: none;\n  border-radius: 100%;\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sv-popup--menu-phone .sv-list__filter-clear-button svg, .sv-popup--menu-tablet .sv-list__filter-clear-button svg {\n  height: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-popup--menu-phone .sv-list__filter-clear-button svg use, .sv-popup--menu-tablet .sv-list__filter-clear-button svg use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-popup--menu-phone .sv-list__filter-clear-button:hover, .sv-popup--menu-tablet .sv-list__filter-clear-button:hover {\n  border-radius: var(--lbr-popup-menu-search-clear-button-corner-radius, 1024px);\n  background: var(--lbr-popup-menu-search-clear-button-background-color-hovered, var(--sjs-special-red-light, rgba(229, 10, 62, 0.1)));\n}\n\n.sv-popup--menu-phone .sv-list__filter-clear-button:hover use, .sv-popup--menu-tablet .sv-list__filter-clear-button:hover use {\n  fill: var(--lbr-popup-menu-search-clear-button-icon-color-hovered, var(--sjs-special-red, #E50A3E));\n}\n\n.sv-popup--menu-phone .sv-list__input, .sv-popup--menu-tablet .sv-list__input {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sv-popup--menu-phone .sv-list__item:hover .sv-list__item-body, .sv-popup--menu-phone .sv-list__item:focus .sv-list__item-body, .sv-popup--menu-phone .sv-list__item--focused .sv-list__item-body, .sv-popup--menu-tablet .sv-list__item:hover .sv-list__item-body, .sv-popup--menu-tablet .sv-list__item:focus .sv-list__item-body, .sv-popup--menu-tablet .sv-list__item--focused .sv-list__item-body {\n  background: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sv-popup--menu-phone .sv-list__item:hover.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-phone .sv-list__item:focus.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-phone .sv-list__item--focused.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-tablet .sv-list__item:hover.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-tablet .sv-list__item:focus.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-tablet .sv-list__item--focused.sv-list__item--selected .sv-list__item-body {\n  background: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  font-weight: 600;\n}\n\n.sv-popup--menu-phone.sv-multi-select-list .sv-list__item:hover.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-phone.sv-multi-select-list .sv-list__item:focus.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-phone.sv-multi-select-list .sv-list__item--focused.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-tablet.sv-multi-select-list .sv-list__item:hover.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-tablet.sv-multi-select-list .sv-list__item:focus.sv-list__item--selected .sv-list__item-body, .sv-popup--menu-tablet.sv-multi-select-list .sv-list__item--focused.sv-list__item--selected .sv-list__item-body {\n  background: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  font-weight: 400;\n}\n\n.sv-popup--menu-phone > .sv-popup__container {\n  width: 100%;\n  height: calc(var(--sv-popup-overlay-height, 100vh));\n  max-width: 100vw;\n  max-height: calc(var(--sv-popup-overlay-height, 100vh));\n  border: unset;\n  box-shadow: unset;\n  box-sizing: content-box;\n  background: var(--lbr-popup-menu-background-color-global, var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3)));\n}\n\n.sv-popup--menu-phone > .sv-popup__container > .sv-popup__body-content {\n  background-color: var(--lbr-popup-menu-background-color, var(--sjs-general-backcolor, var(--background, #fff)));\n  max-height: var(--sv-popup-overlay-height, 100vh);\n  max-width: 100vw;\n  height: calc(var(--sv-popup-overlay-height, 100vh));\n}\n\n.sv-popup--menu-tablet {\n  background: var(--lbr-dialog-screen-color, var(--background-semitransparent, rgba(144, 144, 144, 0.5)));\n}\n\n.sv-popup--menu-tablet > .sv-popup__container {\n  border: unset;\n  box-sizing: content-box;\n  background: var(--lbr-popup-menu-background-color-global, var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3)));\n  --sv-popup-overlay-max-height: calc(var(--sv-popup-overlay-height, 100vh) - var(--sjs-base-unit, var(--base-unit, 8px)) * 8);\n  --sv-popup-overlay-max-width: calc(100% - var(--sjs-base-unit, var(--base-unit, 8px)) * 8);\n  position: absolute;\n  transform: translate(-50%, -50%);\n  left: 50%;\n  top: 50%;\n  max-height: var(--sv-popup-overlay-max-height);\n  min-height: min(var(--sv-popup-overlay-max-height), 30 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: auto;\n  width: auto;\n  min-width: min(40 * (var(--sjs-base-unit, var(--base-unit, 8px))), var(--sv-popup-overlay-max-width));\n  max-width: var(--sv-popup-overlay-max-width);\n  border-radius: var(--lbr-popup-menu-corner-radius, var(--sjs-corner-radius, 4px));\n  overflow: hidden;\n  box-shadow: var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1));\n}\n\n.sv-popup--menu-tablet > .sv-popup__container > .sv-popup__body-content {\n  background-color: var(--lbr-popup-menu-background-color, var(--sjs-general-backcolor, var(--background, #fff)));\n  max-width: 100vw;\n  max-height: calc(var(--sv-popup-overlay-height, 100vh) - var(--sjs-base-unit, var(--base-unit, 8px)) * 8);\n  min-height: min(var(--sv-popup-overlay-max-height), 30 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: auto;\n}\n\n.sv-popup--menu-tablet .sv-popup__content, .sv-popup--menu-tablet .sv-popup__scrolling-content, .sv-popup--menu-tablet .sv-list__container {\n  flex-grow: 1;\n}\n\n.sv-popup--visible {\n  opacity: 1;\n}\n\n.sv-popup--hidden {\n  opacity: 0;\n}\n\n.sv-popup--enter {\n  animation-name: fadeIn;\n  animation-fill-mode: forwards;\n  animation-duration: 0.15s;\n}\n\n.sv-popup--modal-popup.sv-popup--enter {\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-duration: 0.25s;\n}\n\n.sv-popup--leave {\n  animation-direction: reverse;\n  animation-name: fadeIn;\n  animation-fill-mode: forwards;\n  animation-duration: 0.15s;\n}\n\n.sv-popup--modal-popup.sv-popup--leave {\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n  animation-duration: 0.25s;\n}\n\n.sv-popup--hidden {\n  opacity: 0;\n}\n\n@keyframes modalMoveUp {\n  from {\n    transform: translateY(64px);\n  }\n  to {\n    transform: translateY(0);\n  }\n}\n.sv-popup--modal-popup.sv-popup--leave .sv-popup__container, .sv-popup--modal-popup.sv-popup--enter .sv-popup__container {\n  animation-name: modalMoveUp;\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-fill-mode: forwards;\n  animation-duration: 0.25s;\n}\n\n.sv-popup--modal-popup.sv-popup--leave .sv-popup__container {\n  animation-direction: reverse;\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n}\n\n.sv-button-group {\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  font-size: var(--sjs-font-size, 16px);\n  overflow-x: auto;\n  border: 1px solid var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sv-button-group:focus-within {\n  box-shadow: 0 0 0 1px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  border-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv-button-group__item {\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  appearance: none;\n  flex-grow: 1;\n  flex-basis: 0;\n  padding: 11px calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  outline: none;\n  font-size: var(--sjs-font-size, 16px);\n  font-weight: 400;\n  background: var(--sjs-general-backcolor, var(--background, #fff));\n  cursor: pointer;\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  position: relative;\n}\n\n.sv-button-group__item:not(:last-of-type) {\n  border-right: 1px solid var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sv-button-group__item--hover:hover {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sv-button-group__item-icon {\n  display: block;\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-button-group__item-icon use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-button-group__item--selected {\n  font-weight: 600;\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv-button-group__item--selected .sv-button-group__item-icon use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv-button-group__item--selected:hover {\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sv-button-group__item-decorator {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n.sv-button-group__item-caption {\n  display: block;\n}\n\n.sv-button-group__item-icon + .sv-button-group__item-caption {\n  margin-left: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sv-button-group__item--disabled {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  cursor: default;\n}\n\n.sv-button-group__item--disabled .sv-button-group__item-decorator {\n  opacity: 0.25;\n  font-weight: normal;\n}\n\n.sv-button-group__item--disabled .sv-button-group__item-icon use {\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sv-button-group__item--disabled:hover {\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sv-button-group:focus-within {\n  box-shadow: 0 0 0 1px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  border-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv-visuallyhidden {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0 0 0 0);\n}\n\n.sv-hidden {\n  display: none !important;\n}\n\n.sv-title-actions {\n  display: flex;\n  align-items: center;\n  width: 100%;\n}\n\n.sv-title-actions__title {\n  flex-wrap: wrap;\n  max-width: 90%;\n  min-width: 50%;\n  white-space: initial;\n}\n\n.sv-action-title-bar {\n  min-width: 56px;\n}\n\n.sv-title-actions .sv-title-actions__title {\n  flex-wrap: wrap;\n  flex: 0 1 auto;\n  max-width: unset;\n  min-width: unset;\n}\n\n.sv-title-actions .sv-action-title-bar {\n  flex: 1 1 auto;\n  justify-content: flex-end;\n  min-width: unset;\n}\n\n.sv_window {\n  position: fixed;\n  bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: var(--sjs-base-unit, var(--base-unit, 8px));\n  border: 1px solid var(--sjs-border-inside, var(--border-inside, rgba(0, 0, 0, 0.16)));\n  box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n  background-clip: padding-box;\n  z-index: 100;\n  max-height: 50vh;\n  overflow: auto;\n  box-sizing: border-box;\n  background: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  width: calc(100% - 4 * (var(--sjs-base-unit, var(--base-unit, 8px)))) !important;\n}\n\n@-moz-document url-prefix() {\n  .sv_window, .sv_window * {\n    scrollbar-width: thin;\n    scrollbar-color: var(--sjs-border-default, var(--border, #d6d6d6)) rgba(0, 0, 0, 0);\n  }\n}\n.sv_window::-webkit-scrollbar, .sv_window *::-webkit-scrollbar {\n  width: 12px;\n  height: 12px;\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sv_window::-webkit-scrollbar-thumb, .sv_window *::-webkit-scrollbar-thumb {\n  border: 4px solid rgba(0, 0, 0, 0);\n  background-clip: padding-box;\n  border-radius: 32px;\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sv_window::-webkit-scrollbar-track, .sv_window *::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sv_window::-webkit-scrollbar-thumb:hover, .sv_window *::-webkit-scrollbar-thumb:hover {\n  border: 2px solid rgba(0, 0, 0, 0);\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sv_window_root-content {\n  height: 100%;\n}\n\n.sv_window--full-screen {\n  top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  left: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  max-height: 100%;\n  width: initial !important;\n  max-width: initial !important;\n}\n\n.sv_window_header {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.sv_window_content {\n  overflow: hidden;\n}\n\n.sv_window--collapsed {\n  height: initial;\n}\n\n.sv_window--collapsed .sv_window_header {\n  height: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) var(--sjs-base-unit, var(--base-unit, 8px)) var(--sjs-base-unit, var(--base-unit, 8px)) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: var(--sjs-base-unit, var(--base-unit, 8px));\n  display: flex;\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  box-sizing: content-box;\n}\n\n.sv_window--collapsed .sv_window_content {\n  display: none;\n}\n\n.sv_window--collapsed .sv_window_buttons_container {\n  margin-top: 0;\n  margin-right: 0;\n}\n\n.sv_window_header_title_collapsed {\n  color: var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91));\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  font-weight: 600;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  flex: 1;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n\n.sv_window_header_description {\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  font-feature-settings: "salt" on;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.sv_window_buttons_container {\n  position: fixed;\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-right: var(--sjs-base-unit, var(--base-unit, 8px));\n  display: flex;\n  gap: var(--sjs-base-unit, var(--base-unit, 8px));\n  z-index: 10000;\n}\n\n.sv_window_button {\n  display: flex;\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n  justify-content: center;\n  align-items: center;\n  border-radius: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  cursor: pointer;\n}\n\n.sv_window_button:hover, .sv_window_button:active {\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n}\n\n.sv_window_button:hover svg use, .sv_window_button:hover svg path, .sv_window_button:active svg use, .sv_window_button:active svg path {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv_window_button:active {\n  opacity: 0.5;\n}\n\n.sv_window_button svg use, .sv_window_button svg path {\n  fill: var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45));\n}\n\nsv-brand-info, .sv-brand-info {\n  z-index: 1;\n  position: relative;\n  margin-top: 1px;\n}\n\n.sv-brand-info {\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  text-align: right;\n  color: #161616;\n  padding: 24px 40px;\n}\n\n.sv-brand-info a {\n  color: #161616;\n  text-decoration-line: underline;\n}\n\n.sd-body--static .sv-brand-info {\n  padding-top: 0;\n  margin-top: 16px;\n}\n\n.sd-body--responsive .sv-brand-info {\n  padding-top: 16px;\n  margin-top: -8px;\n}\n\n.sd-root-modern--mobile .sv-brand-info {\n  padding: 48px 24px 8px 24px;\n  margin-top: 0;\n  text-align: center;\n}\n\n.sv-brand-info__text {\n  font-weight: 600;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  color: #161616;\n}\n\n.sv-brand-info__logo {\n  display: inline-block;\n}\n\n.sv-brand-info__logo img {\n  width: 118px;\n}\n\n.sv-brand-info__terms {\n  font-weight: 400;\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  line-height: var(--sjs-font-size, 16px);\n  padding-top: 4px;\n}\n\n.sv-brand-info__terms a {\n  color: #909090;\n}\n\n.sd-body--responsive .sv-brand-info {\n  padding-right: 0;\n  padding-left: 0;\n}\n\n.sv-ranking {\n  outline: none;\n  user-select: none;\n  -webkit-user-select: none;\n}\n\n.sv-ranking-item {\n  cursor: pointer;\n  position: relative;\n  opacity: 1;\n}\n\n.sv-ranking-item:focus .sv-ranking-item__icon--hover {\n  visibility: hidden;\n}\n\n.sv-ranking-item:hover:not(:focus) .sv-ranking-item__icon--hover {\n  visibility: visible;\n}\n\n.sv-question--disabled .sv-ranking-item:hover .sv-ranking-item__icon--hover {\n  visibility: hidden;\n}\n\n.sv-ranking-item:focus {\n  outline: none;\n}\n\n.sv-ranking-item:focus .sv-ranking-item__icon--focus {\n  visibility: visible;\n  top: calc(0.6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-item:focus .sv-ranking-item__index {\n  background: var(--sjs-general-backcolor, var(--background, #fff));\n  outline: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv-ranking-item__content.sv-ranking-item__content {\n  display: flex;\n  align-items: center;\n  line-height: 1em;\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0px;\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-item__icon-container {\n  position: relative;\n  left: 0;\n  bottom: 0;\n  flex-shrink: 0;\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  align-self: flex-start;\n  padding-left: var(--sjs-base-unit, var(--base-unit, 8px));\n  padding-right: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-left: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: content-box;\n}\n\n.sv-ranking-item--disabled.sv-ranking-item--disabled, .sv-ranking-item--readonly.sv-ranking-item--readonly, .sv-ranking-item--preview.sv-ranking-item--preview {\n  cursor: initial;\n  user-select: initial;\n  -webkit-user-select: initial;\n}\n\n.sv-ranking-item--disabled.sv-ranking-item--disabled .sv-ranking-item__icon-container.sv-ranking-item__icon-container .sv-ranking-item__icon.sv-ranking-item__icon, .sv-ranking-item--readonly.sv-ranking-item--readonly .sv-ranking-item__icon-container.sv-ranking-item__icon-container .sv-ranking-item__icon.sv-ranking-item__icon, .sv-ranking-item--preview.sv-ranking-item--preview .sv-ranking-item__icon-container.sv-ranking-item__icon-container .sv-ranking-item__icon.sv-ranking-item__icon {\n  visibility: hidden;\n}\n\n.sv-ranking-item__icon.sv-ranking-item__icon {\n  visibility: hidden;\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  position: absolute;\n  top: var(--sjs-base-unit, var(--base-unit, 8px));\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-item__index.sv-ranking-item__index {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  border-radius: 100%;\n  border: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid rgba(0, 0, 0, 0);\n  width: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  box-sizing: border-box;\n  font-weight: 600;\n  margin-left: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  transition: outline var(--sjs-transition-duration, 150ms), background var(--sjs-transition-duration, 150ms);\n  outline: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid rgba(0, 0, 0, 0);\n  align-self: self-start;\n}\n\n.sv-ranking-item__index.sv-ranking-item__index svg {\n  fill: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  width: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  height: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n}\n\n.sv-ranking-item__text {\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  margin: 0 calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  overflow-wrap: break-word;\n  word-break: normal;\n  align-self: self-start;\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sv-ranking-item__text .sv-string-viewer, .sv-ranking-item__text .sv-string-editor {\n  overflow: initial;\n  white-space: pre-line;\n}\n\n.sd-ranking--disabled .sv-ranking-item__text {\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  opacity: 0.25;\n}\n\n.sv-ranking-item--disabled .sv-ranking-item__text {\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  opacity: 0.25;\n}\n\n.sv-ranking-item--readonly .sv-ranking-item__index {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sv-ranking-item--preview .sv-ranking-item__index {\n  background-color: rgba(0, 0, 0, 0);\n  border: 1px solid var(--sjs-general-forecolor, var(--foreground, #161616));\n  box-sizing: border-box;\n}\n\n.sv-ranking-item__ghost.sv-ranking-item__ghost {\n  display: none;\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(31 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  z-index: 1;\n  position: absolute;\n  left: 0;\n  top: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n[dir=rtl] .sv-ranking-item__ghost {\n  left: initilal;\n  right: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-item--ghost {\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-item--ghost .sv-ranking-item__text .sv-string-viewer, .sv-ranking-item--ghost .sv-ranking-item__text .sv-string-editor {\n  white-space: unset;\n}\n\n.sv-ranking-item--ghost .sv-ranking-item__ghost {\n  display: block;\n}\n\n.sv-ranking-item--ghost .sv-ranking-item__content {\n  visibility: hidden;\n}\n\n.sv-ranking-item--drag .sv-ranking-item__content {\n  box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1));\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking--drag .sv-ranking-item:hover .sv-ranking-item__icon {\n  visibility: hidden;\n}\n\n.sv-ranking-item--drag .sv-ranking-item__icon--hover {\n  visibility: visible;\n}\n\n.sv-ranking--mobile .sv-ranking-item__icon--hover {\n  visibility: visible;\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-ranking--mobile.sv-ranking--drag .sv-ranking-item--ghost .sv-ranking-item__icon.sv-ranking-item__icon--hover {\n  visibility: hidden;\n}\n\n.sv-ranking--mobile.sv-ranking-shortcut {\n  max-width: 80%;\n}\n\n.sv-ranking--mobile .sv-ranking-item__index.sv-ranking-item__index {\n  margin-left: 0;\n}\n\n.sv-ranking--mobile .sd-element--with-frame .sv-ranking-item__icon {\n  margin-left: 0;\n}\n\n.sv-ranking--design-mode .sv-ranking-item:hover .sv-ranking-item__icon {\n  visibility: hidden;\n}\n\n.sv-ranking--disabled {\n  opacity: 0.8;\n}\n\n.sv-ranking-shortcut[hidden] {\n  display: none;\n}\n\n.sv-ranking-shortcut .sv-ranking-item__icon {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv-ranking-shortcut .sv-ranking-item__text {\n  margin-right: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-shortcut .sv-ranking-item__icon--hover {\n  visibility: visible;\n}\n\n.sv-ranking-shortcut .sv-ranking-item__icon {\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sv-ranking-shortcut .sv-ranking-item__content {\n  padding-left: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-shortcut .sv-ranking-item__icon-container {\n  margin-left: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-shortcut {\n  cursor: grabbing;\n  position: absolute;\n  z-index: 10000;\n  border-radius: calc(12.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  min-width: 100px;\n  max-width: 400px;\n  box-shadow: var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1));\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n}\n\n.sv-ranking-shortcut .sv-ranking-item {\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking-shortcut .sv-ranking-item .sv-ranking-item__text .sv-string-viewer, .sv-ranking-shortcut .sv-ranking-item .sv-ranking-item__text .sv-string-editor {\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.sv-ranking--select-to-rank {\n  display: flex;\n}\n\n.sv-ranking--select-to-rank-vertical {\n  flex-direction: column-reverse;\n}\n\n.sv-ranking--select-to-rank-vertical .sv-ranking__containers-divider {\n  margin: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n  height: 1px;\n}\n\n.sv-ranking--select-to-rank-vertical .sv-ranking__container--empty {\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.sv-ranking-item--animate-item-removing {\n  animation-name: moveIn, fadeIn;\n  animation-direction: reverse;\n  animation-fill-mode: forwards;\n  animation-timing-function: linear;\n  animation-duration: var(--sjs-ranking-move-out-duration, 150ms), var(--sjs-ranking-fade-out-duration, 100ms);\n  animation-delay: var(--sjs-ranking-move-out-delay, 0ms), 0s;\n}\n\n.sv-ranking-item--animate-item-adding {\n  animation-name: moveIn, fadeIn;\n  opacity: 0;\n  animation-fill-mode: forwards;\n  animation-timing-function: linear;\n  animation-duration: var(--sjs-ranking-move-in-duration, 150ms), var(--sjs-ranking-fade-in-duration, 100ms);\n  animation-delay: 0s, var(--sjs-ranking-fade-in-delay, 150ms);\n}\n\n.sv-ranking-item--animate-item-adding-empty {\n  animation-name: fadeIn;\n  opacity: 0;\n  animation-timing-function: linear;\n  animation-duration: var(--sjs-ranking-fade-in-duration, 100ms);\n  animation-delay: 0;\n}\n\n.sv-ranking-item--animate-item-removing-empty {\n  animation-name: fadeIn;\n  animation-direction: reverse;\n  animation-timing-function: linear;\n  animation-duration: var(--sjs-ranking-fade-out-duration, 100ms);\n  animation-delay: 0;\n}\n\n@keyframes sv-animate-item-opacity-reverse-keyframes {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes sv-animate-item-opacity-keyframes {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.sv-ranking--select-to-rank-horizontal .sv-ranking__container {\n  max-width: calc(50% - 1px);\n}\n\n.sv-ranking--select-to-rank-horizontal .sv-ranking__containers-divider {\n  width: 1px;\n}\n\n.sv-ranking--select-to-rank-horizontal .sv-ranking__container--to .sv-ranking-item {\n  left: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking--select-to-rank-horizontal .sv-ranking__container--empty.sv-ranking__container--to .sv-ranking-item {\n  left: initial;\n}\n\n.sv-ranking--select-to-rank-horizontal .sv-ranking__container--empty.sv-ranking__container--to .sv-ranking__container-placeholder {\n  padding-left: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking--select-to-rank-horizontal .sv-ranking__container--empty.sv-ranking__container--from .sv-ranking__container-placeholder {\n  padding-right: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking__container-placeholder {\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45)));\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  white-space: normal;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  padding-top: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n}\n\n.sv-ranking__container {\n  flex: 1;\n}\n\n.sv-ranking__container--empty {\n  box-sizing: border-box;\n  text-align: center;\n}\n\n.sv-ranking__containers-divider {\n  background: var(--sjs-border-default, var(--sjs-border-inside, var(--border-inside, rgba(0, 0, 0, 0.16))));\n}\n\n.sv-ranking__container--from .sv-ranking-item__icon--focus {\n  display: none;\n}\n\n.sv-ranking--select-to-rank-horizontal .sv-ranking__container--to .sv-ranking-item {\n  left: 0 !important;\n  padding-left: 16px;\n}\n\n.sv-ranking--select-to-rank-horizontal .sv-ranking__container--to .sv-ranking-item .sv-ranking-item__ghost {\n  left: initial;\n}\n\n.sv-ranking--select-to-rank-swap-areas {\n  flex-direction: row-reverse;\n}\n\n.sv-ranking--select-to-rank-swap-areas .sv-ranking__container--to .sv-ranking-item {\n  padding-left: 0;\n  left: -24px !important;\n}\n\n.sv-ranking--select-to-rank-swap-areas .sv-ranking__container--from .sv-ranking-item {\n  padding-left: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  left: 0;\n}\n\n.sv-ranking--select-to-rank-swap-areas .sv-ranking__container--from .sv-ranking-item__ghost.sv-ranking-item__ghost {\n  left: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking--select-to-rank-swap-areas .sv-ranking__container--empty.sv-ranking__container--to .sv-ranking__container-placeholder {\n  padding-right: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-left: 0;\n}\n\n.sv-ranking--select-to-rank-swap-areas .sv-ranking__container--empty.sv-ranking__container--to .sv-ranking-item__ghost.sv-ranking-item__ghost {\n  right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking--select-to-rank-swap-areas .sv-ranking__container--empty.sv-ranking__container--from .sv-ranking__container-placeholder {\n  padding-left: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-right: 0;\n}\n\n.sd-question--mobile .sv-ranking-item__icon-container, .sd-root-modern.sd-root-modern--mobile .sv-ranking-item__icon-container {\n  margin-left: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  justify-content: flex-end;\n  padding: 0;\n  width: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-list {\n  margin: 0;\n  padding: var(--lbr-popup-menu-padding-top, 4px) var(--lbr-popup-menu-padding-right, 4px) var(--lbr-popup-menu-padding-bottom, 4px) var(--lbr-popup-menu-padding-left, 4px);\n  overflow-y: auto;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  list-style-type: none;\n}\n\n.sv-list__empty-container {\n  width: 100%;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  box-sizing: border-box;\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  padding: var(--lbr-placeholder-padding-top, 16px) var(--lbr-placeholder-padding-right, 64px) var(--lbr-placeholder-padding-bottom, 16px) var(--lbr-placeholder-padding-left, 64px);\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: var(--lbr-placeholder-gap, 4px);\n  align-self: stretch;\n}\n\n.sv-list__empty-text {\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  font-size: var(--sjs-font-size, 16px);\n  font-weight: 400;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-list__item {\n  width: 100%;\n  align-items: center;\n  box-sizing: border-box;\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.sv-list__item-body {\n  --sjs-list-item-padding-left-default: calc(2 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  --sjs-list-item-padding-left: calc(var(--sjs-list-item-level) * var(--sjs-list-item-padding-left-default));\n  position: relative;\n  width: 100%;\n  align-items: center;\n  box-sizing: border-box;\n  padding-block: var(--sjs-base-unit, var(--base-unit, 8px));\n  padding-inline-end: calc(8 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-start: var(--sjs-list-item-padding-left, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  font-weight: normal;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  cursor: pointer;\n  overflow: hidden;\n  text-align: start;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  transition: background-color var(--sjs-transition-duration, 150ms), color var(--sjs-transition-duration, 150ms);\n}\n\n.sv-list__item.sv-list__item--focused:not(.sv-list__item--selected) {\n  outline: none;\n}\n\n.sv-list__item.sv-list__item--focused:not(.sv-list__item--selected) .sv-list__item-body {\n  border: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid var(--sjs-border-light, var(--border-light, #eaeaea));\n  border-radius: var(--sjs-corner-radius, 4px);\n  padding-block: calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-end: calc(7.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-start: calc(1.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-list__item:hover, .sv-list__item:focus {\n  outline: none;\n}\n\n.sv-list__item:focus .sv-list__item-body, .sv-list__item--hovered > .sv-list__item-body {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sv-list__item--with-icon.sv-list__item--with-icon {\n  padding: 0;\n}\n\n.sv-list__item--with-icon.sv-list__item--with-icon > .sv-list__item-body {\n  padding-top: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  gap: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n}\n\n.sv-list__item-icon {\n  float: left;\n  flex-shrink: 0;\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-list__item-icon svg {\n  display: block;\n}\n\n.sv-list__item-icon use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-list-item__marker-icon {\n  position: absolute;\n  right: var(--sjs-base-unit, var(--base-unit, 8px));\n  width: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  flex-shrink: 0;\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: content-box;\n}\n\n.sv-list-item__marker-icon svg {\n  display: block;\n}\n\n.sv-list-item__marker-icon use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n[dir=rtl] .sv-list__item-icon, [style*="direction:rtl"] .sv-list__item-icon, [style*="direction: rtl"] .sv-list__item-icon {\n  float: right;\n}\n\n.sv-list__item-separator {\n  margin: var(--sjs-base-unit, var(--base-unit, 8px)) 0;\n  height: 1px;\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sv-list--filtering .sv-list__item-separator {\n  display: none;\n}\n\n.sv-list__item.sv-list__item--selected > .sv-list__item-body, .sv-list__item.sv-list__item--selected:hover > .sv-list__item-body, .sv-list__item.sv-list__item--selected.sv-list__item--focused > .sv-list__item-body, .sv-multi-select-list .sv-list__item.sv-list__item--selected.sv-list__item--focused > .sv-list__item-body, li:focus .sv-list__item.sv-list__item--selected > .sv-list__item-body {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  font-weight: 600;\n}\n\n.sv-list__item.sv-list__item--selected .sv-list__item-icon use, .sv-list__item.sv-list__item--selected:hover .sv-list__item-icon use, .sv-list__item.sv-list__item--selected.sv-list__item--focused .sv-list__item-icon use, .sv-multi-select-list .sv-list__item.sv-list__item--selected.sv-list__item--focused .sv-list__item-icon use, li:focus .sv-list__item.sv-list__item--selected .sv-list__item-icon use {\n  fill: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sv-list__item.sv-list__item--selected .sv-list-item__marker-icon use, .sv-list__item.sv-list__item--selected:hover .sv-list-item__marker-icon use, .sv-list__item.sv-list__item--selected.sv-list__item--focused .sv-list-item__marker-icon use, .sv-multi-select-list .sv-list__item.sv-list__item--selected.sv-list__item--focused .sv-list-item__marker-icon use, li:focus .sv-list__item.sv-list__item--selected .sv-list-item__marker-icon use {\n  fill: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sv-multi-select-list .sv-list__item.sv-list__item--selected .sv-list__item-body, .sv-multi-select-list .sv-list__item.sv-list__item--selected:hover .sv-list__item-body {\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  font-weight: 400;\n}\n\n.sv-list__item--group-selected > .sv-list__item-body {\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  font-weight: 400;\n}\n\n.sv-list__item--group-selected > .sv-list__item-body use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-list__item.sv-list__item--disabled .sv-list__item-body {\n  cursor: default;\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-list__item span {\n  white-space: nowrap;\n}\n\n.sv-list__item-text--wrap span {\n  white-space: normal;\n  word-wrap: break-word;\n}\n\n.sv-list__container {\n  position: relative;\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n  display: flex;\n  min-height: 0;\n}\n\n.sv-list__filter {\n  border-bottom: 1px solid var(--sjs-border-inside, var(--border-inside, rgba(0, 0, 0, 0.16)));\n}\n\n.sv-list__filter-icon {\n  display: block;\n  position: absolute;\n  top: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  inset-inline-start: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-list__filter-icon .sv-svg-icon {\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-list__filter-icon .sv-svg-icon use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-list__input {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  display: block;\n  background: rgba(0, 0, 0, 0);\n  box-sizing: border-box;\n  width: 100%;\n  min-width: calc(30 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  outline: none;\n  font-size: var(--sjs-font-size, 16px);\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-start: calc(7 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  border: none;\n}\n\n.sv-list__input::placeholder {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-list__input:disabled, .sv-list__input:disabled::placeholder {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv-list__loading-indicator {\n  pointer-events: none;\n}\n\n.sv-list__loading-indicator .sv-list__item-body {\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sv-scroll__wrapper {\n  position: relative;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.sv-scroll__scroller {\n  box-sizing: border-box;\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n\n.sv-scroll__scroller::-webkit-scrollbar {\n  display: none;\n}\n\n.sv-scroll__scrollbar {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  width: fit-content;\n  margin-inline-start: -1px;\n  visibility: hidden;\n  z-index: 30;\n  inset-inline-end: 0;\n  inset-inline-start: initial;\n}\n\n@-moz-document url-prefix() {\n  .sv-scroll__scrollbar {\n    scrollbar-width: thin;\n    scrollbar-color: var(--ctr-scrollbar-background-color, var(--sjs-border-25-overlay, rgba(0, 0, 0, 0.1490196078))) rgba(0, 0, 0, 0);\n  }\n}\n.sv-scroll__wrapper:hover .sv-scroll__scrollbar {\n  visibility: visible;\n}\n\n.sv-scroll__scrollbar-sizer {\n  width: 1px;\n}\n\n.sv-scroll__container {\n  width: 100%;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.sv-save-data_root {\n  position: fixed;\n  left: 50%;\n  bottom: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background: var(--sjs-general-backcolor, var(--background, #fff));\n  opacity: 0;\n  padding: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-shadow: var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n  border-radius: calc(2 * (var(--sjs-corner-radius, 4px)));\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  min-width: calc(30 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  text-align: center;\n  z-index: 1600;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  transform: translateX(-50%) translateY(calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  transition-timing-function: ease-in;\n  transition-property: transform, opacity;\n  transition-delay: 0.25s;\n  transition: 0.5s;\n}\n\n.sv-save-data_root.sv-save-data_root--shown {\n  transition-timing-function: ease-out;\n  transition-property: transform, opacity;\n  transform: translateX(-50%) translateY(0);\n  transition-delay: 0.25s;\n  opacity: 0.75;\n}\n\n.sv-save-data_root span {\n  display: flex;\n  flex-grow: 1;\n}\n\n.sv-save-data_root .sv-action-bar {\n  display: flex;\n  flex-grow: 0;\n  flex-shrink: 0;\n}\n\n.sv-save-data_root--shown.sv-save-data_success, .sv-save-data_root--shown.sv-save-data_error {\n  opacity: 1;\n}\n\n.sv-save-data_root.sv-save-data_root--with-buttons {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-save-data_root.sv-save-data_error {\n  background-color: var(--sjs-special-red, var(--red, #e60a3e));\n  color: var(--sjs-general-backcolor, var(--background, #fff));\n  font-weight: 600;\n  gap: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-save-data_root.sv-save-data_error .sv-save-data_button {\n  font-weight: 600;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  height: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  color: #fff;\n  background-color: var(--sjs-special-red, var(--red, #e60a3e));\n  border: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid #fff;\n  border-radius: calc(1.5 * (var(--sjs-corner-radius, 4px)));\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  align-items: center;\n}\n\n.sv-save-data_root.sv-save-data_error .sv-save-data_button:hover, .sv-save-data_root.sv-save-data_error .sv-save-data_button:focus {\n  color: var(--sjs-special-red, var(--red, #e60a3e));\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sv-save-data_root.sv-save-data_success {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  color: #fff;\n  font-weight: 600;\n}\n\n.sv-string-viewer.sv-string-viewer--multiline {\n  white-space: pre-wrap;\n}\n\n.sd-element {\n  padding-left: var(--sv-element-add-padding-left, 0px);\n  padding-right: var(--sv-element-add-padding-right, 0px);\n}\n\n.sd-element__title {\n  outline: none;\n}\n\n.sd-element__title.sd-element__title--disabled {\n  opacity: 0.25;\n}\n\n.sd-root--readonly .sd-element__title.sd-element__title--disabled {\n  opacity: 1;\n}\n\n.sd-element--invisible {\n  opacity: 0.35;\n}\n\n.sd-title.sd-element__title {\n  font-family: var(--sjs-font-questiontitle-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-questiontitle-weight, 600);\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-element__header .sv-string-editor {\n  max-width: 100%;\n  white-space: normal;\n}\n\n.sd-element__title {\n  font-size: 0;\n  line-height: 0;\n  position: static;\n  margin: 0;\n}\n\n.sd-element__title .sd-element__num {\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  line-height: var(--sjs-font-size, 16px);\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-element__title span {\n  font-size: var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));\n}\n\n.sd-element__title .sv-title-actions__title {\n  font-size: 0;\n  line-height: 0;\n}\n\n.sd-element__title .sv-title-actions__title {\n  white-space: nowrap;\n}\n\n.sd-element__title .sv-string-viewer {\n  white-space: normal;\n}\n\n.sd-element__title .sv-string-viewer.sv-string-viewer--multiline {\n  white-space: pre-wrap;\n}\n\n.sd-element__title.sd-element__title--singleinput span {\n  --page-title-font-size: var(--sjs-font-pagetitle-size, calc(1.5 * (var(--sjs-font-size, 16px))));\n  font-family: var(--sjs-font-pagetitle-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-pagetitle-weight, 700);\n  font-size: var(--page-title-font-size);\n  color: var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91)));\n  position: static;\n  line-height: calc(1.33 * (var(--page-title-font-size)));\n  margin: 0 0 calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0px;\n}\n\n.sd-element__num {\n  float: left;\n  padding-top: calc(0.625 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(0.375 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-start: 0;\n  padding-inline-end: var(--sjs-base-unit, var(--base-unit, 8px));\n  width: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  line-height: var(--sjs-font-size, 16px);\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n  margin-inline-start: calc(-5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  text-align: end;\n  box-sizing: border-box;\n  white-space: nowrap;\n  flex-shrink: 0;\n}\n\n.sd-page__num + span, .sd-element__num + span {\n  float: left;\n  width: 0;\n}\n\n[dir=rtl] .sd-element__num, [style*="direction:rtl"] .sd-element__num, [style*="direction: rtl"] .sd-element__num {\n  float: right;\n}\n\n[dir=rtl] .sd-element__title--collapsed .sd-element__title-expandable-svg, [style*="direction:rtl"] .sd-element__title--collapsed .sd-element__title-expandable-svg, [style*="direction: rtl"] .sd-element__title--collapsed .sd-element__title-expandable-svg {\n  transform: rotate(180deg);\n}\n\n.sd-element__title--num-inline .sd-element__num {\n  float: none;\n  margin-inline-start: 0;\n  width: auto;\n  padding-inline-start: 0;\n  padding-inline-end: 0;\n}\n\n.sd-element__title--num-inline .sd-element__num + span {\n  float: none;\n  width: auto;\n}\n\n.sd-element__title--expandable.sd-element__title--expandable {\n  position: relative;\n  display: block;\n}\n\n.sd-element__title-expandable-svg {\n  display: inline-block;\n  width: var(--lbr-question-panel-expand-button-icon-width, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-question-panel-expand-button-icon-height, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  position: absolute;\n  inset-inline-start: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  top: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-element__title-expandable-svg use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-element--with-frame {\n  border-radius: var(--sjs-questionpanel-cornerRadius, var(--sjs-corner-radius, 4px));\n  box-sizing: border-box;\n  padding-top: var(--sd-base-padding);\n  padding-left: calc(var(--sd-base-padding) + var(--sv-element-add-padding-left, 0px));\n  padding-right: calc(var(--sd-base-padding) + var(--sv-element-add-padding-right, 0px));\n  padding-bottom: var(--sd-base-padding);\n  background: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  box-shadow: var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15));\n}\n\n.sd-element--with-frame.sd-element--compact {\n  border: 1px solid var(--sjs-border-default, var(--border, #d6d6d6));\n  border-radius: var(--sjs-questionpanel-cornerRadius, var(--sjs-corner-radius, 4px));\n  box-shadow: none;\n  background-color: rgba(0, 0, 0, 0);\n}\n\n@keyframes elementMoveIn {\n  from {\n    flex-basis: 0;\n    flex-grow: 0;\n    max-width: 0;\n    min-width: 0;\n    width: 0;\n    height: 0;\n    padding-left: 0;\n    overflow: hidden;\n  }\n  to {\n    height: var(--animation-height);\n    flex-basis: var(--animation-width);\n    width: var(--animation-width);\n    min-width: var(--animation-width);\n    padding-left: var(--animation-padding-left);\n    overflow: visible;\n  }\n}\n.sd-element-wrapper--enter {\n  animation-name: elementMoveIn, fadeIn;\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-fill-mode: forwards;\n  animation-duration: var(--sjs-element-move-in-duration, 250ms), var(--sjs-element-fade-in-duration, 500ms);\n  animation-delay: 0s, var(--sjs-element-fade-in-delay, 100ms);\n  opacity: 0;\n}\n\n.sd-element-wrapper--leave {\n  animation-name: elementMoveIn, fadeIn;\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n  animation-fill-mode: forwards;\n  animation-direction: reverse;\n  animation-duration: var(--sjs-element-move-out-duration, 250ms), var(--sjs-element-fade-out-duration, 150ms);\n  animation-delay: var(--sjs-element-move-out-delay, 0ms), 0s;\n}\n\n.sd-element__content {\n  box-sizing: border-box;\n}\n\n.sd-element__content--enter, .sd-element__content--leave {\n  --animation-padding-top: 0;\n  --animation-padding-bottom: 0;\n}\n\n.sd-element__content--enter {\n  animation-name: fadeIn, moveInWithOverflow;\n  min-height: 0 !important;\n  opacity: 0;\n  animation-fill-mode: forwards;\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-duration: var(--sjs-expand-fade-in-duration, 500ms), var(--sjs-expand-move-in-duration, 150ms);\n  animation-delay: var(--sjs-expand-fade-in-delay, 150ms), 0s, 0s;\n}\n\n.sd-element__content--leave {\n  animation-name: fadeIn, moveInWithOverflow;\n  min-height: 0 !important;\n  animation-direction: reverse;\n  animation-fill-mode: forwards;\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n  animation-duration: var(--sjs-collapse-fade-out-duration, 150ms), var(--sjs-collapse-move-out-duration, 250ms);\n  animation-delay: 0s, var(--sjs-collapse-move-out-delay, 100ms), var(--sjs-collapse-move-out-delay, 100ms);\n}\n\n.sd-element--expandable.sd-elemenet--expandable--animating > .sd-element__header:focus-within, .sd-element--expandable.sd-elemenet--expandable--animating > .sd-element__header:hover {\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable {\n  transition-property: padding-top, padding-bottom;\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable > .sd-element__header {\n  transition-property: padding-top, padding-bottom;\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable.sd-element--expanded {\n  transition-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  transition-duration: var(--sjs-expand-move-in-duration, 150ms);\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable.sd-element--expanded > .sd-element__header {\n  transition-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  transition-duration: var(--sjs-expand-move-in-duration, 150ms);\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable.sd-element--expanded > .sd-element__header .sd-element__title:before {\n  transition-duration: var(--sjs-expand-move-in-duration, 150ms);\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable.sd-element--collapsed {\n  transition-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  transition-duration: var(--sjs-collapse-move-out-duration, 250ms);\n  transition-delay: var(--sjs-collapse-move-out-delay, 100ms);\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable.sd-element--collapsed > .sd-element__header {\n  transition-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  transition-duration: var(--sjs-collapse-move-out-duration, 250ms);\n  transition-delay: var(--sjs-collapse-move-out-delay, 100ms);\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable.sd-element--collapsed > .sd-element__header .sd-element__title:before {\n  transition-duration: var(--sjs-collapse-move-out-duration, 250ms);\n  transition-delay: var(--sjs-collapse-move-out-delay, 100ms);\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable.sd-element--complex:not(.sd-question--empty) > .sd-element__header--location-top:after {\n  display: block;\n  opacity: 0;\n  height: 0;\n  --animation-height: 1px;\n  animation-name: fadeIn, moveIn;\n  animation-fill-mode: forwards;\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-delay: var(--sjs-expand-fade-in-delay, 150ms), 0s;\n  animation-duration: var(--sjs-expand-fade-in-duration, 500ms), var(--sjs-expand-move-in-duration, 150ms);\n}\n\n.sd-elemenet--expandable--animating.sd-element--expandable.sd-element--complex:not(.sd-question--empty).sd-element--collapsed .sd-element__header--location-top:after {\n  animation-direction: reverse;\n  opacity: 1;\n  height: 1px;\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n  animation-delay: 0s, var(--sjs-collapse-move-out-delay, 100ms);\n  animation-duration: var(--sjs-collapse-fade-out-duration, 150ms), var(--sjs-collapse-move-out-duration, 250ms);\n}\n\n.sd-question {\n  position: relative;\n}\n\n.sd-question--no-pointer-events .sd-selectbase label, .sd-question--no-pointer-events .sd-rating label {\n  pointer-events: none;\n}\n\n.sd-element__erbox--above-element {\n  margin-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-question__erbox--below-question {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-question__content--support-container-queries {\n  container-type: inline-size;\n}\n\n.sd-question--title-top > .sd-question__erbox--above-question {\n  margin-bottom: calc(0.5 * var(--sd-base-vertical-padding));\n}\n\n.sd-question--description-under-input > .sd-question__erbox--below-question, .sd-question--title-bottom > .sd-question__erbox--below-question {\n  margin-top: calc(0.25 * var(--sd-base-vertical-padding) + 0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-element--with-frame > .sd-element__erbox--above-element {\n  margin-bottom: var(--sd-base-padding);\n  border-radius: var(--sjs-corner-radius, 4px) var(--sjs-corner-radius, 4px) 0 0;\n}\n\n.sd-question--left > .sd-element__erbox--above-element {\n  margin-bottom: 0;\n}\n\n.sd-element--with-frame.sd-question--left > .sd-element__erbox--above-element {\n  margin-bottom: calc(1 * var(--sd-base-vertical-padding));\n}\n\n.sd-element--with-frame > .sd-question__erbox--below-question {\n  margin-top: auto;\n  border-radius: 0 0 var(--sjs-corner-radius, 4px) var(--sjs-corner-radius, 4px);\n}\n\n.sd-element--with-frame.sd-question--title-top > .sd-question__erbox--above-question {\n  margin-bottom: calc(0.5 * var(--sd-base-vertical-padding) + var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-element--with-frame.sd-question--description-under-input > .sd-question__erbox--below-question, .sd-element--with-frame.sd-question--title-bottom > .sd-question__erbox--below-question {\n  margin-top: calc(0.5 * var(--sd-base-vertical-padding) + var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-question__header {\n  width: 100%;\n}\n\n.sd-question__header--location-top {\n  padding-bottom: calc(0.5 * var(--sd-base-vertical-padding));\n}\n\n.sd-question__header--location--bottom {\n  padding-top: calc(0.375 * var(--sd-base-vertical-padding));\n}\n\n.sd-element--with-frame.sd-question--title-top {\n  padding-top: var(--sd-base-vertical-padding);\n}\n\n.sd-element--with-frame.sd-question--error-top {\n  padding-top: 0;\n}\n\n.sd-element--with-frame.sd-question--error-bottom {\n  padding-bottom: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.sd-element--with-frame.sd-question--error-bottom > .sd-question__content {\n  margin-bottom: var(--sd-base-padding);\n}\n\n.sd-element--with-frame > .sd-element__erbox {\n  margin-left: calc(-1 * var(--sd-base-padding));\n  margin-right: calc(-1 * var(--sd-base-padding));\n  width: calc(100% + 2 * var(--sd-base-padding));\n  position: sticky;\n  left: calc(-1 * var(--sd-base-padding));\n}\n\n.sd-scrollable .sd-question__content {\n  overflow-x: auto;\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-question__header--location--left {\n  display: inline-block;\n  width: auto;\n  vertical-align: top;\n  margin-top: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--left {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  column-gap: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  row-gap: calc(0.25 * var(--sd-base-vertical-padding));\n}\n\n.sd-question__content--left {\n  display: inline-block;\n  flex: 1;\n  margin-top: calc(0.25 * var(--sd-base-vertical-padding)) 0;\n  max-width: 100%;\n}\n\n.sd-element--with-frame > .sd-question__content--left {\n  margin: 0;\n}\n\n.sd-question__required-text {\n  color: var(--sjs-special-red, var(--red, #e60a3e));\n  vertical-align: top;\n}\n\n.sd-question__comment-area {\n  font-size: var(--sjs-font-size, 16px);\n  margin-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  flex-direction: column;\n  gap: var(--sjs-base-unit, var(--base-unit, 8px));\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  white-space: normal;\n}\n\n.sd-question__placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  gap: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  justify-content: center;\n  min-height: calc(24 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n}\n\n.sd-question__placeholder > div .sv-string-viewer, .sd-question__placeholder > span .sv-string-viewer {\n  white-space: pre-line;\n}\n\n.sd-scrollable-container:not(.sd-scrollable-container--compact) {\n  width: max-content;\n  overflow: visible;\n  max-width: 100%;\n}\n\n.sd-question__title--empty .sv-string-viewer {\n  display: inline-block;\n  height: calc(1.5 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));\n}\n\n.sd-question__content {\n  box-sizing: border-box;\n}\n\n.sd-singleinput__title {\n  font-family: var(--sjs-font-pagetitle-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-pagetitle-weight, 700);\n  font-size: var(--page-title-font-size);\n  color: var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91)));\n  position: static;\n  line-height: calc(1.33 * (var(--page-title-font-size)));\n  margin: 0 0 calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0px;\n}\n\n.sd-error {\n  display: block;\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: var(--sjs-corner-radius, 4px);\n  line-height: var(--sjs-font-size, 16px);\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  font-weight: 600;\n  text-align: left;\n  color: var(--sjs-special-red, var(--red, #e60a3e));\n  white-space: normal;\n  width: 100%;\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n  box-sizing: border-box;\n}\n\n.sd-element--expanded > .sd-element__header, .sd-element--collapsed > .sd-element__header {\n  cursor: pointer;\n}\n\n.sd-element--collapsed > .sd-element__header {\n  padding: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px)))) var(--sd-base-padding);\n  box-sizing: border-box;\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  margin-inline-start: calc(-1 * var(--sd-base-padding));\n  width: calc(100% + 2 * var(--sd-base-padding));\n}\n\n.sd-element--collapsed.sd-element--with-frame {\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.sd-element--collapsed.sd-element--with-frame > .sd-element__header {\n  padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: var(--sjs-questionpanel-cornerRadius, var(--sjs-corner-radius, 4px));\n}\n\n.sd-element--collapsed > .sd-element__header:focus-within, .sd-element--collapsed > .sd-element__header:hover {\n  background-color: var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9));\n}\n\n.sd-element--collapsed.sd-element--nested > .sd-element__header:hover, .sd-element--collapsed.sd-element--nested > .sd-element__header:focus-within {\n  box-shadow: 0 calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0 0 var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9)), 0 calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0 var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9));\n}\n\n.sd-element--complex.sd-element--with-frame {\n  padding-top: 0;\n}\n\n.sd-element--complex.sd-element--nested-with-borders > .sd-element__erbox, .sd-element--complex.sd-element--with-frame > .sd-element__erbox {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.sd-element--complex > .sd-element__header:after {\n  content: " ";\n  display: block;\n  height: 1px;\n  position: relative;\n  background: var(--sjs-border-light, var(--border-light, #eaeaea));\n  bottom: 0;\n}\n\n.sd-element--complex.sd-element--with-frame > .sd-element__header {\n  padding-top: var(--sd-base-vertical-padding);\n  padding-bottom: var(--sd-base-vertical-padding);\n}\n\n.sd-element--collapsed.sd-element--complex > .sd-element__header {\n  padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-element--nested.sd-element--complex > .sd-element__header--location-top:after {\n  bottom: calc(-0.5 * var(--sd-base-vertical-padding));\n}\n\n.sd-element--nested-with-borders {\n  border: 1px solid var(--sjs-border-light, var(--border-light, #eaeaea));\n  border-radius: calc(var(--sjs-corner-radius, 4px) - 4px);\n  box-sizing: border-box;\n  padding-left: var(--sd-base-padding);\n  padding-right: var(--sd-base-padding);\n}\n\n.sd-element--nested-with-borders > .sd-element__header--location-top {\n  padding-top: calc(0.5 * var(--sd-base-vertical-padding));\n  padding-bottom: calc(0.5 * var(--sd-base-vertical-padding));\n}\n\n.sd-element--nested-with-borders > .sd-element__erbox {\n  margin-left: calc(-1 * var(--sd-base-padding));\n  margin-right: calc(-1 * var(--sd-base-padding));\n  width: calc(100% + 2 * var(--sd-base-padding));\n}\n\n.sd-element--nested-with-borders > .sd-question__erbox--below-question {\n  bottom: 0;\n  margin-top: 0;\n}\n\n.sd-element--nested-with-borders.sd-element--collapsed > .sd-element__header--location-top:hover, .sd-element--nested-with-borders.sd-element--collapsed > .sd-element__header--location-top:focus-within {\n  box-shadow: none;\n}\n\n.sd-element--nested-with-borders > .sd-element__header--location-top:after, .sd-element--complex.sd-element--with-frame > .sd-element__header--location-top:after {\n  bottom: calc(-1 * var(--sd-base-vertical-padding));\n  inset-inline-start: calc(-1 * var(--sd-base-padding));\n  width: calc(100% + 2 * var(--sd-base-padding));\n}\n\n.sd-element--collapsed.sd-element--complex > .sd-element__header--location-top:after {\n  display: none;\n}\n\n.sd-question--empty.sd-question--complex > .sd-question__content {\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.sd-question--empty.sd-question--complex > .sd-question__content:first-of-type {\n  padding-top: var(--sd-base-padding);\n}\n\n.sd-question--empty.sd-question--complex > .sd-question__header--location-top {\n  padding-bottom: calc(0.5 * var(--sd-base-vertical-padding));\n}\n\n.sd-question--empty.sd-question--complex > .sd-question__header--location-top:after {\n  display: none;\n}\n\n.sd-input {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  position: static;\n  width: 100%;\n  box-sizing: border-box;\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  font-family: var(--sjs-font-editorfont-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-editorfont-weight, 400);\n  color: var(--sjs-font-editorfont-color, var(--sjs-general-forecolor, rgba(0, 0, 0, 0.91)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  background-color: var(--sjs-editorpanel-backcolor, var(--sjs-editor-background, var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9))));\n  border: none;\n  border-radius: var(--sjs-editorpanel-cornerRadius, var(--sjs-corner-radius, 4px));\n  text-align: start;\n  box-shadow: var(--sjs-shadow-inner, inset 0px 1px 2px 0px rgba(0, 0, 0, 0.15)), 0 0 0 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  transition: box-shadow var(--sjs-transition-duration, 150ms);\n  display: block;\n}\n\n.sd-input:focus {\n  box-shadow: var(--sjs-shadow-inner-reset, inset 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-input.sd-input:focus {\n  outline: none;\n}\n\ninput.sd-input:disabled:not(.sd-input--disabled), textarea.sd-input:disabled:not(.sd-input--disabled) {\n  opacity: 1;\n}\n\n.sd-input--disabled {\n  background-color: var(--sjs-editorpanel-backcolor, var(--sjs-editor-background, var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9))));\n}\n\n.sd-input--readonly {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-input.sd-input--preview {\n  background: none;\n  box-shadow: none;\n  transition: none;\n  border-bottom: 1px solid var(--sjs-general-forecolor, var(--foreground, #161616));\n  border-radius: 0;\n  padding-left: 0;\n  padding-right: 0;\n}\n\n.sd-input::placeholder {\n  color: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.sd-input.sd-input--disabled, .sd-input.sd-input--disabled::placeholder {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  opacity: 0.25;\n}\n\n.sd-input.sd-input--readonly {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  box-shadow: none;\n  transition: none;\n}\n\n.sd-input.sd-input--readonly::placeholder {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-root--readonly .sd-input--disabled, .sd-root--readonly .sd-input--disabled::placeholder {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-input--error {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n}\n\n.sd-text__content {\n  position: relative;\n}\n\n.sd-text__character-counter {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.sd-text__character-counter:focus-within {\n  padding-inline-end: calc(8 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-text__character-counter.sd-text__character-counter--big:focus-within {\n  padding-inline-end: calc(11 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-remaining-character-counter {\n  display: none;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-end;\n  padding: 0px;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  font-size: var(--sjs-font-size, 16px);\n  color: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n  position: absolute;\n  inset-inline-end: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  inset-block-end: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-text__content:focus-within .sd-remaining-character-counter, .sd-comment__content:focus-within .sd-remaining-character-counter, .sd-multipletext__content:focus-within .sd-remaining-character-counter, .sd-matrix__question-wrapper:focus-within .sd-remaining-character-counter {\n  display: flex;\n}\n\n.sd-input[type=time], .sd-input[type=date], .sd-input[type=datetime-local], .sd-input[type=week], .sd-input[type=month], .sd-input[type=tel], .sd-input[type=password], .sd-input[type=url], .sd-input[type=email], .sd-input[type=color], .sd-input[type=range] {\n  box-sizing: content-box;\n  width: calc(100% - 4 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n}\n\n.sd-input[type=time].sd-text__character-counter:focus-within, .sd-input[type=date].sd-text__character-counter:focus-within, .sd-input[type=datetime-local].sd-text__character-counter:focus-within, .sd-input[type=week].sd-text__character-counter:focus-within, .sd-input[type=month].sd-text__character-counter:focus-within, .sd-input[type=tel].sd-text__character-counter:focus-within, .sd-input[type=password].sd-text__character-counter:focus-within, .sd-input[type=url].sd-text__character-counter:focus-within, .sd-input[type=email].sd-text__character-counter:focus-within, .sd-input[type=color].sd-text__character-counter:focus-within, .sd-input[type=range].sd-text__character-counter:focus-within {\n  width: calc(100% - 10 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-input[type=range]::-webkit-slider-runnable-track {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  border-radius: var(--sjs-base-unit, var(--base-unit, 8px));\n  height: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  margin-top: calc(-0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: 100%;\n  border: 2px solid var(--sjs-primary-backcolor, var(--primary, #19b394));\n  box-shadow: inset 0 0 0 2px var(--background, #fff);\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-input[type=range]::-moz-range-track {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  border-radius: var(--sjs-base-unit, var(--base-unit, 8px));\n  height: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-input[type=range]::-moz-range-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  margin-top: calc(-0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: 100%;\n  border: 2px solid var(--sjs-primary-backcolor, var(--primary, #19b394));\n  box-shadow: inset 0 0 0 2px var(--background, #fff);\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-comment {\n  display: block;\n  height: auto;\n  min-width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  max-width: 100%;\n}\n\n.sd-comment__content {\n  position: relative;\n}\n\n.sd-panel {\n  position: relative;\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__header.sd-panel__header {\n  padding-top: 0;\n  padding-bottom: calc(0.5 * var(--sd-base-vertical-padding) + var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__header.sd-panel__header:after {\n  content: none;\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__header.sd-panel__header .sd-panel__title {\n  --page-title-font-size: var(--sjs-font-pagetitle-size, calc(1.5 * (var(--sjs-font-size, 16px))));\n  font-family: var(--sjs-font-pagetitle-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-pagetitle-weight, 700);\n  font-size: var(--page-title-font-size);\n  color: var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91)));\n  position: static;\n  line-height: calc(1.33 * (var(--page-title-font-size)));\n  margin: 0 0 calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0px;\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__header.sd-panel__header .sd-panel__title span {\n  font-family: inherit;\n  font-size: inherit;\n  font-weight: inherit;\n  color: inherit;\n  line-height: inherit;\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__header.sd-panel__header .sd-element__num {\n  padding: initial;\n  margin: initial;\n  float: initial;\n  width: initial;\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__header.sd-panel__header .sd-panel__description {\n  font-family: var(--sjs-font-pagedescription-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-pagedescription-weight, 400);\n  font-size: var(--sjs-font-pagedescription-size, var(--sjs-font-size, 16px));\n  color: var(--sjs-font-pagedescription-color, var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45)));\n  position: static;\n  line-height: calc(1.5 * (var(--sjs-font-pagedescription-size, var(--sjs-font-size, 16px))));\n  margin: 0 0 calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__header.sd-panel__header .sd-panel__required-text {\n  display: none;\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__errbox {\n  margin: 0 0 calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n  padding: calc(0.5 * var(--sd-base-vertical-padding) + var(--sjs-base-unit, var(--base-unit, 8px))) var(--sd-base-padding);\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__content {\n  padding-top: 0;\n}\n\n.sd-root--compact .sd-panel--as-page > .sd-panel__errbox {\n  margin: 0 0 var(--sd-base-vertical-padding) 0;\n}\n\n.sd-row ~ .sd-row .sd-panel--as-page {\n  padding-top: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-panel__required-text {\n  color: var(--sjs-special-red, var(--red, #e60a3e));\n}\n\n.sd-panel__footer {\n  box-sizing: border-box;\n  padding-left: calc(var(--sd-base-padding) - 3 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  margin-left: calc(-1 * var(--sd-base-padding));\n  width: calc(100% + 2 * var(--sd-base-padding));\n  margin-bottom: calc(-1 * var(--sd-base-padding) + 0.5 * var(--sd-base-vertical-padding));\n  margin-top: calc(0.5 * var(--sd-base-vertical-padding));\n  border-top: 1px solid var(--sjs-border-light, var(--border-light, #eaeaea));\n  padding-top: calc(0.5 * var(--sd-base-vertical-padding));\n}\n\n.sd-panel--as-page .sd-panel__footer {\n  padding: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0 0;\n  margin: 0;\n  border: none;\n  width: initial;\n}\n\n.sd-panel__content {\n  padding-top: var(--sd-base-padding);\n}\n\n.sd-panel.sd-element--nested > .sd-panel__content {\n  padding-bottom: var(--sd-base-padding);\n  --animation-padding-top: var(--sd-base-padding);\n}\n\n.sd-panel__content {\n  --animation-padding-top: var(--sd-base-padding);\n}\n\n.sjs_sp_placeholder {\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  z-index: 1;\n  user-select: none;\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n}\n\n.sjs_sp_container {\n  position: relative;\n  max-width: 100%;\n  border: 1px dashed var(--sjs-border-default, var(--border, #d6d6d6));\n  box-sizing: content-box;\n}\n\n.sjs_sp_container > div > canvas:focus {\n  outline: none;\n}\n\n.sd-question--readonly .sjs_sp_container, .sd-question--preview .sjs_sp_container {\n  border: none;\n}\n\n.sd-question--readonly .sjs_sp_placeholder, .sd-question--preview .sjs_sp_placeholder {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sjs_sp_controls {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n\n.sjs_sp_controls > button {\n  user-select: none;\n}\n\n.sjs_sp_controls.sd-signaturepad__controls {\n  right: var(--sjs-base-unit, var(--base-unit, 8px));\n  top: var(--sjs-base-unit, var(--base-unit, 8px));\n  left: auto;\n  bottom: auto;\n}\n\n.sd-question--signature.sd-question--error .sjs_sp_placeholder {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n}\n\n.sd-signaturepad__background-image {\n  position: absolute;\n  top: 0;\n  left: 0;\n  object-fit: cover;\n}\n\n.sd-signaturepad__loading-indicator {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.sd-signaturepad__loading-indicator .sd-loading-indicator {\n  position: absolute;\n  right: var(--sjs-base-unit, var(--base-unit, 8px));\n  top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sjs_sp_canvas {\n  position: relative;\n  max-width: 100%;\n  display: block;\n}\n\n.sjs_sp__background-image {\n  position: absolute;\n  top: 0;\n  left: 0;\n  object-fit: cover;\n  max-width: 100%;\n  width: 100%;\n  height: 100%;\n}\n\n.sd-checkbox__decorator {\n  border-radius: calc(0.5 * (var(--sjs-corner-radius, 4px)));\n}\n\n.sd-checkbox__svg {\n  display: block;\n  width: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-checkbox__svg use {\n  fill: rgba(0, 0, 0, 0);\n  transition: fill var(--sjs-transition-duration, 150ms);\n}\n\n.sd-checkbox--checked .sd-checkbox__svg use {\n  fill: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-checkbox--checked.sd-checkbox--disabled .sd-checkbox__svg use {\n  fill: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-checkbox--checked .sd-checkbox__control:focus + .sd-checkbox__decorator .sd-checkbox__svg use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-checkbox--checked.sd-checkbox--readonly .sd-checkbox__svg use {\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-checkbox--checked.sd-checkbox--preview .sd-checkbox__svg use {\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-matrixdynamic__btn.sd-matrixdynamic__add-btn {\n  position: sticky;\n  left: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-left: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  z-index: 12;\n}\n\n.sd-question--mobile .sd-matrixdynamic__footer::before {\n  z-index: 12;\n  content: " ";\n  display: block;\n  position: relative;\n  height: 1px;\n  background-color: var(--sjs-border-light, var(--border-light, #eaeaea));\n  left: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  top: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(100% + 6 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  z-index: 12;\n}\n\n.sd-matrixdynamic__footer:first-child {\n  padding-bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrixdynamic__footer:first-child::before {\n  display: none;\n}\n\n.sd-matrixdynamic__footer {\n  padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-action.sd-matrixdynamic__remove-btn {\n  opacity: 0.5;\n}\n\n.sd-action.sd-matrixdynamic__remove-btn .sd-action__icon {\n  width: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n}\n\n.sd-matrixdynamic__btn {\n  appearance: none;\n  background: rgba(0, 0, 0, 0);\n  border: none;\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  font-size: var(--sjs-font-size, 16px);\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: 600;\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) 0;\n}\n\n.sd-matrixdynamic__drag-element {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrixdynamic__drag-element:hover {\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sd-matrixdynamic__drag-element:after {\n  content: " ";\n  display: block;\n  height: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border: 1px solid var(--sjs-border-default, var(--border, #d6d6d6));\n  box-sizing: border-box;\n  border-radius: calc(1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrixdynamic__placeholder .sd-matrixdynamic__add-btn {\n  margin-left: 0;\n}\n\n.sd-table__row:hover .sd-drag-element__svg {\n  visibility: visible;\n}\n\n.sd-table__cell.sd-table__cell--drag > div {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  margin-left: calc(-4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background-color: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  min-height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-drag-element__svg {\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: block;\n  cursor: pointer;\n  visibility: hidden;\n}\n\n.sd-drag-element__svg use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n@keyframes borderAnimation {\n  from {\n    border-width: 0px;\n  }\n  to {\n    border-width: 8px;\n  }\n}\n@keyframes paddingAnimation {\n  from {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n  to {\n    padding-top: 24px;\n    padding-bottom: 32px;\n  }\n}\n@keyframes empty {}\n.sd-table__row--leave, .sd-table__row--enter {\n  animation-name: empty;\n  --move-whole-animation-duration: calc(var(--move-animation-duration) + var(--move-animation-delay));\n  --fade-whole-animation-duration: calc(var(--fade-animation-duration) + var(--fade-animation-delay));\n  animation-duration: max(var(--fade-whole-animation-duration), var(--move-whole-animation-duration));\n}\n\n.sd-table__row--leave > td, .sd-table__row--enter > td {\n  animation-name: borderAnimation;\n  animation-direction: var(--animation-direction);\n  animation-timing-function: var(--animation-timing-function);\n  animation-duration: var(--move-animation-duration);\n  animation-fill-mode: forwards;\n  animation-delay: var(--move-animation-delay);\n}\n\n.sd-table__row--leave > td > div, .sd-table__row--enter > td > div {\n  animation-name: fadeIn, moveInWithOverflow;\n  opacity: 0;\n  animation-direction: var(--animation-direction);\n  animation-timing-function: var(--animation-timing-function);\n  animation-fill-mode: forwards;\n  animation-duration: var(--fade-animation-duration), var(--move-animation-duration);\n  animation-delay: var(--fade-animation-delay), var(--move-animation-delay);\n}\n\n.sd-table__row--enter {\n  --move-animation-delay: 0s;\n  --move-animation-duration: var(--sjs-matrix-row-move-in-duration, 150ms);\n  --fade-animation-duration: var(--sjs-matrix-row-fade-in-duration, 250ms);\n  --fade-animation-delay: var(--sjs-matrix-row-fade-in-delay, 150ms);\n  --animation-direction: normal;\n  --animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n}\n\n.sd-table__row--leave {\n  --move-animation-delay: var(--sjs-matrix-row-move-out-delay, 100ms);\n  --move-animation-duration: var(--sjs-matrix-row-move-out-duration, 250ms);\n  --fade-animation-duration: var(--sjs-matrix-row-fade-out-duration, 100ms);\n  --fade-animation-delay: 0s;\n  --animation-direction: reverse;\n  --animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n}\n\n.sd-table__row--detail.sd-table__row--enter > td, .sd-table__row--detail.sd-table__row--leave > td {\n  animation-name: borderAnimation, paddingAnimation;\n  animation-duration: var(--move-animation-duration);\n  animation-fill-mode: forwards;\n  animation-direction: var(--animation-direction);\n  animation-timing-function: var(--animation-timing-function);\n}\n\n.sd-table__row--detail.sd-table__row--enter {\n  --move-animation-delay: 0s;\n  --move-animation-duration: var(--sjs-matrix-detail-row-move-in-duration, 150ms);\n  --fade-animation-duration: var(--sjs-matrix-detail-row-fade-in-duration, 500ms);\n  --fade-animation-delay: var(--sjs-matrix-detail-row-fade-in-delay, 150ms);\n  --animation-direction: normal;\n  --animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n}\n\n.sd-table__row--detail.sd-table__row--leave {\n  --move-animation-delay: var(--sjs-matrix-detail-row-move-out-delay, 100ms);\n  --move-animation-duration: var(--sjs-matrix-detail-row-move-out-duration, 250ms);\n  --fade-animation-duration: var(--sjs-matrix-detail-row-fade-out-duration, 150ms);\n  --fade-animation-delay: 0s;\n  --animation-direction: reverse;\n  --animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n}\n\n.sd-table {\n  width: 100%;\n  background: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  border-collapse: separate;\n  border-spacing: 0;\n  white-space: normal;\n}\n\n.sd-table > thead > tr > th {\n  border-top: 0;\n  border-bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid rgba(0, 0, 0, 0);\n}\n\n.sd-table__cell {\n  border-top: var(--sjs-base-unit, var(--base-unit, 8px)) solid rgba(0, 0, 0, 0);\n  border-bottom: var(--sjs-base-unit, var(--base-unit, 8px)) solid rgba(0, 0, 0, 0);\n  border-left: none;\n  border-right: none;\n  background-clip: padding-box;\n  box-sizing: content-box;\n}\n\n.sd-table.sd-table--columnsautowidth .sd-table__cell:not(.sd-table__cell--actions):not(.sd-table__cell--action):not(.sd-table__cell--empty.sd-table__cell--error) {\n  width: 10000px;\n}\n\n.sd-table__row:first-of-type > .sd-table__cell {\n  border-top: 0;\n}\n\n.sd-table__row:last-of-type > .sd-table__cell {\n  border-bottom: 0;\n}\n\n.sd-table--align-top .sd-table__cell {\n  vertical-align: top;\n}\n\n.sd-table--no-header {\n  padding-top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content .sd-table--no-header {\n  padding-top: 0;\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content .sd-question--table .sd-question__content {\n  padding-bottom: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-bottom: calc(-0.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-top: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content .sd-question--table > .sd-question__header ~ .sd-question__content {\n  padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  --animation-padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content .sd-question--table > .sd-question__header ~ .sd-question__content .sd-table--no-header {\n  padding-top: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content .sd-question--table > .sd-question__content .sd-table-wrapper .sd-table:not(.sd-table--no-header) {\n  margin-top: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content .sd-question--table.sd-question--error-top > .sd-question__content .sd-table-wrapper .sd-table:not(.sd-table--no-header) {\n  margin-top: 0;\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content > .sd-row:not(:first-of-type) .sd-question--table > .sd-question__content .sd-table-wrapper .sd-table:not(.sd-table--no-header) {\n  margin-top: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content > .sd-row:not(:first-of-type) .sd-question--table.sd-question--error-top > .sd-question__content .sd-table-wrapper .sd-table:not(.sd-table--no-header) {\n  margin-top: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content .sd-question--table > .sd-question__header ~ .sd-question__content .sd-table-wrapper .sd-table:not(.sd-table--no-header) {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-panel:not(.sd-panel--as-page) > .sd-panel__content > .sd-row:not(:first-of-type) .sd-question--table > .sd-question__header ~ .sd-question__content .sd-table-wrapper .sd-table:not(.sd-table--no-header) {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows {\n  margin-left: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-right: var(--sjs-base-unit, var(--base-unit, 8px));\n  width: calc(100% - 2 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__cell:not(.sd-table__cell--header):first-of-type {\n  padding-left: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__cell:last-of-type {\n  padding-right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:first-of-type > .sd-table__cell {\n  border-top: var(--sjs-base-unit, var(--base-unit, 8px)) solid rgba(0, 0, 0, 0);\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:last-of-type > .sd-table__cell {\n  border-bottom: var(--sjs-base-unit, var(--base-unit, 8px)) solid rgba(0, 0, 0, 0);\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) > td.sd-table__cell:not(.sd-table__cell--actions), .sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) td:first-of-type {\n  border-top-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n  border-bottom-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) > td.sd-table__cell:not(.sd-table__cell--actions).sd-matrix__text--checked, .sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) td:first-of-type.sd-matrix__text--checked {\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) > td.sd-table__cell:not(.sd-table__cell--actions) .sd-input, .sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) td:first-of-type .sd-input {\n  background-color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) > td.sd-table__cell:not(.sd-table__cell--actions) .sd-item:not(.sd-item--error) .sd-item__decorator, .sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) td:first-of-type .sd-item:not(.sd-item--error) .sd-item__decorator {\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) > td.sd-table__cell:not(.sd-table__cell--actions) .sd-item:not(.sd-item--error).sd-item--checked .sd-item__decorator, .sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) td:first-of-type .sd-item:not(.sd-item--error).sd-item--checked .sd-item__decorator {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) > td.sd-table__cell:not(.sd-table__cell--actions) .sd-item:not(.sd-item--error).sd-item--checked .sd-item__control:focus + .sd-item__decorator, .sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) td:first-of-type .sd-item:not(.sd-item--error).sd-item--checked .sd-item__control:focus + .sd-item__decorator {\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) > td.sd-table__cell:not(.sd-table__cell--actions) .sd-item:not(.sd-item--error).sd-item--readonly.sd-item--checked .sd-item__decorator, .sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) td:first-of-type .sd-item:not(.sd-item--error).sd-item--readonly.sd-item--checked .sd-item__decorator {\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) > td.sd-table__cell:not(.sd-table__cell--actions) .sd-item:not(.sd-item--error).sd-item--preview.sd-item--preview .sd-item__decorator, .sd-question:not(.sd-question--mobile) .sd-table--alternate-rows .sd-table__row:nth-of-type(odd) td:first-of-type .sd-item:not(.sd-item--error).sd-item--preview.sd-item--preview .sd-item__decorator {\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sd-table__cell {\n  font-weight: normal;\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  padding: 0 var(--sjs-base-unit, var(--base-unit, 8px));\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  text-align: center;\n}\n\n.sd-table__cell:not(.sd-table__cell--empty):not(.sd-table__cell--actions):not(:empty) {\n  min-width: calc(15 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-table__cell .sd-item {\n  text-align: initial;\n}\n\n.sd-table__cell--error {\n  border: none;\n  padding: 0 var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-table__cell--error .sd-question__erbox {\n  margin: 0;\n}\n\n.sd-table__cell--error-top {\n  vertical-align: bottom;\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-table__cell--error-bottom {\n  vertical-align: top;\n  padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-table__cell--item .sd-selectbase__item {\n  text-align: center;\n  justify-content: center;\n}\n\n.sd-table__cell--item .sd-selectbase__label {\n  justify-content: center;\n}\n\n.sd-question--disabled .sd-table__cell {\n  opacity: 0.25;\n}\n\n.sd-root--readonly .sd-question--disabled .sd-table__cell {\n  opacity: 1;\n}\n\n.sd-table__cell--header .sv-vue-title-additional-div, .sd-table__cell--header {\n  font-size: 0;\n  line-height: 0;\n}\n\n.sd-table__cell--header span {\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  font-weight: var(--sjs-font-questiontitle-weight, 600);\n}\n\n.sd-table__cell--header {\n  font-weight: 600;\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  vertical-align: top;\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-table__cell--header:not(.sd-table__cell--empty) {\n  min-width: calc(15 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrixdropdown .sd-table__cell--header.sd-table__cell--empty {\n  min-width: calc(15 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrixdropdown .sd-table__cell--header.sd-table__cell--action {\n  min-width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrixdropdown .sd-table__cell--header:not(.sd-table__cell--empty) {\n  min-width: calc(15 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrixdropdown .sd-table__cell--header:not(.sd-table__cell--empty).sd-table__cell--dropdown, .sd-matrixdropdown .sd-table__cell--header:not(.sd-table__cell--empty).sd-table__cell--rating {\n  min-width: calc(22 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrixdropdown .sd-table__cell--header:not(.sd-table__cell--empty).sd-table__cell--boolean {\n  min-width: calc(18 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-table__cell--footer {\n  text-align: end;\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-table__cell--footer-total {\n  font-weight: 600;\n  text-align: start;\n}\n\n.sd-table__cell--detail-panel {\n  border-top: var(--sjs-base-unit, var(--base-unit, 8px)) solid rgba(0, 0, 0, 0);\n  padding: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px)))) var(--sjs-base-unit, var(--base-unit, 8px)) calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-bottom: var(--sjs-base-unit, var(--base-unit, 8px)) solid rgba(0, 0, 0, 0);\n}\n\n.sd-table__cell--actions .sv-action-bar, .sd-matrixdynamic__add-btn .sv-action-bar {\n  overflow: visible;\n}\n\n.sd-table__cell--actions:not(.sd-table__cell--vertical) {\n  width: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-table__cell--actions:not(.sd-table__cell--vertical):not(.sd-table__cell--drag):first-of-type {\n  padding-left: 0;\n  width: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-width: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-table__cell--detail-button {\n  border: none;\n  background: rgba(0, 0, 0, 0);\n  border-radius: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n  transition: background var(--sjs-transition-duration, 150ms);\n}\n\n.sd-table__cell--detail-button svg {\n  display: block;\n  width: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  height: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  fill: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  transition: fill var(--sjs-transition-duration, 150ms);\n}\n\n.sd-table__cell--detail-button:hover, .sd-table__cell--detail-button:focus {\n  background: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  outline: none;\n}\n\n.sd-table__cell--detail-button:hover svg, .sd-table__cell--detail-button:focus svg {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-table__cell--actions {\n  white-space: nowrap;\n}\n\n.sd-table__cell--actions.sd-table__cell--vertical .sd-action-bar {\n  justify-content: center;\n}\n\n.sd-table__cell--row-text {\n  font-weight: var(--sjs-font-questiontitle-weight, 600);\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  text-align: start;\n  min-width: calc(12 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-matrix__question-wrapper {\n  position: relative;\n}\n\n.sd-table__question-wrapper:not(:focus-within):hover {\n  position: relative;\n}\n\n.sd-table__cell--actions:not(.sd-table__cell--vertical), .sd-table__cell--empty, .sd-table__cell--row-text, .sd-table__cell--footer-total, .sd-matrix__cell:first-of-type, .sd-matrix tr > td:first-of-type {\n  position: sticky;\n  background-color: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  z-index: 12;\n}\n\n.sd-table__cell--actions:not(.sd-table__cell--vertical):first-of-type, .sd-table__cell--empty:first-of-type, .sd-table__cell--row-text:first-of-type, .sd-table__cell--footer-total:first-of-type, .sd-matrix__cell:first-of-type:first-of-type, .sd-matrix tr > td:first-of-type:first-of-type {\n  left: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-table__cell--actions:not(.sd-table__cell--vertical):last-of-type, .sd-table__cell--empty:last-of-type, .sd-table__cell--row-text:last-of-type, .sd-table__cell--footer-total:last-of-type, .sd-matrix__cell:first-of-type:last-of-type, .sd-matrix tr > td:first-of-type:last-of-type {\n  right: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-table__cell--actions:not(.sd-table__cell--vertical):last-child .sd-action-bar {\n  margin-right: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  justify-content: flex-end;\n  background: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n}\n\n.sd-question.sd-question--table {\n  position: relative;\n  overflow-x: auto;\n}\n\n.sd-question--table.sd-element--collapsed, .sd-question--table.sd-element--nested {\n  overflow-x: visible;\n}\n\n.sd-question--table .sd-question__header--location--left {\n  z-index: 12;\n}\n\n.sd-table-wrapper {\n  display: flex;\n  margin: 0 calc(-1 * var(--sd-base-padding));\n  width: fit-content;\n  min-width: calc(100% + 2 * var(--sd-base-padding));\n}\n\n.sd-table-wrapper:before, .sd-table-wrapper:after {\n  content: "";\n  display: block;\n  position: sticky;\n  min-height: 100%;\n  width: calc(var(--sd-base-padding) - var(--sjs-base-unit, var(--base-unit, 8px)));\n  flex-shrink: 0;\n  background: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  z-index: 11;\n}\n\n.sd-table-wrapper::before {\n  left: calc(-1 * var(--sd-base-padding));\n}\n\n.sd-table-wrapper:after {\n  right: calc(-1 * var(--sd-base-padding));\n}\n\n.sd-table-wrapper > * {\n  flex-basis: 100%;\n}\n\n.sd-element--with-frame.sd-element--compact .sd-table {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sd-element--with-frame.sd-element--compact .sd-table-wrapper:before, .sd-element--with-frame.sd-element--compact .sd-table-wrapper:after {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sd-element--with-frame.sd-element--compact .sd-table__cell--actions:not(.sd-table__cell--vertical):last-child .sd-action-bar {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sd-element--with-frame.sd-element--compact .sd-table__cell--actions:not(.sd-table__cell--vertical), .sd-element--with-frame.sd-element--compact .sd-table__cell--empty, .sd-element--with-frame.sd-element--compact .sd-table__cell--row-text, .sd-element--with-frame.sd-element--compact .sd-table__cell--footer-total, .sd-element--with-frame.sd-element--compact .sd-matrix__cell:first-of-type, .sd-element--with-frame.sd-element--compact .sd-matrix tr > td:first-of-type {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sd-question--table > .sd-question__header, .sd-question--table .sd-question__description--under-input .sv-string-viewer {\n  position: sticky;\n  left: 0;\n}\n\n.sd-question--table > .sd-question__content {\n  padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  --animation-padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-width: min-content;\n}\n\n.sd-question--table.sd-element--nested > .sd-question__content {\n  min-width: auto;\n  overflow-x: auto;\n}\n\n.sd-question--table.sd-element--nested > .sd-question__content, .sd-question--table:not(.sd-element--with-frame):not(.sd-element--nested) {\n  padding-right: var(--sd-base-padding);\n  margin-right: calc(-1 * var(--sd-base-padding));\n  padding-left: var(--sd-base-padding);\n  margin-left: calc(-1 * var(--sd-base-padding));\n  box-sizing: content-box;\n}\n\n.sd-row--multiple .sd-question--table.sd-element--nested > .sd-question__content {\n  padding-right: calc(var(--sd-base-padding) + 2px);\n}\n\n.sd-question--scroll {\n  overflow-x: scroll;\n}\n\n.sd-table__row-disabled > .sd-table__cell {\n  opacity: 0.25;\n}\n\n.sd-question--mobile.sd-question.sd-question--table > .sd-question__content {\n  padding-top: 0;\n  --animation-padding-top: 0;\n}\n\n.sd-question--mobile.sd-question--table, .sd-question--mobile.sd-question--scroll {\n  overflow-x: visible;\n}\n\n.sd-question--mobile > .sd-question__content {\n  min-width: auto;\n}\n\n.sd-question--mobile .sd-table-wrapper {\n  width: auto;\n}\n\n.sd-question--mobile .sd-table {\n  display: block;\n  width: calc(100% - 2 * var(--sd-base-padding) + 2 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-question--mobile .sd-table > tbody {\n  display: block;\n}\n\n.sd-question--mobile .sd-table > tfoot {\n  display: block;\n}\n\n.sd-question--mobile .sd-table__cell.sd-matrix__cell {\n  display: flex;\n  align-items: flex-start;\n  border-top: none;\n  border-bottom: none;\n}\n\n.sd-question--mobile .sd-table__cell.sd-matrix__cell .sd-matrix__responsive-title {\n  margin-left: var(--sjs-base-unit, var(--base-unit, 8px));\n  text-align: start;\n}\n\n.sd-question--mobile .sd-table__cell.sd-matrix__cell:first-of-type {\n  padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-question--mobile .sd-table thead {\n  display: none;\n}\n\n.sd-question--mobile .sd-table tr {\n  display: flex;\n  flex-direction: column;\n}\n\n.sd-question--mobile .sd-matrix__table .sd-table__row {\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-question--mobile .sd-table__row {\n  padding-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table__row--expanded .sd-table__cell-action--show-detail-mobile {\n  display: none;\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) .sd-table__row {\n  padding-bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) .sd-table__row.sd-table__row--has-end-actions {\n  padding-bottom: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) tr:not(.sd-table__row--has-end-actions) {\n  padding-bottom: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) tr:not(.sd-table__row--has-end-actions):not(:last-of-type) {\n  padding-bottom: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) tr:not(.sd-table__row--has-end-actions):not(:last-of-type)::after {\n  bottom: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) tfoot tr::before, .sd-question--mobile .sd-table:not(.sd-matrix__table) tr:not(.sd-table__row--expanded)::after {\n  z-index: 12;\n  content: " ";\n  display: block;\n  position: relative;\n  height: 1px;\n  background-color: var(--sjs-border-light, var(--border-light, #eaeaea));\n  left: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(100% + 4 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  z-index: 12;\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) tr:not(.sd-table__row--expanded)::after {\n  bottom: 0;\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) tr:last-of-type::after {\n  display: none;\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) tfoot tr {\n  padding-top: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table:not(.sd-matrix__table) tfoot tr::before {\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sd-question--mobile .sd-table:not(.sd-table--has-footer) .sd-table__row:last-of-type .sd-table__cell-action--show-detail-mobile, .sd-question--mobile .sd-table:not(.sd-table--has-footer) .sd-table__row:last-of-type .sd-table__cell-action--remove-row {\n  margin-bottom: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-matrix__label {\n  justify-content: flex-start;\n}\n\n.sd-question--mobile .sd-table__cell {\n  border-top: none;\n  border-bottom: none;\n  display: block;\n  padding-top: 0;\n  padding-bottom: 0;\n  text-align: start;\n}\n\n.sd-question--mobile .sd-table__cell {\n  margin-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table__cell--error {\n  margin-top: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table__cell--error.sd-table__cell--error-bottom .sd-question__erbox {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-question--mobile .sd-table__cell:first-of-type, .sd-question--mobile .sd-matrix__cell {\n  margin-top: 0;\n}\n\n.sd-question--mobile .sd-table__cell--footer:not(.sd-question--answered) {\n  display: none;\n}\n\n.sd-question--mobile .sd-table__responsive-title {\n  padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n  font-weight: 600;\n  display: block;\n  text-align: start;\n}\n\n.sd-question--mobile .sd-table__responsive-title .sv-string-viewer {\n  white-space: normal;\n}\n\n.sd-question--mobile .sd-table--no-header {\n  padding-top: 0;\n}\n\n.sd-question--mobile .sd-table--no-header .sd-table__responsive-title {\n  display: none;\n}\n\n.sd-question--mobile .sd-table__cell--detail-panel {\n  padding-top: 0;\n  padding-bottom: 0;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.sd-question--mobile .sd-table__cell--detail-panel .sd-panel__content {\n  padding-top: 0;\n}\n\n.sd-question--mobile .sd-table__cell.sd-table__cell--actions {\n  width: auto;\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-question--mobile .sd-table__cell.sd-table__cell--actions .sd-action-bar {\n  margin-right: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-left: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sd-question--mobile .sd-table__cell.sd-table__cell--actions #show-detail-mobile {\n  flex-grow: 1;\n}\n\n.sd-question--mobile .sd-action.sd-action.sd-matrixdynamic__remove-btn {\n  opacity: 1;\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-action.sd-action.sd-matrixdynamic__remove-btn .sd-action__icon {\n  display: none;\n}\n\n.sd-question--mobile .sd-action.sd-action.sd-matrixdynamic__remove-btn:after {\n  content: attr(title);\n}\n\n.sd-question--mobile .sd-matrixdynamic__footer {\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-bottom: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table__cell--footer-total:not(.sd-matrix__cell), .sd-question--mobile .sd-table__cell--row-text:not(.sd-matrix__cell) {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-question--mobile .sd-matrixdropdown.sd-table tr::after {\n  bottom: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-matrixdropdown.sd-table tr:last-child:after {\n  content: none;\n}\n\n.sd-question--mobile .sd-table__cell.sd-table__cell--error-top {\n  margin-top: 0;\n}\n\n.sd-question--mobile .sd-table__cell--error-top:first-of-type ~ .sd-table__cell:nth-of-type(2) {\n  margin-top: 0;\n}\n\n.sd-question--mobile .sd-table__cell--error-top .sd-question__erbox {\n  margin-top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-bottom: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-question--mobile .sd-table__cell--error-top:first-of-type .sd-question__erbox {\n  margin-top: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-question--mobile .sd-table__question-wrapper .sd-boolean-root {\n  margin: initial;\n}\n\n.sd-table__cell--detail-panel .sd-panel__content {\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-table__question-wrapper .sd-boolean-root {\n  margin: auto;\n}\n\n.sd-table__cell--footer .sd-table__question-wrapper--expression .sd-expression {\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-bottom: 1px solid var(--sjs-border-light, var(--border-light, #eaeaea));\n  font-size: var(--sjs-font-size, 16px);\n  font-weight: 600;\n  line-height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-table__cell--footer .sd-table__question-wrapper--left {\n  text-align: start;\n}\n\n.sd-table__cell--footer .sd-table__question-wrapper--center {\n  text-align: center;\n}\n\n.sd-table__cell--footer .sd-table__question-wrapper--right {\n  text-align: end;\n}\n\n.sd-table.sd-matrixdynamic {\n  table-layout: auto;\n}\n\n.sd-page {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 0 calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.sd-root-modern--mobile .sd-page {\n  padding: 0;\n}\n\n.sd-page .sd-page__title {\n  --page-title-font-size: var(--sjs-font-pagetitle-size, calc(1.5 * (var(--sjs-font-size, 16px))));\n  font-family: var(--sjs-font-pagetitle-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-pagetitle-weight, 700);\n  font-size: var(--page-title-font-size);\n  color: var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91)));\n  position: static;\n  line-height: calc(1.33 * (var(--page-title-font-size)));\n  margin: 0 0 calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0px;\n}\n\n.sd-page .sd-page__description {\n  font-family: var(--sjs-font-pagedescription-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-pagedescription-weight, 400);\n  font-size: var(--sjs-font-pagedescription-size, var(--sjs-font-size, 16px));\n  color: var(--sjs-font-pagedescription-color, var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45)));\n  position: static;\n  line-height: calc(1.5 * (var(--sjs-font-pagedescription-size, var(--sjs-font-size, 16px))));\n  margin: 0 0 calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-page__errbox {\n  padding: calc(0.5 * var(--sd-base-vertical-padding) + var(--sjs-base-unit, var(--base-unit, 8px))) var(--sd-base-padding);\n}\n\n.sd-page__title ~ .sd-page__errbox, .sd-page__description ~ .sd-page__errbox {\n  margin-top: calc(0.5 * var(--sd-base-vertical-padding) + var(--sjs-base-unit, var(--base-unit, 8px)));\n  margin-bottom: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-root--compact .sd-page__title ~ .sd-page__errbox, .sd-root--compact .sd-page__description ~ .sd-page__errbox {\n  margin-bottom: 0;\n}\n\n.sd-row {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  box-sizing: border-box;\n  margin-top: var(--sd-base-vertical-padding);\n}\n\n.sd-row.sd-page__row {\n  margin-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-page__row.sd-row--compact {\n  margin-top: var(--sd-base-vertical-padding);\n}\n\n.sd-row:first-of-type {\n  margin-top: 0;\n}\n\n.sd-page__title ~ .sd-row.sd-page__row:not(.sd-row--compact), .sd-page__description ~ .sd-row.sd-page__row:not(.sd-row--compact) {\n  margin-top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-page__title ~ .sd-page__row.sd-row--compact, .sd-page__description ~ .sd-page__row.sd-row--compact {\n  margin-top: var(--sd-base-vertical-padding);\n}\n\n.sd-page__title ~ .sd-page__row.sd-row.sd-row--enter.sd-row-delayed-enter, .sd-page__description ~ .sd-page__row.sd-row.sd-row--enter.sd-row-delayed-enter {\n  margin-top: 0;\n}\n\n.sd-row.sd-page__row:not(.sd-row--compact) ~ .sd-row.sd-page__row:not(.sd-row--compact) {\n  margin-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-row.sd-page__row:not(.sd-row--compact) ~ .sd-page__row.sd-row.sd-row--enter.sd-row-delayed-enter {\n  margin-top: 0;\n}\n\n.sd-row--multiple {\n  row-gap: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-left: calc(-1 * var(--sd-base-padding));\n  width: calc(100% + var(--sd-base-padding));\n  flex-wrap: wrap;\n}\n\n.sd-row--multiple > div {\n  box-sizing: border-box;\n  --animation-padding-left: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-left: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  align-items: stretch;\n}\n\n.sd-panel.sd-panel--as-page > .sd-panel__content > .sd-row--multiple:not(.sd-row--compact) {\n  margin-left: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(100% + var(--base-unit) * 2);\n}\n\n.sd-panel:not(.sd-panel--as-page) .sd-row--multiple {\n  row-gap: var(--sd-base-vertical-padding);\n}\n\n.sd-panel:not(.sd-panel--as-page) .sd-row--multiple > div {\n  --animation-padding-left: var(--sd-base-padding);\n  padding-left: var(--sd-base-padding);\n}\n\n.sd-row--multiple.sd-row--compact > div {\n  --animation-padding-left: var(--sd-base-padding);\n  padding-left: var(--sd-base-padding);\n}\n\n.sd-page__row.sd-row--multiple {\n  margin-left: calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(100% + 2 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-page__row.sd-row--multiple.sd-row--compact {\n  padding: 0;\n  row-gap: var(--sd-base-vertical-padding);\n  margin-left: calc(-1 * var(--sd-base-padding));\n  width: calc(100% + var(--sd-base-padding));\n}\n\n.sd-row__panel {\n  box-sizing: border-box;\n  width: 100%;\n}\n\n.sd-row__question {\n  box-sizing: border-box;\n  width: 100%;\n  white-space: nowrap;\n}\n\n.sd-row.sd-row--enter {\n  margin-top: 0;\n}\n\n.sd-row--enter {\n  animation-fill-mode: forwards;\n  animation-name: fadeIn, moveInWithOverflow;\n  min-height: 0 !important;\n  opacity: 0;\n  height: 0;\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-delay: var(--sjs-row-fade-in-delay, 150ms), 0s, 0s;\n  animation-duration: var(--sjs-row-fade-in-duration, 500ms), var(--sjs-row-move-in-duration, 150ms), var(--sjs-row-move-in-duration, 150ms);\n}\n\n.sd-row--delayed-enter {\n  animation-delay: calc(var(--sjs-row-fade-in-delay, 150ms) + var(--sjs-row-fade-in-animation-delay, 400ms)), var(--sjs-row-fade-in-animation-delay, 400ms), var(--sjs-row-fade-in-animation-delay, 400ms);\n}\n\n.sd-row--leave {\n  animation-name: fadeIn, moveInWithOverflow;\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n  animation-fill-mode: forwards;\n  animation-direction: reverse;\n  min-height: 0 !important;\n  animation-delay: 0s, var(--sjs-row-move-out-delay, 100ms), var(--sjs-row-move-out-delay, 100ms);\n  animation-duration: var(--sjs-row-fade-out-duration, 150ms), var(--sjs-row-move-out-duration, 250ms), var(--sjs-row-move-out-duration, 250ms);\n}\n\n.sd-row--enter .sd-element-wrapper--enter {\n  animation: none;\n}\n\n.sd-row--leave .sd-element-wrapper--leave {\n  animation: none;\n}\n\n.sd-title {\n  display: block;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  flex-direction: row;\n  white-space: normal;\n}\n\n.sd-title.sd-container-modern__title {\n  display: flex;\n  align-items: center;\n  padding: var(--sd-page-vertical-padding) var(--sd-page-vertical-padding);\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  gap: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-shadow: 0px 2px 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-title.sd-container-modern__title .sd-logo.sv-logo--right {\n  margin-left: auto;\n}\n\n.sd-title.sd-container-modern__title .sd-logo__image {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-header__text {\n  display: flex;\n  flex-direction: column;\n  gap: var(--sjs-base-unit, var(--base-unit, 8px));\n  flex-grow: 1;\n}\n\n.sd-header__text .sd-title {\n  --survey-title-font-size: var(--sjs-font-surveytitle-size, calc(2 * (var(--sjs-font-size, 16px))));\n  font-size: var(--survey-title-font-size);\n  line-height: calc(1.25 * (var(--survey-title-font-size)));\n  color: var(--sjs-font-surveytitle-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n  font-family: var(--sjs-font-surveytitle-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-surveytitle-weight, 700);\n}\n\n.sd-header__text h3 {\n  line-height: calc(2.5 * (var(--sjs-font-size, 16px)));\n}\n\n.sd-header__text h5 {\n  font-size: var(--sjs-font-size, 16px);\n  font-weight: 400;\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n}\n\n.sd-header__text .sd-description {\n  --survey-description-font-size: var(--sjs-font-surveydescription-size, var(--sjs-font-size, 16px));\n  font-size: var(--survey-description-font-size);\n  line-height: calc(1.5 * (var(--survey-description-font-size)));\n  color: var(--sjs-font-surveydescription-color, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n  font-family: var(--sjs-font-surveydescription-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-surveydescription-weight, 400);\n}\n\n.sd-title .sv-title-actions {\n  width: 100%;\n  justify-content: space-between;\n}\n\n.sd-root-modern .sd-container-modern__title {\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sd-root-modern .sd-container-modern__title .sd-header__text h3 {\n  margin: 0;\n}\n\n.sd-root-modern .sd-container-modern__title .sd-description {\n  margin: 0;\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-title .sv-title-actions {\n  align-items: flex-start;\n  width: calc(100% + 3 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-title .sv-title-actions .sv-title-actions__title {\n  flex-wrap: wrap;\n  flex: 0 1 auto;\n  max-width: calc(100% - 3 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  white-space: initial;\n  min-width: unset;\n}\n\n.sd-root--compact .sd-title .sv-title-actions {\n  width: 100%;\n}\n\n.sd-action-title-bar {\n  flex: 1 9 auto;\n  min-width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  justify-content: flex-end;\n  margin: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-action-title-bar .sv-action {\n  flex: 0 0 auto;\n}\n\n.sd-action-title-bar.sd-action-bar--empty {\n  min-width: 0;\n}\n\n.sd-description {\n  font-style: normal;\n  font-family: var(--sjs-font-questiondescription-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-questiondescription-weight, 400);\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  font-size: var(--sjs-font-questiondescription-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-questiondescription-size, var(--sjs-font-size, 16px))));\n  white-space: normal;\n}\n\n.sd-description.sd-question__description--under-input {\n  padding-top: calc(0.375 * var(--sd-base-vertical-padding));\n}\n\n.sd-element__header .sd-description {\n  margin-top: calc(0.25 * var(--sd-base-vertical-padding) - 0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-item {\n  display: flex;\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-item--disabled.sd-item--disabled .sd-item__decorator, .sd-item__decorator {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n  background-color: var(--sjs-editorpanel-backcolor, var(--sjs-editor-background, var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9))));\n  border: none;\n  flex-shrink: 0;\n  margin-top: calc((1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))) - 3 * (var(--sjs-base-unit, var(--base-unit, 8px)))) / 2);\n  box-shadow: var(--sjs-shadow-inner, inset 0px 1px 2px 0px rgba(0, 0, 0, 0.15)), 0 0 0 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  transition: box-shadow var(--sjs-transition-duration, 150ms), background var(--sjs-transition-duration, 150ms);\n}\n\n.sd-item--readonly.sd-item--readonly .sd-item__decorator {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n  box-shadow: none;\n  transition: none;\n}\n\n.sd-item--preview.sd-item--preview .sd-item__decorator {\n  background-color: rgba(0, 0, 0, 0);\n  box-shadow: none;\n  transition: none;\n}\n\n.sd-item--checked .sd-item__decorator {\n  box-shadow: none;\n}\n\n.sd-item__control:focus + .sd-item__decorator {\n  background: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  outline: none;\n  box-shadow: var(--sjs-shadow-inner-reset, inset 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-item--allowhover:not(.sd-item--readonly) .sd-selectbase__label:hover .sd-item__decorator {\n  background: var(--sjs-editorpanel-hovercolor, var(--sjs-general-backcolor-dim-dark, rgb(243, 243, 243)));\n  outline: none;\n}\n\n.sd-item--checked .sd-item__decorator {\n  background: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-item__control-label {\n  font-family: var(--sjs-font-editorfont-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-style: normal;\n  font-weight: var(--sjs-font-editorfont-weight, 400);\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  white-space: normal;\n  width: 100%;\n  text-align: start;\n  min-width: 0;\n}\n\n.sd-item__control-label .sv-string-viewer {\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n}\n\n.sd-item--disabled .sd-item__control-label {\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  opacity: 0.25;\n}\n\n.sd-root--readonly .sd-item--disabled .sd-item__control-label {\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-item--error .sd-item__decorator {\n  background: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n}\n\n.sd-selectbase {\n  border: none;\n  margin: 0;\n  padding: 0;\n  min-inline-size: 0;\n  min-width: 0;\n}\n\n.sd-selectbase--row {\n  border: none;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-wrap: wrap;\n  column-gap: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-selectbase--multi-column {\n  display: flex;\n  flex: 1 1 0px;\n  flex-wrap: nowrap;\n  overflow: auto;\n  padding: 0 2px;\n  margin: 0 -2px;\n}\n\n.sd-selectbase__label {\n  display: inline-flex;\n  position: relative;\n  gap: var(--sjs-base-unit, var(--base-unit, 8px));\n  vertical-align: top;\n  max-width: 100%;\n}\n\n.sd-selectbase__column {\n  vertical-align: top;\n}\n\n.sd-selectbase__column {\n  display: block;\n  box-sizing: border-box;\n  flex: 1 1 0px;\n  max-width: 100%;\n}\n\n.sd-selectbase__column:not(:last-child) {\n  padding-right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-selectbase__column.sv-q-column-1 {\n  width: 100%;\n}\n\n.sd-item--enter, .sd-item--leave {\n  animation-name: moveInWithOverflow, fadeIn;\n  opacity: 0;\n  animation-fill-mode: forwards;\n  animation-timing-function: linear;\n  animation-direction: var(--animation-direction);\n  animation-duration: var(--move-animation-duration), var(--fade-animation-duration);\n  animation-delay: var(--move-animation-delay), var(--fade-animation-delay);\n}\n\n.sd-item--enter {\n  --animation-direction: normal;\n  --move-animation-duration: var(--sjs-ranking-move-in-duration, 150ms);\n  --move-animation-delay: 0s;\n  --fade-animation-duration: var(--sjs-ranking-fade-in-duration, 100ms);\n  --fade-animation-delay: var(--sjs-ranking-fade-in-delay, 150ms);\n}\n\n.sd-item--leave {\n  --animation-direction: reverse;\n  --move-animation-duration: var(--sjs-ranking-move-out-duration, 150ms);\n  --move-animation-delay: var(--sjs-ranking-move-out-delay, 0ms);\n  --fade-animation-duration: var(--sjs-ranking-fade-out-duration, 100ms);\n  --fade-animation-delay: 0s;\n}\n\ndiv[class*=sv-q-column-]:not(:first-of-type) .sd-item--enter {\n  --move-animation-duration: 0s;\n  --fade-animation-delay: 0s;\n}\n\n.sd-radio__decorator {\n  border-radius: 50%;\n}\n\n.sd-radio__decorator:after {\n  content: " ";\n  display: block;\n  width: var(--sjs-base-unit, var(--base-unit, 8px));\n  height: var(--sjs-base-unit, var(--base-unit, 8px));\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0);\n  transition: background-color var(--sjs-transition-duration, 150ms);\n}\n\n.sd-radio--checked .sd-radio__decorator:after {\n  content: " ";\n  display: block;\n  width: var(--sjs-base-unit, var(--base-unit, 8px));\n  height: var(--sjs-base-unit, var(--base-unit, 8px));\n  border-radius: 50%;\n  background-color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-radio--checked.sd-radio--disabled .sd-radio__decorator:after {\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-radio--checked.sd-radio--readonly .sd-radio__decorator:after {\n  background-color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-radio--checked.sd-radio--preview .sd-radio__decorator:after {\n  display: none;\n}\n\n.sd-radio--checked.sd-radio--preview .sd-radio__decorator .sd-radio__svg {\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n  display: block;\n  width: calc(2.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(2.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-radio--checked .sd-radio__control:focus + .sd-radio__decorator:after {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-radio__svg {\n  display: none;\n}\n\n.sd-visuallyhidden {\n  position: absolute;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px 1px 1px 1px);\n  clip: rect(1px, 1px, 1px, 1px);\n}\n\n.sd-matrix fieldset {\n  border: none;\n  padding: 0;\n  margin: 0;\n}\n\n.sd-matrix__label {\n  display: flex;\n  position: relative;\n  justify-content: center;\n}\n\n.sd-matrix__text {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrix__text--checked {\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-matrix__cell:first-of-type {\n  font-weight: var(--sjs-font-questiontitle-weight, 600);\n  text-align: start;\n}\n\n:root {\n  --sd-rating-bad-color: var(--sjs-special-red, var(--red, #e60a3e));\n  --sd-rating-normal-color: var(--sjs-special-yellow, var(--yellow, #ff9814));\n  --sd-rating-good-color: var(--sjs-special-green, var(--green, #19b394));\n  --sd-rating-bad-color-light: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n  --sd-rating-normal-color-light: var(--sjs-special-yellow-light, var(--yellow-light, rgba(255, 152, 20, 0.1)));\n  --sd-rating-good-color-light: var(--sjs-special-green-light, var(--green-light, rgba(25, 179, 148, 0.1)));\n}\n\n.sd-rating {\n  overflow-x: auto;\n  min-height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating fieldset {\n  display: flex;\n  border: none;\n  padding: 0 0 2px 0;\n  flex-wrap: nowrap;\n  gap: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-inline-start: 0;\n  align-items: center;\n}\n\n.sd-rating.sd-rating--wrappable fieldset {\n  flex-wrap: wrap;\n  min-width: 0;\n}\n\n.sd-rating.sd-rating--labels-top fieldset {\n  padding-top: calc(4.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  position: relative;\n}\n\n.sd-rating.sd-rating--labels-top fieldset .sd-rating__min-text {\n  position: absolute;\n  margin: 0;\n  left: 0;\n  top: 0;\n  border: 0;\n}\n\n.sd-rating.sd-rating--labels-top fieldset .sd-rating__max-text {\n  position: absolute;\n  margin: 0;\n  right: 0;\n  top: 0;\n  border: 0;\n}\n\n.sd-rating.sd-rating--labels-bottom fieldset {\n  padding-bottom: calc(4.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  position: relative;\n}\n\n.sd-rating.sd-rating--labels-bottom fieldset .sd-rating__min-text {\n  position: absolute;\n  margin: 0;\n  left: 0;\n  bottom: 0;\n  border: 0;\n}\n\n.sd-rating.sd-rating--labels-bottom fieldset .sd-rating__max-text {\n  position: absolute;\n  margin: 0;\n  right: 0;\n  bottom: 0;\n  border: 0;\n}\n\n.sd-rating.sd-rating--labels-diagonal fieldset {\n  padding-top: calc(4.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(4.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  position: relative;\n}\n\n.sd-rating.sd-rating--labels-diagonal fieldset .sd-rating__min-text {\n  position: absolute;\n  margin: 0;\n  left: 0;\n  top: 0;\n  border: 0;\n}\n\n.sd-rating.sd-rating--labels-diagonal fieldset .sd-rating__max-text {\n  position: absolute;\n  margin: 0;\n  right: 0;\n  bottom: 0;\n  border: 0;\n}\n\n.sd-rating--small {\n  min-height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin: auto;\n}\n\n.sd-rating--small fieldset {\n  padding: 0;\n  gap: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-rating__item {\n  position: relative;\n  background: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  white-space: nowrap;\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  min-width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  text-align: center;\n  border: 0px solid rgba(0, 0, 0, 0);\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n  font-size: var(--sjs-font-size, 16px);\n  box-shadow: var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15)), inset 0 0 0 0px var(--sjs-general-backcolor, var(--background, #fff));\n  transition: box-shadow var(--sjs-transition-duration, 150ms), background-color var(--sjs-transition-duration, 150ms);\n}\n\n.sd-rating__item--fixed-size {\n  width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: 0;\n}\n\nlegend + .sd-rating__item, legend + sv-ng-rating-item-smiley + .sd-rating__item-smiley, legend + sv-ng-rating-item + .sd-rating__item {\n  margin-inline-start: 2px;\n}\n\n.sd-rating__item--error {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0);\n  border: none;\n}\n\n.sd-rating__item.sd-rating__item--disabled {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-rating__item.sd-rating__item--selected.sd-rating__item--disabled {\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n  background-color: var(--lbr-dialog-screen-color, var(--background-semitransparent, rgba(144, 144, 144, 0.5)));\n  border: none;\n}\n\n.sd-rating__item.sd-rating__item--readonly {\n  fill: rgba(0, 0, 0, 0);\n  background-color: rgba(0, 0, 0, 0);\n  border: 2px solid var(--sjs-border-inside, var(--border-inside, rgba(0, 0, 0, 0.16)));\n  box-shadow: none;\n  transform: none;\n}\n\n.sd-rating__item.sd-rating__item--readonly .sd-rating__item-text.sd-rating__item-text {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-rating__item.sd-rating__item--selected.sd-rating__item--readonly {\n  border-color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-rating__item.sd-rating__item--selected.sd-rating__item--readonly .sd-rating__item-text.sd-rating__item-text {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-rating__item.sd-rating__item--preview {\n  fill: rgba(0, 0, 0, 0);\n  background-color: rgba(0, 0, 0, 0);\n  border: 1px solid rgba(0, 0, 0, 0);\n  box-shadow: none;\n  transform: none;\n}\n\n.sd-rating__item.sd-rating__item--preview:focus-within {\n  box-shadow: none;\n}\n\n.sd-rating__item.sd-rating__item--preview .sd-rating__item-text.sd-rating__item-text {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-rating__item.sd-rating__item--selected.sd-rating__item--preview {\n  border-color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  border-width: 1px;\n}\n\n.sd-rating__item.sd-rating__item--selected.sd-rating__item--preview .sd-rating__item-text.sd-rating__item-text {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-question--disabled .sd-rating__item-text {\n  opacity: 0.25;\n}\n\n.sd-rating__item--allowhover:hover {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-rating__item:focus-within {\n  box-shadow: 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-rating__item--selected {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  font-weight: 600;\n  box-shadow: 0 0 0 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-rating__item--selected:focus-within {\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), inset 0 0 0 4px var(--sjs-general-backcolor, var(--background, #fff)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-rating__item-smiley {\n  position: relative;\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  white-space: nowrap;\n  padding: calc(1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n  min-width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  border: 2px solid var(--sjs-border-default, var(--border, #d6d6d6));\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  fill: var(--sjs-border-default, var(--border, #d6d6d6));\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), inset 0 0 0 0px var(--sjs-general-backcolor, var(--background, #fff));\n  transition: box-shadow var(--sjs-transition-duration, 150ms), background-color var(--sjs-transition-duration, 150ms);\n}\n\n.sd-rating__item-smiley svg {\n  display: block;\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating__item-smiley--small {\n  padding: calc(0.625 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-width: 1px;\n}\n\n.sd-rating__item-smiley--small svg {\n  width: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating__item-smiley--small:not(.sd-rating__item-smiley--selected):focus-within {\n  box-shadow: 0 0 0 1px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-rating__item-smiley--colored.sd-rating__item-smiley--small:not(.sd-rating__item-smiley--selected):focus-within {\n  box-shadow: 0 0 0 1px var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\n.sd-rating__item-smiley--small.sd-rating__item-smiley--selected:focus-within {\n  box-shadow: inset 0 0 0 2px var(--sjs-general-backcolor, var(--background, #fff)), 0 0 0 1px var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\nlegend + .sd-rating__item-smiley, legend + sv-ng-rating-item + .sd-rating__item-smiley {\n  margin-inline-start: 2px;\n}\n\n.sd-rating__item-smiley--scale-colored {\n  border-color: var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n  fill: var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n  transition: box-shadow var(--sjs-transition-duration, 150ms), opacity var(--sjs-transition-duration, 150ms), background-color var(--sjs-transition-duration, 150ms);\n}\n\n.sd-rating__item-smiley--error {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n  border-color: rgba(0, 0, 0, 0);\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-rating__item-smiley--error.sd-rating__item-smiley--scale-colored:hover {\n  fill: var(--sd-rating-item-color, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n}\n\n.sd-rating__item-smiley--error.sd-rating__item-smiley--scale-colored:not(.sd-rating__item-smiley--selected) {\n  opacity: initial;\n}\n\n.sd-rating__item-smiley.sd-rating__item-smiley--disabled {\n  opacity: 0.5;\n}\n\n.sd-rating__item-smiley.sd-rating__item-smiley--selected.sd-rating__item-smiley--disabled {\n  opacity: initial;\n  fill: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-rating__item-smiley.sd-rating__item-smiley--readonly {\n  fill: var(--sjs-border-default, var(--border, #d6d6d6));\n  border-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-rating__item-smiley.sd-rating__item-smiley--selected.sd-rating__item-smiley--readonly {\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n  border-color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  background-color: unset;\n}\n\n.sd-rating__item-smiley.sd-rating__item-smiley--preview.sd-rating__item-smiley--preview.sd-rating__item-smiley--preview {\n  border: 1px solid var(--sjs-general-forecolor, var(--foreground, #161616));\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-rating__item-smiley.sd-rating__item-smiley--preview.sd-rating__item-smiley--preview.sd-rating__item-smiley--preview:focus-within {\n  box-shadow: none;\n}\n\n.sd-rating__item-smiley.sd-rating__item-smiley--preview.sd-rating__item-smiley--preview.sd-rating__item-smiley--preview svg {\n  margin: 1px;\n}\n\n.sd-rating__item-smiley.sd-rating__item-smiley--selected.sd-rating__item-smiley--preview.sd-rating__item-smiley--preview {\n  fill: var(--sjs-general-backcolor, var(--background, #fff));\n  background-color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-rating__item-smiley--allowhover:hover {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n  border-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-rating__item-smiley:focus-within {\n  border: none;\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-rating__item-smiley:focus-within {\n  border: none;\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-rating__item-smiley--selected {\n  background-color: var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n  border-color: var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n  fill: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  font-weight: 600;\n}\n\n.sd-rating__item-smiley--selected:focus-within {\n  border: 0px solid var(--sjs-general-backcolor, var(--background, #fff));\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), inset 0 0 0 4px var(--sjs-general-backcolor, var(--background, #fff)), 0 0 0 2px var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\n.sd-rating__item-smiley--scale-colored:not(.sd-rating__item-smiley--selected) {\n  opacity: 0.25;\n}\n\n.sd-rating__item-smiley--scale-colored:not(.sd-rating__item-smiley--selected).sd-rating__item-smiley--allowhover:hover {\n  background-color: var(--sd-rating-item-color-light, var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248))));\n  border-color: var(--sd-rating-item-color, var(--sjs-border-default, var(--border, #d6d6d6)));\n  opacity: 0.5;\n}\n\n.sd-rating__item-smiley--rate-colored:not(.sd-rating__item-smiley--selected).sd-rating__item-smiley--allowhover:hover {\n  opacity: 0.5;\n}\n\n.sd-rating__item-smiley--scale-colored:not(.sd-rating__item-smiley--selected):focus-within {\n  opacity: 1;\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\n.sd-rating__item-smiley--scale-colored.sd-rating__item-smiley--small:not(.sd-rating__item-smiley--selected):focus-within {\n  opacity: 1;\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 1px var(--sd-rating-item-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\n.sd-rating__item-smiley--scale-colored.sd-rating__item-smiley--selected, .sd-rating__item-smiley--scale-colored.sd-rating__item-smiley--readonly, .sd-rating__item-smiley--scale-colored.sd-rating__item-smiley--preview {\n  opacity: 1;\n}\n\n.sd-rating__item-star {\n  position: relative;\n  width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: content-box;\n}\n\n.sd-rating__item-star:not(:first-of-type) {\n  padding-left: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-left: calc(-0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating__item-star:not(:last-of-type) {\n  padding-right: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-right: calc(-0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating__item-star svg {\n  stroke: var(--sjs-border-default, var(--border, #d6d6d6));\n  stroke-width: 2px;\n  fill: rgba(0, 0, 0, 0);\n  width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: block;\n  position: absolute;\n  transition: stroke var(--sjs-transition-duration, 150ms), opacity var(--sjs-transition-duration, 150ms), fill var(--sjs-transition-duration, 150ms);\n}\n\n.sd-rating__item-star .sv-star {\n  opacity: 1;\n}\n\n.sd-rating__item-star .sv-star-2 {\n  opacity: 0;\n}\n\n.sd-rating__item-star--small {\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating__item-star--small svg {\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating__item-star--small.sd-rating__item-star--selected svg {\n  stroke-width: 1px;\n}\n\n.sd-rating__item-star--selected svg {\n  stroke: rgba(0, 0, 0, 0);\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-rating__item-star--selected:nth-child(1) svg {\n  transition-delay: 0ms;\n}\n\n.sd-rating__item-star--selected:nth-child(2) svg {\n  transition-delay: 25ms;\n}\n\n.sd-rating__item-star--selected:nth-child(3) svg {\n  transition-delay: 50ms;\n}\n\n.sd-rating__item-star--selected:nth-child(4) svg {\n  transition-delay: 75ms;\n}\n\n.sd-rating__item-star--selected:nth-child(5) svg {\n  transition-delay: 100ms;\n}\n\n.sd-rating__item-star--selected:nth-child(6) svg {\n  transition-delay: 125ms;\n}\n\n.sd-rating__item-star--selected:nth-child(7) svg {\n  transition-delay: 150ms;\n}\n\n.sd-rating__item-star--selected:nth-child(8) svg {\n  transition-delay: 175ms;\n}\n\n.sd-rating__item-star--selected:nth-child(9) svg {\n  transition-delay: 200ms;\n}\n\n.sd-rating__item-star--selected:nth-child(10) svg {\n  transition-delay: 225ms;\n}\n\n.sd-rating__item-star--selected:nth-child(11) svg {\n  transition-delay: 250ms;\n}\n\n.sd-rating__item-star--selected:nth-child(12) svg {\n  transition-delay: 275ms;\n}\n\n.sd-rating__item-star--selected:nth-child(13) svg {\n  transition-delay: 300ms;\n}\n\n.sd-rating__item-star--selected:nth-child(14) svg {\n  transition-delay: 325ms;\n}\n\n.sd-rating__item-star--selected:nth-child(15) svg {\n  transition-delay: 350ms;\n}\n\n.sd-rating__item-star--selected:nth-child(16) svg {\n  transition-delay: 375ms;\n}\n\n.sd-rating__item-star--selected:nth-child(17) svg {\n  transition-delay: 400ms;\n}\n\n.sd-rating__item-star--selected:nth-child(18) svg {\n  transition-delay: 425ms;\n}\n\n.sd-rating__item-star--selected:nth-child(19) svg {\n  transition-delay: 450ms;\n}\n\n.sd-rating__item-star--selected:nth-child(20) svg {\n  transition-delay: 475ms;\n}\n\n.sd-rating__item-star--selected:nth-child(21) svg {\n  transition-delay: 500ms;\n}\n\n.sd-rating__item-star--selected:nth-child(22) svg {\n  transition-delay: 525ms;\n}\n\n.sd-rating__item-star--selected:nth-child(23) svg {\n  transition-delay: 550ms;\n}\n\n.sd-rating__item-star--selected:nth-child(24) svg {\n  transition-delay: 575ms;\n}\n\n.sd-rating__item-star--selected:nth-child(25) svg {\n  transition-delay: 600ms;\n}\n\n.sd-rating__item-star--error svg {\n  stroke: none;\n  fill: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n}\n\n.sd-rating__item-star--disabled {\n  opacity: 0.5;\n}\n\n.sd-rating__item-star--disabled svg {\n  stroke: var(--sjs-border-default, var(--border, #d6d6d6));\n  fill: none;\n}\n\n.sd-rating__item-star--selected.sd-rating__item-star--disabled svg {\n  stroke: none;\n  fill: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-rating__item-star--readonly svg {\n  stroke: var(--sjs-border-default, var(--border, #d6d6d6));\n  fill: none;\n}\n\n.sd-rating__item-star--selected.sd-rating__item-star--readonly svg {\n  stroke: none;\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-rating__item-star--preview svg {\n  stroke: var(--sjs-general-forecolor, var(--foreground, #161616));\n  stroke-width: 1px;\n  fill: none;\n}\n\n.sd-rating__item-star--selected.sd-rating__item-star--preview svg {\n  stroke: none;\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-rating__item-star:not(.sd-rating__item-star--preview):focus-within svg {\n  stroke: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  fill: rgba(0, 0, 0, 0);\n}\n\n.sd-rating__item-star--unhighlighted svg {\n  stroke: rgba(0, 0, 0, 0);\n  fill: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-rating__item-star--highlighted svg {\n  stroke: var(--sjs-border-default, var(--border, #d6d6d6));\n  fill: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-rating__item-star--selected:not(.sd-rating__item-star--preview).sd-rating__item-star--unhighlighted:focus-within svg {\n  stroke: var(--sjs-border-default, var(--border, #d6d6d6));\n  fill: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-rating__item-star--selected:not(.sd-rating__item-star--preview):focus-within svg {\n  stroke: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-rating__item-star--selected:not(.sd-rating__item-star--preview):focus-within .sv-star {\n  opacity: 0;\n}\n\n.sd-rating__item-star--selected:not(.sd-rating__item-star--preview):focus-within .sv-star-2 {\n  opacity: 1;\n}\n\n.sd-rating__item-text.sd-rating__item-text {\n  font-family: var(--sjs-font-editorfont-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-editorfont-weight, 400);\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  display: inline-block;\n  box-sizing: border-box;\n  transition: color var(--sjs-transition-duration, 150ms);\n}\n\n.sd-rating__item-text.sd-rating__item-text.sd-rating__min-text, .sd-rating__item-text.sd-rating__item-text.sd-rating__max-text {\n  margin-top: calc(1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-bottom: calc(1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  border: 2px solid rgba(0, 0, 0, 0);\n}\n\n.sd-rating__item-text.sd-rating__item-text.sd-rating__min-text {\n  margin-right: var(--sjs-base-unit, var(--base-unit, 8px));\n  border-left: 0px;\n}\n\n.sd-rating__item-text.sd-rating__item-text.sd-rating__max-text {\n  margin-right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-left: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-rating__item-text.sd-rating__item-text .sv-string-editor {\n  white-space: nowrap;\n}\n\n.sd-rating__item-text.sd-rating__item-text.sd-rating__item--fixed-size {\n  min-width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating__item-text.sd-rating__item-text::after {\n  display: block;\n  content: attr(data-text);\n  font-weight: 600;\n  height: 0;\n  color: rgba(0, 0, 0, 0);\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.sd-rating--wrappable .sd-rating__item-text {\n  max-width: 100%;\n}\n\n.sd-rating--wrappable .sd-rating__item-text .sv-string-viewer {\n  max-width: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  display: block;\n}\n\n.sd-rating__item:focus-within .sd-rating__item-text.sd-rating__item-text {\n  border: none;\n}\n\n.sd-rating__item--selected .sd-rating__item-text.sd-rating__item-text {\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  font-weight: inherit;\n  border: none;\n}\n\n.sd-rating-dropdown-item {\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n  gap: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-rating-dropdown-item_description {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  font-weight: normal;\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  line-height: var(--sjs-font-size, 16px);\n}\n\n.sv-list__item.sv-list__item--selected .sd-rating-dropdown-item_description {\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sv-ranking-item--error .sv-ranking-item__index {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0);\n  border-color: rgba(0, 0, 0, 0);\n}\n\n.sd-element--with-frame .sv-ranking-item {\n  left: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-ranking.sd-ranking--readonly {\n  user-select: initial;\n  -webkit-user-select: initial;\n}\n\n.sv-ranking.sd-ranking--readonly.sv-ranking--select-to-rank-empty-value .sv-ranking__containers-divider {\n  visibility: hidden;\n}\n\n.sv-ranking.sd-ranking--readonly .sv-ranking__container--empty {\n  visibility: hidden;\n}\n\n.sv-ranking.sd-ranking--preview {\n  user-select: initial;\n  -webkit-user-select: initial;\n}\n\n.sv-ranking.sd-ranking--preview.sv-ranking--select-to-rank-empty-value .sv-ranking__containers-divider {\n  visibility: hidden;\n}\n\n.sv-ranking.sd-ranking--preview .sv-ranking__container--empty {\n  visibility: hidden;\n}\n\n@container (max-width: 496px) {\n  .sv-ranking--select-to-rank-horizontal {\n    flex-direction: column-reverse;\n  }\n  .sv-ranking--select-to-rank-horizontal .sv-ranking__containers-divider {\n    margin: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n    height: 1px;\n    width: initial;\n  }\n  .sv-ranking--select-to-rank-horizontal .sv-ranking__container--empty {\n    padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n    padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .sv-ranking--select-to-rank-horizontal .sv-ranking__container {\n    max-width: initial;\n  }\n  .sv-ranking--select-to-rank-horizontal .sv-ranking__container--to .sv-ranking-item {\n    left: initial;\n  }\n  .sv-ranking--select-to-rank-horizontal .sv-ranking__container--empty.sv-ranking__container--to .sv-ranking-item {\n    left: initial;\n  }\n  .sv-ranking--select-to-rank-horizontal .sv-ranking__container--empty.sv-ranking__container--to .sv-ranking__container-placeholder {\n    padding-left: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n    padding-right: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  }\n  .sv-ranking--select-to-rank-horizontal .sv-ranking__container--empty.sv-ranking__container--from .sv-ranking__container-placeholder {\n    padding-right: initial;\n  }\n}\n@container (max-width: 176px) {\n  .sv-ranking__container--empty.sv-ranking__container--to .sv-ranking__container-placeholder {\n    margin-left: calc(-5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n    margin-right: calc(-5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  }\n}\n.sd-element--with-frame .sv-ranking--mobile .sv-ranking-item__icon-container {\n  margin-left: 0;\n  margin-right: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-element--with-frame .sv-ranking--mobile .sv-ranking-item {\n  left: 0;\n}\n\n.sv-ranking-item__content.sd-ranking-item__content {\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n}\n\n.sv-dragdrop-movedown {\n  transform: translate(0, 0);\n  animation: svdragdropmovedown 0.1s;\n  animation-timing-function: ease-in-out;\n}\n\n@keyframes svdragdropmovedown {\n  0% {\n    transform: translate(0, -50px);\n  }\n  100% {\n    transform: translate(0, 0);\n  }\n}\n.sv-dragdrop-moveup {\n  transform: translate(0, 0);\n  animation: svdragdropmoveup 0.1s;\n  animation-timing-function: ease-in-out;\n}\n\n@keyframes svdragdropmoveup {\n  0% {\n    transform: translate(0, 50px);\n  }\n  100% {\n    transform: translate(0, 0);\n  }\n}\n.sv-dropdown_select-wrapper {\n  position: relative;\n}\n\n.sv-dropdown_select-wrapper use {\n  fill: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n}\n\n.sd-dropdown {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  padding-inline-end: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-start: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-block: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  opacity: 1;\n  display: flex;\n  justify-content: space-between;\n  word-spacing: normal;\n}\n\n.sd-dropdown[disabled] {\n  pointer-events: none;\n}\n\nselect.sd-dropdown {\n  padding-inline-start: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-end: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-block: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-dropdown--empty:not(.sd-input--disabled), .sd-dropdown--empty:not(.sd-input--disabled) .sd-dropdown__value {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-dropdown__input-field-component {\n  height: auto;\n}\n\n.sd-dropdown option {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-size, 16px);\n}\n\n.sd-dropdown input[readonly] {\n  pointer-events: none;\n}\n\n.sd-dropdown__value {\n  width: 100%;\n  min-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  font-family: var(--sjs-font-editorfont-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-editorfont-weight, 400);\n  color: var(--sjs-font-editorfont-color, var(--sjs-general-forecolor, rgba(0, 0, 0, 0.91)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  position: relative;\n  margin-block: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-inline: 0;\n}\n\n.sd-dropdown-action-bar {\n  overflow: unset;\n  gap: calc(0.25 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  margin-inline-start: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-editor-button-item {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  border: none;\n  outline: none;\n  background: rgba(0, 0, 0, 0);\n  display: flex;\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n  justify-content: center;\n  align-items: center;\n  align-self: stretch;\n  border-radius: calc(0.125 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  cursor: pointer;\n}\n\n.sd-editor-button-item:hover {\n  background: var(--lbr-editor-button-background-color-hovered, var(--sjs-general-backcolor-dim-dark, #f3f3f3));\n  transition: background var(--sjs-transition-duration, 150ms);\n}\n\n.sd-input--readonly .sd-editor-button-item:hover, .sd-input--readonly .sd-editor-button-item:focus {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sd-editor-button-item--pressed {\n  opacity: var(--lbr-editor-button-icon-opacity-pressed, 0.5);\n  background: var(--lbr-editor-button-background-color-hovered, var(--sjs-general-backcolor-dim-dark, #f3f3f3));\n  transition-property: opacity, background-color;\n  transition-duration: var(--sjs-transition-duration, 150ms);\n}\n\n.sv-editor-button-item__icon {\n  width: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n}\n\n.sv-editor-button-item__icon use {\n  pointer-events: none;\n}\n\n.sd-question--readonly .sd-editor-button-item {\n  opacity: var(--lbr-editor-button-icon-opacity-disabled, 0.25);\n  cursor: default;\n}\n\n.sd-dropdown_chevron-button {\n  position: absolute;\n  width: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  top: 0;\n  bottom: 0;\n  inset-inline-end: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-inline-end: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: content-box;\n  cursor: pointer;\n}\n\n.sd-dropdown_chevron-button-svg {\n  width: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n}\n\n.sd-dropdown_chevron-button-svg use {\n  pointer-events: none;\n}\n\n.sd-question--readonly .sd-dropdown_chevron-button use {\n  opacity: 0.24;\n}\n\n.sd-input.sd-dropdown:focus-within {\n  box-shadow: var(--sjs-shadow-inner-reset, inset 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-input.sd-dropdown.sd-input--readonly {\n  box-shadow: none;\n  transition: none;\n}\n\n.sd-dropdown__filter-string-input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  max-width: 100%;\n  border: none;\n  outline: none;\n  padding: 0;\n  font-family: var(--sjs-font-editorfont-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-editorfont-weight, 400);\n  color: var(--sjs-font-editorfont-color, var(--sjs-general-forecolor, rgba(0, 0, 0, 0.91)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  background-color: rgba(0, 0, 0, 0);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  display: inline-block;\n  appearance: none;\n}\n\n.sd-dropdown--empty:not(.sd-input--disabled) .sd-dropdown__filter-string-input::placeholder {\n  color: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n}\n\n.sd-dropdown__filter-string-input::placeholder {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  display: inline-block;\n  appearance: none;\n}\n\n.sd-dropdown__hint-prefix {\n  color: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n  display: flex;\n  align-items: center;\n}\n\n.sd-dropdown__hint-prefix span {\n  white-space: pre;\n}\n\n.sd-dropdown__hint-suffix {\n  display: flex;\n  color: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n}\n\n.sd-dropdown__hint-suffix span {\n  white-space: pre;\n}\n\n.sd-dropdown.sd-input--disabled .sv-string-viewer, .sd-dropdown.sd-input--readonly .sv-string-viewer, .sd-dropdown.sd-input--preview .sv-string-viewer {\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.sv-dropdown-popup .sd-list__item-body {\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  font-weight: var(--sjs-font-editorfont-weight, 400);\n  font-family: var(--sjs-font-editorfont-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  padding-inline-end: calc(1.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-block: calc(1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-start: calc(1.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid rgba(0, 0, 0, 0);\n  border-radius: var(--sjs-corner-radius, 4px);\n  transition: border-color var(--sjs-transition-duration, 150ms);\n}\n\n.sv-dropdown-popup .sv-list__item.sv-list__item--focused:not(.sv-list__item--selected) .sv-list__item-body {\n  border: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid var(--sjs-border-light, var(--border-light, #eaeaea));\n  padding-inline-end: calc(1.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-block: calc(1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-start: calc(1.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-dropdown-popup.sv-popup--menu-tablet .sd-list__item-body, .sv-dropdown-popup.sv-popup--menu-phone .sd-list__item-body {\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  font-weight: 400;\n}\n\n.sv-dropdown-popup.sv-single-select-list.sv-popup--leave .sd-list__item.sv-list__item--selected .sv-list__item-body {\n  font-weight: normal;\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sv-dropdown-popup.sv-popup--menu-popup.sv-popup--top .sv-popup__container {\n  transform: translateY(-2px);\n}\n\n.sv-dropdown-popup.sv-popup--menu-popup.sv-popup--bottom .sv-popup__container {\n  transform: translateY(2px);\n}\n\n[dir=rtl] .sd-dropdown, [style*="direction:rtl"] .sd-dropdown, [style*="direction: rtl"] .sd-dropdown {\n  background-position: left calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) top 50%, 0 0;\n}\n\n.sv-list-item--custom-value .sv-list__item-body {\n  font-weight: bold;\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-input.sd-tagbox:not(.sd-tagbox--empty).sd-input--editable {\n  height: auto;\n  padding-inline-start: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-input.sd-tagbox:not(.sd-tagbox--empty).sd-input--editable .sd-tagbox__value {\n  padding: 0;\n}\n\n.sd-tagbox.sd-input--disabled .sd-tagbox__value, .sd-tagbox.sd-input--readonly .sd-tagbox__value, .sd-tagbox.sd-input--preview .sd-tagbox__value {\n  white-space: normal;\n}\n\n.sd-tagbox_clean-button {\n  height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  padding: calc(0.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  margin: auto 0;\n}\n\n.sd-input.sd-tagbox:focus-within {\n  box-shadow: var(--sjs-shadow-inner-reset, inset 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sv-tagbox__item {\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  border-radius: calc(0.5 * (var(--sjs-corner-radius, 4px)));\n  max-width: calc(100% - var(--sjs-base-unit, var(--base-unit, 8px)));\n  box-sizing: border-box;\n}\n\n.sv-tagbox__item-text {\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  min-width: calc(5.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  text-align: center;\n  font-weight: 600;\n}\n\n.sv-tagbox__item-text span {\n  display: block;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.sv-tagbox__item:hover .sd-tagbox-item_clean-button, .sv-tagbox__item:focus .sd-tagbox-item_clean-button, .sv-tagbox__item:focus-within .sd-tagbox-item_clean-button {\n  align-self: center;\n  opacity: 1;\n}\n\n.sd-tagbox-item_clean-button {\n  display: flex;\n  position: absolute;\n  inset-inline-end: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: 0;\n  padding-inline-start: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background: linear-gradient(270deg, var(--sjs-primary-backcolor, var(--primary, #19b394)) 53.12%, rgba(25, 179, 148, 0) 100%);\n  opacity: 0;\n  transition: opacity var(--sjs-transition-duration, 150ms);\n}\n\n.sd-tagbox-item_clean-button-svg {\n  display: block;\n  padding: calc(0.25 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  width: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  height: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  box-sizing: content-box;\n}\n\n.sd-tagbox-item_clean-button-svg:hover {\n  border-radius: 100px;\n  background: var(--sjs-primary-forecolor-light, var(--primary-foreground-disabled, rgba(255, 255, 255, 0.25)));\n}\n\n.sd-tagbox-item_clean-button-svg use {\n  fill: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-tagbox__value.sd-dropdown__value {\n  position: relative;\n  gap: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  flex-wrap: wrap;\n  flex-grow: 1;\n  align-content: center;\n  padding-inline: unset;\n  margin-inline: unset;\n  margin-block: unset;\n}\n\n.sd-tagbox__filter-string-input {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-grow: 1;\n}\n\n.sd-tagbox__placeholder {\n  position: absolute;\n  top: 0;\n  left: 0;\n  max-width: 100%;\n  width: auto;\n  height: 100%;\n  text-align: start;\n  cursor: text;\n  pointer-events: none;\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n[dir=rtl] .sd-tagbox-item_clean-button, [style*="direction:rtl"] .sd-tagbox-item_clean-button, [style*="direction: rtl"] .sd-tagbox-item_clean-button {\n  background: linear-gradient(90deg, var(--sjs-primary-backcolor, var(--primary, #19b394)) 53.12%, rgba(25, 179, 148, 0) 100%);\n}\n\n.sd-tagbox.sd-tagbox--empty .sd-tagbox__hint, .sd-tagbox.sd-tagbox--empty .sd-tagbox__hint-suffix-wrapper, .sd-tagbox.sd-tagbox--empty .sd-tagbox__filter-string-input {\n  width: 100%;\n  height: 100%;\n}\n\n.sd-tagbox__hint {\n  display: flex;\n  flex-grow: 1;\n  max-width: 100%;\n}\n\n.sd-tagbox__hint-suffix-wrapper {\n  position: relative;\n  width: 100%;\n}\n\n.sd-dropdown__hint-suffix.sd-tagbox__hint-suffix {\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.sd-dropdown__hint-prefix.sd-tagbox__hint-prefix {\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  height: 100%;\n  display: flex;\n  align-items: center;\n  max-width: 50%;\n  justify-content: flex-end;\n}\n\n.sd-imagepicker {\n  padding: 0;\n  border: none;\n  gap: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: 100%;\n  margin: 0;\n}\n\n.sd-imagepicker--static {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.sd-imagepicker--responsive {\n  display: grid;\n}\n\n.sd-imagepicker--column {\n  align-items: flex-start;\n  flex-direction: column;\n}\n\n@supports not (aspect-ratio: 1/1) {\n  .sd-imagepicker > div {\n    margin-right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  }\n}\n.sd-imagepicker__item img, .sd-imagepicker__item .sd-imagepicker__image-container > div {\n  border-radius: var(--sjs-corner-radius, 4px);\n  background-color: var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9));\n}\n\n.sd-imagepicker__item-decorator {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.sd-imagepicker__label {\n  position: relative;\n}\n\n.sd-imagepicker__label .sd-visuallyhidden {\n  height: 100%;\n  margin: 0;\n}\n\n.sd-imagepicker__image-container {\n  position: relative;\n}\n\n.sd-imagepicker__check-decorator {\n  display: block;\n  opacity: 0;\n  position: absolute;\n  top: var(--sjs-base-unit, var(--base-unit, 8px));\n  right: var(--sjs-base-unit, var(--base-unit, 8px));\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n  border-radius: 100%;\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  z-index: 1;\n  transition: opacity var(--sjs-transition-duration, 150ms);\n}\n\n.sd-imagepicker__check-icon {\n  display: block;\n  width: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-imagepicker__item--checked .sd-imagepicker__check-decorator {\n  opacity: 1;\n}\n\n.sd-imagepicker__item--error .sd-imagepicker__image-container::before {\n  display: block;\n  position: absolute;\n  content: " ";\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n  border-radius: var(--sjs-corner-radius, 4px);\n  background: linear-gradient(0deg, var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1))), var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1))));\n}\n\n.sd-imagepicker__item:focus-within .sd-imagepicker__image .sd-imagepicker__image:hover, .sd-imagepicker__item--allowhover:not(.sd-imagepicker__item--readonly, .sd-imagepicker__item--preview) .sd-imagepicker__image:hover {\n  opacity: 0.5;\n}\n\n.sd-imagepicker__image {\n  display: block;\n  box-sizing: border-box;\n  max-width: 100%;\n  transition: opacity var(--sjs-transition-duration, 150ms);\n}\n\n.sd-imagepicker__text {\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-imagepicker__no-image {\n  display: flex;\n  background-color: var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9));\n  inset-block-start: 0;\n}\n\n.sd-imagepicker__no-image-svg {\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin: auto;\n}\n\n.sd-imagepicker__no-image-svg use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n  opacity: 0.5;\n}\n\n.sd-imagepicker__column {\n  display: flex;\n  flex-direction: column;\n  gap: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  align-items: flex-start;\n  padding-right: 0;\n}\n\n.sd-imagepicker__column.sd-selectbase__column {\n  min-width: 0;\n}\n\n.sd-imagepicker__column .sd-imagepicker__item {\n  width: 100%;\n}\n\n.sd-imagepicker__column .sd-imagepicker__text {\n  width: 100%;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: center;\n}\n\n.sd-selectbase__column.sd-imagepicker__column:not(:last-child) {\n  padding-right: 0;\n}\n\n.sd-imagepicker__item--readonly .sd-imagepicker__check-icon {\n  fill: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-imagepicker__item--preview .sd-imagepicker__check-decorator {\n  display: none;\n}\n\n.sd-imagepicker__item--preview .sd-imagepicker__image {\n  -webkit-filter: grayscale(100%);\n  filter: grayscale(100%);\n  opacity: 0.25;\n}\n\n.sd-imagepicker__item--preview.sd-imagepicker__item--checked .sd-imagepicker__image {\n  -webkit-filter: grayscale(0%);\n  filter: grayscale(0%);\n  opacity: 1;\n}\n\n.sd-image__image {\n  display: block;\n  max-width: 100%;\n  border-radius: var(--sjs-corner-radius, 4px);\n}\n\n.sd-image__image--adaptive {\n  width: 100%;\n  height: auto;\n  max-width: calc(80 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-image__no-image {\n  background: var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9));\n  min-width: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-height: calc(27.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.sd-image__no-image use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n  opacity: 0.5;\n}\n\n.sd-question--image {\n  width: 100%;\n}\n\n.sd-html {\n  white-space: initial;\n}\n\n.sd-html {\n  font-size: var(--sjs-article-font-default-fontSize, var(--sjs-font-size, 16px));\n  text-decoration: var(--sjs-article-font-default-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-default-fontWeight, 400);\n  font-style: var(--sjs-article-font-default-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-default-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-default-letterSpacing, 0);\n  line-height: var(--sjs-article-font-default-lineHeight, 28px);\n  text-indent: var(--sjs-article-font-default-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-default-textCase, "none");\n  color: var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91)));\n}\n\n.sd-html h1 {\n  font-size: var(--sjs-article-font-xx-large-fontSize, calc(4 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-xx-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-xx-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-xx-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-xx-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-xx-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-xx-large-lineHeight, 64px);\n  text-indent: var(--sjs-article-font-xx-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-xx-large-textCase, "none");\n}\n\n.sd-html h2 {\n  font-size: var(--sjs-article-font-x-large-fontSize, calc(3 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-x-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-x-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-x-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-x-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-x-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-x-large-lineHeight, 56px);\n  text-indent: var(--sjs-article-font-x-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-x-large-textCase, "none");\n}\n\n.sd-html h3 {\n  font-size: var(--sjs-article-font-large-fontSize, calc(2 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-large-lineHeight, 40px);\n  text-indent: var(--sjs-article-font-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-large-textCase, "none");\n}\n\n.sd-html h4, .sd-html h5, .sd-html h6 {\n  font-size: var(--sjs-article-font-medium-fontSize, calc(1.5 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-medium-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-medium-fontWeight, 700);\n  font-style: var(--sjs-article-font-medium-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-medium-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-medium-letterSpacing, 0);\n  line-height: var(--sjs-article-font-medium-lineHeight, 32px);\n  text-indent: var(--sjs-article-font-medium-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-medium-textCase, "none");\n}\n\n.sd-html td, .sd-html span, .sd-html div, .sd-html p {\n  font-size: var(--sjs-article-font-default-fontSize, var(--sjs-font-size, 16px));\n  text-decoration: var(--sjs-article-font-default-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-default-fontWeight, 400);\n  font-style: var(--sjs-article-font-default-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-default-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-default-letterSpacing, 0);\n  line-height: var(--sjs-article-font-default-lineHeight, 28px);\n  text-indent: var(--sjs-article-font-default-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-default-textCase, "none");\n}\n\n.sd-html a {\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-html button {\n  display: flex;\n  align-items: center;\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  vertical-align: baseline;\n  text-align: center;\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  border: none;\n  border-radius: var(--sjs-corner-radius, 4px);\n  cursor: pointer;\n  user-select: none;\n  outline: solid calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) rgba(0, 0, 0, 0);\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  font-weight: 600;\n  font-style: normal;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));\n  box-shadow: var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15)), 0 0 0 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  transition: box-shadow var(--sjs-transition-duration, 150ms);\n}\n\n.sd-html button:hover {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-html button:focus {\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-html button span {\n  display: flex;\n  align-items: center;\n  flex-grow: 1;\n  justify-content: center;\n}\n\n.sd-html--nested {\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-expression {\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  font-size: var(--sjs-font-size, 16px);\n  white-space: break-spaces;\n}\n\n.sd-question__content--left .sd-expression {\n  line-height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-progress {\n  height: 2px;\n  background-color: var(--sjs-border-light, var(--border-light, #eaeaea));\n  position: relative;\n}\n\n.sd-progress__bar {\n  position: relative;\n  height: 100%;\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  overflow: hidden;\n}\n\n.sd-progress__text {\n  position: absolute;\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  right: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  color: var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45));\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  line-height: var(--sjs-font-size, 16px);\n  font-weight: 600;\n}\n\n@media only screen and (min-width: 1000px) {\n  .sd-progress__text {\n    margin-left: 5%;\n  }\n}\n@media only screen and (max-width: 1000px) {\n  .sd-progress__text {\n    margin-left: 10px;\n  }\n}\n.sd-body__progress--top {\n  margin-bottom: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  position: sticky;\n  top: 0;\n  z-index: 50;\n}\n\n.sd-body__progress--bottom .sd-progress__text {\n  margin-top: calc(-3.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-root--sticky-top .sd-progress__text {\n  border-radius: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  color: var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91));\n  opacity: 0.75;\n  background: var(--sjs-general-backcolor, var(--background, #fff));\n  box-shadow: var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15));\n}\n\n.sd-boolean {\n  display: flex;\n  width: max-content;\n  position: relative;\n  gap: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background-color: var(--sjs-editorpanel-backcolor, var(--sjs-editor-background, var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9))));\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-shadow: var(--sjs-shadow-inner, inset 0px 1px 2px 0px rgba(0, 0, 0, 0.15)), 0 0 0 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  transition: box-shadow var(--sjs-transition-duration, 150ms);\n}\n\n.sd-boolean.sd-boolean--allowhover:focus-within {\n  box-shadow: var(--sjs-shadow-inner-reset, inset 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-boolean__thumb, .sd-boolean__label {\n  display: block;\n  font-family: var(--sjs-font-editorfont-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-editorfont-weight, 400);\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  color: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-boolean__switch {\n  display: flex;\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  align-items: center;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  overflow: hidden;\n}\n\n.sd-boolean.sd-boolean--checked .sd-boolean__label--true, .sd-boolean:not(.sd-boolean--checked):not(sd-boolean--indeterminate) .sd-boolean__label--false {\n  color: rgba(0, 0, 0, 0);\n  transition-duration: 0.15s;\n  transition-property: color;\n  transition-timing-function: linear;\n}\n\n.sd-boolean.sd-boolean--indeterminate .sd-boolean__switch {\n  display: none;\n}\n\n.sd-boolean--indeterminate .sd-boolean__thumb {\n  display: none;\n}\n\n.sd-boolean__thumb {\n  position: absolute;\n  left: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  transform: translateX(0);\n  background-color: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  box-shadow: var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15));\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  transition-duration: 0.2s;\n  transition-property: transform, left;\n  transition-timing-function: linear;\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  font-weight: 600;\n  z-index: 2;\n}\n\n.sd-boolean__thumb .sv-string-viewer.sv-string-viewer--multiline {\n  white-space: nowrap;\n}\n\n.sd-boolean--checked:not(.sd-boolean--exchanged) .sd-boolean__thumb, .sd-boolean--exchanged:not(.sd-boolean--checked) .sd-boolean__thumb {\n  left: calc(100% - 0.5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  transform: translateX(-100%);\n}\n\n[dir=rtl] .sd-boolean__thumb, [style*="direction:rtl"] .sd-boolean__thumb, [style*="direction: rtl"] .sd-boolean__thumb {\n  left: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  right: unset;\n  transform: translateX(100%);\n}\n\n[dir=rtl] .sd-boolean--checked:not(.sd-boolean--exchanged) .sd-boolean__thumb, [dir=rtl] .sd-boolean--exchanged:not(.sd-boolean--checked) .sd-boolean__thumb, [style*="direction:rtl"] .sd-boolean--checked:not(.sd-boolean--exchanged) .sd-boolean__thumb, [style*="direction:rtl"] .sd-boolean--exchanged:not(.sd-boolean--checked) .sd-boolean__thumb, [style*="direction: rtl"] .sd-boolean--checked:not(.sd-boolean--exchanged) .sd-boolean__thumb, [style*="direction: rtl"] .sd-boolean--exchanged:not(.sd-boolean--checked) .sd-boolean__thumb {\n  left: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  right: unset;\n  transform: translateX(0);\n}\n\n.sd-boolean--exchanged.sd-boolean:not(.sd-boolean--checked):not(sd-boolean--indeterminate) .sd-boolean__label--false, .sd-boolean--exchanged.sd-boolean.sd-boolean--checked .sd-boolean__label--true {\n  color: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n}\n\n.sd-boolean--disabled {\n  pointer-events: none;\n}\n\n.sd-boolean--disabled .sd-boolean__thumb, .sd-boolean--disabled .sd-boolean__label {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  opacity: 0.25;\n}\n\n.sd-boolean--readonly {\n  pointer-events: none;\n  box-shadow: none;\n  transition: none;\n  background: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-boolean--readonly .sd-boolean__thumb {\n  box-shadow: inset 0px 0px 0px 2px var(--sjs-general-forecolor, var(--foreground, #161616));\n  transition: none;\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-boolean--preview {\n  pointer-events: none;\n  box-shadow: none;\n  transition: none;\n  background: rgba(0, 0, 0, 0);\n}\n\n.sd-boolean--preview .sd-boolean__thumb {\n  border: 1px solid var(--sjs-general-forecolor, var(--foreground, #161616));\n  box-shadow: none;\n  transition: none;\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-boolean--preview.sd-boolean--checked .sd-boolean__thumb, .sd-boolean--preview.sd-boolean--indeterminate .sd-boolean__thumb {\n  margin-left: auto;\n}\n\n.sd-boolean--preview .sd-checkbox__label--preview {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-boolean__thumb-ghost {\n  z-index: 1;\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background-color: rgba(0, 0, 0, 0);\n  transition: background-color var(--sjs-transition-duration, 150ms);\n}\n\n.sd-boolean.sd-boolean--allowhover .sd-boolean__thumb-ghost:hover {\n  background-color: var(--sjs-editorpanel-hovercolor, var(--sjs-general-backcolor-dim-dark, rgb(243, 243, 243)));\n}\n\n.sd-boolean--error {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n}\n\n:root {\n  --sjs-postcss-fix-slider-path-height: var(--lbr-slider-path-height, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  --sjs-postcss-fix-slider-path-color: var(--lbr-slider-path-color, var(--sjs-border-light, var(--border-light, #eaeaea)));\n  --sjs-postcss-fix-slider-path-color-filled: var(--lbr-slider-path-color-filled, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n  --sjs-postcss-fix-slider-thumb-width: var(--lbr-slider-thumb-width, calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  --sjs-postcss-fix-slider-thumb-height: var(--lbr-slider-thumb-height, calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  --sjs-postcss-fix-slider-thumb-color: var(--lbr-slider-thumb-color, var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff)))));\n  --sjs-postcss-fix-slider-tooltip-pointer-width: var(--lbr-tooltip-pointer-width, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  --sjs-postcss-fix-slider-tooltip-pointer-height: var(--lbr-tooltip-pointer-height, calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  --sjs-postcss-fix-slider-path-height-preview: var(--lbr-slider-path-height-preview, calc(0.125 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n}\n\n.sd-slider {\n  position: relative;\n  display: flex;\n  width: 100%;\n  margin-top: var(--lbr-slider-margin-top, var(--sjs-base-unit, var(--base-unit, 8px)));\n  flex-direction: column;\n  gap: var(--lbr-slider-gap, var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-slider-container {\n  position: relative;\n  min-height: var(--sjs-postcss-fix-slider-thumb-height);\n  cursor: pointer;\n  margin-left: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-right: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-slider-container__slider {\n  position: relative;\n}\n\n.sd-slider__track {\n  position: absolute;\n  height: var(--sjs-postcss-fix-slider-path-height);\n  top: calc(var(--sjs-postcss-fix-slider-thumb-height) / 2 - var(--sjs-postcss-fix-slider-path-height) / 2);\n}\n\n.sd-slider__inverse-track {\n  background: var(--sjs-postcss-fix-slider-path-color);\n}\n\n.sd-slider__inverse-track::after, .sd-slider__inverse-track::before {\n  background: var(--sjs-postcss-fix-slider-path-color);\n}\n\n.sd-slider__inverse-track--left {\n  left: 0;\n}\n\n.sd-slider__inverse-track--left::before {\n  position: absolute;\n  content: "";\n  height: var(--sjs-postcss-fix-slider-path-height);\n  width: var(--sjs-base-unit, var(--base-unit, 8px));\n  left: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-top-left-radius: 10px;\n  border-bottom-left-radius: 10px;\n}\n\n.sd-slider__inverse-track--right {\n  right: 0;\n}\n\n.sd-slider__inverse-track--right::after {\n  position: absolute;\n  content: "";\n  height: var(--sjs-postcss-fix-slider-path-height);\n  width: var(--sjs-base-unit, var(--base-unit, 8px));\n  right: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-top-right-radius: 10px;\n  border-bottom-right-radius: 10px;\n}\n\n.sd-slider__range-track {\n  left: 0;\n  background: var(--sjs-postcss-fix-slider-path-color-filled);\n}\n\n.sd-slider__range-track::before {\n  position: absolute;\n  content: "";\n  height: var(--sjs-postcss-fix-slider-path-height);\n  width: var(--sjs-base-unit, var(--base-unit, 8px));\n  left: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-top-left-radius: 10px;\n  border-bottom-left-radius: 10px;\n  background: var(--sjs-postcss-fix-slider-path-color-filled);\n}\n\n.sd-slider__range-track::after {\n  position: absolute;\n  content: "";\n  height: var(--sjs-postcss-fix-slider-path-height);\n  width: var(--sjs-base-unit, var(--base-unit, 8px));\n  right: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-top-right-radius: 10px;\n  border-bottom-right-radius: 10px;\n  background: var(--sjs-postcss-fix-slider-path-color-filled);\n}\n\n.sd-slider__thumb-container {\n  position: absolute;\n  margin-left: calc(var(--sjs-postcss-fix-slider-thumb-width) / -2);\n  z-index: 2;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  width: var(--sjs-postcss-fix-slider-thumb-width);\n  height: var(--sjs-postcss-fix-slider-thumb-height);\n  border-radius: var(--lbr-slider-thumb-corner-radius, 1024px);\n}\n\n.sd-slider__input:hover + .sd-slider__thumb-container .sd-slider__tooltip--on-hover {\n  opacity: 1;\n}\n\n.sd-slider__input:hover + .sd-slider__thumb-container .sd-slider__thumb-dot {\n  width: var(--lbr-slider-thumb-dot-width-hovering, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-slider-thumb-dot-height-hovering, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n}\n\n.sd-slider__thumb-container--indeterminate .sd-slider__thumb-dot {\n  background: var(--lbr-slider-thumb-dot-color-undefined, transparent);\n}\n\n.sd-slider__thumb-container--focused .sd-slider__thumb {\n  box-shadow: none;\n  border: var(--lbr-slider-thumb-border-width-focused, 2px) solid var(--lbr-slider-thumb-border-color-focused, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\n.sd-slider__thumb-container--focused .sd-slider__tooltip--on-hover {\n  opacity: 1;\n}\n\n.sd-slider__thumb {\n  display: flex;\n  padding: var(--lbr-slider-thumb-padding-top, calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))))) var(--lbr-slider-thumb-padding-right, calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))))) var(--lbr-slider-thumb-padding-bottom, calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))))) var(--lbr-slider-thumb-padding-left, calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  justify-content: center;\n  align-items: center;\n  border-radius: var(--lbr-slider-thumb-corner-radius, 1024px);\n  background: var(--sjs-postcss-fix-slider-thumb-color);\n  box-shadow: var(--lbr-slider-thumb-shadow-offset-x, 0px) var(--lbr-slider-thumb-shadow-offset-y, 1px) var(--lbr-slider-thumb-shadow-blur, 2px) var(--lbr-slider-thumb-shadow-spread, 0px) var(--lbr-slider-thumb-shadow-color, rgba(0, 0, 0, 0.15));\n}\n\n.sd-slider__thumb-dot {\n  display: flex;\n  border-radius: var(--lbr-slider-thumb-dot-corner-radius, 1024px);\n  background: var(--lbr-slider-thumb-dot-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n  width: var(--lbr-slider-thumb-dot-width, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-slider-thumb-dot-height, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  transition: width var(--sjs-transition-duration, 150ms), height var(--sjs-transition-duration, 150ms);\n}\n\n.sd-slider__tooltip {\n  opacity: 1;\n  position: absolute;\n  bottom: calc(100% + var(--sjs-postcss-fix-slider-tooltip-pointer-height));\n  box-shadow: var(--lbr-tooltip-shadow-2-offset-x, 0px) var(--lbr-tooltip-shadow-2-offset-y, 1px) var(--lbr-tooltip-shadow-2-blur, 2px) var(--lbr-tooltip-shadow-2-spread, 0px) var(--lbr-tooltip-shadow-2-color, rgba(0, 0, 0, 0.15)), var(--lbr-tooltip-shadow-1-offset-x, 0px) var(--lbr-tooltip-shadow-1-offset-y, 2px) var(--lbr-tooltip-shadow-1-blur, 6px) var(--lbr-tooltip-shadow-1-spread, 0px) var(--lbr-tooltip-shadow-1-color, rgba(0, 0, 0, 0.1));\n  display: flex;\n  flex-direction: column;\n  user-select: none;\n  border-radius: var(--lbr-tooltip-corder-radius, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  transition: opacity var(--sjs-transition-duration, 150ms);\n}\n\n.sd-slider__tooltip-panel {\n  padding: var(--lbr-tooltip-padding-top, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-tooltip-padding-right, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))))) var(--lbr-tooltip-padding-bottom, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-tooltip-padding-left, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  border-radius: var(--lbr-tooltip-corder-radius, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  background: var(--lbr-tooltip-background-color, var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff)))));\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.sd-slider__tooltip-panel::after {\n  content: " ";\n  width: calc(var(--sjs-postcss-fix-slider-tooltip-pointer-height) * 1.41);\n  height: calc(var(--sjs-postcss-fix-slider-tooltip-pointer-height) * 1.41);\n  background: var(--lbr-tooltip-background-color, var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff)))));\n  position: absolute;\n  box-shadow: var(--ctr-tooltip-shadow-1-offset-x, 0px) var(--ctr-tooltip-shadow-1-offset-y, 2px) var(--ctr-tooltip-shadow-1-blur, 8px) var(--ctr-tooltip-shadow-1-spread, 0px) var(--ctr-tooltip-shadow-1-color, var(--sjs-special-glow, rgba(0, 76, 68, 0.1019607843))), var(--ctr-tooltip-shadow-2-offset-x, 0px) var(--ctr-tooltip-shadow-2-offset-y, 1px) var(--ctr-tooltip-shadow-2-blur, 2px) var(--ctr-tooltip-shadow-2-spread, 0px) var(--ctr-tooltip-shadow-2-color, var(--sjs-special-shadow, rgba(0, 0, 0, 0.2509803922)));\n  bottom: calc(var(--sjs-postcss-fix-slider-tooltip-pointer-height) * 1.41 / -1);\n  left: calc(50% - var(--sjs-postcss-fix-slider-tooltip-pointer-height) * 1.41);\n  clip-path: polygon(-100% -100%, -100% 200%, 200% 200%);\n  transform: translate(calc(var(--sjs-postcss-fix-slider-tooltip-pointer-height) / 1.41), calc(var(--sjs-postcss-fix-slider-tooltip-pointer-height) / -1.41)) rotate(-45deg);\n}\n\n.sd-slider__tooltip-value {\n  font-family: var(--lbr-font-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-size: var(--lbr-font-small-size, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  font-weight: 600;\n  line-height: var(--lbr-font-small-line-height, size(2));\n  color: var(--lbr-tooltip-text-color, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\n.sd-slider__tooltip--on-hover {\n  opacity: 0;\n}\n\n.sd-slider-labels-container {\n  user-select: none;\n  margin-left: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-right: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-slider-labels-container > div {\n  user-select: none;\n  position: relative;\n  display: flex;\n  align-items: center;\n  min-height: var(--sjs-postcss-fix-slider-thumb-height);\n}\n\n.sd-slider__label {\n  user-select: none;\n  cursor: pointer;\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  position: absolute;\n  width: var(--sjs-postcss-fix-slider-thumb-width);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--lbr-slider-label-gap, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  margin-left: calc(var(--sjs-postcss-fix-slider-thumb-width) / -2);\n}\n\n.sd-slider__label--long:first-child {\n  align-items: flex-start;\n}\n\n.sd-slider__label--long:last-child {\n  align-items: flex-end;\n}\n\n.sd-slider__label-tick {\n  display: flex;\n  width: var(--lbr-slider-label-tick-width, calc(0.125 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-slider-label-tick-height, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  flex-direction: column;\n  align-items: flex-start;\n  background: var(--lbr-slider-label-tick-color, var(--sjs-border-default, var(--border, #d6d6d6)));\n}\n\n.sd-slider__label-text {\n  color: var(--lbr-slider-label-text-color, var(--sjs-font-editorfont-color, var(--sjs-general-forecolor, rgba(0, 0, 0, 0.91))));\n  text-align: center;\n  font-family: var(--lbr-font-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-size: var(--lbr-font-default-size, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  font-style: normal;\n  font-weight: 400;\n  line-height: var(--lbr-font-default-line-height, calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n}\n\ninput[type=range].sd-slider__input {\n  position: absolute;\n  pointer-events: none;\n  -webkit-appearance: none;\n  z-index: 4;\n  height: var(--sjs-postcss-fix-slider-thumb-height);\n  top: 0;\n  width: 100%;\n  opacity: 0;\n  margin: 0;\n}\n\ninput[type=range][name=range-input].sd-slider__input {\n  z-index: 3;\n}\n\ninput[type=range][name=range-input].sd-slider__input:hover + .sd-slider-container .sd-slider__tooltip--on-hover {\n  opacity: 1;\n}\n\ninput[type=range].sd-slider__input:focus::-webkit-slider-runnable-track {\n  background: rgba(0, 0, 0, 0);\n  border: rgba(0, 0, 0, 0);\n}\n\ninput[type=range].sd-slider__input::-webkit-slider-runnable-track {\n  margin: 0 calc(var(--sjs-postcss-fix-slider-thumb-width) / -2);\n  height: var(--sjs-postcss-fix-slider-path-height);\n}\n\ninput[type=range].sd-slider__input::-moz-range-track {\n  margin: 0 calc(var(--sjs-postcss-fix-slider-thumb-width) / -2);\n  height: var(--sjs-postcss-fix-slider-path-height);\n}\n\ninput[type=range].sd-slider__input:focus {\n  outline: none;\n}\n\ninput[type=range].sd-slider__input::-webkit-slider-thumb {\n  pointer-events: all;\n  height: 67px;\n  width: var(--sjs-postcss-fix-slider-thumb-width);\n  border-radius: 0px;\n  border: 0 none;\n  background: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  -webkit-appearance: none;\n  cursor: pointer;\n  top: -50px;\n  position: relative;\n}\n\ninput[type=range][name=range-input].sd-slider__input::-webkit-slider-thumb {\n  height: var(--sjs-postcss-fix-slider-thumb-height);\n  top: 0;\n}\n\ninput[type=range].sd-slider__input::-moz-range-thumb {\n  pointer-events: all;\n  height: 75px;\n  width: var(--sjs-postcss-fix-slider-thumb-width);\n  border-radius: 0px;\n  border: 0 none;\n  background: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  -webkit-appearance: none;\n  cursor: pointer;\n  top: -20px;\n  position: relative;\n}\n\ninput[type=range][name=range-input].sd-slider__input::-moz-range-thumb {\n  height: var(--sjs-postcss-fix-slider-thumb-height);\n  top: 0;\n}\n\ninput[type=range].sd-slider__input::-ms-fill-lower {\n  background: rgba(0, 0, 0, 0);\n  border: 0 none;\n}\n\ninput[type=range].sd-slider__input::-ms-fill-upper {\n  background: rgba(0, 0, 0, 0);\n  border: 0 none;\n}\n\ninput[type=range].sd-slider__input::-ms-tooltip {\n  display: none;\n}\n\n:root {\n  --sjs-range-slider-range-input-thumb-width: 0px;\n  --sjs-range-slider-range-input-thumb-left: 0;\n  --sjs-range-slider-range-input-thumb-position: absolute;\n}\n\ninput[type=range][name=range-input].sd-slider__input::-webkit-slider-thumb {\n  width: var(--sjs-range-slider-range-input-thumb-width, 0px);\n  left: var(--sjs-range-slider-range-input-thumb-left, 0);\n  position: var(--sjs-range-slider-range-input-thumb-position, relative);\n}\n\ninput[type=range][name=range-input].sd-slider__input::-moz-range-thumb {\n  width: var(--sjs-range-slider-range-input-thumb-width, 0px);\n  left: var(--sjs-range-slider-range-input-thumb-left, 0);\n  position: var(--sjs-range-slider-range-input-thumb-position, relative);\n}\n\n.sd-question--readonly .sd-slider__tooltip, .sd-question--preview .sd-slider__tooltip {\n  display: none;\n}\n\n.sd-question--readonly .sd-slider__input, .sd-question--readonly .sd-slider-container, .sd-question--readonly .sd-slider__thumb-container, .sd-question--readonly .sd-slider__label {\n  cursor: default;\n}\n\n.sd-question--readonly input[type=range].sd-slider__input::-webkit-slider-thumb {\n  cursor: default;\n}\n\n.sd-question--readonly input[type=range].sd-slider__input::-moz-range-thumb {\n  cursor: default;\n}\n\n.sd-question--readonly .sd-slider__input:hover + .sd-slider__thumb-container .sd-slider__thumb-dot {\n  width: var(--lbr-slider-thumb-dot-width, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-slider-thumb-dot-height, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n}\n\n.sd-question--readonly .sd-slider__thumb-container--focused .sd-slider__thumb {\n  box-shadow: none;\n  border: var(--lbr-slider-thumb-border-width-read-only, 2px) solid var(--lbr-slider-thumb-border-color-read-only, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-question--readonly .sd-slider__thumb {\n  box-shadow: none;\n  border: var(--lbr-slider-thumb-border-width-read-only, 2px) solid var(--lbr-slider-thumb-border-color-read-only, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-question--readonly .sd-slider__thumb .sd-slider__thumb-dot {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sd-question--readonly .sd-slider__inverse-track {\n  background: var(--lbr-slider-path-color-read-only, var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248))));\n}\n\n.sd-question--readonly .sd-slider__inverse-track::after, .sd-question--readonly .sd-slider__inverse-track::before {\n  background: var(--lbr-slider-path-color-read-only, var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248))));\n}\n\n.sd-question--readonly .sd-slider__range-track {\n  background: var(--lbr-slider-path-color-filled-read-only, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-question--readonly .sd-slider__range-track::before {\n  background: var(--lbr-slider-path-color-filled-read-only, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-question--readonly .sd-slider__range-track::after {\n  background: var(--lbr-slider-path-color-filled-read-only, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-question--readonly .sd-slider__label-tick {\n  background: var(--lbr-slider-label-tick-color, var(--sjs-border-light, var(--border-light, #eaeaea)));\n}\n\n.sd-question--preview .sd-slider--single .sd-slider__inverse-track--left::before {\n  background: var(--lbr-slider-path-color-filled-preview, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-question--preview .sd-slider__track {\n  top: calc(var(--sjs-postcss-fix-slider-thumb-height) / 2 - var(--sjs-postcss-fix-slider-path-height-preview) / 2);\n}\n\n.sd-question--preview .sd-slider__input:hover + .sd-slider__thumb-container .sd-slider__thumb-dot {\n  width: var(--lbr-slider-thumb-dot-width-preivew, calc(0.125 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-slider-thumb-dot-height-preview, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n}\n\n.sd-question--preview .sd-slider__thumb-container--focused .sd-slider__thumb {\n  box-shadow: none;\n  border: none;\n}\n\n.sd-question--preview .sd-slider__thumb {\n  box-shadow: none;\n  padding: 0;\n}\n\n.sd-question--preview .sd-slider__thumb .sd-slider__thumb-dot {\n  width: var(--lbr-slider-thumb-dot-width-preivew, calc(0.125 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-slider-thumb-dot-height-preview, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  background: var(--lbr-slider-thumb-dot-color-preview, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91)));\n}\n\n.sd-question--preview .sd-slider__inverse-track {\n  height: var(--sjs-postcss-fix-slider-path-height-preview);\n  background: var(--lbr-slider-path-color-preview, var(--sjs-border-light, var(--border-light, #eaeaea)));\n}\n\n.sd-question--preview .sd-slider__inverse-track::after, .sd-question--preview .sd-slider__inverse-track::before {\n  height: var(--sjs-postcss-fix-slider-path-height-preview);\n  background: var(--lbr-slider-path-color-preview, var(--sjs-border-light, var(--border-light, #eaeaea)));\n}\n\n.sd-question--preview .sd-slider__range-track {\n  height: var(--sjs-postcss-fix-slider-path-height-preview);\n  background: var(--lbr-slider-path-color-filled-preview, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-question--preview .sd-slider__range-track::before {\n  height: var(--sjs-postcss-fix-slider-path-height-preview);\n  display: none;\n}\n\n.sd-question--preview .sd-slider__range-track::after {\n  height: var(--sjs-postcss-fix-slider-path-height-preview);\n  display: none;\n}\n\n.sd-question--preview .sd-slider--negative-scale .sd-slider__inverse-track--left::before {\n  background: var(--lbr-slider-path-color-preview, var(--sjs-border-light, var(--border-light, #eaeaea)));\n}\n\n.sd-question--preview .sd-slider__label-tick {\n  background: var(--lbr-slider-label-tick-color-preview, var(--sjs-general-forecolor, var(--foreground, #161616)));\n}\n\n.sd-question--error .sd-slider__inverse-track {\n  background: var(--lbr-slider-path-color-error, var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1))));\n}\n\n.sd-question--error .sd-slider__inverse-track::after, .sd-question--error .sd-slider__inverse-track::before {\n  background: var(--lbr-slider-path-color-error, var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1))));\n}\n\n.sd-question--error .sd-slider__range-track {\n  background: var(--lbr-slider-path-color-filled-error, var(--sjs-special-red, var(--red, #e60a3e)));\n}\n\n.sd-question--error .sd-slider__range-track::before {\n  background: var(--lbr-slider-path-color-filled-error, var(--sjs-special-red, var(--red, #e60a3e)));\n}\n\n.sd-question--error .sd-slider__range-track::after {\n  background: var(--lbr-slider-path-color-filled-error, var(--sjs-special-red, var(--red, #e60a3e)));\n}\n\n.sd-question--error .sd-slider__thumb-dot {\n  background: var(--lbr-slider-thumb-dot-color-error, var(--sjs-special-red, var(--red, #e60a3e)));\n}\n\n.sd-slider--design-mode .sd-slider__input, .sd-slider--design-mode .sd-slider-container, .sd-slider--design-mode .sd-slider__thumb-container, .sd-slider--design-mode .sd-slider__label {\n  cursor: default;\n}\n\n.sd-slider--design-mode input[type=range].sd-slider__input::-webkit-slider-thumb {\n  cursor: default;\n}\n\n.sd-slider--design-mode input[type=range].sd-slider__input::-moz-range-thumb {\n  cursor: default;\n}\n\n.sd-slider--design-mode .sd-slider__input:hover + .sd-slider__thumb-container .sd-slider__tooltip--on-hover {\n  opacity: 0;\n}\n\n.sd-slider--design-mode .sd-slider__input:hover + .sd-slider__thumb-container .sd-slider__thumb-dot {\n  width: var(--lbr-slider-thumb-dot-width-hovering, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-slider-thumb-dot-height-hovering, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n}\n\n.sd-slider--design-mode input[type=range][name=range-input].sd-slider__input:hover + .sd-slider-container .sd-slider__tooltip--on-hover {\n  opacity: 0;\n}\n\n.sd-slider--negative-scale .sd-slider__range-track::before {\n  display: none;\n}\n\n.sd-slider--negative-scale .sd-slider__range-track::after {\n  display: none;\n}\n\n.sd-slider--animated-thumb-mode .sd-slider__thumb-container {\n  transition: left var(--sjs-transition-duration, 150ms);\n}\n\n.sd-slider--animated-thumb-mode .sd-slider__track {\n  transition: left var(--sjs-transition-duration, 150ms), right var(--sjs-transition-duration, 150ms), width var(--sjs-transition-duration, 150ms);\n}\n\n[dir=rtl] .sd-slider, [dir=rtl] .sd-slider__label-text, [dir=rtl] .sd-slider__input, [dir=rtl] .sd-slider__tooltip-value, [style*="direction:rtl"] .sd-slider, [style*="direction:rtl"] .sd-slider__label-text, [style*="direction:rtl"] .sd-slider__input, [style*="direction:rtl"] .sd-slider__tooltip-value, [style*="direction: rtl"] .sd-slider, [style*="direction: rtl"] .sd-slider__label-text, [style*="direction: rtl"] .sd-slider__input, [style*="direction: rtl"] .sd-slider__tooltip-value {\n  transform: scale(-1, 1);\n}\n\n[dir=rtl] .sd-slider__label-text, [dir=rtl] .sd-slider__tooltip-value, [style*="direction:rtl"] .sd-slider__label-text, [style*="direction:rtl"] .sd-slider__tooltip-value, [style*="direction: rtl"] .sd-slider__label-text, [style*="direction: rtl"] .sd-slider__tooltip-value {\n  direction: ltr;\n}\n\n.sd-paneldynamic .sd-progress {\n  position: absolute;\n  left: 0;\n  right: 0;\n  height: 2px;\n  z-index: 2;\n  transform: translateY(-1px);\n}\n\n.sd-paneldynamic > .sd-panel {\n  padding-top: 1px;\n  padding-bottom: calc(0.5 * var(--sd-base-vertical-padding));\n}\n\n.sd-paneldynamic .sd-paneldynamic__panel-wrapper > .sd-panel > .sd-panel__header {\n  padding-top: var(--sd-base-vertical-padding);\n  padding-bottom: 0;\n}\n\n.sd-paneldynamic .sd-paneldynamic__panel-wrapper > .sd-panel > .sd-panel__header:after {\n  display: none;\n}\n\n.sd-paneldynamic .sd-paneldynamic__panel-wrapper > .sd-panel > .sd-panel__header > .sd-panel__title {\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sd-question--readonly .sd-paneldynamic .sd-question__placeholder, .sd-question--preview .sd-paneldynamic .sd-question__placeholder {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-paneldynamic__separator {\n  display: none;\n}\n\n.sd-paneldynamic__panel-wrapper {\n  box-sizing: border-box;\n  padding-bottom: calc(1 * var(--sd-base-padding));\n}\n\n.sd-paneldynamic__panel-wrapper:after {\n  display: table;\n  clear: both;\n  content: " ";\n}\n\n.sd-paneldynamic__footer .sd-paneldynamic__separator, .sd-paneldynamic__panel-wrapper--list ~ .sd-paneldynamic__panel-wrapper--list:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: 0;\n  border-color: var(--sjs-border-light, var(--border-light, #eaeaea));\n  background: var(--sjs-border-light, var(--border-light, #eaeaea));\n  height: 1px;\n  border: none;\n}\n\n.sd-paneldynamic__separator:only-child {\n  display: none;\n}\n\n.sd-paneldynamic__panel-wrapper--in-row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.sd-paneldynamic__footer {\n  clear: both;\n}\n\n.sd-paneldynamic__footer .sd-paneldynamic__prev-btn, .sd-paneldynamic__footer .sd-paneldynamic__next-btn {\n  display: block;\n}\n\n.sd-paneldynamic__footer .sd-paneldynamic__prev-btn svg, .sd-paneldynamic__footer .sd-paneldynamic__next-btn svg {\n  width: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-paneldynamic__footer .sd-paneldynamic__add-btn, .sd-paneldynamic__footer .sd-paneldynamic__progress-text, .sd-paneldynamic__footer .sd-paneldynamic__progress--bottom {\n  display: initial;\n}\n\n.sd-paneldynamic__buttons-container {\n  display: flex;\n  align-items: center;\n  padding: calc(var(--sd-base-vertical-padding) - var(--sjs-base-unit, var(--base-unit, 8px))) 0;\n}\n\n.sd-paneldynamic__progress-container {\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n  margin-right: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-paneldynamic__progress-text {\n  font-size: var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  margin: 0;\n  margin-right: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-paneldynamic__prev-btn, .sd-paneldynamic__next-btn {\n  width: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-paneldynamic__prev-btn .sv-svg-icon, .sd-paneldynamic__next-btn .sv-svg-icon {\n  display: block;\n}\n\n.sd-paneldynamic__prev-btn {\n  margin-right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-paneldynamic__next-btn {\n  margin-left: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  transform: rotate(180deg);\n}\n\n.sd-paneldynamic__placeholder .sd-paneldynamic__add-btn {\n  display: initial;\n  margin-left: 0;\n}\n\n.sd-question--empty.sd-question--paneldynamic > .sd-question__content {\n  padding-bottom: var(--sd-base-padding);\n  --animation-padding-bottom: var(--sd-base-padding);\n}\n\n.sd-question--paneldynamic:not(.sd-question--empty) > .sd-question__content > .sd-question__comment-area {\n  padding-bottom: var(--sd-base-padding);\n}\n\n.sd-paneldynamic__buttons-container .sd-action-bar {\n  width: 100%;\n  margin: 0 calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(100% + 6 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-paneldynamic__panel-footer {\n  border-top: none;\n  position: relative;\n  top: calc(0.5 * var(--sd-base-vertical-padding));\n  margin-right: calc(-3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  justify-content: flex-end;\n}\n\n.sd-paneldynamic__panel-footer .sv-action:not(.sv-action--hidden) {\n  margin-bottom: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-paneldynamic__tabs-container {\n  padding-top: var(--sd-base-padding);\n}\n\n.sd-paneldynamic__tabs-container .sd-tabs-toolbar {\n  margin: 0 0 -1px calc(-2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(100% + 4 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-paneldynamic__tabs-container:after {\n  content: " ";\n  display: block;\n  height: 1px;\n  position: relative;\n  background: var(--sjs-border-light, var(--border-light, #eaeaea));\n  bottom: 0;\n  inset-inline-start: calc(-1 * var(--sd-base-padding));\n  width: calc(100% + 2 * var(--sd-base-padding));\n}\n\n.sd-paneldynamic__tabs-container--with-header {\n  padding-top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-tabs-toolbar.sv-action-bar {\n  align-items: flex-start;\n  z-index: 1;\n}\n\n.sd-tabs-toolbar.sd-tabs-toolbar--left {\n  justify-content: flex-start;\n}\n\n.sd-tabs-toolbar.sd-tabs-toolbar--right {\n  justify-content: flex-end;\n}\n\n.sd-tabs-toolbar.sd-tabs-toolbar--center {\n  justify-content: center;\n}\n\n.sd-tab-item {\n  margin: 0 calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-tab-item {\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) 0 calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  display: flex;\n  box-sizing: border-box;\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n  cursor: pointer;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  overflow-x: hidden;\n  white-space: nowrap;\n  box-shadow: inset 0px 0px 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  transition: box-shadow var(--sjs-transition-duration, 150ms);\n}\n\n.sd-tab-item:hover, .sd-tab-item:focus-visible {\n  outline: none;\n  box-shadow: inset 0px -2px 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-tab-item.sd-tab-item--pressed {\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  box-shadow: inset 0px -2px 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-tab-item--icon {\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n  width: auto;\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-tab-item--icon use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n  opacity: 0.5;\n}\n\n.sd-tab-item--icon:hover, .sd-tab-item--icon.sd-tab-item--pressed {\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  box-shadow: none;\n}\n\n.sd-tab-item--icon:hover use, .sd-tab-item--icon.sd-tab-item--pressed use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-tab-item--icon:hover use {\n  opacity: 1;\n}\n\n.sd-tabs-toolbar .sv-dots {\n  width: auto;\n}\n\n.sd-tabs-toolbar .sv-dots.sv-action--hidden {\n  width: 0;\n}\n\n.sd-tab-item__title {\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  align-items: center;\n}\n\n.sd-question__title ~ .sd-tabs-toolbar {\n  margin-top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-paneldynamic__header.sd-element__header.sd-paneldynamic__header-tab {\n  padding-bottom: 0;\n}\n\n.sd-element--collapsed .sd-paneldynamic__header.sd-element__header.sd-paneldynamic__header-tab {\n  padding-bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-paneldynamic__header.sd-element__header.sd-paneldynamic__header-tab::after {\n  content: none;\n}\n\n.sd-question--paneldynamic.sd-element--with-frame {\n  padding-bottom: 0;\n}\n\n.sd-paneldynamic__panels-container {\n  position: relative;\n  overflow: hidden;\n  margin-left: calc(-1 * var(--sd-base-padding));\n  padding-left: var(--sd-base-padding);\n  margin-right: calc(-1 * var(--sd-base-padding));\n  padding-right: var(--sd-base-padding);\n}\n\n.sd-paneldynamic__panel-wrapper {\n  box-sizing: border-box;\n}\n\n@keyframes movePanel {\n  from {\n    transform: translateX(var(--sjs-pd-tab-move-margin));\n  }\n  to {\n    transform: translateX(0);\n  }\n}\n.sd-paneldynamic__panel-wrapper--enter.sv-pd-animation-left, .sd-paneldynamic__panel-wrapper--enter.sv-pd-animation-right {\n  --sjs-pd-tab-animation-delay: 0ms;\n  animation-name: movePanel, changeHeight, paddingFadeIn, fadeIn;\n  animation-duration: var(--sjs-pd-tab-move-in-duration, 250ms), var(--sjs-pd-tab-height-change-duration, 250ms), var(--sjs-pd-tab-height-change-duration, 250ms), var(--sjs-pd-tab-fade-in-duration, 250ms);\n  animation-delay: calc(var(--sjs-pd-tab-move-in-delay, 100ms) + var(--sjs-pd-tab-animation-delay)), calc(var(--sjs-pd-tab-height-change-delay, 0ms) + var(--sjs-pd-tab-animation-delay)), calc(var(--sjs-pd-tab-height-change-delay, 0ms) + var(--sjs-pd-tab-animation-delay)), calc(var(--sjs-pd-tab-fade-in-delay, 100ms) + var(--sjs-pd-tab-animation-delay));\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-fill-mode: forwards;\n  opacity: 0;\n  padding-bottom: 0;\n  transform: translateX(var(--sjs-pd-tab-move-margin));\n  height: var(--animation-height-from);\n  --animation-padding-top: 0;\n  --animation-padding-bottom: calc(1 * var(--sd-base-padding));\n}\n\n.sd-paneldynamic__panel-wrapper--enter.sv-pd-animation-left {\n  --sjs-pd-tab-move-margin: calc(1 * var(--sjs-pd-tab-move-in-margin, 50%));\n}\n\n.sd-paneldynamic__panel-wrapper--enter.sv-pd-animation-right {\n  --sjs-pd-tab-move-margin: calc(-1 * var(--sjs-pd-tab-move-in-margin, 50%));\n}\n\n.sd-paneldynamic__panel-wrapper--leave.sv-pd-animation-left, .sd-paneldynamic__panel-wrapper--leave.sv-pd-animation-right {\n  animation-name: fadeIn, movePanel;\n  animation-duration: var(--sjs-pd-tab-fade-out-duration, 250ms), var(--sjs-pd-tab-move-out-duration, 250ms);\n  animation-delay: var(--sjs-pd-tab-fade-out-delay, 0ms), var(--sjs-pd-tab-move-out-delay, 0ms);\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n  animation-direction: reverse;\n  animation-fill-mode: forwards;\n  position: absolute;\n  left: var(--sd-base-padding);\n  top: 0;\n  width: calc(100% - 2 * var(--sd-base-padding));\n}\n\n.sd-paneldynamic__panel-wrapper--leave.sv-pd-animation-left {\n  --sjs-pd-tab-move-margin: calc(-1 * var(--sjs-pd-tab-move-out-margin, 50%));\n}\n\n.sd-paneldynamic__panel-wrapper--leave.sv-pd-animation-right {\n  --sjs-pd-tab-move-margin: calc(1 * var(--sjs-pd-tab-move-out-margin, 50%));\n}\n\n.sd-paneldynamic__panel-wrapper--enter.sv-pd-animation-adding {\n  animation-name: fadeIn, changeHeight, paddingFadeIn;\n  animation-duration: var(--sjs-pd-tab-add-fade-in-duration, 500ms), var(--sjs-pd-tab-height-change-duration, 250ms), var(--sjs-pd-tab-height-change-duration, 250ms);\n  animation-delay: calc(var(--sjs-pd-tab-add-fade-in-delay, 250ms) + var(--sjs-pd-tab-animation-delay)), calc(var(--sjs-pd-tab-height-change-delay, 0ms) + var(--sjs-pd-tab-animation-delay)), calc(var(--sjs-pd-tab-height-change-delay, 0ms) + var(--sjs-pd-tab-animation-delay));\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-fill-mode: forwards;\n  transform: translateX(0);\n}\n\n.sd-paneldynamic__panel-wrapper--enter.sv-pd-animation-removing {\n  --sjs-pd-tab-animation-delay: var(--sjs-pd-tab-remove-fade-in-delay, 150ms);\n}\n\n.sd-paneldynamic__panel-wrapper--leave.sv-pd-animation-removing {\n  animation-name: fadeIn;\n  animation-duration: var(--sjs-pd-tab-remove-fade-out-duration, 150ms);\n  animation-delay: var(--sjs-pd-tab-remove-fade-out-delay, 0ms);\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n  animation-direction: reverse;\n  animation-fill-mode: forwards;\n  position: absolute;\n  left: var(--sd-base-padding);\n  top: 0;\n  width: calc(100% - 2 * var(--sd-base-padding));\n}\n\n.sd-paneldynamic__panel-wrapper--enter, .sd-paneldynamic__panel-wrapper--leave {\n  animation-name: fadeIn, moveInWithOverflow;\n  animation-fill-mode: forwards;\n  --animation-padding-top: 0;\n  --animation-padding-bottom: calc(1 * var(--sd-base-padding));\n  min-height: 0 !important;\n}\n\n.sd-paneldynamic__panel-wrapper--enter {\n  opacity: 0;\n  animation-timing-function: cubic-bezier(0, 0, 0.58, 1);\n  animation-duration: var(--sjs-pd-list-fade-in-duration, 500ms), var(--sjs-pd-list-move-in-duration, 250ms), var(--sjs-pd-list-move-in-duration, 250ms);\n  animation-delay: var(--sjs-pd-list-fade-in-delay, 250ms), 0s, 0s;\n}\n\n.sd-paneldynamic__panel-wrapper--leave {\n  animation-direction: reverse;\n  animation-timing-function: cubic-bezier(0.42, 0, 1, 1);\n  animation-duration: var(--sjs-pd-list-fade-out-duration, 150ms), var(--sjs-pd-list-move-out-duration, 250ms), var(--sjs-pd-list-move-out-duration, 250ms);\n  animation-delay: 0s, var(--sjs-pd-list-move-out-delay, 100ms), var(--sjs-pd-list-move-out-delay, 100ms);\n  --animation-padding-bottom: calc(1 * var(--sd-base-padding));\n}\n\n.sd-file {\n  position: relative;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  min-height: calc(36 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n  padding: 0 calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-file .sv-action-bar {\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) 0;\n  justify-content: center;\n  position: absolute;\n  width: 100%;\n  left: 0;\n  bottom: 0;\n}\n\n.sd-file .sv-action-bar .sv-action-bar-item {\n  height: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  color: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n  border-radius: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-file .sv-action-bar #fileIndex .sv-action-bar-item {\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n  font-weight: 600;\n}\n\n.sd-file .sv-action-bar #fileIndex .sv-action-bar-item:hover {\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sd-file .sv-action-bar #fileIndex .sv-action-bar-item:disabled {\n  opacity: initial;\n}\n\n.sd-file__decorator {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  position: absolute;\n  left: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  justify-content: center;\n  align-items: center;\n  border: 1px dashed var(--sjs-border-default, var(--border, #d6d6d6));\n  container-type: inline-size;\n}\n\n.sd-file--answered .sd-file__decorator {\n  container-type: unset;\n}\n\n.sd-file__decorator--drag {\n  z-index: 1;\n  border: 1px solid var(--sjs-primary-backcolor, var(--primary, #19b394));\n  background: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  box-shadow: inset 0 0 0 1px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-file__drag-area-placeholder {\n  text-align: center;\n  white-space: normal;\n  color: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  padding: 0 calc(8 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n@container (max-width: 496px) {\n  .sd-file__drag-area-placeholder {\n    padding: 0 var(--sjs-base-unit, var(--base-unit, 8px));\n  }\n}\n@container (max-width: 176px) {\n  .sd-file__drag-area-placeholder {\n    display: none;\n  }\n  .sd-file__decorator .sd-action {\n    padding: var(--sjs-base-unit, var(--base-unit, 8px));\n  }\n  .sd-file__decorator .sd-action .sv-svg-icon {\n    margin-left: 0;\n  }\n  .sd-file__decorator .sd-file__actions-container {\n    flex-direction: column;\n  }\n  .sd-file__decorator .sd-file__actions-container span {\n    display: none;\n  }\n}\n.sd-root-modern--mobile .sd-file__decorator {\n  padding: 0 calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-file__choose-btn--text {\n  display: block;\n  font-weight: 600;\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  cursor: pointer;\n}\n\n.sd-file__choose-btn--text .sv-svg-icon {\n  margin-left: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-file__choose-btn--icon > span {\n  display: none;\n}\n\n.sd-file__wrapper {\n  width: max-content;\n  max-width: 100%;\n}\n\n.sd-file__actions-container {\n  margin-top: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n.sd-file__actions-container .sv-action--hidden {\n  display: none;\n}\n\n.sd-file--answered .sd-file__actions-container {\n  z-index: 2;\n  margin-top: 0;\n  gap: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-file--answered .sd-file__actions-container {\n  top: var(--sjs-base-unit, var(--base-unit, 8px));\n  right: var(--sjs-base-unit, var(--base-unit, 8px));\n  position: absolute;\n}\n\n.sd-file--chose-btn--as .sd-file--answered .sd-file__actions-container {\n  inset-inline-end: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))) + 5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-file__list {\n  display: flex;\n  position: relative;\n  overflow: hidden;\n  box-sizing: content-box;\n  flex-direction: row;\n  padding: calc(10.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n  min-height: calc(15 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  max-height: calc(15 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: 100%;\n}\n\n.sd-file__page {\n  display: flex;\n  left: 0;\n  align-items: stretch;\n  justify-content: center;\n  gap: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(100% - 21 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  width: 100%;\n  position: absolute;\n}\n\n@keyframes file-page-to-right {\n  from {\n    opacity: 1;\n    left: 0;\n  }\n  to {\n    opacity: 0;\n    left: 100%;\n  }\n}\n@keyframes file-page-from-right {\n  from {\n    opacity: 0;\n    left: 100%;\n  }\n  to {\n    opacity: 1;\n    left: 0;\n  }\n}\n@keyframes file-page-from-left {\n  from {\n    opacity: 0;\n    left: -100%;\n  }\n  to {\n    opacity: 1;\n    left: 0;\n  }\n}\n@keyframes file-page-to-left {\n  from {\n    opacity: 1;\n    left: 0;\n  }\n  to {\n    opacity: 0;\n    left: -100%;\n  }\n}\n.sd-file__page--leave-to-right, .sd-file__page--enter-from-right, .sd-file__page--leave-to-left, .sd-file__page--enter-from-left {\n  animation-duration: 0.5s;\n  animation-fill-mode: forwards;\n}\n\n.sd-file__page--leave-to-right {\n  animation-name: file-page-to-right;\n}\n\n.sd-file__page--enter-from-right {\n  animation-name: file-page-from-right;\n}\n\n.sd-file__page--leave-to-left {\n  animation-name: file-page-to-left;\n}\n\n.sd-file__page--enter-from-left {\n  animation-name: file-page-from-left;\n}\n\n.sd-file__preview-item {\n  position: relative;\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  min-height: 100%;\n  width: calc(12 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin: 0;\n  cursor: pointer;\n}\n\n.sd-file__preview-item .sd-file__default-image {\n  width: calc(9 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(9 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-file__preview-item .sd-file__default-image use {\n  fill: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n}\n\n.sd-file__preview-item:hover .sd-file__remove-file-button {\n  opacity: 1;\n}\n\n.sd-file__preview-item:hover .sd-file__sign a {\n  text-decoration: underline;\n}\n\n.sd-file__sign {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  text-align: center;\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  line-height: var(--sjs-font-size, 16px);\n}\n\n.sd-file__sign a {\n  display: block;\n  text-decoration: none;\n  color: var(--sjs-font-questiontitle-color, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  white-space: normal;\n  word-break: break-all;\n  width: calc(12 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  max-height: calc(3 * (var(--sjs-font-size, 16px)));\n  text-overflow: ellipsis;\n  line-height: var(--sjs-font-size, 16px);\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n}\n\n.sd-file__remove-file-button {\n  display: block;\n  opacity: 0;\n  position: absolute;\n  left: 100%;\n  top: 0;\n  transform: translate(-50%, -50%);\n  transition: opacity var(--sjs-transition-duration, 150ms);\n}\n\n.sd-file__image-wrapper--default-image .sd-file__remove-file-button {\n  left: 50%;\n  top: 50%;\n  transform: translate(calc(3.5 * var(--sjs-base-unit, var(--base-unit, 8px)) - 50% - 1.5px), calc(-4.25 * var(--sjs-base-unit, var(--base-unit, 8px)) - 50% + 1.5px));\n}\n\n.sd-file__decorator--error {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n}\n\n.sd-file__image-wrapper {\n  position: relative;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: calc(12 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  min-height: calc(12 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(12 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sd-file__image-wrapper img:not(.sd-file__default-image) {\n  display: block;\n  max-width: 100%;\n  max-height: 100%;\n  width: calc(12 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(12 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  object-fit: contain;\n}\n\n.sd-file__image-wrapper--default-image {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sd-file--single .sd-file__preview-item .sd-file__remove-file-button {\n  display: none;\n}\n\n.sd-file--single-image {\n  height: calc(36 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-file--single-image .sd-file__page {\n  height: 100%;\n}\n\n.sd-file--single-image .sd-file__preview-item {\n  width: 100%;\n  margin: 0;\n}\n\n.sd-file--single-image .sd-file__list {\n  position: absolute;\n  left: 0;\n  padding: 0;\n  height: 100%;\n  max-height: 100%;\n  width: 100%;\n}\n\n.sd-file--single-image .sd-file__image-wrapper {\n  background-color: var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9));\n}\n\n.sd-file--single-image .sd-file__image-wrapper {\n  min-height: 100%;\n  min-width: 100%;\n}\n\n.sd-file--single-image .sd-file__image-wrapper img {\n  width: 100%;\n  height: 100%;\n}\n\n.sd-file--single-image .sd-file__sign {\n  position: absolute;\n  margin: 0;\n  width: 100%;\n  min-height: 100%;\n}\n\n.sd-file--single-image .sd-file__sign a {\n  color: rgba(0, 0, 0, 0);\n  width: 100%;\n  min-width: 100%;\n  max-width: 100%;\n  height: 100%;\n  outline: none;\n}\n\n.sd-file__image-wrapper.sd-file__image-wrapper--default-image {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sd-file > input:focus + .sd-file__decorator .sd-file__choose-btn.sd-file__choose-btn--icon use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-file > input:focus + .sd-file__decorator .sd-file__choose-btn:not(.sd-file__choose-btn--icon) {\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n}\n\n.sd-file__drag-area {\n  position: static;\n  width: 100%;\n}\n\n.sd-file__change-camera-button {\n  position: absolute;\n  z-index: 2;\n  left: var(--sjs-base-unit, var(--base-unit, 8px));\n  top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-file__close-camera-button {\n  position: absolute;\n  z-index: 2;\n  right: var(--sjs-base-unit, var(--base-unit, 8px));\n  top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-context-btn.sd-file__take-picture-button {\n  background-color: var(--sjs-special-red, var(--red, #e60a3e));\n  position: absolute;\n  bottom: 16px;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-context-btn.sd-file__take-picture-button:hover, .sd-context-btn.sd-file__take-picture-button:focus {\n  box-shadow: 0 0 0 2px var(--sjs-special-red, var(--red, #e60a3e));\n}\n\n.sd-context-btn.sd-file__take-picture-button .sv-svg-icon {\n  height: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-context-btn.sd-file__take-picture-button .sv-svg-icon use {\n  fill: var(--sjs-general-backcolor, var(--background, #fff));\n}\n\n.sd-file__video-container {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.sd-file__loading-indicator {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px dashed var(--sjs-border-default, var(--border, #d6d6d6));\n  left: 0;\n}\n\n.sd-file__loading-indicator .sd-loading-indicator {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.sd-file__choose-file-btn--disabled {\n  opacity: 0.25;\n  cursor: default;\n}\n\n.sd-file--readonly .sd-context-btn {\n  display: none;\n}\n\n.sd-file--readonly .sd-file__decorator {\n  border-color: rgba(0, 0, 0, 0);\n}\n\n.sd-file--readonly .sd-file__actions-container {\n  display: none;\n}\n\n.sd-file--readonly .sd-file__image-wrapper {\n  background: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-file--readonly .sd-file__drag-area-placeholder {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-file--preview .sd-context-btn {\n  display: none;\n}\n\n.sd-file--preview .sd-file__decorator {\n  border-color: rgba(0, 0, 0, 0);\n}\n\n.sd-file--preview .sd-file__image-wrapper {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sd-file--preview .sd-file__actions-container {\n  display: none;\n}\n\n.sd-file--preview .sd-file__drag-area-placeholder {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n}\n\n.sd-hidden {\n  display: none !important;\n}\n\n.sd-body__navigation .sd-btn {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(8 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  font-size: var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));\n}\n\n.sd-root--compact .sd-body__navigation .sd-btn:not(.sd-btn--action) {\n  background-color: var(--sjs-general-backcolor-dim-light, var(--background-dim-light, #f9f9f9));\n}\n\n.sd-root--compact .sd-body__navigation .sd-btn:not(.sd-btn--action):hover {\n  background-color: var(--sjs-editorpanel-hovercolor, var(--sjs-general-backcolor-dim-dark, rgb(243, 243, 243)));\n}\n\n.sd-root-modern--mobile .sd-body__navigation .sv-action:not(.sv-action--hidden), .sd-root-modern--mobile .sd-body__navigation .sd-btn {\n  flex-grow: 1;\n}\n\n.sd-root-modern--mobile .sd-body__navigation .sd-btn {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-body__navigation .sv-action--hidden {\n  display: none;\n}\n\n.sd-btn {\n  appearance: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  border-radius: var(--sjs-corner-radius, 4px);\n  cursor: pointer;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  font-weight: 600;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n  text-align: center;\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  border: none;\n  outline: none;\n  box-shadow: var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15)), 0 0 0 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  transition: box-shadow var(--sjs-transition-duration, 150ms), background var(--sjs-transition-duration, 150ms);\n}\n\n.sd-btn--small {\n  flex-grow: 1;\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-btn:hover {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-btn:focus-visible {\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-btn:disabled {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  opacity: 0.25;\n  pointer-events: none;\n}\n\n.sd-btn--action {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-btn--action:hover {\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  background-color: var(--sjs-primary-backcolor-dark, rgb(20, 164, 139));\n}\n\n.sd-btn--action:disabled {\n  color: var(--sjs-primary-forecolor-light, var(--primary-foreground-disabled, rgba(255, 255, 255, 0.25)));\n  pointer-events: none;\n}\n\n.sd-btn--danger {\n  background-color: var(--sjs-special-red, var(--red, #e60a3e));\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-btn--danger:hover {\n  background-color: var(--sjs-special-red, var(--red, #e60a3e));\n  color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-btn--danger:disabled {\n  color: var(--sjs-special-red-forecolor, #ffffff);\n  pointer-events: none;\n}\n\n.sd-body {\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.sd-body .sd-body__page {\n  min-width: min(100%, 300px);\n}\n\n.sd-body .sd-body__timer {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n  box-sizing: border-box;\n}\n\n.sd-body.sd-body--static {\n  max-width: calc(90 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-left: auto;\n  margin-right: auto;\n  padding-top: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(10 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-body.sd-body--static .sd-body__timer, .sd-body.sd-body--static .sd-body__navigation, .sd-body.sd-body--static .sd-body__page {\n  margin-left: 0;\n  margin-right: 0;\n}\n\n.sd-body.sd-body--static .sd-body__navigation {\n  padding-top: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-body.sd-body--static .sd-body__navigation.sd-action-bar {\n  padding-left: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-right: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-body.sd-body--responsive {\n  max-width: initial;\n  padding: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n}\n\n.sd-body.sd-body--responsive .sd-page {\n  padding: 0;\n}\n\n.sd-body.sd-body--responsive .sd-body__timer, .sd-body.sd-body--responsive .sd-body__navigation {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-body.sd-body--responsive .sd-body__navigation {\n  padding-top: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-body.sd-body--responsive.sd-body--with-timer {\n  max-width: calc(100% + var(--sd-timer-size) * -1.4444444444 + 6 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.sd-root-modern--mobile .sd-body.sd-body--with-timer.sd-body--responsive {\n  max-width: initial;\n  margin-left: 0;\n  margin-right: 0;\n}\n\n.sd-root-modern--mobile .sd-body.sd-body--responsive, .sd-root-modern--mobile .sd-body.sd-body--static {\n  padding: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-root-modern--mobile .sd-body.sd-body--responsive .sd-body__navigation, .sd-root-modern--mobile .sd-body.sd-body--static .sd-body__navigation {\n  padding-left: 0;\n  padding-right: 0;\n  padding-bottom: 0;\n}\n\n.sd-root--compact .sd-body.sd-body--responsive .sd-body__navigation, .sd-root--compact .sd-body.sd-body--static .sd-body__navigation {\n  padding-top: calc(7 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-body__navigation.sd-action-bar {\n  box-sizing: border-box;\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  flex-wrap: wrap;\n  gap: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-body--empty {\n  min-height: 400px;\n  text-align: center;\n  padding-top: 180px;\n  box-sizing: border-box;\n}\n\n.sd-body--empty, .sd-body--loading {\n  font-size: var(--sjs-article-font-default-fontSize, var(--sjs-font-size, 16px));\n  text-decoration: var(--sjs-article-font-default-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-default-fontWeight, 400);\n  font-style: var(--sjs-article-font-default-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-default-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-default-letterSpacing, 0);\n  line-height: var(--sjs-article-font-default-lineHeight, 28px);\n  text-indent: var(--sjs-article-font-default-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-default-textCase, "none");\n  color: var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91)));\n}\n\n.sd-body--empty h1, .sd-body--loading h1 {\n  font-size: var(--sjs-article-font-xx-large-fontSize, calc(4 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-xx-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-xx-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-xx-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-xx-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-xx-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-xx-large-lineHeight, 64px);\n  text-indent: var(--sjs-article-font-xx-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-xx-large-textCase, "none");\n}\n\n.sd-body--empty h2, .sd-body--loading h2 {\n  font-size: var(--sjs-article-font-x-large-fontSize, calc(3 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-x-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-x-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-x-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-x-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-x-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-x-large-lineHeight, 56px);\n  text-indent: var(--sjs-article-font-x-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-x-large-textCase, "none");\n}\n\n.sd-body--empty h3, .sd-body--loading h3 {\n  font-size: var(--sjs-article-font-large-fontSize, calc(2 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-large-lineHeight, 40px);\n  text-indent: var(--sjs-article-font-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-large-textCase, "none");\n}\n\n.sd-body--empty h4, .sd-body--empty h5, .sd-body--empty h6, .sd-body--loading h4, .sd-body--loading h5, .sd-body--loading h6 {\n  font-size: var(--sjs-article-font-medium-fontSize, calc(1.5 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-medium-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-medium-fontWeight, 700);\n  font-style: var(--sjs-article-font-medium-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-medium-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-medium-letterSpacing, 0);\n  line-height: var(--sjs-article-font-medium-lineHeight, 32px);\n  text-indent: var(--sjs-article-font-medium-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-medium-textCase, "none");\n}\n\n.sd-body--empty td, .sd-body--empty span, .sd-body--empty div, .sd-body--empty p, .sd-body--loading td, .sd-body--loading span, .sd-body--loading div, .sd-body--loading p {\n  font-size: var(--sjs-article-font-default-fontSize, var(--sjs-font-size, 16px));\n  text-decoration: var(--sjs-article-font-default-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-default-fontWeight, 400);\n  font-style: var(--sjs-article-font-default-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-default-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-default-letterSpacing, 0);\n  line-height: var(--sjs-article-font-default-lineHeight, 28px);\n  text-indent: var(--sjs-article-font-default-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-default-textCase, "none");\n}\n\n.sd-body--empty a, .sd-body--loading a {\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-body--empty button, .sd-body--loading button {\n  display: flex;\n  align-items: center;\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  vertical-align: baseline;\n  text-align: center;\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  border: none;\n  border-radius: var(--sjs-corner-radius, 4px);\n  cursor: pointer;\n  user-select: none;\n  outline: solid calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) rgba(0, 0, 0, 0);\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  font-weight: 600;\n  font-style: normal;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));\n  box-shadow: var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15)), 0 0 0 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  transition: box-shadow var(--sjs-transition-duration, 150ms);\n}\n\n.sd-body--empty button:hover, .sd-body--loading button:hover {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-body--empty button:focus, .sd-body--loading button:focus {\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-body--empty button span, .sd-body--loading button span {\n  display: flex;\n  align-items: center;\n  flex-grow: 1;\n  justify-content: center;\n}\n\n.sd-root_background-image {\n  background-position-x: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.sd-multipletext {\n  width: 100%;\n  table-layout: fixed;\n  border-spacing: 0;\n  height: 1px;\n}\n\n.sd-multipletext__cell {\n  height: 100%;\n}\n\n.sd-multipletext__cell:not(:first-of-type) {\n  padding-left: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-multipletext__item-container.sd-input:focus-within {\n  box-shadow: var(--sjs-shadow-inner-reset, inset 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-multipletext__item-container {\n  display: flex;\n  align-items: flex-start;\n  height: 100%;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.sd-multipletext__item-container .sd-input {\n  padding-top: 0;\n  padding-right: 0;\n  padding-bottom: 0;\n  border: none;\n  box-shadow: none;\n}\n\n.sd-multipletext__item-container .sd-input, .sd-multipletext__item-title {\n  margin-top: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-bottom: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-multipletext__item-title {\n  font-size: 0;\n  line-height: 0;\n}\n\n.sd-multipletext__item-title span {\n  font-size: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n}\n\n.sd-multipletext__item-title {\n  height: calc(100% - var(--sjs-base-unit, var(--base-unit, 8px)) * 3);\n  max-width: 30%;\n  padding-right: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-right: 1px solid var(--sjs-border-default, var(--border, #d6d6d6));\n  white-space: normal;\n  color: var(--sjs-font-editorfont-placeholdercolor, var(--sjs-general-forecolor-light, var(--foreground-light, #909090)));\n  box-sizing: content-box;\n}\n\n.sd-question--preview .sd-multipletext__item-title {\n  border: none;\n}\n\n.sd-multipletext__item {\n  flex-grow: 1;\n}\n\n.sd-multipletext__content .sd-multipletext__item-container {\n  position: relative;\n}\n\n.sd-multipletext__item-container--error {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n}\n\n.sd-multipletext__item-container--error .sd-input--error {\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sd-multipletext-item__character-counter {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.sd-question__content:focus-within .sd-multipletext-item__character-counter {\n  padding-inline-end: calc(8 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-multipletext__cell {\n  padding-left: 0;\n  padding-right: 0;\n  padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-multipletext__cell--error-bottom, .sd-multipletext__row:first-of-type .sd-multipletext__cell {\n  padding-top: 0;\n}\n\n.sd-multipletext__cell--error-top, .sd-multipletext__row:last-of-type .sd-multipletext__cell {\n  padding-bottom: 0;\n}\n\n.sd-multipletext__cell--error .sd-question__erbox {\n  margin: 0;\n}\n\n.sd-multipletext .sd-input .sd-input {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sd-action {\n  appearance: none;\n  border: none;\n  display: flex;\n  align-items: center;\n  gap: var(--sjs-base-unit, var(--base-unit, 8px));\n  background: rgba(0, 0, 0, 0);\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  font-weight: 600;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  font-size: var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));\n  outline: none;\n  transition: background-color var(--sjs-transition-duration, 150ms);\n  box-sizing: content-box;\n}\n\n.sd-action--negative {\n  color: var(--sjs-special-red, var(--red, #e60a3e));\n}\n\n.sd-action--icon {\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-action__icon {\n  margin-left: calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-action__icon use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-action--icon .sd-action__icon {\n  margin-left: 0;\n}\n\n.sd-action--icon use {\n  fill: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  transition: fill var(--sjs-transition-duration, 150ms);\n}\n\nsvg.sd-action--icon {\n  fill: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n}\n\n.sd-action:disabled, .sd-action--disabled {\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  cursor: default;\n  opacity: 0.25;\n  pointer-events: none;\n}\n\n.sd-action:disabled use, .sd-action--disabled use {\n  fill: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n}\n\n.sd-action:not(.sd-action--pressed):hover, .sd-action:not(.sd-action--pressed):focus {\n  outline: none;\n  background-color: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  cursor: pointer;\n  opacity: 1;\n}\n\n.sd-action:not(.sd-action--pressed):hover.sd-action--icon, .sd-action:not(.sd-action--pressed):focus.sd-action--icon {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sd-action:not(.sd-action--pressed):hover.sd-action--negative, .sd-action:not(.sd-action--pressed):focus.sd-action--negative {\n  background-color: var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)));\n}\n\n.sd-action:not(.sd-action--pressed):hover.sd-action--negative.sd-action--icon use, .sd-action:not(.sd-action--pressed):focus.sd-action--negative.sd-action--icon use {\n  fill: var(--sjs-special-red, var(--red, #e60a3e));\n}\n\n.sd-action:not(.sd-action--pressed):hover:active, .sd-action:not(.sd-action--pressed):focus:active {\n  opacity: 0.5;\n}\n\n.sd-action__icon {\n  display: block;\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-action--pressed:not(.sd-action--active) {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  opacity: 0.5;\n}\n\n.sd-action-bar > .sv-dots {\n  width: auto;\n}\n\n.sd-action-bar > .sv-action--hidden {\n  width: 0;\n}\n\n.sd-action.sv-dots__item {\n  width: auto;\n}\n\n.sd-action-bar {\n  display: flex;\n  align-items: center;\n}\n\n.sd-action-bar .sv-action:not(:last-child) .sv-action__content {\n  padding-right: 0;\n}\n\n.sd-context-btn {\n  background-color: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: calc(12.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border: none;\n  outline: none;\n  cursor: pointer;\n}\n\n.sd-context-btn .sv-svg-icon {\n  margin: 0;\n}\n\n.sd-context-btn svg {\n  display: block;\n  width: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n  height: calc(1.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));\n}\n\n.sd-context-btn use {\n  fill: var(--sjs-font-questiondescription-color, var(--sjs-general-forecolor-light, rgba(0, 0, 0, 0.45)));\n  transition: fill var(--sjs-transition-duration, 150ms);\n}\n\n.sd-context-btn:hover use, .sd-context-btn:focus use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-context-btn:hover.sd-context-btn--negative use, .sd-context-btn:focus.sd-context-btn--negative use {\n  fill: var(--sjs-special-red, var(--red, #e60a3e));\n}\n\n.sd-context-btn:disabled {\n  opacity: 0.25;\n}\n\n.sd-context-btn--small {\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-context-btn--small svg {\n  width: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n  height: var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px));\n}\n\n.sd-context-btn--with-border {\n  --box-shadow-color: var(--sjs-border-default, var(--border, #d6d6d6));\n  box-shadow: 0 0 0 1px var(--box-shadow-color);\n}\n\n.sd-context-btn--colorful use {\n  fill: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-context-btn--colorful.sd-context-btn--negative use {\n  fill: var(--sjs-special-red, var(--red, #e60a3e));\n}\n\n.sd-context-btn--colorful:focus, .sd-context-btn--colorful:hover {\n  background: linear-gradient(var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1))), var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)))), linear-gradient(var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff)))), var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff)))));\n}\n\n.sd-context-btn--colorful:focus.sd-context-btn--negative, .sd-context-btn--colorful:hover.sd-context-btn--negative {\n  background: linear-gradient(var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1))), var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1)))), linear-gradient(var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff)))), var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff)))));\n}\n\n.sd-context-btn--colorful:focus.sd-context-btn--with-border, .sd-context-btn--colorful:hover.sd-context-btn--with-border {\n  --box-shadow-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-context-btn--colorful:focus.sd-context-btn--with-border.sd-context-btn--negative, .sd-context-btn--colorful:hover.sd-context-btn--with-border.sd-context-btn--negative {\n  --box-shadow-color: var(--sjs-special-red, var(--red, #e60a3e));\n}\n\n.sd-completedpage, .sd-body--loading, .sd-completed-before-page {\n  align-items: center;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: bold;\n  box-sizing: border-box;\n  text-align: center;\n  height: auto;\n  font-size: var(--sjs-article-font-default-fontSize, var(--sjs-font-size, 16px));\n  text-decoration: var(--sjs-article-font-default-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-default-fontWeight, 400);\n  font-style: var(--sjs-article-font-default-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-default-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-default-letterSpacing, 0);\n  line-height: var(--sjs-article-font-default-lineHeight, 28px);\n  text-indent: var(--sjs-article-font-default-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-default-textCase, "none");\n  color: var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91)));\n}\n\n.sd-completedpage h1, .sd-body--loading h1, .sd-completed-before-page h1 {\n  font-size: var(--sjs-article-font-xx-large-fontSize, calc(4 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-xx-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-xx-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-xx-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-xx-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-xx-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-xx-large-lineHeight, 64px);\n  text-indent: var(--sjs-article-font-xx-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-xx-large-textCase, "none");\n}\n\n.sd-completedpage h2, .sd-body--loading h2, .sd-completed-before-page h2 {\n  font-size: var(--sjs-article-font-x-large-fontSize, calc(3 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-x-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-x-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-x-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-x-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-x-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-x-large-lineHeight, 56px);\n  text-indent: var(--sjs-article-font-x-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-x-large-textCase, "none");\n}\n\n.sd-completedpage h3, .sd-body--loading h3, .sd-completed-before-page h3 {\n  font-size: var(--sjs-article-font-large-fontSize, calc(2 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-large-lineHeight, 40px);\n  text-indent: var(--sjs-article-font-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-large-textCase, "none");\n}\n\n.sd-completedpage h4, .sd-completedpage h5, .sd-completedpage h6, .sd-body--loading h4, .sd-body--loading h5, .sd-body--loading h6, .sd-completed-before-page h4, .sd-completed-before-page h5, .sd-completed-before-page h6 {\n  font-size: var(--sjs-article-font-medium-fontSize, calc(1.5 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-medium-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-medium-fontWeight, 700);\n  font-style: var(--sjs-article-font-medium-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-medium-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-medium-letterSpacing, 0);\n  line-height: var(--sjs-article-font-medium-lineHeight, 32px);\n  text-indent: var(--sjs-article-font-medium-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-medium-textCase, "none");\n}\n\n.sd-completedpage td, .sd-completedpage span, .sd-completedpage div, .sd-completedpage p, .sd-body--loading td, .sd-body--loading span, .sd-body--loading div, .sd-body--loading p, .sd-completed-before-page td, .sd-completed-before-page span, .sd-completed-before-page div, .sd-completed-before-page p {\n  font-size: var(--sjs-article-font-default-fontSize, var(--sjs-font-size, 16px));\n  text-decoration: var(--sjs-article-font-default-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-default-fontWeight, 400);\n  font-style: var(--sjs-article-font-default-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-default-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-default-letterSpacing, 0);\n  line-height: var(--sjs-article-font-default-lineHeight, 28px);\n  text-indent: var(--sjs-article-font-default-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-default-textCase, "none");\n}\n\n.sd-completedpage a, .sd-body--loading a, .sd-completed-before-page a {\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-completedpage button, .sd-body--loading button, .sd-completed-before-page button {\n  display: flex;\n  align-items: center;\n  padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  vertical-align: baseline;\n  text-align: center;\n  background-color: var(--sjs-general-backcolor, var(--background, #fff));\n  border: none;\n  border-radius: var(--sjs-corner-radius, 4px);\n  cursor: pointer;\n  user-select: none;\n  outline: solid calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px)))) rgba(0, 0, 0, 0);\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  font-weight: 600;\n  font-style: normal;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-size: var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px));\n  line-height: calc(1.5 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));\n  box-shadow: var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15)), 0 0 0 0px var(--sjs-primary-backcolor, var(--primary, #19b394));\n  transition: box-shadow var(--sjs-transition-duration, 150ms);\n}\n\n.sd-completedpage button:hover, .sd-body--loading button:hover, .sd-completed-before-page button:hover {\n  background-color: var(--sjs-questionpanel-hovercolor, var(--sjs-general-backcolor-dark, rgb(248, 248, 248)));\n}\n\n.sd-completedpage button:focus, .sd-body--loading button:focus, .sd-completed-before-page button:focus {\n  box-shadow: var(--sjs-shadow-small-reset, 0px 0px 0px 0px rgba(0, 0, 0, 0.15)), 0 0 0 2px var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-completedpage button span, .sd-body--loading button span, .sd-completed-before-page button span {\n  display: flex;\n  align-items: center;\n  flex-grow: 1;\n  justify-content: center;\n}\n\n.sd-completedpage:not(:has(> *)), .sd-body--loading:not(:has(> *)), .sd-completed-before-page:not(:has(> *)) {\n  font-size: var(--sjs-article-font-large-fontSize, calc(2 * (var(--sjs-font-size, 16px))));\n  text-decoration: var(--sjs-article-font-large-textDecoration, "none");\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-weight: var(--sjs-article-font-large-fontWeight, 700);\n  font-style: var(--sjs-article-font-large-fontStyle, "normal");\n  font-stretch: var(--sjs-article-font-large-fontStretch, "normal");\n  letter-spacing: var(--sjs-article-font-large-letterSpacing, 0);\n  line-height: var(--sjs-article-font-large-lineHeight, 40px);\n  text-indent: var(--sjs-article-font-large-paragraphIndent, 0px);\n  text-transform: var(--sjs-article-font-large-textCase, "none");\n}\n\n.sd-completedpage {\n  padding: calc(17 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0 calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-completedpage:has(> *) {\n  padding: calc(13 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0 calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-body--loading, .sd-completed-before-page {\n  padding: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0 calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.sd-body--loading:has(> *), .sd-completed-before-page:has(> *) {\n  padding: 0;\n}\n\n.sd-progress-buttons__image-button-left {\n  display: none;\n}\n\n.sd-progress-buttons__image-button-right {\n  display: none;\n}\n\n.sd-progress-buttons__image-button--hidden {\n  visibility: hidden;\n}\n\n.sd-progress-buttons__page-description {\n  display: none;\n}\n\n.sd-progress-buttons {\n  padding: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  display: flex;\n  flex-direction: column;\n}\n\n.sd-progress-buttons__list-container {\n  display: flex;\n  overflow: hidden;\n  margin: 0 calc(-0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons__connector {\n  display: none;\n}\n\n.sd-progress-buttons__list {\n  display: inline-flex;\n  flex-direction: row;\n  flex-grow: 1;\n  margin: 0 auto;\n  padding: 0;\n}\n\n.sd-progress-buttons__list li {\n  display: flex;\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: 0;\n  position: relative;\n  flex-wrap: nowrap;\n  text-align: center;\n  flex-direction: column;\n  cursor: pointer;\n}\n\n.sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector {\n  display: block;\n  content: "";\n  height: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background-color: var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45));\n  opacity: 0.5;\n  position: absolute;\n  bottom: calc(1.125 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  right: calc(50% + 10px);\n  width: calc(100% - 20px);\n  pointer-events: none;\n}\n\n.sd-progress-buttons__list li .sd-progress-buttons__button {\n  position: relative;\n  display: flex;\n  content: attr(data-page-number);\n  width: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin: calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid rgba(0, 0, 0, 0);\n  border-radius: 50%;\n  align-self: center;\n  z-index: 1;\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  font-weight: 600;\n  line-height: var(--sjs-font-size, 16px);\n  justify-content: center;\n  color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  box-sizing: content-box;\n}\n\n.sd-progress-buttons__list li .sd-progress-buttons__button .sd-progress-buttons__button-background {\n  position: absolute;\n  width: calc(2.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  top: calc(-0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  left: calc(-1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  z-index: -2;\n}\n\n.sd-progress-buttons__list li .sd-progress-buttons__button .sd-progress-buttons__button-content {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: calc(-0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  left: calc(-0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  background-color: var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45));\n  opacity: 0.5;\n  z-index: -1;\n  border: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid rgba(0, 0, 0, 0);\n  border-radius: 50%;\n  box-sizing: content-box;\n}\n\n.sd-progress-buttons__list li:hover .sd-progress-buttons__button {\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid var(--sjs-primary-backcolor, var(--primary, #19b394));\n  background-color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n}\n\n.sd-progress-buttons__list li:hover .sd-progress-buttons__button .sd-progress-buttons__button-background {\n  left: calc(-0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons__list li:hover .sd-progress-buttons__button .sd-progress-buttons__button-content {\n  top: calc(-0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  left: calc(-0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border: calc(0.75 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid var(--sjs-primary-backcolor, var(--primary, #19b394));\n  background-color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  opacity: 1;\n}\n\n.sd-progress-buttons__list .sd-progress-buttons__list-element--passed:not(:first-child) > .sd-progress-buttons__connector {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  opacity: 1;\n}\n\n.sd-progress-buttons__list .sd-progress-buttons__list-element--passed .sd-progress-buttons__button {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n}\n\n.sd-progress-buttons__list .sd-progress-buttons__list-element--passed .sd-progress-buttons__button .sd-progress-buttons__button-content {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  opacity: 1;\n}\n\n.sd-progress-buttons__list .sd-progress-buttons__list-element--current:not(:first-child) > .sd-progress-buttons__connector {\n  background-color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  opacity: 1;\n}\n\n.sd-progress-buttons__list .sd-progress-buttons__list-element--current .sd-progress-buttons__button {\n  border: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid var(--sjs-primary-backcolor, var(--primary, #19b394));\n  background-color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons__list .sd-progress-buttons__list-element--current .sd-progress-buttons__button .sd-progress-buttons__button-background {\n  left: calc(-0.75 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons__list .sd-progress-buttons__list-element--current .sd-progress-buttons__button .sd-progress-buttons__button-content {\n  border: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) solid var(--sjs-primary-backcolor, var(--primary, #19b394));\n  background-color: var(--sjs-primary-forecolor, var(--primary-foreground, #fff));\n  opacity: 1;\n}\n\n.sd-progress-buttons__page-title {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  font-weight: 600;\n  line-height: var(--sjs-font-size, 16px);\n  flex-grow: 1;\n  text-align: center;\n  padding: 0 calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  color: var(--lbr-step-progress-bar-step-title-text-color, var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91))));\n}\n\n.sd-progress-buttons__header .sd-progress-buttons__page-title {\n  margin-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-progress-buttons__footer .sd-progress-buttons__page-title {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-bottom: 0;\n  justify-content: flex-end;\n  padding: 0;\n  color: var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45));\n}\n\n.sd-progress-buttons--bottom {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  flex-direction: column-reverse;\n}\n\n.sd-progress-buttons--bottom .sd-progress-buttons__list li {\n  flex-direction: column-reverse;\n}\n\n.sd-progress-buttons--bottom .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector {\n  top: calc(1.125 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons--bottom .sd-progress-buttons__page-title {\n  margin-top: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-bottom: 0;\n}\n\n.sd-progress-buttons--bottom .sd-progress-buttons__header .sd-progress-buttons__page-title {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  margin-bottom: 0;\n}\n\n.sd-progress-buttons--bottom .sd-progress-buttons__footer .sd-progress-buttons__page-title {\n  margin-top: 0;\n  margin-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-progress-buttons--numbered .sd-progress-buttons__list-container {\n  margin: 0 calc(-1 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons--numbered .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector {\n  bottom: calc(2.175 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  right: calc(50% + 18px);\n  width: calc(100% - 36px);\n}\n\n.sd-progress-buttons--numbered .sd-progress-buttons__list li .sd-progress-buttons__button {\n  width: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons--numbered .sd-progress-buttons__list li .sd-progress-buttons__button .sd-progress-buttons__button-background {\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(4.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons--numbered .sd-progress-buttons__list li:hover .sd-progress-buttons__button {\n  padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons--with-titles .sd-progress-buttons__list-container {\n  margin: 0;\n}\n\n.sd-root-modern--mobile .sd-progress-buttons__list, .sd-progress-buttons--no-titles .sd-progress-buttons__list {\n  justify-content: space-between;\n  width: 100%;\n}\n\n.sd-root-modern--mobile .sd-progress-buttons__list li, .sd-progress-buttons--no-titles .sd-progress-buttons__list li {\n  flex-grow: 0;\n}\n\n.sd-progress-buttons--bottom.sd-progress-buttons--numbered .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector {\n  top: calc(2.175 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-root-modern--mobile .sd-progress-buttons {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-progress-buttons--fit-survey-width {\n  max-width: calc(90 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n  width: 100%;\n  margin: auto;\n}\n\n[dir=rtl] .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector, [style*="direction:rtl"] .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector, [style*="direction: rtl"] .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector {\n  right: unset;\n  left: calc(50% + 10px);\n}\n\n[dir=rtl] .sd-progress-buttons--numbered .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector, [style*="direction:rtl"] .sd-progress-buttons--numbered .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector, [style*="direction: rtl"] .sd-progress-buttons--numbered .sd-progress-buttons__list li:not(:first-child) > .sd-progress-buttons__connector {\n  right: unset;\n  left: calc(50% + 20px);\n}\n\n.sv_progress-toc {\n  padding: var(--lbr-toc-padding-top, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-toc-padding-right, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-toc-padding-bottom, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-toc-padding-left, var(--sjs-base-unit, var(--base-unit, 8px)));\n  background: var(--lbr-toc-background-color, var(--sjs-general-backcolor, var(--background, #fff)));\n  min-width: calc(32 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  max-width: calc(42 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: 100%;\n  box-sizing: border-box;\n}\n\n.sv_progress-toc .sv-list {\n  padding: 0;\n}\n\n.sv_progress-toc .sv-list__item.sv-list__item--selected .sv-list__item-body {\n  background: var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1)));\n  color: var(--sjs-general-forecolor, var(--foreground, #161616));\n  font-weight: 400;\n}\n\n.sv_progress-toc .sv-list__item span {\n  white-space: break-spaces;\n}\n\n.sv_progress-toc .sv-list__item-body {\n  padding-inline-start: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-inline-end: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: var(--sjs-corner-radius, 4px);\n  padding-top: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv_progress-toc use {\n  fill: var(--sjs-general-forecolor-light, var(--foreground-light, #909090));\n}\n\n.sv_progress-toc--left {\n  border-right: var(--lbr-toc-border-width-right, 1px) solid var(--lbr-toc-border-color, var(--sjs-border-default, var(--border, #d6d6d6)));\n}\n\n.sv_progress-toc--right {\n  border-left: var(--lbr-toc-border-width-right, 1px) solid var(--lbr-toc-border-color, var(--sjs-border-default, var(--border, #d6d6d6)));\n}\n\n.sv_progress-toc--mobile {\n  position: fixed;\n  top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  right: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: auto;\n  min-width: auto;\n  height: auto;\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  z-index: 15;\n  border-radius: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv_progress-toc--mobile > div {\n  width: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv_progress-toc--mobile:hover {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n}\n\n.sd-title + .sv-components-row > .sv-components-column .sv_progress-toc:not(.sv_progress-toc--mobile), .sd-title ~ .sv-components-row > .sv-components-column .sv_progress-toc:not(.sv_progress-toc--mobile) {\n  margin-top: 2px;\n}\n\n.sv_progress-toc.sv_progress-toc--sticky {\n  position: sticky;\n  height: auto;\n  overflow-y: auto;\n  top: 0;\n}\n\n.sd-list__item-body {\n  padding-block: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  border-radius: var(--sjs-corner-radius, 4px);\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n}\n\n.sd-list__item.sd-list__item--focused:not(.sd-list__item--selected) {\n  outline: none;\n}\n\n.sd-list__item.sd-list__item--focused:not(.sd-list__item--selected) .sd-list__item-body {\n  padding-block: calc(1.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-timer {\n  z-index: 2;\n  position: fixed;\n  bottom: calc(var(--sd-timer-size) / 144 * 32);\n  right: var(--sjs-base-unit, var(--base-unit, 8px));\n  background: #fff;\n  width: var(--sd-timer-size);\n  height: var(--sd-timer-size);\n  margin-right: calc(var(--sd-timer-size) / 144 * 32);\n  display: flex;\n  border-radius: 100%;\n  padding: calc(var(--sd-timer-size) / 144 * 8);\n  box-shadow: var(--sjs-shadow-large, 0px 8px 16px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1));\n  box-sizing: border-box;\n}\n\n.sd-timer--top {\n  top: calc(var(--sd-timer-size) / 144 * 32);\n  margin-top: calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-bottom: calc(-1 * var(--sd-timer-size));\n}\n\n.sd-timer--bottom {\n  bottom: calc(var(--sd-timer-size) / 144 * 32);\n  margin-top: calc(var(--sd-timer-size) * -1.2222222222);\n}\n\n.sd-timer__progress {\n  --sd-timer-stroke-background-color: var(--background-dim, #f3f3f3);\n  --sd-timer-stroke-background-width: 2px;\n  stroke-linecap: round;\n  height: 100%;\n  width: 100%;\n  transform: rotate(-90deg);\n  stroke: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  stroke-dashoffset: 0;\n  fill: none;\n  stroke-width: 4px;\n}\n\n.sd-timer__progress--animation {\n  stroke-dashoffset: 0;\n  transition: stroke-dashoffset 1s linear;\n}\n\n.sd-timer__text-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  padding: var(--sjs-base-unit, var(--base-unit, 8px));\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  font-weight: 700;\n  font-size: calc(var(--sd-timer-size) / 144 * 32);\n}\n\n.sd-timer__text--major {\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  font-weight: 700;\n  font-size: calc(var(--sd-timer-size) / 144 * 32);\n}\n\n.sd-timer__text--minor {\n  color: var(--lbr-timer-text-color-secondary, var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45)));\n  font-size: var(--lbr-font-default-size, var(--sjs-font-size, 16px));\n  font-style: normal;\n  font-weight: 600;\n  line-height: var(--lbr-font-default-line-height, calc(1.5 * (var(--sjs-font-size, 16px))));\n  margin-top: calc(-0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-header {\n  position: relative;\n  background-color: var(--sjs-header-backcolor, transparent);\n}\n\n.sv-header__background-color--accent {\n  background-color: var(--sjs-header-backcolor, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\n.sv-header__overlap {\n  padding-bottom: calc(8 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: content-box;\n}\n\n.sv-header__overlap ~ div .sd-body, .sv-header__overlap ~ div .sv-body {\n  margin-top: calc(-14 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-root-modern--mobile .sv-header__overlap {\n  padding-bottom: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-root-modern--mobile .sv-header__overlap ~ div .sd-body, .sd-root-modern--mobile .sv-header__overlap ~ div .sv-body {\n  margin-top: calc(-5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-header__overlap.sv-header__without-background {\n  margin-bottom: 0;\n  padding-bottom: 0;\n}\n\n.sv-header__overlap.sv-header__without-background ~ div .sd-body, .sv-header__overlap.sv-header__without-background ~ div .sv-body {\n  margin-top: 0;\n}\n\n.sv-header__without-background .sv-header--mobile, .sv-header__without-background .sv-header__content {\n  padding-bottom: 0;\n}\n\n.sd-body .sv-header__content {\n  padding-top: 0;\n  padding-bottom: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-header__content {\n  padding: calc(5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  box-sizing: border-box;\n  height: 100%;\n  position: relative;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  row-gap: var(--lbr-cover-row-gap, var(--lbr-spacing-x150, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px))))));\n  column-gap: var(--lbr-cover-column-gap, var(--lbr-spacing-x6, calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))))));\n}\n\n.sv-header--height-auto .sv-header__content {\n  grid-template-rows: auto;\n  height: auto;\n}\n\n.sv-header--height-auto .sv-header__cell:not(.sv-header__cell--empty) .sv-header__cell-content {\n  position: relative;\n  min-height: 100%;\n  min-width: 100%;\n}\n\n.sv-header--height-auto .sv-header__cell--right .sv-header__cell-content {\n  left: 100%;\n  transform: translateX(-100%);\n}\n\n.sv-header__content--static {\n  max-width: calc(90 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.sv-header__background-image {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  border: 0;\n  background-position-x: center;\n}\n\n.sv-header__background-image--contain {\n  background-repeat: no-repeat;\n}\n\n.sv-header__cell {\n  position: relative;\n}\n\n.sv-header__cell-content {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  width: max-content;\n  max-width: 300%;\n  top: 0;\n  bottom: 0;\n}\n\n.sv-header__cell--left .sv-header__cell-content {\n  left: 0;\n}\n\n.sv-header__cell--center .sv-header__cell-content {\n  min-width: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.sv-header__cell--right .sv-header__cell-content {\n  right: 0;\n}\n\n.sv-header__logo {\n  display: flex;\n}\n\n.sv-header__logo img {\n  display: block;\n}\n\n.sv-header__title {\n  display: flex;\n}\n\n.sv-header__title .sd-title {\n  --header-title-font-size: var(--sjs-font-headertitle-size, calc(2 * (var(--sjs-font-size, 16px))));\n  font-size: var(--header-title-font-size);\n  line-height: calc(1.25 * (var(--header-title-font-size)));\n  color: var(--sjs-font-headertitle-color, var(--sjs-font-pagetitle-color, var(--sjs-general-dim-forecolor, rgba(0, 0, 0, 0.91))));\n  font-family: var(--sjs-font-headertitle-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-headertitle-weight, 700);\n  margin: 0;\n}\n\n.sv-header__logo ~ .sv-header__title {\n  margin-top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-header__logo ~ .sv-header__description {\n  margin-top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sv-header__title ~ .sv-header__description {\n  margin-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sv-header__description {\n  display: flex;\n}\n\n.sv-header__description .sd-description {\n  --header-description-font-size: var(--sjs-font-headerdescription-size, 20px);\n  font-size: var(--header-description-font-size);\n  line-height: calc(1.5 * (var(--header-description-font-size)));\n  color: var(--sjs-font-headerdescription-color, var(--sjs-font-pagedescription-color, var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45))));\n  font-family: var(--sjs-font-headerdescription-family, var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family))));\n  font-weight: var(--sjs-font-headerdescription-weight, 400);\n  margin: 0;\n}\n\n.sv-header__background-color--accent .sv-header__title .sd-title {\n  color: var(--sjs-font-headertitle-color, var(--sjs-primary-forecolor, var(--primary-foreground, #fff)));\n}\n\n.sv-header__background-color--accent .sv-header__description .sd-description {\n  color: var(--sjs-font-headerdescription-color, var(--sjs-primary-forecolor, var(--primary-foreground, #fff)));\n}\n\n.sv-header__content .sd-header__text h3 {\n  margin: 0;\n}\n\n.sv-header--mobile {\n  padding: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  position: relative;\n  z-index: 1;\n}\n\n.sv-header--mobile .sv-header__logo img {\n  max-width: 100%;\n}\n\n@keyframes rotationAnimation {\n  from {\n    rotate: 0deg;\n  }\n  to {\n    rotate: 360deg;\n  }\n}\n.sd-loading-indicator {\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-loading-indicator .sv-svg-icon {\n  height: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  width: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  animation-name: rotationAnimation;\n  animation-timing-function: linear;\n  animation-iteration-count: infinite;\n  animation-duration: 1s;\n}\n\n.sd-loading-indicator .sv-svg-icon use {\n  fill: var(--lbr-placeholder-loading-circle-color-spin, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\nsv-components-container, .sd-components-container {\n  display: flex;\n}\n\n.sv-components-row {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n}\n\n.sv-components-column {\n  display: flex;\n  flex-direction: column;\n}\n\n.sv-components-column--expandable {\n  flex-grow: 1;\n}\n\n.sv-components-row > .sv-components-column--expandable {\n  width: 1px;\n}\n\n.sd-breadcrumbs {\n  display: flex;\n  align-items: center;\n  align-content: center;\n  gap: var(--lbr-breadcrumbs-gap, var(--sjs-base-unit, var(--base-unit, 8px)));\n  align-self: stretch;\n  flex-wrap: wrap;\n  padding-bottom: var(--lbr-page-header-breadcrumbs-margin-bottom, 20px);\n}\n\n.sd-breadcrumbs-item {\n  color: var(--lbr-breadcrumbs-item-text-color, var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45)));\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n}\n\n.sd-breadcrumbs-item__button {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  display: flex;\n  padding: 0;\n  box-sizing: border-box;\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n  cursor: pointer;\n  color: unset;\n  font-size: unset;\n  font-family: unset;\n  overflow-x: hidden;\n  white-space: nowrap;\n}\n\n.sd-breadcrumbs-separator {\n  display: flex;\n  width: var(--lbr-breadcrumbs-item-separator-icon-width, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  height: var(--lbr-breadcrumbs-item-separator-icon-height, calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  justify-content: center;\n  align-items: center;\n}\n\n.sd-breadcrumbs-separator use {\n  fill: var(--lbr-breadcrumbs-item-separator-color, var(--sjs-general-dim-forecolor-light, rgba(0, 0, 0, 0.45)));\n}\n\n.sd-summary {\n  border-radius: var(--lbr-data-table-corner-radius, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  background: var(--lbr-data-table-background-color, var(--sjs-general-backcolor, var(--background, #fff)));\n  box-shadow: var(--lbr-data-table-shadow-offset-x, 0px) var(--lbr-data-table-shadow-offset-y, 1px) var(--lbr-data-table-shadow-blur, 2px) var(--lbr-data-table-shadow-spread, 0px) var(--lbr-data-table-shadow-color, rgba(0, 0, 0, 0.15));\n  overflow: hidden;\n}\n\n.sd-summary-row {\n  display: flex;\n  padding: var(--lbr-data-table-row-padding-top, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-data-table-row-padding-right, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))))) var(--lbr-data-table-row-padding-bottom, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-data-table-row-padding-left, calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  align-items: flex-start;\n  gap: var(--lbr-data-table-row-gap, calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  flex: 1 0 0;\n  align-self: stretch;\n  border-bottom: var(--lbr-data-table-row-border-width-bottom, 1px) solid var(--lbr-data-table-row-border-color, var(--sjs-border-light, var(--border-light, #eaeaea)));\n  background: var(--lbr-data-table-row-background-color, var(--sjs-general-backcolor, var(--background, #fff)));\n}\n\n.sd-summary-row__content {\n  display: flex;\n  padding: var(--lbr-data-table-row-text-margin-top, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))))) 0px var(--lbr-data-table-row-text-margin-bottom, calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))))) 0px;\n  align-items: flex-start;\n  gap: var(--lbr-data-table-row-gap, calc(4 * (var(--sjs-base-unit, var(--base-unit, 8px)))));\n  flex: 1 0 0;\n  color: var(--lbr-data-table-row-text-color-title, var(--sjs-general-forecolor, var(--foreground, #161616)));\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  font-style: normal;\n  font-size: var(--sjs-font-size, 16px);\n  line-height: calc(1.5 * (var(--sjs-font-size, 16px)));\n}\n\n.sd-summary-row__actions {\n  display: flex;\n  align-items: flex-start;\n  gap: var(--lbr-data-table-actions-gap, var(--sjs-base-unit, var(--base-unit, 8px)));\n  opacity: 0;\n  transition: opacity var(--sjs-transition-duration, 150ms);\n}\n\n.sd-summary-row:hover .sd-summary-row__actions, .sd-question--mobile .sd-summary-row__actions {\n  opacity: 1;\n}\n\n.sd-summary-row-action {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  display: flex;\n  padding: 0;\n  box-sizing: border-box;\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n  cursor: pointer;\n  color: unset;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  overflow-x: hidden;\n  white-space: nowrap;\n  display: flex;\n  padding: var(--lbr-action-button-padding-top, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-action-button-padding-right-icon-only, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-action-button-padding-bottom, var(--sjs-base-unit, var(--base-unit, 8px))) var(--lbr-action-button-padding-left-icon-only, var(--sjs-base-unit, var(--base-unit, 8px)));\n  justify-content: center;\n  align-items: center;\n  gap: var(--lbr-action-button-gap, var(--sjs-base-unit, var(--base-unit, 8px)));\n  border-radius: var(--lbr-action-button-corner-radius, 1024px);\n  transition: background-color var(--sjs-transition-duration, 150ms);\n}\n\n.sd-summary-row-action:hover, .sd-summary-row-action:focus {\n  outline: none;\n  background-color: var(--lbr-action-button-background-color-hovered-positive, var(--sjs-primary-backcolor-light, var(--primary-light, rgba(25, 179, 148, 0.1))));\n}\n\n.sd-summary-row-action:active, .sd-summary-row-action.svc-toolbar__item--pressed {\n  opacity: 0.5;\n}\n\n.sd-summary-row-action.svc-toolbar__item--active {\n  outline: none;\n}\n\n.sd-summary-row-action:disabled {\n  opacity: 0.25;\n  cursor: default;\n}\n\n.sd-summary-row-action .sv-svg-icon {\n  width: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  height: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-summary-row-action--edit use {\n  fill: var(--lbr-action-button-icon-color-positive, var(--sjs-primary-backcolor, var(--primary, #19b394)));\n}\n\n.sd-summary-row-action--delete:hover, .sd-summary-row-action--delete:focus {\n  outline: none;\n  background-color: var(--lbr-action-button-background-color-hovered-negative, var(--sjs-special-red-light, var(--red-light, rgba(230, 10, 62, 0.1))));\n}\n\n.sd-summary-row-action--delete use {\n  fill: var(--lbr-action-button-icon-color-negative, var(--sjs-special-red, var(--red, #e60a3e)));\n}\n\n.sd-root-modern, .sd-container-modern {\n  --sd-base-padding: calc(5 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  --sd-base-vertical-padding: calc(4 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  --sd-page-vertical-padding: calc(3 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-root-modern.sd-root-modern--mobile, .sd-root-modern--mobile .sd-container-modern {\n  --sd-base-padding: calc(3 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  --sd-base-vertical-padding: calc(2 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  --sd-page-vertical-padding: calc(2 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-root-modern.sd-root-modern--mobile .sd-element__num {\n  float: none;\n  margin-inline-start: 0;\n  width: auto;\n  padding-inline-start: 0;\n  padding-inline-end: 0;\n}\n\n.sd-root-modern.sd-root-modern--mobile .sd-element__num + span {\n  float: none;\n  width: auto;\n}\n\n.sd-root-modern.sd-root-modern--mobile .sd-element__title-expandable-svg {\n  inset-inline-start: calc(-2.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.sd-root-modern.sd-root-modern--mobile .sd-title.sd-container-modern__title {\n  flex-direction: column;\n}\n\n.sd-root-modern.sd-root-modern--mobile .sd-header__text {\n  min-width: 100%;\n}\n\n.sd-multipletext--mobile .sd-multipletext__cell {\n  display: block;\n}\n\n.sd-multipletext--mobile .sd-multipletext__cell:not(:first-of-type) {\n  padding-left: 0;\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-multipletext--mobile .sd-multipletext__cell :not(:last-of-type) {\n  padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-multipletext--mobile .sd-multipletext__item-container {\n  padding-top: var(--sjs-base-unit, var(--base-unit, 8px));\n  padding-bottom: var(--sjs-base-unit, var(--base-unit, 8px));\n}\n\n.sd-multipletext--mobile .sd-multipletext__item-title {\n  max-width: none;\n  border-right: none;\n  width: 100%;\n  padding: var(--sjs-base-unit, var(--base-unit, 8px)) 0;\n  margin: 0;\n}\n\n.sd-multipletext--mobile .sd-multipletext__item {\n  flex-basis: 0;\n  min-width: 0;\n}\n\n.sd-multipletext--mobile .sd-multipletext__item .sd-input {\n  padding: 0;\n  margin: 0;\n}\n\n.sd-multipletext--mobile .sd-multipletext__item-container--answered, .sd-multipletext--mobile .sd-multipletext__item-container--allow-focus:focus-within {\n  flex-direction: column;\n}\n\n.sd-multipletext--mobile .sd-multipletext__item-container--answered .sd-multipletext__item-title, .sd-multipletext--mobile .sd-multipletext__item-container--allow-focus:focus-within .sd-multipletext__item-title {\n  padding: 0;\n}\n\n.sd-multipletext--mobile .sd-multipletext__item-container--answered .sd-multipletext__item-title span, .sd-multipletext--mobile .sd-multipletext__item-container--allow-focus:focus-within .sd-multipletext__item-title span {\n  font-size: calc(0.75 * (var(--sjs-font-size, 16px)));\n  line-height: var(--sjs-font-size, 16px);\n}\n\n.sd-multipletext--mobile .sd-multipletext__item-container--answered .sd-multipletext__item, .sd-multipletext--mobile .sd-multipletext__item-container--allow-focus:focus-within .sd-multipletext__item {\n  flex-basis: auto;\n  min-width: auto;\n  width: 100%;\n}\n\n.sd-multipletext--mobile .sd-multipletext__item-container--answered .sd-multipletext__item .sd-input, .sd-multipletext--mobile .sd-multipletext__item-container--allow-focus:focus-within .sd-multipletext__item .sd-input {\n  width: 100%;\n}\n\n.sd-selectbase--mobile .sd-selectbase--multi-column {\n  flex-direction: column;\n}\n\n.sd-selectbase--mobile .sd-selectbase--multi-column .sd-selectbase__column:not(:last-child) {\n  padding-right: 0;\n}\n\nbody {\n  --sv-defaultV2-mark: true;\n}\n\n.sd-root-modern {\n  -webkit-font-smoothing: antialiased;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  --sd-mobile-width: 600px;\n  --sd-timer-size: calc(18 * var(--sjs-base-unit, var(--base-unit, 8px)));\n  width: 100%;\n  font-family: var(--sjs-font-family, var(--font-family, var(--sjs-default-font-family)));\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  position: relative;\n}\n\n@-moz-document url-prefix() {\n  .sd-root-modern, .sd-root-modern * {\n    scrollbar-width: thin;\n    scrollbar-color: var(--sjs-border-default, var(--border, #d6d6d6)) rgba(0, 0, 0, 0);\n  }\n}\n.sd-root-modern::-webkit-scrollbar, .sd-root-modern *::-webkit-scrollbar {\n  width: 12px;\n  height: 12px;\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sd-root-modern::-webkit-scrollbar-thumb, .sd-root-modern *::-webkit-scrollbar-thumb {\n  border: 4px solid rgba(0, 0, 0, 0);\n  background-clip: padding-box;\n  border-radius: 32px;\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-root-modern::-webkit-scrollbar-track, .sd-root-modern *::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sd-root-modern::-webkit-scrollbar-thumb:hover, .sd-root-modern *::-webkit-scrollbar-thumb:hover {\n  border: 2px solid rgba(0, 0, 0, 0);\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sd-root-modern form {\n  position: relative;\n}\n\n.sd-root-modern--animation-disabled * {\n  -webkit-transition: none !important;\n  -moz-transition: none !important;\n  -o-transition: none !important;\n  transition: none !important;\n}\n\n.sd-root-modern.sd-root-modern--full-container {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n}\n\n.sd-root-modern--mobile {\n  --sd-timer-size: calc(9 * var(--sjs-base-unit, var(--base-unit, 8px)));\n}\n\n.sd-root-modern__wrapper {\n  position: relative;\n}\n\n.sd-root-modern__wrapper--has-image {\n  min-height: 100%;\n}\n\n.sd-root-modern--full-container .sd-root-modern__wrapper--fixed {\n  position: static;\n  width: 100%;\n  height: 100%;\n}\n\n.sd-root-modern--full-container .sd-root-modern__wrapper--fixed form {\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n}\n\n.sv-popup .sv-popup__scrolling-content {\n  box-sizing: content-box;\n}\n\n@-moz-document url-prefix() {\n  .sv-popup .sv-popup__scrolling-content, .sv-popup .sv-popup__scrolling-content * {\n    scrollbar-width: thin;\n    scrollbar-color: var(--sjs-border-default, var(--border, #d6d6d6)) rgba(0, 0, 0, 0);\n  }\n}\n.sv-popup .sv-popup__scrolling-content::-webkit-scrollbar, .sv-popup .sv-popup__scrolling-content *::-webkit-scrollbar {\n  width: 12px;\n  height: 12px;\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.sv-popup .sv-popup__scrolling-content::-webkit-scrollbar-thumb, .sv-popup .sv-popup__scrolling-content *::-webkit-scrollbar-thumb {\n  border: 4px solid rgba(0, 0, 0, 0);\n  background-clip: padding-box;\n  border-radius: 32px;\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sv-popup .sv-popup__scrolling-content::-webkit-scrollbar-track, .sv-popup .sv-popup__scrolling-content *::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0);\n}\n\n.sv-popup .sv-popup__scrolling-content::-webkit-scrollbar-thumb:hover, .sv-popup .sv-popup__scrolling-content *::-webkit-scrollbar-thumb:hover {\n  border: 2px solid rgba(0, 0, 0, 0);\n  background-color: var(--sjs-border-default, var(--border, #d6d6d6));\n}\n\n.sv-components-container-center {\n  position: sticky;\n  top: 0;\n}\n\n.sv-root--sticky-top .sv-components-container-center {\n  z-index: 15;\n}\n\n.sv-root--sticky-top.sd-progress--pages .sv-components-container-center, .sv-root--sticky-top.sd-progress--buttons .sv-components-container-center {\n  background-color: var(--sjs-general-backcolor-dim, var(--background-dim, #f3f3f3));\n  box-shadow: var(--sjs-shadow-medium, 0px 2px 6px 0px rgba(0, 0, 0, 0.1)), var(--sjs-shadow-small, 0px 1px 2px 0px rgba(0, 0, 0, 0.15));\n}\n\n.sv-components-container-right, .sv-components-container-left {\n  width: fit-content;\n}\n\ndiv#sv-nav-complete.sv-action, div#sv-nav-next.sv-action {\n  margin-left: auto !important;\n}\n\ninput[type=text] {\n  width: auto;\n}\n\n.jspsych-question-content {\n  display: inline-block;\n  width: 100%;\n}\n\n.jspsych-question-root {\n  overflow: scroll;\n}\n\n.jspsych-body-container {\n  text-align: left;\n  align-items: center;\n}\n\n.jspsych-body {\n  width: auto;\n  max-width: 80%;\n  margin-left: auto;\n  margin-right: auto;\n  padding-top: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n  padding-bottom: calc(10 * (var(--sjs-base-unit, var(--base-unit, 8px))));\n}\n\n.jspsych-page {\n  padding: 0;\n  min-width: 400px;\n}\n\n.jspsych-footer {\n  padding: calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px)))) 0;\n}\n\n.jspsych-nav-complete {\n  background: var(--sjs-questionpanel-backcolor, var(--sjs-question-background, var(--sjs-general-backcolor, var(--background, #fff))));\n  color: var(--sjs-primary-backcolor, var(--primary, #19b394));\n  display: block;\n}\n\ndiv#sv-nav-complete.sv-action.sv-action--hidden {\n  display: none;\n}\n\n.jspsych-row-multiple > div {\n  min-width: unset !important;\n}\n`,""]);const c=d},4774:(e,t,s)=>{s.d(t,{A:()=>Xu});class n{static isAvailable(){return"undefined"!=typeof window}static isFileReaderAvailable(){return!!n.isAvailable()&&!!window.FileReader}static getLocation(){if(n.isAvailable())return window.location}static getVisualViewport(){return n.isAvailable()?window.visualViewport:null}static getInnerWidth(){if(n.isAvailable())return window.innerWidth}static getInnerHeight(){return n.isAvailable()?window.innerHeight:null}static getDevicePixelRatio(){return n.isAvailable()?window.devicePixelRatio:null}static getWindow(){if(n.isAvailable())return window}static hasOwn(e){if(n.isAvailable())return e in window}static getSelection(){if(n.isAvailable()&&window.getSelection)return window.getSelection()}static requestAnimationFrame(e){if(n.isAvailable())return window.requestAnimationFrame(e)}static addEventListener(e,t){n.isAvailable()&&window.addEventListener(e,t)}static removeEventListener(e,t){n.isAvailable()&&window.removeEventListener(e,t)}static matchMedia(e){return n.isAvailable()&&void 0!==window.matchMedia?window.matchMedia(e):null}}class i{static isAvailable(){return"undefined"!=typeof document}static getBody(){if(i.isAvailable())return document.body}static getDocumentElement(){if(i.isAvailable())return document.documentElement}static getDocument(){if(i.isAvailable())return document}static getCookie(){if(i.isAvailable())return document.cookie}static setCookie(e){i.isAvailable()&&(document.cookie=e)}static activeElementBlur(){if(!i.isAvailable())return;const e=document.activeElement;e&&e.blur&&e.blur()}static createElement(e){if(i.isAvailable())return document.createElement(e)}static getComputedStyle(e){return i.isAvailable()?document.defaultView.getComputedStyle(e):new CSSStyleDeclaration}static addEventListener(e,t){i.isAvailable()&&document.addEventListener(e,t)}static removeEventListener(e,t){i.isAvailable()&&document.removeEventListener(e,t)}}function r(e,t){if(!t)return new Date;var s;xt.storeUtcDates||"string"!=typeof t||(s=t).indexOf("T")>0||!/\d{4}-\d{2}-\d{2}/.test(s)||isNaN(new Date(s).getTime())||(t+="T00:00:00");const n=new Date(t);return xt.onDateCreated(n,e,t)}class a{static isValueEmpty(e){if(Array.isArray(e)&&0===e.length)return!0;if(e&&a.isValueObject(e)&&e.constructor===Object){for(var t in e)if(!a.isValueEmpty(e[t]))return!1;return!0}return!e&&0!==e&&!1!==e}static isValueUndefined(e){return null==e||"number"==typeof e&&isNaN(e)}static isArrayContainsEqual(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++){for(var n=0;n<t.length&&!a.isTwoValueEquals(e[s],t[n]);n++);if(n===t.length)return!1}return!0}static checkIfArraysEqual(e,t,s){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;if(void 0!==s.ignoreOrder&&s.ignoreOrder){for(var n=[],i=[],r=0;r<e.length;r++)n.push(e[r]),i.push(t[r]);n.sort(),i.sort(),e=n,t=i}for(r=0;r<e.length;r++)if(!a.checkIfValuesEqual(e[r],t[r],s))return!1;return!0}static isArraysEqual(e,t,s=!1,n,i){return a.checkIfArraysEqual(e,t,{ignoreOrder:s,caseSensitive:n,trimStrings:i})}static compareStrings(e,t){const s=xt.comparator.normalizeTextCallback;if(e&&(e=s(e,"compare").trim()),t&&(t=s(t,"compare").trim()),!e&&!t)return 0;if(!e)return-1;if(!t)return 1;if(e===t)return 0;let n=-1;for(let s=0;s<e.length&&s<t.length;s++){if(this.isCharDigit(e[s])&&this.isCharDigit(t[s])){n=s;break}if(e[s]!==t[s])break}if(n>-1){let s=this.getNumberFromStr(e,n),i=this.getNumberFromStr(t,n);if(!Number.isNaN(s)&&!Number.isNaN(i)&&s!==i)return s>i?1:-1}return e>t?1:-1}static checkIfValuesEqual(e,t,s){if(e===t)return!0;if(Array.isArray(e)&&0===e.length&&void 0===t)return!0;if(Array.isArray(t)&&0===t.length&&void 0===e)return!0;if(null==e&&""===t)return!0;if(null==t&&""===e)return!0;const n=void 0!==s.caseSensitive?s.caseSensitive:xt.comparator.caseSensitive,i=void 0!==s.trimStrings?s.trimStrings:xt.comparator.trimStrings;if("string"==typeof e&&"string"==typeof t){const s=xt.comparator.normalizeTextCallback;return e=s(e,"compare"),t=s(t,"compare"),i&&(e=e.trim(),t=t.trim()),n||(e=e.toLowerCase(),t=t.toLowerCase()),e===t}if(e instanceof Date&&t instanceof Date)return e.getTime()==t.getTime();const r=!s.doNotConvertNumbers;if(r&&a.isConvertibleToNumber(e)&&a.isConvertibleToNumber(t)&&parseInt(e)===parseInt(t)&&parseFloat(e)===parseFloat(t))return!0;if(!a.isValueEmpty(e)&&a.isValueEmpty(t)||a.isValueEmpty(e)&&!a.isValueEmpty(t))return!1;if((!0===e||!1===e)&&"string"==typeof t)return e.toString()===t.toLocaleLowerCase();if((!0===t||!1===t)&&"string"==typeof e)return t.toString()===e.toLocaleLowerCase();const o=a.isValueObject(e),l=a.isValueObject(t);if(!o&&!l&&(r||"number"!=typeof e&&"number"!=typeof t))return e==t;if(!o||!l)return!1;if(e.equals&&t.equals)return e.equals(t);if(Array.isArray(e)&&Array.isArray(t))return a.checkIfArraysEqual(e,t,s);for(var u in e)if(e.hasOwnProperty(u)){if(!t.hasOwnProperty(u))return!1;if(!this.checkIfValuesEqual(e[u],t[u],s))return!1}for(u in t)if(t.hasOwnProperty(u)&&!e.hasOwnProperty(u))return!1;return!0}static isTwoValueEquals(e,t,s=!1,n,i){return this.checkIfValuesEqual(e,t,{ignoreOrder:s,caseSensitive:n,trimStrings:i})}static randomizeArray(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[s],e[s]=n}return e}static getUnbindValue(e){if(Array.isArray(e)){const t=[];for(let s=0;s<e.length;s++)t.push(a.getUnbindValue(e[s]));return t}return!e||!a.isValueObject(e)||e instanceof Date?e:JSON.parse(JSON.stringify(e))}static createCopy(e){return this.createCopyWithPrefix(e,void 0)}static createCopyWithPrefix(e,t){var s={};if(!e)return s;for(var n in e)s[t?t+n:n]=e[n];return s}static isConvertibleToNumber(e){return null!=e&&!Array.isArray(e)&&!isNaN(e)}static isValueObject(e,t){return e instanceof Object&&(!t||!Array.isArray(e))}static isNumber(e){return!isNaN(this.getNumber(e))}static getNumber(e){const t=a.getNumberCore(e);return xt.parseNumber(e,t)}static getNumberCore(e){if("string"==typeof e){if(!(e=e.trim()))return NaN;if(0==e.indexOf("0x"))return e.length>32?NaN:parseInt(e);if(e.length>15&&a.isDigitsOnly(e))return NaN;if(a.isStringHasOperator(e))return NaN}e=this.prepareStringToNumber(e);const t=parseFloat(e);return isNaN(t)||!isFinite(e)?NaN:t}static isStringHasOperator(e){if(e.lastIndexOf("-")>0)return!1;if(e.lastIndexOf("+")>0)return!1;for(let t=0;t<4;t++)if(e.indexOf("*^/%"[t])>-1)return!0;return!1}static prepareStringToNumber(e){if("string"!=typeof e||!e)return e;let t=e.indexOf(",");return t>-1&&e.indexOf(",",t+1)<0?e.replace(",","."):e}static getMaxLength(e,t){return e<0&&(e=t),e>0?e:null}static getRemainingCharacterCounterText(e,t){return!t||t<=0||!xt.showMaxLengthIndicator?"":[e?e.length:"0",t].join("/")}static getNumberByIndex(e,t,s){if(e<0)return"";var n=1,i="",r=".",o=!0,l="A",u="";const d=e=>{if(!e)return!1;for(var t=0;t<e.length;t++)if(a.isCharDigit(e[t]))return!0;return!1};if(t){for(var h=(u=t).length-1,c=d(u),p=function(){return c&&!a.isCharDigit(u[h])||a.isCharNotLetterAndDigit(u[h])};h>=0&&p();)h--;var g="";for(h<u.length-1&&(g=u.substring(h+1),u=u.substring(0,h+1)),h=u.length-1;h>=0&&!p()&&(h--,c););l=u.substring(h+1),i=u.substring(0,h+1),parseInt(l)?n=parseInt(l):1==l.length&&(o=!1),(g||i)&&(r=g)}if(s>-1&&d(i)&&(i=this.getNumberByIndex(s,i)),o){let t=(e+n).toString();for(;t.length<l.length;)t="0"+t;return i+t+r}return i+String.fromCharCode(l.charCodeAt(0)+e)+r}static isCharNotLetterAndDigit(e){return e.toUpperCase()==e.toLowerCase()&&!a.isCharDigit(e)}static isCharDigit(e){return e>="0"&&e<="9"}static isDigitsOnly(e){if(!e)return!1;for(let t=0;t<e.length;t++)if(!a.isCharDigit(e[t]))return!1;return!0}static getNumberFromStr(e,t){if(!this.isCharDigit(e[t]))return NaN;let s="";for(;t<e.length&&this.isCharDigit(e[t]);)s+=e[t],t++;return s?this.getNumber(s):NaN}static countDecimals(e){if(a.isNumber(e)&&Math.floor(e)!==e){const t=e.toString().split(".");return t.length>1&&t[1].length||0}return 0}static correctAfterPlusMinis(e,t,s){const n=a.countDecimals(e),i=a.countDecimals(t);if(n>0||i>0){const e=Math.max(n,i);s=parseFloat(s.toFixed(e))}return s}static sumAnyValues(e,t){if(!a.isNumber(e)||!a.isNumber(t)){if(Array.isArray(e)&&Array.isArray(t))return[].concat(e).concat(t);if(Array.isArray(e)||Array.isArray(t)){const n=Array.isArray(e)?e:t,i=n===e?t:e;if("string"==typeof i){const t=n.join(", ");return n===e?t+i:i+t}if("number"==typeof i){let e=0;for(var s=0;s<n.length;s++)"number"==typeof n[s]&&(e=a.correctAfterPlusMinis(e,n[s],e+n[s]));return a.correctAfterPlusMinis(e,i,e+i)}}return e+t}return"string"==typeof e||"string"==typeof t?e+t:a.correctAfterPlusMinis(e,t,e+t)}static correctAfterMultiple(e,t,s){const n=a.countDecimals(e)+a.countDecimals(t);return n>0&&(s=parseFloat(s.toFixed(n))),s}static findObjByPropValue(e,t,s){for(var n=0;n<e.length;n++)if(a.isTwoValueEquals(e[n][t],s))return e[n]}static convertArrayObjectToValue(e,t){const s=new Array;if(!e||!Array.isArray(e))return s;for(var n=0;n<e.length;n++){const i=e[n]?e[n][t]:void 0;a.isValueEmpty(i)||s.push(i)}return s}static convertDateToString(e){const t=e=>e<10?"0"+e.toString():e.toString();return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())}static convertDateTimeToString(e){const t=e=>e<10?"0"+e.toString():e.toString();return this.convertDateToString(e)+" "+t(e.getHours())+":"+t(e.getMinutes())}static convertValToQuestionVal(e,t){return e instanceof Date?"datetime-local"===t?a.convertDateTimeToString(e):a.convertDateToString(e):this.getUnbindValue(e)}static compareVerions(e,t){if(!e&&!t)return 0;const s=e.split("."),n=t.split("."),i=s.length,r=n.length;for(let e=0;e<i&&e<r;e++){const t=s[e],i=n[e];if(t.length!==i.length)return t.length<i.length?-1:1;if(t!==i)return t<i?-1:1}return i===r?0:i<r?-1:1}static isUrlYoutubeVideo(e){if(!e)return!1;const t=["www.youtube.com","m.youtube.com","youtube.com","youtu.be"];e=(e=e.toLowerCase()).replace(/^https?:\/\//,"");for(let s=0;s<t.length;s++)if(0===e.indexOf(t[s]+"/"))return!0;return!1}}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,s){return void 0!==e[s]?e[s]:t})});var o={currentLocaleValue:"",defaultLocaleValue:"en",locales:{},localeNames:{},localeNamesInEnglish:{},localeDirections:{},supportedLocales:[],useEnglishNames:!1,get showNamesInEnglish(){return this.useEnglishNames},set showNamesInEnglish(e){this.useEnglishNames=e},setupLocale(e){const t=e.localeCode;this.locales[t]=e.strings,this.localeNames[t]=e.nativeName,this.localeNamesInEnglish[t]=e.englishName,void 0!==e.rtl&&(this.localeDirections[t]=e.rtl?"rtl":"ltr")},get currentLocale(){return this.currentLocaleValue===this.defaultLocaleValue?"":this.currentLocaleValue},set currentLocale(e){this.currentLocaleValue=this.getCorrectLocaleName(e)},get defaultLocale(){return this.defaultLocaleValue},set defaultLocale(e){this.defaultLocaleValue=this.getCorrectLocaleName(e)},getCorrectLocaleName:e=>("cz"===e&&(e="cs"),"gr"===e&&(e="el"),"rs"===e&&(e="sr"),"ua"===e&&(e="uk"),e),getLocaleStrings(e){return this.locales[e]},getString:function(e,t=null){const s=new Array,n=e=>{const t=this.locales[e];t&&s.push(t)},i=e=>{if(!e)return;n(e);const t=e.indexOf("-");t<1||(e=e.substring(0,t),n(e))};i(t),i(this.currentLocale),i(this.defaultLocale),"en"!==this.defaultLocale&&n("en");for(let t=0;t<s.length;t++){const n=s[t][e];if(void 0!==n)return n}return this.onGetExternalString(e,t)},getLocaleName(e,t){if(!e)return"";void 0===t&&(t=this.showNamesInEnglish);const s=t?this.localeNamesInEnglish:this.localeNames,n=t?this.localeNames:this.localeNamesInEnglish;return s[e]||n[e]||e},getLocales:function(e=!1){var t=[];t.push("");var s=this.locales;if(this.supportedLocales&&this.supportedLocales.length>0){s={};for(var n=0;n<this.supportedLocales.length;n++)s[this.supportedLocales[n]]=!0}for(var i in s)e&&i==this.defaultLocale||t.push(i);var r=e=>this.getLocaleName(e).toLowerCase();return t.sort((e,t)=>{var s=r(e),n=r(t);return s===n?0:s<n?-1:1}),t},onGetExternalString:function(e,t){}};function l(e,t=null){return o.getString(e,t)}function u(e,t,s){let n=e.getLocalizableString(s);if(!n){let i;"object"==typeof t.localizable&&t.localizable.defaultStr&&(i=t.localizable.defaultStr),n=e.createLocalizableString(s,e,!0,i),"object"==typeof t.localizable&&"function"==typeof t.localizable.onGetTextCallback&&(n.onGetTextCallback=t.localizable.onGetTextCallback)}}function d(e={}){return function(t,s){let n=(e,t)=>{if(t&&"object"==typeof t&&t.type===de.ComputedUpdaterType){he.startCollectDependencies(()=>e[s]=t.updater(),e,s);const n=t.updater(),i=he.finishCollectDependencies();return t.setDependencies(i),e.dependencies[s]&&e.dependencies[s].dispose(),e.dependencies[s]=t,n}return t};e&&e.localizable?(Object.defineProperty(t,s,{get:function(){return function(e,t,s){u(e,t,s);let n=e.getLocalizableStringText(s);if(n)return n;if("object"==typeof t.localizable&&t.localizable.defaultStr){const s=e.getLocale?e.getLocale():"";return l(t.localizable.defaultStr,s)}return""}(this,e,s)},set:function(t){u(this,e,s);const i=n(this,t);this.setLocalizableStringText(s,i),e&&e.onSet&&e.onSet(i,this)}}),Object.defineProperty(t,"object"==typeof e.localizable&&e.localizable.name?e.localizable.name:"loc"+s.charAt(0).toUpperCase()+s.slice(1),{get:function(){return u(this,e,s),this.getLocalizableString(s)}})):Object.defineProperty(t,s,{get:function(){let t=null;return e&&("function"==typeof e.getDefaultValue&&(t=e.getDefaultValue(this)),void 0!==e.defaultValue&&(t=e.defaultValue)),this.getPropertyValue(s,t)},set:function(t){const i=n(this,t),r=this.getPropertyValue(s);i!==r&&(this.setPropertyValue(s,i),e&&e.onSet&&e.onSet(i,this,r))}})}}function h(e,t,s){e.ensureArray(s,(s,n)=>{const i=t?t.onPush:null;i&&i(s,n,e)},(s,n)=>{const i=t?t.onRemove:null;i&&i(s,n,e)})}function c(e){return function(t,s){Object.defineProperty(t,s,{get:function(){return h(this,e,s),this.getPropertyValue(s)},set:function(t){h(this,e,s);const n=this.getPropertyValue(s);t!==n&&(n?n.splice(0,n.length,...t||[]):this.setPropertyValue(s,t),e&&e.onSet&&e.onSet(t,this))}})}}o.locales.en={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",previewText:"Preview",editText:"Edit",startSurveyText:"Start",commentText:"Please leave a comment",otherItemText:"Other (describe)",noneItemText:"None",refuseItemText:"Refuse to answer",dontKnowItemText:"Don't know",selectAllItemText:"Select All",deselectAllItemText:"Deselect all",progressText:"Page {0} of {1}",indexText:"{0} of {1}",panelDynamicProgressText:"{0} of {1}",panelDynamicTabTextFormat:"Panel {panelIndex}",questionsProgressText:"Answered {0}/{1} questions",emptySurvey:"The survey doesn't contain any visible elements.",completingSurvey:"Thank you for completing the survey",completingSurveyBefore:"You have already completed this survey.",loadingSurvey:"Loading Survey...",placeholder:"Select...",ratingOptionsCaption:"Select...",buttongroupOptionsCaption:"Select...",value:"value",requiredError:"Response required.",requiredErrorInPanel:"Response required: answer at least one question.",requiredInAllRowsError:"Response required: answer questions in all rows.",eachRowUniqueError:"Each row must have a unique value.",numericError:"The value should be numeric.",minError:"The value should not be less than {0}",stepError:"Please enter a value that matches the step size of {0}.",maxError:"The value should not be greater than {0}",textNoDigitsAllow:"Numbers are not allowed.",textMinLength:"Please enter at least {0} character(s).",textMaxLength:"Please enter no more than {0} character(s).",textMinMaxLength:"Please enter at least {0} and no more than {1} characters.",minRowCountError:"Please fill in at least {0} row(s).",minSelectError:"Please select at least {0} option(s).",maxSelectError:"Please select no more than {0} option(s).",numericMinMax:"The '{0}' should be at least {1} and at most {2}",numericMin:"The '{0}' should be at least {1}",numericMax:"The '{0}' should be at most {1}",invalidEmail:"Please enter a valid e-mail address.",invalidExpression:"The expression: {0} should return 'true'.",urlRequestError:"The request returned error '{0}'. {1}",urlGetChoicesError:"The request returned empty data or the 'path' property is incorrect",exceedMaxSize:"The file size should not exceed {0}.",noUploadFilesHandler:"Files cannot be uploaded. Please add a handler for the 'onUploadFiles' event.",otherRequiredError:"Response required: enter another value.",uploadingFile:"Your file is uploading. Please wait several seconds and try again.",loadingFile:"Loading...",chooseFile:"Choose file(s)...",noFileChosen:"No file selected",filePlaceholder:"Drag and drop a file here or click the button below to select a file to upload.",confirmDelete:"Are you sure you want to delete this record?",keyDuplicationError:"This value should be unique.",addColumn:"Add Column",addRow:"Add Row",removeRow:"Remove",noRowsText:"There are no rows.",rowIndexTemplateTitle:"Row {rowIndex}",rowNameTemplateTitle:"{rowTitle}",addPanel:"Add new",removePanel:"Remove",showDetails:"Show Details",hideDetails:"Hide Details",choices_Item:"item",choices_Choice:"Choice option",matrix_column:"Column",matrix_row:"Row",multipletext_itemname:"text",savingData:"The results are being saved on the server...",savingDataError:"An error occurred and we could not save the results.",savingDataSuccess:"The results were saved successfully!",savingExceedSize:"Your response exceeds 64KB. Please reduce the size of your file(s) and try again or contact the survey owner.",saveAgainButton:"Try again",timerMin:"min",timerSec:"sec",timerSpentAll:"You have spent {0} on this page and {1} in total.",timerSpentPage:"You have spent {0} on this page.",timerSpentSurvey:"You have spent {0} in total.",timerLimitAll:"You have spent {0} of {1} on this page and {2} of {3} in total.",timerLimitPage:"You have spent {0} of {1} on this page.",timerLimitSurvey:"You have spent {0} of {1} in total.",clearCaption:"Clear",selectCaption:"Select",signaturePlaceHolder:"Sign here",signaturePlaceHolderReadOnly:"No signature",chooseFileCaption:"Select File",takePhotoCaption:"Take Photo",photoPlaceholder:"Click the button below to take a photo using the camera.",fileOrPhotoPlaceholder:"Drag and drop or select a file to upload or take a photo using the camera.",replaceFileCaption:"Replace file",removeFileCaption:"Remove this file",booleanCheckedLabel:"Yes",booleanUncheckedLabel:"No",confirmRemoveFile:"Are you sure that you want to remove this file: {0}?",confirmRemoveAllFiles:"Are you sure that you want to remove all files?",questionTitlePatternText:"Question Title",modalCancelButtonText:"Cancel",modalApplyButtonText:"Apply",filterStringPlaceholder:"Type to search...",emptyMessage:"No data to display",loadingPage:"Loading...",loadingData:"Loading...",noEntriesText:"No entries yet.\nClick the button below to add a new entry.",noEntriesReadonlyText:"No entries",tabTitlePlaceholder:"New Panel",more:"More",tagboxDoneButtonCaption:"OK",selectToRankEmptyRankedAreaText:"All choices are selected for ranking",selectToRankEmptyUnrankedAreaText:"Drag choices here to rank them",ok:"OK",cancel:"Cancel",createCustomItem:'Create "{0}" item...',toc:"Table of contents",progressbar:"Progress bar"},o.localeNames.en="english";class p{constructor(e,t,s=!1){this.name=t,this.isRequiredValue=!1,this.isUniqueValue=!1,this.isSerializable=!0,this.isLightSerializable=!0,this.isCustom=!1,this.isDynamicChoices=!1,this.isBindable=!1,this.category="",this.categoryIndex=-1,this.visibleIndex=-1,this.maxLength=-1,this.isArray=!1,this.classInfoValue=e,this.isRequiredValue=s,this.idValue=p.Index++}get id(){return this.idValue}get classInfo(){return this.classInfoValue}get type(){return this.typeValue?this.typeValue:"string"}set type(e){"itemvalues"===e&&(e="itemvalue[]"),"textitems"===e&&(e="textitem[]"),this.typeValue=e,this.typeValue.indexOf("[]")===this.typeValue.length-2&&(this.isArray=!0,this.className=this.typeValue.substring(0,this.typeValue.length-2))}get locationInTable(){return this.locationInTableValue||"column"}set locationInTable(e){this.locationInTableValue=e}get showMode(){const e=this.locationInTableValue;return"detail"===e?"form":"column"===e?"list":""}set showMode(e){this.locationInTable="form"===e?"detail":"list"===e?"column":void 0}get isRequired(){return this.isRequiredValue}set isRequired(e){e!==this.isRequired&&(this.isRequiredValue=e,this.classInfo&&this.classInfo.resetAllProperties())}get isUnique(){return this.isUniqueValue}set isUnique(e){this.isUniqueValue=e}get uniquePropertyName(){return this.uniquePropertyValue}set uniquePropertyName(e){this.uniquePropertyValue=e}isPropertySerializable(e){return this.isSerializableFunc?this.isSerializableFunc(e):this.isSerializable}getDefaultValue(e){let t=this.defaultValueFunc?this.defaultValueFunc(e):this.defaultValueValue;return p.getItemValuesDefaultValue&&I.isDescendantOf(this.className,"itemvalue")&&(t=p.getItemValuesDefaultValue(this.defaultValueValue||[],this.className)),t}get defaultValue(){return this.getDefaultValue(void 0)}set defaultValue(e){this.defaultValueValue=e,void 0!==e&&(this.defaultValueFunc=void 0)}isDefaultValue(e){return this.isDefaultValueByObj(void 0,e)}isDefaultValueByObj(e,t){if(this.isLocalizable)return null==t;const s=this.getDefaultValue(e);return void 0!==s?"object"!=typeof s?s===t:a.isTwoValueEquals(t,s,!1,!0,!1):!1===t&&("boolean"==this.type||"switch"==this.type)&&!this.defaultValueFunc||""===t||a.isValueEmpty(t)}getSerializableValue(e,t){if(this.onSerializeValue)return this.onSerializeValue(e);const s=this.getValue(e);return null==s||!t&&this.isDefaultValueByObj(e,s)?void 0:s}getValue(e){return this.onGetValue?(e=this.getOriginalObj(e),this.onGetValue(e)):this.serializationProperty&&e[this.serializationProperty]?e[this.serializationProperty].getJson():e[this.name]}getPropertyValue(e){return this.isLocalizable?e[this.serializationProperty]?e[this.serializationProperty].text:null:this.getValue(e)}get hasToUseSetValue(){return this.onSetValue||this.serializationProperty}settingValue(e,t){return!this.onSettingValue||e.isLoadingFromJson?t:this.onSettingValue(e,t)}setValue(e,t,s){this.onSetValue?(e=this.getOriginalObj(e),this.onSetValue(e,t,s)):this.serializationProperty&&e[this.serializationProperty]?e[this.serializationProperty].setJson(t,!0):(t&&"string"==typeof t&&("number"==this.type&&(t=parseInt(t)),"boolean"!=this.type&&"switch"!=this.type||(t="true"===t.toLowerCase())),e[this.name]=t)}validateValue(e){const t=this.choices;return!Array.isArray(t)||0===t.length||t.indexOf(e)>-1}getObjType(e){return this.classNamePart?e.replace(this.classNamePart,""):e}get choices(){return this.getChoices(null)}get hasChoices(){return!!this.choicesValue||!!this.choicesfunc}getChoices(e,t=null){return null!=this.choicesValue?this.choicesValue:null!=this.choicesfunc?this.choicesfunc(e,t):null}setChoices(e,t=null){this.choicesValue=e,this.choicesfunc=t}getBaseValue(){return this.baseValue?"function"==typeof this.baseValue?this.baseValue():this.baseValue:""}setBaseValue(e){this.baseValue=e}get readOnly(){return null!=this.readOnlyValue&&this.readOnlyValue}set readOnly(e){this.readOnlyValue=e}isEnable(e){return!this.readOnly&&(!e||!this.enableIf||this.enableIf(this.getOriginalObj(e)))}isVisible(e,t=null){let s=!this.layout||!e||this.layout===e;return!(!this.visible||!s)&&(!this.visibleIf||!t||this.visibleIf(this.getOriginalObj(t)))}getOriginalObj(e){if(e&&e.getOriginalObj){const t=e.getOriginalObj();if(t&&I.findProperty(t.getType(),this.name))return t}return e}get visible(){return null==this.visibleValue||this.visibleValue}set visible(e){this.visibleValue=e}isAvailableInVersion(e){return!(!this.alternativeName&&!this.oldName)||this.isAvailableInVersionCore(e)}getSerializedName(e){return this.alternativeName?this.isAvailableInVersionCore(e)?this.name:this.alternativeName||this.oldName:this.name}getSerializedProperty(e,t){return!this.oldName||this.isAvailableInVersionCore(t)?this:e&&e.getType?I.findProperty(e.getType(),this.oldName):null}isAvailableInVersionCore(e){return!e||!this.version||a.compareVerions(this.version,e)<=0}get isLocalizable(){return null!=this.isLocalizableValue&&this.isLocalizableValue}set isLocalizable(e){this.isLocalizableValue=e}get dataList(){return Array.isArray(this.dataListValue)?this.dataListValue:[]}set dataList(e){this.dataListValue=e}mergeWith(e){for(var t=p.mergableValues,s=0;s<t.length;s++)this.mergeValue(e,t[s])}addDependedProperty(e){this.dependedProperties||(this.dependedProperties=[]),this.dependedProperties.indexOf(e)<0&&this.dependedProperties.push(e)}getDependedProperties(){return this.dependedProperties?this.dependedProperties:[]}schemaType(){if("choicesByUrl"!==this.className)return"string"===this.className?this.className:this.className||this.baseClassName?"array":"switch"==this.type?"boolean":"boolean"==this.type||"number"==this.type?this.type:"string"}schemaRef(){if(this.className)return this.className}mergeValue(e,t){null==this[t]&&null!=e[t]&&(this[t]=e[t])}}p.Index=1,p.mergableValues=["typeValue","choicesValue","baseValue","readOnlyValue","visibleValue","isSerializable","isLightSerializable","isCustom","isBindable","isUnique","uniquePropertyName","isDynamicChoices","isLocalizableValue","className","alternativeName","oldName","layout","version","classNamePart","baseClassName","defaultValue","defaultValueFunc","serializationProperty","onGetValue","onSetValue","onSettingValue","displayName","category","categoryIndex","visibleIndex","nextToProperty","overridingProperty","locationInTable","dependedProperties","visibleIf","enableIf","onExecuteExpression","onPropertyEditorUpdate","maxLength","maxValue","minValue","dataListValue"];class g{static addProperty(e,t){e=e.toLowerCase();var s=g.properties;s[e]||(s[e]=[]),s[e].push(t)}static removeProperty(e,t){e=e.toLowerCase();var s=g.properties;if(s[e])for(var n=s[e],i=0;i<n.length;i++)if(n[i].name==t){s[e].splice(i,1);break}}static removeAllProperties(e){e=e.toLowerCase(),delete g.properties[e]}static addClass(e,t){e=e.toLowerCase(),t&&(t=t.toLowerCase()),g.parentClasses[e]=t}static getProperties(e){e=e.toLowerCase();for(var t=[],s=g.properties;e;){var n=s[e];if(n)for(var i=0;i<n.length;i++)t.push(n[i]);e=g.parentClasses[e]}return t}static createProperties(e){e&&e.getType&&g.createPropertiesCore(e,e.getType())}static createPropertiesCore(e,t){var s=g.properties;s[t]&&g.createPropertiesInObj(e,s[t]);var n=g.parentClasses[t];n&&g.createPropertiesCore(e,n)}static createPropertiesInObj(e,t){for(var s=0;s<t.length;s++)g.createPropertyInObj(e,t[s])}static createPropertyInObj(e,t){if(!(g.checkIsPropertyExists(e,t.name)||t.serializationProperty&&g.checkIsPropertyExists(e,t.serializationProperty))){if(t.isLocalizable&&t.serializationProperty&&e.createCustomLocalizableObj){e.createCustomLocalizableObj(t.name).defaultValue=t.getDefaultValue(e);var s={get:function(){return e.getLocalizableString(t.name)}};Object.defineProperty(e,t.serializationProperty,s);var n={get:function(){return e.getLocalizableStringText(t.name)},set:function(s){e.setLocalizableStringText(t.name,s)}};Object.defineProperty(e,t.name,n)}else{var i=t.isArray||"multiplevalues"===t.type;if("function"==typeof e.createNewArray&&(I.isDescendantOf(t.className,"itemvalue")?(e.createNewArray(t.name,function(s){s.locOwner=e,s.ownerPropertyName=t.name}),i=!0):i&&e.createNewArray(t.name),i)){const s=t.getDefaultValue(e);Array.isArray(s)&&e.setPropertyValue(t.name,s)}e.getPropertyValue&&e.setPropertyValue&&(n={get:()=>t.onGetValue?t.onGetValue(e):e.getPropertyValue(t.name,void 0),set:function(s){t.onSetValue?t.onSetValue(e,s,null):e.setPropertyValue(t.name,s)}},Object.defineProperty(e,t.name,n))}"condition"!==t.type&&"expression"!==t.type||t.onExecuteExpression&&e.addExpressionProperty(t.name,t.onExecuteExpression)}}static checkIsPropertyExists(e,t){return e.hasOwnProperty(t)||e[t]}}g.properties={},g.parentClasses={};class m{constructor(e,t,s=null,n=null){this.name=e,this.creator=s,this.parentName=n,e=e.toLowerCase(),this.isCustomValue=!s&&"survey"!==e,this.parentName&&(this.parentName=this.parentName.toLowerCase(),g.addClass(e,this.parentName),s&&this.makeParentRegularClass()),this.properties=new Array;for(var i=0;i<t.length;i++)this.createProperty(t[i],this.isCustom)}find(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].name==e)return this.properties[t];return null}findProperty(e){return this.fillAllProperties(),this.hashProperties[e]}getAllProperties(){return this.fillAllProperties(),this.allProperties}getRequiredProperties(){if(this.requiredProperties)return this.requiredProperties;this.requiredProperties=[];const e=this.getAllProperties();for(let t=0;t<e.length;t++)e[t].isRequired&&this.requiredProperties.push(e[t]);return this.requiredProperties}resetAllProperties(){this.allProperties=void 0,this.requiredProperties=void 0,this.hashProperties=void 0;for(var e=I.getChildrenClasses(this.name),t=0;t<e.length;t++)e[t].resetAllProperties()}get isCustom(){return this.isCustomValue}fillAllProperties(){if(this.allProperties)return;this.allProperties=[],this.hashProperties={};const e={};this.properties.forEach(t=>e[t.name]=t);const t=this.parentName?I.findClass(this.parentName):null;t&&t.getAllProperties().forEach(t=>{const s=e[t.name];s?(s.mergeWith(t),this.addPropCore(s)):this.addPropCore(t)}),this.properties.forEach(e=>{this.hashProperties[e.name]||this.addPropCore(e)})}addPropCore(e){this.allProperties.push(e),this.hashProperties[e.name]=e,e.alternativeName&&(this.hashProperties[e.alternativeName]=e)}isOverridedProp(e){return!!this.parentName&&!!I.findProperty(this.parentName,e)}hasRegularChildClass(){if(this.isCustom){this.isCustomValue=!1;for(var e=0;e<this.properties.length;e++)this.properties[e].isCustom=!1;g.removeAllProperties(this.name),this.makeParentRegularClass()}}makeParentRegularClass(){if(!this.parentName)return;const e=I.findClass(this.parentName);e&&e.hasRegularChildClass()}createProperty(e,t=!1){var s="string"==typeof e?e:e.name;if(s){var n=null,i=s.indexOf(m.typeSymbol);i>-1&&(n=s.substring(i+1),s=s.substring(0,i));var r=this.getIsPropertyNameRequired(s)||!!e.isRequired;s=this.getPropertyName(s);var o=new p(this,s,r);if(n&&(o.type=n),"object"==typeof e){if(e.type&&(o.type=e.type),void 0!==e.default&&(o.defaultValue=e.default),void 0!==e.defaultFunc&&(o.defaultValueFunc=e.defaultFunc),a.isValueEmpty(e.isSerializable)||(o.isSerializable=e.isSerializable),a.isValueEmpty(e.isSerializableFunc)||(o.isSerializableFunc=e.isSerializableFunc),a.isValueEmpty(e.isLightSerializable)||(o.isLightSerializable=e.isLightSerializable),a.isValueEmpty(e.maxLength)||(o.maxLength=e.maxLength),void 0!==e.displayName&&(o.displayName=e.displayName),a.isValueEmpty(e.category)||(o.category=e.category),a.isValueEmpty(e.categoryIndex)||(o.categoryIndex=e.categoryIndex),a.isValueEmpty(e.nextToProperty)||(o.nextToProperty=e.nextToProperty),a.isValueEmpty(e.overridingProperty)||(o.overridingProperty=e.overridingProperty),a.isValueEmpty(e.visibleIndex)||(o.visibleIndex=e.visibleIndex),a.isValueEmpty(e.showMode)||(o.showMode=e.showMode),a.isValueEmpty(e.locationInTable)||(o.locationInTable=e.locationInTable),a.isValueEmpty(e.maxValue)||(o.maxValue=e.maxValue),a.isValueEmpty(e.minValue)||(o.minValue=e.minValue),a.isValueEmpty(e.dataList)||(o.dataList=e.dataList),a.isValueEmpty(e.isDynamicChoices)||(o.isDynamicChoices=e.isDynamicChoices),a.isValueEmpty(e.isBindable)||(o.isBindable=e.isBindable),a.isValueEmpty(e.isUnique)||(o.isUnique=e.isUnique),a.isValueEmpty(e.uniqueProperty)||(o.uniquePropertyName=e.uniqueProperty),a.isValueEmpty(e.isArray)||(o.isArray=e.isArray),!0!==e.visible&&!1!==e.visible||(o.visible=e.visible),e.visibleIf&&(o.visibleIf=e.visibleIf),e.enableIf&&(o.enableIf=e.enableIf),e.onExecuteExpression&&(o.onExecuteExpression=e.onExecuteExpression),e.onPropertyEditorUpdate&&(o.onPropertyEditorUpdate=e.onPropertyEditorUpdate),!0===e.readOnly&&(o.readOnly=!0),!0===e.availableInMatrixColumn&&(o.availableInMatrixColumn=!0),e.choices){var l="function"==typeof e.choices?e.choices:null,u="function"!=typeof e.choices?e.choices:null;o.setChoices(u,l)}e.baseValue&&o.setBaseValue(e.baseValue),e.onSerializeValue&&(o.onSerializeValue=e.onSerializeValue),e.onGetValue&&(o.onGetValue=e.onGetValue),e.onSetValue&&(o.onSetValue=e.onSetValue),e.onSettingValue&&(o.onSettingValue=e.onSettingValue),e.isLocalizable&&(e.serializationProperty="loc"+o.name),e.serializationProperty&&(o.serializationProperty=e.serializationProperty,o.serializationProperty&&0==o.serializationProperty.indexOf("loc")&&(o.isLocalizable=!0)),e.isLocalizable&&(o.isLocalizable=e.isLocalizable),e.className&&(o.className=e.className),e.baseClassName&&(o.baseClassName=e.baseClassName,o.isArray=!0),!0===o.isArray&&(o.isArray=!0),e.classNamePart&&(o.classNamePart=e.classNamePart),e.alternativeName&&(o.alternativeName=e.alternativeName),e.oldName&&(o.oldName=e.oldName),e.layout&&(o.layout=e.layout),e.version&&(o.version=e.version),e.dependsOn&&this.addDependsOnProperties(o,e.dependsOn)}return this.properties.push(o),t&&!this.isOverridedProp(o.name)&&(o.isCustom=!0,g.addProperty(this.name,o)),o}}addDependsOnProperties(e,t){const s=Array.isArray(t)?t:[t];e.dependsOn=s;for(var n=0;n<s.length;n++)this.addDependsOnProperty(e,s[n])}addDependsOnProperty(e,t){var s=this.find(t);s||(s=I.findProperty(this.parentName,t)),s&&s.addDependedProperty(e.name)}getIsPropertyNameRequired(e){return e.length>0&&e[0]==m.requiredSymbol}getPropertyName(e){return this.getIsPropertyNameRequired(e)?e=e.slice(1):e}}m.requiredSymbol="!",m.typeSymbol=":";class v{constructor(e,t){this.type=e,this.message=t,this.description="",this.at=-1,this.end=-1}getFullDescription(){return this.message+(this.description?"\n"+this.description:"")}}class f extends v{constructor(e,t){super("unknownproperty","Unknown property in class '"+t+"': '"+e+"'."),this.propertyName=e,this.className=t}}class b extends v{constructor(e,t,s){super(t,s),this.baseClassName=e,this.type=t,this.message=s}}class y extends b{constructor(e,t){super(t,"missingtypeproperty","The property type is missing in the object. Please take a look at property: '"+e+"'."),this.propertyName=e,this.baseClassName=t}}class C extends b{constructor(e,t){super(t,"incorrecttypeproperty","The property type is incorrect in the object. Please take a look at property: '"+e+"'."),this.propertyName=e,this.baseClassName=t}}class w extends v{constructor(e,t){super("requiredproperty","The property '"+e+"' is required in class '"+t+"'."),this.propertyName=e,this.className=t}}class x extends v{constructor(e,t){super("arrayproperty","The property '"+e+"' should be an array in '"+t+"'."),this.propertyName=e,this.className=t}}class _ extends v{constructor(e,t){super("incorrectvalue","The property value: '"+t+"' is incorrect for property '"+e.name+"'."),this.property=e,this.value=t}}class V{constructor(){this.errors=new Array,this.lightSerializing=!1}static get metaData(){return V.metaDataValue}toJsonObject(e,t){return this.toJsonObjectCore(e,null,t)}toObject(e,t,s){this.toObjectCore(e,t,s);var n=this.getRequiredError(t,e);n&&this.addNewError(n,e,t)}toObjectCore(e,t,s){if(!e)return;var n=null,i=void 0,r=!0;if(t.getType&&(i=t.getType(),n=I.getProperties(i),r=!!i&&!I.isDescendantOf(i,"itemvalue")),!n)return;t.startLoadingFromJson&&t.startLoadingFromJson(e),n=this.addDynamicProperties(t,e,n),this.options=s;const a={};a[V.typePropertyName]=!0;const o={};for(var l in e)this.setPropertyValueToObj(e,t,l,n,a,o,i,r,s);this.options=void 0,t.endLoadingFromJson&&t.endLoadingFromJson()}setPropertyValueToObj(e,t,s,n,i,r,a,o,l){if(i[s])return;if(s===V.positionPropertyName)return void(t[s]=e[s]);const u=this.findProperty(n,s);if(!u&&o&&this.addNewError(new f(s.toString(),a),e,t),u){const o=u.dependsOn;Array.isArray(o)&&(r[s]=!0,o.forEach(s=>{r[s]||this.setPropertyValueToObj(e,t,s,n,i,r,a,!1,l)})),this.valueToObj(e[s],t,u,e,l),i[s]=!0}}toJsonObjectCore(e,t,s){if(!e||!e.getType)return e;if(!e.isSurvey&&"function"==typeof e.getData)return e.getData();var n={};null==t||t.className||(n[V.typePropertyName]=t.getObjType(e.getType()));const i=!0===s;return s&&!0!==s||(s={}),i&&(s.storeDefaults=i),this.propertiesToJson(e,I.getProperties(e.getType()),n,s),this.propertiesToJson(e,this.getDynamicProperties(e),n,s),n}getDynamicProperties(e){return I.getDynamicPropertiesByObj(e)}addDynamicProperties(e,t,s){if(!e.getDynamicPropertyName&&!e.getDynamicProperties)return s;if(e.getDynamicPropertyName){const n=e.getDynamicPropertyName();if(!n)return s;n&&t[n]&&(e[n]=t[n])}const n=this.getDynamicProperties(e);return 0===n.length?s:[].concat(s).concat(n)}propertiesToJson(e,t,s,n){for(var i=0;i<t.length;i++)this.valueToJson(e,s,t[i],n)}valueToJson(e,t,s,n){n||(n={}),!s.isPropertySerializable(e)||!1===s.isLightSerializable&&this.lightSerializing||n.version&&!s.isAvailableInVersion(n.version)||this.valueToJsonCore(e,t,s,n)}valueToJsonCore(e,t,s,n){const i=s.getSerializedProperty(e,n.version);if(i&&i!==s)return void this.valueToJsonCore(e,t,i,n);var r=s.getSerializableValue(e,n.storeDefaults);if(void 0===r)return;if(this.isValueArray(r)){for(var a=[],o=0;o<r.length;o++)a.push(this.toJsonObjectCore(r[o],s,n));r=a.length>0?a:null}else r=this.toJsonObjectCore(r,s,n);if(null==r)return;const l=s.getSerializedName(n.version);var u="function"==typeof e.getPropertyValue&&null!==e.getPropertyValue(l,null);(n.storeDefaults&&u||!s.isDefaultValueByObj(e,r))&&(I.onSerializingProperty&&I.onSerializingProperty(e,s,r,t)||(t[l]=this.removePosOnValueToJson(s,r)))}valueToObj(e,t,s,n,i){if(null!=e)if(this.removePos(s,e),null!=s&&s.hasToUseSetValue)s.setValue(t,e,this);else{if(s.isArray&&!Array.isArray(e)&&e){e=[e];const i=n&&s.alternativeName&&n[s.alternativeName]?s.alternativeName:s.name;this.addNewError(new x(i,t.getType()),n||e,t)}if(this.isValueArray(e))this.valueToArray(e,t,s.name,s,i);else{var r=this.createNewObj(e,s);r.newObj&&(this.toObjectCore(e,r.newObj,i),e=r.newObj),r.error||(null!=s?(s.setValue(t,e,this),i&&i.validatePropertyValues&&(s.validateValue(e)||this.addNewError(new _(s,e),n,t))):t[s.name]=e)}}}removePosOnValueToJson(e,t){return e.isCustom&&t?(this.removePosFromObj(t),t):t}removePos(e,t){!e||!e.type||e.type.indexOf("value")<0||this.removePosFromObj(t)}removePosFromObj(e){if(e&&"function"!=typeof e.getType){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.removePosFromObj(e[t]);if("object"==typeof e){e[V.positionPropertyName]&&delete e[V.positionPropertyName];for(let t in e)this.removePosFromObj(e[t])}}}isValueArray(e){return e&&Array.isArray(e)}createNewObj(e,t){var s={newObj:null,error:null};const n=this.getClassNameForNewObj(e,t);return s.newObj=n?I.createClass(n,e):null,s.error=this.checkNewObjectOnErrors(s.newObj,e,t,n),s}getClassNameForNewObj(e,t){var s=null!=t&&t.className?t.className:void 0;if(s||(s=e[V.typePropertyName]),!s)return s;s=s.toLowerCase();const n=t.classNamePart;return n&&s.indexOf(n)<0&&(s+=n),s}checkNewObjectOnErrors(e,t,s,n){var i=null;return e?i=this.getRequiredError(e,t):s.baseClassName&&(i=n?new C(s.name,s.baseClassName):new y(s.name,s.baseClassName)),i&&this.addNewError(i,t,e),i}getRequiredError(e,t){if(!e.getType||"function"==typeof e.getData)return null;const s=I.findClass(e.getType());if(!s)return null;const n=s.getRequiredProperties();if(!Array.isArray(n))return null;for(var i=0;i<n.length;i++){const s=n[i];if(a.isValueEmpty(s.defaultValue)&&!t[s.name])return new w(s.name,e.getType())}return null}addNewError(e,t,s){if(e.jsonObj=t,e.element=s,this.errors.push(e),!t)return;const n=t[V.positionPropertyName];n&&(e.at=n.start,e.end=n.end)}valueToArray(e,t,s,n,i){if(!t[s]||this.isValueArray(t[s])){t[s]&&e.length>0&&t[s].splice(0,t[s].length);var r=t[s]?t[s]:[];this.addValuesIntoArray(e,r,n,i),t[s]||(t[s]=r)}}addValuesIntoArray(e,t,s,n){for(var i=0;i<e.length;i++){var r=this.createNewObj(e[i],s);r.newObj?(e[i].name&&(r.newObj.name=e[i].name),e[i].valueName&&(r.newObj.valueName=e[i].valueName.toString()),t.push(r.newObj),this.toObjectCore(e[i],r.newObj,n)):r.error||t.push(e[i])}}findProperty(e,t){if(!e)return null;for(var s=0;s<e.length;s++){var n=e[s];if(n.name==t||n.alternativeName==t)return n}return null}}V.typePropertyName="type",V.positionPropertyName="pos",V.metaDataValue=new class{constructor(){this.classes={},this.alternativeNames={},this.childrenClasses={},this.dynamicPropsCache={}}getObjPropertyValue(e,t){if(this.isObjWrapper(e)&&this.isNeedUseObjWrapper(e,t)){const s=e.getOriginalObj(),n=I.findProperty(s.getType(),t);if(n)return this.getObjPropertyValueCore(s,n)}const s=I.findProperty(e.getType(),t);return s?this.getObjPropertyValueCore(e,s):e[t]}setObjPropertyValue(e,t,s){if(e[t]!==s)if(e[t]&&e[t].setJson)e[t].setJson(s,!0);else{if(Array.isArray(s)){const e=[];for(var n=0;n<s.length;n++)e.push(s[n]);s=e}e[t]=s}}getObjPropertyValueCore(e,t){if(!t.isPropertySerializable(e))return e[t.name];if(t.isLocalizable){if(t.isArray)return e[t.name];const s=e.getLocalizableString(t.name);if(s)return s.isDefautlLocale?s.text:s.getValue(s.locale);if(t.serializationProperty)return e[t.serializationProperty].text}return e.getPropertyValue(t.name)}isObjWrapper(e){return!!e.getOriginalObj&&!!e.getOriginalObj()}isNeedUseObjWrapper(e,t){if(!e.getDynamicProperties)return!0;const s=e.getDynamicProperties();if(!Array.isArray(s))return!1;for(let e=0;e<s.length;e++)if(s[e].name===t)return!0;return!1}addClass(e,t,s=null,n=null){e=e.toLowerCase();var i=new m(e,t,s,n);return this.classes[e]=i,n&&(n=n.toLowerCase(),this.childrenClasses[n]||(this.childrenClasses[n]=[]),this.childrenClasses[n].push(i)),i}removeClass(e){var t=this.findClass(e);if(t&&(delete this.classes[t.name],t.parentName)){var s=this.childrenClasses[t.parentName].indexOf(t);s>-1&&this.childrenClasses[t.parentName].splice(s,1)}}overrideClassCreatore(e,t){this.overrideClassCreator(e,t)}overrideClassCreator(e,t){e=e.toLowerCase();var s=this.findClass(e);s&&(s.creator=t)}getProperties(e){var t=this.findClass(e);return t?t.getAllProperties():[]}getPropertiesByObj(e){const t=e&&e.getType?e.getType():void 0;if(!t)return[];const s=this.getProperties(t),n=this.getDynamicPropertiesByObj(e);for(let e=n.length-1;e>=0;e--)this.findProperty(t,n[e].name)&&n.splice(e,1);return 0===n.length?s:[].concat(s).concat(n)}addDynamicPropertiesIntoObj(e,t,s){s.forEach(s=>{this.addDynamicPropertyIntoObj(e,t,s.name,!1),s.serializationProperty&&this.addDynamicPropertyIntoObj(e,t,s.serializationProperty,!0),s.alternativeName&&this.addDynamicPropertyIntoObj(e,t,s.alternativeName,!1)})}addDynamicPropertyIntoObj(e,t,s,n){var i={configurable:!0,get:function(){return t[s]}};n||(i.set=function(e){t[s]=e}),Object.defineProperty(e,s,i)}getDynamicPropertiesByObj(e,t=null){if(!e||!e.getType)return[];if(e.getDynamicProperties)return e.getDynamicProperties();if(!e.getDynamicType&&!t)return[];const s=t||e.getDynamicType();return this.getDynamicPropertiesByTypes(e.getType(),s)}getDynamicPropertiesByTypes(e,t,s){if(!t)return[];const n=t+"-"+e;if(this.dynamicPropsCache[n])return this.dynamicPropsCache[n];var i=this.getProperties(t);if(!i||0==i.length)return[];const r={},a=this.getProperties(e);for(var o=0;o<a.length;o++)r[a[o].name]=a[o];const l=[];s||(s=[]);for(let e=0;e<i.length;e++){const t=i[e];this.canAddDybamicProp(t,r[t.name])&&(s.indexOf(t.name)>-1&&(t.visible=!1,t.isSerializable=!1),l.push(t))}return this.dynamicPropsCache[n]=l,l}canAddDybamicProp(e,t){if(!t)return!0;if(e===t)return!1;let s=e.classInfo;for(;s&&s.parentName;){if((e=this.findProperty(s.parentName,e.name))&&e===t)return!0;s=e?e.classInfo:void 0}return!1}hasOriginalProperty(e,t){return!!this.getOriginalProperty(e,t)}getOriginalProperty(e,t){return this.findProperty(e.getType(),t)||(this.isObjWrapper(e)?this.findProperty(e.getOriginalObj().getType(),t):null)}getProperty(e,t){const s=this.findProperty(e,t);if(!s)return s;const n=this.findClass(e);if(s.classInfo===n)return s;const i=new p(n,s.name,s.isRequired);return i.mergeWith(s),i.isArray=s.isArray,n.properties.push(i),n.resetAllProperties(),i}findProperty(e,t){const s=this.findClass(e);return s?s.findProperty(t):null}findProperties(e,t){var s=new Array;const n=this.findClass(e);if(!n)return s;for(var i=0;i<t.length;i++){var r=n.findProperty(t[i]);r&&s.push(r)}return s}getAllPropertiesByName(e){for(var t=new Array,s=this.getAllClasses(),n=0;n<s.length;n++)for(var i=this.findClass(s[n]),r=0;r<i.properties.length;r++)if(i.properties[r].name==e){t.push(i.properties[r]);break}return t}getAllClasses(){var e=new Array;for(var t in this.classes)e.push(t);return e}createClass(e,t=void 0){e=e.toLowerCase();var s=this.findClass(e);if(!s)return null;if(s.creator)return s.creator(t);for(var n=s.parentName;n;){if(!(s=this.findClass(n)))return null;if(n=s.parentName,s.creator)return this.createCustomType(e,s.creator,t)}return null}createCustomType(e,t,s=void 0){e=e.toLowerCase();var n=t(s),i=e,r=n.getTemplate?n.getTemplate():n.getType();return n.getType=function(){return i},n.getTemplate=function(){return r},g.createProperties(n),n}getChildrenClasses(e,t=!1){e=e.toLowerCase();var s=[];return this.fillChildrenClasses(e,t,s),s}getRequiredProperties(e){const t=this.findClass(e);if(!t)return[];const s=t.getRequiredProperties();for(var n=[],i=0;i<s.length;i++)n.push(s[i].name);return n}addProperties(e,t){e=e.toLowerCase();for(var s=this.findClass(e),n=0;n<t.length;n++)this.addCustomPropertyCore(s,t[n])}addProperty(e,t){return this.addCustomPropertyCore(this.findClass(e),t)}addCustomPropertyCore(e,t){if(!e)return null;var s=e.createProperty(t,!0);return s&&(this.clearDynamicPropsCache(e),e.resetAllProperties()),s}removeProperty(e,t){var s=this.findClass(e);if(!s)return!1;var n=s.find(t);n&&(this.clearDynamicPropsCache(s),this.removePropertyFromClass(s,n),s.resetAllProperties(),g.removeProperty(s.name,t))}clearDynamicPropsCache(e){this.dynamicPropsCache={}}removePropertyFromClass(e,t){var s=e.properties.indexOf(t);s<0||e.properties.splice(s,1)}fillChildrenClasses(e,t,s){var n=this.childrenClasses[e];if(n)for(var i=0;i<n.length;i++)t&&!n[i].creator||s.push(n[i]),this.fillChildrenClasses(n[i].name,t,s)}findClass(e){e=e.toLowerCase();var t=this.classes[e];if(!t){var s=this.alternativeNames[e];if(s&&s!=e)return this.findClass(s)}return t}isDescendantOf(e,t){if(!e||!t)return!1;e=e.toLowerCase(),t=t.toLowerCase();var s=this.findClass(e);if(!s)return!1;var n=s;do{if(n.name===t)return!0;n=this.classes[n.parentName]}while(n);return!1}addAlterNativeClassName(e,t){this.alternativeNames[t.toLowerCase()]=e.toLowerCase()}generateSchema(e=void 0){e||(e="survey");var t=this.findClass(e);if(!t)return null;var s={$schema:"http://json-schema.org/draft-07/schema#",title:"SurveyJS Library json schema",type:"object",properties:{},definitions:{locstring:this.generateLocStrClass()}};return this.generateSchemaProperties(t,s,s.definitions,!0),s}generateLocStrClass(){const e={},t=I.findProperty("survey","locale");if(t){const s=t.getChoices(null);Array.isArray(s)&&(s.indexOf("en")<0&&s.splice(0,0,"en"),s.splice(0,0,"default"),s.forEach(t=>{t&&(e[t]={type:"string"})}))}return{$id:"locstring",type:"object",properties:e}}generateSchemaProperties(e,t,s,n){if(!e)return;const i=t.properties,r=[];"question"===e.name&&(i.type={type:"string"},r.push("type"));for(let t=0;t<e.properties.length;t++){const a=e.properties[t];!1!==a.isSerializable&&(e.parentName&&I.findProperty(e.parentName,a.name)||(i[a.name]=this.generateSchemaProperty(a,s,n),a.isRequired&&r.push(a.name)))}r.length>0&&(t.required=r)}generateSchemaProperty(e,t,s){if(e.isLocalizable)return{oneOf:[{type:"string"},{$ref:this.getChemeRefName("locstring",s)}]};const n=e.schemaType(),i=e.schemaRef();var r={};if(n&&(r.type=n),e.hasChoices){const t=e.getChoices(null);Array.isArray(t)&&t.length>0&&(r.enum=this.getChoicesValues(t))}if(i&&("array"===n?"string"===e.className?r.items={type:e.className}:r.items={$ref:this.getChemeRefName(e.className,s)}:r.$ref=this.getChemeRefName(i,s),this.generateChemaClass(e.className,t,!1)),e.baseClassName){var a=this.getChildrenClasses(e.baseClassName,!0);"question"==e.baseClassName&&a.push(this.findClass("panel")),r.items={anyOf:[]};for(var o=0;o<a.length;o++){var l=a[o].name;r.items.anyOf.push({$ref:this.getChemeRefName(l,s)}),this.generateChemaClass(l,t,!1)}}return r}getChemeRefName(e,t){return t?"#/definitions/"+e:e}generateChemaClass(e,t,s){if(t[e])return;var n=this.findClass(e);if(!n)return;var i=!!n.parentName&&"base"!=n.parentName;i&&this.generateChemaClass(n.parentName,t,s);const r={type:"object",$id:e};t[e]=r;const a={properties:{}};this.generateSchemaProperties(n,a,t,s),i?r.allOf=[{$ref:this.getChemeRefName(n.parentName,s)},{properties:a.properties}]:r.properties=a.properties,Array.isArray(a.required)&&(r.required=a.required)}getChoicesValues(e){const t=new Array;return e.forEach(e=>{"object"==typeof e&&void 0!==e.value?t.push(e.value):t.push(e)}),t}};var I=V.metaData;class S{constructor(){}getValueInfo(e){const t=this.getValueInfoCore(e);return!t.isFound&&void 0===t.value&&e.name.endsWith(".length")&&(t.isFound=!0,t.value=0),t}getValueInfoCore(e){const t=e.name,s=e.context;let n=this.run(e.name,s,e.createObjects);if((!n||!n.isFound)&&s&&s.getRootObj){const t=s.getRootObj();if(t)return e.context=t.getValueGetterContext(),this.getValueInfo(e)}const i={isFound:!1,value:void 0};return n&&n.isFound?(i.isFound=!0,i.value=n.value,i.strictCompare=n.requireStrictCompare,n.context&&(e.isText&&n.context.getTextValue&&(i.value=n.context.getTextValue(t,i.value,e.isDisplayValue)),n.context.getQuestion&&(i.question=n.context.getQuestion())),i):i}getValue(e,t,s,n){const i=this.getValueInfo({name:e,context:t,isText:s,isDisplayValue:n});return i.isFound?i.value:void 0}getDisplayValue(e,t,s=!0){return this.getValue(e,t,!0,s)}isAnyKeyChanged(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(!r)continue;const o=r.toLowerCase();if(e.hasOwnProperty(r))return!0;if(r!==o&&e.hasOwnProperty(o))return!0;const l=this.getFirstNameByKeys(e,r);if(!l)continue;if(r===l)return!0;const u=e[l];if(null==u)continue;if(!u.hasOwnProperty("oldValue")||!u.hasOwnProperty("newValue"))return!0;const d={};d[l]=u.oldValue;var n=this.getValueFromObject(d,r);d[l]=u.newValue;var i=this.getValueFromObject(d,r);if(!a.isTwoValueEquals(n,i,!1,!1,!1))return!0}return!1}getFirstNameByKeys(e,t){const s=this.getPath(t);let n="";for(let t=0;t<s.length;t++)if(n+=(t>0?".":"")+s[t].name,e.hasOwnProperty(n))return n;return""}getValueFromObject(e,t){const s=this.getValueInfo({name:t,context:new T(e)});return s.isFound?s.value:void 0}run(e,t,s){if(!t)return;let n=this.getPath(e);const i=t.getValue(n,!0,-1,s);return i&&i.isFound?i:void 0}getPath(e){const t=[],s=e.split(".");for(let e=0;e<s.length;e++)t.push(this.getValueItem(s[e]));return t}getValueItem(e){let t;if((e=e.trim()).lastIndexOf("]")===e.length-1){const s=e.lastIndexOf("[");if(s>-1){const n=e.substring(s+1,e.length-1);t=a.getNumber(n),(isNaN(t)||t<0)&&(t=void 0),void 0!==t&&(e=e.substring(0,s))}}const s={name:e};return void 0!==t&&(s.index=t),s}}class P{constructor(){}getValue(e,t,s,n){let i=0;const r={isFound:!1,value:this.getInitialvalue(),context:this};for(;i<e.length;){if(i=this.checkValueByPath(e,i,r),!r.isFound)return;const t=e[i];if(i++,r.context!==this&&r.context)return r.context.getValue([].concat(e.slice(i)),!1,t.index,n);if(void 0!==t.index&&(this.updateItemByIndex(t.index,r),!r.isFound))return}return r}isSearchNameRevert(){return!1}checkValueByPath(e,t,s){const n=this.isSearchNameRevert(),i=t,r=this.getMaxIndexByPath(e,t);for(s.isFound=!1,n&&(t=r);!s.isFound&&t<=r&&t>=i;){const r=this.getNameByPath(e,i,t+1);if(this.updateValueByItem(r,s),s.isFound)break;t+=n?-1:1}return t}getNameByPath(e,t,s){let n="";for(let i=t;i<s;i++)i>t&&(n+="."),n+=e[i].name;return n}getMaxIndexByPath(e,t){let s=t;for(;s<e.length&&void 0===e[s].index;)s++;return s<e.length?s:e.length-1}getTextValue(e,t,s){return s?null==t?"":t.toString():t}getInitialvalue(){}updateValueByItem(e,t){}updateItemByIndex(e,t){}}class T extends P{constructor(e){super(),this.variables=e}getInitialvalue(){return this.variables}isSearchNameRevert(){return!0}updateValueByItem(e,t){const s=this.getValueByItemCore(t.value,e);t.isFound=void 0!==s,t.isFound&&(t.value=s)}updateItemByIndex(e,t){const s=t.value;Array.isArray(s)&&e<s.length?(t.value=s[e],t.isFound=!0):t.isFound=!1}getValueByItemCore(e,t){if(!e||!t)return;const s=t.toLowerCase();if("length"===t&&(Array.isArray(e)||"string"==typeof e))return e.length;let n=s[0],i=t[0].toLocaleUpperCase();for(var r in e){var a=r[0];if((a===n||a===i)&&r.toLowerCase()==s)return e[r]}}}class E extends T{constructor(e,t){super(e),this.second=t}getValue(e,t,s,n){const i=super.getValue(e,t,s,n);return!this.second||(null==i?void 0:i.isFound)?i:this.second.getValue(e,t,s,n)}}class R{constructor(e){this.properties=null,this.asyncValues={},this.contextValue=e}get context(){return this.contextValue}hasValue(e){return!!this.context&&this.getValueInfoByContext(e).isFound}getValue(e){if(this.context)return this.getValueInfoByContext(e).value}getValueInfoByContext(e){return(new S).getValueInfo({name:e,context:this.context,isText:!1})}getValueInfo(e){if(this.context){const t=this.getValueInfoByContext(e.name);return e.value=t.value,e.hasValue=t.isFound,void(e.strictCompare=t.strictCompare)}return{hasValue:!1}}}class k{static disposedObjectChangedProperty(e,t){k.warn('An attempt to set a property "'+e+'" of a disposed object "'+t+'"')}static inCorrectQuestionValue(e,t){const s=JSON.stringify(t,null,3);k.warn("An attempt to assign an incorrect value"+s+' to the following question: "'+e+'"')}static warn(e){console.warn(e)}static error(e){console.error(e)}}class A{constructor(){this.functionHash={},this.isAsyncHash={}}register(e,t,s=!1){this.functionHash[e]=t,s&&(this.isAsyncHash[e]=!0)}unregister(e){delete this.functionHash[e],delete this.isAsyncHash[e]}hasFunction(e){return!!this.functionHash[e]}isAsyncFunction(e){return!!this.isAsyncHash[e]}clear(){this.functionHash={}}getAll(){var e=[];for(var t in this.functionHash)e.push(t);return e.sort()}run(e,t,s=null,n){const i=this.functionHash[e];if(!i)return k.warn(this.getUnknownFunctionErrorText(e,s)),null;let r={func:i};if(s)for(var a in s)r[a]=s[a];return r.func(t,n)}getUnknownFunctionErrorText(e,t){return"Unknown function name: '"+e+"'."+ie.getQuestionErrorText(t)}}function L(e,t){if(null!=e)if(Array.isArray(e))for(var s=0;s<e.length;s++)L(e[s],t);else a.isNumber(e)&&(e=a.getNumber(e)),t.push(e)}function D(e){var t=[];L(e,t);for(var s=0,n=0;n<t.length;n++)s=a.correctAfterPlusMinis(s,t[n],s+t[n]);return s}function N(e,t){var s=[];L(e,s);for(var n=void 0,i=0;i<s.length;i++)void 0===n&&(n=s[i]),t?n>s[i]&&(n=s[i]):n<s[i]&&(n=s[i]);return n}function O(e,t,s,n,i,r,o){return!e||a.isValueEmpty(e[t])||r&&!r.runValues(e,o)?s:n(s,i?"string"==typeof(l=e[t])?a.isNumber(l)?a.getNumber(l):void 0:l:1);var l}function j(e,t,s,n,i=!0){var r=function(e,t){if(e.length<2||e.length>3)return null;const s=e[0];if(!s)return null;if(!Array.isArray(s)&&!Array.isArray(Object.keys(s)))return null;const n=e[1];if("string"!=typeof n&&!(n instanceof String))return null;let i=e.length>2?e[2]:void 0;if("string"==typeof i||i instanceof String||(i=void 0),!i){const e=Array.isArray(t)&&t.length>2?t[2]:void 0;e&&e.toString()&&(i=e.toString())}return{data:s,name:n,expression:i}}(t,s);if(!r)return;let a=r.expression?new ae(r.expression):void 0;a&&a.isAsync&&(a=void 0);var o=void 0;if(Array.isArray(r.data))for(var l=0;l<r.data.length;l++)o=O(r.data[l],r.name,o,n,i,a,e);else for(var u in r.data)o=O(r.data[u],r.name,o,n,i,a,e);return o}function q(e){var t;return{survey:e.survey,question:e.question,context:null===(t=e.survey)||void 0===t?void 0:t.getValueGetterContext()}}function M(e,t,s){if("days"===s)return z([e,t]);const n=r("function-dateDiffMonths",e),i=r("function-dateDiffMonths",t);s=s||"years";let a=12*(i.getFullYear()-n.getFullYear())+i.getMonth()-n.getMonth();return i.getDate()<n.getDate()&&(a-=1),"months"===s?a:~~(a/12)}function F(e){if(!e)return!1;for(var t=e.questions,s=0;s<t.length;s++)if(!t[s].validate(!1))return!1;return!0}function B(e){var t=r("function-today");return xt.localization.useLocalTimeZone?t.setHours(0,0,0,0):t.setUTCHours(0,0,0,0),Array.isArray(e)&&1==e.length&&t.setDate(t.getDate()+e[0]),t}function z(e){if(!Array.isArray(e)||2!==e.length)return 0;if(!e[0]||!e[1])return 0;const t=r("function-diffDays",e[0]),s=r("function-diffDays",e[1]),n=Math.abs(s-t);return Math.ceil(n/864e5)}function H(e,t){let s=B(void 0);return t&&t[0]&&(s=r("function-"+e,t[0])),s}function Q(e,t){if(!e||!t)return;let s=e.question;for(;s&&s.parent;){const e=s.parent.getQuestionByName(t);if(e)return e;s=s.parentQuestion}const n=["row","panel","survey"];for(let s=0;s<n.length;s++){const i=e[n[s]];if(i&&i.getQuestionByName){const e=i.getQuestionByName(t);if(e)return e}}return null}function U(e,t){return t.length>1&&!a.isValueEmpty(t[1])?e.getDisplayValue(!0,t[1]):e.displayValue}A.Instance=new A,A.Instance.register,A.Instance.register("sum",D),A.Instance.register("min",function(e){return N(e,!0)}),A.Instance.register("max",function(e){return N(e,!1)}),A.Instance.register("count",function(e){var t=[];return L(e,t),t.length}),A.Instance.register("avg",function(e){var t=[];L(e,t);const s=D(e);return t.length>0?s/t.length:0}),A.Instance.register("round",function(e){var t=[];if(L(e,t),t.length>0){const e=t[0],s=t[1]||0;if(a.isNumber(e)&&a.isNumber(s)){const t=Math.pow(10,s),n=e*t*(1+Number.EPSILON);return Math.round(n)/t}}return NaN}),A.Instance.register("trunc",function(e){var t=[];if(L(e,t),t.length>0){const e=t[0],s=t[1]||-1;if(a.isNumber(e)&&a.isNumber(s)){const t=new RegExp("^-?\\d+(?:.\\d{0,"+s+"})?");return Number(e.toString().match(t)[0])}}return NaN}),A.Instance.register("sumInArray",function(e,t){var s=j(q(this),e,t,function(e,t){return null==e&&(e=0),null==t||null==t?e:a.correctAfterPlusMinis(e,t,e+t)});return void 0!==s?s:0}),A.Instance.register("minInArray",function(e,t){return j(q(this),e,t,function(e,t){return null==e?t:null==t||null==t||e<t?e:t})}),A.Instance.register("maxInArray",function(e,t){return j(q(this),e,t,function(e,t){return null==e?t:null==t||null==t||e>t?e:t})}),A.Instance.register("countInArray",function(e,t){var s=j(q(this),e,t,function(e,t){return null==e&&(e=0),null==t||null==t?e:e+1},!1);return void 0!==s?s:0}),A.Instance.register("avgInArray",function(e,t){const s=q(this),n=n=>A.Instance.run(n,e,s,t),i=n("countInArray");return 0==i?0:n("sumInArray")/i}),A.Instance.register("iif",function(e){if(!Array.isArray(e)||e.length<2)return null;const t=e.length>2?e[2]:void 0;return e[0]?e[1]:t}),A.Instance.register("getDate",function(e){return!Array.isArray(e)||e.length<1||!e[0]?null:r("function-getDate",e[0])}),A.Instance.register("age",function(e){return!Array.isArray(e)||e.length<1||!e[0]?null:M(e[0],void 0,(e.length>1?e[1]:"")||"years")}),A.Instance.register("dateDiff",function(e){if(!Array.isArray(e)||e.length<2||!e[0]||!e[1])return null;const t=(e.length>2?e[2]:"")||"days",s="hours"===t||"minutes"===t||"seconds"===t,n=s?"days":t;let i=M(e[0],e[1],n);if(s){const s=r("function-dateDiffMonths",e[0]),n=r("function-dateDiffMonths",e[1]);(n.getHours()>s.getHours()||"hours"!==t&&n.getHours()===s.getHours()&&n.getMinutes()>s.getMinutes())&&(i-=1);let a=24*i+n.getHours()-s.getHours();if("hours"===t)return a;n.getMinutes()<s.getMinutes()&&(a-=1);const o=60*a+n.getMinutes()-s.getMinutes();return"minutes"===t?o:60*o+n.getSeconds()-s.getSeconds()}return i}),A.Instance.register("dateAdd",function(e){if(!Array.isArray(e)||e.length<2||!e[0]||!e[1])return null;const t=r("function-dateAdd",e[0]),s=e[1],n=e[2]||"days";return"days"===n&&t.setDate(t.getDate()+s),"months"===n&&t.setMonth(t.getMonth()+s),"years"===n&&t.setFullYear(t.getFullYear()+s),t}),A.Instance.register("isContainerReady",function(e){if(!e&&e.length<1)return!1;if(!e[0]||!this.survey)return!1;const t=e[0];let s=this.survey.getPageByName(t);if(s||(s=this.survey.getPanelByName(t)),!s){const n=this.survey.getQuestionByName(t);if(!n||!Array.isArray(n.panels))return!1;if(!(e.length>1)){for(let e=0;e<n.panels.length;e++)if(!F(n.panels[e]))return!1;return!0}e[1]<n.panels.length&&(s=n.panels[e[1]])}return F(s)}),A.Instance.register("isDisplayMode",function(){return this.survey&&this.survey.isDisplayMode}),A.Instance.register("currentDate",function(){return r("function-currentDate")}),A.Instance.register("today",B),A.Instance.register("getYear",function(e){if(1===e.length&&e[0])return r("function-getYear",e[0]).getFullYear()}),A.Instance.register("currentYear",function(){return r("function-currentYear").getFullYear()}),A.Instance.register("diffDays",z),A.Instance.register("year",function(e){return H("year",e).getFullYear()}),A.Instance.register("month",function(e){return H("month",e).getMonth()+1}),A.Instance.register("day",function(e){return H("day",e).getDate()}),A.Instance.register("weekday",function(e){return H("weekday",e).getDay()}),A.Instance.register("displayValue",function(e){const t=Q(this,e[0]);if(!t)return"";if(t.isReady)this.returnResult(U(t,e));else{const s=(t,n)=>{t.isReady&&(t.onReadyChanged.remove(s),this.returnResult(U(t,e)))};t.onReadyChanged.add(s)}},!0),A.Instance.register("propertyValue",function(e){if(2!==e.length||!e[0]||!e[1])return;const t=Q(this,e[0]);return t?t[e[1]]:void 0}),A.Instance.register("substring",function(e){if(e.length<2)return"";const t=e[0];if(!t||"string"!=typeof t)return"";const s=e[1];if(!a.isNumber(s))return"";const n=e.length>2?e[2]:void 0;return a.isNumber(n)?t.substring(s,n):t.substring(s)}),A.Instance.register("getComment",function(e){if(e.length<1||!e[0]||!this.survey)return;const t=this.survey.getQuestionByName(e[0]);if(!t)return"";const s=e.length>1?e[1]:void 0;if(null!=s){const e=t.getItemByValue(s);return e?t.getCommentValue(e):void 0}return t.getCommentValue(t.otherItem)||t.comment});class W{constructor(){this._id=W.counter++}get id(){return this._id}toString(e=void 0){return""}hasFunction(){return!1}hasAsyncFunction(){return!1}addToAsyncList(e){}addOperandsToList(e){e.push(this),this.addChildrenToList(e)}isEqual(e){return!!e&&e.getType()===this.getType()&&this.isContentEqual(e)}areOperatorsEquals(e,t){return!e&&!t||!!e&&e.isEqual(t)}addChildrenToList(e){}}W.counter=1;class G extends W{constructor(e,t=null,s=null,n=!1){super(),this.operatorName=e,this.left=t,this.right=s,this.isArithmeticValue=n,this.consumer=n?X.binaryFunctions.arithmeticOp(e):X.binaryFunctions[e],null==this.consumer&&X.throwInvalidOperatorError(e)}get requireStrictCompare(){return this.getIsOperandRequireStrict(this.left)||this.getIsOperandRequireStrict(this.right)}getIsOperandRequireStrict(e){return!!e&&e.requireStrictCompare}getType(){return"binary"}get isArithmetic(){return this.isArithmeticValue}get isConjunction(){return"or"==this.operatorName||"and"==this.operatorName}get conjunction(){return this.isConjunction?this.operatorName:""}get operator(){return this.operatorName}get leftOperand(){return this.left}get rightOperand(){return this.right}isContentEqual(e){const t=e;return t.operator===this.operator&&this.areOperatorsEquals(this.left,t.left)&&this.areOperatorsEquals(this.right,t.right)}evaluateParam(e,t){return null==e?null:e.evaluate(t)}evaluate(e){return this.consumer.call(this,this.evaluateParam(this.left,e),this.evaluateParam(this.right,e),this.requireStrictCompare)}toString(e=void 0){if(e){var t=e(this);if(t)return t}return"("+X.safeToString(this.left,e)+" "+X.operatorToString(this.operatorName)+" "+X.safeToString(this.right,e)+")"}setVariables(e){null!=this.left&&this.left.setVariables(e),null!=this.right&&this.right.setVariables(e)}hasFunction(){return!!this.left&&this.left.hasFunction()||!!this.right&&this.right.hasFunction()}addChildrenToList(e){this.left&&this.left.addOperandsToList(e),this.right&&this.right.addOperandsToList(e)}hasAsyncFunction(){return!!this.left&&this.left.hasAsyncFunction()||!!this.right&&this.right.hasAsyncFunction()}addToAsyncList(e){this.left&&this.left.addToAsyncList(e),this.right&&this.right.addToAsyncList(e)}}class Z extends W{constructor(e,t){super(),this.expressionValue=e,this.operatorName=t,this.consumer=X.unaryFunctions[t],null==this.consumer&&X.throwInvalidOperatorError(t)}get operator(){return this.operatorName}get expression(){return this.expressionValue}getType(){return"unary"}toString(e=void 0){if(e){var t=e(this);if(t)return t}const s=X.operatorToString(this.operator),n=this.expression.toString(e);return this.isRigtOperator?n+" "+s:s+" "+n}get isRigtOperator(){const e=this.operatorName.toLowerCase();return"notempty"===e||"empty"===e}isContentEqual(e){const t=e;return t.operator==this.operator&&this.areOperatorsEquals(this.expression,t.expression)}hasFunction(){return this.expression.hasFunction()}addChildrenToList(e){this.expression.addOperandsToList(e)}hasAsyncFunction(){return this.expression.hasAsyncFunction()}addToAsyncList(e){this.expression.addToAsyncList(e)}evaluate(e){let t=this.expression.evaluate(e);return this.consumer.call(this,t)}setVariables(e){this.expression.setVariables(e)}}class K extends W{constructor(e){super(),this.values=e}getType(){return"array"}toString(e=void 0){if(e){var t=e(this);if(t)return t}return"["+this.values.map(function(t){return t.toString(e)}).join(", ")+"]"}evaluate(e){return this.values.map(function(t){return t.evaluate(e)})}setVariables(e){this.values.forEach(t=>{t.setVariables(e)})}hasFunction(){return this.values.some(e=>e.hasFunction())}addChildrenToList(e){this.values.forEach(t=>{t.addOperandsToList(e)})}hasAsyncFunction(){return this.values.some(e=>e.hasAsyncFunction())}addToAsyncList(e){this.values.forEach(t=>t.addToAsyncList(e))}isContentEqual(e){const t=e;if(t.values.length!==this.values.length)return!1;for(var s=0;s<this.values.length;s++)if(!t.values[s].isEqual(this.values[s]))return!1;return!0}}class J extends W{constructor(e){super(),this.value=e}getType(){return"const"}toString(e=void 0){if(e){var t=e(this);if(t)return t}return this.value.toString()}get correctValue(){return this.getCorrectValue(this.value)}get requireStrictCompare(){return!1}evaluate(){return this.getCorrectValue(this.value)}setVariables(e){}getCorrectValue(e){if(!e||"string"!=typeof e)return e;if(X.isBooleanValue(e))return"true"===e.toLowerCase();if(e.length>1&&this.isQuote(e[0])&&this.isQuote(e[e.length-1]))return e.substring(1,e.length-1);if(a.isNumber(e)){if("0"===e[0]&&0!=e.indexOf("0x")){const t=e.length,s=t>1&&("."===e[1]||","===e[1]);if(!s&&t>1||s&&t<2)return e}return a.getNumber(e)}return e}isContentEqual(e){return e.value==this.value}isQuote(e){return"'"==e||'"'==e}}class Y extends J{static get DisableConversionChar(){return xt.expressionDisableConversionChar}static set DisableConversionChar(e){xt.expressionDisableConversionChar=e}constructor(e){super(e),this.variableName=e,this.valueInfo={},this.useValueAsItIs=!1,this.variableName&&this.variableName.length>1&&this.variableName[0]===Y.DisableConversionChar&&(this.variableName=this.variableName.substring(1),this.useValueAsItIs=!0)}get requireStrictCompare(){return!0===this.valueInfo.strictCompare}getType(){return"variable"}toString(e=void 0){if(e){var t=e(this);if(t)return t}return"{"+(this.useValueAsItIs?Y.DisableConversionChar:"")+this.variableName+"}"}get variable(){return this.variableName}evaluate(e){if(this.valueInfo.name=this.variableName,e.getValueInfo(this.valueInfo),!this.valueInfo.hasValue)return null;let t=this.valueInfo.value;return this.valueInfo.onProcessValue&&(t=this.valueInfo.onProcessValue(t)),this.getCorrectValue(t)}setVariables(e){e.push(this.variableName)}getCorrectValue(e){return this.useValueAsItIs?e:super.getCorrectValue(e)}isContentEqual(e){return e.variable==this.variable}}class $ extends W{constructor(e,t){super(),this.originalValue=e,this.parameters=t,Array.isArray(t)&&0===t.length&&(this.parameters=new K([]))}getType(){return"function"}evaluate(e){const t=this.getAsynValue(e);return t?t.value:this.evaluateCore(e)}evaluateCore(e){let t=e.properties;if(this.isAsyncFunction){t=a.createCopy(e.properties);const s=this.id,n=e.asyncValues,i=e.onCompleteAsyncFunc,r=this;t.returnResult=e=>{n[s]={value:e},i(r)}}return A.Instance.run(this.originalValue,this.parameters.evaluate(e),t,this.parameters.values)}toString(e=void 0){if(e){var t=e(this);if(t)return t}return this.originalValue+"("+this.parameters.toString(e)+")"}setVariables(e){this.parameters.setVariables(e)}isReady(e){return!!this.getAsynValue(e)}addChildrenToList(e){this.parameters.addOperandsToList(e)}getAsynValue(e){return e.asyncValues[this.id]}hasFunction(){return!0}hasAsyncFunction(){return this.isAsyncFunction()||this.parameters.hasAsyncFunction()}isAsyncFunction(){return A.Instance.isAsyncFunction(this.originalValue)}addToAsyncList(e){let t;if(this.isAsyncFunction()&&(t={operand:this}),this.parameters.hasAsyncFunction()){const e=new Array;this.parameters.addToAsyncList(e),e.forEach(e=>e.parent=t),t||(t={}),t.children=e}t&&e.push(t)}isContentEqual(e){const t=e;return t.originalValue==this.originalValue&&this.areOperatorsEquals(t.parameters,this.parameters)}}class X{static throwInvalidOperatorError(e){throw new Error("Invalid operator: '"+e+"'")}static safeToString(e,t){return null==e?"":e.toString(t)}static toOperandString(e){return!e||a.isNumber(e)||X.isBooleanValue(e)||(e="'"+e+"'"),e}static isBooleanValue(e){return!!e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())}static countDecimals(e){if(a.isNumber(e)&&Math.floor(e)!==e){const t=e.toString().split(".");return t.length>1&&t[1].length||0}return 0}static plusMinus(e,t,s){const n=X.countDecimals(e),i=X.countDecimals(t);if(n>0||i>0){const e=Math.max(n,i);s=parseFloat(s.toFixed(e))}return s}static isTwoValueEquals(e,t,s=!0){return"undefined"===e&&(e=void 0),"undefined"===t&&(t=void 0),a.isTwoValueEquals(e,t,s)}static operatorToString(e){let t=X.signs[e];return null==t?e:t}static convertValForDateCompare(e,t){if(t instanceof Date&&"string"==typeof e){let t=r("expression-operand",e);return t.setHours(0,0,0),t}return e}}X.unaryFunctions={empty:function(e){return a.isValueEmpty(e)},notempty:function(e){return!X.unaryFunctions.empty(e)},negate:function(e){return!e}},X.binaryFunctions={arithmeticOp(e){const t=(e,t)=>a.isValueEmpty(e)?"number"==typeof t?0:"string"==typeof e?e:"string"==typeof t?"":Array.isArray(t)?[]:0:e;return function(s,n){s=t(s,n),n=t(n,s);let i=X.binaryFunctions[e];return null==i?null:i.call(this,s,n)}},and:function(e,t){return e&&t},or:function(e,t){return e||t},plus:function(e,t){return a.sumAnyValues(e,t)},minus:function(e,t){return a.correctAfterPlusMinis(e,t,e-t)},mul:function(e,t){return a.correctAfterMultiple(e,t,e*t)},div:function(e,t){return t?e/t:null},mod:function(e,t){return t?e%t:null},power:function(e,t){return Math.pow(e,t)},greater:function(e,t){return null!=e&&null!=t&&(e=X.convertValForDateCompare(e,t))>X.convertValForDateCompare(t,e)},less:function(e,t){return null!=e&&null!=t&&(e=X.convertValForDateCompare(e,t))<X.convertValForDateCompare(t,e)},greaterorequal:function(e,t){return!!X.binaryFunctions.equal(e,t)||X.binaryFunctions.greater(e,t)},lessorequal:function(e,t){return!!X.binaryFunctions.equal(e,t)||X.binaryFunctions.less(e,t)},equal:function(e,t,s){return e=X.convertValForDateCompare(e,t),t=X.convertValForDateCompare(t,e),X.isTwoValueEquals(e,t,!0!==s)},notequal:function(e,t,s){return!X.binaryFunctions.equal(e,t,s)},contains:function(e,t){return X.binaryFunctions.containsCore(e,t,!0)},notcontains:function(e,t){return!e&&!a.isValueEmpty(t)||X.binaryFunctions.containsCore(e,t,!1)},anyof:function(e,t){if(a.isValueEmpty(e)&&a.isValueEmpty(t))return!0;if(a.isValueEmpty(e)||!Array.isArray(e)&&0===e.length)return!1;if(a.isValueEmpty(t))return!0;if(!Array.isArray(e))return X.binaryFunctions.contains(t,e);if(!Array.isArray(t))return X.binaryFunctions.contains(e,t);for(var s=0;s<t.length;s++)if(X.binaryFunctions.contains(e,t[s]))return!0;return!1},allof:function(e,t){if(!e&&!a.isValueEmpty(t))return!1;if(!Array.isArray(t))return X.binaryFunctions.contains(e,t);for(var s=0;s<t.length;s++)if(!X.binaryFunctions.contains(e,t[s]))return!1;return!0},containsCore:function(e,t,s){if(!e&&0!==e&&!1!==e)return!1;if(e.length||(e=e.toString(),("string"==typeof t||t instanceof String)&&(e=e.toUpperCase(),t=t.toUpperCase())),"string"==typeof e||e instanceof String){if(!t)return!1;t=t.toString();var n=e.indexOf(t)>-1;return s?n:!n}for(var i=Array.isArray(t)?t:[t],r=0;r<i.length;r++){var a=0;for(t=i[r];a<e.length&&!X.isTwoValueEquals(e[a],t);a++);if(a==e.length)return!s}return s}},X.signs={less:"<",lessorequal:"<=",greater:">",greaterorequal:">=",equal:"==",notequal:"!=",plus:"+",minus:"-",mul:"*",div:"/",and:"and",or:"or",power:"^",mod:"%",negate:"!"};class ee extends Error{static buildMessage(e,t){function s(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+s(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+s(e))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+s(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+s(e))}function r(e){switch(e.type){case"literal":return'"'+n(e.text)+'"';case"class":const t=e.parts.map(e=>Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){const t=e.map(r);let s,n;if(t.sort(),t.length>0){for(s=1,n=1;s<t.length;s++)t[s-1]!==t[s]&&(t[n]=t[s],n++);t.length=n}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+((a=t)?'"'+n(a)+'"':"end of input")+" found.";var a}constructor(e,t,s,n){super(),this.message=e,this.expected=t,this.found=s,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ee)}}class te{constructor(e,t){this.at=e,this.code=t}}class se{patchExpression(e){return e.replace(/=>/g,">=").replace(/=</g,"<=").replace(/<>/g,"!=").replace(/equals/g,"equal ").replace(/notequals/g,"notequal ")}createCondition(e){return this.parseExpression(e)}parseExpression(e){try{return function(e,t){t=void 0!==t?t:{};const s={},n={Expression:Ds};let i=Ds;const r=function(e,t){return rn(e,t,!0)},a="||",o=Es("||",!1),l="or",u=Es("or",!0),d=function(){return"or"},h="&&",c=Es("&&",!1),p="and",g=Es("and",!0),m=function(){return"and"},v=function(e,t){return rn(e,t)},f="<=",b=Es("<=",!1),y="lessorequal",C=Es("lessorequal",!0),w=function(){return"lessorequal"},x=">=",_=Es(">=",!1),V="greaterorequal",I=Es("greaterorequal",!0),S=function(){return"greaterorequal"},P="==",T=Es("==",!1),E="equal",R=Es("equal",!0),k=function(){return"equal"},A="=",L=Es("=",!1),D="!=",N=Es("!=",!1),O="notequal",j=Es("notequal",!0),q=function(){return"notequal"},M="<",F=Es("<",!1),B="less",z=Es("less",!0),H=function(){return"less"},Q=">",U=Es(">",!1),W="greater",X=Es("greater",!0),te=function(){return"greater"},se="+",ne=Es("+",!1),ie=function(){return"plus"},re="-",ae=Es("-",!1),oe=function(){return"minus"},le="*",ue=Es("*",!1),de=function(){return"mul"},he="/",ce=Es("/",!1),pe=function(){return"div"},ge="%",me=Es("%",!1),ve=function(){return"mod"},fe="^",be=Es("^",!1),ye="power",Ce=Es("power",!0),we=function(){return"power"},xe="*=",_e=Es("*=",!1),Ve="contains",Ie=Es("contains",!0),Se="contain",Pe=Es("contain",!0),Te=function(){return"contains"},Ee="notcontains",Re=Es("notcontains",!0),ke="notcontain",Ae=Es("notcontain",!0),Le=function(){return"notcontains"},De="anyof",Ne=Es("anyof",!0),Oe=function(){return"anyof"},je="allof",qe=Es("allof",!0),Me=function(){return"allof"},Fe="(",Be=Es("(",!1),ze=")",He=Es(")",!1),Qe=function(e){return e},Ue=function(e,t){return new $(e,t)},We="!",Ge=Es("!",!1),Ze="negate",Ke=Es("negate",!0),Je=function(e){return new Z(e,"negate")},Ye=function(e,t){return new Z(e,t)},$e="empty",Xe=Es("empty",!0),et=function(){return"empty"},tt="notempty",st=Es("notempty",!0),nt=function(){return"notempty"},it="undefined",rt=Es("undefined",!1),at="null",ot=Es("null",!1),lt=function(){return null},ut=function(e){return new J(e)},dt="{",ht=Es("{",!1),ct="}",pt=Es("}",!1),gt=function(e){return new Y(e)},mt=function(e){return e},vt="''",ft=Es("''",!1),bt=function(){return""},yt='""',Ct=Es('""',!1),wt="'",xt=Es("'",!1),_t=function(e){return"'"+e+"'"},Vt='"',It=Es('"',!1),St="[",Pt=Es("[",!1),Tt="]",Et=Es("]",!1),Rt=function(e){return e},kt=",",At=Es(",",!1),Lt=function(e,t){if(null==e)return new K([]);var s=[e];if(Array.isArray(t))for(var n=function(e){return[].concat.apply([],e)}(t),i=3;i<n.length;i+=4)s.push(n[i]);return new K(s)},Dt="true",Nt=Es("true",!0),Ot=function(){return!0},jt="false",qt=Es("false",!0),Mt=function(){return!1},Ft="0x",Bt=Es("0x",!1),zt=function(){return parseInt(Ts(),16)},Ht=/^[\-]/,Qt=Rs(["-"],!1,!1),Ut=function(e,t){return null==e?t:-t},Wt=".",Gt=Es(".",!1),Zt=function(){return parseFloat(Ts())},Kt=function(){return parseInt(Ts(),10)},Jt="0",Yt=Es("0",!1),$t=function(){return 0},Xt=function(e){return e.join("")},es="\\'",ts=Es("\\'",!1),ss=function(){return"'"},ns='\\"',is=Es('\\"',!1),rs=function(){return'"'},as=/^[^"']/,os=Rs(['"',"'"],!0,!1),ls=function(){return Ts()},us=/^[^{}]/,ds=Rs(["{","}"],!0,!1),hs=/^[0-9]/,cs=Rs([["0","9"]],!1,!1),ps=/^[1-9]/,gs=Rs([["1","9"]],!1,!1),ms=/^[a-zA-Z_]/,vs=Rs([["a","z"],["A","Z"],"_"],!1,!1),fs={type:"other",description:"whitespace"},bs=/^[ \t\n\r]/,ys=Rs([" ","\t","\n","\r"],!1,!1);let Cs=0,ws=0;const xs=[{line:1,column:1}];let _s=0,Vs=[],Is=0;const Ss={};let Ps;if(void 0!==t.startRule){if(!(t.startRule in n))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=n[t.startRule]}function Ts(){return e.substring(ws,Cs)}function Es(e,t){return{type:"literal",text:e,ignoreCase:t}}function Rs(e,t,s){return{type:"class",parts:e,inverted:t,ignoreCase:s}}function ks(t){let s,n=xs[t];if(n)return n;for(s=t-1;!xs[s];)s--;for(n=xs[s],n={line:n.line,column:n.column};s<t;)10===e.charCodeAt(s)?(n.line++,n.column=1):n.column++,s++;return xs[t]=n,n}function As(e,t){const s=ks(e),n=ks(t);return{start:{offset:e,line:s.line,column:s.column},end:{offset:t,line:n.line,column:n.column}}}function Ls(e){Cs<_s||(Cs>_s&&(_s=Cs,Vs=[]),Vs.push(e))}function Ds(){let e,t,n,i,a,o,l,u,d;const h=34*Cs+0,c=Ss[h];if(c)return Cs=c.nextPos,c.result;if(e=Cs,t=nn(),t!==s)if(n=Os(),n!==s){for(i=[],a=Cs,o=nn(),o!==s?(l=Ns(),l!==s?(u=nn(),u!==s?(d=Os(),d!==s?(o=[o,l,u,d],a=o):(Cs=a,a=s)):(Cs=a,a=s)):(Cs=a,a=s)):(Cs=a,a=s);a!==s;)i.push(a),a=Cs,o=nn(),o!==s?(l=Ns(),l!==s?(u=nn(),u!==s?(d=Os(),d!==s?(o=[o,l,u,d],a=o):(Cs=a,a=s)):(Cs=a,a=s)):(Cs=a,a=s)):(Cs=a,a=s);i!==s?(a=nn(),a!==s?(ws=e,t=r(n,i),e=t):(Cs=e,e=s)):(Cs=e,e=s)}else Cs=e,e=s;else Cs=e,e=s;return Ss[h]={nextPos:Cs,result:e},e}function Ns(){let t,n;const i=34*Cs+1,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,e.substr(Cs,2)===a?(n=a,Cs+=2):(n=s,0===Is&&Ls(o)),n===s&&(e.substr(Cs,2).toLowerCase()===l?(n=e.substr(Cs,2),Cs+=2):(n=s,0===Is&&Ls(u))),n!==s&&(ws=t,n=d()),t=n,Ss[i]={nextPos:Cs,result:t},t)}function Os(){let e,t,n,i,a,o,l,u;const d=34*Cs+2,h=Ss[d];if(h)return Cs=h.nextPos,h.result;if(e=Cs,t=qs(),t!==s){for(n=[],i=Cs,a=nn(),a!==s?(o=js(),o!==s?(l=nn(),l!==s?(u=qs(),u!==s?(a=[a,o,l,u],i=a):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);i!==s;)n.push(i),i=Cs,a=nn(),a!==s?(o=js(),o!==s?(l=nn(),l!==s?(u=qs(),u!==s?(a=[a,o,l,u],i=a):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);n!==s?(ws=e,t=r(t,n),e=t):(Cs=e,e=s)}else Cs=e,e=s;return Ss[d]={nextPos:Cs,result:e},e}function js(){let t,n;const i=34*Cs+3,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,e.substr(Cs,2)===h?(n=h,Cs+=2):(n=s,0===Is&&Ls(c)),n===s&&(e.substr(Cs,3).toLowerCase()===p?(n=e.substr(Cs,3),Cs+=3):(n=s,0===Is&&Ls(g))),n!==s&&(ws=t,n=m()),t=n,Ss[i]={nextPos:Cs,result:t},t)}function qs(){let e,t,n,i,r,a,o,l;const u=34*Cs+4,d=Ss[u];if(d)return Cs=d.nextPos,d.result;if(e=Cs,t=Fs(),t!==s){for(n=[],i=Cs,r=nn(),r!==s?(a=Ms(),a!==s?(o=nn(),o!==s?(l=Fs(),l!==s?(r=[r,a,o,l],i=r):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);i!==s;)n.push(i),i=Cs,r=nn(),r!==s?(a=Ms(),a!==s?(o=nn(),o!==s?(l=Fs(),l!==s?(r=[r,a,o,l],i=r):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);n!==s?(ws=e,t=v(t,n),e=t):(Cs=e,e=s)}else Cs=e,e=s;return Ss[u]={nextPos:Cs,result:e},e}function Ms(){let t,n;const i=34*Cs+5,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,e.substr(Cs,2)===f?(n=f,Cs+=2):(n=s,0===Is&&Ls(b)),n===s&&(e.substr(Cs,11).toLowerCase()===y?(n=e.substr(Cs,11),Cs+=11):(n=s,0===Is&&Ls(C))),n!==s&&(ws=t,n=w()),t=n,t===s&&(t=Cs,e.substr(Cs,2)===x?(n=x,Cs+=2):(n=s,0===Is&&Ls(_)),n===s&&(e.substr(Cs,14).toLowerCase()===V?(n=e.substr(Cs,14),Cs+=14):(n=s,0===Is&&Ls(I))),n!==s&&(ws=t,n=S()),t=n,t===s&&(t=Cs,e.substr(Cs,2)===P?(n=P,Cs+=2):(n=s,0===Is&&Ls(T)),n===s&&(e.substr(Cs,5).toLowerCase()===E?(n=e.substr(Cs,5),Cs+=5):(n=s,0===Is&&Ls(R))),n!==s&&(ws=t,n=k()),t=n,t===s&&(t=Cs,61===e.charCodeAt(Cs)?(n=A,Cs++):(n=s,0===Is&&Ls(L)),n===s&&(e.substr(Cs,5).toLowerCase()===E?(n=e.substr(Cs,5),Cs+=5):(n=s,0===Is&&Ls(R))),n!==s&&(ws=t,n=k()),t=n,t===s&&(t=Cs,e.substr(Cs,2)===D?(n=D,Cs+=2):(n=s,0===Is&&Ls(N)),n===s&&(e.substr(Cs,8).toLowerCase()===O?(n=e.substr(Cs,8),Cs+=8):(n=s,0===Is&&Ls(j))),n!==s&&(ws=t,n=q()),t=n,t===s&&(t=Cs,60===e.charCodeAt(Cs)?(n=M,Cs++):(n=s,0===Is&&Ls(F)),n===s&&(e.substr(Cs,4).toLowerCase()===B?(n=e.substr(Cs,4),Cs+=4):(n=s,0===Is&&Ls(z))),n!==s&&(ws=t,n=H()),t=n,t===s&&(t=Cs,62===e.charCodeAt(Cs)?(n=Q,Cs++):(n=s,0===Is&&Ls(U)),n===s&&(e.substr(Cs,7).toLowerCase()===W?(n=e.substr(Cs,7),Cs+=7):(n=s,0===Is&&Ls(X))),n!==s&&(ws=t,n=te()),t=n)))))),Ss[i]={nextPos:Cs,result:t},t)}function Fs(){let e,t,n,i,a,o,l,u;const d=34*Cs+6,h=Ss[d];if(h)return Cs=h.nextPos,h.result;if(e=Cs,t=zs(),t!==s){for(n=[],i=Cs,a=nn(),a!==s?(o=Bs(),o!==s?(l=nn(),l!==s?(u=zs(),u!==s?(a=[a,o,l,u],i=a):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);i!==s;)n.push(i),i=Cs,a=nn(),a!==s?(o=Bs(),o!==s?(l=nn(),l!==s?(u=zs(),u!==s?(a=[a,o,l,u],i=a):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);n!==s?(ws=e,t=r(t,n),e=t):(Cs=e,e=s)}else Cs=e,e=s;return Ss[d]={nextPos:Cs,result:e},e}function Bs(){let t,n;const i=34*Cs+7,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,43===e.charCodeAt(Cs)?(n=se,Cs++):(n=s,0===Is&&Ls(ne)),n!==s&&(ws=t,n=ie()),t=n,t===s&&(t=Cs,45===e.charCodeAt(Cs)?(n=re,Cs++):(n=s,0===Is&&Ls(ae)),n!==s&&(ws=t,n=oe()),t=n),Ss[i]={nextPos:Cs,result:t},t)}function zs(){let e,t,n,i,a,o,l,u;const d=34*Cs+8,h=Ss[d];if(h)return Cs=h.nextPos,h.result;if(e=Cs,t=Qs(),t!==s){for(n=[],i=Cs,a=nn(),a!==s?(o=Hs(),o!==s?(l=nn(),l!==s?(u=Qs(),u!==s?(a=[a,o,l,u],i=a):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);i!==s;)n.push(i),i=Cs,a=nn(),a!==s?(o=Hs(),o!==s?(l=nn(),l!==s?(u=Qs(),u!==s?(a=[a,o,l,u],i=a):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);n!==s?(ws=e,t=r(t,n),e=t):(Cs=e,e=s)}else Cs=e,e=s;return Ss[d]={nextPos:Cs,result:e},e}function Hs(){let t,n;const i=34*Cs+9,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,42===e.charCodeAt(Cs)?(n=le,Cs++):(n=s,0===Is&&Ls(ue)),n!==s&&(ws=t,n=de()),t=n,t===s&&(t=Cs,47===e.charCodeAt(Cs)?(n=he,Cs++):(n=s,0===Is&&Ls(ce)),n!==s&&(ws=t,n=pe()),t=n,t===s&&(t=Cs,37===e.charCodeAt(Cs)?(n=ge,Cs++):(n=s,0===Is&&Ls(me)),n!==s&&(ws=t,n=ve()),t=n)),Ss[i]={nextPos:Cs,result:t},t)}function Qs(){let e,t,n,i,a,o,l,u;const d=34*Cs+10,h=Ss[d];if(h)return Cs=h.nextPos,h.result;if(e=Cs,t=Ws(),t!==s){for(n=[],i=Cs,a=nn(),a!==s?(o=Us(),o!==s?(l=nn(),l!==s?(u=Ws(),u!==s?(a=[a,o,l,u],i=a):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);i!==s;)n.push(i),i=Cs,a=nn(),a!==s?(o=Us(),o!==s?(l=nn(),l!==s?(u=Ws(),u!==s?(a=[a,o,l,u],i=a):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);n!==s?(ws=e,t=r(t,n),e=t):(Cs=e,e=s)}else Cs=e,e=s;return Ss[d]={nextPos:Cs,result:e},e}function Us(){let t,n;const i=34*Cs+11,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,94===e.charCodeAt(Cs)?(n=fe,Cs++):(n=s,0===Is&&Ls(be)),n===s&&(e.substr(Cs,5).toLowerCase()===ye?(n=e.substr(Cs,5),Cs+=5):(n=s,0===Is&&Ls(Ce))),n!==s&&(ws=t,n=we()),t=n,Ss[i]={nextPos:Cs,result:t},t)}function Ws(){let e,t,n,i,r,a,o,l;const u=34*Cs+12,d=Ss[u];if(d)return Cs=d.nextPos,d.result;if(e=Cs,t=Zs(),t!==s){for(n=[],i=Cs,r=nn(),r!==s?(a=Gs(),a!==s?(o=nn(),o!==s?(l=Zs(),l===s&&(l=null),l!==s?(r=[r,a,o,l],i=r):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);i!==s;)n.push(i),i=Cs,r=nn(),r!==s?(a=Gs(),a!==s?(o=nn(),o!==s?(l=Zs(),l===s&&(l=null),l!==s?(r=[r,a,o,l],i=r):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s)):(Cs=i,i=s);n!==s?(ws=e,t=v(t,n),e=t):(Cs=e,e=s)}else Cs=e,e=s;return Ss[u]={nextPos:Cs,result:e},e}function Gs(){let t,n;const i=34*Cs+13,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,e.substr(Cs,2)===xe?(n=xe,Cs+=2):(n=s,0===Is&&Ls(_e)),n===s&&(e.substr(Cs,8).toLowerCase()===Ve?(n=e.substr(Cs,8),Cs+=8):(n=s,0===Is&&Ls(Ie)),n===s&&(e.substr(Cs,7).toLowerCase()===Se?(n=e.substr(Cs,7),Cs+=7):(n=s,0===Is&&Ls(Pe)))),n!==s&&(ws=t,n=Te()),t=n,t===s&&(t=Cs,e.substr(Cs,11).toLowerCase()===Ee?(n=e.substr(Cs,11),Cs+=11):(n=s,0===Is&&Ls(Re)),n===s&&(e.substr(Cs,10).toLowerCase()===ke?(n=e.substr(Cs,10),Cs+=10):(n=s,0===Is&&Ls(Ae))),n!==s&&(ws=t,n=Le()),t=n,t===s&&(t=Cs,e.substr(Cs,5).toLowerCase()===De?(n=e.substr(Cs,5),Cs+=5):(n=s,0===Is&&Ls(Ne)),n!==s&&(ws=t,n=Oe()),t=n,t===s&&(t=Cs,e.substr(Cs,5).toLowerCase()===je?(n=e.substr(Cs,5),Cs+=5):(n=s,0===Is&&Ls(qe)),n!==s&&(ws=t,n=Me()),t=n))),Ss[i]={nextPos:Cs,result:t},t)}function Zs(){let t,n,i,r,a,o;const l=34*Cs+14,u=Ss[l];return u?(Cs=u.nextPos,u.result):(t=Cs,40===e.charCodeAt(Cs)?(n=Fe,Cs++):(n=s,0===Is&&Ls(Be)),n!==s?(i=nn(),i!==s?(r=Ds(),r!==s?(a=nn(),a!==s?(41===e.charCodeAt(Cs)?(o=ze,Cs++):(o=s,0===Is&&Ls(He)),o===s&&(o=null),o!==s?(ws=t,n=Qe(r),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s),t===s&&(t=function(){let t,n,i,r,a;const o=34*Cs+15,l=Ss[o];return l?(Cs=l.nextPos,l.result):(t=Cs,n=en(),n!==s?(40===e.charCodeAt(Cs)?(i=Fe,Cs++):(i=s,0===Is&&Ls(Be)),i!==s?(r=Js(),r!==s?(41===e.charCodeAt(Cs)?(a=ze,Cs++):(a=s,0===Is&&Ls(He)),a===s&&(a=null),a!==s?(ws=t,n=Ue(n,r),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s),Ss[o]={nextPos:Cs,result:t},t)}(),t===s&&(t=function(){let t,n,i,r;const a=34*Cs+16,o=Ss[a];return o?(Cs=o.nextPos,o.result):(t=Cs,33===e.charCodeAt(Cs)?(n=We,Cs++):(n=s,0===Is&&Ls(Ge)),n===s&&(e.substr(Cs,6).toLowerCase()===Ze?(n=e.substr(Cs,6),Cs+=6):(n=s,0===Is&&Ls(Ke))),n!==s?(i=nn(),i!==s?(r=Ds(),r!==s?(ws=t,n=Je(r),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s),t===s&&(t=Cs,n=Ks(),n!==s?(i=nn(),i!==s?(r=function(){let t,n;const i=34*Cs+17,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,e.substr(Cs,5).toLowerCase()===$e?(n=e.substr(Cs,5),Cs+=5):(n=s,0===Is&&Ls(Xe)),n!==s&&(ws=t,n=et()),t=n,t===s&&(t=Cs,e.substr(Cs,8).toLowerCase()===tt?(n=e.substr(Cs,8),Cs+=8):(n=s,0===Is&&Ls(st)),n!==s&&(ws=t,n=nt()),t=n),Ss[i]={nextPos:Cs,result:t},t)}(),r!==s?(ws=t,n=Ye(n,r),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s)),Ss[a]={nextPos:Cs,result:t},t)}(),t===s&&(t=Ks(),t===s&&(t=function(){let t,n,i,r;const a=34*Cs+20,o=Ss[a];return o?(Cs=o.nextPos,o.result):(t=Cs,91===e.charCodeAt(Cs)?(n=St,Cs++):(n=s,0===Is&&Ls(Pt)),n!==s?(i=Js(),i!==s?(93===e.charCodeAt(Cs)?(r=Tt,Cs++):(r=s,0===Is&&Ls(Et)),r!==s?(ws=t,n=Rt(i),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s),Ss[a]={nextPos:Cs,result:t},t)}())))),Ss[l]={nextPos:Cs,result:t},t)}function Ks(){let t,n,i,r,a;const o=34*Cs+18,l=Ss[o];return l?(Cs=l.nextPos,l.result):(t=Cs,n=nn(),n!==s?(e.substr(Cs,9)===it?(i=it,Cs+=9):(i=s,0===Is&&Ls(rt)),i===s&&(e.substr(Cs,4)===at?(i=at,Cs+=4):(i=s,0===Is&&Ls(ot))),i!==s?(ws=t,n=lt(),t=n):(Cs=t,t=s)):(Cs=t,t=s),t===s&&(t=Cs,n=nn(),n!==s?(i=function(){let t,n,i,r;const a=34*Cs+19,o=Ss[a];return o?(Cs=o.nextPos,o.result):(t=Cs,n=function(){let t,n;const i=34*Cs+22,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,e.substr(Cs,4).toLowerCase()===Dt?(n=e.substr(Cs,4),Cs+=4):(n=s,0===Is&&Ls(Nt)),n!==s&&(ws=t,n=Ot()),t=n,t===s&&(t=Cs,e.substr(Cs,5).toLowerCase()===jt?(n=e.substr(Cs,5),Cs+=5):(n=s,0===Is&&Ls(qt)),n!==s&&(ws=t,n=Mt()),t=n),Ss[i]={nextPos:Cs,result:t},t)}(),n!==s&&(ws=t,n=mt(n)),t=n,t===s&&(t=Cs,n=function(){let t,n,i;const r=34*Cs+23,a=Ss[r];return a?(Cs=a.nextPos,a.result):(t=Cs,e.substr(Cs,2)===Ft?(n=Ft,Cs+=2):(n=s,0===Is&&Ls(Bt)),n!==s?(i=tn(),i!==s?(ws=t,n=zt(),t=n):(Cs=t,t=s)):(Cs=t,t=s),t===s&&(t=Cs,Ht.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(Qt)),n===s&&(n=null),n!==s?(i=function(){let t,n,i,r;const a=34*Cs+24,o=Ss[a];return o?(Cs=o.nextPos,o.result):(t=Cs,n=tn(),n!==s?(46===e.charCodeAt(Cs)?(i=Wt,Cs++):(i=s,0===Is&&Ls(Gt)),i!==s?(r=tn(),r!==s?(ws=t,n=Zt(),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s),t===s&&(t=Cs,n=function(){let t,n;const i=34*Cs+31,r=Ss[i];if(r)return Cs=r.nextPos,r.result;if(t=[],ps.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(gs)),n!==s)for(;n!==s;)t.push(n),ps.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(gs));else t=s;return Ss[i]={nextPos:Cs,result:t},t}(),n!==s?(i=tn(),i===s&&(i=null),i!==s?(ws=t,n=Kt(),t=n):(Cs=t,t=s)):(Cs=t,t=s),t===s&&(t=Cs,48===e.charCodeAt(Cs)?(n=Jt,Cs++):(n=s,0===Is&&Ls(Yt)),n!==s&&(ws=t,n=$t()),t=n)),Ss[a]={nextPos:Cs,result:t},t)}(),i!==s?(ws=t,n=Ut(n,i),t=n):(Cs=t,t=s)):(Cs=t,t=s)),Ss[r]={nextPos:Cs,result:t},t)}(),n!==s&&(ws=t,n=mt(n)),t=n,t===s&&(t=Cs,n=en(),n!==s&&(ws=t,n=mt(n)),t=n,t===s&&(t=Cs,e.substr(Cs,2)===vt?(n=vt,Cs+=2):(n=s,0===Is&&Ls(ft)),n!==s&&(ws=t,n=bt()),t=n,t===s&&(t=Cs,e.substr(Cs,2)===yt?(n=yt,Cs+=2):(n=s,0===Is&&Ls(Ct)),n!==s&&(ws=t,n=bt()),t=n,t===s&&(t=Cs,39===e.charCodeAt(Cs)?(n=wt,Cs++):(n=s,0===Is&&Ls(xt)),n!==s?(i=Ys(),i!==s?(39===e.charCodeAt(Cs)?(r=wt,Cs++):(r=s,0===Is&&Ls(xt)),r!==s?(ws=t,n=_t(i),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s),t===s&&(t=Cs,34===e.charCodeAt(Cs)?(n=Vt,Cs++):(n=s,0===Is&&Ls(It)),n!==s?(i=Ys(),i!==s?(34===e.charCodeAt(Cs)?(r=Vt,Cs++):(r=s,0===Is&&Ls(It)),r!==s?(ws=t,n=_t(i),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s))))))),Ss[a]={nextPos:Cs,result:t},t)}(),i!==s?(ws=t,n=ut(i),t=n):(Cs=t,t=s)):(Cs=t,t=s),t===s&&(t=Cs,n=nn(),n!==s?(123===e.charCodeAt(Cs)?(i=dt,Cs++):(i=s,0===Is&&Ls(ht)),i!==s?(r=function(){let e,t,n;const i=34*Cs+25,r=Ss[i];if(r)return Cs=r.nextPos,r.result;if(e=Cs,t=[],n=Xs(),n!==s)for(;n!==s;)t.push(n),n=Xs();else t=s;return t!==s&&(ws=e,t=Xt(t)),e=t,Ss[i]={nextPos:Cs,result:e},e}(),r!==s?(125===e.charCodeAt(Cs)?(a=ct,Cs++):(a=s,0===Is&&Ls(pt)),a!==s?(ws=t,n=gt(r),t=n):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s)):(Cs=t,t=s))),Ss[o]={nextPos:Cs,result:t},t)}function Js(){let t,n,i,r,a,o,l,u;const d=34*Cs+21,h=Ss[d];if(h)return Cs=h.nextPos,h.result;if(t=Cs,n=Ds(),n===s&&(n=null),n!==s){for(i=[],r=Cs,a=nn(),a!==s?(44===e.charCodeAt(Cs)?(o=kt,Cs++):(o=s,0===Is&&Ls(At)),o!==s?(l=nn(),l!==s?(u=Ds(),u!==s?(a=[a,o,l,u],r=a):(Cs=r,r=s)):(Cs=r,r=s)):(Cs=r,r=s)):(Cs=r,r=s);r!==s;)i.push(r),r=Cs,a=nn(),a!==s?(44===e.charCodeAt(Cs)?(o=kt,Cs++):(o=s,0===Is&&Ls(At)),o!==s?(l=nn(),l!==s?(u=Ds(),u!==s?(a=[a,o,l,u],r=a):(Cs=r,r=s)):(Cs=r,r=s)):(Cs=r,r=s)):(Cs=r,r=s);i!==s?(ws=t,n=Lt(n,i),t=n):(Cs=t,t=s)}else Cs=t,t=s;return Ss[d]={nextPos:Cs,result:t},t}function Ys(){let e,t,n;const i=34*Cs+26,r=Ss[i];if(r)return Cs=r.nextPos,r.result;if(e=Cs,t=[],n=$s(),n!==s)for(;n!==s;)t.push(n),n=$s();else t=s;return t!==s&&(ws=e,t=Xt(t)),e=t,Ss[i]={nextPos:Cs,result:e},e}function $s(){let t,n;const i=34*Cs+27,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,e.substr(Cs,2)===es?(n=es,Cs+=2):(n=s,0===Is&&Ls(ts)),n!==s&&(ws=t,n=ss()),t=n,t===s&&(t=Cs,e.substr(Cs,2)===ns?(n=ns,Cs+=2):(n=s,0===Is&&Ls(is)),n!==s&&(ws=t,n=rs()),t=n,t===s&&(t=Cs,as.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(os)),n!==s&&(ws=t,n=ls()),t=n)),Ss[i]={nextPos:Cs,result:t},t)}function Xs(){let t,n;const i=34*Cs+28,r=Ss[i];return r?(Cs=r.nextPos,r.result):(t=Cs,us.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(ds)),n!==s&&(ws=t,n=ls()),t=n,Ss[i]={nextPos:Cs,result:t},t)}function en(){let e,t,n,i,r,a,o;const l=34*Cs+29,u=Ss[l];if(u)return Cs=u.nextPos,u.result;if(e=Cs,t=sn(),t!==s){if(n=[],i=Cs,r=tn(),r!==s){for(a=[],o=sn();o!==s;)a.push(o),o=sn();a!==s?(r=[r,a],i=r):(Cs=i,i=s)}else Cs=i,i=s;for(;i!==s;)if(n.push(i),i=Cs,r=tn(),r!==s){for(a=[],o=sn();o!==s;)a.push(o),o=sn();a!==s?(r=[r,a],i=r):(Cs=i,i=s)}else Cs=i,i=s;n!==s?(ws=e,t=ls(),e=t):(Cs=e,e=s)}else Cs=e,e=s;return Ss[l]={nextPos:Cs,result:e},e}function tn(){let t,n;const i=34*Cs+30,r=Ss[i];if(r)return Cs=r.nextPos,r.result;if(t=[],hs.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(cs)),n!==s)for(;n!==s;)t.push(n),hs.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(cs));else t=s;return Ss[i]={nextPos:Cs,result:t},t}function sn(){let t,n;const i=34*Cs+32,r=Ss[i];if(r)return Cs=r.nextPos,r.result;if(t=[],ms.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(vs)),n!==s)for(;n!==s;)t.push(n),ms.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(vs));else t=s;return Ss[i]={nextPos:Cs,result:t},t}function nn(){let t,n;const i=34*Cs+33,r=Ss[i];if(r)return Cs=r.nextPos,r.result;for(Is++,t=[],bs.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(ys));n!==s;)t.push(n),bs.test(e.charAt(Cs))?(n=e.charAt(Cs),Cs++):(n=s,0===Is&&Ls(ys));return Is--,t===s&&(n=s,0===Is&&Ls(fs)),Ss[i]={nextPos:Cs,result:t},t}function rn(e,t,s=!1){return t.reduce(function(e,t){return new G(t[1],e,t[3],s)},e)}if(Ps=i(),Ps!==s&&Cs===e.length)return Ps;throw Ps!==s&&Cs<e.length&&Ls({type:"end"}),an=Vs,on=_s<e.length?e.charAt(_s):null,ln=_s<e.length?As(_s,_s+1):As(_s,_s),new ee(ee.buildMessage(an,on),an,on,ln);var an,on,ln}(this.patchExpression(e))}catch(e){e instanceof ee&&(this.conditionError=new te(e.location.start.offset,e.message))}}get error(){return this.conditionError}}class ne{constructor(e,t,s,n,i){this.operand=e,this.id=t,this.onComplete=s,this.processValue=new R(i),this.processValue.properties=n}run(e){if(!e)return this.runValues();this.processValue.onCompleteAsyncFunc=e=>{const t=this.getAsyncItemByOperand(e,this.asyncFuncList);t&&this.doAsyncFunctionReady(t)},this.asyncFuncList=new Array,this.operand.addToAsyncList(this.asyncFuncList);for(var t=0;t<this.asyncFuncList.length;t++)this.runAsyncItem(this.asyncFuncList[t]);return!1}getAsyncItemByOperand(e,t){if(!Array.isArray(t))return null;for(let s=0;s<t.length;s++){if(t[s].operand===e)return t[s];const n=this.getAsyncItemByOperand(e,t[s].children);if(n)return n}return null}runAsyncItem(e){e.children?e.children.forEach(e=>this.runAsyncItem(e)):this.runAsyncItemCore(e)}runAsyncItemCore(e){e.operand?e.operand.evaluate(this.processValue):this.doAsyncFunctionReady(e)}doAsyncFunctionReady(e){if(e.parent&&this.isAsyncChildrenReady(e))this.runAsyncItemCore(e.parent);else{for(var t=0;t<this.asyncFuncList.length;t++)if(!this.isAsyncFuncReady(this.asyncFuncList[t]))return;this.runValues()}}isAsyncFuncReady(e){return!(e.operand&&!e.operand.isReady(this.processValue))&&this.isAsyncChildrenReady(e)}isAsyncChildrenReady(e){if(e.children)for(let t=0;t<e.children.length;t++)if(!this.isAsyncFuncReady(e.children[t]))return!1;return!0}runValues(){var e=this.operand.evaluate(this.processValue);return this.onComplete&&this.onComplete(e,this.id),e}}class ie{static getQuestionErrorText(e){if(e){const t=e.question;if(t&&t.name)return" It is used in the question: '"+t.name+"'."}return""}constructor(e){this.parser=new se,this.isAsyncValue=!1,this.hasFunctionValue=!1,this.setExpression(e)}get expression(){return this.expressionValue}setExpression(e){this.expression!==e&&(this.expressionValue=e,this.operand=this.parser.parseExpression(e),this.hasFunctionValue=!!this.canRun()&&this.operand.hasFunction(),this.isAsyncValue=!!this.hasFunction()&&this.operand.hasAsyncFunction())}getVariables(){if(!this.operand)return[];var e=[];return this.operand.setVariables(e),e}hasFunction(){return this.hasFunctionValue}get isAsync(){return this.isAsyncValue}canRun(){return!!this.operand}run(e,t,s){return this.runContext(new E(e,null==t?void 0:t.context),t,s)}runContext(e,t=null,s){return this.operand?new ne(this.operand,s,this.onComplete,t,e).run(this.isAsync):(this.expression&&k.warn("Invalid expression: '"+this.expression+"'."+ie.getQuestionErrorText(t)),null)}}ie.createExpressionExecutor=e=>new ie(e);class re{constructor(e){this.expression=e}get expression(){return this.expressionExecutor?this.expressionExecutor.expression:""}set expression(e){this.expressionExecutor&&e===this.expression||(this.expressionExecutor=ie.createExpressionExecutor(e),this.expressionExecutor.onComplete=(e,t)=>{this.doOnComplete(e,t)},this.variables=void 0,this.containsFunc=void 0)}getVariables(){return void 0===this.variables&&(this.variables=this.expressionExecutor.getVariables()),this.variables}hasFunction(){return void 0===this.containsFunc&&(this.containsFunc=this.expressionExecutor.hasFunction()),this.containsFunc}get isAsync(){return this.expressionExecutor.isAsync}canRun(){return this.expressionExecutor.canRun()}runContextCore(e,t){const s=re.IdRunnerCounter++;return this.onBeforeAsyncRun&&this.isAsync&&this.onBeforeAsyncRun(s),this.expressionExecutor.runContext(e,t,s)}doOnComplete(e,t){this.onAfterAsyncRun&&this.isAsync&&this.onAfterAsyncRun(t)}}re.IdRunnerCounter=1;class ae extends re{runValues(e,t){return this.runContext(new E(e,null==t?void 0:t.context),t)}runContext(e,t){return 1==this.runContextCore(e,t)}doOnComplete(e,t){this.onRunComplete&&this.onRunComplete(1==e),super.doOnComplete(e,t)}}class oe extends re{runValues(e,t){return this.runContext(new E(e,null==t?void 0:t.context),t)}runContext(e,t){return this.runContextCore(e,t)}doOnComplete(e,t){this.onRunComplete&&this.onRunComplete(e),super.doOnComplete(e,t)}}class le{constructor(e){this.obj=e,this.properties=null,this.values=null}getType(){return"bindings"}get isSurveyObj(){return!0}getNames(){var e=[];this.fillProperties();for(var t=0;t<this.properties.length;t++)this.properties[t].isVisible("",this.obj)&&e.push(this.properties[t].name);return e}getProperties(){var e=[];this.fillProperties();for(var t=0;t<this.properties.length;t++)e.push(this.properties[t]);return e}setBinding(e,t){this.values||(this.values={});const s=this.getJson();s!==t&&(t?this.values[e]=t:(delete this.values[e],0==Object.keys(this.values).length&&(this.values=null)),this.onChangedJSON(s))}clearBinding(e){this.setBinding(e,"")}isEmpty(){if(!this.values)return!0;for(var e in this.values)return!1;return!0}getValueNameByPropertyName(e){if(this.values)return this.values[e]}getPropertiesByValueName(e){if(!this.values)return[];var t=[];for(var s in this.values)this.values[s]==e&&t.push(s);return t}getJson(){if(this.isEmpty())return;const e={};return this.getNames().forEach(t=>{void 0!==this.values[t]&&(e[t]=this.values[t])}),e}setJson(e,t){const s=this.getJson();this.values=null,e&&this.getNames().forEach(t=>{void 0!==e[t]&&(this.values||(this.values={}),this.values[t]=e[t])}),t||a.isTwoValueEquals(s,this.values)||this.onChangedJSON(s)}fillProperties(){if(null===this.properties){this.properties=[];for(var e=I.getPropertiesByObj(this.obj),t=0;t<e.length;t++)e[t].isBindable&&this.properties.push(e[t])}}onChangedJSON(e){this.obj&&this.obj.onBindingChanged(e,this.getJson())}}class ue{constructor(e,t,s){this.currentDependency=e,this.target=t,this.property=s,this.dependencies=[],this.id=""+ ++ue.DependenciesCount}addDependency(e,t){this.target===e&&this.property===t||this.dependencies.some(s=>s.obj===e&&s.prop===t)||(this.dependencies.push({obj:e,prop:t,id:this.id}),e.registerPropertyChangedHandlers([t],this.currentDependency,this.id))}dispose(){this.dependencies.forEach(e=>{e.obj.unregisterPropertyChangedHandlers([e.prop],e.id)})}}ue.DependenciesCount=0;class de{constructor(e){this._updater=e,this.dependencies=void 0,this.type=de.ComputedUpdaterType}get updater(){return this._updater}setDependencies(e){this.clearDependencies(),this.dependencies=e}getDependencies(){return this.dependencies}clearDependencies(){this.dependencies&&(this.dependencies.dispose(),this.dependencies=void 0)}dispose(){this.clearDependencies(),this._updater=void 0}}de.ComputedUpdaterType="__dependency_computed";class he{static finishCollectDependencies(){const e=he.currentDependencis;return he.currentDependencis=void 0,e}static startCollectDependencies(e,t,s){if(void 0!==he.currentDependencis)throw new Error("Attempt to collect nested dependencies. Nested dependencies are not supported.");he.currentDependencis=new ue(e,t,s)}static collectDependency(e,t){void 0!==he.currentDependencis&&he.currentDependencis.addDependency(e,t)}static get commentSuffix(){return xt.commentSuffix}static set commentSuffix(e){xt.commentSuffix=e}static get commentPrefix(){return he.commentSuffix}static set commentPrefix(e){he.commentSuffix=e}isValueEmpty(e,t=!0){return t&&(e=this.trimValue(e)),a.isValueEmpty(e)}equals(e){return!!e&&!this.isDisposed&&!e.isDisposed&&this.getType()==e.getType()&&this.equalsCore(e)}equalsCore(e){return this.name===e.name&&a.isTwoValueEquals(this.toJSON(),e.toJSON(),!1,!0,!1)}trimValue(e){return e&&("string"==typeof e||e instanceof String)?e.trim():e}static createPropertiesHash(){return{}}constructor(){this.dependencies={},this.propertyHash=he.createPropertiesHash(),this.eventList=[],this.isLoadingFromJsonValue=!1,this.loadingOwner=null,this.onPropertyChanged=this.addEvent(),this.onNestedPropertyChanged=this.addEvent(),this.onItemValuePropertyChanged=this.addEvent(),this.isCreating=!0,this.animationAllowedLock=0,this.supportOnElementRerenderedEvent=!0,this.onElementRerenderedEventEnabled=!1,this._onElementRerendered=new ge,g.createProperties(this),this.onBaseCreating(),this.isCreating=!1}dispose(){for(var e=0;e<this.eventList.length;e++)this.eventList[e].clear();this.onPropertyValueChangedCallback=void 0,this.isDisposedValue=!0,Object.keys(this.dependencies).forEach(e=>this.dependencies[e].dispose()),Object.keys(this.propertyHash).forEach(e=>{const t=this.getPropertyValueCore(this.propertyHash,e);t&&t.type==de.ComputedUpdaterType&&t.dispose()})}get isDisposed(){return!0===this.isDisposedValue}get isSurveyObj(){return!0}addEvent(){const e=new ge;return this.eventList.push(e),e}onBaseCreating(){}getType(){return"base"}isDescendantOf(e){return I.isDescendantOf(this.getType(),e)}getSurvey(e=!1){return null}getValueGetterContext(){const e=this.getSurvey();return e?e.getValueGetterContext():new T({})}get isDesignMode(){const e=this.getSurvey();return!!e&&e.isDesignMode}get inSurvey(){return!!this.getSurvey(!0)}get bindings(){return this.bindingsValue||(this.bindingsValue=new le(this)),this.bindingsValue}isBindingEmpty(){return!this.bindingsValue||this.bindingsValue.isEmpty()}checkBindings(e,t){}canUpdateBindings(){return!0}updateBindings(e,t){if(this.bindingsValue&&this.canUpdateBindings()){var s=this.bindings.getValueNameByPropertyName(e);s&&this.updateBindingValue(s,t)}}updateBindingValue(e,t){}getTemplate(){return this.getType()}get isLoadingFromJson(){return this.isLoadingFromJsonValue||this.getIsLoadingFromJson()}getIsLoadingFromJson(){return!(!this.loadingOwner||!this.loadingOwner.isLoadingFromJson)||this.isLoadingFromJsonValue}startLoadingFromJson(e){this.isLoadingFromJsonValue=!0,this.jsonObj=e}endLoadingFromJson(){this.isLoadingFromJsonValue=!1}toJSON(e){return(new V).toJsonObject(this,e)}fromJSON(e,t){(new V).toObject(e,this,t),this.onSurveyLoad()}onSurveyLoad(){}clone(){var e=I.createClass(this.getType());return e.fromJSON(this.toJSON()),e}getPropertyByName(e){const t=this.getType();return this.classMetaData&&this.classMetaData.name===t||(this.classMetaData=I.findClass(t)),this.classMetaData?this.classMetaData.findProperty(e):null}isPropertyVisible(e){const t=this.getPropertyByName(e);return!!t&&t.isVisible("",this)}static createProgressInfo(){return{questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0}}getProgressInfo(){return he.createProgressInfo()}localeChanged(){}locStrsChanged(){if(this.arraysInfo)for(let t in this.arraysInfo){let s=this.arraysInfo[t];if(s&&s.isItemValues){var e=this.getPropertyValue(t);e&&he.itemValueLocStrChanged&&he.itemValueLocStrChanged(e)}}if(this.localizableStrings)for(let e in this.localizableStrings){let t=this.getLocalizableString(e);t&&t.strChanged()}}getPropertyValue(e,t,s){const n=this.getPropertyValueWithoutDefault(e);if(s&&Array.isArray(n)&&0===n.length&&!0===n.isReset)return delete n.isReset,this.setArrayPropertyDirectly(e,s(),!1),n;if(this.isValueUndefined(n)){const n=this.localizableStrings?this.localizableStrings[e]:void 0;if(n)return n.text;if(!this.isValueUndefined(t))return t;if(s){const t=s();if(void 0!==t){if(Array.isArray(t)){const s=this.createNewArray(e);return s.splice(0,0,...t),s}return this.setPropertyValueDirectly(e,t),t}}const i=this.getDefaultPropertyValue(e);if(void 0!==i)return i}return n}isValueUndefined(e){return a.isValueUndefined(e)}getDefaultPropertyValue(e){const t=this.getPropertyByName(e);if(!t||t.isCustom&&this.isCreating)return;if(t.defaultValueFunc)return t.defaultValueFunc(this);const s=t.getDefaultValue(this);if(!this.isValueUndefined(s)&&!Array.isArray(s))return s;const n=this.localizableStrings?this.localizableStrings[e]:void 0;return n&&n.localizationName?this.getLocalizationString(n.localizationName):"boolean"!=t.type&&"switch"!=t.type&&(t.isCustom&&t.onGetValue?t.onGetValue(this):void 0)}hasDefaultPropertyValue(e){return void 0!==this.getDefaultPropertyValue(e)}resetPropertyValue(e){const t=this.localizableStrings?this.localizableStrings[e]:void 0;t?(this.setLocalizableStringText(e,void 0),t.clear()):this.setPropertyValue(e,void 0)}getPropertyValueWithoutDefault(e){return this.getPropertyValueCore(this.propertyHash,e)}getPropertyValueCore(e,t){return this.isLoadingFromJson||he.collectDependency(this,t),this.getPropertyValueCoreHandler?this.getPropertyValueCoreHandler(e,t):e[t]}geValueFromHash(){return this.propertyHash.value}setPropertyValueCore(e,t,s){this.setPropertyValueCoreHandler?this.isDisposedValue?k.disposedObjectChangedProperty(t,this.getType()):this.setPropertyValueCoreHandler(e,t,s):e[t]=s}get isEditingSurveyElement(){var e=this.getSurvey();return!!e&&e.isEditingSurveyElement}iteratePropertiesHash(e){var t=[];for(var s in this.propertyHash)"value"===s&&this.isEditingSurveyElement&&Array.isArray(this.value)||t.push(s);t.forEach(t=>e(this.propertyHash,t))}setPropertyValue(e,t){if(!this.isDisposedValue){if(!this.isLoadingFromJson){const s=this.getPropertyByName(e);s&&(t=s.settingValue(this,t))}var s=this.getPropertyValue(e);s&&Array.isArray(s)&&this.arraysInfo&&(!t||Array.isArray(t))?this.isTwoValueEquals(s,t)||this.setArrayPropertyDirectly(e,t):t!==s&&(this.setPropertyValueDirectly(e,t),this.isTwoValueEquals(s,t)||this.propertyValueChanged(e,s,t))}}setArrayPropertyDirectly(e,t,s=!0){var n=this.arraysInfo[e];this.setArray(e,this.getPropertyValue(e),t,!!n&&n.isItemValues,n?s&&n.onPush:null)}setPropertyValueDirectly(e,t){this.setPropertyValueCore(this.propertyHash,e,t)}clearPropertyValue(e){this.setPropertyValueCore(this.propertyHash,e,null),delete this.propertyHash[e]}onPropertyValueChangedCallback(e,t,s,n,i){}itemValuePropertyChanged(e,t,s,n){this.onItemValuePropertyChanged.fire(this,{obj:e,name:t,oldValue:s,newValue:n,propertyName:e.ownerPropertyName})}onPropertyValueChanged(e,t,s){}propertyValueChanged(e,t,s,n,i){if(!this.isLoadingFromJson&&(this.updateBindings(e,s),this.onPropertyValueChanged(e,t,s),this.onPropertyChanged.fire(this,{name:e,oldValue:t,newValue:s,arrayChanges:n,target:i}),this.doPropertyValueChangedCallback(e,t,s,n,this),this.checkConditionPropertyChanged(e),this.onPropChangeFunctions))for(var r=0;r<this.onPropChangeFunctions.length;r++)this.onPropChangeFunctions[r].name==e&&this.onPropChangeFunctions[r].func(s,n)}onBindingChanged(e,t){this.isLoadingFromJson||this.doPropertyValueChangedCallback("bindings",e,t)}get isInternal(){return!1}doPropertyValueChangedCallback(e,t,s,n,i){const r=r=>{r&&r.onPropertyValueChangedCallback&&r.onPropertyValueChangedCallback(e,t,s,i,n)};if(this.isInternal)r(this);else{i||(i=this);var a=this.getSurvey();a||(a=this),r(a),a!==this&&r(this)}}addExpressionProperty(e,t,s){this.expressionInfo||(this.expressionInfo={}),this.expressionInfo[e]={onExecute:t,canRun:s}}getDataFilteredProperties(){return{}}runConditionCore(e){if(this.expressionInfo)for(var t in this.expressionInfo)this.runConditionItemCore(t,e)}canRunConditions(){return!this.isDesignMode}checkConditionPropertyChanged(e){this.expressionInfo&&this.expressionInfo[e]&&this.canRunConditions()&&this.runConditionItemCore(e,this.getDataFilteredProperties())}runConditionItemCore(e,t){const s=this.expressionInfo[e];this.getPropertyValue(e)&&(s.canRun&&!s.canRun(this)||this.runExpressionByProperty(e,t,e=>{s.onExecute(this,e)}))}doBeforeAsynRun(e){this.asynExpressionHash||(this.asynExpressionHash={});const t=!this.isAsyncExpressionRunning;this.asynExpressionHash[e]=!0,t&&this.onAsyncRunningChanged()}doAfterAsynRun(e){this.asynExpressionHash&&(delete this.asynExpressionHash[e],this.isAsyncExpressionRunning||this.onAsyncRunningChanged())}onAsyncRunningChanged(){}get isAsyncExpressionRunning(){return!!this.asynExpressionHash&&Object.keys(this.asynExpressionHash).length>0}createExpressionRunner(e){const t=new oe(e);return t.onBeforeAsyncRun=e=>{this.doBeforeAsynRun(e)},t.onAfterAsyncRun=e=>{this.doAfterAsynRun(e)},t}getExpressionFromSurvey(e){let t=this[e];if(!t)return"";const s=this.getSurvey();return s?s.beforeExpressionRunning(this,e,t):t}runExpressionByProperty(e,t,s,n){if(!this[e])return!1;const i=this.getExpressionFromSurvey(e);if(i){const r=this.getExpressionInfoByProperty(e,i),a=r.runner;r.isRunning||n&&!n(a)||(r.isRunning=!0,a.onRunComplete=e=>{s(e),r.isRunning=!1},a.runContext(this.getValueGetterContext(),this.getPropertiesCopy(t,e)))}return!0}getPropertiesCopy(e,t){const s={};for(const t in e)s[t]=e[t];return t&&(s.propertyName=t),s}getExpressionByProperty(e){const t=this.getExpressionFromSurvey(e);return t?this.getExpressionInfoByProperty(e,t).runner:null}getExpressionInfoByProperty(e,t){this.runExpressionHash||(this.runExpressionHash={});let s=this.runExpressionHash[e];return s?s.runner.expression=t:(s={runner:this.createExpressionRunner(t)},this.runExpressionHash[e]=s),s}registerPropertyChangedHandlers(e,t,s=null){for(var n=0;n<e.length;n++)this.registerFunctionOnPropertyValueChanged(e[n],t,s)}unregisterPropertyChangedHandlers(e,t=null){for(var s=0;s<e.length;s++)this.unRegisterFunctionOnPropertyValueChanged(e[s],t)}registerFunctionOnPropertyValueChanged(e,t,s=null){if(this.onPropChangeFunctions||(this.onPropChangeFunctions=[]),s)for(var n=0;n<this.onPropChangeFunctions.length;n++){var i=this.onPropChangeFunctions[n];if(i.name==e&&i.key==s)return void(i.func=t)}this.onPropChangeFunctions.push({name:e,func:t,key:s})}registerFunctionOnPropertiesValueChanged(e,t,s=null){this.registerPropertyChangedHandlers(e,t,s)}unRegisterFunctionOnPropertyValueChanged(e,t=null){if(this.onPropChangeFunctions)for(var s=0;s<this.onPropChangeFunctions.length;s++){var n=this.onPropChangeFunctions[s];if(n.name==e&&n.key==t)return this.onPropChangeFunctions.splice(s,1)}}unRegisterFunctionOnPropertiesValueChanged(e,t=null){this.unregisterPropertyChangedHandlers(e,t)}createCustomLocalizableObj(e){return this.getLocalizableString(e)||this.createLocalizableString(e,this,!1,!0)}getLocale(){const e=this.getSurvey();return e?e.getLocale():""}getLocalizationString(e){return l(e,this.getLocale())}getLocalizationFormatString(e,...t){const s=this.getLocalizationString(e);return s&&s.format?s.format(...t):""}createLocalizableString(e,t,s=!1,n=!1){let i;n&&(i=!0===n?e:n);const r=new Ze(t,s,e,i);r.onStrChanged=(t,s)=>{this.propertyValueChanged(e,t,s)},this.localizableStrings||(this.localizableStrings={}),this.localizableStrings[e]=r;const a=this.getPropertyByName(e);return r.disableLocalization=a&&!1===a.isLocalizable,r}removeLocalizableString(e){this.localizableStrings&&delete this.localizableStrings[e]}getLocalizableString(e){return this.localizableStrings?this.localizableStrings[e]:null}getLocalizableStringText(e,t=""){he.collectDependency(this,e);var s=this.getLocalizableString(e);return s?s.text||t:""}setLocalizableStringText(e,t){let s=this.getLocalizableString(e);s&&s.text!=t&&(s.text=t)}addUsedLocales(e){if(this.localizableStrings)for(let t in this.localizableStrings){let s=this.getLocalizableString(t);s&&this.AddLocStringToUsedLocales(s,e)}if(this.arraysInfo)for(let t in this.arraysInfo){const s=this.getPropertyByName(t);if(!s||!s.isPropertySerializable(this))continue;let n=this.getPropertyValue(t);if(n&&n.length)for(let t=0;t<n.length;t++){let s=n[t];s&&s.addUsedLocales&&s.addUsedLocales(e)}}}searchText(e,t){var s=[];this.getSearchableLocalizedStrings(s);for(var n=0;n<s.length;n++)s[n].setFindText(e)&&t.push({element:this,str:s[n]})}getSearchableLocalizedStrings(e){if(this.localizableStrings){let s=[];this.getSearchableLocKeys(s);for(var t=0;t<s.length;t++){let n=this.getLocalizableString(s[t]);n&&e.push(n)}}if(!this.arraysInfo)return;let s=[];for(this.getSearchableItemValueKeys(s),t=0;t<s.length;t++){var n=this.getPropertyValue(s[t]);if(n)for(var i=0;i<n.length;i++)e.push(n[i].locText)}}getSearchableLocKeys(e){}getSearchableItemValueKeys(e){}AddLocStringToUsedLocales(e,t){for(var s=e.getLocales(),n=0;n<s.length;n++)t.indexOf(s[n])<0&&t.push(s[n])}createItemValues(e){var t=this,s=this.createNewArray(e,function(s){if(s.locOwner=t,s.ownerPropertyName=e,"function"==typeof s.getSurvey){const e=s.getSurvey();e&&"function"==typeof e.makeReactive&&e.makeReactive(s)}});return this.arraysInfo[e].isItemValues=!0,s}notifyArrayChanged(e,t){e.onArrayChanged&&e.onArrayChanged(t)}createNewArrayCore(e){var t=null;return this.createArrayCoreHandler&&(t=this.createArrayCoreHandler(this.propertyHash,e)),t||(t=new Array,this.setPropertyValueCore(this.propertyHash,e,t)),t}ensureArray(e,t=null,s=null){if(!this.arraysInfo||!this.arraysInfo[e])return this.createNewArray(e,t,s)}createNewArray(e,t=null,s=null){var n=this.createNewArrayCore(e);this.arraysInfo||(this.arraysInfo={}),this.arraysInfo[e]={onPush:t,isItemValues:!1};var i=this;return n.push=function(s){var r=Object.getPrototypeOf(n).push.call(n,s);if(!i.isDisposedValue){t&&t(s,n.length-1);const r=new ce(n.length-1,0,[s],[]);i.propertyValueChanged(e,n,n,r),i.notifyArrayChanged(n,r)}return r},n.shift=function(){var t=Object.getPrototypeOf(n).shift.call(n);if(!i.isDisposedValue&&t){s&&s(t);const r=new ce(n.length-1,1,[],[]);i.propertyValueChanged(e,n,n,r),i.notifyArrayChanged(n,r)}return t},n.unshift=function(s){var r=Object.getPrototypeOf(n).unshift.call(n,s);if(!i.isDisposedValue){t&&t(s,n.length-1);const r=new ce(0,0,[s],[]);i.propertyValueChanged(e,n,n,r),i.notifyArrayChanged(n,r)}return r},n.pop=function(){var t=Object.getPrototypeOf(n).pop.call(n);if(!i.isDisposedValue){s&&s(t);const r=new ce(n.length-1,1,[],[]);i.propertyValueChanged(e,n,n,r),i.notifyArrayChanged(n,r)}return t},n.splice=function(r,a,...o){r||(r=0),a||(a=0);var l=Object.getPrototypeOf(n).splice.call(n,r,a,...o);if(o||(o=[]),!i.isDisposedValue){if(s&&l)for(var u=0;u<l.length;u++)s(l[u]);if(t)for(u=0;u<o.length;u++)t(o[u],r+u);const d=new ce(r,a,o,l);i.propertyValueChanged(e,n,n,d),i.notifyArrayChanged(n,d)}return l},n}getItemValueType(){}setArray(e,t,s,n,i){var r=[].concat(t);if(Object.getPrototypeOf(t).splice.call(t,0,t.length),s){for(var a=0;a<s.length;a++){var o=s[a];n&&he.createItemValue&&(o=he.createItemValue(o,this.getItemValueType())),Object.getPrototypeOf(t).push.call(t,o),i&&i(t[a])}delete t.isReset}else t.isReset=!0;const l=new ce(0,r.length,t,r);this.propertyValueChanged(e,r,t,l),this.notifyArrayChanged(t,l)}isTwoValueEquals(e,t,s=!1,n=!1){return a.checkIfValuesEqual(e,t,{ignoreOrder:!1,caseSensitive:!s,trimStrings:n,doNotConvertNumbers:!0})}static copyObject(e,t){for(var s in t){var n=t[s];"object"==typeof n&&(n={},this.copyObject(n,t[s])),e[s]=n}}copyCssClasses(e,t){t&&("string"==typeof t||t instanceof String?e.root=t:he.copyObject(e,t))}getValueInLowCase(e){return e&&"string"==typeof e?e.toLowerCase():e}getElementsInDesign(e=!1){return[]}get animationAllowed(){return this.getIsAnimationAllowed()}getIsAnimationAllowed(){return xt.animationEnabled&&this.animationAllowedLock>=0&&!this.isLoadingFromJson&&!this.isDisposed&&(!!this.onElementRerendered||!this.supportOnElementRerenderedEvent)}blockAnimations(){this.animationAllowedLock--}releaseAnimations(){this.animationAllowedLock++}enableOnElementRerenderedEvent(){this.onElementRerenderedEventEnabled=!0}disableOnElementRerenderedEvent(){var e;null===(e=this.onElementRerendered)||void 0===e||e.fire(this,{isCancel:!0}),this.onElementRerenderedEventEnabled=!1}get onElementRerendered(){return this.supportOnElementRerenderedEvent&&this.onElementRerenderedEventEnabled?this._onElementRerendered:void 0}afterRerender(){var e;null===(e=this.onElementRerendered)||void 0===e||e.fire(this,{isCancel:!1})}}he.currentDependencis=void 0;class ce{constructor(e,t,s,n){this.index=e,this.deleteCount=t,this.itemsToAdd=s,this.deletedItems=n}}class pe{get isEmpty(){return 0===this.length}get length(){return this.callbacks?this.callbacks.length:0}fireByCreatingOptions(e,t){if(this.callbacks)for(var s=0;s<this.callbacks.length;s++)if(this.callbacks[s](e,t()),!this.callbacks)return}fire(e,t){if(!this.callbacks)return;const s=[].concat(this.callbacks);for(var n=0;n<s.length;n++)if(s[n](e,t),!this.callbacks)return}clear(){this.callbacks=void 0}add(e){this.hasFunc(e)||(this.callbacks||(this.callbacks=new Array),this.callbacks.push(e),this.fireCallbackChanged())}remove(e){if(this.hasFunc(e)){var t=this.callbacks.indexOf(e,0);this.callbacks.splice(t,1),this.fireCallbackChanged()}}hasFunc(e){return null!=this.callbacks&&this.callbacks.indexOf(e,0)>-1}fireCallbackChanged(){this.onCallbacksChanged&&this.onCallbacksChanged()}}class ge extends pe{}function me(e,t,s,n){var i,r=arguments.length,a=r<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,s,a):i(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a}class ve{constructor(e,t,s){this.container=e,this.model=t,this.afterInitializeCallback=s,this.resizeObserver=void 0,this.isInitialized=!1,this.isResizeObserverStarted=!1,this.getComputedStyle=e=>i.getComputedStyle(e),this.isDisposed=!1,"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(e=>{n.requestAnimationFrame(()=>{this.isResizeObserverStarted=!0,this.process()})}),this.resizeObserver.observe(this.container.parentElement))}getDimensions(e){return{scroll:e.scrollWidth,offset:e.offsetWidth}}getAvailableSpace(){const e=this.getComputedStyle(this.container);let t=this.container.offsetWidth;return"border-box"===e.boxSizing&&(t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)),t}getGap(){const e=this.getComputedStyle(this.container);if("flex"==e.display){const t=parseFloat(e.rowGap);return isNaN(t)?0:t}return 0}calcItemSize(e){return e.offsetWidth||e.getBoundingClientRect().width}updateItemsDimensions(e){if(!this.container)return;const t=this.isInitialized?this.model.renderedActions.filter(e=>e.needUpdateMaxDimension||e.needUpdateMinDimension):this.model.renderedActions;let s=t.length;0==s&&e(),t.forEach(t=>{const n=!this.isInitialized||t.needUpdateMaxDimension,i=!this.isInitialized||t.needUpdateMinDimension?n?void 0:"small":"large";t.updateDimensions(e=>this.calcItemSize(e),()=>{t.needUpdateMaxDimension=!1,t.needUpdateMinDimension=!1,--s<=0&&e()},i)})}get isContainerVisible(){return!!this.container&&pt(this.container)}shouldProcessResponsiveness(){return this.isContainerVisible&&!this.model.isResponsivenessDisabled&&!this.isDisposed}process(){this.shouldProcessResponsiveness()&&this.updateItemsDimensions(()=>{this.shouldProcessResponsiveness()&&this.model.fit({availableSpace:this.getAvailableSpace(),gap:this.getGap()}),this.isInitialized||(this.isInitialized=!0,this.afterInitializeCallback&&this.afterInitializeCallback())})}update(e){this.isResizeObserverStarted&&(this.model.isResponsivenessDisabled||(e&&(this.isInitialized=!1),this.process()))}dispose(){this.isDisposed=!0,this.resizeObserver&&this.resizeObserver.disconnect(),this.isResizeObserverStarted=!1,this.resizeObserver=void 0,this.container=void 0}}class fe{constructor(){this.classes=[]}isEmpty(){return""===this.toString()}append(e,t=!0){return e&&t&&("string"==typeof e&&(e=e.trim()),this.classes.push(e)),this}toString(){return this.classes.join(" ")}}function be(e){let t,s=!1,n=!1;const i=()=>{n=!0,t=void 0};return{run:(...i)=>{n=!1,t=i,s||(s=!0,queueMicrotask(()=>{n||e.apply(this,t),t=void 0,n=!1,s=!1}))},cancel:i,getLastArguments:()=>t,flushSync:()=>{!n&&s&&(e.apply(this,t),i())}}}let ye={root:"sv-action-bar",defaultSizeMode:"sv-action-bar--default-size-mode",smallSizeMode:"sv-action-bar--small-size-mode",item:"sv-action-bar-item",itemWithTitle:"",itemAsIcon:"sv-action-bar-item--icon",itemActive:"sv-action-bar-item--active",itemPressed:"sv-action-bar-item--pressed",itemIcon:"sv-action-bar-item__icon",itemTitle:"sv-action-bar-item__title",itemTitleWithIcon:"sv-action-bar-item__title--with-icon"};class Ce extends he{constructor(){super(...arguments),this.id=Ce.ContainerID++,this.visibleActions=[],this.sizeMode="default",this.raiseUpdateCallback=be(e=>{this.update(e)}),this.onActionPropertyChangedCallback=this.onActionPropertyChanged.bind(this)}getMarkdownHtml(e,t,s){return this.locOwner?this.locOwner.getMarkdownHtml(e,t,s):void 0}getRenderer(e){return this.locOwner?this.locOwner.getRenderer(e):null}getRendererContext(e){return this.locOwner?this.locOwner.getRendererContext(e):e}getProcessedText(e){return this.locOwner?this.locOwner.getProcessedText(e):e}getLocale(){return this.locOwner?this.locOwner.getLocale():""}getRenderedActions(){return this.visibleActions}locStrsChanged(){super.locStrsChanged(),this.actions.forEach(e=>{e.locTitle&&e.locTitle.strChanged(),e.locStrsChanged()})}flushUpdates(){this.raiseUpdateCallback.flushSync()}raiseUpdate(e){var t;const s=this.raiseUpdateCallback.getLastArguments(),n=null!==(t=s&&s[0])&&void 0!==t?t:{};this.raiseUpdateCallback.run(this.mergeUpdateOptions(e,n))}mergeUpdateOptions(e,t){const s=Object.assign({},e);return s.needUpdateActions=!!s.needUpdateActions||!!t.needUpdateActions,s.needUpdateIsEmpty=!!s.needUpdateIsEmpty||!!t.needUpdateIsEmpty,s}update(e){(null==e?void 0:e.needUpdateActions)&&this.updateVisibleActions(),(null==e?void 0:e.needUpdateIsEmpty)&&this.updateIsEmpty()}updateVisibleActions(){this.visibleActions=this.getVisibleActions()}updateIsEmpty(){this.isEmpty=this.getIsEmpty()}getIsEmpty(){return this.visibleActions.length<=0}getVisibleActions(){return this.actions.filter(e=>!1!==e.visible)}onSet(){this.actions.forEach(e=>{this.patchAction(e)})}onPush(e){this.patchAction(e),this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})}onRemove(e){this.unPatchAction(e),this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})}onActionPropertyChanged(e,t){"_visible"==t.name&&this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})}patchAction(e){this.setActionCssClasses(e),e.owner=this,e.onPropertyChanged.add(this.onActionPropertyChangedCallback)}unPatchAction(e){e.owner=null,e.onPropertyChanged.remove(this.onActionPropertyChangedCallback)}setActionCssClasses(e){e.cssClasses=this.cssClasses}get hasActions(){return(this.actions||[]).length>0}get hasVisibleActions(){return!this.isEmpty}get renderedActions(){return this.getRenderedActions()}getRootStyle(){}getRootCss(){const e="small"===this.sizeMode?this.cssClasses.smallSizeMode:this.cssClasses.defaultSizeMode;return(new fe).append(this.cssClasses.root+(e?" "+e:"")+(this.containerCss?" "+this.containerCss:"")).append(this.cssClasses.root+"--empty",this.isEmpty).toString()}getDefaultCssClasses(){return ye}getAllActions(){return this.actions}setCssClasses(e,t=!0){this.cssClassesValue={},t&&this.copyCssClasses(this.cssClassesValue,this.getDefaultCssClasses()),gt(e,this.cssClasses),this.getAllActions().forEach(e=>{this.setActionCssClasses(e)})}set cssClasses(e){this.setCssClasses(e)}get cssClasses(){return this.cssClassesValue||(this.cssClassesValue=this.getDefaultCssClasses()),this.cssClassesValue}createAction(e){return e instanceof Le?e:new De(e)}addAction(e,t=!0){const s=this.createAction(e);if(t&&!this.isActionVisible(s))return s;const n=[].concat(this.actions,s);return this.sortItems(n),this.actions=n,s}setItems(e,t=!0){const s=[];e.forEach(e=>{t&&!this.isActionVisible(e)||s.push(this.createAction(e))}),t&&this.sortItems(s),this.actions=s}sortItems(e){this.hasSetVisibleIndex(e)&&e.sort(this.compareByVisibleIndex)}hasSetVisibleIndex(e){for(let t=0;t<e.length;t++){const s=e[t].visibleIndex;if(void 0!==s&&s>=0)return!0}return!1}compareByVisibleIndex(e,t){return e.visibleIndex-t.visibleIndex}isActionVisible(e){return e.visibleIndex>=0||void 0===e.visibleIndex}popupAfterShowCallback(e){}mouseOverHandler(e){e.isHovered=!0;let t=!1,s=!1;if(this.actions.forEach(n=>{n===e&&e.popupModel&&(t=!0),n.popupModel&&n.popupModel.isVisible&&(s=!0)}),t){const t=s?Math.max(this.subItemsShowDelay,this.subItemsHideDelay):this.subItemsShowDelay;e.showPopupDelayed(t),this.popupAfterShowCallback(e)}}initResponsivityManager(e,t){}resetResponsivityManager(){}getActionById(e){for(var t=0;t<this.actions.length;t++)if(this.actions[t].id===e)return this.actions[t];return null}dispose(){super.dispose(),this.resetResponsivityManager(),this.actions.forEach(e=>e.dispose()),this.actions.length=0}}Ce.ContainerID=1,me([c({})],Ce.prototype,"visibleActions",void 0),me([c({onSet:(e,t)=>{t.onSet()},onPush:(e,t,s)=>{s.onPush(e)},onRemove:(e,t,s)=>{s.onRemove(e)}})],Ce.prototype,"actions",void 0),me([d({})],Ce.prototype,"containerCss",void 0),me([d({defaultValue:!0})],Ce.prototype,"isEmpty",void 0),me([d({defaultValue:300})],Ce.prototype,"subItemsShowDelay",void 0),me([d({defaultValue:300})],Ce.prototype,"subItemsHideDelay",void 0);class we{static focusElement(e){e&&e.focus()}static visibility(e){var t=i.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&(!e.parentElement||this.visibility(e.parentElement))}static getNextElementPreorder(e){const t=e.nextElementSibling?e.nextElementSibling:e.parentElement.firstElementChild;return this.visibility(t)?t:this.getNextElementPreorder(t)}static getNextElementPostorder(e){const t=e.previousElementSibling?e.previousElementSibling:e.parentElement.lastElementChild;return this.visibility(t)?t:this.getNextElementPostorder(t)}static hasHorizontalScroller(e){return!!e&&e.scrollWidth>e.offsetWidth}static hasVerticalScroller(e){return!!e&&e.scrollHeight>e.offsetHeight}}let xe=!1,_e=null;"undefined"!=typeof navigator&&navigator&&n.isAvailable()&&(_e=navigator.userAgent||navigator.vendor||n.hasOwn("opera")),function(e){e&&("MacIntel"===navigator.platform&&navigator.maxTouchPoints>0||"iPad"===navigator.platform||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substring(0,4)))&&(xe=!0)}(_e);const Ve=xe||!1;var Ie={get isTouch(){return!this.hasMouse&&this.hasTouchEvent},get hasTouchEvent(){return n.isAvailable()&&(n.hasOwn("ontouchstart")||navigator.maxTouchPoints>0)},hasMouse:!0};const Se=n.matchMedia;Ie.hasMouse=function(e){if(!e)return!1;if(Ve)return!1;const t=e("(pointer:fine)"),s=e("(any-hover:hover)");return!!t&&t.matches||!!s&&s.matches}(Se);let Pe=Ie.isTouch,Te={root:"sv-list__container",item:"sv-list__item",searchClearButtonIcon:"sv-list__filter-clear-button",loadingIndicator:"sv-list__loading-indicator",itemSelected:"sv-list__item--selected",itemGroup:"sv-list__item--group",itemGroupSelected:"sv-list__item--group-selected",itemWithIcon:"sv-list__item--with-icon",itemDisabled:"sv-list__item--disabled",itemFocused:"sv-list__item--focused",itemHovered:"sv-list__item--hovered",itemTextWrap:"sv-list__item-text--wrap",itemIcon:"sv-list__item-icon",itemMarkerIcon:"sv-list-item__marker-icon",itemSeparator:"sv-list__item-separator",itemBody:"sv-list__item-body",itemsContainer:"sv-list",itemsContainerFiltering:"sv-list--filtering",filter:"sv-list__filter",filterIcon:"sv-list__filter-icon",filterInput:"sv-list__input",emptyContainer:"sv-list__empty-container",emptyText:"sv-list__empty-text"};class Ee extends Ce{hasText(e,t){if(!t)return!0;const s=e.title||"";if(this.onTextSearchCallback)return this.onTextSearchCallback(e,t);let n=s.toLocaleLowerCase();return n=xt.comparator.normalizeTextCallback(n,"filter"),n.indexOf(t.toLocaleLowerCase())>-1}isItemVisible(e){return e.id===this.loadingIndicator.id||this.disableSearch?e.visible:e.visible&&this.hasText(e,this.filterString)}getRenderedActions(){let e=super.getRenderedActions();if(this.filterString){let t=[];return e.forEach(e=>{t.push(e),e.items&&e.items.forEach(s=>{const n=new De(s);n.iconName||(n.iconName=e.iconName),t.push(n)})}),t}return e}get visibleItems(){return this.actions.filter(e=>this.isItemVisible(e))}onFilterStringChanged(e){this.onFilterStringChangedCallback&&this.onFilterStringChangedCallback(e),this.raiseUpdate({needUpdateIsEmpty:!0})}getIsEmpty(){return!this.renderedActions.some(e=>this.isItemVisible(e))}scrollToItem(e,t=0){setTimeout(()=>{if(!this.listContainerHtmlElement)return;const s=this.listContainerHtmlElement.querySelector(ht(e));s&&setTimeout(()=>{s.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},t)},t)}constructor(e,t,s,n,i){if(super(),this.onSelectionChanged=t,this.allowSelection=s,this.elementId=i,this.onItemClick=e=>{if(this.isItemDisabled(e))return;this.isExpanded=!1,this.allowSelection&&(this.selectedItem=e),this.onSelectionChanged&&this.onSelectionChanged(e);const t=e.action;t&&t(e)},this.onItemHover=e=>{this.mouseOverHandler(e)},this.isItemDisabled=e=>void 0!==e.enabled&&!e.enabled,this.getA11yItemAriaSelected=e=>{if("option"==this.listItemRole)return this.isItemSelected(e)?"true":"false"},this.getA11yItemAriaChecked=e=>{if("menuitemradio"==this.listItemRole)return this.isItemSelected(e)?"true":"false"},this.isItemSelected=e=>this.areSameItems(this.selectedItem,e),this.isItemFocused=e=>this.areSameItems(this.focusedItem,e),this.getListClass=()=>(new fe).append(this.cssClasses.itemsContainer).append(this.cssClasses.itemsContainerFiltering,!!this.filterString&&this.visibleActions.length!==this.visibleItems.length).toString(),this.getItemClass=e=>{const t=this.isItemSelected(e);return(new fe).append(this.cssClasses.item).append(this.cssClasses.itemWithIcon,!!e.iconName).append(this.cssClasses.itemDisabled,this.isItemDisabled(e)).append(this.cssClasses.itemFocused,this.isItemFocused(e)).append(this.cssClasses.itemSelected,!e.hasSubItems&&t).append(this.cssClasses.itemGroup,e.hasSubItems).append(this.cssClasses.itemGroupSelected,e.hasSubItems&&t).append(this.cssClasses.itemHovered,e.isHovered).append(this.cssClasses.itemTextWrap,this.textWrapEnabled).append(e.css).toString()},this.getItemStyle=e=>({"--sjs-list-item-level":(e.level||0)+1}),-1!==Object.keys(e).indexOf("items")){const t=e;Object.keys(t).forEach(e=>{switch(e){case"items":this.setItems(t.items);break;case"onFilterStringChangedCallback":this.setOnFilterStringChangedCallback(t.onFilterStringChangedCallback);break;case"onTextSearchCallback":this.setOnTextSearchCallback(t.onTextSearchCallback);break;default:this[e]=t[e]}}),this.updateActionsIds()}else this.setItems(e),this.selectedItem=n}setOnFilterStringChangedCallback(e){this.onFilterStringChangedCallback=e}setOnTextSearchCallback(e){this.onTextSearchCallback=e}setItems(e,t=!0){super.setItems(e,t),this.updateActionsIds(),!this.isAllDataLoaded&&this.actions.length&&this.actions.push(this.loadingIndicator)}updateActionsIds(){this.elementId&&this.actions.forEach(e=>{e.elementId=this.elementId+e.id})}setSearchEnabled(e){this.searchEnabled=e,this.showSearchClearButton=e}onSet(){this.showFilter=this.searchEnabled&&(this.forceShowFilter||(this.actions||[]).length>Ee.MINELEMENTCOUNT),super.onSet()}getDefaultCssClasses(){return Te}popupAfterShowCallback(e){this.addScrollEventListener(()=>{e.hidePopup()})}onItemLeave(e){e.hidePopupDelayed(this.subItemsHideDelay)}areSameItems(e,t){return this.areSameItemsCallback?this.areSameItemsCallback(e,t):!!e&&!!t&&e.id==t.id}get a11ya11y_input_ariaLabel(){return this.listAriaLabel}get filterStringPlaceholder(){return this.getLocalizationString("filterStringPlaceholder")}get emptyMessage(){return this.isAllDataLoaded?this.getLocalizationString("emptyMessage"):this.getLocalizationString("loadingData")}get scrollableContainer(){return this.listContainerHtmlElement.querySelector(ht(this.cssClasses.itemsContainer))}get loadingIndicator(){if(!this.loadingIndicatorValue){const e=new De({id:"loadingIndicator",title:this.getLocalizationString("loadingPage"),action:()=>{},css:this.cssClasses.loadingIndicator});e.initLoadingIndicatorVisibilityObserver(this.loadingIndicatorVisibilityObserver),this.loadingIndicatorValue=e}return this.loadingIndicatorValue}goToItems(e){if("ArrowDown"===e.key||40===e.keyCode){const t=e.target.parentElement.parentElement.querySelector("ul"),s=function(e){let t;for(let s=0;s<e.children.length;s++)t||"none"===getComputedStyle(e.children[s]).display||(t=e.children[s]);return t}(t);t&&s&&(we.focusElement(s),e.preventDefault())}}onMouseMove(e){this.resetFocusedItem()}onKeyDown(e){const t=e.target;"ArrowDown"===e.key||40===e.keyCode?(we.focusElement(we.getNextElementPreorder(t)),e.preventDefault()):"ArrowUp"!==e.key&&38!==e.keyCode||(we.focusElement(we.getNextElementPostorder(t)),e.preventDefault())}onPointerDown(e,t){}refresh(){""==this.filterString&&this.raiseUpdate({needUpdateIsEmpty:!0}),this.resetFocusedItem()}onClickSearchClearButton(e){e.currentTarget.parentElement.querySelector("input").focus(),this.refresh()}resetFocusedItem(){this.focusedItem=void 0}focusFirstVisibleItem(){Pe||(this.focusedItem=this.visibleItems[0])}focusLastVisibleItem(){this.focusedItem=this.visibleItems[this.visibleItems.length-1]}initFocusedItem(){this.focusedItem=this.visibleItems.filter(e=>e.visible&&this.isItemSelected(e))[0],this.focusedItem||this.focusFirstVisibleItem()}focusNextVisibleItem(){if(this.focusedItem){const e=this.visibleItems,t=e.indexOf(this.focusedItem),s=e[t+1];s?this.focusedItem=s:this.focusFirstVisibleItem()}else this.initFocusedItem()}focusPrevVisibleItem(){if(this.focusedItem){const e=this.visibleItems,t=e.indexOf(this.focusedItem),s=e[t-1];s?this.focusedItem=s:this.focusLastVisibleItem()}else this.initFocusedItem()}selectFocusedItem(){this.focusedItem&&this.onItemClick(this.focusedItem)}initListContainerHtmlElement(e){this.listContainerHtmlElement=e}onItemRended(e,t){this.isAllDataLoaded||(e===this.actions[this.actions.length-1]&&this.listContainerHtmlElement&&(this.hasVerticalScroller=we.hasVerticalScroller(this.scrollableContainer)),e.id===this.loadingIndicator.id&&t&&this.loadingIndicator.intersectionVisibilityObserver&&this.loadingIndicator.intersectionVisibilityObserver.observe(t))}scrollToFocusedItem(){this.scrollToItem(this.cssClasses.itemFocused)}scrollToSelectedItem(){this.selectedItem&&this.selectedItem.items&&this.selectedItem.items.length>0?this.scrollToItem(this.cssClasses.itemGroupSelected,110):this.scrollToItem(this.cssClasses.itemSelected,110)}setLoadingIndicatorVisibilityObserver(e){e&&(this.loadingIndicatorVisibilityObserver=e)}addScrollEventListener(e){e&&(this.removeScrollEventListener(),this.scrollHandler=e),this.scrollHandler&&this.scrollableContainer.addEventListener("scroll",this.scrollHandler)}removeScrollEventListener(){this.scrollHandler&&this.scrollableContainer.removeEventListener("scroll",this.scrollHandler)}dispose(){super.dispose(),this.loadingIndicatorValue&&this.loadingIndicatorValue.dispose(),this.listContainerHtmlElement=void 0}}Ee.INDENT=16,Ee.MINELEMENTCOUNT=10,me([d({defaultValue:!0,onSet:(e,t)=>{t.onSet()}})],Ee.prototype,"searchEnabled",void 0),me([d({defaultValue:!1})],Ee.prototype,"showFilter",void 0),me([d({defaultValue:!1})],Ee.prototype,"forceShowFilter",void 0),me([d({defaultValue:!1})],Ee.prototype,"isExpanded",void 0),me([d({})],Ee.prototype,"selectedItem",void 0),me([d()],Ee.prototype,"focusedItem",void 0),me([d({onSet:(e,t)=>{t.onFilterStringChanged(t.filterString)}})],Ee.prototype,"filterString",void 0),me([d({defaultValue:!1})],Ee.prototype,"hasVerticalScroller",void 0),me([d({defaultValue:!0})],Ee.prototype,"isAllDataLoaded",void 0),me([d({defaultValue:!1})],Ee.prototype,"showSearchClearButton",void 0),me([d({defaultValue:!0})],Ee.prototype,"renderElements",void 0),me([d({defaultValue:!1})],Ee.prototype,"textWrapEnabled",void 0),me([d({defaultValue:"sv-list-item-content"})],Ee.prototype,"itemComponent",void 0),me([d({defaultValue:"listbox"})],Ee.prototype,"listRole",void 0),me([d({defaultValue:"option"})],Ee.prototype,"listItemRole",void 0),me([d()],Ee.prototype,"listAriaLabel",void 0),me([d({defaultValue:!1})],Ee.prototype,"disableSearch",void 0);class Re extends he{refreshInnerModel(){const e=this.contentComponentData.model;e&&e.refresh&&e.refresh()}constructor(e,t,s){if(super(),this.focusFirstInputSelector="",this.onCancel=()=>{},this.onApply=()=>!0,this.onHide=()=>{},this.onShow=()=>{},this.onBlur=()=>{},this.onDispose=()=>{},this.onVisibilityChanged=this.addEvent(),this.onFooterActionsCreated=this.addEvent(),this.onRecalculatePosition=this.addEvent(),this.contentComponentName=e,this.contentComponentData=t,s)for(var n in s)this[n]=s[n]}get isVisible(){return this.getPropertyValue("isVisible",!1)}set isVisible(e){this.isVisible!==e&&(this.setPropertyValue("isVisible",e),this.onVisibilityChanged.fire(this,{model:this,isVisible:e}))}toggleVisibility(){this.isVisible=!this.isVisible}show(){this.isVisible||(this.isVisible=!0)}hide(){this.isVisible&&(this.isVisible=!1)}recalculatePosition(e){this.onRecalculatePosition.fire(this,{isResetHeight:e})}updateFooterActions(e){const t={actions:e};return this.onFooterActionsCreated.fire(this,t),t.actions}getDisplayMode(){if(this.isModal)return"popup"===this.displayMode?"modal-popup":"modal-overlay";if("popup"===this.displayMode)return"menu-popup";{let e;switch(this.overlayDisplayMode){case"plain":e="menu-popup";break;case"dropdown-overlay":e="menu-overlay";break;case"tablet-dropdown-overlay":e="menu-popup-overlay";break;case"auto":e=Pe?"menu-popup-overlay":"menu-popup"}return e}}updateDisplayMode(e){let t,s;switch(e){case"dropdown":t="popup",s="auto";break;case"popup":t="overlay",s="tablet-dropdown-overlay";break;case"overlay":t="overlay",s="dropdown-overlay"}if(this.displayMode!==t){const t="dropdown"===e;this.setWidthByTarget=t,this.isFocusedContent=!t}return(this.displayMode!==t||this.overlayDisplayMode!==s)&&(this.displayMode=t,this.overlayDisplayMode=s,!0)}onHiding(){this.refreshInnerModel(),this.onHide()}dispose(){super.dispose(),this.onDispose()}}function ke(e,t){e.listRole||(e.listRole="menu"),e.listItemRole||(e.listItemRole=e.allowSelection?"menuitemradio":"menuitem");const s=new Ee(e);s.onSelectionChanged=t=>{e.onSelectionChanged&&e.onSelectionChanged(t),i.hide()};const n=t||{};n.onDispose=()=>{s.dispose()};const i=new Re("sv-list",{model:s},n);return i.isFocusedContent=s.showFilter,i.onShow=()=>{n.onShow&&n.onShow(),s.scrollToSelectedItem()},i.onHide=()=>{n.onHide&&n.onHide(),s.filterString=""},i}function Ae(e){return null==e?void 0:e.previousElementSibling}me([d()],Re.prototype,"contentComponentName",void 0),me([d()],Re.prototype,"contentComponentData",void 0),me([d({defaultValue:"bottom"})],Re.prototype,"verticalPosition",void 0),me([d({defaultValue:"left"})],Re.prototype,"horizontalPosition",void 0),me([d({defaultValue:!0})],Re.prototype,"showPointer",void 0),me([d({defaultValue:!1})],Re.prototype,"isModal",void 0),me([d({defaultValue:!0})],Re.prototype,"canShrink",void 0),me([d({defaultValue:!0})],Re.prototype,"isFocusedContent",void 0),me([d({defaultValue:!0})],Re.prototype,"isFocusedContainer",void 0),me([d({defaultValue:""})],Re.prototype,"cssClass",void 0),me([d({defaultValue:""})],Re.prototype,"title",void 0),me([d({defaultValue:"auto"})],Re.prototype,"overlayDisplayMode",void 0),me([d({defaultValue:"popup"})],Re.prototype,"displayMode",void 0),me([d({defaultValue:"flex"})],Re.prototype,"positionMode",void 0);class Le extends he{constructor(){super(...arguments),this.rendredIdValue=Le.getNextRendredId()}static getNextRendredId(){return Le.renderedId++}get data(){return this._data}set data(e){this._data=e}addVisibilityChangedCallback(e){}removeVisibilityChangedCallback(e){}get renderedId(){return this.rendredIdValue}get owner(){return this.ownerValue}set owner(e){e!==this.owner&&(this.ownerValue=e,this.locStrsChanged())}get visible(){return this.getVisible()}set visible(e){this.setVisible(e)}get enabled(){return this.getEnabled()}set enabled(e){this.setEnabled(e)}get component(){return this.getComponent()}set component(e){this.setComponent(e)}get locTitle(){return this.getLocTitle()}set locTitle(e){this.setLocTitle(e)}get title(){return this.getTitle()}set title(e){this.setTitle(e)}set cssClasses(e){this.cssClassesValue=e}get cssClasses(){return this.cssClassesValue||ye}get isVisible(){return this.visible&&"popup"!==this.mode&&"removed"!==this.mode}get disabled(){return void 0!==this.enabled&&!this.enabled}get canShrink(){return!this.disableShrink&&!!this.iconName}get hasTitle(){return("small"!=this.mode&&(this.showTitle||void 0===this.showTitle)||!this.iconName)&&!!this.title}get hasSubItems(){return!!this.items&&this.items.length>0}getActionBarItemTitleCss(){return(new fe).append(this.cssClasses.itemTitle).append(this.cssClasses.itemTitleWithIcon,!!this.iconName).toString()}getActionBarItemCss(){const e=this.hasTitle;return(new fe).append(this.cssClasses.item).append(this.cssClasses.itemWithTitle,e).append(this.cssClasses.itemAsIcon,!e).append(this.cssClasses.itemActive,!!this.active).append(this.cssClasses.itemPressed,!!this.pressed).append(this.innerCss).toString()}getActionRootCss(){return(new fe).append("sv-action").append(this.css).append("sv-action--space",this.needSpace).append("sv-action--hidden",!this.isVisible).toString()}getTooltip(){return this.tooltip||this.title}getIsTrusted(e){return e.originalEvent?e.originalEvent.isTrusted:e.isTrusted}showPopup(){this.popupModel&&this.popupModel.show()}hidePopup(){this.popupModel&&this.popupModel.hide()}clearPopupTimeouts(){this.showPopupTimeout&&clearTimeout(this.showPopupTimeout),this.hidePopupTimeout&&clearTimeout(this.hidePopupTimeout)}showPopupDelayed(e){this.clearPopupTimeouts(),this.showPopupTimeout=setTimeout(()=>{this.clearPopupTimeouts(),this.showPopup()},e)}hidePopupDelayed(e){var t;(null===(t=this.popupModel)||void 0===t?void 0:t.isVisible)?(this.clearPopupTimeouts(),this.hidePopupTimeout=setTimeout(()=>{this.clearPopupTimeouts(),this.hidePopup(),this.isHovered=!1},e)):(this.clearPopupTimeouts(),this.isHovered=!1)}}Le.renderedId=1,me([d()],Le.prototype,"tooltip",void 0),me([d()],Le.prototype,"showTitle",void 0),me([d()],Le.prototype,"innerCss",void 0),me([d()],Le.prototype,"active",void 0),me([d()],Le.prototype,"pressed",void 0),me([d()],Le.prototype,"popupModel",void 0),me([d()],Le.prototype,"needSeparator",void 0),me([d()],Le.prototype,"template",void 0),me([d({defaultValue:"large"})],Le.prototype,"mode",void 0),me([d()],Le.prototype,"visibleIndex",void 0),me([d()],Le.prototype,"disableTabStop",void 0),me([d()],Le.prototype,"disableShrink",void 0),me([d()],Le.prototype,"disableHide",void 0),me([d({defaultValue:!1})],Le.prototype,"needSpace",void 0),me([d()],Le.prototype,"ariaChecked",void 0),me([d()],Le.prototype,"ariaExpanded",void 0),me([d({defaultValue:"button"})],Le.prototype,"ariaRole",void 0),me([d()],Le.prototype,"iconName",void 0),me([d({defaultValue:24})],Le.prototype,"iconSize",void 0),me([d()],Le.prototype,"markerIconName",void 0),me([d()],Le.prototype,"css",void 0),me([d({defaultValue:!1})],Le.prototype,"isPressed",void 0),me([d({defaultValue:!1})],Le.prototype,"isHovered",void 0);class De extends Le{constructor(e){super(),this.locTitleChanged=()=>{const e=this.locTitle.renderedHtml;this.setPropertyValue("_title",e||void 0)},this.needUpdateMaxDimension=!1,this.needUpdateMinDimension=!1;const t=e instanceof De?e.innerItem:e;if(this.innerItem=t,this.locTitle=t?t.locTitle:null,t)for(var s in t)"locTitle"===s||"title"===s&&this.locTitle&&this.title||(this[s]=t[s]);this.locTitleName&&this.locTitleChanged(),this.locStrChangedInPopupModel()}createLocTitle(){return this.createLocalizableString("title",this,!0)}setSubItems(e){this.markerIconName="icon-next_16x16",this.component=this.getGroupComponentName(),this.items=[...e.items],this.popupModel?this.popupModel.contentComponentData.model.setItems(this.items):this.createPopupForSubitems(e)}createPopupForSubitems(e){const t=Object.assign({},e);t.searchEnabled=!1;const s=ke(t,{horizontalPosition:"right",showPointer:!1,canShrink:!1});s.cssClass="sv-popup-inner",this.popupModel=s}getLocTitle(){return this.locTitleValue}setLocTitle(e){e||this.locTitleValue||(e=this.createLocTitle()),this.locTitleValue&&this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleValue=e,this.locTitleValue.onStringChanged.add(this.locTitleChanged),this.locTitleChanged()}getTitle(){return this._title}setTitle(e){this._title=e}get locTitleName(){return this.locTitle.localizationName}set locTitleName(e){this.locTitle.localizationName=e}locStrsChanged(){super.locStrsChanged(),this.locTooltipChanged(),this.locStrChangedInPopupModel()}doAction(e){const t=e.originalEvent?e.originalEvent:e;return this.action(this,t.isTrusted),t.preventDefault(),t.stopPropagation(),!0}doMouseDown(e){this.isMouseDown=!0}doFocus(e){if(this.onFocus){const t=e.originalEvent?e.originalEvent:e;this.onFocus(this.isMouseDown,t)}this.isMouseDown=!1}locStrChangedInPopupModel(){if(!this.popupModel||!this.popupModel.contentComponentData||!this.popupModel.contentComponentData.model)return;const e=this.popupModel.contentComponentData.model;Array.isArray(e.actions)&&e.actions.forEach(e=>{e.locStrsChanged&&e.locStrsChanged()})}locTooltipChanged(){this.locTooltipName&&(this.tooltip=l(this.locTooltipName,this.locTitle.locale))}getLocale(){return this.owner?this.owner.getLocale():""}getMarkdownHtml(e,t,s){return this.owner?this.owner.getMarkdownHtml(e,t,s):void 0}getProcessedText(e){return this.owner?this.owner.getProcessedText(e):e}getRenderer(e){return this.owner?this.owner.getRenderer(e):null}getRendererContext(e){return this.owner?this.owner.getRendererContext(e):e}setVisible(e){this.visible!==e&&(this._visible=e)}getVisible(){return this._visible}setEnabled(e){this._enabled=e}getEnabled(){return this.enabledIf?this.enabledIf():this._enabled}setComponent(e){this._component=e}getComponent(){return this._component}getGroupComponentName(){return"sv-list-item-group"}initLoadingIndicatorVisibilityObserver(e){"undefined"!=typeof IntersectionObserver&&(this.intersectionVisibilityObserver=new IntersectionObserver(t=>{t.forEach(t=>{const s=t.isIntersecting;e(s)})},{trackVisibility:!0,delay:100}))}dispose(){this.locTitleValue&&this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleChanged=void 0,this.action=void 0,super.dispose(),this.popupModel&&this.popupModel.dispose(),this.intersectionVisibilityObserver&&(this.intersectionVisibilityObserver.disconnect(),this.intersectionVisibilityObserver=void 0)}updateDimension(e,t,s){const n="small"==e?"minDimension":"maxDimension";if(t){const e=t;e.classList.contains("sv-action--hidden")?(e.classList.remove("sv-action--hidden"),this[n]=s(t),e.classList.add("sv-action--hidden")):this[n]=s(t)}}afterRender(){this.afterRenderCallback&&this.afterRenderCallback()}updateMode(e,t){this.updateModeCallback?this.updateModeCallback(e,t):this.afterRenderCallback=()=>{this.updateModeCallback(e,t),this.afterRenderCallback=void 0}}updateDimensions(e,t,s){const n=!s||"large"==s&&"small"!==this.mode?this.mode:s;this.updateMode(n,(n,i)=>{this.updateDimension(n,i,e),s?t():this.updateMode("small"!==n?"small":"large",(s,n)=>{this.updateDimension(s,n,e),t()})})}}me([d()],De.prototype,"id",void 0),me([d({defaultValue:!0})],De.prototype,"_visible",void 0),me([d({onSet:(e,t)=>{t.locTooltipChanged()}})],De.prototype,"locTooltipName",void 0),me([d()],De.prototype,"_enabled",void 0),me([d()],De.prototype,"action",void 0),me([d()],De.prototype,"onFocus",void 0),me([d()],De.prototype,"_component",void 0),me([d()],De.prototype,"items",void 0),me([d({onSet:(e,t)=>{t.locTitleValue.text!==e&&(t.locTitleValue.text=e)}})],De.prototype,"_title",void 0);class Ne{constructor(e){this.item=e,this.funcKey="sv-dropdown-action",this.setupPopupCallbacks()}setupPopupCallbacks(){const e=this.popupModel=this.item.popupModel;e&&e.registerPropertyChangedHandlers(["isVisible"],()=>{e.isVisible?this.item.pressed=!0:this.item.pressed=!1},this.funcKey)}removePopupCallbacks(){this.popupModel&&this.popupModel.unregisterPropertyChangedHandlers(["isVisible"],this.funcKey)}dispose(){this.removePopupCallbacks()}}var Oe;!function(e){e[e.None=0]="None",e[e.Light=1]="Light",e[e.Hard=3]="Hard"}(Oe||(Oe={}));class je extends Ce{hideItemsGreaterN(e){const t=this.getActionsToHide();e=Math.max(e,this.minVisibleItemsCount-(this.visibleActions.length-t.length));const s=[];t.forEach(t=>{e<=0&&(t.mode="popup",s.push(t.innerItem)),e--}),this.hiddenItemsListModel.setItems(s)}getActionsToHide(){return this.visibleActions.filter(e=>!e.disableHide)}updateItemMode(e,t){const s=this.visibleActions;for(let n=s.length-1;n>=0;n--)t>e&&!s[n].disableShrink?(t-=s[n].maxDimension-s[n].minDimension,s[n].mode="small"):s[n].mode="large"}constructor(){super(),this.minVisibleItemsCount=0,this.isResponsivenessDisabled=!1,this.isInitialized=!1,this.dotsItem=function(e,t,s){var n;const i=t.onSelectionChanged;t.onSelectionChanged=(e,...t)=>{o.hasTitle&&(o.title=e.title),i&&i(e,t)};const r=ke(t,s);r.getTargetCallback=Ae;const a=Object.assign({},e,{component:"sv-action-bar-item-dropdown",popupModel:r,action:(t,s)=>{e.action&&e.action(),r.isFocusedContent=r.isFocusedContent||!s,r.show()}}),o=new De(a);return o.data=null===(n=r.contentComponentData)||void 0===n?void 0:n.model,o}({id:"dotsItem-id"+this.id++,css:"sv-dots",innerCss:"sv-dots__item",iconName:"icon-more",visible:!1,tooltip:l("more")},{items:[],allowSelection:!1})}get hiddenItemsListModel(){return this.dotsItem.data}onSet(){super.onSet(),this.raiseUpdate({updateResponsivenessMode:Oe.Hard})}onPush(e){super.onPush(e),this.raiseUpdate({updateResponsivenessMode:Oe.Hard})}onRemove(e){super.onRemove(e),this.raiseUpdate({updateResponsivenessMode:Oe.Hard})}onActionPropertyChanged(e,t){super.onActionPropertyChanged(e,t),"_visible"!=t.name&&"_title"!=t.name||(e.needUpdateMaxDimension=e.visible,e.needUpdateMinDimension=e.visible,this.raiseUpdate({updateResponsivenessMode:Oe.Light})),"disableHide"==t.name&&t.newValue&&"popup"==e.mode&&this.raiseUpdate({updateResponsivenessMode:Oe.Light})}getRenderedActions(){const e=super.getRenderedActions();return 0==e.length||1===e.length&&e[0].iconName?e:e.concat([this.dotsItem])}getAllActions(){return this.actions.concat(this.dotsItem)}getActionMinDimension(e){return e.disableShrink?e.maxDimension:e.minDimension}getVisibleItemsCount(e){let{availableSpace:t,gap:s}=e;t-=this.dotsItem.minDimension+s;let n=0;this.visibleActions[0].disableHide?t+=s:n-=s,this.visibleActions.filter(e=>e.disableHide).forEach(e=>t-=this.getActionMinDimension(e)+s);const i=this.getActionsToHide();if(1===i.length&&i[0].iconName)return 1;for(let e=0;e<i.length;e++)if(n+=this.getActionMinDimension(i[e])+s,n>t)return e}fit(e){var t;if(e.availableSpace<=0)return;e.gap=null!==(t=e.gap)&&void 0!==t?t:0;const{availableSpace:s,gap:n}=e;this.dotsItem.visible=!1;const i=this.visibleActions;let r=-1*e.gap,a=-1*e.gap;i.forEach(e=>{r+=this.getActionMinDimension(e)+n,a+=e.maxDimension+n}),s>=a?this.setActionsMode("large"):s<r?(this.setActionsMode("small"),this.hideItemsGreaterN(this.getVisibleItemsCount(e)),this.dotsItem.visible=!!this.hiddenItemsListModel.actions.length):this.updateItemMode(e.availableSpace,a)}createResponsivityManager(e){return new ve(e,this)}mergeUpdateOptions(e,t){const s=super.mergeUpdateOptions(e,t);return s.updateResponsivenessMode=s.updateResponsivenessMode|t.updateResponsivenessMode,s}raiseUpdate(e){super.raiseUpdate(e)}update(e){var t;super.update(e),e.updateResponsivenessMode&&(null===(t=this.responsivityManager)||void 0===t||t.update(e.updateResponsivenessMode==Oe.Hard))}initResponsivityManager(e){if(this.responsivityManager){if(this.responsivityManager.container==e)return;this.responsivityManager.dispose()}this.isInitialized=!1,this.responsivityManager=this.createResponsivityManager(e),this.responsivityManager.afterInitializeCallback=()=>{this.isInitialized=!0}}resetResponsivityManager(){this.responsivityManager&&(this.responsivityManager.dispose(),this.responsivityManager=void 0)}getRootStyle(){return this.isInitialized||this.isResponsivenessDisabled?void 0:{opacity:0}}setActionsMode(e){this.actions.forEach(t=>{"small"==e&&t.disableShrink?t.mode="large":t.mode=e})}dispose(){super.dispose(),this.dotsItem.data.dispose(),this.dotsItem.dispose(),this.resetResponsivityManager()}}me([d()],je.prototype,"isInitialized",void 0);class qe{constructor(){this.cancelQueue=[]}getMsFromRule(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}reflow(e){return e.offsetHeight}getAnimationsCount(e){let t="";return getComputedStyle&&(t=getComputedStyle(e).animationName),t&&"none"!=t?t.split(", ").length:0}getAnimationDuration(e){const t=getComputedStyle(e),s=t.animationDelay.split(", "),n=t.animationDuration.split(", ");let i=0;for(let e=0;e<Math.max(n.length,s.length);e++)i=Math.max(i,this.getMsFromRule(n[e%n.length])+this.getMsFromRule(s[e%s.length]));return i}addCancelCallback(e){this.cancelQueue.push(e)}removeCancelCallback(e){this.cancelQueue.indexOf(e)>=0&&this.cancelQueue.splice(this.cancelQueue.indexOf(e),1)}onAnimationEnd(e,t,s){let n,i=this.getAnimationsCount(e);const r=(s=!0)=>{t(s),clearTimeout(n),this.removeCancelCallback(r),e.removeEventListener("animationend",a)},a=e=>{e.target==e.currentTarget&&--i<=0&&r(!1)};i>0?(e.addEventListener("animationend",a),this.addCancelCallback(r),n=setTimeout(()=>{r(!1)},this.getAnimationDuration(e)+10)):t(!0)}afterAnimationRun(e,t){e&&t&&t.onAfterRunAnimation&&t.onAfterRunAnimation(e)}beforeAnimationRun(e,t){e&&t&&t.onBeforeRunAnimation&&t.onBeforeRunAnimation(e)}getCssClasses(e){return e.cssClass.replace(/\s+$/,"").split(/\s+/)}runAnimation(e,t,s){e&&(null==t?void 0:t.cssClass)?(this.reflow(e),this.getCssClasses(t).forEach(t=>{e.classList.add(t)}),this.onAnimationEnd(e,s,t)):s(!0)}clearHtmlElement(e,t){e&&t.cssClass&&this.getCssClasses(t).forEach(t=>{e.classList.remove(t)}),this.afterAnimationRun(e,t)}onNextRender(e,t=!1){if(!t&&n.isAvailable()){let t;const s=()=>{e(!0),cancelAnimationFrame(t)};t=n.requestAnimationFrame(()=>{t=n.requestAnimationFrame(()=>{e(!1),this.removeCancelCallback(s)})}),this.addCancelCallback(s)}else e(!0)}cancel(){[].concat(this.cancelQueue).forEach(e=>e()),this.cancelQueue=[]}}class Me extends qe{onEnter(e){const t=e.getAnimatedElement(),s=e.getEnterOptions?e.getEnterOptions():{};this.beforeAnimationRun(t,s),this.runAnimation(t,s,()=>{this.clearHtmlElement(t,s)})}onLeave(e,t){const s=e.getAnimatedElement(),n=e.getLeaveOptions?e.getLeaveOptions():{};this.beforeAnimationRun(s,n),this.runAnimation(s,n,e=>{t(),this.onNextRender(()=>{this.clearHtmlElement(s,n)},e)})}}class Fe extends qe{runGroupAnimation(e,t,s,n,i){const r={isAddingRunning:t.length>0,isDeletingRunning:s.length>0,isReorderingRunning:n.length>0},a=t.map(t=>e.getAnimatedElement(t)),o=t.map(t=>e.getEnterOptions?e.getEnterOptions(t,r):{}),l=s.map(t=>e.getAnimatedElement(t)),u=s.map(t=>e.getLeaveOptions?e.getLeaveOptions(t,r):{}),d=n.map(t=>e.getAnimatedElement(t.item)),h=n.map(t=>e.getReorderOptions?e.getReorderOptions(t.item,t.movedForward,r):{});t.forEach((e,t)=>{this.beforeAnimationRun(a[t],o[t])}),s.forEach((e,t)=>{this.beforeAnimationRun(l[t],u[t])}),n.forEach((e,t)=>{this.beforeAnimationRun(d[t],h[t])});let c=t.length+s.length+d.length;const p=e=>{--c<=0&&(i&&i(),this.onNextRender(()=>{t.forEach((e,t)=>{this.clearHtmlElement(a[t],o[t])}),s.forEach((e,t)=>{this.clearHtmlElement(l[t],u[t])}),n.forEach((e,t)=>{this.clearHtmlElement(d[t],h[t])})},e))};t.forEach((e,t)=>{this.runAnimation(a[t],o[t],p)}),s.forEach((e,t)=>{this.runAnimation(l[t],u[t],p)}),n.forEach((e,t)=>{this.runAnimation(d[t],h[t],p)})}}class Be{constructor(e,t,s){this.animationOptions=e,this.update=t,this.getCurrentValue=s,this._debouncedSync=be(e=>{this.cancelAnimations();try{this._sync(e)}catch(t){this.update(e)}})}onNextRender(e,t){const s=this.animationOptions.getRerenderEvent();if(s){const n=()=>{s.remove(i),this.cancelCallback=void 0},i=(s,i)=>{i.isCancel?t&&t():e(),n()};this.cancelCallback=()=>{t&&t(),n()},s.add(i)}else{if(!n.isAvailable())throw new Error("Can't get next render");{const s=n.requestAnimationFrame(()=>{e(),this.cancelCallback=void 0});this.cancelCallback=()=>{t&&t(),cancelAnimationFrame(s),this.cancelCallback=void 0}}}}sync(e){this.animationOptions.isAnimationEnabled()?this._debouncedSync.run(e):(this.cancel(),this.update(e))}cancel(){this._debouncedSync.cancel(),this.cancelAnimations()}cancelAnimations(){this.cancelCallback&&this.cancelCallback(),this.animation.cancel()}}class ze extends Be{constructor(){super(...arguments),this.animation=new Me}_sync(e){e!==this.getCurrentValue()?e?(this.onNextRender(()=>{this.animation.onEnter(this.animationOptions)}),this.update(e)):this.animation.onLeave(this.animationOptions,()=>{this.update(e)}):this.update(e)}}class He extends Be{constructor(){super(...arguments),this.animation=new Fe}_sync(e){var t,s;e=[].concat(e);const n=[].concat(this.getCurrentValue()),i=null===(t=this.animationOptions.allowSyncRemovalAddition)||void 0===t||t;let r=function(e,t,s){const n=new Map,i=new Map,r=new Map,a=new Map;e.forEach(e=>{const t=s(e);if(n.has(t))throw new Error("keys must be unique");n.set(s(e),e)}),t.forEach(e=>{const t=s(e);if(i.has(t))throw new Error("keys must be unique");i.set(t,e)});const o=[],l=[];i.forEach((e,t)=>{n.has(t)?r.set(t,r.size):o.push(e)}),n.forEach((e,t)=>{i.has(t)?a.set(t,a.size):l.push(e)});const u=[];r.forEach((e,t)=>{const s=a.get(t),n=i.get(t);s!==e&&u.push({item:n,movedForward:s<e})});const d=new Array(e.length);let h=0;const c=Array.from(r.keys());e.forEach((e,t)=>{r.has(s(e))?(d[t]=i.get(c[h]),h++):d[t]=e});const p=new Map;let g=[];d.forEach(e=>{const t=s(e);i.has(t)?g.length>0&&(p.set(t,g),g=[]):g.push(e)});const m=new Array;return i.forEach((e,t)=>{p.has(t)&&p.get(t).forEach(e=>{m.push(e)}),m.push(e)}),g.forEach(e=>{m.push(e)}),{reorderedItems:u,deletedItems:l,addedItems:o,mergedItems:m}}(n,e,null!==(s=this.animationOptions.getKey)&&void 0!==s?s:e=>e);!i&&(r.reorderedItems.length>0||r.addedItems.length>0)&&(r.deletedItems=[],r.mergedItems=e),this.animationOptions.onCompareArrays&&this.animationOptions.onCompareArrays(r);let{addedItems:a,reorderedItems:o,deletedItems:l,mergedItems:u}=r;const d=()=>{this.animation.runGroupAnimation(this.animationOptions,a,l,o,()=>{l.length>0&&this.update(e)})};[a,l,o].some(e=>e.length>0)?l.length<=0||o.length>0||a.length>0?(this.onNextRender(d,()=>{this.update(e)}),this.update(u)):d():this.update(e)}}class Qe extends Be{constructor(e,t,s,n){super(e,t,s),this.mergeValues=n,this.animation=new Fe}_sync(e){const t=[].concat(this.getCurrentValue());if(t[0]!==e[0]){const s=this.mergeValues?this.mergeValues(e,t):[].concat(t,e);this.onNextRender(()=>{this.animation.runGroupAnimation(this.animationOptions,e,t,[],()=>{this.update(e)})},()=>this.update(e)),this.update(s,!0)}else this.update(e)}}class Ue extends he{constructor(){super(),this.createLocTitleProperty()}createLocTitleProperty(){return this.createLocalizableString("title",this,!0)}get isPage(){return!1}get isPanel(){return!1}get isQuestion(){return!1}get isSurvey(){return!1}get title(){return this.getLocalizableStringText("title",this.getDefaultTitleValue())}set title(e){this.setTitleValue(e)}get locTitle(){return this.getLocalizableString("title")}get locRenderedTitle(){return this.locTitle}getDefaultTitleValue(){}setTitleValue(e){this.setLocalizableStringText("title",e)}get hasDescription(){return this.getPropertyValue("hasDescription",void 0,()=>this.calcDescriptionVisibility())}set hasDescription(e){this.setPropertyValue("hasDescription",e)}calcDescriptionVisibility(){const e=this.description;let t=!1;if(this.isDesignMode){const e=I.findProperty(this.getType(),"description");t=!!(null==e?void 0:e.placeholder)}return!!e||t&&this.isDesignMode}resetDescriptionVisibility(){this.resetPropertyValue("hasDescription")}get locDescription(){return this.getLocalizableString("description")}get titleTagName(){let e=this.getDefaultTitleTagName();const t=this.getSurvey();return t?t.getElementTitleTagName(this,e):e}getDefaultTitleTagName(){return xt.titleTags[this.getType()]}get hasTitle(){return this.title.length>0}get hasTitleActions(){return!1}get hasTitleEvents(){return this.hasTitleActions}getTitleToolbar(){return null}getTitleOwner(){}get isTitleOwner(){return!!this.getTitleOwner()}get isTitleRenderedAsString(){return this.getIsTitleRenderedAsString()}toggleState(){}get cssClasses(){return{}}get cssTitle(){return""}get ariaTitleId(){}get ariaDescriptionId(){}get titleTabIndex(){}get titleAriaExpanded(){}get titleAriaRole(){}get ariaLabel(){return this.locTitle.renderedHtml}get titleAriaLabel(){return this.ariaLabel}getIsTitleRenderedAsString(){return!this.isTitleOwner}}me([d({localizable:!0,onSet:(e,t)=>{t.resetDescriptionVisibility()}})],Ue.prototype,"description",void 0);class We extends Ue{static getProgressInfoByElements(e,t){const s=he.createProgressInfo();for(let t=0;t<e.length;t++){if(!e[t].isVisible)continue;const n=e[t].getProgressInfo();s.questionCount+=n.questionCount,s.answeredQuestionCount+=n.answeredQuestionCount,s.requiredQuestionCount+=n.requiredQuestionCount,s.requiredAnsweredQuestionCount+=n.requiredAnsweredQuestionCount}return t&&s.questionCount>0&&(0==s.requiredQuestionCount&&(s.requiredQuestionCount=1),s.answeredQuestionCount>0&&(s.requiredAnsweredQuestionCount=1)),s}static IsNeedScrollIntoView(e,t,s){const i=s?-1:e.getBoundingClientRect().top;let r=i<0,a=-1;if(!r&&t&&(a=e.getBoundingClientRect().left,r=a<0),!r&&n.isAvailable()){const e=n.getInnerHeight();if(r=e>0&&e<i,!r&&t){const e=n.getInnerWidth();r=e>0&&e<a}}return r}static ScrollIntoView(e,t,s){if(e.scrollIntoView(t),"function"==typeof s){let t=null,i=0;const r=()=>{const n=e.getBoundingClientRect().top;if(n===t){if(i++>2)return void s()}else t=n,i=0;requestAnimationFrame(r)};n.requestAnimationFrame(r)}}static ScrollElementToTop(e,t,s,n){return We.ScrollElementToViewCore(e,!1,t,s,n)}static ScrollElementToViewCore(e,t,s,n,i){if(!e||!e.scrollIntoView)return i&&i(),!1;const r=We.IsNeedScrollIntoView(e,t,s);return r?We.ScrollIntoView(e,n,i):i&&i(),r}static GetFirstNonTextElement(e,t=!1){if(!e||!e.length||0==e.length)return null;if(t){let t=e[0];"#text"===t.nodeName&&(t.data=""),t=e[e.length-1],"#text"===t.nodeName&&(t.data="")}for(let t=0;t<e.length;t++)if("#text"!=e[t].nodeName&&"#comment"!=e[t].nodeName)return e[t];return null}static FocusElement(e,t,s){if(!e||!i.isAvailable())return!1;const n=!t&&We.focusElementCore(e,s);return n||setTimeout(()=>{We.focusElementCore(e,s)},t?100:10),n}static focusElementCore(e,t){const{root:s}=xt.environment;if(!s&&!t)return!1;const n=t?t.querySelector(`#${CSS.escape(e)}`):s.getElementById(e);return!(!n||n.disabled||"none"===n.style.display||null===n.offsetParent||(We.ScrollElementToViewCore(n,!0,!1),n.focus(),0))}get effectiveColSpan(){const e=this.getPropertyValueWithoutDefault("effectiveColSpan");return void 0!==e?e:(this.setRootStyle(),this.getPropertyValue("effectiveColSpan"))}get colSpan(){return this.getPropertyValue("colSpan",1)}set colSpan(e){this.setPropertyValue("colSpan",e)}constructor(e){super(),this.selectedElementInDesignValue=this,this.disableDesignActions=We.CreateDisabledDesignElements,this.parentQuestionValue=null,this.isContentElement=!1,this.isEditableTemplateElement=!1,this.isInteractiveDesignElement=!0,this.isSingleInRow=!0,this._renderedIsExpanded=!0,this._isAnimatingCollapseExpand=!1,this.animationCollapsed=new ze(this.getExpandCollapseAnimationOptions(),e=>{this._renderedIsExpanded=e,this.animationAllowed&&(e?this.isAnimatingCollapseExpand=!0:this.updateElementCss(!1))},()=>this.renderedIsExpanded),this.onAfterRenderElement=this.addEvent(),this.setPropertyValueDirectly("name",this.getValidName(e)),this.createNewArray("errors"),this.createNewArray("renderedErrors"),this.createNewArray("titleActions"),this.registerPropertyChangedHandlers(["isReadOnly"],()=>{this.onReadOnlyChanged()}),this.registerPropertyChangedHandlers(["errors"],()=>{this.updateVisibleErrors()}),this.registerPropertyChangedHandlers(["isSingleInRow"],()=>{this.updateElementCss(!1)}),this.registerPropertyChangedHandlers(["minWidth","maxWidth","renderWidth","allowRootStyle","parent"],()=>{this.updateRootStyle()}),this.registerPropertyChangedHandlers(["effectiveColSpan"],e=>{this.colSpan=e})}onPropertyValueChanged(e,t,s){super.onPropertyValueChanged(e,t,s),"state"===e&&(this.updateElementCss(!1),this.notifyStateChanged(t),this.stateChangedCallback&&this.stateChangedCallback())}getSkeletonComponentNameCore(){return this.survey?this.survey.getSkeletonComponentName(this):"sv-skeleton"}canUpdateValueOnVisibleChanged(){return!this.isLoadingFromJson&&!!this.survey&&!this.survey.isSettingData()}get parentQuestion(){return this.parentQuestionValue}setParentQuestion(e){this.parentQuestionValue=e,this.onParentQuestionChanged()}onParentQuestionChanged(){}updateElementVisibility(){this.setPropertyValue("isVisible",this.isVisible)}get skeletonComponentName(){return this.getSkeletonComponentNameCore()}get state(){return this.getPropertyValue("state")}set state(e){this.setPropertyValue("state",e),this.renderedIsExpanded=!this.isCollapsed}notifyStateChanged(e){this.survey&&this.survey.elementContentVisibilityChanged(this)}get isCollapsed(){return"collapsed"===this.state&&!this.isDesignMode}get isExpanded(){return"expanded"===this.state}collapse(){this.isDesignMode||(this.state="collapsed")}expand(){this.state="expanded"}toggleState(){return this.isCollapsed?(this.expand(),!0):!this.isExpanded||(this.collapse(),!1)}get hasStateButton(){return this.isExpanded||this.isCollapsed}get shortcutText(){return this.title||this.name}getTitleToolbar(){return this.titleToolbarValue||(this.titleToolbarValue=this.createActionContainer(!0),this.titleToolbarValue.locOwner=this,this.titleToolbarValue.containerCss=(this.isPanel?this.cssClasses.panel.titleBar:this.cssClasses.titleBar)||"sv-action-title-bar",this.titleToolbarValue.setItems(this.getTitleActions()),this.titleToolbarValue.flushUpdates()),this.titleToolbarValue}createActionContainer(e){const t=e?new je:new Ce;return this.survey&&this.survey.getCss().actionBar&&(t.cssClasses=this.survey.getCss().actionBar),t}get titleActions(){return this.getPropertyValue("titleActions")}getTitleActions(){return this.isTitleActionRequested||(this.updateTitleActions(),this.isTitleActionRequested=!0),this.titleActions}getDefaultTitleActions(){return[]}updateTitleActions(){let e=this.getDefaultTitleActions();this.survey&&(e=this.survey.getUpdatedElementTitleActions(this,e)),this.setPropertyValue("titleActions",e)}locStrsChanged(){super.locStrsChanged(),this.titleToolbarValue&&this.titleToolbarValue.locStrsChanged()}get hasTitleActions(){return this.getTitleActions().length>0}get hasTitleEvents(){return void 0!==this.state&&"default"!==this.state}get titleTabIndex(){return this.isPage||"default"===this.state?void 0:0}get titleAriaExpanded(){if(!this.isPage&&"default"!==this.state)return"expanded"===this.state?"true":"false"}get titleAriaRole(){if(!this.isPage&&"default"!==this.state)return"button"}setSurveyImpl(e,t){this.surveyImplValue=e,this.surveyImplValue?(this.surveyDataValue=this.surveyImplValue.getSurveyData(),this.setSurveyCore(this.surveyImplValue.getSurvey()),this.textProcessorValue=this.createTextProcessor(),this.onSetData()):(this.setSurveyCore(null),this.surveyDataValue=null,this.textProcessorValue=null),this.survey&&(this.resetDescriptionVisibility(),this.clearCssClasses()),this.blockAnimations(),this.renderedIsExpanded=!this.isCollapsed,this.releaseAnimations()}getValueGetterContext(){const e=this.data;return e?e.getValueGetterContext():super.getValueGetterContext()}createTextProcessor(){return this.surveyImplValue.getTextProcessor()}canRunConditions(){return super.canRunConditions()&&!!this.data}getDataFilteredProperties(){var e=this.data?this.data.getFilteredProperties():{};return e.question=this,e}get surveyImpl(){return this.surveyImplValue}__setData(e){this.surveyDataValue=e}get data(){return this.surveyDataValue}get survey(){return this.getSurvey()}getSurvey(e=!1){return this.surveyValue||this.surveyImplValue&&this.setSurveyCore(this.surveyImplValue.getSurvey()),this.surveyValue}setSurveyCore(e){this.surveyValue=e,this.surveyChangedCallback&&this.surveyChangedCallback()}get skeletonHeight(){let e;return this.survey&&this.survey.skeletonHeight&&(e=this.survey.skeletonHeight+"px"),e}get isInternal(){return this.isContentElement}get areInvisibleElementsShowing(){const e=this.parentQuestion;return(!e||!1!==e.areInvisibleElementsShowing)&&!!this.survey&&this.survey.areInvisibleElementsShowing&&!this.isContentElement}get isVisible(){return!0}get isReadOnly(){return this.readOnly}get readOnly(){return this.getPropertyValue("readOnly")}set readOnly(e){this.readOnly!=e&&(this.setPropertyValue("readOnly",e),this.isLoadingFromJson||this.setPropertyValue("isReadOnly",this.isReadOnly))}onReadOnlyChanged(){this.readOnlyChangedCallback&&this.readOnlyChangedCallback()}get css(){return this.survey?this.survey.getCss():{}}get cssClassesValue(){let e=this.getPropertyValueWithoutDefault("cssClassesValue");return e||this.isCssValueCalculating||(this.isCssValueCalculating=!0,e=this.createCssClassesValue(),this.isCssValueCalculating=!1),e}createCssClassesValue(){const e=this.calcCssClasses(this.css);return this.setPropertyValue("cssClassesValue",e),this.onCalcCssClasses(e),this.updateElementCssCore(this.cssClassesValue),e}onCalcCssClasses(e){}get cssClasses(){return this.cssClassesValue,this.survey?(this.cssClassesValue||this.createCssClassesValue(),this.cssClassesValue):this.calcCssClasses(this.css)}get cssTitleNumber(){const e=this.cssClasses;return e.number?e.number:e.panel?e.panel.number:void 0}get cssRequiredMark(){const e=this.cssClasses;return e.requiredMark||e.panel&&e.panel.requiredMark}getCssTitleExpandableSvg(){return"default"===this.state?null:this.cssClasses.titleExpandableSvg}calcCssClasses(e){}updateElementCssCore(e){}get cssError(){return""}updateElementCss(e){this.clearCssClasses()}clearCssClasses(){this.resetPropertyValue("cssClassesValue")}getIsLoadingFromJson(){return!!super.getIsLoadingFromJson()||!!this.surveyValue&&this.surveyValue.isLoadingFromJson}get name(){return this.getPropertyValue("name","")}set name(e){var t=this.name;this.setPropertyValue("name",this.getValidName(e)),!this.isLoadingFromJson&&t&&this.onNameChanged(t)}getValidName(e){if(e){e=e.trim();const t=xt.itemValueSeparator;t&&e.indexOf(t)>-1&&(e=e.replace(t,""))}return e}onNameChanged(e){}updateBindingValue(e,t){this.data&&!this.isTwoValueEquals(t,this.data.getValue(e))&&this.data.setValue(e,t,!1)}get errors(){return this.getPropertyValue("errors")}set errors(e){this.setPropertyValue("errors",e)}get renderedErrors(){return this.getPropertyValue("renderedErrors")}set renderedErrors(e){this.setPropertyValue("renderedErrors",e)}calcRenderedErrors(){const e=this.calcCurrentNotificationType();return this.errors.filter(t=>t.visible&&t.notificationType===e)}get currentNotificationType(){return this.getPropertyValue("currentNotificationType",void 0,()=>this.calcCurrentNotificationType())}set currentNotificationType(e){this.setPropertyValue("currentNotificationType",e)}calcCurrentNotificationType(){let e="";const t=["info","warning","error"];for(let s=0;s<this.errors.length;s++){const n=this.errors[s];if(!n.visible)continue;const i=n.notificationType;e?t.indexOf(i)>t.indexOf(e)&&(e=i):e=i}return e}updateVisibleErrors(){for(var e=0,t=0;t<this.errors.length;t++)this.errors[t].visible&&e++;this.hasVisibleErrors=e>0,this.renderedErrors=this.calcRenderedErrors(),this.setPropertyValue("currentNotificationType",this.calcCurrentNotificationType()),this.currentNotificationType=this.calcCurrentNotificationType()}get containsErrors(){return this.getPropertyValue("containsErrors",!1)}updateContainsErrors(){this.setPropertyValue("containsErrors",this.getContainsErrors())}getContainsErrors(){return this.errors.length>0}get selectedElementInDesign(){return this.selectedElementInDesignValue}set selectedElementInDesign(e){this.selectedElementInDesignValue=e}updateCustomWidgets(){}onSurveyLoad(){}get wasRendered(){return!!this.wasRenderedValue}resetWasRendered(){this.wasRenderedValue=!1}onFirstRendering(){this.wasRendered||(this.wasRenderedValue=!0,this.onFirstRenderingCore())}onFirstRenderingCore(){}endLoadingFromJson(){super.endLoadingFromJson(),this.survey||this.onSurveyLoad()}setVisibleIndex(e){return 0}delete(e){}getLocale(){return this.survey?this.survey.getLocale():this.locOwner?this.locOwner.getLocale():""}getMarkdownHtml(e,t,s){return this.survey?this.survey.getSurveyMarkdownHtml(this,e,t,s):this.locOwner?this.locOwner.getMarkdownHtml(e,t,s):void 0}getRenderer(e,t){return this.survey&&"function"==typeof this.survey.getRendererForString?this.survey.getRendererForString(this,e,t):this.locOwner&&"function"==typeof this.locOwner.getRenderer?this.locOwner.getRenderer(e):null}getRendererContext(e,t){return this.survey&&"function"==typeof this.survey.getRendererContextForString?this.survey.getRendererContextForString(this,e,t):this.locOwner&&"function"==typeof this.locOwner.getRendererContext?this.locOwner.getRendererContext(e):e}getProcessedText(e){return this.isLoadingFromJson?e:this.textProcessor?this.textProcessor.processText(e,this.getUseDisplayValuesInDynamicTexts()):this.locOwner?this.locOwner.getProcessedText(e):e}getUseDisplayValuesInDynamicTexts(){return!0}removeSelfFromList(e){if(!e||!Array.isArray(e))return;const t=e.indexOf(this);t>-1&&e.splice(t,1)}get textProcessor(){return this.textProcessorValue}getProcessedHtml(e){return e&&this.textProcessor?this.textProcessor.processText(e,!0):e}onSetData(){}get parent(){return this.getPropertyValue("parent",null)}set parent(e){this.setPropertyValue("parent",e)}getPage(e){for(;e&&e.parent;)e=e.parent;return e&&e.isPage?e:null}moveToBase(e,t,s=null){if(!t)return!1;e.removeElement(this);let n=-1;return a.isNumber(s)&&(n=parseInt(s)),-1==n&&s&&s.getType&&(n=t.indexOf(s)),t.addElement(this,n),!0}setPage(e,t){const s=this.getPage(e);this.prevSurvey=this.survey,"string"==typeof t&&this.getSurvey().pages.forEach(e=>{t===e.name&&(t=e)}),s!==t&&(e&&e.removeElement(this),t&&t.addElement(this,-1),this.prevSurvey=void 0)}getSearchableLocKeys(e){e.push("title"),e.push("description")}get hasParent(){return this.parent&&!this.parent.isPage||void 0===this.parent}shouldAddRunnerStyles(){return!this.isDesignMode}get isCompact(){return this.survey&&this.survey.isCompact}canHaveFrameStyles(){var e;return(null===(e=this.survey)||void 0===e?void 0:e.currentSingleElement)===this||void 0!==this.parent&&(!this.hasParent||this.parent&&this.parent.showPanelAsPage)}getHasFrameV2(){return this.shouldAddRunnerStyles()&&this.canHaveFrameStyles()}getIsNested(){return this.shouldAddRunnerStyles()&&!this.canHaveFrameStyles()}getCssRoot(e){const t=!!this.isCollapsed||!!this.isExpanded;return(new fe).append(e.withFrame,this.getHasFrameV2()&&!this.isCompact).append(e.compact,this.isCompact&&this.getHasFrameV2()).append(e.collapsed,!!this.isCollapsed).append(e.expandableAnimating,t&&this.isAnimatingCollapseExpand).append(e.expanded,!!this.isExpanded&&this.renderedIsExpanded).append(e.expandable,t).append(e.nested,this.getIsNested()).toString()}get width(){return this.getPropertyValue("width","")}set width(e){this.setPropertyValue("width",e)}get minWidth(){return this.getPropertyValue("minWidth")}set minWidth(e){this.setPropertyValue("minWidth",e)}get maxWidth(){return this.getPropertyValue("maxWidth")}set maxWidth(e){this.setPropertyValue("maxWidth",e)}get renderWidth(){return this.getPropertyValue("renderWidth","")}set renderWidth(e){this.setPropertyValue("renderWidth",e)}get indent(){return this.getPropertyValue("indent")}set indent(e){this.setPropertyValue("indent",e)}get rightIndent(){return this.getPropertyValue("rightIndent",0)}set rightIndent(e){this.setPropertyValue("rightIndent",e)}getRootStyle(){const e={};return this.paddingLeft&&(e["--sv-element-add-padding-left"]=this.paddingLeft),this.paddingRight&&(e["--sv-element-add-padding-right"]=this.paddingRight),e}get paddingLeft(){return this.getPropertyValue("paddingLeft",void 0,()=>this.calcPaddingLeft())}calcPaddingLeft(){return""}get paddingRight(){return this.getPropertyValue("paddingRight",void 0,()=>this.calcPaddingRight())}set paddingRight(e){this.setPropertyValue("paddingRight",e)}calcPaddingRight(){return""}resetIndents(){this.resetPropertyValue("paddingLeft"),this.resetPropertyValue("paddingRight")}get rootStyle(){return this.getPropertyValue("rootStyle",void 0,()=>this.calcRootStyle())}set rootStyle(e){this.setPropertyValue("rootStyle",e)}updateRootStyle(){this.getPropertyValueWithoutDefault("rootStyle")?this.setRootStyle():this.resetPropertyValue("effectiveColSpan")}setRootStyle(){this.rootStyle=this.calcRootStyle()}calcRootStyle(){const e={};let t;if(this.parent&&(t=this.parent.getColumsForElement(this).reduce((e,t)=>t.effectiveWidth+e,0),t&&100!==t&&(e.flexGrow=1,e.flexShrink=0,e.flexBasis=t+"%",e.minWidth=void 0,e.maxWidth=this.maxWidth)),0==Object.keys(e).length){let t=""+this.minWidth;if(t&&"auto"!=t){if(-1!=t.indexOf("px")&&this.survey){t=t.replace("px","");let e=parseFloat(t);isNaN(e)||(t=e*this.survey.widthScale/100,t+="px")}t="min(100%, "+t+")"}this.allowRootStyle&&this.renderWidth&&(e.flexGrow=1,e.flexShrink=1,e.flexBasis=this.renderWidth,e.minWidth=t,e.maxWidth=this.maxWidth)}return e}isContainsSelection(e){let t;const s=i.getDocument();if(i.isAvailable()&&s&&s.selection)t=s.selection.createRange().parentElement();else{var r=n.getSelection();if(r&&r.rangeCount>0){const e=r.getRangeAt(0);e.startOffset!==e.endOffset&&(t=e.startContainer.parentNode)}}return t==e}get clickTitleFunction(){if(this.needClickTitleFunction())return e=>{if(!e||!this.isContainsSelection(e.target))return this.processTitleClick()}}needClickTitleFunction(){return"default"!==this.state}processTitleClick(){"default"!==this.state&&this.toggleState()}get hasAdditionalTitleToolbar(){return!1}get additionalTitleToolbar(){return this.getAdditionalTitleToolbar()}getAdditionalTitleToolbar(){return null}getCssTitle(e){if(!e)return"";const t="default"!==this.state;return(new fe).append(e.title).append(e.titleNumInline,(this.no||"").length>4||t).append(e.titleExpandable,t).append(e.titleExpanded,this.isExpanded).append(e.titleCollapsed,this.isCollapsed).append(e.titleDisabled,this.isDisabledStyle).append(e.titleReadOnly,this.isReadOnly).append(e.titleOnError,this.containsErrors).toString()}get isDisabledStyle(){return this.getIsDisableAndReadOnlyStyles(!1)[1]}get isReadOnlyStyle(){return this.getIsDisableAndReadOnlyStyles(!1)[0]}getIsDisableAndReadOnlyStyles(e){const t=this.isPreviewStyle;return[(e||this.isReadOnly)&&!t,!1]}get isPreviewStyle(){return!!this.survey&&"preview"===this.survey.state}localeChanged(){super.localeChanged(),this.resetDescriptionVisibility(),this.errors.length>0&&this.errors.forEach(e=>{e.updateText()})}setWrapperElement(e){this.wrapperElement=e}getWrapperElement(){return this.wrapperElement}set isAnimatingCollapseExpand(e){e!==this._isAnimatingCollapseExpand&&(this._isAnimatingCollapseExpand=e,this.updateElementCss(!1))}get isAnimatingCollapseExpand(){return this._isAnimatingCollapseExpand||this._renderedIsExpanded!=this.isExpanded}onElementExpanded(e){}getExpandCollapseAnimationOptions(){const e=e=>{this.isAnimatingCollapseExpand=!0,bt(e)},t=e=>{this.isAnimatingCollapseExpand=!1,yt(e)};return{getRerenderEvent:()=>this.onElementRerendered,getEnterOptions:()=>({cssClass:(this.isPanel?this.cssClasses.panel:this.cssClasses).contentEnter,onBeforeRunAnimation:e,onAfterRunAnimation:e=>{t(e),this.onElementExpanded(!0)}}),getLeaveOptions:()=>({cssClass:(this.isPanel?this.cssClasses.panel:this.cssClasses).contentLeave,onBeforeRunAnimation:e,onAfterRunAnimation:t}),getAnimatedElement:()=>{var e;const t=this.isPanel?this.cssClasses.panel:this.cssClasses;if(t.content){const s=ht(t.content);if(s)return null===(e=this.getWrapperElement())||void 0===e?void 0:e.querySelector(`:scope ${s}`)}},isAnimationEnabled:()=>this.isExpandCollapseAnimationEnabled}}get isExpandCollapseAnimationEnabled(){return this.animationAllowed&&!this.isDesignMode}set renderedIsExpanded(e){const t=this._renderedIsExpanded;this.animationCollapsed.sync(e),this.isExpandCollapseAnimationEnabled||t||!this.renderedIsExpanded||this.onElementExpanded(!1)}get renderedIsExpanded(){return!!this._renderedIsExpanded}getIsAnimationAllowed(){return super.getIsAnimationAllowed()&&!!this.survey&&!this.survey.isEndLoadingFromJson}afterRenderCore(e){this.onAfterRenderElement.fire(this,{htmlElement:e})}dispose(){super.dispose(),this.titleToolbarValue&&this.titleToolbarValue.dispose()}}We.CreateDisabledDesignElements=!1,me([d({defaultValue:!1})],We.prototype,"hasVisibleErrors",void 0),me([d({defaultValue:!0})],We.prototype,"isSingleInRow",void 0),me([d({defaultValue:!0})],We.prototype,"allowRootStyle",void 0),me([d()],We.prototype,"_renderedIsExpanded",void 0);class Ge{constructor(e,t,s=100){this._elements=e,this._renderedHandler=t,this._elementsToRenderCount=0,this._elementsToRenderTimer=void 0,this._elementRenderedHandler=(e,t)=>{var s;null===(s=e.onAfterRenderElement)||void 0===s||s.remove(this._elementRenderedHandler),this._elementsToRenderCount--,this._elementsToRenderCount<=0&&this.visibleElementsRendered()},this._elements.forEach(e=>{e.onAfterRenderElement&&(e.onAfterRenderElement.add(this._elementRenderedHandler),this._elementsToRenderCount++)}),this._elementsToRenderCount>0?this._elementsToRenderTimer=setTimeout(()=>{this._elementsToRenderCount>0&&this.visibleElementsRendered()},s):this.visibleElementsRendered()}stopWaitingForElementsRendering(){this._elementsToRenderTimer&&(clearTimeout(this._elementsToRenderTimer),this._elementsToRenderTimer=void 0),this._elements.forEach(e=>{var t;null===(t=e.onAfterRenderElement)||void 0===t||t.remove(this._elementRenderedHandler)}),this._elementsToRenderCount=0}visibleElementsRendered(){const e=this._renderedHandler;this.dispose(),"function"==typeof e&&e()}dispose(){this.stopWaitingForElementsRendering(),this._elements=void 0,this._renderedHandler=void 0}}class Ze{static get defaultLocale(){return xt.localization.defaultLocaleName}static set defaultLocale(e){xt.localization.defaultLocaleName=e}get localizationName(){return this._localizationName}set localizationName(e){this._localizationName!=e&&(this._localizationName=e,this.strChanged())}get allowLineBreaks(){var e;return void 0===this._allowLineBreaks&&(this._allowLineBreaks=!1,this.name&&this.owner instanceof Ue&&(this._allowLineBreaks="text"==(null===(e=I.findProperty(this.owner.getType(),this.name))||void 0===e?void 0:e.type))),this._allowLineBreaks}constructor(e,t=!1,s,n){this.owner=e,this.useMarkdown=t,this.name=s,this.values={},this.htmlValues={},this.onStringChanged=new ge,this._localizationName=n,this.onCreating()}getIsMultiple(){return!1}get locale(){if(this.owner&&this.owner.getLocale){const e=this.owner.getLocale();if(e||!this.sharedData)return e}return this.sharedData?this.sharedData.locale:""}get isDefautlLocale(){const e=this.locale;return!e||e===xt.defaultLocaleName}strChanged(){this.isTextRequested&&(this.searchableText=void 0,(void 0!==this.renderedText||!this.isEmpty||this.onGetTextCallback||this.localizationName)&&(this.calculatedTextValue=this.calcText(),this.renderedText!==this.calculatedTextValue&&(this.renderedText=void 0,this.calculatedTextValue=void 0),this.htmlValues={},this.onChanged(),this.onStringChanged.fire(this,{})))}get text(){return this.pureText}set text(e){this.setLocaleText(this.locale,e)}get calculatedText(){return this.renderedText=void 0!==this.calculatedTextValue?this.calculatedTextValue:this.calcText(),this.calculatedTextValue=void 0,this.renderedText}getPlaceholder(){let e="";if(!this.isDefautlLocale){const t=this.getRootDialect(this.locale);e=this.getLocaleText(t||xt.defaultLocaleName)}return!e&&this.onGetTextCallback&&(e=this.onGetTextCallback("","")),e}calcText(){const e=this.pureText;let t=e;return t&&this.owner&&this.owner.getProcessedText&&t.indexOf("{")>-1&&(t=this.owner.getProcessedText(t)),this.onGetTextCallback&&(t=this.onGetTextCallback(t,e)),t}get pureText(){this.isTextRequested=!0;var e=this.locale;e||(e=this.defaultLoc);var t=this.getValue(e);if(this.isValueEmpty(t)&&e===this.defaultLoc&&(t=this.getValue(o.defaultLocale)),this.isValueEmpty(t)){const s=this.getRootDialect(e);s&&(t=this.getValue(s))}return this.isValueEmpty(t)&&e!==this.defaultLoc&&(t=this.getValue(this.defaultLoc)),this.isValueEmpty(t)&&this.getLocalizationName()&&(t=this.getLocalizationStr()),t||(t=this.defaultValue||""),t}getRootDialect(e){if(!e)return e;const t=e.indexOf("-");return t>-1?e.substring(0,t):""}getLocalizationName(){return this.sharedData?this.sharedData.localizationName:this.localizationName}getLocalizationStr(){const e=this.getLocalizationName();return e?l(e,this.locale):""}get hasHtml(){return this.hasHtmlValue()}get html(){return this.hasHtml?this.getHtmlValue():""}get isEmpty(){return 0==this.getValuesKeys().length}get textOrHtml(){return this.hasHtml?this.getHtmlValue():this.calculatedText}get renderedHtml(){return this.textOrHtml}getLocaleText(e){return this.getLocaleTextCore(e)||""}getLocaleTextCore(e){return e||(e=this.defaultLoc),this.getValue(e)}isLocaleTextEqualsWithDefault(e,t){let s=this.getLocaleTextCore(e);return s===t||this.isValueEmpty(s)&&this.isValueEmpty(t)}clear(){this.setJson(void 0)}clearLocale(e){this.setLocaleText(e,void 0)}setLocaleText(e,t){if(e=this.getValueLoc(e),this.lastChangedLoc=e,e&&void 0===t){const t=this.getValue(e);return void(void 0!==t&&(this.deleteValue(e),this.fireStrChanged(e,t)))}if(!this.storeDefaultText&&this.isLocaleTextEqualsWithDefault(e,t)){if(!this.isValueEmpty(t)||e&&e!==this.defaultLoc)return;let s=o.defaultLocale,n=this.getValue(s);return void(s&&!this.isValueEmpty(n)&&(this.setValue(s,t),this.fireStrChanged(s,n)))}if(xt.localization.storeDuplicatedTranslations||this.isValueEmpty(t)||!e||e==this.defaultLoc||this.getValue(e)||t!=this.getLocaleText(this.defaultLoc)){var s=this.curLocale;e||(e=this.defaultLoc);var n=this.onStrChanged&&e===s?this.pureText:void 0;delete this.htmlValues[e],this.isValueEmpty(t)?this.deleteValue(e):"string"==typeof t&&(this.canRemoveLocValue(e,t)?this.setLocaleText(e,null):(this.setValue(e,t),e==this.defaultLoc&&this.deleteValuesEqualsToDefault(t))),this.fireStrChanged(e,n)}}isValueEmpty(e){return null==e||!this.localizationName&&""===e}get curLocale(){return this.locale?this.locale:this.defaultLoc}canRemoveLocValue(e,t){if(xt.localization.storeDuplicatedTranslations)return!1;if(e===this.defaultLoc)return!1;const s=this.getRootDialect(e);if(s){const e=this.getLocaleText(s);return e?e==t:this.canRemoveLocValue(s,t)}return t==this.getLocaleText(this.defaultLoc)}fireStrChanged(e,t){if(this.strChanged(),!this.onStrChanged)return;const s=this.pureText;e===this.curLocale&&t===s||this.onStrChanged(t,s)}hasNonDefaultText(){var e=this.getValuesKeys();return 0!=e.length&&(e.length>1||e[0]!=this.defaultLoc)}getLocales(){var e=this.getValuesKeys();return 0==e.length?[]:e}getJson(){if(this.sharedData)return this.sharedData.getJson();const e=this.getValuesKeys();if(0==e.length){if(this.serializeCallBackText){const e=this.calcText();if(e)return e}return null}if(1==e.length&&e[0]==xt.localization.defaultLocaleName&&!xt.serialization.localizableStringSerializeAsObject)return this.values[e[0]];const t={};for(let e in this.values)t[e]=this.values[e];return t}setJson(e,t){if(this.sharedData)this.sharedData.setJson(e,t);else if(this.lastChangedLoc=void 0,this.values={},this.htmlValues={},null!=e)if(t)"string"==typeof e?this.values[xt.defaultLocaleName]=e:(this.values=e,delete this.values.pos);else{if("string"==typeof e)this.setLocaleText(null,e);else for(var s in e)this.setLocaleText(s,e[s]);this.strChanged()}}get renderAs(){return this.owner&&"function"==typeof this.owner.getRenderer&&this.owner.getRenderer(this.name)||Ze.defaultRenderer}get renderAsData(){return this.owner&&"function"==typeof this.owner.getRendererContext&&this.owner.getRendererContext(this)||this}equals(e){return this.sharedData?this.sharedData.equals(e):!(!e||!e.values)&&a.isTwoValueEquals(this.values,e.values,!1,!0,!1)}setFindText(e){if(this.searchText!=e){if(this.searchText=e,!this.searchableText){let e=this.textOrHtml;this.searchableText=e?e.toLowerCase():""}var t=this.searchableText,s=t&&e?t.indexOf(e):void 0;return s<0&&(s=void 0),null==s&&this.searchIndex==s||(this.searchIndex=s,this.onSearchChanged&&this.onSearchChanged()),null!=this.searchIndex}}onChanged(){}onCreating(){}hasHtmlValue(){if(!this.owner||!this.useMarkdown)return!1;let e=this.locale;if(e||(e=this.defaultLoc),void 0!==this.htmlValues[e])return!!this.htmlValues[e];let t=this.calculatedText;if(!t)return this.setHtmlValue(e,""),!1;if(this.getLocalizationName()&&t===this.getLocalizationStr())return this.setHtmlValue(e,""),!1;const s=this.owner.getMarkdownHtml(t,this.name);return this.setHtmlValue(e,s),!!s}setHtmlValue(e,t){this.htmlValues[e]=t}getHtmlValue(){var e=this.locale;return e||(e=this.defaultLoc),this.htmlValues[e]}deleteValuesEqualsToDefault(e){if(!xt.localization.storeDuplicatedTranslations)for(var t=this.getValuesKeys(),s=0;s<t.length;s++)t[s]!=this.defaultLoc&&this.getValue(t[s])==e&&this.deleteValue(t[s])}getValue(e){return this.sharedData?this.sharedData.getValue(e):this.values[this.getValueLoc(e)]}setValue(e,t){this.sharedData?this.sharedData.setValue(e,t):this.values[this.getValueLoc(e)]=t}deleteValue(e){this.sharedData?this.sharedData.deleteValue(e):delete this.values[this.getValueLoc(e)]}getValueLoc(e){return this.disableLocalization?xt.localization.defaultLocaleName:e}getValuesKeys(){return this.sharedData?this.sharedData.getValuesKeys():Object.keys(this.values)}get defaultLoc(){return xt.localization.defaultLocaleName}}Ze.SerializeAsObject=!1,Ze.defaultRenderer="sv-string-viewer",Ze.editableRenderer="sv-string-editor";class Ke{constructor(e){this.owner=e,this.values={}}getIsMultiple(){return!0}get locale(){return this.owner&&this.owner.getLocale?this.owner.getLocale():""}get value(){return this.getValue("")}set value(e){this.setValue("",e)}get text(){return Array.isArray(this.value)?this.value.join("\n"):""}set text(e){this.value=e?e.split("\n"):[]}getLocaleText(e){var t=this.getValueCore(e,!e||e===this.locale);return t&&Array.isArray(t)&&0!=t.length?t.join("\n"):""}setLocaleText(e,t){var s=t?t.split("\n"):null;this.setValue(e,s)}getValue(e){return this.getValueCore(e)}getValueCore(e,t=!0){if(e=this.getLocale(e),this.values[e])return this.values[e];if(t){var s=xt.localization.defaultLocaleName;if(e!==s&&this.values[s])return this.values[s]}return[]}setValue(e,t){e=this.getLocale(e);const s=a.createCopy(this.values);t&&0!=t.length?this.values[e]=t:delete this.values[e],this.onValueChanged&&this.onValueChanged(s,this.values)}hasValue(e=""){return!this.isEmpty&&this.getValue(e).length>0}get isEmpty(){return 0==this.getValuesKeys().length}getLocale(e){return e||(e=this.locale)||xt.localization.defaultLocaleName}getLocales(){var e=this.getValuesKeys();return 0==e.length?[]:e}getJson(){var e=this.getValuesKeys();return 0==e.length?null:1!=e.length||e[0]!=xt.localization.defaultLocaleName||xt.serialization.localizableStringSerializeAsObject?a.createCopy(this.values):this.values[e[0]]}setJson(e){if(this.values={},e)if(Array.isArray(e))this.setValue(null,e);else for(var t in e)this.setValue(t,e[t])}getValuesKeys(){return Object.keys(this.values)}}function Je(e){const t=t=>{t?e.funcOnYes():e.funcOnNo&&e.funcOnNo()};var s;xt&&xt.confirmActionFunc?t((s=e.message,xt&&xt.confirmActionFunc?xt.confirmActionFunc(s):confirm(s))):xt&&xt.confirmActionAsync?xt.confirmActionAsync(e.message,t,e):vt(e.message,t,e)}function Ye(){if(void 0===Ye.isIEOrEdge){const e=navigator.userAgent,t=e.indexOf("MSIE "),s=e.indexOf("Trident/"),n=e.indexOf("Edge/");Ye.isIEOrEdge=n>0||s>0||t>0}return Ye.isIEOrEdge}const $e=e=>!!e&&!(!("host"in e)||!e.host);function Xe(e){if(!e)return i.isAvailable()?i.getDocument().documentElement:void 0;if(e.scrollHeight>e.clientHeight&&("scroll"===getComputedStyle(e).overflowY||"auto"===getComputedStyle(e).overflowY))return e;if(e.scrollWidth>e.clientWidth&&("scroll"===getComputedStyle(e).overflowX||"auto"===getComputedStyle(e).overflowX))return e;if(!e.parentElement){const t=e.getRootNode();if(t instanceof Document||t instanceof ShadowRoot)return $e(t)?t.host:t.documentElement}return Xe(e.parentElement)}function et(e){if(!e)return;const t=Xe(e);t&&setTimeout(()=>t.dispatchEvent(new CustomEvent("scroll")),10)}function tt(e){return e?["url(",e,")"].join(""):""}const st={changecamera:"flip-24x24",clear:"clear-24x24",cancel:"cancel-24x24",closecamera:"close-24x24",defaultfile:"file-72x72",choosefile:"folder-24x24",file:"toolbox-file-24x24",left:"chevronleft-16x16",modernbooleancheckchecked:"plus-32x32",modernbooleancheckunchecked:"minus-32x32",more:"more-24x24",navmenu_24x24:"navmenu-24x24",removefile:"error-24x24",takepicture:"camera-32x32",takepicture_24x24:"camera-24x24",v2check:"check-16x16",checked:"check-16x16",v2check_24x24:"check-24x24","back-to-panel_16x16":"restoredown-16x16",clear_16x16:"clear-16x16",close_16x16:"close-16x16",collapsedetail:"collapsedetails-16x16",expanddetail:"expanddetails-16x16","full-screen_16x16":"maximize-16x16",loading:"loading-48x48",minimize_16x16:"minimize-16x16",next_16x16:"chevronright-16x16",previous_16x16:"chevronleft-16x16","no-image":"noimage-48x48","ranking-dash":"rankingundefined-16x16","drag-n-drop":"drag-24x24","ranking-arrows":"reorder-24x24",restore_16x16:"fullsize-16x16",reset:"restore-24x24",search:"search-24x24",average:"smiley-rate5-24x24",excellent:"smiley-rate9-24x24",good:"smiley-rate7-24x24",normal:"smiley-rate6-24x24","not-good":"smiley-rate4-24x24",perfect:"smiley-rate10-24x24",poor:"smiley-rate3-24x24",terrible:"smiley-rate1-24x24","very-good":"smiley-rate8-24x24","very-poor":"smiley-rate2-24x24",add_16x16:"add-16x16",add_24x24:"add-24x24",alert_24x24:"warning-24x24",apply:"apply-24x24","arrow-down":"arrowdown-24x24","arrow-left":"arrowleft-24x24","arrow-left_16x16":"arrowleft-16x16",arrowleft:"arrowleft-16x16","arrow-right":"arrowright-24x24","arrow-right_16x16":"arrowright-16x16",arrowright:"arrowright-16x16","arrow-up":"arrowup-24x24",boolean:"toolbox-boolean-24x24","change-question-type_16x16":"speechbubble-16x16",checkbox:"toolbox-checkbox-24x24","collapse-detail_16x16":"minusbox-16x16","collapse-panel":"collapse-pg-24x24",collapse_16x16:"collapse-16x16","color-picker":"dropper-16x16",comment:"toolbox-longtext-24x24",config:"wrench-24x24",copy:"copy-24x24",default:"toolbox-customquestion-24x24",delete_16x16:"delete-16x16",delete_24x24:"delete-24x24",delete:"delete-24x24","description-hide":"hidehint-16x16",description:"hint-16x16","device-desktop":"desktop-24x24","device-phone":"phone-24x24","device-rotate":"rotate-24x24","device-tablet":"tablet-24x24",download:"download-24x24","drag-area-indicator":"drag-24x24","drag-area-indicator_24x16":"draghorizontal-24x16",v2dragelement_16x16:"draghorizontal-24x16","drop-down-arrow":"chevrondown-24x24","drop-down-arrow_16x16":"chevrondown-16x16",chevron_16x16:"chevrondown-16x16",dropdown:"toolbox-dropdown-24x24",duplicate_16x16:"copy-16x16",edit:"edit-24x24",edit_16x16:"edit-16x16","editing-finish":"finishedit-24x24",error:"error-16x16","expand-detail_16x16":"plusbox-16x16","expand-panel":"expand-pg-24x24",expand_16x16:"expand-16x16",expression:"toolbox-expression-24x24","fast-entry":"textedit-24x24",fix:"fix-24x24",html:"toolbox-html-24x24",image:"toolbox-image-24x24",imagepicker:"toolbox-imagepicker-24x24",import:"import-24x24","invisible-items":"invisible-24x24",language:"language-24x24",load:"import-24x24","logic-collapse":"collapse-24x24","logic-expand":"expand-24x24",logo:"image-48x48",matrix:"toolbox-matrix-24x24",matrixdropdown:"toolbox-multimatrix-24x24",matrixdynamic:"toolbox-dynamicmatrix-24x24",multipletext:"toolbox-multipletext-24x24",panel:"toolbox-panel-24x24",paneldynamic:"toolbox-dynamicpanel-24x24",preview:"preview-24x24",radiogroup:"toolbox-radiogroup-24x24",ranking:"toolbox-ranking-24x24",rating:"toolbox-rating-24x24",slider:"toolbox-slider-24x24",redo:"redo-24x24",remove_16x16:"remove-16x16",required:"required-16x16",save:"save-24x24","select-page":"selectpage-24x24",settings:"settings-24x24",settings_16x16:"settings-16x16",signaturepad:"toolbox-signature-24x24","switch-active_16x16":"switchon-16x16","switch-inactive_16x16":"switchoff-16x16",tagbox:"toolbox-tagbox-24x24",text:"toolbox-singleline-24x24",theme:"theme-24x24",toolbox:"toolbox-24x24",undo:"undo-24x24",visible:"visible-24x24",wizard:"wand-24x24",searchclear:"clear-16x16","chevron-16x16":"chevrondown-16x16",chevron:"chevrondown-24x24",progressbuttonv2:"arrowleft-16x16",right:"chevronright-16x16","add-lg":"add-24x24",add:"add-24x24"};function nt(e){const t="icon-",s=e.replace(t,"");return t+(st[s]||s)}function it(e){if("string"==typeof e){if(!isNaN(Number(e)))return Number(e);if(e.includes("px"))return parseFloat(e)}if("number"==typeof e)return e}function rt(e){if(void 0===it(e))return e}const at="sv-focused--by-key";function ot(e){const t=e.target;t&&t.classList&&t.classList.remove(at)}function lt(e,t){if(e.target&&"true"===e.target.contentEditable)return;const s=e.target;if(!s)return;const n=e.which||e.keyCode;if(9!==n){if(t){if(!t.__keyDownReceived)return;t.__keyDownReceived=!1}13===n||32===n?s.click&&s.click():t&&!t.processEsc||27!==n||s.blur&&s.blur()}else s.classList&&!s.classList.contains(at)&&s.classList.add(at)}function ut(e,t){if(!e)return;t||(t=e=>i.getComputedStyle(e));const s=parseFloat(e.getAttribute("rows")||"2"),n=t(e),r=n.overflowY,a=parseFloat(n.lineHeight);if(e.scrollHeight){const t=parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth)+parseFloat(n.paddingBottom)+parseFloat(n.paddingTop);let i=(e.scrollHeight-t)/a;const o=s=>{e.style.height=s*a+t+"px"};for(o(i),e.style.overflowY="hidden";e.scrollHeight<=e.offsetHeight&&i>s;)i--,o(i);e.style.overflowY=r,e.scrollHeight>e.offsetHeight&&(i++,o(i))}else e.style.height="auto"}function dt(e){e.preventDefault(),e.stopPropagation()}function ht(e){return e?e.replace(/\s*?([\w-]+)\s*?/g,".$1"):e}function ct(e){return getComputedStyle?Number.parseFloat(getComputedStyle(e).width):e.offsetWidth}function pt(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function gt(e,t){if(t&&e&&"object"==typeof t)for(var s in e){var n=e[s];!Array.isArray(n)&&n&&"object"==typeof n?(t[s]&&"object"==typeof t[s]||(t[s]={}),gt(n,t[s])):t[s]=n}}function mt(e,t){const s={};gt(t.list,s),gt(e.list,s),e.list=s}function vt(e,t,s={}){const n=new Ze(void 0,!1);n.defaultValue=e||s.message;const i=xt.showDialog({componentName:"sv-string-viewer",data:{locStr:n,locString:n,model:n},onApply:()=>(t(!0),!0),onCancel:()=>(t(!1),!1),displayMode:"popup",isFocusedContent:!1,cssClass:s.cssClass||"sv-popup--confirm"},s.rootElement),r=i.footerToolbar,a=r.getActionById("apply");return r.getActionById("cancel").title=l("cancel",s.locale),a.title=s.applyTitle||l("ok",s.locale),a.innerCss="sd-btn--danger",function(e){e.width="min-content"}(i),!0}function ft(e,t,s="--animation-"){var n;e.__sv_created_properties=null!==(n=e.__sv_created_properties)&&void 0!==n?n:[],Object.keys(t).forEach(n=>{const i=`${s}${n.split(/\.?(?=[A-Z])/).join("-").toLowerCase()}`;e.style.setProperty(i,t[n]),e.__sv_created_properties.push(i)})}function bt(e){ft(e,function(e){if(i.isAvailable()){const{paddingTop:t,paddingBottom:s,borderTopWidth:n,borderBottomWidth:r,marginTop:a,marginBottom:o,boxSizing:l}=i.getComputedStyle(e);let u=e.offsetHeight+"px";if("content-box"==l){let i=e.offsetHeight;[r,n,s,t].forEach(e=>{i-=parseFloat(e)}),u=i+"px"}return{paddingTop:t,paddingBottom:s,borderTopWidth:n,borderBottomWidth:r,marginTop:a,marginBottom:o,heightFrom:"0px",heightTo:u}}}(e))}function yt(e){Array.isArray(e.__sv_created_properties)&&(e.__sv_created_properties.forEach(t=>{e.style.removeProperty(t)}),delete e.__sv_created_properties)}const Ct="undefined"!=typeof globalThis?globalThis.document:(void 0).document,wt=Ct?{root:Ct,_rootElement:i.getBody(),get rootElement(){var e;return null!==(e=this._rootElement)&&void 0!==e?e:i.getBody()},set rootElement(e){this._rootElement=e},_popupMountContainer:i.getBody(),get popupMountContainer(){var e;return null!==(e=this._popupMountContainer)&&void 0!==e?e:i.getBody()},set popupMountContainer(e){this._popupMountContainer=e},svgMountContainer:Ct.head,stylesSheetsMountContainer:Ct.head}:void 0;var xt={version:"",designMode:{showEmptyDescriptions:!0,showEmptyTitles:!0},get allowShowEmptyDescriptionInDesignMode(){return this.designMode.showEmptyDescriptions},set allowShowEmptyDescriptionInDesignMode(e){this.designMode.showEmptyDescriptions=e},get allowShowEmptyTitleInDesignMode(){return this.designMode.showEmptyTitles},set allowShowEmptyTitleInDesignMode(e){this.designMode.showEmptyTitles=e},localization:{useLocalTimeZone:!0,storeDuplicatedTranslations:!1,defaultLocaleName:"default"},get useLocalTimeZone(){return this.localization.useLocalTimeZone},set useLocalTimeZone(e){this.localization.useLocalTimeZone=e},get storeDuplicatedTranslations(){return this.localization.storeDuplicatedTranslations},set storeDuplicatedTranslations(e){this.localization.storeDuplicatedTranslations=e},get defaultLocaleName(){return this.localization.defaultLocaleName},set defaultLocaleName(e){this.localization.defaultLocaleName=e},web:{onBeforeRequestChoices:(e,t)=>{},encodeUrlParams:!0,cacheLoadedChoices:!0,disableQuestionWhileLoadingChoices:!1},get webserviceEncodeParameters(){return this.web.encodeUrlParams},set webserviceEncodeParameters(e){this.web.encodeUrlParams=e},get useCachingForChoicesRestful(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestful(e){this.web.cacheLoadedChoices=e},get useCachingForChoicesRestfull(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestfull(e){this.web.cacheLoadedChoices=e},get disableOnGettingChoicesFromWeb(){return this.web.disableQuestionWhileLoadingChoices},set disableOnGettingChoicesFromWeb(e){this.web.disableQuestionWhileLoadingChoices=e},triggers:{changeNavigationButtonsOnComplete:!0,executeCompleteOnValueChanged:!1,executeSkipOnValueChanged:!0},get executeCompleteTriggerOnValueChanged(){return this.triggers.executeCompleteOnValueChanged},set executeCompleteTriggerOnValueChanged(e){this.triggers.executeCompleteOnValueChanged=e},get changeNavigationButtonsOnCompleteTrigger(){return this.triggers.changeNavigationButtonsOnComplete},set changeNavigationButtonsOnCompleteTrigger(e){this.triggers.changeNavigationButtonsOnComplete=e},get executeSkipTriggerOnValueChanged(){return this.triggers.executeSkipOnValueChanged},set executeSkipTriggerOnValueChanged(e){this.triggers.executeSkipOnValueChanged=e},serialization:{itemValueSerializeAsObject:!1,itemValueSerializeDisplayText:!1,localizableStringSerializeAsObject:!1,matrixDropdownColumnSerializeTitle:!1},get itemValueAlwaysSerializeAsObject(){return this.serialization.itemValueSerializeAsObject},set itemValueAlwaysSerializeAsObject(e){this.serialization.itemValueSerializeAsObject=e},get itemValueAlwaysSerializeText(){return this.serialization.itemValueSerializeDisplayText},set itemValueAlwaysSerializeText(e){this.serialization.itemValueSerializeDisplayText=e},get serializeLocalizableStringAsObject(){return this.serialization.localizableStringSerializeAsObject},set serializeLocalizableStringAsObject(e){this.serialization.localizableStringSerializeAsObject=e},lazyRender:{enabled:!1,firstBatchSize:3},get lazyRowsRendering(){return this.lazyRender.enabled},set lazyRowsRendering(e){this.lazyRender.enabled=e},get lazyRowsRenderingStartRow(){return this.lazyRender.firstBatchSize},set lazyRowsRenderingStartRow(e){this.lazyRender.firstBatchSize=e},matrix:{defaultCellType:"dropdown",defaultRowName:"default",totalsSuffix:"-total",maxRowCount:1e3,maxRowCountInCondition:1,renderRemoveAsIcon:!0,columnWidthsByType:{file:{minWidth:"240px"},comment:{minWidth:"200px"}},rateSize:"small"},get matrixDefaultRowName(){return this.matrix.defaultRowName},set matrixDefaultRowName(e){this.matrix.defaultRowName=e},get matrixDefaultCellType(){return this.matrix.defaultCellType},set matrixDefaultCellType(e){this.matrix.defaultCellType=e},get matrixTotalValuePostFix(){return this.matrix.totalsSuffix},set matrixTotalValuePostFix(e){this.matrix.totalsSuffix=e},get matrixMaximumRowCount(){return this.matrix.maxRowCount},set matrixMaximumRowCount(e){this.matrix.maxRowCount=e},get matrixMaxRowCountInCondition(){return this.matrix.maxRowCountInCondition},set matrixMaxRowCountInCondition(e){this.matrix.maxRowCountInCondition=e},get matrixRenderRemoveAsIcon(){return this.matrix.renderRemoveAsIcon},set matrixRenderRemoveAsIcon(e){this.matrix.renderRemoveAsIcon=e},panel:{maxPanelCount:100,maxPanelCountInCondition:1},get panelDynamicMaxPanelCountInCondition(){return this.panel.maxPanelCountInCondition},set panelDynamicMaxPanelCountInCondition(e){this.panel.maxPanelCountInCondition=e},get panelMaximumPanelCount(){return this.panel.maxPanelCount},set panelMaximumPanelCount(e){this.panel.maxPanelCount=e},readOnly:{enableValidation:!1,commentRenderMode:"textarea",textRenderMode:"input"},get readOnlyCommentRenderMode(){return this.readOnly.commentRenderMode},set readOnlyCommentRenderMode(e){this.readOnly.commentRenderMode=e},get readOnlyTextRenderMode(){return this.readOnly.textRenderMode},set readOnlyTextRenderMode(e){this.readOnly.textRenderMode=e},numbering:{includeQuestionsWithHiddenNumber:!1,includeQuestionsWithHiddenTitle:!1},get setQuestionVisibleIndexForHiddenTitle(){return this.numbering.includeQuestionsWithHiddenTitle},set setQuestionVisibleIndexForHiddenTitle(e){this.numbering.includeQuestionsWithHiddenTitle=e},get setQuestionVisibleIndexForHiddenNumber(){return this.numbering.includeQuestionsWithHiddenNumber},set setQuestionVisibleIndexForHiddenNumber(e){this.numbering.includeQuestionsWithHiddenNumber=e},enterKeyAction:"default",comparator:{trimStrings:!0,caseSensitive:!1,normalizeTextCallback:(e,t)=>e},expressionDisableConversionChar:"#",get commentPrefix(){return xt.commentSuffix},set commentPrefix(e){xt.commentSuffix=e},commentSuffix:"-Comment",itemValueSeparator:"|",ratingMaximumRateValueCount:20,tagboxCloseOnSelect:!1,dropdownSearchDelay:500,confirmActionFunc:void 0,confirmActionAsync:(e,t,s)=>{vt(e,t,s)},minWidth:"300px",maxWidth:"100%",maxConditionRunCountOnValueChanged:10,notifications:{lifetime:2e3},autoAdvanceDelay:300,itemFlowDirection:"column",get showItemsInOrder(){return xt.itemFlowDirection},set showItemsInOrder(e){xt.itemFlowDirection=e},noneItemValue:"none",refuseItemValue:"refused",dontKnowItemValue:"dontknow",specialChoicesOrder:{selectAllItem:[-1],noneItem:[1],refuseItem:[2],dontKnowItem:[3],otherItem:[4]},choicesSeparator:", ",supportedValidators:{question:["expression"],comment:["text","regex"],text:["numeric","text","regex","email"],checkbox:["answercount"],imagepicker:["answercount"]},expressionVariables:{question:"self",matrix:"matrix",composite:"composite",item:"item",choice:"choice",row:"row",totalRow:"totalRow",rowIndex:"rowIndex",visibleRowIndex:"visibleRowIndex",rowValue:"rowValue",rowName:"rowName",rowTitle:"rowTitle",panel:"panel",parentPanel:"parentPanel",panelIndex:"panelIndex",visiblePanelIndex:"visiblePanelIndex",unwrapPostfix:"-unwrapped"},minDate:"",maxDate:"2999-12-31",showDialog:void 0,showDefaultItemsInCreator:!0,customIcons:{},rankingDragHandleArea:"entireItem",environment:wt,showMaxLengthIndicator:!0,animationEnabled:!0,titleTags:{survey:"div",page:"div",panel:"div",question:"div"},questions:{inputTypes:["color","date","datetime-local","email","month","number","password","range","tel","text","time","url","week"],dataList:["","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"]},legacyProgressBarView:!1,maskSettings:{patternPlaceholderChar:"_",patternEscapeChar:"\\",patternDefinitions:{9:/[0-9]/,a:/[a-zA-Z]/,"#":/[a-zA-Z0-9]/}},storeUtcDates:!1,onDateCreated:(e,t,s)=>e,parseNumber:(e,t)=>t};class _t{constructor(e=null,t=null){this.text=e,this.errorOwner=t,this.visible=!0,this.onUpdateErrorTextCallback=void 0}equals(e){return!(!e||!e.getErrorType)&&this.getErrorType()===e.getErrorType()&&this.text===e.text&&this.visible===e.visible}get locText(){return this.locTextValue||(this.locTextValue=new Ze(this.errorOwner,!0),this.locTextValue.storeDefaultText=!0,this.locTextValue.text=this.getText()),this.locTextValue}get notificationType(){return this.notificationTypeValue||"error"}set notificationType(e){this.notificationTypeValue=e}get isWarning(){return"warning"===this.notificationTypeValue}get isInfo(){return"info"===this.notificationTypeValue}get isError(){return!this.isInfo&&!this.isWarning}getCssIcon(e){const t=this.getCssError(e);return(this.isWarning?t.warningIcon:this.isInfo?t.infoIcon:t.icon)||t.icon||void 0}getCssError(e){return(e=e||{}).error||{}}getText(){var e=this.text;return e||(e=this.getDefaultText()),this.errorOwner&&(e=this.errorOwner.getErrorCustomText(e,this)),e}getErrorType(){return"base"}getDefaultText(){return""}getLocale(){return this.errorOwner?this.errorOwner.getLocale():""}getLocalizationString(e){return l(e,this.getLocale())}updateText(){this.onUpdateErrorTextCallback&&this.onUpdateErrorTextCallback(this),this.locText.text=this.getText()}}class Vt extends _t{constructor(e=null,t=null){super(e,t),this.text=e}getErrorType(){return"required"}getDefaultText(){return this.getLocalizationString("requiredError")}}class It extends _t{constructor(e=null,t=null){super(e,t),this.text=e}getErrorType(){return"requireoneanswer"}getDefaultText(){return this.getLocalizationString("requiredErrorInPanel")}}class St extends _t{constructor(e=null,t=null){super(e,t),this.text=e}getErrorType(){return"requirenumeric"}getDefaultText(){return this.getLocalizationString("numericError")}}class Pt extends _t{constructor(e,t=null){super(null,t),this.maxSize=e,this.locText.text=this.getText()}getErrorType(){return"exceedsize"}getDefaultText(){return this.getLocalizationString("exceedMaxSize").format(this.getTextSize())}getTextSize(){if(0===this.maxSize)return"0 Byte";var e=Math.floor(Math.log(this.maxSize)/Math.log(1024));return(this.maxSize/Math.pow(1024,e)).toFixed([0,0,2,3,3][e])+" "+["Bytes","KB","MB","GB","TB"][e]}}class Tt extends _t{constructor(e,t,s=null){super(null,s),this.status=e,this.response=t}getErrorType(){return"webrequest"}getDefaultText(){const e=this.getLocalizationString("urlRequestError");return e?e.format(this.status,this.response):""}}class Et extends _t{constructor(e,t=null){super(e,t),this.text=e}getErrorType(){return"webrequestempty"}getDefaultText(){return this.getLocalizationString("urlGetChoicesError")}}class Rt extends _t{constructor(e,t=null){super(e,t),this.text=e}getErrorType(){return"otherempty"}getDefaultText(){return this.getLocalizationString("otherRequiredError")}}class kt extends _t{constructor(e,t=null){super(e,t),this.text=e}getErrorType(){return"uploadingfile"}getDefaultText(){return this.getLocalizationString("uploadingFile")}}class At extends _t{constructor(e,t=null){super(e,t),this.text=e}getErrorType(){return"requiredinallrowserror"}getDefaultText(){return this.getLocalizationString("requiredInAllRowsError")}}class Lt extends _t{constructor(e,t=null){super(e,t),this.text=e}getErrorType(){return"eachrowuniqueeerror"}getDefaultText(){return this.getLocalizationString("eachRowUniqueError")}}class Dt extends _t{constructor(e,t=null){super(null,t),this.minRowCount=e}getErrorType(){return"minrowcounterror"}getDefaultText(){return this.getLocalizationString("minRowCountError").format(this.minRowCount)}}class Nt extends _t{constructor(e,t=null){super(e,t),this.text=e}getErrorType(){return"keyduplicationerror"}getDefaultText(){return this.getLocalizationString("keyDuplicationError")}}class Ot extends _t{constructor(e,t=null){super(e,t),this.text=e}getErrorType(){return"custom"}}class jt{constructor(e){this.onCompleted=e,this.asyncElements={},this.isRunningValue=!0}addElement(e){this.asyncElements[e]=!0}removeElement(e){delete this.asyncElements[e],this.tryComplete()}finish(){this.isRunningValue=!1,this.tryComplete()}get isRunning(){return this.isRunningValue||Object.keys(this.asyncElements).length>0}doCompleted(){this.onCompleted&&this.onCompleted()}tryComplete(){this.isRunning||this.doCompleted()}}class qt{constructor(e,t=null){this.value=e,this.error=t}}class Mt extends he{constructor(){super(),this.idValue="svd"+Mt.idCounter++,this.createLocalizableString("text",this,!0)}get id(){return this.idValue}get isValidator(){return!0}getSurvey(e=!1){return this.errorOwner&&this.errorOwner.getSurvey?this.errorOwner.getSurvey():null}get notificationType(){return this.getPropertyValue("notificationType")}set notificationType(e){this.setPropertyValue("notificationType",e)}get text(){return this.getLocalizableStringText("text")}set text(e){this.setLocalizableStringText("text",e)}get locText(){return this.getLocalizableString("text")}getErrorText(e){return this.text?this.text:this.getDefaultErrorText(e)}getDefaultErrorText(e){return""}validateOnCallback(e,t,s,n){const i=this.validate(e,s,n);return t&&t(i),i}validate(e,t,s){return null}getLocale(){return this.errorOwner?this.errorOwner.getLocale():""}getMarkdownHtml(e,t,s){return this.errorOwner?this.errorOwner.getMarkdownHtml(e,t,s):void 0}getRenderer(e){return this.errorOwner?this.errorOwner.getRenderer(e):null}getRendererContext(e){return this.errorOwner?this.errorOwner.getRendererContext(e):e}getProcessedText(e){return this.errorOwner?this.errorOwner.getProcessedText(e):e}createCustomError(e){const t=new Ot(this.getErrorText(e),this.errorOwner);return t.onUpdateErrorTextCallback=t=>t.text=this.getErrorText(e),t}toString(){var e=this.getType().replace("validator","");return this.text&&(e+=", "+this.text),e}}Mt.idCounter=0;class Ft{run(e){const t=e.getValidators(),s=new Array,n=new jt(()=>{this.onAsyncCompleted&&this.onAsyncCompleted(s)});if(t.length>0){const i=e.getDataFilteredProperties(),r=e.validatedValue,a=e.getValidatorTitle();t.forEach(e=>{n.addElement(e.id),e.validateOnCallback(r,t=>{t&&t.error&&(t.error.notificationType=e.notificationType,s.push(t.error)),n.removeElement(e.id)},a,i)})}const i=[].concat(...s);return s.length=0,n.finish(),i}}class Bt extends Mt{constructor(e=null,t=null){super(),this.minValue=e,this.maxValue=t}getType(){return"numericvalidator"}validate(e,t,s){if(this.isValueEmpty(e))return null;if(!a.isNumber(e))return new qt(null,new St(this.text,this.errorOwner));const n=new qt(a.getNumber(e));return null!==this.minValue&&this.minValue>n.value||null!==this.maxValue&&this.maxValue<n.value?(n.error=this.createCustomError(t),n):"number"==typeof e?null:n}getDefaultErrorText(e){var t=e||this.getLocalizationString("value");return null!==this.minValue&&null!==this.maxValue?this.getLocalizationFormatString("numericMinMax",t,this.minValue,this.maxValue):null!==this.minValue?this.getLocalizationFormatString("numericMin",t,this.minValue):this.getLocalizationFormatString("numericMax",t,this.maxValue)}get minValue(){return this.getPropertyValue("minValue")}set minValue(e){this.setPropertyValue("minValue",e)}get maxValue(){return this.getPropertyValue("maxValue")}set maxValue(e){this.setPropertyValue("maxValue",e)}}class zt extends Mt{constructor(){super()}getType(){return"textvalidator"}validate(e,t,s){return this.isValueEmpty(e)?null:!this.allowDigits&&/\d+$/.test(e)?new qt(null,this.createCustomError("textNoDigitsAllow")):this.minLength>0&&e.length<this.minLength||this.maxLength>0&&e.length>this.maxLength?new qt(null,this.createCustomError(t)):null}getDefaultErrorText(e){return"textNoDigitsAllow"===e?this.getLocalizationString(e):this.minLength>0&&this.maxLength>0?this.getLocalizationFormatString("textMinMaxLength",this.minLength,this.maxLength):this.minLength>0?this.getLocalizationFormatString("textMinLength",this.minLength):this.getLocalizationFormatString("textMaxLength",this.maxLength)}get minLength(){return this.getPropertyValue("minLength")}set minLength(e){this.setPropertyValue("minLength",e)}get maxLength(){return this.getPropertyValue("maxLength")}set maxLength(e){this.setPropertyValue("maxLength",e)}get allowDigits(){return this.getPropertyValue("allowDigits")}set allowDigits(e){this.setPropertyValue("allowDigits",e)}}class Ht extends Mt{constructor(e=null,t=null){super(),this.minCount=e,this.maxCount=t}getType(){return"answercountvalidator"}validate(e,t,s){if(null==e||e.constructor!=Array)return null;var n=e.length;return 0==n?null:this.minCount&&n<this.minCount?new qt(null,this.createCustomError(this.getLocalizationFormatString("minSelectError",this.minCount))):this.maxCount&&n>this.maxCount?new qt(null,this.createCustomError(this.getLocalizationFormatString("maxSelectError",this.maxCount))):null}getDefaultErrorText(e){return e}get minCount(){return this.getPropertyValue("minCount")}set minCount(e){this.setPropertyValue("minCount",e)}get maxCount(){return this.getPropertyValue("maxCount")}set maxCount(e){this.setPropertyValue("maxCount",e)}}class Qt extends Mt{constructor(e=null){super(),this.regex=e}getType(){return"regexvalidator"}validate(e,t,s){if(!this.regex||this.isValueEmpty(e))return null;const n=this.createRegExp();if(Array.isArray(e))for(let s=0;s<e.length;s++){const i=this.hasError(n,e[s],t);if(i)return i}return this.hasError(n,e,t)}hasError(e,t,s){return e.test(t)?null:new qt(t,this.createCustomError(s))}get regex(){return this.getPropertyValue("regex")}set regex(e){this.setPropertyValue("regex",e)}get caseInsensitive(){return this.getPropertyValue("caseInsensitive")}set caseInsensitive(e){this.setPropertyValue("caseInsensitive",e)}get insensitive(){return this.caseInsensitive}set insensitive(e){this.caseInsensitive=e}createRegExp(){return new RegExp(this.regex,this.caseInsensitive?"i":"")}}class Ut extends Mt{constructor(){super(),this.re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()=[\]\.,;:\s@\"]+\.)+[^<>()=[\]\.,;:\s@\"]{2,})$/i}getType(){return"emailvalidator"}validate(e,t,s){return e?this.re.test(e)?null:new qt(e,this.createCustomError(t)):null}getDefaultErrorText(e){return this.getLocalizationString("invalidEmail")}}class Wt extends Mt{constructor(e=null){super(),this.conditionRunner=null,this.expression=e}getType(){return"expressionvalidator"}validateOnCallback(e,t,s,n){this.conditionRunner&&(this.conditionRunner.onRunComplete=null);let i=null;const r=n=>{i=this.generateError(n,e,s),t&&t(i)};if(!this.ensureConditionRunner())return r(!0),null;if(this.conditionRunner.onRunComplete=e=>{r(e)},!this.conditionRunner.canRun())return r(a),i;var a=this.conditionRunner.runContext(this.getValueGetterContext(),this.getPropertiesCopy(n,"expression"));return i||this.generateError(a,e,s)}generateError(e,t,s){return e?null:new qt(t,this.createCustomError(s))}getDefaultErrorText(e){return this.getLocalizationFormatString("invalidExpression",this.expression)}ensureConditionRunner(){const e=this.getExpressionFromSurvey("expression");return!!e&&(this.conditionRunner=new ae(e),!0)}get expression(){return this.getPropertyValue("expression")}set expression(e){this.setPropertyValue("expression",e)}getValueGetterContext(){const e=this.errorOwner;return e&&e.getValueGetterContext?e.getValueGetterContext():super.getValueGetterContext()}}I.addClass("surveyvalidator",[{name:"text",serializationProperty:"locText"},{name:"notificationType",choices:["error","warning","info"],default:"error",visible:!0,category:"general",visibleIndex:100}]),I.addClass("numericvalidator",["minValue:number","maxValue:number"],function(){return new Bt},"surveyvalidator"),I.addClass("textvalidator",[{name:"minLength:number",default:0},{name:"maxLength:number",default:0},{name:"allowDigits:boolean",default:!0}],function(){return new zt},"surveyvalidator"),I.addClass("answercountvalidator",["minCount:number","maxCount:number"],function(){return new Ht},"surveyvalidator"),I.addClass("regexvalidator",["regex",{name:"caseInsensitive:boolean",alternativeName:"insensitive"}],function(){return new Qt},"surveyvalidator"),I.addClass("emailvalidator",[],function(){return new Ut},"surveyvalidator"),I.addClass("expressionvalidator",["expression:condition"],function(){return new Wt},"surveyvalidator");class Gt{constructor(e,t){this.name=e,this.widgetJson=t,this.htmlTemplate=t.htmlTemplate?t.htmlTemplate:""}afterRender(e,t){this.widgetJson.afterRender&&(e.localeChangedCallback=()=>{this.widgetJson.willUnmount&&this.widgetJson.willUnmount(e,t),this.widgetJson.afterRender(e,t)},this.widgetJson.afterRender(e,t))}willUnmount(e,t){this.widgetJson.willUnmount&&this.widgetJson.willUnmount(e,t)}getDisplayValue(e,t=void 0){return this.widgetJson.getDisplayValue?this.widgetJson.getDisplayValue(e,t):null}validate(e){if(this.widgetJson.validate)return this.widgetJson.validate(e)}isFit(e){return!(!this.isLibraryLoaded()||!this.widgetJson.isFit)&&this.widgetJson.isFit(e)}get canShowInToolbox(){return!1!==this.widgetJson.showInToolbox&&"customtype"==Zt.Instance.getActivatedBy(this.name)&&(!this.widgetJson.widgetIsLoaded||this.widgetJson.widgetIsLoaded())}get showInToolbox(){return!1!==this.widgetJson.showInToolbox}set showInToolbox(e){this.widgetJson.showInToolbox=e}init(){this.widgetJson.init&&this.widgetJson.init()}activatedByChanged(e){this.isLibraryLoaded()&&this.widgetJson.activatedByChanged&&this.widgetJson.activatedByChanged(e)}isLibraryLoaded(){return!this.widgetJson.widgetIsLoaded||1==this.widgetJson.widgetIsLoaded()}get isDefaultRender(){return this.widgetJson.isDefaultRender}get pdfQuestionType(){return this.widgetJson.pdfQuestionType}get pdfRender(){return this.widgetJson.pdfRender}}class Zt{constructor(){this.widgetsValues=[],this.widgetsActivatedBy={},this.onCustomWidgetAdded=new pe}get widgets(){return this.widgetsValues}add(e,t="property"){this.addCustomWidget(e,t)}addCustomWidget(e,t="property"){var s=e.name;s||(s="widget_"+this.widgets.length+1);var n=new Gt(s,e);return this.widgetsValues.push(n),n.init(),this.widgetsActivatedBy[s]=t,n.activatedByChanged(t),this.onCustomWidgetAdded.fire(n,null),n}getActivatedBy(e){return this.widgetsActivatedBy[e]||"property"}setActivatedBy(e,t){if(e&&t){var s=this.getCustomWidgetByName(e);s&&(this.widgetsActivatedBy[e]=t,s.activatedByChanged(t))}}clear(){this.widgetsValues=[]}getCustomWidgetByName(e){for(var t=0;t<this.widgets.length;t++)if(this.widgets[t].name==e)return this.widgets[t];return null}getCustomWidget(e){for(var t=0;t<this.widgetsValues.length;t++)if(this.widgetsValues[t].isFit(e))return this.widgetsValues[t];return null}}Zt.Instance=new Zt;class Kt{constructor(){this.renderersHash={},this.defaultHash={}}unregisterRenderer(e,t){delete this.renderersHash[e][t],this.defaultHash[e]===t&&delete this.defaultHash[e]}registerRenderer(e,t,s,n=!1){this.renderersHash[e]||(this.renderersHash[e]={}),this.renderersHash[e][t]=s,n&&(this.defaultHash[e]=t)}getRenderer(e,t){const s=this.renderersHash[e];if(s){if(t&&s[t])return s[t];const n=this.defaultHash[e];if(n&&s[n])return s[n]}return"default"}getRendererByQuestion(e){return this.getRenderer(e.getType(),e.renderAs)}clear(){this.renderersHash={}}}Kt.Instance=new Kt;class Jt{updateElement(){this.element&&this.autoGrow&&setTimeout(()=>ut(this.element),1)}constructor(e){this.options=e,this.onPropertyChangedCallback=()=>{this.element&&(this.element.value=this.getTextValue(),this.updateElement())},this.question.registerFunctionOnPropertiesValueChanged(this.options.propertyNames,this.onPropertyChangedCallback,"__textarea")}setElement(e){e&&(this.element=e,this.updateElement())}resetElement(){this.element=void 0}getTextValue(){return this.options.getTextValue&&this.options.getTextValue()||""}onTextAreaChange(e){this.options.onTextAreaChange&&this.options.onTextAreaChange(e)}onTextAreaInput(e){this.options.onTextAreaInput&&this.options.onTextAreaInput(e),this.element&&this.autoGrow&&ut(this.element)}onTextAreaKeyDown(e){this.options.onTextAreaKeyDown&&this.options.onTextAreaKeyDown(e)}onTextAreaBlur(e){this.onTextAreaChange(e),this.options.onTextAreaBlur&&this.options.onTextAreaBlur(e)}onTextAreaFocus(e){var t;this.options.onTextAreaFocus&&this.options.onTextAreaFocus(e),this.isReadOnlyAttr&&(null===(t=null==e?void 0:e.target)||void 0===t||t.select())}get question(){return this.options.question}get id(){return this.options.id()}get placeholder(){return this.options.placeholder()}get className(){return this.options.className()}get maxLength(){if(this.options.maxLength)return this.options.maxLength()}get autoGrow(){if(this.options.autoGrow)return this.options.autoGrow()}get rows(){if(this.options.rows)return this.options.rows()}get cols(){if(this.options.cols)return this.options.cols()}get isDisabledAttr(){return this.options.isDisabledAttr()}get isReadOnlyAttr(){if(this.options.isReadOnlyAttr)return this.options.isReadOnlyAttr()}get ariaRequired(){if(this.options.ariaRequired)return this.options.ariaRequired()}get ariaLabel(){if(this.options.ariaLabel)return this.options.ariaLabel()}get ariaInvalid(){if(this.options.ariaInvalid)return this.options.ariaInvalid()}get ariaLabelledBy(){if(this.options.ariaLabelledBy)return this.options.ariaLabelledBy()}get ariaDescribedBy(){if(this.options.ariaDescribedBy)return this.options.ariaDescribedBy()}get ariaErrormessage(){if(this.options.ariaErrormessage)return this.options.ariaErrormessage()}dispose(){this.question&&this.question.unRegisterFunctionOnPropertiesValueChanged(this.options.propertyNames,"__textarea"),this.resetElement()}}class Yt{constructor(e,t){this.question=e,this.isUnwrapped=t}getValue(e,t,s,n){const i=xt.expressionVariables;if(0===e.length||1===e.length&&e[0].name===i.question)return this.getQuestionValue(s);if(e.length>1&&e[0].name===i.panel){const t=this.question.parent;if(t&&t.isPanel)return e.shift(),new Xt(t.questions).getValue(e,!1,s,n)}if(!this.question.isEmpty()){let t=this.question.value;if(s>=0){if(!Array.isArray(t||s>=t.length))return;t=t[s]}return new T(t).getValue(e,!1,s,n)}}getTextValue(e,t,s){return s?this.question.getDisplayValue(!0,t):t}getRootObj(){return this.question.data}getQuestion(){return this.question}getSurveyValue(e,t){const s=this.question.getSurvey();if(s)return s.getValueGetterContext().getValue(e,!1,t,!1)}getQuestionValue(e){const t=this.question;let s=t.getFilteredValue(this.isUnwrapped);return e>-1&&Array.isArray(s)&&(s=e<s.length?s[e]:void 0),{isFound:!0,context:this,value:s,requireStrictCompare:t.requireStrictCompare}}}class $t extends P{getValueFromBindedQuestions(e,t){"object"!=typeof t&&(t=void 0);const s=1===e.length?e[0].name:"",n=this.getQuestionsBySameValueNames();for(let i=0;i<n.length;i++){const r=n[i];if(s&&r.valuePropertyName===s&&t&&t.hasOwnProperty(s))return{isFound:!0,value:t[s],context:r.getValueGetterContext()};const a=r.getValueGetterContext().getValue(e,!1,this.getIndex(),!1);if(a&&a.isFound)return a}}getQuestionsBySameValueNames(){const e=new Array,t=this.getQuestionData();return t&&t.isQuestion?(t.parent&&t.parent.isPanel&&this.fillQuestions(t.parent.getQuestionsByValueName(t.getValueName()),t,e),0===e.length&&t.survey&&this.fillQuestions(t.survey.getQuestionsByValueName(t.getValueName()),t,e),e):e}fillQuestions(e,t,s){Array.isArray(e)&&e.forEach(e=>{e!==t&&s.push(e)})}getRootObj(){return this.getQuestionData()}}class Xt extends P{constructor(e){super(),this.questions=e}updateValueByItem(e,t){const s=e.toLocaleLowerCase(),n=xt.expressionVariables.unwrapPostfix;for(let e=0;e<this.questions.length;e++){const i=this.questions[e],r=i.getFilteredName().toLocaleLowerCase();if(r.toLocaleLowerCase()===s){t.isFound=!0,t.context=i.getValueGetterContext(r.endsWith(n));break}}}}class es extends jt{constructor(e){super(()=>{this.setCallbackResult()}),this.res=!0,this.errorCountValue=0,e||(e={fireCallback:!0}),this.fireCallbackValue=e.fireCallback||!1,this.isOnValueChangedValue=e.isOnValueChanged||!1,this.focusOnFirstErrorValue=e.focusOnFirstError||!1,this.callbackResult=e.callbackResult||null,this.changeCurrentPage=e.changeCurrentPage||!1}get fireCallback(){return this.fireCallbackValue}get isOnValueChanged(){return this.isOnValueChangedValue}get focusOnFirstError(){return this.focusOnFirstErrorValue}get result(){return this.res}get runningResult(){return this.res&&this.isRunning&&this.callbackResult?void 0:this.res}setErrorElement(e,t){Array.isArray(t)&&this.isWarningOnlyOrEmpty(t)||(this.errorCountValue++,this.res=!1,e&&(e.isQuestion?this.setQuestionError(e):e.isCollapsed&&e.expand()))}isWarningOnlyOrEmpty(e){for(let t=0;t<e.length;t++){const s=e[t];if(s.isError&&s.visible)return!1}return!0}get firstErrorQuestion(){return this.firstErrorQuestionValue}get errorCount(){return this.errorCountValue}setCallbackResult(){this.callbackResult&&!this.isCallbackFired&&(this.isCallbackFired=!0,this.callbackResult(this.res,this.firstErrorQuestion))}setQuestionError(e){if(e.expandAllParents(),!this.firstErrorQuestionValue){if(this.firstErrorQuestionValue=e,this.focusOnFirstError||this.changeCurrentPage)if(this.focusOnFirstError)e.focus(!0);else{const t=e.getSurvey();t&&e.page&&(t.currentPage=e.page)}this.setCallbackResult()}}}class ts extends We{static getQuestionId(){return"sq_"+ts.questionCounter++}isReadOnlyRenderDiv(){return this.isReadOnly&&"div"===xt.readOnly.commentRenderMode}allowMobileInDesignMode(){return!1}updateIsMobileFromSurvey(){this.setIsMobile(this.survey._isMobile)}setIsMobile(e){const t=e&&(this.allowMobileInDesignMode()||!this.isDesignMode);this.isMobile=t}getIsMobile(){return this._isMobile}get isMobile(){return this.getIsMobile()}set isMobile(e){this._isMobile=e}themeChanged(e){}get _isMobile(){return this.getPropertyValue("_isMobile",!1)}set _isMobile(e){this.setPropertyValue("_isMobile",e)}get forceIsInputReadOnly(){return this.getPropertyValue("forceIsInputReadOnly")}set forceIsInputReadOnly(e){this.setPropertyValue("forceIsInputReadOnly",e)}get ariaExpanded(){return this.isNewA11yStructure?null:this.getPropertyValue("ariaExpanded")}set ariaExpanded(e){this.setPropertyValue("ariaExpanded",e)}constructor(e){super(e),this.customWidgetData={isNeedRender:!0},this.hasCssErrorCallback=()=>!1,this.triggersInfo=[],this.isReadyValue=!0,this.dependedQuestions=[],this.onReadyChanged=this.addEvent(),this.isValueChangedInSurvey=!1,this.allowNotifyValueChanged=!0,this._syncPropertiesChanging=!1,this.setPropertyValueDirectly("id",ts.getQuestionId()),this.onCreating(),this.createNewArray("validators",e=>{e.errorOwner=this}),this.addExpressionProperty("visibleIf",(e,t)=>{this.visible=!0===t}),this.addExpressionProperty("enableIf",(e,t)=>{this.readOnly=!1===t}),this.addExpressionProperty("requiredIf",(e,t)=>{this.isRequired=!0===t}),this.createLocalizableString("commentText",this,!0,!0),this.createLocalizableString("requiredErrorText",this),this.createLocalizableString("commentPlaceholder",this),this.createLocalizableString("defaultDisplayValue",this),this.addTriggersInfo(),this.registerPropertyChangedHandlers(["width"],()=>{this.updateQuestionCss(),this.parent&&this.parent.elementWidthChanged(this)}),this.registerPropertyChangedHandlers(["isRequired"],()=>{!this.isRequired&&this.errors.length>0&&this.validate(),this.locTitle.strChanged(),this.clearCssClasses()}),this.registerPropertyChangedHandlers(["indent","rightIndent"],()=>{this.resetIndents()}),this.registerPropertyChangedHandlers(["showCommentArea","showOtherItem"],()=>{this.initCommentFromSurvey()}),this.registerPropertyChangedHandlers(["commentPlaceholder"],()=>{this.resetRenderedCommentPlaceholder()}),this.registerFunctionOnPropertiesValueChanged(["no","readOnly","hasVisibleErrors","containsErrors"],()=>{this.updateQuestionCss()}),this.registerPropertyChangedHandlers(["_isMobile"],()=>{this.onMobileChanged()}),this.registerPropertyChangedHandlers(["colSpan"],()=>{var e;null===(e=this.parent)||void 0===e||e.updateColumns()}),this.registerPropertyChangedHandlers(["currentNotificationType"],()=>{this.updateQuestionCss()})}getDefaultTitle(){return this.name}createLocTitleProperty(){const e=super.createLocTitleProperty();return e.storeDefaultText=!0,e.onGetTextCallback=(e,t)=>(e||t||(e=this.getDefaultTitle()),this.survey?this.survey.getUpdatedQuestionTitle(this,e):e),this.locProcessedTitle=new Ze(this,!0),this.locProcessedTitle.sharedData=e,e}get locRenderedTitle(){return this.isSingleInputActive&&this.singleInputLocTitle?this.singleInputLocTitle:this.locTitle}get commentTextAreaModel(){return this.commentTextAreaModelValue||(this.commentTextAreaModelValue=new Jt(this.getCommentTextAreaOptions())),this.commentTextAreaModelValue}getCommentTextAreaOptions(){const e={question:this,id:()=>this.commentId,propertyNames:["comment"],className:()=>this.cssClasses.comment,placeholder:()=>this.renderedCommentPlaceholder,isDisabledAttr:()=>this.isInputReadOnly||!1,rows:()=>this.commentAreaRows,autoGrow:()=>this.autoGrowComment,maxLength:()=>this.getOthersMaxLength(),ariaRequired:()=>this.a11y_input_ariaRequired,ariaLabel:()=>this.a11y_input_ariaLabel,getTextValue:()=>this.comment,onTextAreaChange:e=>{this.onCommentChange(e)},onTextAreaInput:e=>{this.onCommentInput(e)}};return e}getSurvey(e=!1){return e?this.parent?this.parent.getSurvey(e):null:this.onGetSurvey?this.onGetSurvey():super.getSurvey()}getValueName(){return this.valueName?this.valueName.toString():this.name}get valueName(){return this.getPropertyValue("valueName","")}set valueName(e){var t=this.getValueName();this.setPropertyValue("valueName",e),this.onValueNameChanged(t)}onValueNameChanged(e){this.survey&&(this.survey.questionRenamed(this,this.name,e||this.name),this.initDataFromSurvey())}onNameChanged(e){this.locTitle.strChanged(),this.survey&&this.survey.questionRenamed(this,e,this.valueName?this.valueName:e)}get isReady(){return this.isReadyValue}onAsyncRunningChanged(){this.updateIsReady()}ensureQuestionIsReady(){this.displayValue}waitForQuestionIsReady(e){return new Promise(t=>{if(this.ensureQuestionIsReady(),this.isReady)t(),e&&e();else{const s=(n,i)=>{i.isReady&&(this.onReadyChanged.remove(s),t(),e&&e())};this.onReadyChanged.add(s)}})}updateIsReady(){let e=this.getIsQuestionReady();if(e){const t=this.getIsReadyDependsOn();for(let s=0;s<t.length;s++)if(!t[s].getIsQuestionReady()){e=!1;break}}this.setIsReady(e)}getIsQuestionReady(){return!this.isAsyncExpressionRunning&&this.getAreNestedQuestionsReady()}getAreNestedQuestionsReady(){const e=this.getIsReadyNestedQuestions();if(!Array.isArray(e))return!0;for(let t=0;t<e.length;t++)if(!e[t].isReady)return!1;return!0}getIsReadyNestedQuestions(){return this.getNestedQuestions()}setIsReady(e){const t=this.isReadyValue;this.isReadyValue=e,t!=e&&(this.getIsReadyDependends().forEach(e=>e.updateIsReady()),this.onReadyChanged.fire(this,{question:this,isReady:e,oldIsReady:t}))}getIsReadyDependsOn(){return this.getIsReadyDependendCore(!0)}getIsReadyDependends(){return this.getIsReadyDependendCore(!1)}getDependedQuestionsByValueName(e){return this.survey.questionsByValueName(this.getValueName())}getIsReadyDependendCore(e){if(!this.survey)return[];const t=this.getDependedQuestionsByValueName(e),s=new Array;return t.forEach(e=>{e!==this&&s.push(e)}),e||(this.parentQuestion&&s.push(this.parentQuestion),this.dependedQuestions.length>0&&this.dependedQuestions.forEach(e=>s.push(e))),s}choicesLoaded(){}get page(){return this.parentQuestion?this.parentQuestion.page:this.getPage(this.parent)}set page(e){this.setPage(this.parent,e)}getPanel(){return null}delete(e=!0){this.removeFromParent(),e?this.dispose():this.resetDependedQuestions()}removeFromParent(){this.parent&&this.removeSelfFromList(this.parent.elements)}addDependedQuestion(e){!e||this.dependedQuestions.indexOf(e)>-1||this.dependedQuestions.push(e)}removeDependedQuestion(e){if(e){var t=this.dependedQuestions.indexOf(e);t>-1&&this.dependedQuestions.splice(t,1)}}updateDependedQuestions(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].updateDependedQuestion()}updateDependedQuestion(){}resetDependedQuestion(){}get isFlowLayout(){return"flow"===this.getLayoutType()}getLayoutType(){return this.parent?this.parent.getChildrenLayoutType():"row"}isLayoutTypeSupported(e){return"flow"!==e}get visible(){return this.getPropertyValue("visible")}set visible(e){e!=this.visible&&(this.setPropertyValue("visible",e),this.onVisibleChangedCore(),this.notifySurveyVisibilityChanged())}onVisibleChanged(){const e=this.getPropertyValue("isVisible");this.onVisibleChangedCore();const t=this.getPropertyValue("isVisible");void 0!==e&&e!==t&&this.notifySurveyVisibilityChanged()}onVisibleChangedCore(){this.updateIsVisibleProp(),!this.isVisible&&this.errors&&this.errors.length>0&&(this.errors=[])}notifyStateChanged(e){super.notifyStateChanged(e),this.isCollapsed&&this.onHidingContent()}updateElementVisibility(){this.updateIsVisibleProp()}updateIsVisibleProp(){const e=this.getPropertyValue("isVisible"),t=this.isVisible;e!==t&&(this.setPropertyValue("isVisible",t),t||this.onHidingContent()),t!==this.visible&&this.areInvisibleElementsShowing&&this.updateQuestionCss(!0)}get useDisplayValuesInDynamicTexts(){return this.getPropertyValue("useDisplayValuesInDynamicTexts")}set useDisplayValuesInDynamicTexts(e){this.setPropertyValue("useDisplayValuesInDynamicTexts",e)}getUseDisplayValuesInDynamicTexts(){return this.useDisplayValuesInDynamicTexts}get visibleIf(){return this.getPropertyValue("visibleIf","")}set visibleIf(e){this.setPropertyValue("visibleIf",e)}get isVisible(){return!(this.survey&&this.survey.areEmptyElementsHidden&&this.isEmpty())&&(!!this.areInvisibleElementsShowing||this.isVisibleCore())}get isVisibleInSurvey(){return this.isVisible&&this.isParentVisible}isVisibleCore(){return this.visible}get visibleIndex(){return this.getPropertyValue("visibleIndex",-1)}onHidingContent(){}get showNumber(){return this.getPropertyValue("showNumber")}set showNumber(e){this.setPropertyValue("showNumber",e),this.notifySurveyVisibilityChanged()}get hideNumber(){return!this.showNumber}set hideNumber(e){this.showNumber=!e}get isAllowTitleLeft(){return!0}getType(){return"question"}get isQuestion(){return!0}moveTo(e,t=null){return this.moveToBase(this.parent,e,t)}getProgressInfo(){return this.hasInput?{questionCount:1,answeredQuestionCount:this.isEmpty()?0:1,requiredQuestionCount:this.isRequired?1:0,requiredAnsweredQuestionCount:!this.isEmpty()&&this.isRequired?1:0}:super.getProgressInfo()}runTriggerInfo(e,t,s){this.runExpressionByProperty(e.name,s,t=>{e.doComplete(t,s)},s=>!!e.canRun()&&(!t||this.canExecuteTriggerByKeys(t,s,this.getExpressionByProperty(e.secondName))))}canExecuteTriggerByKeys(e,t,s){!t&&s&&(t=s,s=void 0);const n=this.canExecuteTriggerByKeysCore(e,t);return"var"===n||(s?""!==this.canExecuteTriggerByKeysCore(e,s):"func"===n||"const"===n)}canExecuteTriggerByKeysCore(e,t){if(!t.expression)return"";const s=t.getVariables();return Array.isArray(s)&&0!==s.length?(new S).isAnyKeyChanged(e,s)?"var":"":t.hasFunction()?"func":"const"}getValueGetterContext(e){return new Yt(this,e)}addTriggersInfo(){this.addTriggerInfo({name:"resetValueIf",canRun:()=>!this.isEmpty(),doComplete:(e,t)=>{!0===e&&(this.startSetValueOnExpression(),this.updateValueWithDefaultsOrClear(),this.finishSetValueOnExpression())}}),this.addTriggerInfo({name:"setValueIf",secondName:"setValueExpression",canRun:()=>!0,doComplete:(e,t)=>{if(e)if(this.setValueExpression){const e={name:"setValueExpression",canRun:()=>!0,doComplete:(e,t)=>this.runExpressionSetValue(e)};this.runTriggerInfo(e,void 0,t)}else this.clearValue()}}),this.addTriggerInfo({name:"setValueExpression",canRun:()=>!this.setValueIf,doComplete:(e,t)=>this.runExpressionSetValue(e)})}addTriggerInfo(e){this.triggersInfo.push(e)}runTriggers(e,t,s){if(this.isSettingQuestionValue||this.parentQuestion&&this.parentQuestion.getValueName()===e)return;s||((s={})[e]=t);const n=this.getDataFilteredProperties();this.triggersInfo.forEach(e=>{this.runTriggerInfo(e,s,n)})}runConditions(){this.data&&!this.isLoadingFromJson&&(this.isDesignMode||this.runCondition(this.getDataFilteredProperties()),this.locStrsChanged())}setSurveyImpl(e,t){super.setSurveyImpl(e),this.survey&&(this.survey.questionCreated(this),!0!==t&&this.runConditions(),this.visible||this.updateIsVisibleProp(),this.updateIsMobileFromSurvey())}get parent(){return this.getPropertyValue("parent",null)}set parent(e){this.parent!==e&&(this.removeFromParent(),this.setPropertyValue("parent",e),e&&this.updateQuestionCss(),this.onParentChanged())}onParentChanged(){}calculateSingleInputQuestion(){if(!this.isSingleInputActive)return;const e=this.getSingleInputQuestions();if(Array.isArray(e)&&e.length>0){const t=e[0];return this.onBeforeSetSingleInputQuestion(t),t}}get singleInputQuestion(){const e=this.survey;if(e&&e.isSingleVisibleInput)return this.getPropertyValue("singleInputQuestion",void 0,()=>this.calculateSingleInputQuestion())}get currentSingleInputQuestion(){let e=this.singleInputQuestion;for(;e&&e.singleInputQuestion&&e.singleInputQuestion!==e;)e=e.singleInputQuestion;return e}get currentSingleInputParentQuestion(){const e=this.currentSingleInputQuestion;return e?e.singleInputQuestion===e?e:e.parentQuestion||this:this}get singleInputSummary(){return this.getPropertyValue("singleInputSummary",void 0,()=>{if(!this.supportNestedSingleInput())return;const e=this.singleInputQuestion;if(!e||e!==this)return;const t=this.createSingleInputSummary();return t&&(this.calcSingleInputActions(),this.resetPropertyValue("singleInputLocTitle")),t})}createSingleInputSummary(){}get rootParentQuestion(){let e=this;for(;e.parentQuestion;)e=e.parentQuestion;return e}getParentQuestions(){const e=new Array;let t=this;for(;t.parentQuestion;)e.push(t.parentQuestion),t=t.parentQuestion;return e}resetSingleInput(){this.resetSingleInputCore()}resetSingleInputCore(){const e=this.getPropertyValue("singleInputQuestion");this.resetPropertyValue("singleInputQuestion"),e&&this.onSingleInputChanged()}onSingleInputChanged(e=!0){var t,s;e&&this.resetSingleInputSummary(),null===(t=this.singleInputLocTitle)||void 0===t||t.strChanged(),this.resetPropertyValue("singleInputLocTitle"),this.calcSingleInputActions(),null===(s=this.survey)||void 0===s||s.updateNavigationElements()}resetSingleInputSummary(){var e;null===(e=this.singleInputSummary)||void 0===e||e.dispose(),this.resetPropertyValue("singleInputSummary")}validateSingleInput(){const e=this.currentSingleInputQuestion;return!e||e.validate(!0,!0)}getSingleInputElementPos(){if(this.singleInputQuestion===this)return 0;const e=this.currentSingleInputParentQuestion;if(e!==this&&2===e.getSingleInputElementPos())return 2;const t=this.singleInputQuestion,s=this.getSingleInputQuestions();if(s.length<2)return 0;let n=s.indexOf(t);return 0===n?-1:n>=s.length-1?1:2}get isSingleInputActive(){const e=this.survey;if(!e||!e.isSingleVisibleInput)return!1;const t=e.currentSingleQuestion;return!!t&&t===this.rootParentQuestion}singleInputOnAddItem(e){this.isSingleInputActive&&(e&&this.singleInputSummary?this.resetSingleInputSummary():this.setSingleQuestionOnChange(Number.MAX_VALUE))}singleInputOnRemoveItem(e){this.isSingleInputActive&&(this.singleInputSummary?this.onSingleInputChanged():this.setSingleQuestionOnChange(e))}getSingleQuestionOnChange(e){return null}setSingleQuestionOnChange(e){const t=this.getSingleQuestionOnChange(e);t?this.setSingleInputQuestion(t):this.resetSingleInput()}onSetAsSingleInput(){this.isSingleInputSummaryShown=!1;const e=!this.wasRendered||this.singleInputSummary;this.onFirstRendering(),e&&(this.resetSingleInputSummary(),this.resetPropertyValue("singleInputQuestion"),this.resetPropertyValue("singleInputLocTitle"))}nextSingleInput(){return this.nextPrevSingleInput(1)}prevSingleInput(){return this.nextPrevSingleInput(-1)}getSingleInputAddText(){const e=this.currentSingleInputQuestion;return e&&e.singleInputSummary?e.getSingleInputAddTextCore():void 0}singleInputAddItem(e){e&&!this.validateSingleInput()||this.currentSingleInputQuestion.singleInputAddItemCore()}singleInputRemoveItem(){const e=this.singleInputQuestion;e&&e!==this.singleInputParentQuestion&&this.singleInputRemoveItemCore(e)}get singleInputLocTitle(){return this.getPropertyValue("singleInputLocTitle",void 0,()=>this.getSingleQuestionLocTitle())}get singleInputActions(){return this.getPropertyValue("singleInputActions",void 0,()=>this.createSingleInputActions())}get singleInputHasActions(){return this.getPropertyValue("singleInputHasActions",void 0,()=>this.createSingleInputActions())}get singleInputHideHeader(){var e;return!!(null===(e=this.singleInputQuestion)||void 0===e?void 0:e.singleInputQuestion)&&this.singleInputQuestion!==this}set sinleInputHasActions(e){this.setPropertyValue("singleInputHasActions",e)}get singleInputParentQuestion(){var e;return(null===(e=this.singleInputQuestion)||void 0===e?void 0:e.parentQuestion)||this}createSingleInputActions(){var e;if((null===(e=this.survey)||void 0===e?void 0:e.currentSingleQuestion)!==this)return;const t=new Ce;return t.actions=this.getSingleQuestionActions(),t}calcSingleInputActions(){if(this.parentQuestion)this.parentQuestion.calcSingleInputActions();else{const e=this.getSingleQuestionActions();this.singleInputActions&&(this.singleInputActions.actions=e),this.sinleInputHasActions=e.length>0||void 0}}getSingleQuestionActions(){const e=new Array,t=this.currentSingleInputParentQuestion;if(!t||t===this)return e;const s=t.getSingleInputQuestions(),n=new Array;let i;s.length>1&&s[0]===t&&(i=t,n.push(t));let r=t.parentQuestion;for(;r;)n.push(r),r=r.parentQuestion;for(let t=n.length-1;t>=0;t--){const s=n[t];if(s!==i){const t=s.singleInputLocTitle,n=new De({id:"single-action"+s.id,locTitle:t,css:this.cssClasses.breadcrumbsItem,innerCss:this.cssClasses.breadcrumbsItemButton,action:()=>{s.singleInputMoveToFirst()}});n.cssClasses={},e.push(n)}}return e}singleInputMoveToFirst(){const e=this.singleInputQuestion;e&&e!==this&&e.singleInputMoveToFirst(),this.singleInputMoveToFirstCore()}singleInputMoveToFirstCore(){}getSingleQuestionLocTitle(){return this.singleInputSummary?void 0:this.getSingleQuestionLocTitleCore()}getSingleQuestionLocTitleCore(){}supportNestedSingleInput(){var e;return null===(e=this.survey)||void 0===e?void 0:e.supportsNestedSingleInput(this)}getSingleInputQuestions(){if(!this.supportNestedSingleInput())return[];const e=this.getPropertyValue("singleInputQuestion");if(e===this)return[this];const t=this.getSingleInputQuestionsCore(e,!e||!this.isSingleInputSummaryShown);return t.forEach(e=>{e!==this&&this.onSingleInputQuestionAdded(e)}),t}getSingleInputQuestionsCore(e,t){return this.getNestedQuestions(!0,!1)}onSingleInputQuestionAdded(e){}fillSingleInputQuestionsInContainer(e,t){}getSingleInputQuestionsForDynamic(e,t){const s=new Array;return e&&e!==this&&t.indexOf(e)<0&&this.fillSingleInputQuestionsInContainer(s,e),t.forEach(e=>s.push(e)),this.isSingleInputSummaryShown&&s.length>0&&s.unshift(this),s.push(this),s}getSingleInputAddTextCore(){}singleInputAddItemCore(){}singleInputRemoveItemCore(e){}setSingleInputQuestionCore(e){this.onBeforeSetSingleInputQuestion(e),this.setPropertyValue("singleInputQuestion",e)}onBeforeSetSingleInputQuestion(e){e.onFirstRendering(),e===this&&(this.isSingleInputSummaryShown=!0)}setSingleInputQuestion(e,t){this.singleInputQuestion!==e&&(this.setSingleInputQuestionCore(e),this.onSingleInputChanged(!t||e!==this))}nextPrevSingleInput(e){let t=this.currentSingleInputParentQuestion;for(;t&&t!==this;){if(t.nextPrevSingleInput(e))return!0;t=t.parentQuestion}const s=this.singleInputQuestion;if(!s)return!1;const n=this.getSingleInputQuestions();let i=n.indexOf(s);if(i<0){if(0===n.length)return!1;i=0,e=0}return i+=e,!(i<0||i>=n.length||(this.setSingleInputQuestion(n[i],e<0),0))}get hasTitle(){return"hidden"!==this.getTitleLocation()}get titleLocation(){return this.getPropertyValue("titleLocation")}set titleLocation(e){var t="hidden"==this.titleLocation||"hidden"==e;this.setPropertyValue("titleLocation",e.toLowerCase()),this.updateQuestionCss(),t&&this.notifySurveyVisibilityChanged()}get showTitle(){return"hidden"!==this.getTitleLocation()}set showTitle(e){this.titleLocation=e?"default":"hidden"}getTitleOwner(){return this}getIsTitleRenderedAsString(){return"hidden"===this.titleLocation}notifySurveyOnChildrenVisibilityChanged(){return!1}notifySurveyVisibilityChanged(){if(!this.canUpdateValueOnVisibleChanged())return;this.survey.questionVisibilityChanged(this,this.isVisible,!this.parentQuestion||this.parentQuestion.notifySurveyOnChildrenVisibilityChanged());const e=this.isClearValueOnHidden;this.visible||this.clearValueOnHidding(e),e&&this.isVisibleInSurvey&&this.updateValueWithDefaults()}clearValueOnHidding(e){e&&this.clearValueIfInvisible()}get titleWidth(){if(this.parent&&"left"===this.getTitleLocation()){const e=this.parent.getColumsForElement(this),t=e.length;if(0!==t&&e[0].questionTitleWidth)return e[0].questionTitleWidth;const s=this.getQuestionParentTitleWidth(),n=this.getPercentQuestionTitleWidth(s);if(!n&&this.parent){let e=s;return e&&!isNaN(e)&&(e+="px"),e}return n/(t||1)+"%"}}getQuestionParentTitleWidth(){if(!this.parent)return;const e=this.parent.getQuestionTitleWidth();return!e&&this.parentQuestion?this.parentQuestion.getQuestionParentTitleWidth():e}getPercentQuestionTitleWidth(e){if(e&&"%"===e[e.length-1])return parseInt(e)}getTitleLocation(){if(this.isFlowLayout)return"hidden";var e=this.getTitleLocationCore();return"left"!==e||this.isAllowTitleLeft||(e="top"),e}getTitleLocationCore(){return"default"!==this.titleLocation?this.titleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"}get hasTitleOnLeft(){return this.hasTitle&&"left"===this.getTitleLocation()}get hasTitleOnTop(){return this.hasTitle&&"top"===this.getTitleLocation()}get hasTitleOnBottom(){return this.hasTitle&&"bottom"===this.getTitleLocation()}get hasTitleOnLeftTop(){if(!this.hasTitle)return!1;const e=this.getTitleLocation();return"left"===e||"top"===e}get errorLocation(){return this.getPropertyValue("errorLocation")}set errorLocation(e){this.setPropertyValue("errorLocation",e)}getErrorLocation(){return"default"!==this.errorLocation?this.errorLocation:this.parentQuestion?this.parentQuestion.getChildErrorLocation(this):this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"}getChildErrorLocation(e){return this.getErrorLocation()}get hasInput(){return!0}get hasSingleInput(){return this.hasInput}get inputId(){return this.id+"i"}getDefaultTitleValue(){return this.name}getDefaultTitleTagName(){return xt.titleTags.question}get descriptionLocation(){return this.getPropertyValue("descriptionLocation")}set descriptionLocation(e){this.setPropertyValue("descriptionLocation",e),this.updateQuestionCss()}get hasDescriptionUnderTitle(){return"underTitle"==this.getDescriptionLocation()&&this.hasDescription}get hasDescriptionUnderInput(){return"underInput"==this.getDescriptionLocation()&&this.hasDescription}getDescriptionLocation(){return"default"!==this.descriptionLocation?this.descriptionLocation:this.survey?this.survey.questionDescriptionLocation:"underTitle"}needClickTitleFunction(){return super.needClickTitleFunction()||this.hasInput}processTitleClick(){if(super.processTitleClick(),!this.isCollapsed)return setTimeout(()=>{this.focus()},1),!0}get requiredErrorText(){return this.getLocalizableStringText("requiredErrorText")}set requiredErrorText(e){this.setLocalizableStringText("requiredErrorText",e)}get locRequiredErrorText(){return this.getLocalizableString("requiredErrorText")}get commentText(){return this.getLocalizableStringText("commentText")}set commentText(e){this.setLocalizableStringText("commentText",e)}get locCommentText(){return this.getLocalizableString("commentText")}get commentPlaceholder(){return this.getLocalizableStringText("commentPlaceholder")}set commentPlaceholder(e){this.setLocalizableStringText("commentPlaceholder",e)}get locCommentPlaceholder(){return this.getLocalizableString("commentPlaceholder")}get commentPlaceHolder(){return this.commentPlaceholder}set commentPlaceHolder(e){this.commentPlaceholder=e}get renderedCommentPlaceholder(){var e;return null!==(e=this.getPropertyValue("renderedCommentPlaceholder"))&&void 0!==e?e:this.isReadOnly?void 0:this.commentPlaceHolder}resetRenderedCommentPlaceholder(){this.resetPropertyValue("renderedCommentPlaceholder")}get defaultDisplayValue(){return this.getLocalizableStringText("defaultDisplayValue")}set defaultDisplayValue(e){this.setLocalizableStringText("defaultDisplayValue",e)}get locDefaultDisplayValue(){return this.getLocalizableString("defaultDisplayValue")}getAllErrors(){return this.errors.slice()}getErrorByType(e){for(let t=0;t<this.errors.length;t++)if(this.errors[t].getErrorType()===e)return this.errors[t];return null}get customWidget(){return this.isCustomWidgetRequested||this.customWidgetValue||(this.isCustomWidgetRequested=!0,this.updateCustomWidget()),this.customWidgetValue}updateCustomWidget(){this.customWidgetValue=Zt.Instance.getCustomWidget(this)}localeChanged(){super.localeChanged(),this.resetRenderedCommentPlaceholder(),this.localeChangedCallback&&this.localeChangedCallback()}get isCompositeQuestion(){return!1}get isContainer(){return!1}onCommentInput(e){this.isInputTextUpdate&&e.target&&(this.comment=e.target.value)}onCommentChange(e){this.comment=e.target.value,this.comment!==e.target.value&&(e.target.value=this.comment)}afterRenderQuestionElement(e){this.survey&&this.hasSingleInput&&this.survey.afterRenderQuestionInput(this,e)}afterRender(e){this.afterRenderCore(e),this.survey&&(this.survey.afterRenderQuestion(this,e),this.afterRenderQuestionCallback&&this.afterRenderQuestionCallback(this,e),(this.supportComment()||this.supportOther())&&(this.commentElements=[],this.getCommentElementsId().forEach(t=>{const s=null==e?void 0:e.querySelector(`#${t}`);s&&this.commentElements.push(s)})),this.checkForResponsiveness(e))}afterRenderCore(e){super.afterRenderCore(e)}getCommentElementsId(){return[this.commentId]}beforeDestroyQuestionElement(e){this.commentElements=void 0}get processedTitle(){return this.locProcessedTitle.textOrHtml||this.name}get fullTitle(){return this.locTitle.renderedHtml}get titlePattern(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"}get isRequireTextOnStart(){return this.isRequired&&"requireNumTitle"==this.titlePattern}get isRequireTextBeforeTitle(){return this.isRequired&&"numRequireTitle"==this.titlePattern&&""!==this.requiredMark}get isRequireTextAfterTitle(){return this.isRequired&&"numTitleRequire"==this.titlePattern&&""!==this.requiredMark}get startWithNewLine(){return this.getPropertyValue("startWithNewLine")}set startWithNewLine(e){this.startWithNewLine!=e&&this.setPropertyValue("startWithNewLine",e)}calcCssClasses(e){const t={error:{}};return this.copyCssClasses(t,e.question),this.copyCssClasses(t.error,e.error),this.updateCssClasses(t,e),t}onCalcCssClasses(e){super.onCalcCssClasses(e),this.survey&&this.survey.updateQuestionCssClasses(this,e),this.onUpdateCssClassesCallback&&this.onUpdateCssClassesCallback(e)}get cssRoot(){return this.ensureElementCss(),this.getPropertyValue("cssRoot","")}setCssRoot(e){this.setPropertyValue("cssRoot",e)}getCssRoot(e){const t=this.hasCssError(!0);return(new fe).append(super.getCssRoot(e)).append(this.isFlowLayout&&!this.isDesignMode?e.flowRoot:e.mainRoot).append(e.titleLeftRoot,!this.isFlowLayout&&this.hasTitleOnLeft).append(e.titleTopRoot,!this.isFlowLayout&&this.hasTitleOnTop).append(e.titleBottomRoot,!this.isFlowLayout&&this.hasTitleOnBottom).append(e.descriptionUnderInputRoot,!this.isFlowLayout&&this.hasDescriptionUnderInput).append(e.hasError,t).append(e.hasErrorTop,t&&"top"==this.getErrorLocation()).append(e.hasErrorBottom,t&&"bottom"==this.getErrorLocation()).append(e.small,!this.width).append(e.answered,this.isAnswered).append(e.noPointerEventsMode,this.isReadOnlyAttr).toString()}get cssHeader(){return this.ensureElementCss(),this.getPropertyValue("cssHeader","")}setCssHeader(e){this.setPropertyValue("cssHeader",e)}getCssHeader(e){return(new fe).append(e.header).append(e.headerTop,this.hasTitleOnTop).append(e.headerLeft,this.hasTitleOnLeft).append(e.headerBottom,this.hasTitleOnBottom).toString()}supportContainerQueries(){return!1}get cssContent(){return this.ensureElementCss(),this.getPropertyValue("cssContent","")}setCssContent(e){this.setPropertyValue("cssContent",e)}getCssContent(e){return(new fe).append(e.content).append(e.contentSupportContainerQueries,this.supportContainerQueries()).append(e.contentLeft,this.hasTitleOnLeft).toString()}get cssTitle(){return this.ensureElementCss(),this.getPropertyValue("cssTitle","")}setCssTitle(e){this.setPropertyValue("cssTitle",e)}getCssTitle(e){return(new fe).append(super.getCssTitle(e)).append(e.singleInputTitle,!!this.singleInputQuestion).append(e.titleOnAnswer,!this.containsErrors&&this.isAnswered).append(e.titleEmpty,!this.title.trim()).toString()}get cssDescription(){return this.ensureElementCss(),this.getPropertyValue("cssDescription","")}setCssDescription(e){this.setPropertyValue("cssDescription",e)}getCssDescription(e){return(new fe).append(e.description).append(e.descriptionUnderInput,"underInput"==this.getDescriptionLocation()).toString()}get showErrorsAboveQuestion(){return"top"===this.getErrorLocation()}get showErrorsBelowQuestion(){return"bottom"===this.getErrorLocation()}get cssError(){return this.ensureElementCss(),this.getPropertyValue("cssError","")}setCssError(e){this.setPropertyValue("cssError",e)}getCssError(e){return(new fe).append(e.error.root).append(e.error.warningMode,"warning"===this.currentNotificationType).append(e.error.infoMode,"info"===this.currentNotificationType).append(e.errorsContainer).append(e.errorsContainerTop,this.showErrorsAboveQuestion).append(e.errorsContainerBottom,this.showErrorsBelowQuestion).toString()}hasCssError(e){const t=this.errors;for(let s=0;s<t.length;s++){const n=t[s];if(n.visible&&(e||n.isError))return!0}return this.hasCssErrorCallback()}get isSingleInputQuestionMode(){var e;return!!this.parentQuestion&&(null===(e=this.survey)||void 0===e?void 0:e.isSingleVisibleInput)}getIsNested(){return!this.isSingleInputQuestionMode&&super.getIsNested()}getHasFrameV2(){return!!this.isSingleInputQuestionMode||super.getHasFrameV2()}getRootCss(){return(new fe).append(this.cssRoot,!this.singleInputQuestion).append(this.cssClasses.mobile,this.isMobile).append(this.cssClasses.readOnly,this.isReadOnlyStyle).append(this.cssClasses.disabled,this.isDisabledStyle).append(this.cssClasses.preview,this.isPreviewStyle).append(this.cssClasses.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()}getQuestionRootCss(){return(new fe).append(this.cssClasses.root).append(this.cssClasses.rootMobile,this.isMobile).toString()}updateElementCss(e){this.wasRendered?(super.updateElementCss(e),e&&this.updateQuestionCss(!0)):this.clearCssClasses(),this.resetIndents()}updateQuestionCss(e){!this.isLoadingFromJson&&this.survey&&(this.wasRendered?this.updateElementCssCore(this.cssClasses):this.isRequireUpdateElements=!0)}ensureElementCss(){this.cssClassesValue||this.updateQuestionCss(!0)}updateElementCssCore(e){this.setCssRoot(this.getCssRoot(e)),this.setCssHeader(this.getCssHeader(e)),this.setCssContent(this.getCssContent(e)),this.setCssTitle(this.getCssTitle(e)),this.setCssDescription(this.getCssDescription(e)),this.setCssError(this.getCssError(e))}updateCssClasses(e,t){if(!t.question)return;const s=t[this.getCssType()],n=(new fe).append(e.title).append(t.question.titleRequired,this.isRequired);e.title=n.toString();const i=(new fe).append(e.root).append(s,this.isRequired&&!!t.question.required);if(null==s)e.root=i.toString();else if("string"==typeof s||s instanceof String)e.root=i.append(s.toString()).toString();else{e.root=i.toString();for(const t in s)e[t]=s[t]}}getCssType(){return this.getType()}get renderCssRoot(){return this.cssClasses.root||void 0}calcPaddingLeft(){return this.getIndentSize(this.indent)}calcPaddingRight(){return this.getIndentSize(this.rightIndent)}getIndentSize(e){return e<1||!this.getSurvey()||!this.cssClasses||!this.cssClasses.indent?"":e*this.cssClasses.indent+"px"}focus(e=!1,t){if(this.isDesignMode||!this.isVisible||!this.survey)return;let s=this.page;const n=!!s&&this.survey.activePage!==s,i=this.survey.isSingleVisibleInput;if(n&&!i)this.survey.focusQuestionByInstance(this,e);else if(i){this.survey.currentSingleQuestion=this.rootParentQuestion;const t=this.getParentQuestions();for(let e=t.length-1;e>=1;e--)e===t.length-1&&t[e].setSingleInputQuestion(t[e-1]);t.length>0&&t[0].setSingleInputQuestion(this),this.focusInputElement(e)}else{this.expandAllParents();const s=this.survey.isSmoothScrollEnabled?{behavior:"smooth"}:void 0;this.survey.scrollElementToTop(this,this,null,this.id,t,s,void 0,()=>{this.focusInputElement(e)})}}focusInputElement(e){var t;const s=e?this.getFirstErrorInputElementId():this.getFirstInputElementId(),n=null===(t=this.survey)||void 0===t?void 0:t.rootElement;We.FocusElement(s,!1,n)&&this.fireCallback(this.focusCallback)}get isValidateVisitedEmptyFields(){return this.supportEmptyValidation()&&!!this.survey&&this.survey.getValidateVisitedEmptyFields()&&this.isEmpty()}supportEmptyValidation(){return!1}onBlur(e){this.onBlurCore(e)}onFocus(e){this.onFocusCore(e)}onBlurCore(e){this.isFocusEmpty&&this.isEmpty()&&this.validate(!0)}onFocusCore(e){this.isFocusEmpty=this.isValidateVisitedEmptyFields}expandAllParents(){this.expandAllParentsCore(this)}expandAllParentsCore(e){e&&(e.isCollapsed&&e.expand(),this.expandAllParentsCore(e.parent),this.expandAllParentsCore(e.parentQuestion))}focusIn(){!this.survey||this.isDisposed||this.isContainer||this.survey.whenQuestionFocusIn(this)}fireCallback(e){e&&e()}getOthersMaxLength(){return this.survey&&this.survey.maxCommentLength>0?this.survey.maxCommentLength:null}onCreating(){}getFirstQuestionToFocus(e){return this.hasInput&&(!e||this.currentErrorCount>0)?this:null}getFirstInputElementId(){return this.inputId}getFirstErrorInputElementId(){return this.getFirstInputElementId()}supportComment(){const e=this.getPropertyByName("showCommentArea");return!e||e.visible}supportOther(){return!1}get isRequired(){return this.getPropertyValue("isRequired")}set isRequired(e){this.setPropertyValue("isRequired",e)}get requiredIf(){return this.getPropertyValue("requiredIf","")}set requiredIf(e){this.setPropertyValue("requiredIf",e)}get showCommentArea(){return this.getPropertyValue("showCommentArea",!1)}set showCommentArea(e){this.supportComment()&&this.setPropertyValue("showCommentArea",e)}get hasComment(){return this.showCommentArea}set hasComment(e){this.showCommentArea=e}get id(){return this.getPropertyValue("id")}set id(e){this.setPropertyValue("id",e)}get ariaTitleId(){return this.id+"_ariaTitle"}get ariaDescriptionId(){return this.id+"_ariaDescription"}get commentId(){return this.id+"_comment"}get requireUpdateCommentValue(){return this.hasComment}get isReadOnly(){const e=!!this.parent&&this.parent.isReadOnly,t=!!this.parentQuestion&&this.parentQuestion.isReadOnly,s=!!this.survey&&this.survey.isDisplayMode,n=!!this.readOnlyCallback&&this.readOnlyCallback();return this.readOnly||e||s||t||n}get isInputReadOnly(){return void 0!==this.forceIsInputReadOnly?this.forceIsInputReadOnly:this.isReadOnly||this.isDesignMode}get renderedInputReadOnly(){return this.isInputReadOnly?"":void 0}get renderedInputDisabled(){return this.isInputReadOnly?"":void 0}get isReadOnlyAttr(){return this.isReadOnly}get isDisabledAttr(){return this.isDesignMode||!!this.readOnlyCallback&&this.readOnlyCallback()}onReadOnlyChanged(){this.setPropertyValue("isInputReadOnly",this.isInputReadOnly),super.onReadOnlyChanged(),this.isReadOnly&&this.clearErrors(),this.updateQuestionCss(),this.resetRenderedCommentPlaceholder()}get enableIf(){return this.getPropertyValue("enableIf","")}set enableIf(e){this.setPropertyValue("enableIf",e)}surveyChoiceItemVisibilityChange(){}runCondition(e){this.isDesignMode||(e||(e={}),e.question=this,this.runConditionCore(e),this.isValueChangedDirectly||this.isClearValueOnHidden&&!this.isVisibleInSurvey||this.runDefaultValueExpression(e))}get isInDesignMode(){return!this.isContentElement&&this.isDesignMode}get no(){return this.getPropertyValue("no")}calcNo(){if(!this.hasTitle||!this.showNumber)return"";let e;this.parent&&(e=this.parent.visibleIndex);let t=a.getNumberByIndex(this.visibleIndex,this.getStartIndex(),e);return this.parent&&(t=this.parent.addNoFromChild(t)),this.survey&&(t=this.survey.getUpdatedQuestionNo(this,t)),t}getStartIndex(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""}onSurveyLoad(){this.isCustomWidgetRequested=!1,this.fireCallback(this.surveyLoadCallback),this.updateValueWithDefaults(),this.isEmpty()&&this.initDataFromSurvey()}onSetData(){super.onSetData(),this.isDesignMode||!this.survey||this.isLoadingFromJson||(this.initDataFromSurvey(),this.onSurveyValueChanged(this.value),this.updateValueWithDefaults(),this.updateIsAnswered())}initDataFromSurvey(){if(this.data){const e=this.data.getValue(this.getValueName());a.isValueEmpty(e)&&this.isLoadingFromJson||this.updateValueFromSurvey(e),this.initCommentFromSurvey()}}initCommentFromSurvey(){this.data&&this.requireUpdateCommentValue?this.updateCommentFromSurvey(this.data.getComment(this.getValueName())):this.updateCommentFromSurvey("")}runExpression(e){if(this.survey&&e)return this.survey.runExpression(e)}get commentAreaRows(){return this.survey&&this.survey.commentAreaRows}get autoGrowComment(){return this.survey&&this.survey.autoGrowComment}get allowResizeComment(){return this.survey&&this.survey.allowResizeComment}get questionValue(){return this.getPropertyValueWithoutDefault("value")}set questionValue(e){this.setPropertyValue("value",e)}get questionComment(){return this.getPropertyValueWithoutDefault("comment")}set questionComment(e){this.setPropertyValue("comment",e),this.fireCallback(this.commentChangedCallback)}get isValueArray(){return!1}get value(){return this.getValueCore()}set value(e){this.setNewValue(e)}getStructuredValue(e=-1){return this.value}get hasFilteredValue(){return!1}getFilteredValue(e){return this.value}getFilteredName(){return this.getValueName()}get valueForSurvey(){return this.valueForSurveyCore(this.value)}valueForSurveyCore(e){return this.valueToDataCallback?this.valueToDataCallback(e):e}valueFromDataCore(e){return this.valueFromDataCallback?this.valueFromDataCallback(e):e}clearValue(e){void 0!==this.value&&(this.value=void 0),this.comment&&!0!==e&&(this.comment=void 0),this.setValueChangedDirectly(!1)}clearValueOnly(){this.clearValue(!0)}unbindValue(){this.clearValue()}createValueCopy(){return this.getUnbindValue(this.value)}initDataUI(){}getUnbindValue(e){return this.isValueSurveyElement(e)?e:a.getUnbindValue(e)}isValueSurveyElement(e){return!!e&&(Array.isArray(e)?e.length>0&&this.isValueSurveyElement(e[0]):!0===e.isSurveyObj)}canClearValueAsInvisible(e){return!(("onHiddenContainer"!==e||this.isParentVisible)&&(this.isVisibleInSurvey||this.page&&this.page.isStartPage||this.survey&&this.survey.hasVisibleQuestionByValueName(this)))}get isParentVisible(){if(this.parentQuestion&&!this.parentQuestion.isVisible)return!1;for(var e=this.parent;e;){if(!e.isVisible)return!1;e=e.parent}return!0}clearValueIfInvisible(e="onHidden"){const t=this.getClearIfInvisible();"none"!==t&&("onHidden"===e&&"onComplete"===t||"onHiddenContainer"===e&&t!==e||this.clearValueIfInvisibleCore(e))}clearValueIfInvisibleCore(e){this.canClearValueAsInvisible(e)&&this.clearValue()}get clearIfInvisible(){return this.getPropertyValue("clearIfInvisible")}set clearIfInvisible(e){this.setPropertyValue("clearIfInvisible",e)}getClearIfInvisible(){const e=this.clearIfInvisible;return this.survey?this.survey.getQuestionClearIfInvisible(e):"default"!==e?e:"onComplete"}get displayValue(){return this.isLoadingFromJson?"":this.getDisplayValue(!0)}getDisplayValue(e,t=void 0){var s=this.calcDisplayValue(e,t);return this.survey&&(s=this.survey.getQuestionDisplayValue(this,s)),this.displayValueCallback?this.displayValueCallback(s):s}calcDisplayValue(e,t=void 0){if(this.customWidget){var s=this.customWidget.getDisplayValue(this,t);if(s)return s}return t=null==t?this.createValueCopy():t,this.isValueEmpty(t)&&!this.locDefaultDisplayValue.isEmpty&&(t=this.defaultDisplayValue),this.isValueEmpty(t,!this.allowSpaceAsAnswer)?this.getDisplayValueEmpty():this.getDisplayValueCore(e,t)}getDisplayValueCore(e,t){return t}getDisplayValueEmpty(){return""}get defaultValue(){return this.getPropertyValue("defaultValue")}set defaultValue(e){this.isValueExpression(e)?this.defaultValueExpression=e.substring(1):(this.setPropertyValue("defaultValue",this.valueToData(e)),this.updateValueWithDefaults())}get defaultValueExpression(){return this.getPropertyValue("defaultValueExpression")}set defaultValueExpression(e){this.setPropertyValue("defaultValueExpression",e),this.defaultValueRunner=void 0,this.updateValueWithDefaults()}get resetValueIf(){return this.getPropertyValue("resetValueIf")}set resetValueIf(e){this.setPropertyValue("resetValueIf",e)}get setValueIf(){return this.getPropertyValue("setValueIf")}set setValueIf(e){this.setPropertyValue("setValueIf",e)}get setValueExpression(){return this.getPropertyValue("setValueExpression")}set setValueExpression(e){this.setPropertyValue("setValueExpression",e)}get resizeStyle(){return this.allowResizeComment?"both":"none"}getPlainData(e){if(e||(e={includeEmpty:!0,includeQuestionTypes:!1}),e.includeEmpty||!this.isEmpty()){var t={name:this.name,title:this.locTitle.renderedHtml,value:this.value,displayValue:this.displayValue,isNode:!1,getString:e=>"object"==typeof e?JSON.stringify(e):e};return!0===e.includeQuestionTypes&&(t.questionType=this.getType()),(e.calculations||[]).forEach(e=>{t[e.propertyName]=this.getPlainDataCalculatedValue(e.propertyName)}),this.hasComment&&(t.isNode=!0,t.data=[{name:0,isComment:!0,title:"Comment",value:xt.commentSuffix,displayValue:this.comment,getString:e=>"object"==typeof e?JSON.stringify(e):e,isNode:!1}]),t}}getPlainDataCalculatedValue(e){return this[e]}get correctAnswer(){return this.getPropertyValue("correctAnswer")}set correctAnswer(e){this.setPropertyValue("correctAnswer",this.valueToData(e))}get quizQuestionCount(){return this.isVisible&&this.hasInput&&!this.isValueEmpty(this.correctAnswer)?this.getQuizQuestionCount():0}get correctAnswerCount(){return this.isEmpty()||this.isValueEmpty(this.correctAnswer)?0:this.getCorrectAnswerCount()}getQuizQuestionCount(){return 1}getCorrectAnswerCount(){return this.checkIfAnswerCorrect()?1:0}checkIfAnswerCorrect(){const e=a.isTwoValueEquals(this.value,this.correctAnswer,this.getAnswerCorrectIgnoreOrder(),xt.comparator.caseSensitive,!0),t=e?1:0,s=this.quizQuestionCount-t,n={result:e,correctAnswers:t,correctAnswerCount:t,incorrectAnswers:s,incorrectAnswerCount:s};return this.survey&&this.survey.onCorrectQuestionAnswer(this,n),n.result}getAnswerCorrectIgnoreOrder(){return!1}isAnswerCorrect(){return this.correctAnswerCount==this.quizQuestionCount}updateValueWithDefaults(){if(this.isLoadingFromJson||!this.isDesignMode&&this.isDefaultValueEmpty())return;const e=this.isEmpty();(this.isDesignMode||e)&&(e&&this.isDefaultValueEmpty()||this.isClearValueOnHidden&&!this.isVisible||this.isDesignMode&&this.isContentElement&&this.isDefaultValueEmpty()||this.setDefaultValue())}get isValueDefault(){return!this.isEmpty()&&(this.isTwoValueEquals(this.defaultValue,this.value)||!this.isValueChangedDirectly&&!!this.defaultValueExpression)}get isClearValueOnHidden(){const e=this.getClearIfInvisible();return"none"!==e&&"onComplete"!==e&&("onHidden"===e||"onHiddenContainer"===e)}getQuestionFromArray(e,t){return null}getDefaultValue(){return this.defaultValue}isDefaultValueEmpty(){return!this.defaultValueExpression&&this.isValueEmpty(this.defaultValue,!this.allowSpaceAsAnswer)}setDefaultValue(){this.setDefaultValueCore(e=>{e=this.convertToCorrectValue(e),this.isTwoValueEquals(this.value,e)||this.setDefaultIntoValue(e)})}setDefaultIntoValue(e){this.value=e}setDefaultValueCore(e){const t=t=>{this.runExpressionSetValueCore(t,e)};this.runDefaultValueExpression(void 0,t)||t(this.getUnbindValue(this.defaultValue))}updateValueWithDefaultsOrClear(){this.isDesignMode||this.isLoadingFromJson||(this.isDefaultValueEmpty()?this.clearValue():this.setDefaultValue())}isValueExpression(e){return!!e&&"string"==typeof e&&e.length>0&&"="==e[0]}convertFuncValuetoQuestionValue(e){return a.convertValToQuestionVal(e)}runExpressionSetValueCore(e,t){t(this.convertFuncValuetoQuestionValue(e))}runExpressionSetValue(e){this.runExpressionSetValueCore(e,e=>{this.isTwoValueEquals(this.value,e)||(this.startSetValueOnExpression(),this.value=e,this.finishSetValueOnExpression())})}startSetValueOnExpression(){var e;null===(e=this.survey)||void 0===e||e.startSetValueOnExpression()}finishSetValueOnExpression(){var e;null===(e=this.survey)||void 0===e||e.finishSetValueOnExpression()}runDefaultValueExpression(e=null,t){return!!this.data&&(t||(t=e=>{this.runExpressionSetValue(e)}),e||((e=this.defaultValueExpression?this.data.getFilteredProperties():{}).question=this),this.runExpressionByProperty("defaultValueExpression",e,e=>{null==e&&(e=this.defaultValue),this.isChangingViaDefaultValue=!0,t(e),this.isChangingViaDefaultValue=!1}))}get comment(){return this.getQuestionComment()}set comment(e){if(e&&e!==this.comment){const t=e.toString().trim();t!==e&&(e=t)===this.comment&&this.setPropertyValueDirectly("comment",e)}this.comment!=e&&this.setNewComment(e)}getCommentAreaCss(e=!1){return(new fe).append("form-group",e).append(this.cssClasses.formGroup,!e).append(this.cssClasses.commentArea).append(this.cssClasses.otherArea,e).toString()}getQuestionComment(){return this.questionComment}isEmpty(){return this.isValueEmpty(this.value,!this.allowSpaceAsAnswer)}get isAnswered(){return this.getPropertyValue("isAnswered")||!1}set isAnswered(e){this.setPropertyValue("isAnswered",e)}updateIsAnswered(){const e=this.isAnswered;this.setPropertyValue("isAnswered",this.getIsAnswered()),e!==this.isAnswered&&this.updateQuestionCss()}getIsAnswered(){return!this.isEmpty()}get validators(){return this.getPropertyValue("validators")}set validators(e){this.setPropertyValue("validators",e)}getValidators(){return this.validators}getSupportedValidators(){for(var e=[],t=this.getType();t;){var s=xt.supportedValidators[t];if(s)for(var n=s.length-1;n>=0;n--)e.splice(0,0,s[n]);t=I.findClass(t).parentName}return e}addConditionObjectsByContext(e,t){e.push({name:this.getFilteredName(),text:this.processedTitle,question:this})}getNestedQuestions(e=!1,t=!0,s=!1){const n=[];return this.collectNestedQuestions(n,e,t,s),s||1!==n.length||n[0]!==this?n:[]}collectNestedQuestions(e,t=!1,s=!0,n=!1){t&&!this.isVisible||this.collectNestedQuestionsCore(e,t,s,n)}collectNestedQuestionsCore(e,t,s,n){e.push(this)}addNestedQuestion(e,t,s,n){s?this.collectNestedQuestions(e,t,s,n):t&&!this.isVisible||e.push(this)}getConditionJson(e=null,t=null){const s=(new V).toJsonObject(this);return s.type=this.getType(),s}hasErrors(e=!0,t=!1){return!this.validateCore(e,!1,t)}validate(e=!0,t=!1,s=!1,n){return this.validateCore(e,!0,t,s,n)}validateCore(e,t,s=!1,n=!1,i){t&&n&&this.parent&&this.parent.validateContainerOnly();const r=new es({isOnValueChanged:n,focusOnFirstError:s,fireCallback:e,callbackResult:i});return this.validateElement(r),r.finish(),r.runningResult}validateElement(e){return this.validateElementCore(e)}validateElementCore(e){const t=this.checkForErrors(e);return e.fireCallback&&(this.errors=t,this.errors!==t&&this.errors.forEach(e=>e.locText.strChanged())),e.setErrorElement(this,t),this.updateContainsErrors(),this.isCollapsed&&e.fireCallback&&t.length>0&&this.expand(),0===t.length}get currentErrorCount(){return this.errors.length}get requiredMark(){return null!=this.survey&&this.isRequired?this.survey.requiredMark:""}get requiredText(){return this.requiredMark}addError(e){if(!e)return;let t=null;t="string"==typeof e||e instanceof String?this.addCustomError(e):e,this.errors.push(t)}addCustomError(e){return new Ot(e,this.survey)}removeError(e){if(!e)return!1;const t=this.errors,s=t.indexOf(e);return-1!==s&&t.splice(s,1),-1!==s}checkForErrors(e){var t=new Array;if(this.isVisible&&this.canCollectErrors()&&this.collectErrors(t,e),this.survey){if(this.validateValueCallback&&0===t.length){const e=this.validateValueCallback();e&&t.push(e)}this.survey.validateQuestion(this,t,e.fireCallback)}return t}canCollectErrors(){return!this.isReadOnly||xt.readOnly.enableValidation}collectErrors(e,t){if(this.onCheckForErrors(e,t.isOnValueChanged,t.fireCallback),e.length>0||!this.canRunValidators(t.isOnValueChanged))return;const s=this.runValidators(t);if(s.length>0){e.length=0;for(var n=0;n<s.length;n++)e.push(s[n])}}canRunValidators(e){return!0}onCheckForErrors(e,t,s){if((!t||this.isOldAnswered)&&this.hasRequiredError()){const t=new Vt(this.requiredErrorText,this);t.onUpdateErrorTextCallback=e=>{e.text=this.requiredErrorText},e.push(t)}if(!this.isEmpty()&&this.customWidget){const t=this.customWidget.validate(this);t&&e.push(this.addCustomError(t))}}hasRequiredError(){return this.isRequired&&this.isEmpty()}get isRunningValidators(){return this.getIsRunningValidators()}getIsRunningValidators(){return!!this.validatorRunner}runValidators(e){return this.validatorRunner&&(this.validatorRunner.onAsyncCompleted=null),this.validatorRunner=new Ft,this.validatorRunner.onAsyncCompleted=t=>{this.doOnAsyncCompleted(e.fireCallback,t),e.setErrorElement(this,t),e.removeElement(this.id)},e.addElement(this.id),this.validatorRunner.run(this)}doOnAsyncCompleted(e,t){e&&t.forEach(e=>{this.errors.indexOf(e)<0&&this.errors.push(e)}),this.validatorRunner=null}setNewValue(e){if(this.survey&&(e=this.survey.questionValueChanging(this,e)),this.isNewValueEqualsToValue(e))return;if(!this.checkIsValueCorrect(e))return;const t=this.getUnbindValue(this.value);this.isOldAnswered=this.isAnswered,this.isSettingQuestionValue=!0,this.setNewValueInData(e),this.allowNotifyValueChanged&&this.onValueChanged(),this.isSettingQuestionValue=!1,this.isAnswered!==this.isOldAnswered&&this.updateQuestionCss(),this.isOldAnswered=void 0,this.parent&&this.parent.onQuestionValueChanged(this),this.survey&&this.survey.questionValueChanged(this,t)}getValueChangingOptions(e){}checkIsValueCorrect(e){const t=this.isValueEmpty(e,!this.allowSpaceAsAnswer)||this.isNewValueCorrect(e);return t||k.inCorrectQuestionValue(this.name,e),t}isNewValueCorrect(e){return!0}isNewValueEqualsToValue(e){const t=this.value;return!!this.isTwoValueEquals(e,t,!1,!1)&&!(e===t&&t&&(Array.isArray(t)||"object"==typeof t))}isTextValue(){return!1}getIsInputTextUpdate(){return!!this.survey&&this.survey.isUpdateValueTextOnTyping}get requireStrictCompare(){return!1}getExpressionValue(e){return e}getDataLocNotification(){return!!this.isInputTextUpdate&&"text"}get isInputTextUpdate(){return this.getIsInputTextUpdate()&&this.isTextValue()}setNewValueInData(e){e=this.valueToData(e),this.isValueChangedInSurvey||this.setValueCore(e)}getValueCore(){return this.questionValue}setValueCore(e){this.setQuestionValue(e),null!=this.data&&this.canSetValueToSurvey()&&(e=this.valueForSurvey,this.data.setValue(this.getValueName(),e,this.getDataLocNotification(),this.allowNotifyValueChanged,this.name)),this.isMouseDown=!1}canSetValueToSurvey(){return!0}valueFromData(e){return e}valueToData(e){return e}convertToCorrectValue(e){return e}onValueChanged(){}onMouseDown(){this.isMouseDown=!0}setNewComment(e){this.questionComment!==e&&(this.questionComment=e,this.setCommentIntoData(e))}setCommentIntoData(e){null!=this.data&&this.data.setComment(this.getValueName(),e,!!this.getIsInputTextUpdate()&&"text")}getValidName(e){return ss(super.getValidName(e))}updateValueFromSurvey(e,t=!1){if(e=this.getUnbindValue(e),e=this.valueFromDataCore(e),!this.checkIsValueCorrect(e))return;const s=this.isValueEmpty(e);this.isUpdateingValueFromSurvey=!0,!s&&this.defaultValueExpression?this.setDefaultValueCore(t=>{this.updateValueFromSurveyCore(e,this.isTwoValueEquals(e,t))}):(this.updateValueFromSurveyCore(e,this.data!==this.getSurvey()),t&&s&&(this.isValueChangedDirectly=!1),s&&this.updateBindingsOnClearFromSurveyCore()),this.isUpdateingValueFromSurvey=!1,this.updateDependedQuestions(),this.updateIsAnswered()}canUpdateBindings(){return!this.isUpdateingValueFromSurvey}updateBindingsOnClearFromSurveyCore(){const e=this.data;e&&!this.isBindingEmpty()&&this.bindings.getNames().forEach(t=>{const s=this.bindings.getValueNameByPropertyName(t),n=e.getValue(s);this.isValueEmpty(n)||this.updateBindingProp(t,n)})}updateValueFromSurveyCore(e,t){this.isChangingViaDefaultValue=t,e=this.valueFromData(e);const s=this.isTwoValueEquals(this.questionValue,this.convertToCorrectValue(e));this.setQuestionValue(e),s||this.resetSingleInput(),this.isChangingViaDefaultValue=!1}updateCommentFromSurvey(e){this.questionComment=e}onChangeQuestionValue(e){}setValueChangedDirectly(e){this.isValueChangedDirectly=e,this.setValueChangedDirectlyCallback&&this.setValueChangedDirectlyCallback(e)}setQuestionValue(e,t=!0){e=this.convertToCorrectValue(e);const s=this.isTwoValueEquals(this.questionValue,e);s||this.isChangingViaDefaultValue||this.isParentChangingViaDefaultValue||this.setValueChangedDirectly(!0),this.questionValue=e,s||this.onChangeQuestionValue(e),!s&&this.allowNotifyValueChanged&&this.fireCallback(this.valueChangedCallback),t&&this.updateIsAnswered()}get isParentChangingViaDefaultValue(){var e;return!0===(null===(e=this.data)||void 0===e?void 0:e.isChangingViaDefaultValue)}onSurveyValueChanged(e){}setVisibleIndex(e){return e>-1&&(!this.isVisible||!this.hasTitle&&!xt.numbering.includeQuestionsWithHiddenTitle||!this.showNumber&&!xt.numbering.includeQuestionsWithHiddenNumber)&&(e=-1),this.setPropertyValue("visibleIndex",e),this.setPropertyValue("no",this.calcNo()),e<0?0:1}removeElement(e){return!1}supportGoNextPageAutomatic(){return this.supportAutoAdvance()}supportAutoAdvance(){return!1}supportGoNextPageError(){return!0}clearIncorrectValues(){}clearOnDeletingContainer(){}clearErrors(){this.errors=[]}clearUnusedValues(){}onAnyValueChanged(e,t){}checkBindings(e,t){if(!this.bindings.isEmpty()&&this.data)for(var s=this.bindings.getPropertiesByValueName(e),n=0;n<s.length;n++){const e=s[n];this.isValueEmpty(t)&&a.isNumber(this[e])&&(t=0),this.updateBindingProp(e,t)}}updateBindingProp(e,t){this[e]=t}getComponentName(){return Kt.Instance.getRendererByQuestion(this)}isDefaultRendering(){return!!this.customWidget||"default"===this.getComponentName()}get renderAs(){return this.getPropertyValue("renderAs")}set renderAs(e){this.setPropertyValue("renderAs",e)}get inMatrixMode(){return this.getPropertyValue("inMatrixMode",!1)}set inMatrixMode(e){this.setPropertyValue("inMatrixMode",e)}getErrorCustomText(e,t){return this.survey?this.survey.getSurveyErrorCustomText(this,e,t):e}getValidatorTitle(){return null}get validatedValue(){return this.value}set validatedValue(e){this.value=e}getAllValues(){return this.data?this.data.getAllValues():null}processPopupVisiblilityChanged(e,t){this.survey.processPopupVisiblityChanged(this,e,t)}processOpenDropdownMenu(e){this.survey.processOpenDropdownMenu(this,e)}onTextKeyDownHandler(e){13===e.keyCode&&this.survey.questionEditFinishCallback(this,e)}transformToMobileView(){}transformToDesktopView(){}needResponsiveWidth(){return!1}supportResponsiveness(){return!1}needResponsiveness(){return this.supportResponsiveness()&&!this.isDesignMode}checkForResponsiveness(e){if(this.needResponsiveness())if(this.isCollapsed){const t=()=>{this.isExpanded&&(this.initResponsiveness(e),this.unregisterPropertyChangedHandlers(["state"],"for-responsiveness"))};this.registerPropertyChangedHandlers(["state"],t,"for-responsiveness")}else this.initResponsiveness(e)}getObservedElementSelector(){return".sd-scrollable-container"}onMobileChanged(){this.onMobileChangedCallback&&this.onMobileChangedCallback()}triggerResponsiveness(e=!0){this.triggerResponsivenessCallback&&this.triggerResponsivenessCallback(e)}initResponsiveness(e){if(i.isAvailable()&&(this.destroyResizeObserver(),e&&this.isDefaultRendering())){const t=this.getObservedElementSelector();if(!t)return;if(!e.querySelector(t))return;let s,i=!1;this.triggerResponsivenessCallback=n=>{n&&(s=void 0,this.renderAs="default",i=!1);const r=()=>{const n=e.querySelector(t);if(this.isDefaultRendering()&&(s=n.scrollWidth),i||!pt(n))i=!1;else{const e=ct(n);i=this.processResponsiveness(s,e)}};n?setTimeout(r,1):r()},this.resizeObserver=new ResizeObserver(e=>{n.requestAnimationFrame(()=>{this.triggerResponsiveness(!1)})}),this.onMobileChangedCallback=()=>{setTimeout(()=>{const n=e.querySelector(t);this.processResponsiveness(s,ct(n))},0)},this.resizeObserver.observe(e)}}getCompactRenderAs(){return"default"}getDesktopRenderAs(){return"default"}onBeforeSetCompactRenderer(){}onBeforeSetDesktopRenderer(){}processResponsiveness(e,t){if(t=Math.round(t),Math.abs(e-t)>2){const s=this.renderAs;return e>t?(this.onBeforeSetCompactRenderer(),this.renderAs=this.getCompactRenderAs()):(this.onBeforeSetDesktopRenderer(),this.renderAs=this.getDesktopRenderAs()),s!==this.renderAs}return!1}destroyResizeObserver(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.onMobileChangedCallback=void 0,this.triggerResponsivenessCallback=void 0,this.renderAs=this.getDesktopRenderAs())}dispose(){super.dispose(),this.resetDependedQuestions(),this.destroyResizeObserver()}resetDependedQuestions(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].resetDependedQuestion()}get isNewA11yStructure(){return!1}get ariaLabel(){return this.isNewA11yStructure||this.hasTitle&&!this.parentQuestion?null:this.locTitle.renderedHtml}get ariaRole(){return this.isNewA11yStructure?null:"textbox"}get ariaRequired(){return this.isNewA11yStructure?null:this.isRequired?"true":"false"}get ariaInvalid(){return this.isNewA11yStructure?null:this.hasCssError()?"true":"false"}get ariaLabelledBy(){return this.isNewA11yStructure||!this.hasTitle||this.parentQuestion?null:this.ariaTitleId}get ariaDescribedBy(){return this.isNewA11yStructure?null:this.hasTitle&&this.hasDescription?this.ariaDescriptionId:null}getContentAriaHidden(){return null}get contentAriaHidden(){return this.getContentAriaHidden()}get ariaErrormessage(){return this.isNewA11yStructure?null:this.hasCssError()?this.id+"_errors":null}get a11y_input_ariaRole(){return null}get a11y_input_ariaRequired(){return this.isRequired?"true":"false"}get a11y_input_ariaInvalid(){return this.hasCssError()?"true":"false"}get a11y_input_ariaLabel(){return this.hasTitle&&!this.parentQuestion?null:this.locTitle.renderedHtml}get a11y_input_ariaLabelledBy(){return this.hasTitle&&!this.parentQuestion?this.ariaTitleId:null}get a11y_input_ariaDescribedBy(){let e=null;return this.hasCssError()?e=this.id+"_errors":this.hasTitle&&!this.parentQuestion&&this.hasDescription&&"hidden"!==this.descriptionLocation&&(e=this.ariaDescriptionId),e}get a11y_input_ariaErrormessage(){return null}get a11y_input_ariaExpanded(){return this.getPropertyValue("ariaExpanded")}registerSychProperties(e,t){this.registerFunctionOnPropertiesValueChanged(e,()=>{this._syncPropertiesChanging||(this._syncPropertiesChanging=!0,t(),this._syncPropertiesChanging=!1)})}}function ss(e){if(!e)return e;for(e=e.trim().replace(/[\{\}]+/g,"");e&&e[0]===xt.expressionDisableConversionChar;)e=e.substring(1);return e}ts.questionCounter=100,I.addClass("question",[{name:"!name",onSettingValue:(e,t)=>ss(t)},{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"useDisplayValuesInDynamicTexts:boolean",alternativeName:"useDisplayValuesInTitle",default:!0,layout:"row"},"visibleIf:condition",{name:"width"},{name:"minWidth",defaultFunc:()=>xt.minWidth},{name:"maxWidth",defaultFunc:()=>xt.maxWidth},{name:"colSpan:number",visible:!1,onSerializeValue:e=>e.getPropertyValue("colSpan")},{name:"effectiveColSpan:number",minValue:1,isSerializable:!1,visibleIf:function(e){return!!e&&!!e.survey&&e.survey.gridLayoutEnabled}},{name:"startWithNewLine:boolean",default:!0,layout:"row"},{name:"indent:number",default:0,choices:[0,1,2,3],layout:"row"},{name:"page",isSerializable:!1,visibleIf:function(e){var t=e?e.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(e){var t=e?e.survey:null;return t?t.pages.map(e=>({value:e.name,text:e.title})):[]}},{name:"title:text",serializationProperty:"locTitle",layout:"row",dependsOn:"name",onPropertyEditorUpdate:function(e,t){e&&t&&(t.placeholder=e.locTitle.getPlaceholder())}},{name:"titleLocation",default:"default",choices:["default","top","bottom","left","hidden"],layout:"row"},{name:"showTitle:boolean",isSerializable:!1,dependsOn:"titleLocation"},{name:"description:text",serializationProperty:"locDescription",layout:"row"},{name:"descriptionLocation",default:"default",choices:["default","underInput","underTitle"]},{name:"showNumber:boolean",dependsOn:"titleLocation",default:!0,visibleIf:function(e){if(!e)return!0;if("hidden"===e.titleLocation)return!1;var t=e?e.parent:null;if(t&&"off"===t.showQuestionNumbers)return!1;var s=e?e.survey:null;return!s||"off"!==s.showQuestionNumbers||!!t&&"onpanel"===t.showQuestionNumbers}},{name:"hideNumber:boolean",visible:!1,isSerializable:!1},{name:"valueName",onSettingValue:(e,t)=>ss(t)},"enableIf:condition","resetValueIf:condition","setValueIf:condition","setValueExpression:expression","defaultValue:value",{name:"defaultValueExpression:expression",category:"logic"},"correctAnswer:value",{name:"clearIfInvisible",default:"default",choices:["default","none","onComplete","onHidden","onHiddenContainer"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},"requiredIf:condition",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"errorLocation",default:"default",choices:["default","top","bottom"]},{name:"readOnly:switch",overridingProperty:"enableIf"},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"bindings:bindings",serializationProperty:"bindings",isSerializableFunc:e=>!e.isBindingEmpty(),visibleIf:function(e){return e.bindings.getNames().length>0}},{name:"renderAs",default:"default",visible:!1},{name:"showCommentArea:switch",visible:!1,default:!1,alternativeName:"hasComment",category:"general"},{name:"commentText",dependsOn:"showCommentArea",visibleIf:function(e){return e.showCommentArea},serializationProperty:"locCommentText"},{name:"commentPlaceholder",alternativeName:"commentPlaceHolder",serializationProperty:"locCommentPlaceholder",dependsOn:"showCommentArea",visibleIf:function(e){return e.hasComment}},{name:"defaultDisplayValue",serializationProperty:"locDefaultDisplayValue"}]),I.addAlterNativeClassName("question","questionbase");class ns{constructor(e){this.item=e}getValue(e,t,s,n){if(1===e.length){const t=e[0].name;if("item"===t||"choice"===t)return{isFound:!0,value:this.item.value,context:this}}const i=this.item.locOwner;if(i&&i.getValueGetterContext)return i.getValueGetterContext().getValue(e,t,s,n)}getRootObj(){const e=this.item.locOwner;return e&&e.getValueGetterContext?e:this.item.getSurvey()}getTextValue(e,t,s){return s&&t===this.item.value?this.item.textOrHtml:null!=t?t.toString():""}}class is extends Le{getMarkdownHtml(e,t,s){return this.locOwner?this.locOwner.getMarkdownHtml(e,t,s||this):void 0}getRenderer(e){return this.locOwner?this.locOwner.getRenderer(e,this):null}getRendererContext(e){return this.locOwner?this.locOwner.getRendererContext(e,this):e}getProcessedText(e){return this.locOwner?this.locOwner.getProcessedText(e):e}static get Separator(){return xt.itemValueSeparator}static set Separator(e){xt.itemValueSeparator=e}static setData(e,t,s){e.length=0;for(let n=0;n<t.length;n++){const i=t[n],r=i&&"function"==typeof i.getType?i.getType():null!=s?s:"itemvalue",a=I.createClass(r);a.setData(i),i.originalItem&&(a.originalItem=i.originalItem),i.data&&(a.data=i.data),e.push(a)}}static getData(e){for(var t=[],s=0;s<e.length;s++)t.push(e[s].getData());return t}static getItemByValue(e,t){if(!Array.isArray(e))return null;const s=a.isValueEmpty(t);for(var n=0;n<e.length;n++){if(s&&a.isValueEmpty(e[n].value))return e[n];if(a.isTwoValueEquals(e[n].value,t,!1,!0,!1))return e[n]}return null}static getTextOrHtmlByValue(e,t){var s=is.getItemByValue(e,t);return null!==s?s.textOrHtml:""}static locStrsChanged(e){for(var t=0;t<e.length;t++)e[t].locStrsChanged()}static runConditionsForItems(e,t,s,n,i=!0,r){return is.runConditionsForItemsCore(e,t,s,n,!0,i,r)}static runEnabledConditionsForItems(e,t,s,n){return is.runConditionsForItemsCore(e,null,t,s,!1,!0,n)}static runConditionsForItemsCore(e,t,s,n,i,r=!0,a){for(var o=!1,l=0;l<e.length;l++){var u=e[l],d=!(!r||!u.getConditionRunner)&&u.getConditionRunner(i);d||(d=s);var h=!0;d&&(h=d.runContext(u.getValueGetterContext(),n)),a&&(h=a(u,h)),t&&h&&t.push(u),h!=(i?u.isVisible:u.isEnabled)&&(o=!0,i?u.setIsVisible&&u.setIsVisible(h):u.setIsEnabled&&u.setIsEnabled(h))}return o}constructor(e,t,s){super(),this.typeName=s,this.ownerPropertyName="",t&&(this.locText.text=t),e&&"object"==typeof e?this.setData(e,!0):this.setValue(e,!0),this.getType()!=this.getBaseType()&&g.createProperties(this),this.onCreating()}onCreating(){}getType(){return this.typeName||this.getBaseType()}getBaseType(){return"itemvalue"}getSurvey(e=!1){return this.locOwner&&this.locOwner.getSurvey?this.locOwner.getSurvey():null}getLocale(){return this.locOwner&&this.locOwner.getLocale?this.locOwner.getLocale():""}getLocalizableString(e){return"text"===e?this.locText:super.getLocalizableString(e)}getValueGetterContext(){return new ns(this)}get isInternal(){return!0===this.isGhost}createLocText(){const e=new Ze(this,!0,"text");return e.onStrChanged=(e,t)=>{this.propertyValueChanged("text",e,t)},e.onGetTextCallback=e=>this.onGetText(e),e}onGetText(e){return e||this.getValueText()}getValueText(){const e=this.value;return a.isValueEmpty(e)?null:e.toString()}get locText(){return this.locTextValue||(this.locTextValue=this.createLocText()),this.locTextValue}setLocText(e){this.locTextValue=e}get locOwner(){return this._locOwner}set locOwner(e){this._locOwner=e,this.onLocOwnerChanged()}onLocOwnerChanged(){}get value(){return this.getPropertyValue("value")}set value(e){this.setValue(e,!1)}setValue(e,t){let s;e=this.getCorrectValue(e);const n=xt.itemValueSeparator;if(n&&!a.isValueEmpty(e)){var i=e.toString(),r=i.indexOf(n);r>-1&&(e=i.slice(0,r),s=i.slice(r+1))}t?this.setPropertyValueDirectly("value",e):this.setPropertyValue("value",e),s&&(this.text=s),this.id=this.value}getCorrectValue(e){return e}get normalizedId(){return(a.isValueEmpty(this.value)?"":this.value.toString()).replace(/[^a-zA-Z0-9_]/g,"_")}get hasText(){return!!this.pureText}get pureText(){var e;return(null===(e=this.locTextValue)||void 0===e?void 0:e.pureText)||""}set pureText(e){this.text=e}get text(){return this.calculatedText}set text(e){this.locText.text=e}get textOrHtml(){return this.locTextValue?this.locText.textOrHtml:this.getValueText()}get calculatedText(){return this.locTextValue?this.locText.calculatedText:this.getValueText()}get shortcutText(){return this.text}canSerializeValue(){const e=this.value;return null!=e&&!Array.isArray(e)&&"object"!=typeof e}getData(){var e=this.toJSON();if(e.value&&e.value.pos&&delete e.value.pos,a.isValueEmpty(e.value))return e;const t=this.canSerializeValue();return t&&(xt.serialization.itemValueSerializeAsObject||xt.serialization.itemValueSerializeDisplayText)||1!=Object.keys(e).length?(xt.serialization.itemValueSerializeDisplayText&&void 0===e.text&&t&&(e.text=this.value.toString()),e):this.value}toJSON(){var e={},t=I.getProperties(this.getType());t&&0!=t.length||(t=I.getProperties(this.getBaseType()));for(var s=new V,n=0;n<t.length;n++){const i=t[n];this.canAddPpropertyToJSON(i)&&s.valueToJson(this,e,i)}return e}canAddPpropertyToJSON(e){return!("text"===e.name&&(!this.locTextValue||!this.locTextValue.hasNonDefaultText()&&a.isTwoValueEquals(this.value,this.locTextValue.getLocaleText(""),!1,!0,!1)))}setData(e,t){var s;if(!a.isValueEmpty(e)){if(void 0===e.value&&void 0!==e.text&&1===Object.keys(e).length&&(e.value=e.text),void 0!==e.value){let t;t="function"==typeof e.toJSON?e.toJSON():e,(new V).toObject(t,this)}else this.setValue(e,t);t||null===(s=this.locTextValue)||void 0===s||s.strChanged()}}get visibleIf(){return this.getPropertyValueWithoutDefault("visibleIf")||""}set visibleIf(e){this.setPropertyValue("visibleIf",e)}get enableIf(){return this.getPropertyValueWithoutDefault("enableIf")||""}set enableIf(e){this.setPropertyValue("enableIf",e)}get isVisible(){const e=this.getPropertyValueWithoutDefault("isVisible");return void 0===e||e}setIsVisible(e){this.setPropertyValue("isVisible",e)}get isEnabled(){const e=this.getPropertyValueWithoutDefault("isEnabled");return void 0===e||e}setIsEnabled(e){this.setPropertyValue("isEnabled",e)}addUsedLocales(e){this.locTextValue&&this.AddLocStringToUsedLocales(this.locTextValue,e)}locStrsChanged(){var e;super.locStrsChanged(),null===(e=this.locTextValue)||void 0===e||e.strChanged()}onPropertyValueChanged(e,t,s){var n;"value"!==e||this.hasText||null===(n=this.locTextValue)||void 0===n||n.strChanged();var i="itemValuePropertyChanged";this.locOwner&&this.locOwner[i]&&this.locOwner[i](this,e,t,s)}getConditionRunner(e){return e?this.getVisibleConditionRunner():this.getEnableConditionRunner()}getVisibleConditionRunner(){const e=this.getExpressionFromSurvey("visibleIf");return e?(this.visibleConditionRunner||(this.visibleConditionRunner=new ae(e)),this.visibleConditionRunner.expression=e,this.visibleConditionRunner):null}getEnableConditionRunner(){const e=this.getExpressionFromSurvey("enableIf");return e?(this.enableConditionRunner||(this.enableConditionRunner=new ae(e)),this.enableConditionRunner.expression=e,this.enableConditionRunner):null}get selected(){const e=this._locOwner;return e instanceof ts&&e.isItemSelected&&void 0===this.selectedValue&&(this.selectedValue=new de(()=>e.isItemSelected(this))),this.selectedValue}getComponent(){return this._locOwner instanceof ts?this.componentValue||this._locOwner.itemComponent:this.componentValue}setComponent(e){this.componentValue=e}setRootElement(e){this._htmlElement=e}getRootElement(){return this._htmlElement}getEnabled(){return this.isEnabled}setEnabled(e){this.setIsEnabled(e)}getVisible(){const e=void 0===this.isVisible||this.isVisible,t=void 0===this._visible||this._visible;return e&&t}setVisible(e){this.visible!==e&&(this._visible=e)}get _visible(){return this.getPropertyValue("visible",!0)}set _visible(e){this.setPropertyValue("visible",e)}getLocTitle(){return this.locText}getTitle(){return this.text}setLocTitle(e){}setTitle(e){}get icon(){return this.getPropertyValue("icon","")}set icon(e){this.setPropertyValue("icon",e)}}me([d()],is.prototype,"selectedValue",void 0),he.createItemValue=function(e,t){var s=null;return(s=t?V.metaData.createClass(t,{}):"function"==typeof e.getType?new is(null,void 0,e.getType()):new is(null)).setData(e),s},he.itemValueLocStrChanged=function(e){is.locStrsChanged(e)},p.getItemValuesDefaultValue=(e,t)=>{const s=new Array;return is.setData(s,Array.isArray(e)?e:[],t),s},I.addClass("itemvalue",[{name:"!value",isUnique:!0},{name:"text",serializationProperty:"locText"},{name:"visibleIf:condition",locationInTable:"detail"},{name:"enableIf:condition",locationInTable:"detail",visibleIf:e=>!e||"rateValues"!==e.ownerPropertyName}],e=>new is(e));class rs extends he{constructor(e=null,t=null){super(),this.expressionIsRunning=!1,this.isCalculated=!1,e&&(this.name=e),t&&(this.expression=t)}setOwner(e){this.data=e,this.rerunExpression()}getType(){return"calculatedvalue"}getSurvey(e=!1){return this.data&&this.data.getSurvey?this.data.getSurvey():null}get owner(){return this.data}get name(){return this.getPropertyValue("name")||""}set name(e){this.setPropertyValue("name",e)}get includeIntoResult(){return this.getPropertyValue("includeIntoResult")}set includeIntoResult(e){this.setPropertyValue("includeIntoResult",e)}get expression(){return this.getPropertyValue("expression")||""}set expression(e){this.setPropertyValue("expression",e),this.rerunExpression()}locCalculation(){this.expressionIsRunning=!0}unlocCalculation(){this.expressionIsRunning=!1}resetCalculation(){this.isCalculated=!1}doCalculation(e,t){this.isCalculated||(this.runExpressionCore(e,t),this.isCalculated=!0)}runExpression(e){this.runExpressionCore(null,e)}get value(){if(this.data)return this.data.getVariable(this.name)}setValue(e){this.data&&this.data.setVariable(this.name,e)}get canRunExpression(){return!(!this.data||this.isLoadingFromJson||!this.expression||this.expressionIsRunning||!this.name)}rerunExpression(){this.canRunExpression&&this.runExpression(this.data.getFilteredProperties())}runExpressionCore(e,t){this.canRunExpression&&this.ensureExpression()&&(this.locCalculation(),e&&this.runDependentExpressions(e,t),this.expressionRunner.runContext(this.getValueGetterContext(),this.getPropertiesCopy(t,"expression")))}runDependentExpressions(e,t){var s=this.expressionRunner.getVariables();if(s)for(var n=0;n<e.length;n++){var i=e[n];i===this||s.indexOf(i.name)<0||i.doCalculation(e,t)}}ensureExpression(){const e=this.getExpressionFromSurvey("expression");return!!e&&(this.expressionRunner?this.expressionRunner.expression=e:(this.expressionRunner=this.createExpressionRunner(e),this.expressionRunner.onRunComplete=e=>{a.isTwoValueEquals(e,this.value,!1,!0,!1)||this.setValue(e),this.unlocCalculation()}),!0)}}I.addClass("calculatedvalue",[{name:"!name",isUnique:!0},"expression:expression","includeIntoResult:boolean"],function(){return new rs},"base");class as extends he{constructor(e=null){super(),this.expression=e}getType(){return"expressionitem"}runCondition(e){let t=!1;return this.runExpressionByProperty("expression",e,e=>{t=!0===e}),t}get expression(){return this.getPropertyValue("expression","")}set expression(e){this.setPropertyValue("expression",e)}get locHtml(){return this.getLocalizableString("html")}getLocale(){return this.locOwner?this.locOwner.getLocale():""}getMarkdownHtml(e,t,s){return this.locOwner?this.locOwner.getMarkdownHtml(e,t,s):void 0}getRenderer(e){return this.locOwner?this.locOwner.getRenderer(e):null}getRendererContext(e){return this.locOwner?this.locOwner.getRendererContext(e):e}getProcessedText(e){return this.locOwner?this.locOwner.getProcessedText(e):e}getSurvey(e=!1){return this.locOwner}}class os extends as{constructor(e=null,t=null){super(e),this.createLocalizableString("html",this),this.html=t}getType(){return"htmlconditionitem"}get html(){return this.getLocalizableStringText("html")}set html(e){this.setLocalizableStringText("html",e)}get locHtml(){return this.getLocalizableString("html")}}class ls extends as{constructor(e=null,t=null){super(e),this.createLocalizableString("url",this),this.url=t}getType(){return"urlconditionitem"}get url(){return this.getLocalizableStringText("url")}set url(e){this.setLocalizableStringText("url",e)}get locUrl(){return this.getLocalizableString("url")}}I.addClass("expressionitem",["expression:condition"],function(){return new as},"base"),I.addClass("htmlconditionitem",[{name:"html:html",serializationProperty:"locHtml"}],function(){return new os},"expressionitem"),I.addClass("urlconditionitem",[{name:"url:string",serializationProperty:"locUrl"}],function(){return new ls},"expressionitem");class us{constructor(){this.parser=new DOMParser}assignValue(e,t,s){Array.isArray(e[t])?e[t].push(s):void 0!==e[t]?e[t]=[e[t]].concat(s):"object"==typeof s&&1===Object.keys(s).length&&Object.keys(s)[0]===t?e[t]=s[t]:e[t]=s}xml2Json(e,t){if(e.children&&e.children.length>0)for(let s=0;s<e.children.length;s++){let n=e.children[s],i={};this.xml2Json(n,i),this.assignValue(t,n.nodeName,i)}else this.assignValue(t,e.nodeName,e.textContent)}parseXmlString(e){let t=this.parser.parseFromString(e,"text/xml"),s={};return this.xml2Json(t,s),s}}class ds extends he{static get EncodeParameters(){return xt.web.encodeUrlParams}static set EncodeParameters(e){xt.web.encodeUrlParams=e}static clearCache(){ds.itemsResult={},ds.sendingSameRequests={}}static addSameRequest(e){if(!e.isUsingCache)return!1;var t=e.objHash,s=ds.sendingSameRequests[t];return s?(s.push(e),e.isRunningValue=!0,!0):(ds.sendingSameRequests[e.objHash]=[],!1)}static unregisterSameRequests(e,t){if(e.isUsingCache){var s=ds.sendingSameRequests[e.objHash];if(delete ds.sendingSameRequests[e.objHash],s)for(var n=0;n<s.length;n++)s[n].isRunningValue=!1,s[n].getResultCallback&&s[n].getResultCallback(t)}}static get onBeforeSendRequest(){return xt.web.onBeforeRequestChoices}static set onBeforeSendRequest(e){xt.web.onBeforeRequestChoices=e}static getCachedItemsResult(e){var t=e.objHash,s=ds.itemsResult[t];return!!s&&(e.getResultCallback&&e.getResultCallback(s),!0)}constructor(){super(),this.lastObjHash="",this.isRunningValue=!1,this.processedUrl="",this.processedPath="",this.isUsingCacheFromUrl=void 0,this.error=null,this.createItemValue=e=>new is(e),this.registerPropertyChangedHandlers(["url"],()=>{this.owner&&this.owner.setPropertyValue("isUsingRestful",!!this.url)})}getSurvey(e=!1){return this.owner?this.owner.survey:null}run(e=null){if(this.url&&this.getResultCallback){if(this.processedText(e),!this.processedUrl)return this.doEmptyResultCallback({}),void(this.lastObjHash=this.objHash);this.lastObjHash!==this.objHash&&(this.lastObjHash=this.objHash,this.error=null,this.useChangedItemsResults()||ds.addSameRequest(this)||this.sendRequest())}}get isUsingCache(){return!0===this.isUsingCacheFromUrl||!1!==this.isUsingCacheFromUrl&&xt.web.cacheLoadedChoices}get isRunning(){return this.getIsRunning()}getIsRunning(){return this.isRunningValue}get isWaitingForParameters(){return this.url&&!this.processedUrl}useChangedItemsResults(){return ds.getCachedItemsResult(this)}doEmptyResultCallback(e){var t=[];this.updateResultCallback&&(t=this.updateResultCallback(t,e)),this.getResultCallback(t)}processedText(e){var t=this.url;if(t&&(t=t.replace(ds.cacheText,"").replace(ds.noCacheText,"")),e){var s=e.processTextEx({text:t,runAtDesign:!0}),n=e.processTextEx({text:this.path,runAtDesign:!0});s.hasAllValuesOnLastRun&&n.hasAllValuesOnLastRun?(this.processedUrl=s.text,this.processedPath=n.text):(this.processedUrl="",this.processedPath="")}else this.processedUrl=t,this.processedPath=this.path;this.onProcessedUrlCallback&&this.onProcessedUrlCallback(this.processedUrl,this.processedPath)}parseResponse(e){let t;if(e&&"function"==typeof e.indexOf&&0===e.indexOf("<"))t=(new us).parseXmlString(e);else try{t=JSON.parse(e)}catch(s){t=(e||"").split("\n").map(e=>e.trim(" ")).filter(e=>!!e)}return t}sendRequest(){"undefined"!=typeof XMLHttpRequest?this.sendXmlHttpRequest():"undefined"!=typeof fetch?this.sendFetchRequest():(this.error=new Tt("The browser does not support XMLHttpRequest or fetch API","",this.owner),this.doEmptyResultCallback(""))}sendXmlHttpRequest(){var e=new XMLHttpRequest;e.open("GET",this.processedUrl),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t=this,s=this.objHash;e.onload=function(){t.beforeLoadRequest(),200===e.status?t.onLoad(t.parseResponse(e.response),s):t.onError(e.statusText,e.responseText)};var n={url:this.processedUrl,request:e};xt.web.onBeforeRequestChoices&&xt.web.onBeforeRequestChoices(this,n),this.beforeSendRequest(),n.request.send()}sendFetchRequest(){const e=this,t=this.objHash,s={url:this.processedUrl,fetchOptions:{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}}};xt.web.onBeforeRequestChoices&&xt.web.onBeforeRequestChoices(this,s),this.beforeSendRequest(),fetch(s.url,s.fetchOptions).then(s=>(e.beforeLoadRequest(),200===s.status?s.text().then(s=>{e.onLoad(e.parseResponse(s),t)}):s.text().then(t=>{e.onError(s.statusText,t)}))).catch(t=>{e.onError(t.message,"")})}getType(){return"choicesByUrl"}get isEmpty(){return!this.url&&!this.path}getCustomPropertiesNames(){for(var e=this.getCustomProperties(),t=new Array,s=0;s<e.length;s++)t.push(this.getCustomPropertyName(e[s].name));return t}getCustomPropertyName(e){return e+"Name"}getCustomProperties(){for(var e=I.getProperties(this.itemValueType),t=[],s=0;s<e.length;s++)"value"!==e[s].name&&"text"!==e[s].name&&"visibleIf"!==e[s].name&&"enableIf"!==e[s].name&&t.push(e[s]);return t}getAllPropertiesNames(){const e=new Array;return I.getPropertiesByObj(this).forEach(t=>e.push(t.name)),this.getCustomPropertiesNames().forEach(t=>e.push(t)),e}setData(e){e||(e={}),this.getAllPropertiesNames().forEach(t=>{this[t]=e[t]}),e.attachOriginalItems&&(this.attachData=e.attachOriginalItems)}getData(){const e={};let t=!1;return this.getAllPropertiesNames().forEach(s=>{const n=this[s];this.isValueEmpty(n)||n===this.getDefaultPropertyValue(s)||(e[s]=n,t=!0)}),t?e:null}get url(){return this.getPropertyValue("url")||""}set url(e){this.setPropertyValue("url",e),this.isUsingCacheFromUrl=void 0,e&&(e.indexOf(ds.cacheText)>-1?this.isUsingCacheFromUrl=!0:e.indexOf(ds.noCacheText)>-1&&(this.isUsingCacheFromUrl=!1))}get path(){return this.getPropertyValue("path")||""}set path(e){this.setPropertyValue("path",e)}get valueName(){return this.getPropertyValue("valueName")||""}set valueName(e){this.setPropertyValue("valueName",e)}get titleName(){return this.getPropertyValue("titleName")||""}set titleName(e){this.setPropertyValue("titleName",e)}get imageLinkName(){return this.getPropertyValue("imageLinkName")||""}set imageLinkName(e){this.setPropertyValue("imageLinkName",e)}get allowEmptyResponse(){return this.getPropertyValue("allowEmptyResponse")}set allowEmptyResponse(e){this.setPropertyValue("allowEmptyResponse",e)}get attachOriginalItems(){return this.attachData}set attachOriginalItems(e){this.attachData=e}get attachData(){return this.getPropertyValue("attachData")}set attachData(e){this.setPropertyValue("attachData",e)}get itemValueType(){if(!this.owner)return"itemvalue";var e=I.findProperty(this.owner.getType(),"choices");return e?"itemvalue[]"==e.type?"itemvalue":e.type:"itemvalue"}clear(){this.setData(void 0)}beforeSendRequest(){this.isRunningValue=!0,this.beforeSendRequestCallback&&this.beforeSendRequestCallback()}beforeLoadRequest(){this.isRunningValue=!1}onLoad(e,t=null){t||(t=this.objHash);var s=new Array,n=this.getResultAfterPath(e);if(n&&n.length)for(var i=0;i<n.length;i++){var r=n[i];if(r){var a=this.getItemValueCallback?this.getItemValueCallback(r):this.getValue(r),o=this.createItemValue(a);this.setTitle(o,r),this.setCustomProperties(o,r),this.attachData&&(o.originalItem=r,o.data=r);var l=this.getImageLink(r);l&&(o.imageLink=l),s.push(o)}}else this.allowEmptyResponse||(this.error=new Et(null,this.owner));this.updateResultCallback&&(s=this.updateResultCallback(s,e)),this.isUsingCache&&(ds.itemsResult[t]=s),this.callResultCallback(s,t),ds.unregisterSameRequests(this,s)}callResultCallback(e,t){t==this.objHash&&this.getResultCallback(e)}setCustomProperties(e,t){for(var s=this.getCustomProperties(),n=0;n<s.length;n++){var i=s[n],r=this.getValueCore(t,this.getPropertyBinding(i.name));this.isValueEmpty(r)||(e[i.name]=r)}}getPropertyBinding(e){return this[this.getCustomPropertyName(e)]?this[this.getCustomPropertyName(e)]:this[e]?this[e]:e}onError(e,t){this.error=new Tt(e,t,this.owner),this.doEmptyResultCallback(t),ds.unregisterSameRequests(this,[])}getResultAfterPath(e){if(!e)return e;if(!this.processedPath)return e;for(var t=this.getPathes(),s=0;s<t.length;s++)if(!(e=e[t[s]]))return null;return e}getPathes(){var e=[];return 0==(e=this.processedPath.indexOf(";")>-1?this.path.split(";"):this.processedPath.indexOf(",")>-1?this.processedPath.split(","):this.processedPath.split(".")).length&&e.push(this.processedPath),e}getValue(e){return e?this.valueName?this.getValueCore(e,this.valueName):e instanceof Object?Object.keys(e).length<1?null:e[Object.keys(e)[0]]:e:null}setTitle(e,t){var s=this.titleName?this.titleName:"title",n=this.getValueCore(t,s);n&&("string"==typeof n?e.text=n:e.locText.setJson(n))}getImageLink(e){var t=this.imageLinkName?this.imageLinkName:"imageLink";return this.getValueCore(e,t)}getValueCore(e,t){if(!e)return null;if(t.indexOf(".")<0)return e[t];for(var s=t.split("."),n=0;n<s.length;n++)if(!(e=e[s[n]]))return null;return e}get objHash(){return this.processedUrl+";"+this.processedPath+";"+this.valueName+";"+this.titleName+";"+this.imageLinkName}}ds.cacheText="{CACHE}",ds.noCacheText="{NOCACHE}",ds.itemsResult={},ds.sendingSameRequests={},I.addClass("choicesByUrl",["url","path","valueName","titleName",{name:"imageLinkName",visibleIf:function(e){return!!e&&!!e.owner&&"imagepicker"==e.owner.getType()}},{name:"allowEmptyResponse:boolean"},{name:"attachData:boolean",alternativeName:"attachOriginalItems",visible:!1}],function(){return new ds});class hs extends ts{createColumnValues(){return this.createItemValues("columns")}constructor(e){super(e),this.generatedVisibleRows=null,this.generatedTotalRow=null,this.columns=this.createColumnValues(),this.rows=this.createItemValues("rows")}getType(){return"matrixbase"}endLoadingFromJson(){super.endLoadingFromJson(),this.updateVisibilityBasedOnRows()}get isCompositeQuestion(){return!0}get showHeader(){return this.getPropertyValue("showHeader")}set showHeader(e){this.setPropertyValue("showHeader",e)}get columns(){return this.getPropertyValue("columns")}set columns(e){this.setPropertyValue("columns",e)}get visibleColumns(){const e=[];return this.columns.forEach(t=>{this.isColumnVisible(t)&&e.push(t)}),e}isColumnVisible(e){return e.isVisible}get rows(){return this.getPropertyValue("rows")}set rows(e){var t=this.processRowsOnSet(e);this.setPropertyValue("rows",t)}processRowsOnSet(e){return e}getVisibleRows(){return[]}get visibleRows(){return this.getVisibleRows()}get rowsVisibleIf(){return this.getPropertyValue("rowsVisibleIf","")}set rowsVisibleIf(e){this.setPropertyValue("rowsVisibleIf",e),this.isLoadingFromJsonValue||this.runCondition(this.getDataFilteredProperties())}get columnsVisibleIf(){return this.getPropertyValue("columnsVisibleIf","")}set columnsVisibleIf(e){this.setPropertyValue("columnsVisibleIf",e),this.isLoadingFromJson||this.runCondition(this.getDataFilteredProperties())}runConditionCore(e){super.runConditionCore(e),this.runItemsCondition(e)}onColumnsChanged(){}onRowsChanged(){this.updateVisibilityBasedOnRows(),this.fireCallback(this.visibleRowsChangedCallback)}updateVisibilityBasedOnRows(){this.hideIfRowsEmpty&&this.onVisibleChanged()}isVisibleCore(){var e;const t=super.isVisibleCore();return t&&this.hideIfRowsEmpty?(null===(e=this.visibleRows)||void 0===e?void 0:e.length)>0:t}shouldRunColumnExpression(){return!this.survey||!this.survey.areInvisibleElementsShowing}hasRowsAsItems(){return!0}runItemsCondition(e){let t=this.hasRowsAsItems()&&this.runConditionsForRows(e);const s=this.runConditionsForColumns(e);t=s||t,t&&(this.isClearValueOnHidden&&s&&this.clearInvisibleColumnValues(),this.clearGeneratedRows(),s&&this.onColumnsChanged(),this.onRowsChanged())}clearGeneratedRows(){this.generatedVisibleRows=null}createRowsVisibleIfRunner(){return null}runConditionsForRows(e){const t=!!this.survey&&this.survey.areInvisibleElementsShowing,s=t?null:this.createRowsVisibleIfRunner(),n=is.runConditionsForItems(this.rows,void 0,s,e,!t);return is.runEnabledConditionsForItems(this.rows,void 0,e),n}runConditionsForColumns(e){const t=!!this.survey&&!this.survey.areInvisibleElementsShowing,s=this.getExpressionFromSurvey("columnsVisibleIf"),n=t&&s?new ae(s):null;return is.runConditionsForItems(this.columns,void 0,n,e,this.shouldRunColumnExpression())}clearInvisibleColumnValues(){}clearInvisibleValuesInRows(){}needResponsiveWidth(){return!0}get columnsAutoWidth(){return!this.isMobile&&!this.columns.some(e=>!!e.width)}getTableCss(){var e;return(new fe).append(this.cssClasses.root).append(this.cssClasses.columnsAutoWidth,this.columnsAutoWidth).append(this.cssClasses.noHeader,!this.showHeader).append(this.cssClasses.hasFooter,!!(null===(e=this.renderedTable)||void 0===e?void 0:e.showAddRowOnBottom)).append(this.cssClasses.rootAlternateRows,this.alternateRows).append(this.cssClasses.rootVerticalAlignTop,"top"===this.verticalAlign).append(this.cssClasses.rootVerticalAlignMiddle,"middle"===this.verticalAlign).toString()}get columnMinWidth(){return this.getPropertyValue("columnMinWidth")||""}set columnMinWidth(e){this.setPropertyValue("columnMinWidth",e)}get rowTitleWidth(){return this.getPropertyValue("rowTitleWidth")||""}set rowTitleWidth(e){this.setPropertyValue("rowTitleWidth",e)}set displayMode(e){this.setPropertyValue("displayMode",e)}get displayMode(){return this.getPropertyValue("displayMode")}getCellAriaLabel(e,t,s){let n=e.locText&&e.locText.renderedHtml?e.locText.renderedHtml:"";s&&(n=s);const i=t.locTitle&&t.locTitle.renderedHtml?t.locTitle.renderedHtml:"";return`${(this.getLocalizationString("matrix_row")||"row").toLocaleLowerCase()} ${n}, ${(this.getLocalizationString("matrix_column")||"column").toLocaleLowerCase()} ${i}`}get isNewA11yStructure(){return!0}getIsMobile(){return"auto"==this.displayMode?super.getIsMobile():"list"===this.displayMode}}me([d()],hs.prototype,"verticalAlign",void 0),me([d()],hs.prototype,"alternateRows",void 0),I.addClass("matrixbase",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},"columnsVisibleIf:condition","rowsVisibleIf:condition","columnMinWidth",{name:"showHeader:boolean",default:!0},{name:"verticalAlign",choices:["top","middle"],default:"middle"},{name:"alternateRows:boolean",default:!1},{name:"displayMode",default:"auto",choices:["auto","table","list"],visible:!1}],void 0,"question");class cs{}class ps{constructor(e,t){this.name=e,this.returnDisplayValue=t,this.isExists=!1}}class gs{constructor(){this._unObservableValues=[void 0]}get hasAllValuesOnLastRunValue(){return this._unObservableValues[0]}set hasAllValuesOnLastRunValue(e){this._unObservableValues[0]=e}process(e,t,s,n){if(this.hasAllValuesOnLastRunValue=!0,!e)return e;if(!this.onProcess)return e;const i=this.getItems(e);for(let o=i.length-1;o>=0;o--){const l=i[o],u=this.getName(e.substring(l.start+1,l.end));if(u){const i=new ps(u,!0===t);if(this.onProcess(i),i.isExists||(this.hasAllValuesOnLastRunValue=!1),i.isExists||n){a.isValueEmpty(i.value)&&(this.hasAllValuesOnLastRunValue=!1);var r=a.isValueEmpty(i.value)?"":i.value;s&&(r=encodeURIComponent(r)),e=e.substring(0,l.start)+r+e.substring(l.end+1)}}}return e}processValue(e,t){var s=new ps(e,t);return this.onProcess&&this.onProcess(s),s}get hasAllValuesOnLastRun(){return!!this.hasAllValuesOnLastRunValue}processText(e,t){return this.process(e,t)}processTextEx(e){const t={hasAllValuesOnLastRun:!0,text:e.text};return t.text=this.process(e.text,e.returnDisplayValue,e.doEncoding,e.replaceUndefinedValues),t.hasAllValuesOnLastRun=this.hasAllValuesOnLastRun,t}getItems(e){for(var t=[],s=e.length,n=-1,i="",r=0;r<s;r++)if("{"==(i=e[r])&&(n=r),"}"==i){if(n>-1){var a=new cs;a.start=n,a.end=r,this.isValidItemName(e.substring(n+1,r))&&t.push(a)}n=-1}return t}isValidItemName(e){return!!e&&e.indexOf(":")<0}getName(e){if(e)return e.trim()}}class ms{constructor(e){this.obj=e,this.textPreProcessor=new gs,this.textPreProcessor.onProcess=e=>{this.getProcessedTextValue(e)}}processText(e,t){const s={text:e,returnDisplayValue:t};return this.processTextEx(s).text}processTextEx(e){var t;return!e.runAtDesign&&(null===(t=this.survey)||void 0===t?void 0:t.isDesignMode)?{hasAllValuesOnLastRun:!0,text:e.text}:this.textPreProcessor.processTextEx(e)}get survey(){const e=this.obj;return e.getSurvey?e.getSurvey():null}getProcessedTextValue(e){const t=e.name.toLocaleLowerCase(),s=(new S).getValueInfo({name:t,context:this.obj.getValueGetterContext(),isText:!0,isDisplayValue:e.returnDisplayValue});s.isFound&&(e.isExists=s.isFound,e.value=s.value)}}class vs{constructor(e,t){this.name=e,this.json=t;var s=this;I.addClass(e,[],function(e){return fs.Instance.createQuestion(e?e.name:"",s)},"question"),this.onInit()}onInit(){this.json.onInit&&this.json.onInit()}onCreated(e){this.json.onCreated&&this.json.onCreated(e)}onLoaded(e){this.json.onLoaded&&this.json.onLoaded(e)}onAfterRender(e,t){this.json.onAfterRender&&this.json.onAfterRender(e,t)}onAfterRenderContentElement(e,t,s){this.json.onAfterRenderContentElement&&this.json.onAfterRenderContentElement(e,t,s)}onUpdateQuestionCssClasses(e,t,s){this.json.onUpdateQuestionCssClasses&&this.json.onUpdateQuestionCssClasses(e,t,s)}onSetQuestionValue(e,t){this.json.onSetQuestionValue&&this.json.onSetQuestionValue(e,t),this.json.onValueSet&&this.json.onValueSet(e,t)}onPropertyChanged(e,t,s){this.json.onPropertyChanged&&this.json.onPropertyChanged(e,t,s)}onValueChanged(e,t,s){this.json.onValueChanged&&this.json.onValueChanged(e,t,s)}onValueChanging(e,t,s){return this.json.onValueChanging?this.json.onValueChanging(e,t,s):s}onGetErrorText(e){if(this.json.getErrorText)return this.json.getErrorText(e)}onItemValuePropertyChanged(e,t,s,n,i){this.json.onItemValuePropertyChanged&&this.json.onItemValuePropertyChanged(e,{obj:t,propertyName:s,name:n,newValue:i})}getDisplayValue(e,t,s){return this.json.getDisplayValue?this.json.getDisplayValue(s):s.getDisplayValue(e,t)}get defaultQuestionTitle(){return this.json.defaultQuestionTitle}setValueToQuestion(e){const t=this.json.valueToQuestion||this.json.setValue;return t?t(e):e}getValueFromQuestion(e){const t=this.json.valueFromQuestion||this.json.getValue;return t?t(e):e}get isComposite(){return!!this.json.elementsJSON||!!this.json.createElements}getDynamicProperties(){return Array.isArray(this.dynamicProperties)||(this.dynamicProperties=this.calcDynamicProperties()),this.dynamicProperties}calcDynamicProperties(){const e=this.json.inheritBaseProps;if(!e||!this.json.questionJSON)return[];const t=this.json.questionJSON.type;if(!t)return[];if(Array.isArray(e)){const s=[];return e.forEach(e=>{const n=I.findProperty(t,e);n&&s.push(n)}),s}const s=[];for(let e in this.json.questionJSON)s.push(e);return I.getDynamicPropertiesByTypes(this.name,t,s)}}class fs{constructor(){this.customQuestionValues=[]}add(e){if(!e)return;let t=e.name;if(!t)throw"Attribute name is missed";if(t=t.toLowerCase(),this.getCustomQuestionByName(t))throw"There is already registered custom question with name '"+t+"'";if(I.findClass(t))throw"There is already class with name '"+t+"'";var s=new vs(t,e);this.onAddingJson&&this.onAddingJson(t,s.isComposite),this.customQuestionValues.push(s)}remove(e){if(!e)return!1;const t=this.getCustomQuestionIndex(e.toLowerCase());return!(t<0||(this.removeByIndex(t),0))}get items(){return this.customQuestionValues}getCustomQuestionByName(e){const t=this.getCustomQuestionIndex(e);return t>=0?this.customQuestionValues[t]:void 0}getCustomQuestionIndex(e){for(var t=0;t<this.customQuestionValues.length;t++)if(this.customQuestionValues[t].name===e)return t;return-1}removeByIndex(e){I.removeClass(this.customQuestionValues[e].name),this.customQuestionValues.splice(e,1)}clear(e){for(let t=this.customQuestionValues.length-1;t>=0;t--)!e&&this.customQuestionValues[t].json.internal||this.removeByIndex(t)}createQuestion(e,t){return t.isComposite?this.createCompositeModel(e,t):this.createCustomModel(e,t)}createCompositeModel(e,t){return this.onCreateComposite?this.onCreateComposite(e,t):new ws(e,t)}createCustomModel(e,t){return this.onCreateCustom?this.onCreateCustom(e,t):new ys(e,t)}}fs.Instance=new fs;class bs extends ts{constructor(e,t){super(e),this.customQuestion=t,g.createProperties(this),We.CreateDisabledDesignElements=!0,this.locQuestionTitle=this.createLocalizableString("questionTitle",this),this.locQuestionTitle.setJson(this.customQuestion.defaultQuestionTitle),this.createWrapper(),We.CreateDisabledDesignElements=!1,this.customQuestion&&this.customQuestion.onCreated(this)}getType(){return this.customQuestion?this.customQuestion.name:"custom"}locStrsChanged(){super.locStrsChanged(),this.getElement()&&this.getElement().locStrsChanged()}localeChanged(){super.locStrsChanged(),this.getElement()&&this.getElement().localeChanged()}getDefaultTitle(){return this.locQuestionTitle.isEmpty?super.getDefaultTitle():this.getProcessedText(this.locQuestionTitle.textOrHtml)}addUsedLocales(e){super.addUsedLocales(e),this.getElement()&&this.getElement().addUsedLocales(e)}needResponsiveWidth(){const e=this.getElement();return!!e&&e.needResponsiveWidth()}createWrapper(){}onPropertyValueChanged(e,t,s){super.onPropertyValueChanged(e,t,s),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onPropertyChanged(this,e,s)}itemValuePropertyChanged(e,t,s,n){super.itemValuePropertyChanged(e,t,s,n),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onItemValuePropertyChanged(this,e,e.ownerPropertyName,t,n)}onFirstRenderingCore(){super.onFirstRenderingCore();const e=this.getElement();e&&e.onFirstRendering()}onHidingContent(){super.onHidingContent();const e=this.getElement();e&&e.onHidingContent()}getProgressInfo(){let e=super.getProgressInfo();return this.getElement()&&(e=this.getElement().getProgressInfo()),this.isRequired&&0==e.requiredQuestionCount&&(e.requiredQuestionCount=1,this.isEmpty()||(e.answeredQuestionCount=1)),e}initElement(e){e&&(e.setSurveyImpl(this),e.disableDesignActions=!0)}setSurveyImpl(e,t){this.isSettingValOnLoading=!0,super.setSurveyImpl(e,t),this.initElement(this.getElement()),this.isSettingValOnLoading=!1}onCustomQuestionLoaded(){!this.isLoadedCalled&&this.customQuestion&&this.survey&&(this.customQuestion.onLoaded(this),this.isLoadedCalled=!0)}onSurveyLoad(){super.onSurveyLoad(),this.isLoadedCalled=!1,this.getElement()&&this.getElement().onSurveyLoad(),this.onCustomQuestionLoaded()}setSurveyCore(e){super.setSurveyCore(e),!1===this.isLoadedCalled&&e&&this.onCustomQuestionLoaded()}afterRenderQuestionElement(e){}afterRenderCore(e){super.afterRenderCore(e),this.customQuestion&&this.customQuestion.onAfterRender(this,e)}onUpdateQuestionCssClasses(e,t){this.customQuestion&&this.customQuestion.onUpdateQuestionCssClasses(this,e,t)}setQuestionValue(e,t=!0){super.setQuestionValue(e,t),this.updateElementCss(),this.customQuestion&&this.customQuestion.onSetQuestionValue(this,e)}setNewValue(e){super.setNewValue(e),this.updateElementCss()}onCheckForErrors(e,t,s){if(super.onCheckForErrors(e,t,s),this.customQuestion){const t=this.customQuestion.onGetErrorText(this);t&&e.push(new Ot(t,this))}}getSurveyData(){return this}getTextProcessor(){return this.textProcessor}getValue(e){return this.value}setValue(e,t,s,n){if(!this.data)return;this.customQuestion&&this.customQuestion.onValueChanged(this,e,t);var i=this.convertDataName(e);let r=this.convertDataValue(e,t);this.valueToDataCallback&&(r=this.valueToDataCallback(r)),this.data.setValue(i,r,s,n),this.updateIsAnswered(),this.updateElementCss()}getQuestionByName(e){}isValueChanging(e,t){if(this.customQuestion){const s=t;if(t=this.customQuestion.onValueChanging(this,e,t),!a.isTwoValueEquals(t,s)){const s=this.getQuestionByName(e);if(s)return s.value=t,!0}}return!1}convertDataName(e){return this.getValueName()}convertDataValue(e,t){return t}getVariable(e){return this.data?this.data.getVariable(e):null}setVariable(e,t){this.data&&this.data.setVariable(e,t)}getComment(e){return this.data?this.data.getComment(this.getValueName()):""}setComment(e,t,s){this.data&&this.data.setComment(this.getValueName(),t,s)}getAllValues(){return this.data?this.data.getAllValues():{}}getFilteredProperties(){return this.data?this.data.getFilteredProperties():{}}findQuestionByName(e){return this.data?this.data.findQuestionByName(e):null}getEditingSurveyElement(){}addElement(e,t){}removeElement(e){return!1}getQuestionTitleLocation(){return"left"}getQuestionTitleWidth(){}getColumsForElement(e){return[]}updateColumns(){}getQuestionStartIndex(){return this.getStartIndex()}getChildrenLayoutType(){return"row"}elementWidthChanged(e){}get elements(){return[]}indexOf(e){return-1}ensureRowsVisibility(){}validateContainerOnly(){}onQuestionValueChanged(e){}getQuestionErrorLocation(){return this.getErrorLocation()}getContentAriaHidden(){return this.isDesignMode||super.getContentAriaHidden()}getContentDisplayValueCore(e,t,s){return s?this.customQuestion.getDisplayValue(e,t,s):super.getDisplayValueCore(e,t)}}class ys extends bs{getTemplate(){return"custom"}getDynamicProperties(){return this.customQuestion.getDynamicProperties()||[]}getDynamicType(){return this.questionWrapper?this.questionWrapper.getType():"question"}getOriginalObj(){return this.questionWrapper}createWrapper(){this.questionWrapper=this.createQuestion(),this.createDynamicProperties(this.questionWrapper),this.getDynamicProperties().length>0&&(this.questionWrapper.onPropertyValueChangedCallback=(e,t,s,n,i)=>{this.getDynamicProperty(e)&&this.propertyValueChanged(e,t,s,i)})}getDynamicProperty(e){const t=this.getDynamicProperties();for(let s=0;s<t.length;s++)if(t[s].name===e)return t[s];return null}getElement(){return this.contentQuestion}supportAutoAdvance(){return!!this.contentQuestion&&this.contentQuestion.supportAutoAdvance()}onAnyValueChanged(e,t){super.onAnyValueChanged(e,t),this.contentQuestion&&this.contentQuestion.onAnyValueChanged(e,t)}getQuestionByName(e){return this.contentQuestion}getDefaultTitle(){return this.hasJSONTitle&&this.contentQuestion?this.getProcessedText(this.contentQuestion.title):super.getDefaultTitle()}setValue(e,t,s,n){this.isValueChanging(e,t)||super.setValue(e,t,s,n)}updateCommentFromSurvey(e){super.updateCommentFromSurvey(e);const t=this.contentQuestion;t&&t.updateCommentFromSurvey(e)}get requireUpdateCommentValue(){var e;return null===(e=this.contentQuestion)||void 0===e?void 0:e.requireUpdateCommentValue}onSetData(){super.onSetData(),this.survey&&!this.isEmpty()&&this.setValue(this.name,this.value,!1,this.allowNotifyValueChanged)}validateElementCore(e){if(!this.contentQuestion)return!0;var t=this.contentQuestion.validateElement(e);this.errors=[];for(var s=0;s<this.contentQuestion.errors.length;s++)this.errors.push(this.contentQuestion.errors[s]);return t=t&&super.validateElementCore(e),this.updateElementCss(),t}focus(e=!1){this.contentQuestion?this.contentQuestion.focus(e):super.focus(e)}afterRenderCore(e){super.afterRenderCore(e),this.contentQuestion&&this.contentQuestion.afterRender(e)}get contentQuestion(){return this.questionWrapper}createQuestion(){var e=this.customQuestion.json,t=null;if(e.questionJSON){this.hasJSONTitle=!!e.questionJSON.title;let s=e.questionJSON.type;if(!s||!I.findClass(s))throw"type attribute in questionJSON is empty or incorrect";(t=I.createClass(s)).fromJSON(e.questionJSON),t=this.checkCreatedQuestion(t)}else e.createQuestion&&(t=this.checkCreatedQuestion(e.createQuestion()));return this.initElement(t),t&&(t.isContentElement=!0,t.name||(t.name="question"),t.onUpdateCssClassesCallback=e=>{this.onUpdateQuestionCssClasses(t,e)},t.hasCssErrorCallback=()=>this.errors.length>0,t.setValueChangedDirectlyCallback=e=>{this.setValueChangedDirectly(e)}),t}checkCreatedQuestion(e){return e?(e.isQuestion||(e=Array.isArray(e.questions)&&e.questions.length>0?e.questions[0]:I.createClass("text"),k.error("Could not create component: '"+this.getType()+"'. questionJSON should be a question.")),e):e}onSurveyLoad(){super.onSurveyLoad(),this.contentQuestion&&this.isEmpty()&&!this.contentQuestion.isEmpty()&&(this.value=this.getContentQuestionValue())}runConditionCore(e){super.runConditionCore(e),this.contentQuestion&&this.contentQuestion.runCondition(e)}convertDataName(e){const t=this.contentQuestion;if(!t||e===this.getValueName())return super.convertDataName(e);var s=e.replace(t.getValueName(),this.getValueName());return 0==s.indexOf(this.getValueName())?s:super.convertDataName(e)}convertDataValue(e,t){return this.convertDataName(e)==super.convertDataName(e)?this.getContentQuestionValue():t}getContentQuestionValue(){if(!this.contentQuestion)return;let e=this.contentQuestion.value;return this.customQuestion&&(e=this.customQuestion.getValueFromQuestion(e)),e}setContentQuestionValue(e){this.contentQuestion&&(this.customQuestion&&(e=this.customQuestion.setValueToQuestion(e)),this.contentQuestion.value=e)}canSetValueToSurvey(){return!1}setQuestionValue(e,t=!0){super.setQuestionValue(e,t),this.isLoadingFromJson||!this.contentQuestion||this.isTwoValueEquals(this.getContentQuestionValue(),e)||this.setContentQuestionValue(this.getUnbindValue(e))}onSurveyValueChanged(e){super.onSurveyValueChanged(e),this.contentQuestion&&this.contentQuestion.onSurveyValueChanged(e)}getValueCore(){return this.contentQuestion?this.getContentQuestionValue():super.getValueCore()}setValueChangedDirectly(e){this.isSettingValueChanged||(this.isSettingValueChanged=!0,super.setValueChangedDirectly(e),this.contentQuestion&&this.contentQuestion.setValueChangedDirectly(e),this.isSettingValueChanged=!1)}createDynamicProperties(e){if(!e)return;const t=this.getDynamicProperties();Array.isArray(t)&&I.addDynamicPropertiesIntoObj(this,e,t)}initElement(e){super.initElement(e),e&&(e.parent=this,e.afterRenderQuestionCallback=(e,t)=>{this.customQuestion&&this.customQuestion.onAfterRenderContentElement(this,e,t)})}updateElementCss(e){this.contentQuestion&&this.questionWrapper.updateElementCss(e),super.updateElementCss(e)}setIsMobile(e){super.setIsMobile(e),this.contentQuestion&&this.contentQuestion.setIsMobile(e)}updateElementCssCore(e){this.contentQuestion&&(e=this.contentQuestion.cssClasses),super.updateElementCssCore(e)}getDisplayValueCore(e,t){return super.getContentDisplayValueCore(e,t,this.contentQuestion)}}class Cs extends Yt{constructor(e){super(e),this.question=e}getValue(e,t,s,n){const i=this.question;return e.length>0&&(e.length>1||!t)?(e[0].name===xt.expressionVariables.composite&&e.shift(),new Xt(i.contentPanel.questions).getValue(e,!1,s,n)):{isFound:!1}}}class ws extends bs{constructor(e,t){super(e,t),this.customQuestion=t,this.settingNewValue=!1,this.textProcessing=new ms(this)}createWrapper(){this.panelWrapper=this.createPanel()}getTemplate(){return"composite"}getElement(){return this.contentPanel}getCssRoot(e){return(new fe).append(super.getCssRoot(e)).append(e.composite).toString()}get contentPanel(){return this.panelWrapper}validateElementCore(e){const t=super.validateElementCore(e),s=this.contentPanel;return s?s.validateElement(e)&&t:t}updateElementCss(e){super.updateElementCss(e),this.contentPanel&&this.contentPanel.updateElementCss(e)}dispose(){this.unConnectEditingObj(),super.dispose()}updateEditingObj(){var e;const t=null===(e=this.data)||void 0===e?void 0:e.getEditingSurveyElement();if(!t)return;let s=t[this.getValueName()];return s&&!s.onPropertyChanged&&(s=void 0),s!==this.editingObjValue&&(this.unConnectEditingObj(),this.editingObjValue=s,s&&(this.onEditingObjPropertyChanged=(e,t)=>{this.setNewValueIntoQuestion(t.name,this.editingObjValue[t.name])},s.onPropertyChanged.add(this.onEditingObjPropertyChanged))),this.editingObjValue}unConnectEditingObj(){this.editingObjValue&&!this.editingObjValue.isDisposed&&this.editingObjValue.onPropertyChanged.remove(this.onEditingObjPropertyChanged)}getEditingSurveyElement(){return this.editingObjValue}getTextProcessor(){return this.textProcessing}findQuestionByName(e){return this.getQuestionByName(e)||super.findQuestionByName(e)}clearValueIfInvisibleCore(e){super.clearValueIfInvisibleCore(e);const t=this.contentPanel.questions;for(var s=0;s<t.length;s++)t[s].clearValueIfInvisible(e)}onAnyValueChanged(e,t){super.onAnyValueChanged(e,t);for(var s=this.contentPanel.questions,n=0;n<s.length;n++)s[n].onAnyValueChanged(e,t)}get hasSingleInput(){return!1}get isContainer(){return!0}createPanel(){var e=I.createClass("panel");e.showQuestionNumbers="off",e.renderWidth="100%";var t=this.customQuestion.json;return t.elementsJSON&&e.fromJSON({elements:t.elementsJSON}),t.createElements&&t.createElements(e,this),this.initElement(e),this.setIsContentElement(e),e.readOnly=this.isReadOnly,e.onGetNoCallback=e=>this.no,e.questions.forEach(e=>{e.setParentQuestion(this),e.onUpdateCssClassesCallback=t=>{this.onUpdateQuestionCssClasses(e,t)}}),this.setAfterRenderCallbacks(e),e}onReadOnlyChanged(){this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly),super.onReadOnlyChanged()}updateValueFromSurvey(e,t=!1){this.updateEditingObj(),super.updateValueFromSurvey(e,t)}onSurveyLoad(){if(this.isSettingValOnLoading=!0,this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly,this.setIsContentElement(this.contentPanel)),super.onSurveyLoad(),this.contentPanel){const e=this.getContentPanelValue();a.isValueEmpty(e)||(this.value=e)}this.isSettingValOnLoading=!1}setIsContentElement(e){e.isContentElement=!0;for(var t=e.elements,s=0;s<t.length;s++){var n=t[s];n.isPanel?this.setIsContentElement(n):n.isContentElement=!0}}setVisibleIndex(e){let t=super.setVisibleIndex(e);return this.isVisible&&this.contentPanel&&(t+=this.contentPanel.setVisibleIndex(e+1)),t}runConditionCore(e){super.runConditionCore(e),this.contentPanel&&this.contentPanel.runCondition(e)}onSurveyValueChanged(e){super.onSurveyValueChanged(e);const t=e||{};this.contentPanel&&this.contentPanel.questions.forEach(e=>{e.onSurveyValueChanged(t[e.getValueName()])})}getValue(e){var t=this.value;return t?t[e]:null}getQuestionByName(e){return this.contentPanel?this.contentPanel.getQuestionByName(e):void 0}setValue(e,t,s,n){if(this.settingNewValue)this.setNewValueIntoQuestion(e,t);else if(!this.isValueChanging(e,t)){if(this.settingNewValue=!0,!this.isEditingSurveyElement&&this.contentPanel){let e=0;const t=this.contentPanel.questions.length+1;for(;e<t&&this.updateValueCoreWithPanelValue();)e++}this.setNewValueIntoQuestion(e,t),super.setValue(e,t,s,n),this.settingNewValue=!1,this.runPanelTriggers(xt.expressionVariables.composite+"."+e,t),this.isEditingSurveyElement&&this.runCondition(this.getFilteredProperties())}}setComment(e,t,s){let n=this.getUnbindValue(this.value);const i=this.getCommentName(e);if(!n&&!t||t&&n&&n[i]===t)return;t?(n||(n={}),n[i]=t):delete n[i];const r=this.getQuestionByName(e);r&&r.comment!==t&&(r.comment=t),this.settingNewValue||(this.value=n)}getComment(e){const t=this.getQuestionByName(e);if(t)return t.comment;const s=this.value;return!!s&&s[this.getCommentName(e)]||""}getCommentName(e){return e+xt.commentSuffix}runPanelTriggers(e,t){this.contentPanel&&this.contentPanel.questions.forEach(s=>{s.runTriggers(e,t)})}updateValueCoreWithPanelValue(){const e=this.getContentPanelValue();return!this.isTwoValueEquals(this.getValueCore(),e)&&(this.setValueCore(e),!0)}getContentPanelValue(e){return e||(e=this.contentPanel.getValue()),this.customQuestion.setValueToQuestion(e)}getValueForContentPanel(e){return this.customQuestion.getValueFromQuestion(e)}setNewValueIntoQuestion(e,t){var s=this.getQuestionByName(e);s&&!this.isTwoValueEquals(t,s.value)&&(s.value=t)}addConditionObjectsByContext(e,t){if(this.contentPanel)for(var s=this.contentPanel.questions,n=this.name,i=this.title,r=0;r<s.length;r++)e.push({name:n+"."+s[r].name,text:i+"."+s[r].title,question:s[r]})}collectNestedQuestionsCore(e,t,s,n){this.contentPanel&&(n&&e.push(this),this.contentPanel.questions.forEach(i=>i.addNestedQuestion(e,t,s,n)))}convertDataValue(e,t){var s=this.contentPanel&&!this.isEditingSurveyElement?this.contentPanel.getValue():this.getValueForContentPanel(this.value);return s||(s={}),s.getType||(s=a.getUnbindValue(s)),this.isValueEmpty(t)&&!this.isEditingSurveyElement?delete s[e]:s[e]=t,this.getContentPanelValue(s)}setQuestionValue(e,t=!0){this.setValuesIntoQuestions(e),!this.isEditingSurveyElement&&this.contentPanel&&(e=this.getContentPanelValue()),super.setQuestionValue(e,t)}setValuesIntoQuestions(e){if(!this.contentPanel||this.settingNewValue)return;e=this.getValueForContentPanel(e);const t=this.settingNewValue;this.settingNewValue=!0;const s=this.contentPanel.questions;for(var n=0;n<s.length;n++){const t=s[n],i=t.getValueName(),r=this.getCommentName(i),a=e?e[i]:void 0,o=!!e&&e[r]||"";this.isTwoValueEquals(t.value,a)||void 0===a&&t.isEmpty()||(t.value=a),t.comment!==o&&(t.comment=o)}this.settingNewValue=t}getValueGetterContext(){return new Cs(this)}getDisplayValueCore(e,t){return super.getContentDisplayValueCore(e,t,this.contentPanel)}setAfterRenderCallbacks(e){if(e&&this.customQuestion)for(var t=e.questions,s=0;s<t.length;s++)t[s].afterRenderQuestionCallback=(e,t)=>{this.customQuestion.onAfterRenderContentElement(this,e,t)}}get ariaRole(){return"group"}setIsMobile(e){super.setIsMobile(e),this.contentPanel&&this.contentPanel.questions.forEach(t=>{t.setIsMobile(e)})}}class xs{static get DefaultChoices(){const e=l("choices_Item");return[e+"1",e+"2",e+"3"]}static get DefaultColums(){var e=l("matrix_column")+" ";return[e+"1",e+"2",e+"3"]}static get DefaultRows(){var e=l("matrix_row")+" ";return[e+"1",e+"2"]}static get DefaultMutlipleTextItems(){var e=l("multipletext_itemname");return[e+"1",e+"2"]}registerQuestion(e,t,s=!0){_s.Instance.registerElement(e,t,s)}registerCustomQuestion(e){_s.Instance.registerCustomQuestion(e)}unregisterElement(e,t=!1){_s.Instance.unregisterElement(e,t)}clear(){_s.Instance.clear()}getAllTypes(){return _s.Instance.getAllTypes()}createQuestion(e,t){return _s.Instance.createElement(e,t)}}xs.Instance=new xs;class _s{constructor(){this.creatorHash={},this.registerCustomQuestion=(e,t=!0)=>{this.registerElement(e,t=>{const s=I.createClass(e);return s&&(s.name=t),s},t)}}registerElement(e,t,s=!0){this.creatorHash[e]={showInToolbox:s,creator:t}}clear(){this.creatorHash={}}unregisterElement(e,t=!1){delete this.creatorHash[e],t&&I.removeClass(e)}getAllToolboxTypes(){return this.getAllTypesCore(!0)}getAllTypes(){return this.getAllTypesCore(!1)}createElement(e,t){var s=this.creatorHash[e];if(s&&s.creator)return s.creator(t);const n=fs.Instance.getCustomQuestionByName(e);return n?fs.Instance.createQuestion(t,n):null}getAllTypesCore(e){var t=new Array;for(var s in this.creatorHash)e&&!this.creatorHash[s].showInToolbox||t.push(s);return t.sort()}}_s.Instance=new _s;class Vs extends ts{constructor(e){super(e),this.createLocalizableString("format",this),this.registerPropertyChangedHandlers(["format","currency","displayStyle"],()=>{this.updateFormatedValue()})}getType(){return"expression"}get hasInput(){return!1}get format(){return this.getLocalizableStringText("format","")}set format(e){this.setLocalizableStringText("format",e)}get locFormat(){return this.getLocalizableString("format")}get expression(){return this.getPropertyValue("expression","")}set expression(e){this.setPropertyValue("expression",e)}locCalculation(){this.isExecutionLocked=!0}unlocCalculation(){this.isExecutionLocked=!1}runConditionCore(e){super.runConditionCore(e),this.isExecutionLocked||!this.runIfReadOnly&&this.isReadOnly||this.runExpressionByProperty("expression",e,e=>{this.value=this.roundValue(e)})}canCollectErrors(){return!0}hasRequiredError(){return!1}get maximumFractionDigits(){return this.getPropertyValue("maximumFractionDigits")}set maximumFractionDigits(e){e<-1||e>20||this.setPropertyValue("maximumFractionDigits",e)}get minimumFractionDigits(){return this.getPropertyValue("minimumFractionDigits")}set minimumFractionDigits(e){e<-1||e>20||this.setPropertyValue("minimumFractionDigits",e)}get runIfReadOnly(){return!0===this.runIfReadOnlyValue}set runIfReadOnly(e){this.runIfReadOnlyValue=e}get formatedValue(){return this.getPropertyValue("formatedValue","")}updateFormatedValue(){this.setPropertyValue("formatedValue",this.getDisplayValueCore(!1,this.value))}onValueChanged(){this.updateFormatedValue()}updateValueFromSurvey(e,t){super.updateValueFromSurvey(e,t),this.updateFormatedValue()}getDisplayValueCore(e,t){var s=null==t?this.defaultValue:t,n="";if(!this.isValueEmpty(s)){var i=this.getValueAsStr(s);n=this.format?this.format.format(i):i}return this.survey&&(n=this.survey.getExpressionDisplayValue(this,s,n)),n}get displayStyle(){return this.getPropertyValue("displayStyle")}set displayStyle(e){this.setPropertyValue("displayStyle",e)}get currency(){return this.getPropertyValue("currency")}set currency(e){["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"].indexOf(e)<0||this.setPropertyValue("currency",e)}get useGrouping(){return this.getPropertyValue("useGrouping")}set useGrouping(e){this.setPropertyValue("useGrouping",e)}get precision(){return this.getPropertyValue("precision")}set precision(e){this.setPropertyValue("precision",e)}roundValue(e){if(e!==1/0)return this.precision<0?e:a.isNumber(e)?parseFloat(e.toFixed(this.precision)):e}getValueAsStr(e){if("date"==this.displayStyle){const t=r("question-expression",e);if(t&&t.toLocaleDateString)return t.toLocaleDateString()}if("none"!=this.displayStyle&&a.isNumber(e)){var t=this.getLocale();t||(t="en");var s={style:this.displayStyle,currency:this.currency,useGrouping:this.useGrouping};return this.maximumFractionDigits>-1&&(s.maximumFractionDigits=this.maximumFractionDigits),this.minimumFractionDigits>-1&&(s.minimumFractionDigits=this.minimumFractionDigits),e.toLocaleString(t,s)}return e.toString()}get ariaRole(){return"presentation"}}function Is(e,t,s){let n=s?t:e;return-1==e||-1==t?n:e>t?s?e:t:n}I.addClass("expression",["expression:expression",{name:"format",serializationProperty:"locFormat"},{name:"displayStyle",default:"none",choices:["none","decimal","currency","percent","date"]},{name:"currency",choices:()=>["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"],default:"USD",visibleIf:e=>"currency"===e.displayStyle},{name:"maximumFractionDigits:number",onSettingValue:(e,t)=>Is(e.minimumFractionDigits,t,!0),default:-1},{name:"minimumFractionDigits:number",onSettingValue:(e,t)=>Is(t,e.maximumFractionDigits,!1),default:-1},{name:"useGrouping:boolean",default:!0},{name:"precision:number",default:-1,category:"data"},{name:"enableIf",visible:!1,isSerializable:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"readOnly",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1,isSerializable:!1},{name:"resetValueIf",visible:!1,isSerializable:!1},{name:"setValueIf",visible:!1,isSerializable:!1},{name:"setValueExpression",visible:!1,isSerializable:!1},{name:"defaultValueExpression",visible:!1,isSerializable:!1},{name:"defaultValue",visible:!1,isSerializable:!1},{name:"correctAnswer",visible:!1,isSerializable:!1},{name:"requiredIf",visible:!1,isSerializable:!1}],function(){return new Vs("")},"question"),xs.Instance.registerQuestion("expression",e=>new Vs(e));class Ss{constructor(e){this.column=e}getValue(e,t,s,n){if(1===e.length&&["name","item"].indexOf(e[0].name)>-1)return{isFound:!0,value:this.column.name}}getRootObj(){return this.column.colOwner}}function Ps(e,t,s,n){e.storeOthersAsComment=!!s&&s.storeOthersAsComment,e.choices&&0!=e.choices.length||!e.choicesByUrl.isEmpty||(e.choices=s.choices),e.choicesByUrl.isEmpty||e.choicesByUrl.run(n.getTextProcessor())}var Ts={dropdown:{onCellQuestionUpdate:(e,t,s,n)=>{!function(e,t,s,n){Ps(e,0,s,n),e.locPlaceholder&&e.locPlaceholder.isEmpty&&!s.locPlaceholder.isEmpty&&(e.optionsCaption=s.optionsCaption)}(e,0,s,n)}},checkbox:{onCellQuestionUpdate:(e,t,s,n)=>{Ps(e,0,s,n),e.colCount=t.colCount>-1?t.colCount:s.columnColCount}},radiogroup:{onCellQuestionUpdate:(e,t,s,n)=>{Ps(e,0,s,n),e.colCount=t.colCount>-1?t.colCount:s.columnColCount}},tagbox:{onCellQuestionUpdate:(e,t,s,n)=>{Ps(e,0,s,n)}},text:{},comment:{},boolean:{onCellQuestionUpdate:(e,t,s,n)=>{e.renderAs=t.renderAs}},expression:{},rating:{},slider:{}};class Es extends he{static getColumnTypes(){var e=[];for(var t in Ts)e.push(t);return e}constructor(e,t,s){super(),this.indexValue=-1,this._hasVisibleCell=!0,this.isColumnsVisibleIf=!0,this.previousChoicesId=void 0,this.colOwnerValue=s,this.createLocalizableString("totalFormat",this),this.createLocalizableString("cellHint",this),this.registerPropertyChangedHandlers(["showInMultipleColumns"],()=>{this.doShowInMultipleColumnsChanged()}),this.registerPropertyChangedHandlers(["visible"],()=>{this.doColumnVisibilityChanged()}),this.updateTemplateQuestion(void 0,e,t)}getOriginalObj(){return this.templateQuestion}getClassNameProperty(){return"cellType"}getSurvey(e=!1){return this.colOwner?this.colOwner.survey:null}endLoadingFromJson(){super.endLoadingFromJson(),this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns,this.templateQuestion.endLoadingFromJson(),this.templateQuestion.onGetSurvey=()=>this.getSurvey()}getDynamicPropertyName(){return"cellType"}getDynamicType(){return"default"===this.cellType?"question":this.calcCellQuestionType(null)}get colOwner(){return this.colOwnerValue}set colOwner(e){this.colOwnerValue=e,e&&(this.updateTemplateQuestion(),this.setParentQuestionToTemplate(this.templateQuestion))}getValueGetterContext(){return new Ss(this)}locStrsChanged(){super.locStrsChanged(),this.locTitle.strChanged()}addUsedLocales(e){super.addUsedLocales(e),this.templateQuestion.addUsedLocales(e)}get index(){return this.indexValue}setIndex(e){this.indexValue=e}getType(){return"matrixdropdowncolumn"}get cellType(){return this.getPropertyValue("cellType")}set cellType(e){e=e.toLocaleLowerCase(),this.updateTemplateQuestion(e),this.setPropertyValue("cellType",e),this.colOwner&&this.colOwner.onColumnCellTypeChanged(this)}get templateQuestion(){return this.templateQuestionValue}get value(){return this.templateQuestion.name}get isVisible(){return!0}get isColumnVisible(){return!!this.isDesignMode||this.visible&&this.hasVisibleCell}get visible(){return this.templateQuestion.visible}set visible(e){this.templateQuestion.visible=e}get hasVisibleCell(){return this._hasVisibleCell}set hasVisibleCell(e){this._hasVisibleCell=e}getVisibleMultipleChoices(){const e=this.templateQuestion.visibleChoices;if(!Array.isArray(e))return[];if(!Array.isArray(this._visiblechoices))return e;const t=new Array;for(let s=0;s<e.length;s++){const n=e[s];this._visiblechoices.indexOf(n.value)>-1&&t.push(n)}return t}get getVisibleChoicesInCell(){if(Array.isArray(this._visiblechoices))return this._visiblechoices;const e=this.templateQuestion.visibleChoices;return Array.isArray(e)?e:[]}setVisibleChoicesInCell(e){this._visiblechoices=e}get isFilteredMultipleColumns(){if(!this.showInMultipleColumns)return!1;const e=this.templateQuestion.choices;if(!Array.isArray(e))return!1;for(let t=0;t<e.length;t++)if(e[t].visibleIf)return!0;return!1}get name(){return this.templateQuestion.name}set name(e){this.templateQuestion.name=e}get title(){return this.templateQuestion.title}set title(e){this.templateQuestion.title=e}get locTitle(){return this.templateQuestion.locTitle}get fullTitle(){return this.locTitle.textOrHtml}get defaultDisplayValue(){return this.templateQuestion.defaultDisplayValue}set defaultDisplayValue(e){this.templateQuestion.defaultDisplayValue=e}get locDefaultDisplayValue(){return this.templateQuestion.locDefaultDisplayValue}get isRequired(){return this.getPropertyValue("isRequired")}set isRequired(e){this.setPropertyValue("isRequired",e),this.templateQuestion.isRequired=e}get isRenderedRequired(){return this.getPropertyValue("isRenderedRequired",this.isRequired)}set isRenderedRequired(e){this.setPropertyValue("isRenderedRequired",e)}updateIsRenderedRequired(e){this.isRenderedRequired=e||this.isRequired}get requiredMark(){return this.isRenderedRequired&&this.getSurvey()?this.getSurvey().requiredMark:this.templateQuestion.requiredMark}get requiredErrorText(){return this.templateQuestion.requiredErrorText}set requiredErrorText(e){this.templateQuestion.requiredErrorText=e}get locRequiredErrorText(){return this.templateQuestion.locRequiredErrorText}get readOnly(){return this.templateQuestion.readOnly}set readOnly(e){this.templateQuestion.readOnly=e}get hasOther(){return this.templateQuestion.showOtherItem}set hasOther(e){this.templateQuestion.showOtherItem=e}get visibleIf(){return this.templateQuestion.visibleIf}set visibleIf(e){this.templateQuestion.visibleIf=e}get enableIf(){return this.templateQuestion.enableIf}set enableIf(e){this.templateQuestion.enableIf=e}get requiredIf(){return this.templateQuestion.requiredIf}set requiredIf(e){this.templateQuestion.requiredIf=e}get resetValueIf(){return this.templateQuestion.resetValueIf}set resetValueIf(e){this.templateQuestion.resetValueIf=e}get defaultValueExpression(){return this.templateQuestion.defaultValueExpression}set defaultValueExpression(e){this.templateQuestion.defaultValueExpression=e}get setValueIf(){return this.templateQuestion.setValueIf}set setValueIf(e){this.templateQuestion.setValueIf=e}get setValueExpression(){return this.templateQuestion.setValueExpression}set setValueExpression(e){this.templateQuestion.setValueExpression=e}get isUnique(){return this.getPropertyValue("isUnique")}set isUnique(e){this.setPropertyValue("isUnique",e)}get showInMultipleColumns(){return this.getPropertyValue("showInMultipleColumns")}set showInMultipleColumns(e){this.setPropertyValue("showInMultipleColumns",e)}get isSupportMultipleColumns(){return["checkbox","radiogroup"].indexOf(this.cellType)>-1}get isShowInMultipleColumns(){return this.showInMultipleColumns&&this.isSupportMultipleColumns}get validators(){return this.templateQuestion.validators}set validators(e){this.templateQuestion.validators=e}get totalType(){return this.getPropertyValue("totalType")}set totalType(e){this.setPropertyValue("totalType",e)}get totalExpression(){return this.getPropertyValue("totalExpression")}set totalExpression(e){this.setPropertyValue("totalExpression",e)}get hasTotal(){return"none"!=this.totalType||!!this.totalExpression}get totalFormat(){return this.getLocalizableStringText("totalFormat","")}set totalFormat(e){this.setLocalizableStringText("totalFormat",e)}get locTotalFormat(){return this.getLocalizableString("totalFormat")}get cellHint(){return this.getLocalizableStringText("cellHint","")}set cellHint(e){this.setLocalizableStringText("cellHint",e)}get locCellHint(){return this.getLocalizableString("cellHint")}get renderAs(){return this.getPropertyValue("renderAs")}set renderAs(e){this.setPropertyValue("renderAs",e),this.templateQuestion&&(this.templateQuestion.renderAs=e)}get totalMaximumFractionDigits(){return this.getPropertyValue("totalMaximumFractionDigits")}set totalMaximumFractionDigits(e){e<-1||e>20||this.setPropertyValue("totalMaximumFractionDigits",e)}get totalMinimumFractionDigits(){return this.getPropertyValue("totalMinimumFractionDigits")}set totalMinimumFractionDigits(e){e<-1||e>20||this.setPropertyValue("totalMinimumFractionDigits",e)}get totalDisplayStyle(){return this.getPropertyValue("totalDisplayStyle")}set totalDisplayStyle(e){this.setPropertyValue("totalDisplayStyle",e)}get totalAlignment(){return this.getPropertyValue("totalAlignment")}set totalAlignment(e){this.setPropertyValue("totalAlignment",e)}get totalCurrency(){return this.getPropertyValue("totalCurrency")}set totalCurrency(e){["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"].indexOf(e)<0||this.setPropertyValue("totalCurrency",e)}get minWidth(){return this.getPropertyValue("minWidth","")}set minWidth(e){this.setPropertyValue("minWidth",e)}get width(){return this.templateQuestion.width}set width(e){this.templateQuestion.width=e}get colCount(){return this.getPropertyValue("colCount")}set colCount(e){e<-1||e>4||this.setPropertyValue("colCount",e)}getLocale(){return this.colOwner?this.colOwner.getLocale():""}getMarkdownHtml(e,t,s){return this.colOwner?this.colOwner.getMarkdownHtml(e,t,s):void 0}getRenderer(e){return this.colOwner?this.colOwner.getRenderer(e):null}getRendererContext(e){return this.colOwner?this.colOwner.getRendererContext(e):e}getProcessedText(e){return this.colOwner?this.colOwner.getProcessedText(e):e}createCellQuestion(e){var t=this.calcCellQuestionType(e),s=this.createNewQuestion(t);return this.callOnCellQuestionUpdate(s,e),s}startLoadingFromJson(e){super.startLoadingFromJson(e),e&&!e.cellType&&e.choices&&(e.cellType=this.colOwner.getCellType())}updateCellQuestion(e,t,s=null){this.setQuestionProperties(e,s)}callOnCellQuestionUpdate(e,t){var s=e.getType(),n=Ts[s];n&&n.onCellQuestionUpdate&&n.onCellQuestionUpdate(e,this,this.colOwner,t)}defaultCellTypeChanged(){this.updateTemplateQuestion()}calcCellQuestionType(e){let t=this.getDefaultCellQuestionType();return e&&this.colOwner&&(t=this.colOwner.getCustomCellType(this,e,t)),t}getDefaultCellQuestionType(e){return e||(e=this.cellType),"default"!==e?e:this.colOwner?this.colOwner.getCellType():xt.matrix.defaultCellType}updateTemplateQuestion(e,t,s){const n=this.getDefaultCellQuestionType(e),i=this.templateQuestion?this.templateQuestion.getType():"";n!==i&&(this.templateQuestion&&this.removeProperties(i),this.templateQuestionValue=this.createNewQuestion(n),this.templateQuestion.locOwner=this,this.addProperties(n),t&&(this.name=t),s?this.title=s:this.templateQuestion.locTitle.strChanged(),xt.serialization.matrixDropdownColumnSerializeTitle&&(this.templateQuestion.locTitle.serializeCallBackText=!0),this.templateQuestion.onPropertyChanged.add((e,t)=>{this.propertyValueChanged(t.name,t.oldValue,t.newValue,t.arrayChanges,t.target)}),this.templateQuestion.onNestedPropertyChanged.add((e,t)=>{this.colOwner&&!this.isLoadingFromJson&&this.colOwner.onColumnNestedPropertyChanged(this,t.name,t.nestedName,t.newValue)}),this.templateQuestion.onItemValuePropertyChanged.add((e,t)=>{this.doItemValuePropertyChanged(t.propertyName,t.obj,t.name,t.newValue,t.oldValue)}),this.templateQuestion.isContentElement=!0,this.isLoadingFromJson||(this.templateQuestion.onGetSurvey=()=>this.getSurvey()),this.templateQuestion.locTitle.strChanged())}createNewQuestion(e){var t=I.createClass(e);return t||(t=I.createClass("text")),t.loadingOwner=this,t.isEditableTemplateElement=!0,t.autoOtherMode=this.isShowInMultipleColumns,this.setQuestionProperties(t),this.setParentQuestionToTemplate(t),t}setParentQuestionToTemplate(e){this.colOwner&&this.colOwner.isQuestion&&e.setParentQuestion(this.colOwner)}setQuestionProperties(e,t=null){if(this.templateQuestion){var s=(new V).toJsonObject(this.templateQuestion,!0);if(t&&t(s),s.type=e.getType(),"default"===this.cellType&&this.colOwner&&this.colOwner.hasChoices()&&delete s.choices,delete s.itemComponent,this.jsonObj&&"rating"===s.type&&this.isLoadingFromJson&&Object.keys(this.jsonObj).forEach(e=>{s[e]=this.jsonObj[e]}),"random"===s.choicesOrder){s.choicesOrder="none";const e=this.templateQuestion.visibleChoices;Array.isArray(e)&&(s.choices=e)}(new V).toObject(s,e),e.isContentElement=this.templateQuestion.isContentElement,this.previousChoicesId=void 0,e.loadedChoicesFromServerCallback=()=>{if(!this.isShowInMultipleColumns)return;if(this.previousChoicesId&&this.previousChoicesId!==e.id)return;this.previousChoicesId=e.id;const t=e.visibleChoices;this.templateQuestion.choices=t,this.propertyValueChanged("choices",t,t)}}}propertyValueChanged(e,t,s,n,i){if(super.propertyValueChanged(e,t,s,n,i),"isRequired"===e&&this.updateIsRenderedRequired(s),this.colOwner&&!this.isLoadingFromJson){if(this.isShowInMultipleColumns){if("choicesOrder"===e)return;["visibleChoices","choices"].indexOf(e)>-1&&this.colOwner.onShowInMultipleColumnsChanged(this)}I.hasOriginalProperty(this,e)&&this.colOwner.onColumnPropertyChanged(this,e,s)}}doItemValuePropertyChanged(e,t,s,n,i){I.hasOriginalProperty(t,s)&&(null==this.colOwner||this.isLoadingFromJson||this.colOwner.onColumnItemValuePropertyChanged(this,e,t,s,n,i))}doShowInMultipleColumnsChanged(){null!=this.colOwner&&this.colOwner.onShowInMultipleColumnsChanged(this),this.templateQuestion&&(this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns)}doColumnVisibilityChanged(){null==this.colOwner||this.isDesignMode||this.colOwner.onColumnVisibilityChanged(this)}getProperties(e){return I.getDynamicPropertiesByObj(this,e)}removeProperties(e){for(var t=this.getProperties(e),s=0;s<t.length;s++){var n=t[s];delete this[n.name],n.serializationProperty&&delete this[n.serializationProperty]}}addProperties(e){const t=this.getProperties(e);I.addDynamicPropertiesIntoObj(this,this.templateQuestion,t)}}function Rs(e,t,s){return e+(t?"-error":"")+(s?"-detail":"")}I.addClass("matrixdropdowncolumn",[{name:"!name",isUnique:!0},{name:"title",serializationProperty:"locTitle",dependsOn:"name",onPropertyEditorUpdate:function(e,t){e&&t&&(t.placeholder=e.locTitle.getPlaceholder())}},{name:"cellHint",serializationProperty:"locCellHint",visible:!1},{name:"cellType",default:"default",choices:()=>{var e=Es.getColumnTypes();return e.splice(0,0,"default"),e}},{name:"colCount",default:-1,choices:[-1,0,1,2,3,4]},{name:"isRequired:boolean",defaultFunc:e=>{const t=null==e?void 0:e.templateQuestion;return t&&I.findProperty(t.getType(),"isRequired").getDefaultValue(t)||!1}},"isUnique:boolean",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},"readOnly:boolean",{name:"minWidth",onPropertyEditorUpdate:function(e,t){e&&t&&(t.value=e.minWidth)}},"width",{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition","resetValueIf:condition","setValueIf:condition","setValueExpression:expression",{name:"showInMultipleColumns:boolean",dependsOn:"cellType",visibleIf:e=>e.isSupportMultipleColumns},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"totalType",visibleIf:e=>!e.isShowInMultipleColumns,default:"none",choices:["none","sum","count","min","max","avg"]},{name:"totalExpression:expression",visibleIf:e=>!e.isShowInMultipleColumns},{name:"totalFormat",serializationProperty:"locTotalFormat",visibleIf:e=>e.hasTotal},{name:"totalDisplayStyle",visibleIf:e=>e.hasTotal,default:"none",choices:["none","decimal","currency","percent"]},{name:"totalAlignment",visibleIf:e=>e.hasTotal,default:"auto",choices:["auto","left","center","right"]},{name:"totalCurrency",visibleIf:e=>e.hasTotal,choices:()=>["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"],default:"USD"},{name:"totalMaximumFractionDigits:number",default:-1,visibleIf:e=>e.hasTotal},{name:"totalMinimumFractionDigits:number",default:-1,visibleIf:e=>e.hasTotal},{name:"renderAs",default:"default",visible:!1},{name:"defaultDisplayValue",serializationProperty:"locDefaultDisplayValue"}],function(){return new Es("")});class ks{constructor(){this.minWidth="",this.width="",this.colSpans=1,this.isActionsCell=!1,this.isErrorsCell=!1,this.isDragHandlerCell=!1,this.isDetailRowCell=!1,this.classNameValue="",this.idValue=ks.counter++}get requiredMark(){return this.column&&this.column.isRenderedRequired?this.column.requiredMark:void 0}get hasQuestion(){return!!this.question&&!this.isErrorsCell}get hasTitle(){return!!this.locTitle}get hasPanel(){return!!this.panel}get id(){let e=this.question?this.question.id:this.idValue.toString();return this.isChoice&&(e+="-"+(Number.isInteger(this.choiceIndex)?"index"+this.choiceIndex.toString():this.item.id)),Rs(e,this.isErrorsCell,this.isDetailRowCell)}get item(){return this.itemValue}set item(e){this.itemValue=e,e&&(e.hideCaption=!0)}get isChoice(){return!!this.item}get isItemChoice(){return this.isChoice&&!this.isOtherChoice}get choiceValue(){return this.isChoice?this.item.value:null}get isCheckbox(){return this.isItemChoice&&this.question.isDescendantOf("checkbox")}get isRadio(){return this.isItemChoice&&this.question.isDescendantOf("radiogroup")}get isFirstChoice(){return 0===this.choiceIndex}set className(e){this.classNameValue=e}get className(){const e=(new fe).append(this.classNameValue);return this.hasQuestion&&e.append(this.question.cssClasses.hasError,this.question.errors.length>0).append(this.question.cssClasses.answered,this.question.isAnswered),e.toString()}get cellQuestionWrapperClassName(){return this.cell.getQuestionWrapperClassName(this.matrix.cssClasses.cellQuestionWrapper)}get isVisible(){var e;return!this.hasQuestion&&!this.isErrorsCell||!(null===(e=this.matrix)||void 0===e?void 0:e.isMobile)||this.question.isVisible}get showResponsiveTitle(){var e;return this.hasQuestion&&(null===(e=this.matrix)||void 0===e?void 0:e.isMobile)}get responsiveTitleCss(){return(new fe).append(this.matrix.cssClasses.cellResponsiveTitle).toString()}get responsiveLocTitle(){return this.cell.column.locTitle}get headers(){if(this.cell&&this.cell.column){if(this.matrix.IsMultiplyColumn(this.cell.column))return this.item?this.item.locText.renderedHtml:"";let e=this.cell.column.cellHint;return e?""===e.trim()?"":this.cell.column.locCellHint.renderedHtml:this.hasQuestion&&this.question.isVisible&&this.question.title?this.question.title:this.cell.column.title}return this.hasQuestion&&this.question.isVisible?this.question.locTitle.renderedHtml:this.hasTitle&&this.locTitle.renderedHtml||""}getTitle(){return this.matrix&&this.matrix.showHeader?this.headers:""}calculateFinalClassName(e){const t=this.cell.question.cssClasses,s=(new fe).append(t.itemValue,!!t).append(t.asCell,!!t);return s.append(e.cell,s.isEmpty()&&!!e).append(e.choiceCell,this.isChoice).toString()}focusIn(){this.question&&this.question.focusIn()}}ks.counter=1;class As extends he{constructor(e,t=!1){super(),this.cssClasses=e,this.isDetailRow=t,this.hasEndActions=!1,this.isErrorsRow=!1,this.cells=[],this.idValue=As.counter++}get id(){var e;return Rs((null===(e=this.row)||void 0===e?void 0:e.id)||this.idValue.toString(),this.isErrorsRow,this.isDetailRow)}get dropTargetId(){var e;return null===(e=this.row)||void 0===e?void 0:e.id}get attributes(){return this.row?{"data-sv-drop-target-matrix-row":this.row.id}:{}}get className(){var e,t;return(new fe).append(this.cssClasses.row).append(this.cssClasses.detailRow,this.isDetailRow).append(this.cssClasses.rowHasPanel,null===(e=this.row)||void 0===e?void 0:e.hasPanel).append(this.cssClasses.expandedRow,(null===(t=this.row)||void 0===t?void 0:t.isDetailPanelShowing)&&!this.isDetailRow).append(this.cssClasses.rowHasEndActions,this.hasEndActions).append(this.cssClasses.ghostRow,this.isGhostRow).append(this.cssClasses.rowAdditional,this.isAdditionalClasses).toString()}setRootElement(e){this.rootElement=e}getRootElement(){return this.rootElement}focusCell(e){if(this.rootElement){const t=`:scope td:nth-of-type(${e+1}) input, :scope td:nth-of-type(${e+1}) button`,s=this.rootElement.querySelectorAll(t)[0];s&&s.focus()}}}As.counter=1,me([d({defaultValue:!1})],As.prototype,"isGhostRow",void 0),me([d({defaultValue:!1})],As.prototype,"isAdditionalClasses",void 0),me([d({defaultValue:!0})],As.prototype,"visible",void 0);class Ls extends As{constructor(e){super(e),this.isErrorsRow=!0}get attributes(){return{}}get className(){return(new fe).append(this.cssClasses.row).append(this.cssClasses.errorRow).toString()}onAfterCreated(){const e=()=>{this.visible=this.cells.some(e=>e.question&&e.question.hasVisibleErrors)};this.cells.forEach(t=>{t.question&&t.question.registerFunctionOnPropertyValueChanged("hasVisibleErrors",e)}),e()}}class Ds extends As{constructor(e,t){super(e),this.customId=t,this.isErrorsRow=!1}get attributes(){return{}}get dropTargetId(){return this.customId}get className(){return(new fe).append(this.cssClasses.row).append(this.cssClasses.rowEmpty).toString()}}class Ns extends he{getIsAnimationAllowed(){return super.getIsAnimationAllowed()&&this.matrix.animationAllowed}getRenderedRowsAnimationOptions(){const e=e=>{e.querySelectorAll(":scope > td > *").forEach(e=>{bt(e)})},t=e=>{e.querySelectorAll(":scope > td > *").forEach(e=>{yt(e)})};return{isAnimationEnabled:()=>this.animationAllowed,getRerenderEvent:()=>this.onElementRerendered,getAnimatedElement:e=>e.getRootElement(),getLeaveOptions:()=>({cssClass:this.cssClasses.rowLeave,onBeforeRunAnimation:e,onAfterRunAnimation:t}),getEnterOptions:(s,n)=>({cssClass:this.cssClasses.rowEnter,onBeforeRunAnimation:e,onAfterRunAnimation:t}),getKey:e=>e.id}}updateRenderedRows(){this.renderedRows=this.rows}get renderedRows(){return this._renderedRows}set renderedRows(e){this.renderedRowsAnimation.sync(e)}get wrapperDropTargetId(){var e;return null===(e=this.renderedRows[this.renderedRows.length-1])||void 0===e?void 0:e.dropTargetId}constructor(e){super(),this.matrix=e,this._renderedRows=[],this.renderedRowsAnimation=new He(this.getRenderedRowsAnimationOptions(),e=>{this._renderedRows=e},()=>this._renderedRows),this.hasActionCellInRowsValues={},this.build()}get showTable(){return this.getPropertyValue("showTable",!0)}get showHeader(){return this.getPropertyValue("showHeader")}get showAddRow(){return this.getPropertyValue("showAddRow",!1)}get showAddRowOnTop(){return this.getPropertyValue("showAddRowOnTop",!1)}get showAddRowOnBottom(){return this.getPropertyValue("showAddRowOnBottom",!1)}get showFooter(){return this.matrix.hasFooter&&this.matrix.isColumnLayoutHorizontal}get hasFooter(){return!!this.footerRow}get hasRemoveRows(){return this.hasRemoveRowsValue}isRequireReset(){return this.isRequireResetValue||this.hasRemoveRows!=this.matrix.canRemoveRows||!this.matrix.isColumnLayoutHorizontal}requireReset(){this.isRequireResetValue=!0}get headerRow(){return this.headerRowValue}get footerRow(){return this.footerRowValue}get isRowsDragAndDrop(){return this.matrix.isRowsDragAndDrop&&this.matrix.isColumnLayoutHorizontal}get showCellErrorsTop(){return"top"===this.matrix.getErrorLocation()}get showCellErrorsBottom(){return"bottom"===this.matrix.getErrorLocation()}build(){this.hasRemoveRowsValue=this.matrix.canRemoveRows,this.matrix.visibleRows,this.cssClasses=this.matrix.cssClasses,this.buildRowsActions(),this.buildHeader(),this.buildRows(),this.buildFooter(),this.updateShowTableAndAddRow()}updateShowTableAndAddRow(){const e=this.rows.length>0||this.matrix.isDesignMode||!this.matrix.getShowColumnsIfEmpty();this.setPropertyValue("showTable",e);const t=this.matrix.isDesignMode,s=!t&&this.matrix.canAddRow&&e;let n=s,i=s;n&&(n="default"===this.matrix.getAddRowLocation()?!this.matrix.isColumnLayoutHorizontal:"bottom"!==this.matrix.getAddRowLocation()),i&&"topBottom"!==this.matrix.getAddRowLocation()&&(i=!n),this.setPropertyValue("showAddRow",!t&&this.matrix.canAddRow),this.setPropertyValue("showAddRowOnTop",n),this.setPropertyValue("showAddRowOnBottom",i)}onAddedRow(e,t){if(this.getRenderedDataRowCount()>=this.matrix.visibleRows.length)return;let s=this.getRenderedRowIndexByIndex(t);this.rowsActions.splice(t,0,this.buildRowActions(e)),this.addHorizontalRow(this.rows,e,s),this.updateShowTableAndAddRow()}getRenderedRowIndexByIndex(e){let t=0,s=0;for(var n=0;n<this.rows.length;n++){if(s===e){(this.rows[n].isErrorsRow||this.rows[n].isDetailRow)&&(t++,n+1<this.rows.length&&this.rows[n+1].isDetailRow&&t++);break}t++,this.rows[n].isErrorsRow||this.rows[n].isDetailRow||s++}return s<e?this.rows.length:t}getRenderedDataRowCount(){for(var e=0,t=0;t<this.rows.length;t++)this.rows[t].isErrorsRow||this.rows[t].isDetailRow||e++;return e}onRemovedRow(e){var t=this.getRenderedRowIndex(e);if(!(t<0)){this.rowsActions.splice(t,1);var s=1;t<this.rows.length-1&&this.showCellErrorsBottom&&this.rows[t+1].isErrorsRow&&s++,t<this.rows.length-1&&(this.rows[t+1].isDetailRow||this.showCellErrorsBottom&&t+1<this.rows.length-1&&this.rows[t+2].isDetailRow)&&s++,t>0&&this.showCellErrorsTop&&this.rows[t-1].isErrorsRow&&(t--,s++),this.rows.splice(t,s),this.updateShowTableAndAddRow()}}onDetailPanelChangeVisibility(e,t){const s=this.getRenderedRowIndex(e);if(s<0)return;let n=s;this.showCellErrorsBottom&&n++;var i=n<this.rows.length-1&&this.rows[n+1].isDetailRow?n+1:-1;if(!(t&&i>-1||!t&&i<0))if(t){var r=this.createDetailPanelRow(e,this.rows[s]);this.rows.splice(n+1,0,r)}else this.rows.splice(i,1)}focusActionCell(e,t){let s=this.rows[this.rows.length-1];if(this.matrix.isColumnLayoutHorizontal){const t=this.getRenderedRowIndex(e);s=this.rows[t]}null==s||s.focusCell(t)}getRenderedRowIndex(e){for(var t=0;t<this.rows.length;t++)if(this.rows[t].row==e)return t;return-1}buildRowsActions(){this.rowsActions=[];for(var e=this.matrix.visibleRows,t=0;t<e.length;t++)this.rowsActions.push(this.buildRowActions(e[t]))}createRenderedRow(e,t=!1){return new As(e,t)}createErrorRenderedRow(e){return new Ls(e)}createEmptyRenderedRow(e){return new Ds(e,this.matrix.id)}buildHeader(){var e=this.matrix.isColumnLayoutHorizontal&&this.matrix.showHeader||this.matrix.hasRowText&&!this.matrix.isColumnLayoutHorizontal;if(this.setPropertyValue("showHeader",e),e){if(this.headerRowValue=this.createRenderedRow(this.cssClasses),this.isRowsDragAndDrop&&this.headerRow.cells.push(this.createHeaderCell(null,"action",this.cssClasses.actionsCellDrag)),this.hasActionCellInRows("start")&&this.headerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText&&this.matrix.showHeader&&this.headerRow.cells.push(this.createHeaderCell(null)),this.matrix.isColumnLayoutHorizontal)for(var t=0;t<this.matrix.columns.length;t++){var s=this.matrix.columns[t];s.isColumnVisible&&(this.matrix.IsMultiplyColumn(s)?this.createMutlipleColumnsHeader(s):this.headerRow.cells.push(this.createHeaderCell(s)))}else{var n=this.matrix.visibleRows;for(t=0;t<n.length;t++){const e=this.createTextCell(n[t].locText);this.setHeaderCellCssClasses(e),e.row=n[t],this.headerRow.cells.push(e)}if(this.matrix.hasFooter){const e=this.createTextCell(this.matrix.getFooterText());this.setHeaderCellCssClasses(e),this.headerRow.cells.push(e)}}this.hasActionCellInRows("end")&&this.headerRow.cells.push(this.createHeaderCell(null,"action"))}}buildFooter(){if(this.showFooter){if(this.footerRowValue=this.createRenderedRow(this.cssClasses),this.isRowsDragAndDrop&&this.footerRow.cells.push(this.createHeaderCell(null)),this.hasActionCellInRows("start")&&this.footerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText){const e=this.createTextCell(this.matrix.getFooterText());e.className=(new fe).append(e.className).append(this.cssClasses.footerTotalCell).toString(),this.footerRow.cells.push(e)}for(var e=this.matrix.visibleTotalRow.cells,t=0;t<e.length;t++){var s=e[t];if(s.column.isColumnVisible)if(this.matrix.IsMultiplyColumn(s.column))this.createMutlipleColumnsFooter(this.footerRow,s);else{var n=this.createEditCell(s);s.column&&this.setCellWidth(s.column,n),n.className=(new fe).append(n.className).append(this.cssClasses.footerCell).toString(),this.footerRow.cells.push(n)}}this.hasActionCellInRows("end")&&this.footerRow.cells.push(this.createHeaderCell(null,"action"))}}buildRows(){this.blockAnimations();var e=this.matrix.isColumnLayoutHorizontal?this.buildHorizontalRows():this.buildVerticalRows();this.rows=e,this.releaseAnimations()}hasActionCellInRows(e){return void 0===this.hasActionCellInRowsValues[e]&&(this.hasActionCellInRowsValues[e]=this.hasActionsCellInLocaltion(e)),this.hasActionCellInRowsValues[e]}hasActionsCellInLocaltion(e){return!("end"!=e||!this.hasRemoveRows)||this.matrix.visibleRows.some((t,s)=>!this.isValueEmpty(this.getRowActions(s,e)))}canRemoveRow(e){return this.matrix.canRemoveRow(e)}buildHorizontalRows(){var e=this.matrix.visibleRows,t=[];if(0==e.length&&this.matrix.allowRowReorder&&this.matrix.allowRowDragIn){const e=this.createEmptyRow(),s=this.createTextCell(this.matrix.locNoRowsText);s.colSpans=this.headerRow&&this.headerRow.cells.length||1,e.cells.push(s),t.push(e)}for(var s=0;s<e.length;s++)this.addHorizontalRow(t,e[s]);return t}addHorizontalRow(e,t,s=-1){const n=this.createHorizontalRow(t),i=this.createErrorRow(n);if(n.row=t,s<0&&(s=e.length),this.matrix.isMobile){const t=[];for(let e=0;e<n.cells.length;e++)this.showCellErrorsTop&&!i.cells[e].isEmpty&&t.push(i.cells[e]),t.push(n.cells[e]),this.showCellErrorsBottom&&!i.cells[e].isEmpty&&t.push(i.cells[e]);n.cells=t,e.splice(s,0,n)}else e.splice(s,0,...this.showCellErrorsTop?[i,n]:[n,i]),s++;t.isDetailPanelShowing&&e.splice(s+1,0,this.createDetailPanelRow(t,n))}getRowDragCell(e){const t=new ks,s=this.matrix.lockedRowCount;return t.isDragHandlerCell=s<1||e>=s,t.isEmpty=!t.isDragHandlerCell,t.className=this.getActionsCellClassName(t),t.row=this.matrix.visibleRows[e],t}getActionsCellClassName(e=null){const t=(new fe).append(this.cssClasses.actionsCell).append(this.cssClasses.actionsCellDrag,null==e?void 0:e.isDragHandlerCell).append(this.cssClasses.detailRowCell,null==e?void 0:e.isDetailRowCell).append(this.cssClasses.verticalCell,!this.matrix.isColumnLayoutHorizontal);if(e.isActionsCell){const s=e.item.value.actions;this.cssClasses.actionsCellPrefix&&s.forEach(e=>{t.append(this.cssClasses.actionsCellPrefix+"--"+e.id)})}return t.toString()}getRowActionsCell(e,t,s=!1){const n=this.getRowActions(e,t);if(!this.isValueEmpty(n)){const t=new ks,i=this.matrix.allowAdaptiveActions?new je:new Ce;this.matrix.survey&&this.matrix.survey.getCss().actionBar&&(i.cssClasses=this.matrix.survey.getCss().actionBar),i.setItems(n);const r=new is(i);return t.item=r,t.isActionsCell=!0,t.isDragHandlerCell=!1,t.isDetailRowCell=s,t.className=this.getActionsCellClassName(t),t.row=this.matrix.visibleRows[e],t}return null}getRowActions(e,t){var s=this.rowsActions[e];return Array.isArray(s)?s.filter(e=>(e.location||(e.location="start"),e.location===t)):[]}buildRowActions(e){var t=[];return this.setDefaultRowActions(e,t),this.matrix.survey&&(t=this.matrix.survey.getUpdatedMatrixRowActions(this.matrix,e,t)),t}get showRemoveButtonAsIcon(){return xt.matrix.renderRemoveAsIcon&&this.matrix.survey&&"sd-root-modern"===this.matrix.survey.css.root}setDefaultRowActions(e,t){const s=this.matrix;this.hasRemoveRows&&this.canRemoveRow(e)&&(this.showRemoveButtonAsIcon?t.push(new De({id:"remove-row",iconName:"icon-delete-24x24",iconSize:"auto",component:"sv-action-bar-item",innerCss:(new fe).append(this.matrix.cssClasses.button).append(this.matrix.cssClasses.buttonRemove).toString(),location:"end",showTitle:!1,title:s.removeRowText,enabled:!s.isInputReadOnly,data:{row:e,question:s},action:()=>{s.removeRowUI(e)}})):t.push(new De({id:"remove-row",location:"end",enabled:!this.matrix.isInputReadOnly,component:"sv-matrix-remove-button",data:{row:e,question:this.matrix}}))),e.hasPanel&&(this.matrix.isMobile?t.unshift(new De({id:"show-detail-mobile",title:new de(()=>e.isDetailPanelShowing?this.matrix.getLocalizationString("hideDetails"):this.matrix.getLocalizationString("showDetails")),showTitle:!0,location:"end",action:t=>{e.showHideDetailPanelClick()}})):t.push(new De({id:"show-detail",title:new de(()=>e.isDetailPanelShowing?this.matrix.getLocalizationString("hideDetails"):this.matrix.getLocalizationString("showDetails")),showTitle:!1,location:"start",component:"sv-matrix-detail-button",data:{row:e,question:this.matrix}})))}createErrorRow(e){const t=this.createErrorRenderedRow(this.cssClasses);for(let s=0;s<e.cells.length;s++){const n=e.cells[s];n.hasQuestion?this.matrix.IsMultiplyColumn(n.cell.column)?n.isFirstChoice?t.cells.push(this.createErrorCell(n.cell)):t.cells.push(this.createEmptyCell(!0)):t.cells.push(this.createErrorCell(n.cell)):t.cells.push(this.createEmptyCell(!0))}return t.onAfterCreated(),t}createEmptyRow(){return this.createEmptyRenderedRow(this.cssClasses)}createHorizontalRow(e){var t=this.createRenderedRow(this.cssClasses);if(this.isRowsDragAndDrop){var s=this.matrix.visibleRows.indexOf(e);t.cells.push(this.getRowDragCell(s))}this.addRowActionsCell(e,t,"start"),this.matrix.hasRowText&&((i=this.createTextCell(e.locText)).row=e,t.cells.push(i),this.setCellWidth(null,i),i.className=(new fe).append(i.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell,!this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.detailRowText,e.hasPanel).toString());for(var n=0;n<e.cells.length;n++){let s=e.cells[n];if(s.column.isColumnVisible)if(this.matrix.IsMultiplyColumn(s.column))this.createMutlipleEditCells(t,s);else{s.column.isShowInMultipleColumns&&s.question.visibleChoices.map(e=>e.hideCaption=!1);var i=this.createEditCell(s);t.cells.push(i),this.setCellWidth(s.column,i)}}return this.addRowActionsCell(e,t,"end"),t}addRowActionsCell(e,t,s){var n=this.matrix.visibleRows.indexOf(e);if(this.hasActionCellInRows(s)){const e=this.getRowActionsCell(n,s,t.isDetailRow);if(e)t.cells.push(e),t.hasEndActions=!0;else{var i=new ks;i.isEmpty=!0,i.isDetailRowCell=t.isDetailRow,t.cells.push(i)}}}createDetailPanelRow(e,t){const s=this.matrix.isDesignMode;var n=this.createRenderedRow(this.cssClasses,!0);n.row=e;var i=new ks;this.matrix.hasRowText&&(i.colSpans=2),i.isEmpty=!0,s||n.cells.push(i);var r=null;this.hasActionCellInRows("end")&&((r=new ks).isEmpty=!0);var a=new ks;return a.panel=e.detailPanel,a.colSpans=t.cells.length-(s?0:i.colSpans)-(r?r.colSpans:0),a.className=this.cssClasses.detailPanelCell,n.cells.push(a),r&&(this.matrix.isMobile?this.addRowActionsCell(e,n,"end"):n.cells.push(r)),"function"==typeof this.matrix.onCreateDetailPanelRenderedRowCallback&&this.matrix.onCreateDetailPanelRenderedRowCallback(n),n}buildVerticalRows(){for(var e=this.matrix.columns,t=[],s=0;s<e.length;s++){var n=e[s];if(n.isColumnVisible)if(this.matrix.IsMultiplyColumn(n))this.createMutlipleVerticalRows(t,n,s);else{const e=this.createVerticalRow(n,s),i=this.createErrorRow(e);this.showCellErrorsTop?(t.push(i),t.push(e)):(t.push(e),t.push(i))}}return this.hasActionCellInRows("end")&&t.push(this.createEndVerticalActionRow()),t}createMutlipleVerticalRows(e,t,s){var n=this.getMultipleColumnChoices(t);if(n)for(var i=0;i<n.length;i++){const r=this.createVerticalRow(t,s,n[i],i),a=this.createErrorRow(r);this.showCellErrorsTop?(e.push(a),e.push(r)):(e.push(r),e.push(a))}}createVerticalRow(e,t,s=null,n=-1){var i=this.createRenderedRow(this.cssClasses);if(this.matrix.showHeader){var r=s?s.locText:e.locTitle,a=this.createTextCell(r);a.column=e,a.className=(new fe).append(a.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell).toString(),i.cells.push(a)}for(var o=this.matrix.visibleRows,l=0;l<o.length;l++){var u=s,d=n>=0?n:l,h=o[l].cells[t],c=s?h.question.visibleChoices:void 0;c&&d<c.length&&(u=c[d]);var p=this.createEditCell(h,u);p.item=u,p.choiceIndex=d,i.cells.push(p)}return this.matrix.hasTotal&&i.cells.push(this.createEditCell(this.matrix.visibleTotalRow.cells[t])),i}createEndVerticalActionRow(){var e=this.createRenderedRow(this.cssClasses);this.matrix.showHeader&&e.cells.push(this.createEmptyCell());for(var t=this.matrix.visibleRows,s=0;s<t.length;s++)e.cells.push(this.getRowActionsCell(s,"end"));return this.matrix.hasTotal&&e.cells.push(this.createEmptyCell()),e}createMutlipleEditCells(e,t,s=!1){var n=s?this.getMultipleColumnChoices(t.column):t.question.visibleChoices;if(n)for(var i=0;i<n.length;i++){var r=this.createEditCell(t,s?void 0:n[i]);s||(this.setItemCellCssClasses(r),r.choiceIndex=i),e.cells.push(r)}}setItemCellCssClasses(e){e.className=(new fe).append(this.cssClasses.cell).append(this.cssClasses.itemCell).append(this.cssClasses.radioCell,e.isRadio).append(this.cssClasses.checkboxCell,e.isCheckbox).toString()}createEditCell(e,t=void 0){var s=new ks;return s.cell=e,s.row=e.row,s.column=e.column,s.question=e.question,s.matrix=this.matrix,s.item=t,s.isOtherChoice=!!t&&!!e.question&&e.question.otherItem===t,s.className=s.calculateFinalClassName(this.cssClasses),s}createErrorCell(e,t=void 0){var s=new ks;return s.question=e.question,s.row=e.row,s.matrix=this.matrix,s.isErrorsCell=!0,s.className=(new fe).append(this.cssClasses.cell).append(this.cssClasses.errorsCell).append(this.cssClasses.errorsCellTop,this.showCellErrorsTop).append(this.cssClasses.errorsCellBottom,this.showCellErrorsBottom).toString(),s}createMutlipleColumnsFooter(e,t){this.createMutlipleEditCells(e,t,!0)}createMutlipleColumnsHeader(e){var t=this.getMultipleColumnChoices(e);if(t)for(var s=0;s<t.length;s++){var n=this.createTextCell(t[s].locText);this.setHeaderCell(e,n),this.setHeaderCellCssClasses(n),this.headerRow.cells.push(n)}}getMultipleColumnChoices(e){var t=e.templateQuestion.choices;return t&&Array.isArray(t)&&0==t.length?[].concat(this.matrix.choices,e.getVisibleMultipleChoices()):(t=e.getVisibleMultipleChoices())&&Array.isArray(t)?t:null}setHeaderCellCssClasses(e,t,s){e.className=(new fe).append(this.cssClasses.headerCell).append(this.cssClasses.columnTitleCell,this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.emptyCell,!!e.isEmpty).append(this.cssClasses.cell+"--"+t,!!t).append(s,!!s).toString()}createHeaderCell(e,t=null,s){let n=e?this.createTextCell(e.locTitle):this.createEmptyCell();return n.column=e,this.setHeaderCell(e,n),t||(t=e&&"default"!==e.cellType?e.cellType:this.matrix.cellType),this.setHeaderCellCssClasses(n,t,s),n}setHeaderCell(e,t){this.setCellWidth(e,t)}setCellWidth(e,t){t.minWidth=null!=e?this.matrix.getColumnWidth(e):this.matrix.getRowTitleWidth(),t.width=null!=e?e.width:this.matrix.getRowTitleWidth()}createTextCell(e){var t=new ks;return t.locTitle=e,this.cssClasses.cell&&(t.className=this.cssClasses.cell),t}createEmptyCell(e=!1){const t=this.createTextCell(null);return t.isEmpty=!0,t.className=(new fe).append(this.cssClasses.cell).append(this.cssClasses.emptyCell).append(this.cssClasses.errorsCell,e).toString(),t}}me([c({onPush:(e,t,s)=>{s.updateRenderedRows()},onRemove:(e,t,s)=>{s.updateRenderedRows()}})],Ns.prototype,"rows",void 0),me([c()],Ns.prototype,"_renderedRows",void 0);class Os{constructor(e,t,s){this.column=e,this.row=t,this.data=s,this.questionValue=this.createQuestion(e,t,s),this.questionValue.updateCustomWidget(),this.updateCellQuestionTitleDueToAccessebility(t)}updateCellQuestionTitleDueToAccessebility(e){this.questionValue.locTitle.onGetTextCallback=t=>{const s=null==e?void 0:e.getSurvey();if(!s||s.isSingleVisibleInput)return this.questionValue.title;const n=e.getAccessbilityText();return n?this.column.colOwner.getCellAriaLabel(e,this.column,n):this.questionValue.title}}locStrsChanged(){this.question.locStrsChanged()}createQuestion(e,t,s){const n=s.createQuestion(this.row,this.column);return n.readOnlyCallback=()=>!this.row.isRowEnabled(),n.validateValueCallback=function(){return s.validateCell(t,e.name,t.value)},g.getProperties(e.getType()).forEach(t=>{let s=t.name;void 0!==e[s]&&(n[s]=e[s])}),n}get question(){return this.questionValue}get value(){return this.question.value}set value(e){this.question.value=e}getQuestionWrapperClassName(e){return e}runCondition(e){this.question.runCondition(e)}}class js extends Os{constructor(e,t,s){super(e,t,s),this.column=e,this.row=t,this.data=s,this.updateCellQuestion()}createQuestion(e,t,s){var n=I.createClass("expression");return n.setSurveyImpl(t),n}locStrsChanged(){this.updateCellQuestion(),super.locStrsChanged()}updateCellQuestion(){this.question.locCalculation(),this.column.updateCellQuestion(this.question,null,function(e){delete e.defaultValue}),this.question.expression=this.getTotalExpression(),this.question.format=this.column.totalFormat,this.question.currency=this.column.totalCurrency,this.question.displayStyle=this.column.totalDisplayStyle,this.question.maximumFractionDigits=this.column.totalMaximumFractionDigits,this.question.minimumFractionDigits=this.column.totalMinimumFractionDigits,this.question.unlocCalculation(),this.question.runIfReadOnly=!0}getQuestionWrapperClassName(e){let t=super.getQuestionWrapperClassName(e);if(!t)return t;this.question.expression&&"''"!=this.question.expression&&(t+=" "+e+"--expression");let s=this.column.totalAlignment;return"auto"===s&&"dropdown"===this.column.cellType&&(s="left"),t+" "+e+"--"+s}getTotalExpression(){if(this.column.totalExpression)return this.column.totalExpression;if("none"==this.column.totalType)return"''";var e=this.column.totalType+"InArray";return A.Instance.hasFunction(e)?e+"({matrix}, '"+this.column.name+"')":""}}class qs extends $t{constructor(e){super(),this.row=e}getIndex(){return this.row.rowIndex-1}getQuestionData(){return this.row.data}getValue(e,t,s,n){if(0===e.length)return;const i=xt.expressionVariables;if(1===e.length){const t=this.getRowValue(e[0].name);if(void 0!==t)return{isFound:!0,value:t};if(e[0].name===i.matrix){const e=this.row.data;return{isFound:!0,context:e.getValueGetterContext(),value:e.getFilteredData()}}}if(e.length>1&&e[0].name===i.totalRow){const i=this.row.data.visibleTotalRow;if(i)return e[0].name="row",i.getValueGetterContext().getValue(e,t,s,n)}const r=e[0].name===i.row;if(r||!t){r&&e.shift();let i=super.getValue(e,t,s,n);if(i&&i.isFound)return i;const a=this.row.getAllValues();return t&&(i=this.getValueFromBindedQuestions(e,a),i)?i:new T(a).getValue(e,t,s,n)}}getRootObj(){return this.row.data}updateValueByItem(e,t){const s=this.row.getQuestionsByValueName(e,!0);s.length>0&&(t.isFound=!0,t.context=s[0].getValueGetterContext())}getRowValue(e){const t=xt.expressionVariables;return(e=e.toLocaleLowerCase())===t.rowIndex.toLocaleLowerCase()?this.row.rowIndex:e===t.visibleRowIndex.toLocaleLowerCase()?this.getQuestionData().visibleRows.indexOf(this.row)+1:[t.item,t.rowName.toLocaleLowerCase(),t.rowValue.toLocaleLowerCase()].indexOf(e)>-1?this.row.rowName:e==t.rowTitle.toLocaleLowerCase()?this.row.rowTitle:void 0}}class Ms{static getId(){return"srow_"+Ms.idCounter++}constructor(e,t){this.data=e,this.isSettingValue=!1,this.detailPanelValue=null,this.visibleValue=!0,this.cells=[],this.visibleIndex=-1,this.isCreatingDetailPanel=!1,this.data=e,this.subscribeToChanges(t),this.textPreProcessor=new ms(this),this.showHideDetailPanelClick=()=>{if(this.getSurvey().isDesignMode)return!0;this.showHideDetailPanel()},this.idValue=Ms.getId()}get id(){return this.idValue}get rowName(){return null}get rowTitle(){return this.rowName}get dataName(){return this.rowName}get text(){return this.rowName}getValueGetterContext(){return new qs(this)}isRowEnabled(){return!0}isRowHasEnabledCondition(){return!1}get isVisible(){return this.visible&&this.isItemVisible()}get visible(){return this.visibleValue}set visible(e){var t;this.visible!==e&&(this.visibleValue=e,null===(t=this.data)||void 0===t||t.onRowVisibilityChanged(this))}isItemVisible(){return!0}get value(){return this.getValueCore(!1)}set value(e){this.isSettingValue=!0,this.subscribeToChanges(e);for(var t=this.questions,s=0;s<t.length;s++){var n=t[s],i=this.getCellValue(e,n.getValueName()),r=n.comment,a=e?e[n.getValueName()+he.commentSuffix]:"";null==a&&(a=""),n.updateValueFromSurvey(i),(a||this.isTwoValueEquals(r,n.comment))&&n.updateCommentFromSurvey(a),n.onSurveyValueChanged(i)}this.isSettingValue=!1}get filteredValue(){return this.getValueCore(!0)}getValueCore(e){for(var t={},s=this.questions,n=0;n<s.length;n++){var i=s[n];i.isEmpty()||(t[i.getValueName()]=e?i.getFilteredValue():i.value),i.comment&&this.getSurvey()&&this.getSurvey().storeOthersAsComment&&(t[i.getValueName()+he.commentSuffix]=i.comment)}return t}get locText(){return null}getAccessbilityText(){return this.locText&&this.locText.renderedHtml}get hasPanel(){return!!this.data&&this.data.hasDetailPanel(this)}get detailPanel(){return this.detailPanelValue}get detailPanelId(){return this.detailPanel?this.detailPanel.id:""}get isDetailPanelShowing(){return!!this.data&&this.data.getIsDetailPanelShowing(this)}setIsDetailPanelShowing(e){!e&&this.detailPanel&&this.detailPanel.onHidingContent(),this.data&&this.data.setIsDetailPanelShowing(this,e),e&&this.detailPanel&&this.detailPanel.onFirstRendering(),this.onDetailPanelShowingChanged&&this.onDetailPanelShowingChanged()}showHideDetailPanel(){this.isDetailPanelShowing?this.hideDetailPanel():this.showDetailPanel()}showDetailPanel(){this.ensureDetailPanel(),this.detailPanelValue&&this.setIsDetailPanelShowing(!0)}hideDetailPanel(e=!1){this.setIsDetailPanelShowing(!1),e&&(this.detailPanelValue=null)}ensureDetailPanel(){if(!this.isCreatingDetailPanel&&!this.detailPanelValue&&this.hasPanel&&this.data){this.isCreatingDetailPanel=!0,this.detailPanelValue=this.data.createRowDetailPanel(this);var e=this.detailPanelValue.questions,t=this.getDataRowValue();if(!a.isValueEmpty(t))for(var s=0;s<e.length;s++){const n=e[s].getValueName(),i=this.editingObj?I.getObjPropertyValue(this.editingObj,n):t[n];a.isValueEmpty(i)||(e[s].value=i)}this.detailPanelValue.setSurveyImpl(this),this.isCreatingDetailPanel=!1}}getAllValues(){const e=this.value;if(this.data){const s=this.getDataRowValue();if(s)for(var t in s)void 0===e[t]&&(e[t]=s[t])}return e}getFilteredProperties(){return{survey:this.getSurvey(),row:this}}getDataRowValue(){return this.data?this.data.getRowValue(this.data.getRowIndex(this)):null}runCondition(e,t){if(!this.data)return;const s=a.createCopy(e);s[xt.expressionVariables.row]=this,this.visible=!t||new ae(t).runContext(this.getValueGetterContext(),e);for(var n=0;n<this.cells.length;n++)this.cells[n].runCondition(s);this.detailPanel&&this.detailPanel.runCondition(s),this.isRowHasEnabledCondition()&&this.onQuestionReadOnlyChanged()}updateElementVisibility(){this.cells.forEach(e=>e.question.updateElementVisibility()),this.detailPanel&&this.detailPanel.updateElementVisibility()}getNamesWithDefaultValues(){const e=[];return this.questions.forEach(t=>{t.isValueDefault&&e.push(t.getValueName())}),e}clearValue(e){for(var t=this.questions,s=0;s<t.length;s++)t[s].clearValue(e)}onAnyValueChanged(e,t){for(var s=this.questions,n=0;n<s.length;n++)s[n].onAnyValueChanged(e,t)}getDataValueCore(e,t){var s=this.getSurvey();return s?s.getDataValueCore(e,t):e[t]}getValue(e){var t=this.getQuestionByName(e);return t?t.value:null}setValue(e,t){this.setValueCore(e,t,!1)}getVariable(e){}setVariable(e,t){}getComment(e){var t=this.getQuestionByName(e);return t?t.comment:""}setComment(e,t,s){this.setValueCore(e,t,!0)}findQuestionByName(e){if(!e)return;const t=xt.expressionVariables.row+".";if(0===e.indexOf(t))return this.getQuestionByName(e.substring(t.length));const s=this.getSurvey();return s?s.getQuestionByName(e):null}getEditingSurveyElement(){}setValueCore(e,t,s){if(this.isSettingValue||this.isCreatingDetailPanel)return;this.updateQuestionsValue(e,t,s),s||this.updateSharedQuestionsValue(e,t);var n=this.value,i=s?e+he.commentSuffix:e,r=t,a=this.getQuestionByName(e),o=this.data.onRowChanging(this,i,n);if(a&&!this.isTwoValueEquals(o,r)&&(this.isSettingValue=!0,s?a.comment=o:a.value=o,this.isSettingValue=!1,n=this.value),this.data.isValidateOnValueChanging&&!this.validateCellQuestion(a))return;const l=null==t&&!a||s&&!t&&!!a;this.data.onRowChanged(this,i,n,l);const u=xt.expressionVariables.row;if(i){const e=u+"."+i;this.runTriggers(e,n),this.data.runTriggersInRow(this,e,n)}this.onAnyValueChanged(u,"")}updateQuestionsValue(e,t,s){if(this.detailPanel){var n=this.getQuestionByColumnName(e),i=this.detailPanel.getQuestionByName(e);if(n&&i){var r=this.isTwoValueEquals(t,s?n.comment:n.value)?i:n;this.isSettingValue=!0,s?r.comment=t:r.value=t,this.isSettingValue=!1}}}updateSharedQuestionsValue(e,t){const s=this.getQuestionsByValueName(e);if(s.length>1)for(let e=0;e<s.length;e++)a.isTwoValueEquals(s[e].value,t)||(this.isSettingValue=!0,s[e].updateValueFromSurvey(t),this.isSettingValue=!1)}runTriggers(e,t,s){(e||s)&&this.questions.forEach(n=>n.runTriggers(e,t,s))}validateCellQuestion(e){if(!e)return!0;if(!e.validateElement(new es({fireCallback:!0,isOnValueChanged:!this.data.isValidateOnValueChanging})))return!1;if(e.isEmpty())return!0;var t=this.getCellByColumnName(e.name);return!(t&&t.column&&t.column.isUnique&&this.data.checkIfValueInRowDuplicated(this,e))}get isEmpty(){var e=this.value;if(a.isValueEmpty(e))return!0;for(var t in e)if(void 0!==e[t]&&null!==e[t])return!1;return!0}hasValueAnyQuestion(e){const t=e?this.visibleQuestions:this.questions;for(let e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}getQuestionByColumn(e){var t=this.getCellByColumn(e);return t?t.question:null}getCellByColumn(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].column==e)return this.cells[t];return null}getCellByColumnName(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].column.name==e)return this.cells[t];return null}getQuestionByColumnName(e){var t=this.getCellByColumnName(e);return t?t.question:null}get questions(){for(var e=[],t=0;t<this.cells.length;t++)e.push(this.cells[t].question);var s=this.detailPanel?this.detailPanel.questions:[];for(t=0;t<s.length;t++)e.push(s[t]);return e}get visibleQuestions(){const e=[];return this.questions.forEach(t=>{t.isVisible&&e.push(t)}),e}getQuestionByName(e){return this.getQuestionByColumnName(e)||(this.detailPanel?this.detailPanel.getQuestionByName(e):null)}getQuestionsByName(e){let t=[],s=this.getQuestionByColumnName(e);return s&&t.push(s),this.detailPanel&&(s=this.detailPanel.getQuestionByName(e),s&&t.push(s)),t}getQuestionsByValueName(e,t){t&&(e=e.toLocaleLowerCase());let s=[];for(var n=0;n<this.cells.length;n++){const i=this.cells[n],r=i.question;if(!r)continue;let a=r.getValueName();t&&(a=a.toLocaleLowerCase()),a===e&&s.push(i.question)}return this.detailPanel&&(s=s.concat(this.detailPanel.getQuestionsByValueName(e,t))),s}getSharedQuestionByName(e){return this.data?this.data.getSharedQuestionByName(e,this):null}clearIncorrectValues(e){for(var t in e){var s=this.getQuestionByName(t);if(s){var n=s.value;s.clearIncorrectValues(),this.isTwoValueEquals(n,s.value)||this.setValue(t,s.value)}else!this.getSharedQuestionByName(t)&&t.indexOf(xt.matrix.totalsSuffix)<0&&this.setValue(t,null)}}getLocale(){return this.data?this.data.getLocale():""}getMarkdownHtml(e,t,s){return this.data?this.data.getMarkdownHtml(e,t,s):void 0}getRenderer(e){return this.data?this.data.getRenderer(e):null}getRendererContext(e){return this.data?this.data.getRendererContext(e):e}getProcessedText(e){return this.data?this.data.getProcessedText(e):e}locStrsChanged(){for(var e=0;e<this.cells.length;e++)this.cells[e].locStrsChanged();this.detailPanel&&this.detailPanel.locStrsChanged()}updateCellQuestionOnColumnChanged(e,t,s){var n=this.getCellByColumn(e);n&&this.updateCellOnColumnChanged(n,t,s)}updateCellQuestionOnColumnItemValueChanged(e,t,s,n,i,r){var a=this.getCellByColumn(e);a&&this.updateCellOnColumnItemValueChanged(a,t,s,n,i,r)}onQuestionReadOnlyChanged(){const e=this.questions;for(var t=0;t<e.length;t++){const s=e[t];s.setPropertyValue("isReadOnly",s.isReadOnly)}if(this.detailPanel){const e=!!this.data&&this.data.isMatrixReadOnly();this.detailPanel.readOnly=e||!this.isRowEnabled()}}validate(e){let t=!0;const s=this.cells;if(!s)return t;for(let n=0;n<s.length;n++){if(!s[n])continue;const i=s[n].question;i&&i.visible&&(e&&!0===e.isOnValueChanged&&i.isEmpty()||(t=i.validateElement(e)&&t))}if(this.hasPanel){this.ensureDetailPanel();const s=this.detailPanel.validateElement(e),n=e;n.hideErroredPanel||s||!e.fireCallback||(n.isSingleDetailPanel&&(n.hideErroredPanel=!0),this.showDetailPanel()),t=s&&t}return t}updateCellOnColumnChanged(e,t,s){"choices"===t&&Array.isArray(s)&&0===s.length&&this.data&&(s=this.data.choices),e.question[t]=s}updateCellOnColumnItemValueChanged(e,t,s,n,i,r){var a=e.question[t];if(Array.isArray(a)){var o="value"===n?r:s.value,l=is.getItemByValue(a,o);l&&(l[n]=i)}}buildCells(e){this.isSettingValue=!0;for(var t=this.data.columns,s=0;s<t.length;s++){var n=t[s],i=this.createCell(n);this.cells.push(i);var r=this.getCellValue(e,n.name);if(!a.isValueEmpty(r)){i.question.value=r;var o=n.name+he.commentSuffix;e&&!a.isValueEmpty(e[o])&&(i.question.comment=e[o])}}this.isSettingValue=!1}isTwoValueEquals(e,t){return a.isTwoValueEquals(e,t,!1,!0,!1)}getCellValue(e,t){return this.editingObj?I.getObjPropertyValue(this.editingObj,t):e?e[t]:void 0}createCell(e){return new Os(e,this,this.data)}getSurveyData(){return this}getSurvey(){return this.data?this.data.getSurvey():null}getTextProcessor(){return this.textPreProcessor}get rowIndex(){return this.getRowIndex()}getRowIndex(){return this.data?this.data.getRowIndex(this)+1:-1}get editingObj(){return this.editingObjValue}dispose(){this.editingObj&&(this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged),this.editingObjValue=null)}subscribeToChanges(e){e&&e.getType&&e.onPropertyChanged&&e!==this.editingObj&&(this.editingObjValue=e,this.onEditingObjPropertyChanged=(e,t)=>{this.updateOnSetValue(t.name,t.newValue)},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))}updateOnSetValue(e,t){this.isSettingValue=!0;let s=this.getQuestionsByName(e);for(let e=0;e<s.length;e++)s[e].value=t;this.isSettingValue=!1}}Ms.idCounter=1;class Fs extends Ms{constructor(e){super(e,null),this.buildCells(null)}createCell(e){return new js(e,this,this.data)}setValue(e,t){this.data&&!this.isSettingValue&&this.data.onTotalValueChanged()}runCondition(e,t){var s,n=0;do{s=a.getUnbindValue(this.value),super.runCondition(e,""),n++}while(!a.isTwoValueEquals(s,this.value)&&n<3)}updateCellOnColumnChanged(e,t,s){e.updateCellQuestion()}}class Bs{constructor(e,t){this.matrix=e,this.row=t}getLocale(){return this.matrix.getLocale()}getMarkdownHtml(e,t,s){return this.matrix.getMarkdownHtml(e,t,s)}getProcessedText(e){return this.matrix.processSingleInputTitle(e,this.row)}getRenderer(e){return this.matrix.getRenderer(e)}getRendererContext(e){return this.matrix.getRendererContext(e)}}class zs extends hs{static get defaultCellType(){return xt.matrix.defaultCellType}static set defaultCellType(e){xt.matrix.defaultCellType=e}static addDefaultColumns(e){for(var t=xs.DefaultColums,s=0;s<t.length;s++)e.addColumn(t[s])}createColumnValues(){return this.createNewArray("columns",e=>{e.colOwner=this,this.onAddColumn&&this.onAddColumn(e),this.survey&&this.survey.matrixColumnAdded(this,e)},e=>{e.colOwner=null,this.onRemoveColumn&&this.onRemoveColumn(e)})}constructor(e){super(e),this.isRowChanging=!1,this.lockResetRenderedTable=!1,this.createItemValues("choices"),this.createLocalizableString("placeholder",this,!1,!0),this.createLocalizableString("keyDuplicationError",this,!1,!0),this.createLocalizableString("singleInputTitleTemplate",new Bs(this),!0,this.getSingleInputTitleTemplate()),this.detailPanelValue=this.createNewDetailPanel(),this.detailPanel.selectedElementInDesign=this,this.detailPanel.renderWidth="100%",this.detailPanel.isInteractiveDesignElement=!1,this.detailPanel.showTitle=!1,this.registerPropertyChangedHandlers(["columns","cellType"],()=>{this.updateColumnsAndRows()}),this.registerPropertyChangedHandlers(["placeholder","columnColCount","rowTitleWidth","choices"],()=>{this.clearRowsAndResetRenderedTable()}),this.registerPropertyChangedHandlers(["transposeData","addRowButtonLocation","hideColumnsIfEmpty","showHeader","minRowCount","isReadOnly","rowCount","hasFooter","detailPanelMode","displayMode"],()=>{this.resetRenderedTable()})}getType(){return"matrixdropdownbase"}dispose(){super.dispose(),this.clearGeneratedRows()}get hasSingleInput(){return!1}get isContainer(){return!0}get isRowsDynamic(){return!1}get isUpdateLocked(){return this.isLoadingFromJson||this.isUpdating}beginUpdate(){this.isUpdating=!0}endUpdate(){this.isUpdating=!1,this.updateColumnsAndRows()}updateColumnsAndRows(){this.updateColumnsIndexes(this.columns),this.updateColumnsCellType(),this.generatedTotalRow=null,this.clearRowsAndResetRenderedTable()}itemValuePropertyChanged(e,t,s,n){super.itemValuePropertyChanged(e,t,s,n),"choices"===e.ownerPropertyName&&this.clearRowsAndResetRenderedTable()}get transposeData(){return this.getPropertyValue("transposeData")}set transposeData(e){this.setPropertyValue("transposeData",e)}get columnLayout(){return this.transposeData?"vertical":"horizontal"}set columnLayout(e){this.transposeData="vertical"===e}get columnsLocation(){return this.columnLayout}set columnsLocation(e){this.columnLayout=e}get detailErrorLocation(){return this.getPropertyValue("detailErrorLocation")}set detailErrorLocation(e){this.setPropertyValue("detailErrorLocation",e.toLowerCase())}get cellErrorLocation(){return this.getPropertyValue("cellErrorLocation")}set cellErrorLocation(e){this.setPropertyValue("cellErrorLocation",e.toLowerCase())}getChildErrorLocation(e){const t=e.parent?this.detailErrorLocation:this.cellErrorLocation;return"default"!==t?t:super.getChildErrorLocation(e)}get isColumnLayoutHorizontal(){return!!this.isMobile||!this.transposeData}get useCaseSensitiveComparison(){return void 0!==this.useCaseSensitiveComparisonValue?this.useCaseSensitiveComparisonValue:xt.comparator.caseSensitive}set useCaseSensitiveComparison(e){this.useCaseSensitiveComparisonValue=e}get isUniqueCaseSensitive(){return this.useCaseSensitiveComparison}set isUniqueCaseSensitive(e){this.useCaseSensitiveComparison=e}get detailPanelMode(){return this.getPropertyValue("detailPanelMode")}set detailPanelMode(e){this.setPropertyValue("detailPanelMode",e)}get detailPanel(){return this.detailPanelValue}getPanel(){return this.detailPanel}get detailElements(){return this.detailPanel.elements}createNewDetailPanel(){return I.createClass("panel")}get hasRowText(){return!0}getFooterText(){return null}get canAddRow(){return!1}get canRemoveRows(){return!1}canRemoveRow(e){return!0}onPointerDown(e,t){}onRowsChanged(){this.clearVisibleRows(),this.resetRenderedTable(),super.onRowsChanged(),this.updateRowsVisibleIndexes()}updateRowsVisibleIndexes(){const e=this.visibleRows;if(!Array.isArray(e))return;const t=xt.expressionVariables.visibleRowIndex,s={};s[t]=0;for(let n=0;n<e.length;n++)e[n].visibleIndex=n,s[t]=n+1,e[n].runTriggers(t,n+1,s)}onStartRowAddingRemoving(){this.lockResetRenderedTable=!0,this.setValueChangedDirectly(!0)}onEndRowAdding(){if(this.lockResetRenderedTable=!1,this.renderedTable)if(this.renderedTable.isRequireReset())this.resetRenderedTable();else{const e=this.visibleRows.length-1;this.renderedTable.onAddedRow(this.visibleRows[e],e)}}onEndRowRemoving(e){this.lockResetRenderedTable=!1,this.renderedTable.isRequireReset()?this.resetRenderedTable():e&&this.renderedTable.onRemovedRow(e)}get renderedTableValue(){return this.getPropertyValue("renderedTable",null)}set renderedTableValue(e){this.setPropertyValue("renderedTable",e)}clearRowsAndResetRenderedTable(){this.clearGeneratedRows(),this.resetRenderedTable(),this.fireCallback(this.columnsChangedCallback)}resetRenderedTable(e){this.renderedTableValue&&(this.lockResetRenderedTable||this.isUpdateLocked?e&&this.renderedTableValue.requireReset():(this.renderedTableValue=null,this.fireCallback(this.onRenderedTableResetCallback)))}clearGeneratedRows(){if(this.clearVisibleRows(),this.generatedVisibleRows){for(var e=0;e<this.generatedVisibleRows.length;e++)this.generatedVisibleRows[e].dispose();super.clearGeneratedRows()}}get isRendredTableCreated(){return!!this.renderedTableValue}get renderedTable(){return this.renderedTableValue||this.isDisposed||(this.renderedTableValue=this.createRenderedTable(),this.onRenderedTableCreatedCallback&&this.onRenderedTableCreatedCallback(this.renderedTableValue)),this.renderedTableValue}createRenderedTable(){return new Ns(this)}getRowByQuestion(e){if(e)return e.data}onMatrixRowCreated(e){if(this.survey)for(var t={rowValue:e.value,row:e,column:null,columnName:null,cell:null,cellQuestion:null,value:null},s=0;s<this.columns.length;s++){t.column=this.columns[s],t.columnName=t.column.name;var n=e.cells[s];t.cell=n,t.cellQuestion=n.question,t.value=n.value,this.onCellCreatedCallback&&this.onCellCreatedCallback(t),this.survey.matrixCellCreated(this,t)}}get cellType(){return this.getPropertyValue("cellType",xt.matrix.defaultCellType)}set cellType(e){e=e.toLowerCase(),this.setPropertyValue("cellType",e)}isSelectCellType(){return I.isDescendantOf(this.cellType,"selectbase")}updateColumnsCellType(){for(var e=0;e<this.columns.length;e++)this.columns[e].defaultCellTypeChanged()}updateColumnsIndexes(e){for(var t=0;t<e.length;t++)e[t].setIndex(t)}get columnColCount(){return this.getPropertyValue("columnColCount")}set columnColCount(e){e<0||e>4||this.setPropertyValue("columnColCount",e)}get horizontalScroll(){return this.getPropertyValue("horizontalScroll")}set horizontalScroll(e){this.setPropertyValue("horizontalScroll",e)}get allowAdaptiveActions(){return this.getPropertyValue("allowAdaptiveActions")}set allowAdaptiveActions(e){this.setPropertyValue("allowAdaptiveActions",e),this.detailPanel&&(this.detailPanel.allowAdaptiveActions=e)}hasChoices(){return this.choices.length>0}onColumnPropertyChanged(e,t,s){if(this.updateHasFooter(),this.generatedVisibleRows){for(var n=0;n<this.generatedVisibleRows.length;n++)this.generatedVisibleRows[n].updateCellQuestionOnColumnChanged(e,t,s);this.generatedTotalRow&&this.generatedTotalRow.updateCellQuestionOnColumnChanged(e,t,s),this.onColumnsChanged(),"isRequired"==t&&this.resetRenderedTable()}}onColumnNestedPropertyChanged(e,t,s,n){if(this.generatedVisibleRows)for(var i=0;i<this.generatedVisibleRows.length;i++){const r=this.generatedVisibleRows[i].getQuestionByColumn(e);r&&r[t]&&(r[t][s]=n)}}onColumnItemValuePropertyChanged(e,t,s,n,i,r){if(this.generatedVisibleRows)for(var a=0;a<this.generatedVisibleRows.length;a++)this.generatedVisibleRows[a].updateCellQuestionOnColumnItemValueChanged(e,t,s,n,i,r)}onShowInMultipleColumnsChanged(e){this.resetTableAndRows()}onColumnVisibilityChanged(e){this.resetTableAndRows()}onColumnCellTypeChanged(e){this.updateDefaultRowValue(e),this.resetTableAndRows()}updateDefaultRowValue(e){let t=this.defaultRowValue;t&&"file"===e.cellType&&t[e.name]&&(delete t[e.name],0===Object.keys(t).length&&(t=void 0),this.defaultRowValue=t)}resetTableAndRows(){this.clearGeneratedRows(),this.resetRenderedTable()}getRowTitleWidth(){return""}get hasFooter(){return this.getPropertyValue("hasFooter",!1)}getAddRowLocation(){return"default"}getShowColumnsIfEmpty(){return!1}updateShowTableAndAddRow(){this.renderedTable&&this.renderedTable.updateShowTableAndAddRow()}updateHasFooter(){this.setPropertyValue("hasFooter",this.hasTotal)}get hasTotal(){for(var e=0;e<this.columns.length;e++)if(this.columns[e].hasTotal)return!0;return!1}getCellType(){return this.cellType}getCustomCellType(e,t,s){if(!this.survey)return s;var n={rowValue:t.value,row:t,column:e,columnName:e.name,cellType:s};return this.survey.matrixCellCreating(this,n),n.cellType}getConditionJson(e=null,t=null){if(!t)return super.getConditionJson(e);let s,n="";for(let e=t.length-1;e>=0&&"."!=t[e];e--)n=t[e]+n;let i=this.getColumnByName(n);return i?s=i.createCellQuestion(null):"none"!==this.detailPanelMode&&(s=this.detailPanel.getQuestionByName(n)),s?s.getConditionJson(e):null}clearIncorrectValues(){if(!Array.isArray(this.visibleRows))return;const e=this.generatedVisibleRows;for(let t=0;t<e.length;t++)e[t].clearIncorrectValues(this.getRowValue(t))}clearErrors(){super.clearErrors(),this.runFuncForCellQuestions(e=>{e.clearErrors()})}localeChanged(){super.localeChanged(),this.runFuncForCellQuestions(e=>{e.localeChanged()})}runFuncForCellQuestions(e){const t=this.generatedVisibleRows;if(t)for(let s=0;s<t.length;s++){const n=t[s];if(n.isVisible)for(let t=0;t<n.cells.length;t++)e(n.cells[t].question)}}runConditionCore(e){super.runConditionCore(e);var t,s=0;do{t=a.getUnbindValue(this.totalValue),this.runCellsCondition(e),this.runTotalsCondition(e),s++}while(!a.isTwoValueEquals(t,this.totalValue)&&s<3);this.updateVisibilityBasedOnRows()}runTriggers(e,t,s){super.runTriggers(e,t,s),this.runFuncForCellQuestions(n=>{n.runTriggers(e,t,s)})}updateElementVisibility(){super.updateElementVisibility();const e=this.generatedVisibleRows;e&&e.forEach(e=>e.updateElementVisibility()),this.updateShowTableAndAddRow()}shouldRunColumnExpression(){return!1}runCellsCondition(e){if(this.isDesignMode)return;const t=this.getExpressionFromSurvey("rowsVisibleIf"),s=this.generatedVisibleRows;if(s)for(var n=0;n<s.length;n++)s[n].runCondition(e,t);this.checkColumnsVisibility(),this.checkColumnsRenderedRequired()}runConditionsForColumns(e){const t=this.getExpressionFromSurvey("columnsVisibleIf");return this.columns.forEach(s=>{if(t){const n=new ae(t);s.isColumnsVisibleIf=!0===n.runContext(s.getValueGetterContext(),e)}else s.isColumnsVisibleIf=!0}),!1}checkColumnsVisibility(){if(!this.isDesignMode){for(var e=!1,t=0;t<this.columns.length;t++){const s=this.columns[t],n=!!s.visibleIf||s.isFilteredMultipleColumns;(n||this.columnsVisibleIf||!s.isColumnVisible)&&(e=this.isColumnVisibilityChanged(s,n)||e)}e&&this.resetRenderedTable(!0)}}checkColumnsRenderedRequired(){const e=this.generatedVisibleRows;if(e)for(var t=0;t<this.columns.length;t++){const n=this.columns[t];if(!n.requiredIf||!n.isColumnVisible)continue;let i=e.length>0;for(var s=0;s<e.length;s++)if(!e[s].cells[t].question.isRequired){i=!1;break}n.updateIsRenderedRequired(i)}}isColumnVisibilityChanged(e,t){const s=e.isColumnVisible;let n=!t;const i=this.generatedVisibleRows,r=t&&i,o=r&&e.isFilteredMultipleColumns,l=o?e.getVisibleChoicesInCell:[],u=new Array;if(r)for(let t=0;t<i.length;t++){const s=i[t].cells[e.index],r=null==s?void 0:s.question;if(r&&r.isVisible){if(n=!0,!o)break;this.updateNewVisibleChoices(r,u)}}return e.hasVisibleCell=n&&e.isColumnsVisibleIf,!(!o||(e.setVisibleChoicesInCell(u),a.isArraysEqual(l,u,!0,!1,!1)))||s!==e.isColumnVisible}updateNewVisibleChoices(e,t){const s=e.visibleChoices;if(Array.isArray(s))for(let e=0;e<s.length;e++){const n=s[e];t.indexOf(n.value)<0&&t.push(n.value)}}runTotalsCondition(e){this.generatedTotalRow&&this.generatedTotalRow.runCondition(e)}IsMultiplyColumn(e){return e.isShowInMultipleColumns&&!this.isMobile}locStrsChanged(){super.locStrsChanged();for(var e=this.columns,t=0;t<e.length;t++)e[t].locStrsChanged();var s=this.generatedVisibleRows;if(s){for(t=0;t<s.length;t++)s[t].locStrsChanged();this.generatedTotalRow&&this.generatedTotalRow.locStrsChanged()}}getColumnByName(e){for(var t=0;t<this.columns.length;t++)if(this.columns[t].name==e)return this.columns[t];return null}getColumnName(e){return this.getColumnByName(e)}getColumnWidth(e){var t;return e.minWidth?e.minWidth:this.columnMinWidth?this.columnMinWidth:(null===(t=xt.matrix.columnWidthsByType[e.cellType])||void 0===t?void 0:t.minWidth)||""}get choices(){return this.getPropertyValue("choices")}set choices(e){this.setPropertyValue("choices",e)}get placeholder(){return this.getLocalizableStringText("placeholder")}set placeholder(e){this.setLocalizableStringText("placeholder",e)}get locPlaceholder(){return this.getLocalizableString("placeholder")}get optionsCaption(){return this.placeholder}set optionsCaption(e){this.placeholder=e}get keyDuplicationError(){return this.getLocalizableStringText("keyDuplicationError")}set keyDuplicationError(e){this.setLocalizableStringText("keyDuplicationError",e)}get locKeyDuplicationError(){return this.getLocalizableString("keyDuplicationError")}get singleInputTitleTemplate(){return this.getLocalizableStringText("singleInputTitleTemplate")}set singleInputTitleTemplate(e){this.setLocalizableStringText("singleInputTitleTemplate",e)}get locSingleInputTitleTemplate(){return this.getLocalizableString("singleInputTitleTemplate")}getSingleQuestionLocTitleCore(){return this.locSingleInputTitleTemplate}getSingleInputTitleTemplate(){return""}processSingleInputTitle(e,t){t||(t=this.getRowByQuestion(this.singleInputQuestion));const s=t?t.getTextProcessor():this.textProcessor;return s?s.processText(e,!0):e}singleInputMoveToFirstCore(){var e;const t=null===(e=this.singleInputQuestion)||void 0===e?void 0:e.data;this.singleInputEditRow(t)}singleInputEditRow(e){if(!e)return;const t=e.visibleQuestions;Array.isArray(t)&&t.length>0&&this.setSingleInputQuestion(t[0])}get storeOthersAsComment(){return!!this.survey&&this.survey.storeOthersAsComment}addColumn(e,t){var s=new Es(e,t,this);return this.columns.push(s),s}clearVisibleRows(){this.visibleRowsArray=null}isColumnVisible(e){return e.isColumnVisible}getVisibleRows(){return this.isUpdateLocked?null:this.isGenereatingRows?[]:(this.visibleRowsArray||(this.generateVisibleRowsIfNeeded(),this.visibleRowsArray=this.getVisibleFromGenerated(this.generatedVisibleRows),this.updateRowsVisibleIndexes()),this.visibleRowsArray)}get allRows(){return this.isGenereatingRows?[]:(this.generateVisibleRowsIfNeeded(),this.generatedVisibleRows)}generateVisibleRowsIfNeeded(){if(!this.isUpdateLocked&&!this.generatedVisibleRows){this.isGenereatingRows=!0,this.generatedVisibleRows=this.generateRows(),this.isGenereatingRows=!1;for(var e=0;e<this.generatedVisibleRows.length;e++){const t=this.generatedVisibleRows[e];t.visibleIndex=e,this.onMatrixRowCreated(t)}this.data&&(this.runCellsCondition(this.data.getFilteredProperties()),this.isValueChangedWithoutRows&&(this.isValueChangedWithoutRows=!1,this.runTriggersOnNewRows())),this.generatedVisibleRows&&(this.updateValueOnRowsGeneration(this.generatedVisibleRows),this.updateIsAnswered())}}runTriggersOnNewRows(){const e=this.value;this.generatedVisibleRows.forEach(t=>{const s=this.getRowValueCore(t,e);if(!a.isValueEmpty(s)){const e=a.createCopyWithPrefix(s,xt.expressionVariables.row+".");t.runTriggers("",void 0,e)}})}getVisibleFromGenerated(e){const t=[];return e?(e.forEach(e=>{e.isVisible&&t.push(e)}),t.length===e.length?e:t):t}updateValueOnRowsGeneration(e){for(var t=this.createNewValue(!0),s=this.createNewValue(),n=0;n<e.length;n++){var i=e[n];if(!i.editingObj){var r=this.getRowValue(n),a=i.value;this.isTwoValueEquals(r,a)||(s=this.getNewValueOnRowChanged(i,"",a,!1,s).value)}}this.isTwoValueEquals(t,s)||(this.isRowChanging=!0,this.setNewValue(s),this.isRowChanging=!1)}get totalValue(){return this.hasTotal&&this.visibleTotalRow?this.visibleTotalRow.value:{}}getVisibleTotalRow(){return this.isUpdateLocked?null:(this.hasTotal?this.generatedTotalRow||(this.generatedTotalRow=this.generateTotalRow(),this.data&&this.runTotalsCondition({survey:this.survey})):this.generatedTotalRow=null,this.generatedTotalRow)}get visibleTotalRow(){return this.getVisibleTotalRow()}onSurveyLoad(){super.onSurveyLoad(),this.updateColumnsIndexes(this.columns),this.clearGeneratedRows(),this.generatedTotalRow=null,this.updateHasFooter()}getRowValue(e){if(e<0||!Array.isArray(this.visibleRows))return null;var t=this.generatedVisibleRows;if(e>=t.length)return null;const s=this.value,n=this.getRowValueCore(t[e],s);return this.isValueSurveyElement(s)?n:a.getUnbindValue(n)}checkIfValueInRowDuplicated(e,t){return!!this.generatedVisibleRows&&this.isValueInColumnDuplicated(t.name,!0,e)}setRowValue(e,t){if(e<0)return null;var s=this.visibleRows;if(e>=s.length)return null;s[e].value=t,this.onRowChanged(s[e],"",t,!1)}generateRows(){return null}generateTotalRow(){return new Fs(this)}createNewValue(e=!1){var t=this.value?this.createValueCopy():{};return e&&this.isMatrixValueEmpty(t)?null:t}getRowValueCore(e,t,s=!1){var n=t&&t[e.rowName]?t[e.rowName]:null;return!n&&s&&(n={},t&&(t[e.rowName]=n)),n}getRowObj(e){var t=this.getRowValueCore(e,this.value);return t&&t.getType?t:null}getRowDisplayValue(e,t,s){if(!s)return s;if(t.editingObj)return s;for(var n=Object.keys(s),i=0;i<n.length;i++){var r=n[i],a=t.getQuestionByName(r);if(a||(a=this.getSharedQuestionByName(r,t)),a){var o=a.getDisplayValue(e,s[r]);e&&a.title&&a.title!==r?(s[a.title]=o,delete s[r]):s[r]=o}}return s}getPlainData(e={includeEmpty:!0}){var t=super.getPlainData(e);if(t){t.isNode=!0;const s=Array.isArray(t.data)?[].concat(t.data):[];t.data=this.visibleRows.map(t=>{var s={name:t.dataName,title:t.text,value:t.value,displayValue:this.getRowDisplayValue(!1,t,t.value),getString:e=>"object"==typeof e?JSON.stringify(e):e,isNode:!0,data:t.cells.map(t=>t.question.getPlainData(e)).filter(e=>!!e)};return(e.calculations||[]).forEach(e=>{s[e.propertyName]=t[e.propertyName]}),s}),t.data=t.data.concat(s)}return t}addConditionObjectsByContext(e,t){let s=[].concat(this.columns);"none"!==this.detailPanelMode&&(s=s.concat(this.detailPanel.questions));const n=!!t&&s.indexOf(t)>-1,i=!0===t||n,r=this.getConditionObjectsRowIndeces();i&&r.push(-1);for(var a=0;a<r.length;a++){const i=r[a],l=i>-1?this.getConditionObjectRowName(i):"row";if(!l)continue;const u=i>-1?this.getConditionObjectRowText(i):"row",d=i>-1||!0===t,h=d&&-1===i?".":"",c=(d?this.getValueName():"")+h+l+".",p=(d?this.processedTitle:"")+h+u+".";for(var o=0;o<s.length;o++){const r=s[o];if(-1===i&&t===r)continue;const a={name:c+r.name,text:p+r.fullTitle,question:this};-1===i&&!0===t?a.context=this:n&&c.startsWith("row.")&&(a.context=t),e.push(a)}}}onHidingContent(){if(super.onHidingContent(),!this.generatedVisibleRows)return;const e=[];this.collectNestedQuestions(e,!0),e.forEach(e=>e.onHidingContent())}getIsReadyNestedQuestions(){if(!this.generatedVisibleRows)return[];const e=new Array;return this.collectNestedQuestonsInRows(this.generatedVisibleRows,e,!1,!0,!1),this.generatedTotalRow&&this.collectNestedQuestonsInRows([this.generatedTotalRow],e,!1,!0,!1),e}collectNestedQuestionsCore(e,t,s,n){n&&e.push(this),this.collectNestedQuestonsInRows(this.visibleRows,e,t,s,n)}collectNestedQuestonsInRows(e,t,s,n,i){Array.isArray(e)&&e.forEach(e=>{e.questions.forEach(e=>e.addNestedQuestion(t,s,n,i))})}getConditionObjectRowName(e){return""}getConditionObjectRowText(e){return this.getConditionObjectRowName(e)}getConditionObjectsRowIndeces(){return[]}getProgressInfo(){if(this.getIsRequireToGenerateRows()&&this.generateVisibleRowsIfNeeded(),this.generatedVisibleRows)return We.getProgressInfoByElements(this.getCellQuestions(),this.isRequired);const e=he.createProgressInfo();return this.updateProgressInfoByValues(e),0===e.requiredQuestionCount&&this.isRequired&&(e.requiredQuestionCount=1,e.requiredAnsweredQuestionCount=this.isEmpty()?0:1),e}getIsRequireToGenerateRows(){return!!this.rowsVisibleIf}updateProgressInfoByValues(e){}updateProgressInfoByRow(e,t){for(var s=0;s<this.columns.length;s++){const n=this.columns[s];if(!n.templateQuestion.hasInput)continue;const i=!a.isValueEmpty(t[n.name]);!i&&n.templateQuestion.visibleIf||(e.questionCount+=1,e.requiredQuestionCount+=n.isRequired,e.answeredQuestionCount+=i?1:0,e.requiredAnsweredQuestionCount+=i&&n.isRequired?1:0)}}getCellQuestions(){const e=[];return this.runFuncForCellQuestions(t=>{e.push(t)}),e}onBeforeValueChanged(e){}onSetQuestionValue(){if(!this.isRowChanging&&(this.onBeforeValueChanged(this.value),this.generatedVisibleRows&&0!=this.generatedVisibleRows.length)){this.isRowChanging=!0;for(var e=this.createNewValue(),t=0;t<this.generatedVisibleRows.length;t++){var s=this.generatedVisibleRows[t];this.generatedVisibleRows[t].value=this.getRowValueCore(s,e)}this.isRowChanging=!1}}setQuestionValue(e){super.setQuestionValue(e,!1),this.onSetQuestionValue(),this.updateIsAnswered()}supportAutoAdvance(){var e=this.generatedVisibleRows;if(e||(e=this.visibleRows),!e)return!0;for(var t=0;t<e.length;t++){var s=this.generatedVisibleRows[t].cells;if(s)for(var n=0;n<s.length;n++){var i=s[n].question;if(i&&(!i.supportAutoAdvance()||!i.value))return!1}}return!0}getContainsErrors(){return super.getContainsErrors()||this.checkForAnswersOrErrors(e=>e.containsErrors,!1)}getIsAnswered(){return super.getIsAnswered()&&this.checkForAnswersOrErrors(e=>e.isAnswered,!0)}checkForAnswersOrErrors(e,t=!1){var s=this.generatedVisibleRows;if(!s)return!1;for(var n=0;n<s.length;n++){var i=s[n].cells;if(i)for(var r=0;r<i.length;r++)if(i[r]){var a=i[r].question;if(a&&a.isVisible)if(e(a)){if(!t)return!0}else if(t)return!1}}return!!t}validateElementCore(e){const t=this.validateRows(e),s=this.isValueDuplicated(e);return super.validateElementCore(e)&&t&&!s}getIsRunningValidators(){if(super.getIsRunningValidators())return!0;if(!this.generatedVisibleRows)return!1;for(var e=0;e<this.generatedVisibleRows.length;e++){var t=this.generatedVisibleRows[e].cells;if(t)for(var s=0;s<t.length;s++)if(t[s]){var n=t[s].question;if(n&&n.isRunningValidators)return!0}}return!1}getAllErrors(){var e=super.getAllErrors(),t=this.generatedVisibleRows;if(null===t)return e;for(var s=0;s<t.length;s++)for(var n=t[s],i=0;i<n.cells.length;i++){var r=n.cells[i].question.getAllErrors();r&&r.length>0&&(e=e.concat(r))}return e}validateRows(e){let t=this.generatedVisibleRows;t||(t=this.visibleRows);var s=!0;e.isSingleDetailPanel="underRowSingle"===this.detailPanelMode;for(var n=0;n<t.length;n++)t[n].isVisible&&(s=t[n].validate(e)&&s);return s}isValueDuplicated(e){if(!this.generatedVisibleRows)return!1;for(var t=this.getUniqueColumnsNames(),s=!1,n=0;n<t.length;n++){const i=this.getDuplicatedRowAndShowErrors(t[n],!0);i&&i.length>0&&(e.setErrorElement(i[0].getQuestionByColumnName(t[n])),s=!0)}return s}getUniqueColumnsNames(){for(var e=new Array,t=0;t<this.columns.length;t++)this.columns[t].isUnique&&e.push(this.columns[t].name);return e}isValueInColumnDuplicated(e,t,s){const n=this.getDuplicatedRowAndShowErrors(e,t,s);return s?n.indexOf(s)>-1:n.length>0}getDuplicatedRowAndShowErrors(e,t,s){const n=this.getDuplicatedRows(e);return t&&this.showDuplicatedErrorsInRows(n,e),this.removeDuplicatedErrorsInRows(n,e),n}getDuplicatedRows(e){const t={},s=[],n=this.generatedVisibleRows;for(var i=0;i<n.length;i++){let s;const r=n[i].getQuestionByName(e);if(r)s=r.value;else{const t=this.getRowValue(i);s=t?t[e]:void 0}this.isValueEmpty(s)||(this.useCaseSensitiveComparison||"string"!=typeof s||(s=s.toLocaleLowerCase()),t[s]||(t[s]=[]),t[s].push(n[i]))}for(let e in t)t[e].length>1&&t[e].forEach(e=>s.push(e));return s}showDuplicatedErrorsInRows(e,t){e.forEach(e=>{let s=e.getQuestionByName(t);const n=this.detailPanel.getQuestionByName(t);!s&&n&&(e.showDetailPanel(),e.detailPanel&&(s=e.detailPanel.getQuestionByName(t))),s&&(n&&e.showDetailPanel(),this.addDuplicationError(s))})}removeDuplicatedErrorsInRows(e,t){this.generatedVisibleRows.forEach(s=>{if(e.indexOf(s)<0){const e=s.getQuestionByName(t);e&&this.removeDuplicationError(s,e)}})}getDuplicationError(e){const t=e.errors;for(let e=0;e<t.length;e++)if("keyduplicationerror"===t[e].getErrorType())return t[e];return null}addDuplicationError(e){this.getDuplicationError(e)||e.addError(new Nt(this.keyDuplicationError,this))}removeDuplicationError(e,t){t.removeError(this.getDuplicationError(t))&&0===t.errors.length&&e.editingObj&&(e.editingObj[t.getValueName()]=t.value)}getFirstQuestionToFocus(e){return this.getFirstCellQuestion(e)}getFirstInputElementId(){var e=this.getFirstCellQuestion(!1);return e?e.inputId:super.getFirstInputElementId()}getFirstErrorInputElementId(){var e=this.getFirstCellQuestion(!0);return e?e.inputId:super.getFirstErrorInputElementId()}getFirstCellQuestion(e){if(!this.generatedVisibleRows)return null;for(var t=0;t<this.generatedVisibleRows.length;t++)for(var s=this.generatedVisibleRows[t].cells,n=0;n<s.length;n++){if(!e)return s[n].question;if(s[n].question.currentErrorCount>0)return s[n].question}return null}onReadOnlyChanged(){if(super.onReadOnlyChanged(),this.generateRows)for(var e=0;e<this.visibleRows.length;e++)this.visibleRows[e].onQuestionReadOnlyChanged()}createQuestion(e,t){return this.createQuestionCore(e,t)}createQuestionCore(e,t){var s=t.createCellQuestion(e);return s.setSurveyImpl(e),s.setParentQuestion(this),s.inMatrixMode=!0,s}deleteRowValue(e,t){return e?(delete e[t.rowName],this.isObject(e)&&0==Object.keys(e).length?null:e):e}onAnyValueChanged(e,t){if(!this.isUpdateLocked&&!this.isDoingonAnyValueChanged)if(this.generatedVisibleRows){this.isDoingonAnyValueChanged=!0;for(var s=this.generatedVisibleRows,n=0;n<s.length;n++)s[n].onAnyValueChanged(e,t);var i=this.visibleTotalRow;i&&i.onAnyValueChanged(e,t),this.isDoingonAnyValueChanged=!1}else e===this.getValueName()&&(this.isValueChangedWithoutRows=!0)}isObject(e){return null!==e&&"object"==typeof e}getOnCellValueChangedOptions(e,t,s){return{row:e,columnName:t,rowValue:s,value:s?s[t]:null,getCellQuestion:t=>e.getQuestionByName(t),cellQuestion:e.getQuestionByName(t),column:this.getColumnByName(t)}}onCellValueChanged(e,t,s){if(this.survey){var n=this.getOnCellValueChangedOptions(e,t,s);this.onCellValueChangedCallback&&this.onCellValueChangedCallback(n),this.survey.matrixCellValueChanged(this,n)}}validateCell(e,t,s){if(this.survey){var n=this.getOnCellValueChangedOptions(e,t,s);return this.survey.matrixCellValidate(this,n)}}get isValidateOnValueChanging(){return!!this.survey&&this.survey.isValidateOnValueChanging}get hasInvisibleRows(){const e=this.generatedVisibleRows;if(!Array.isArray(e))return!1;for(let t=0;t<e.length;t++)if(!e[t].isVisible)return!0;return!1}getFilteredData(){return this.isEmpty()||!this.generatedVisibleRows||this.isEditingSurveyElement?this.value:this.getFilteredDataCore()}getFilteredDataCore(){return this.value}onRowChanging(e,t,s){if(!this.survey&&!this.cellValueChangingCallback)return s?s[t]:null;var n=this.getOnCellValueChangedOptions(e,t,s),i=this.getRowValueCore(e,this.createNewValue(),!0);return n.oldValue=i?i[t]:null,this.cellValueChangingCallback&&(n.value=this.cellValueChangingCallback(e,t,n.value,n.oldValue)),this.survey&&this.survey.matrixCellValueChanging(this,n),n.value}getSharedQuestionFromArray(e,t){return this.survey&&this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,t):null}onRowChanged(e,t,s,n){var i=t?this.getRowObj(e):null;if(i){var r=null;s&&!n&&(r=s[t]),this.isRowChanging=!0,I.setObjPropertyValue(i,t,r),this.isRowChanging=!1,this.onCellValueChanged(e,t,i)}else{var a=this.createNewValue(!0),o=this.getNewValueOnRowChanged(e,t,s,n,this.createNewValue());if(this.isTwoValueEquals(a,o.value))return;this.isRowChanging=!0,this.setNewValue(o.value),this.isRowChanging=!1,t&&this.onCellValueChanged(e,t,o.rowValue)}this.getUniqueColumnsNames().indexOf(t)>-1&&this.isValueInColumnDuplicated(t,!!i)}getNewValueOnRowChanged(e,t,s,n,i){const r=this.getRowValueCore(e,i,!0);if(n&&delete r[t],e.questions.forEach(e=>{delete r[e.getValueName()]}),s)for(var a in s=JSON.parse(JSON.stringify(s)))this.isValueEmpty(s[a])||(r[a]=s[a]);return this.isObject(r)&&0===Object.keys(r).length&&(i=this.deleteRowValue(i,e)),{value:i=this.correctValueForMinMaxRows(i),rowValue:r}}correctValueForMinMaxRows(e){return e}getRowIndex(e){return Array.isArray(this.generatedVisibleRows)?this.generatedVisibleRows.indexOf(e):-1}getElementsInDesign(e=!1){let t;return t="none"==this.detailPanelMode?super.getElementsInDesign(e):e?[this.detailPanel]:this.detailElements,this.columns.concat(t)}hasDetailPanel(e){return"none"!=this.detailPanelMode&&(!!this.isDesignMode||(this.onHasDetailPanelCallback?this.onHasDetailPanelCallback(e):this.detailElements.length>0))}getIsDetailPanelShowing(e){if("none"==this.detailPanelMode)return!1;if(this.isDesignMode){var t=0==this.visibleRows.indexOf(e);return t&&(e.detailPanel||e.showDetailPanel()),t}return this.getPropertyValue("isRowShowing"+e.id,!1)}setIsDetailPanelShowing(e,t){if(t!=this.getIsDetailPanelShowing(e)&&(this.setPropertyValue("isRowShowing"+e.id,t),this.updateDetailPanelButtonCss(e),this.renderedTable&&this.renderedTable.onDetailPanelChangeVisibility(e,t),this.survey&&this.survey.matrixDetailPanelVisibleChanged(this,e.rowIndex-1,e,t),t&&"underRowSingle"===this.detailPanelMode))for(var s=this.visibleRows,n=0;n<s.length;n++)s[n].id!==e.id&&s[n].isDetailPanelShowing&&s[n].hideDetailPanel()}getDetailPanelButtonCss(e){const t=(new fe).append(this.getPropertyValue("detailButtonCss"+e.id));return t.append(this.cssClasses.detailButton,""===t.toString()).toString()}getDetailPanelIconCss(e){const t=(new fe).append(this.getPropertyValue("detailIconCss"+e.id));return t.append(this.cssClasses.detailIcon,""===t.toString()).toString()}getDetailPanelIconId(e){return this.getIsDetailPanelShowing(e)?this.cssClasses.detailIconExpandedId:this.cssClasses.detailIconId}updateDetailPanelButtonCss(e){const t=this.cssClasses,s=this.getIsDetailPanelShowing(e),n=(new fe).append(t.detailIcon).append(t.detailIconExpanded,s);this.setPropertyValue("detailIconCss"+e.id,n.toString());const i=(new fe).append(t.detailButton).append(t.detailButtonExpanded,s);this.setPropertyValue("detailButtonCss"+e.id,i.toString())}createRowDetailPanel(e){if(this.isDesignMode)return this.detailPanel;var t=this.createNewDetailPanel();t.readOnly=this.isReadOnly||!e.isRowEnabled(),t.setSurveyImpl(e);var s=this.detailPanel.toJSON();return(new V).toObject(s,t),t.renderWidth="100%",t.updateCustomWidgets(),this.onCreateDetailPanelCallback&&this.onCreateDetailPanelCallback(e,t),t.questions.forEach(e=>e.setParentQuestion(this)),t.onSurveyLoad(),t}getSharedQuestionByName(e,t){if(!this.survey||!this.valueName)return null;var s=this.getRowIndex(t);return s<0?null:this.survey.getQuestionByValueNameFromArray(this.valueName,e,s)}runTriggersInRow(e,t,s){if(this.survey&&this.valueName){var n=this.getRowIndex(e);n<0||this.survey.getQuestionsByValueName(this.valueName).forEach(e=>{const i=e.visibleRows;Array.isArray(i)&&n<i.length&&i[0]instanceof Ms&&i[n].runTriggers(t,s)})}}onTotalValueChanged(){this.data&&this.visibleTotalRow&&!this.isUpdateLocked&&!this.isSett&&this.data.setValue(this.getValueName()+xt.matrix.totalsSuffix,this.totalValue,!1)}getParentTextProcessor(){if(!this.parentQuestion||!this.parent)return null;const e=this.parent.data;return e&&e.getTextProcessor?e.getTextProcessor():null}isMatrixReadOnly(){return this.isReadOnly}onRowVisibilityChanged(e){this.clearVisibleRows(),this.resetRenderedTable(),this.resetSingleInput()}clearValueIfInvisibleCore(e){super.clearValueIfInvisibleCore(e),this.clearInvisibleValuesInRows()}clearInvisibleValuesInRows(){var e;!this.isEmpty()&&this.isRowsFiltered()&&((null===(e=this.survey)||void 0===e?void 0:e.questionsByValueName(this.getValueName()))||[]).length<2&&(this.value=this.getFilteredData())}isRowsFiltered(){return this.visibleRows!==this.generatedVisibleRows}getQuestionFromArray(e,t){return t>=this.visibleRows.length?null:this.visibleRows[t].getQuestionByName(e)}isMatrixValueEmpty(e){if(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(this.isObject(e[t])&&Object.keys(e[t]).length>0)return!1;return!0}return 0==Object.keys(e).length}}get SurveyModel(){return this.survey}getCellTemplateData(e){return this.SurveyModel.getMatrixCellTemplateData(e)}getCellWrapperComponentName(e){return this.SurveyModel.getElementWrapperComponentName(e,e.row instanceof Fs?"row-footer":"cell")}getCellWrapperComponentData(e){return this.SurveyModel.getElementWrapperComponentData(e,e.row instanceof Fs?"row-footer":"cell")}getColumnHeaderWrapperComponentName(e){return this.SurveyModel.getElementWrapperComponentName(e,"column-header")}getColumnHeaderWrapperComponentData(e){return this.SurveyModel.getElementWrapperComponentData(e,"column-header")}getRowHeaderWrapperComponentName(e){return this.SurveyModel.getElementWrapperComponentName(e,"row-header")}getRowHeaderWrapperComponentData(e){return this.SurveyModel.getElementWrapperComponentData(e,"row-header")}onMobileChanged(){super.onMobileChanged(),this.resetRenderedTable()}getRootCss(){return(new fe).append(super.getRootCss()).append(this.cssClasses.rootScroll,this.horizontalScroll).toString()}afterRenderQuestionElement(e){super.afterRenderQuestionElement(e),this.setRootElement(null==e?void 0:e.parentElement)}beforeDestroyQuestionElement(e){super.beforeDestroyQuestionElement(e),this.setRootElement(void 0)}setRootElement(e){this.rootElement=e}getRootElement(){return this.rootElement}}I.addClass("matrixdropdownbase",[{name:"columns:matrixdropdowncolumns",uniqueProperty:"name",className:"matrixdropdowncolumn",isArray:!0},{name:"columnLayout",alternativeName:"columnsLocation",choices:["horizontal","vertical"],visible:!1,isSerializable:!1},{name:"transposeData:boolean",version:"1.9.130",oldName:"columnLayout"},{name:"detailElements",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"detailPanelMode",choices:["none","underRow","underRowSingle"],default:"none"},{name:"cellErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"detailErrorLocation",default:"default",choices:["default","top","bottom"],visibleIf:e=>!!e&&"none"!=e.detailPanelMode},{name:"horizontalScroll:boolean",visible:!1},{name:"choices:itemvalue[]",uniqueProperty:"value",visibleIf:e=>e.isSelectCellType()},{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"singleInputTitleTemplate",serializationProperty:"locSingleInputTitleTemplate",visibleIf(e){var t;return"inputPerPage"===(null===(t=e.survey)||void 0===t?void 0:t.questionsOnPageMode)}},{name:"cellType",default:"dropdown",choices:()=>Es.getColumnTypes()},{name:"columnColCount",default:0,choices:[0,1,2,3,4]},"columnMinWidth",{name:"allowAdaptiveActions:boolean",default:!1,visible:!1}],function(){return new zs("")},"matrixbase");class Hs extends P{constructor(e){super(),this.question=e}getValue(e,t,s,n){if(!n&&this.question.isEmpty())return{isFound:0===e.length,value:void 0};if(e.length>0){const i=super.getValue(e,t,s,n);if(i&&i.isFound)return i}return new T(this.question.value).getValue(e,t,s,n)}getRootObj(){return this.question.data}updateValueByItem(e,t){var s;const n=this.question.visibleRows;e=e.toLocaleLowerCase();for(let i=0;i<n.length;i++){const r=n[i];if(((null===(s=r.rowName)||void 0===s?void 0:s.toString())||"").toLocaleLowerCase()===e)return t.isFound=!0,void(t.context=r.getValueGetterContext())}}}class Qs extends Ms{constructor(e,t,s,n){super(s,n),this.name=e,this.item=t,this.buildCells(n)}get rowName(){return this.name}get rowTitle(){return this.text}get text(){return this.item.text}get locText(){return this.item.locText}isItemVisible(){return this.item.isVisible}isRowEnabled(){return this.item.isEnabled}isRowHasEnabledCondition(){return!!this.item.enableIf}}class Us extends zs{constructor(e){super(e),this.defaultValuesInRows={},this.createLocalizableString("totalText",this,!0),this.registerPropertyChangedHandlers(["rows"],()=>{this.generatedVisibleRows&&(this.clearGeneratedRows(),this.resetRenderedTable(),this.getVisibleRows(),this.clearIncorrectValues())}),this.registerPropertyChangedHandlers(["hideIfRowsEmpty"],()=>{this.updateVisibilityBasedOnRows()})}getType(){return"matrixdropdown"}get totalText(){return this.getLocalizableStringText("totalText","")}set totalText(e){this.setLocalizableStringText("totalText",e)}get locTotalText(){return this.getLocalizableString("totalText")}getFooterText(){return this.locTotalText}getRowTitleWidth(){return this.rowTitleWidth}get hideIfRowsEmpty(){return this.getPropertyValue("hideIfRowsEmpty")}set hideIfRowsEmpty(e){this.setPropertyValue("hideIfRowsEmpty",e)}getSingleInputTitleTemplate(){return"rowNameTemplateTitle"}getValueGetterContext(){return new Hs(this)}getDisplayValueCore(e,t){if(!t)return t;var s=this.visibleRows,n={};if(!s)return n;for(var i=0;i<s.length;i++){var r=s[i].rowName,a=t[r];if(a){if(e){var o=is.getTextOrHtmlByValue(this.rows,r);o&&(r=o)}n[r]=this.getRowDisplayValue(e,s[i],a)}}return n}getConditionObjectRowName(e){return"."+this.rows[e].value}getConditionObjectRowText(e){return"."+this.rows[e].calculatedText}getConditionObjectsRowIndeces(){const e=[];for(var t=0;t<this.rows.length;t++)e.push(t);return e}isNewValueCorrect(e){return a.isValueObject(e,!0)}clearIncorrectValues(){if(!this.isEmpty()){this.getVisibleRows();const e={},t=this.value;for(let s in t){const n=this.getRowByKey(s);n&&n.isVisible&&(e[s]=t[s])}this.value=e}super.clearIncorrectValues()}getRowByKey(e){const t=this.generatedVisibleRows;if(!t)return null;for(let s=0;s<t.length;s++)if(t[s].rowName===e)return t[s];return null}clearGeneratedRows(){this.generatedVisibleRows&&(this.isDisposed||this.generatedVisibleRows.forEach(e=>{this.defaultValuesInRows[e.rowName]=e.getNamesWithDefaultValues()}),super.clearGeneratedRows())}getRowValueForCreation(e,t){const s=e[t];if(!s)return s;const n=this.defaultValuesInRows[t];return Array.isArray(n)&&0!==n.length?(n.forEach(e=>{delete s[e]}),s):s}generateRows(){var e=new Array,t=this.rows;if(!t||0===t.length)return e;var s=this.value;s||(s={});for(var n=0;n<t.length;n++){const i=t[n];this.isValueEmpty(i.value)||e.push(this.createMatrixRow(i,this.getRowValueForCreation(s,i.value)))}return e}createMatrixRow(e,t){return new Qs(e.value,e,this,t)}getFilteredDataCore(){const e={};return this.generatedVisibleRows.forEach(t=>{t.isVisible&&!t.isEmpty&&(e[t.rowName]=t.filteredValue)}),e}getSearchableItemValueKeys(e){e.push("rows")}getIsRequireToGenerateRows(){if(super.getIsRequireToGenerateRows())return!0;for(let e=0;e<this.rows.length;e++)if(this.rows[e].visibleIf)return!0;return!1}updateProgressInfoByValues(e){let t=this.value;t||(t={});for(var s=0;s<this.rows.length;s++){const n=t[this.rows[s].value];this.updateProgressInfoByRow(e,n||{})}}}I.addClass("matrixdropdown",[{name:"rows:itemvalue[]",uniqueProperty:"value"},"rowsVisibleIf:condition","rowTitleWidth",{name:"totalText",serializationProperty:"locTotalText"},"hideIfRowsEmpty:boolean"],function(){return new Us("")},"matrixdropdownbase"),xs.Instance.registerQuestion("matrixdropdown",e=>{var t=new Us(e);return t.choices=[1,2,3,4,5],t.rows=xs.DefaultRows,zs.addDefaultColumns(t),t}),"undefined"!=typeof window&&window.addEventListener("touchmove",e=>{Ws.PreventScrolling&&e.preventDefault()},{passive:!1});class Ws{constructor(e,t=!0,s=!1){this.dd=e,this.longTap=t,this.fitToContainer=s,this.scrollIntervalId=null,this.stopLongTapIfMoveEnough=e=>{e.preventDefault(),this.currentX=e.pageX,this.currentY=e.pageY,this.isMicroMovement||(this.returnUserSelectBack(),this.stopLongTap())},this.stopLongTap=e=>{clearTimeout(this.timeoutID),this.timeoutID=null,document.removeEventListener("pointerup",this.stopLongTap),document.removeEventListener("pointermove",this.stopLongTapIfMoveEnough)},this.handlePointerCancel=e=>{this.clear()},this.handleEscapeButton=e=>{27==e.keyCode&&this.clear()},this.onContextMenu=e=>{e.preventDefault(),e.stopPropagation()},this.dragOver=e=>{this.moveShortcutElement(e),this.draggedElementShortcut.style.cursor="grabbing",this.dd.dragOver(e)},this.clear=()=>{cancelAnimationFrame(this.scrollIntervalId),document.removeEventListener("pointermove",this.dragOver),document.removeEventListener("pointercancel",this.handlePointerCancel),document.removeEventListener("keydown",this.handleEscapeButton),document.removeEventListener("pointerup",this.drop),this.draggedElementShortcut.removeEventListener("pointerup",this.drop),Pe&&this.draggedElementShortcut.removeEventListener("contextmenu",this.onContextMenu),this.draggedElementShortcut.parentElement.removeChild(this.draggedElementShortcut),this.dd.clear(),this.draggedElementShortcut=null,this.scrollIntervalId=null,Pe&&(this.savedTargetNode.style.cssText=null,this.savedTargetNode&&this.savedTargetNode.parentElement.removeChild(this.savedTargetNode),this.insertNodeToParentAtIndex(this.savedTargetNodeParent,this.savedTargetNode,this.savedTargetNodeIndex),Ws.PreventScrolling=!1),this.savedTargetNode=null,this.savedTargetNodeParent=null,this.savedTargetNodeIndex=null,this.returnUserSelectBack()},this.drop=()=>{this.dd.drop(),this.clear()},this.draggedElementShortcut=null}get documentOrShadowRoot(){const e=this.rootElement.getRootNode();return e instanceof Document||e instanceof ShadowRoot?e:void 0}get rootElement(){return $e(xt.environment.root)?this.rootContainer||xt.environment.root:this.rootContainer||xt.environment.root.documentElement||document.body}get viewRootElement(){return $e(this.rootElement)?this.rootElement.host:this.rootElement}get isMicroMovement(){const e=Math.abs(this.currentX-this.startX),t=Math.abs(this.currentY-this.startY);return e<5&&t<5}startLongTapProcessing(e,t,s,n,i=!1){this.startX=e.pageX,this.startY=e.pageY,document.body.style.setProperty("touch-action","none","important"),this.timeoutID=setTimeout(()=>{this.doStartDrag(e,t,s,n),i||(this.savedTargetNode=e.target,this.savedTargetNode.style.cssText="\n          position: absolute;\n          height: 1px!important;\n          width: 1px!important;\n          overflow: hidden;\n          clip: rect(1px 1px 1px 1px);\n          clip: rect(1px, 1px, 1px, 1px);\n        ",this.savedTargetNodeParent=this.savedTargetNode.parentElement,this.savedTargetNodeIndex=this.getNodeIndexInParent(this.savedTargetNode),this.rootElement.appendChild(this.savedTargetNode)),this.stopLongTap()},this.longTap?500:0),document.addEventListener("pointerup",this.stopLongTap),document.addEventListener("pointermove",this.stopLongTapIfMoveEnough)}moveShortcutElement(e){let t=this.viewRootElement.getBoundingClientRect().x,s=this.viewRootElement.getBoundingClientRect().y,n=this.viewRootElement.scrollLeft,i=this.viewRootElement.scrollTop;this.doScroll(e.clientY,e.clientX);const r=this.draggedElementShortcut.offsetHeight,a=this.draggedElementShortcut.offsetWidth;let o=this.draggedElementShortcut.shortcutXOffset||a/2,l=this.draggedElementShortcut.shortcutYOffset||r/2;0!==document.querySelectorAll("[dir='rtl']").length&&(o=a/2,l=r/2);const u=document.documentElement.clientHeight,d=document.documentElement.clientWidth,h=e.pageX,c=e.pageY,p=e.clientX,g=e.clientY;t-=n,s-=i;const m=this.getShortcutBottomCoordinate(g,r,l);return this.getShortcutRightCoordinate(p,a,o)>=d?(this.draggedElementShortcut.style.left=d-a-t+"px",void(this.draggedElementShortcut.style.top=g-l-s+"px")):p-o<=0?(this.draggedElementShortcut.style.left=h-p-t+"px",void(this.draggedElementShortcut.style.top=g-s-l+"px")):m>=u?(this.draggedElementShortcut.style.left=p-o-t+"px",void(this.draggedElementShortcut.style.top=u-r-s+"px")):g-l<=0?(this.draggedElementShortcut.style.left=p-o-t+"px",void(this.draggedElementShortcut.style.top=c-g-s+"px")):(this.draggedElementShortcut.style.left=p-t-o+"px",void(this.draggedElementShortcut.style.top=g-s-l+"px"))}getShortcutBottomCoordinate(e,t,s){return e+t-s}getShortcutRightCoordinate(e,t,s){return e+t-s}requestAnimationFrame(e){return requestAnimationFrame(e)}scrollByDrag(e,t,s){const n=100;let i,r,a,o;"HTML"===e.tagName?(i=0,r=document.documentElement.clientHeight,a=0,o=document.documentElement.clientWidth):(i=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom,a=e.getBoundingClientRect().left,o=e.getBoundingClientRect().right);const l=()=>{const u=t-i<=n,d=r-t<=n,h=s-a<=n,c=o-s<=n;!u||h||c?!d||h||c?!c||u||d?!h||u||d||(e.scrollLeft-=15):e.scrollLeft+=15:e.scrollTop+=15:e.scrollTop-=15,this.scrollIntervalId=this.requestAnimationFrame(l)};this.scrollIntervalId=this.requestAnimationFrame(l)}doScroll(e,t){cancelAnimationFrame(this.scrollIntervalId);const s=this.draggedElementShortcut.style.display;this.draggedElementShortcut.style.display="none";let n=this.documentOrShadowRoot.elementFromPoint(t,e);this.draggedElementShortcut.style.display=s||"block";let i=Xe(n);this.scrollByDrag(i,e,t)}doStartDrag(e,t,s,n){Pe&&(Ws.PreventScrolling=!0),3!==e.which&&(this.dd.dragInit(e,t,s,n),this.rootElement.append(this.draggedElementShortcut),this.moveShortcutElement(e),document.addEventListener("pointermove",this.dragOver),document.addEventListener("pointercancel",this.handlePointerCancel),document.addEventListener("keydown",this.handleEscapeButton),document.addEventListener("pointerup",this.drop),Pe?this.draggedElementShortcut.addEventListener("contextmenu",this.onContextMenu):this.draggedElementShortcut.addEventListener("pointerup",this.drop))}returnUserSelectBack(){document.body.style.setProperty("touch-action","auto"),document.body.style.setProperty("user-select","auto"),document.body.style.setProperty("-webkit-user-select","auto")}startDrag(e,t,s,n,i=!1){document.body.style.setProperty("user-select","none","important"),document.body.style.setProperty("-webkit-user-select","none","important"),Pe?this.startLongTapProcessing(e,t,s,n,i):this.doStartDrag(e,t,s,n)}getNodeIndexInParent(e){return[...e.parentElement.childNodes].indexOf(e)}insertNodeToParentAtIndex(e,t,s){e.insertBefore(t,e.childNodes[s])}}Ws.PreventScrolling=!1;class Gs{get isBottom(){return!!this._isBottom}set isBottom(e){this._isBottom=e,this.ghostPositionChanged()}ghostPositionChanged(){this.onGhostPositionChanged.fire({},{})}get dropTargetDataAttributeName(){return`[data-sv-drop-target-${this.draggedElementType}]`}get survey(){var e;return this.surveyValue||(null===(e=this.creator)||void 0===e?void 0:e.survey)}constructor(e,t,s,n){var i;this.surveyValue=e,this.creator=t,this._isBottom=null,this.onGhostPositionChanged=new ge,this.onDragStart=new ge,this.onDragEnd=new ge,this.onDragClear=new ge,this.onBeforeDrop=this.onDragStart,this.onAfterDrop=this.onDragEnd,this.draggedElement=null,this.dropTarget=null,this.prevDropTarget=null,this.allowDropHere=!1,this.banDropHere=()=>{this.allowDropHere=!1,this.doBanDropHere(),this.dropTarget=null,this.domAdapter.draggedElementShortcut.style.cursor="not-allowed",this.isBottom=null},this.doBanDropHere=()=>{},this.domAdapter=n||new Ws(this,s,null===(i=this.survey)||void 0===i?void 0:i.fitToContainer)}startDrag(e,t,s,n,i=!1){this.domAdapter.rootContainer=this.getRootElement(this.survey,this.creator),this.domAdapter.startDrag(e,t,s,n,i)}getRootElement(e,t){return t?t.rootElement:e.rootElement}dragInit(e,t,s,n){this.draggedElement=t,this.parentElement=s;const i=this.getShortcutText(this.draggedElement);this.domAdapter.draggedElementShortcut=this.createDraggedElementShortcut(i,n,e),this.onStartDrag(e);const r=this.draggedElement&&this.draggedElement.parent;this.onDragStart.fire(this,{fromElement:r,draggedElement:this.draggedElement})}onStartDrag(e){}isDropTargetDoesntChanged(e){return this.dropTarget===this.prevDropTarget&&e===this.isBottom}getShortcutText(e){return null==e?void 0:e.shortcutText}createDraggedElementShortcut(e,t,s){const n=i.createElement("div");return n&&(n.innerText=e,n.className=this.getDraggedElementClass()),n}getDraggedElementClass(){return"sv-dragged-element-shortcut"}doDragOver(){}afterDragOver(e){}findDropTargetNodeFromPoint(e,t){const s=this.domAdapter.draggedElementShortcut.style.display;if(this.domAdapter.draggedElementShortcut.style.display="none",!i.isAvailable())return null;let n=this.domAdapter.documentOrShadowRoot.elementsFromPoint(e,t);this.domAdapter.draggedElementShortcut.style.display=s||"block";let r=0,a=n[r];for(;a&&a.className&&"function"==typeof a.className.indexOf&&-1!=a.className.indexOf("sv-drag-target-skipped");)r++,a=n[r];return a?this.findDropTargetNodeByDragOverNode(a):null}getDataAttributeValueByNode(e){let t="svDropTarget";return this.draggedElementType.split("-").forEach(e=>{t+=this.capitalizeFirstLetter(e)}),e.dataset[t]}getDropTargetByNode(e,t){let s=this.getDataAttributeValueByNode(e);return this.getDropTargetByDataAttributeValue(s,e,t)}capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}calculateVerticalMiddleOfHTMLElement(e){const t=e.getBoundingClientRect();return t.y+t.height/2}calculateHorizontalMiddleOfHTMLElement(e){const t=e.getBoundingClientRect();return t.x+t.width/2}calculateIsBottom(e,t){return!1}findDropTargetNodeByDragOverNode(e){return e.closest(this.dropTargetDataAttributeName)}dragOver(e){const t=this.findDropTargetNodeFromPoint(e.clientX,e.clientY);if(!t)return void this.banDropHere();this.dropTarget=this.getDropTargetByNode(t,e);const s=this.isDropTargetValid(this.dropTarget,t);if(this.doDragOver(),!s)return void this.banDropHere();let n=this.calculateIsBottom(e.clientY,t);this.allowDropHere=!0,this.isDropTargetDoesntChanged(n)||(this.isBottom=null,this.isBottom=n,this.draggedElement!=this.dropTarget&&this.afterDragOver(t),this.prevDropTarget=this.dropTarget)}drop(){if(this.allowDropHere){const e=this.draggedElement.parent,t=this.doDrop();this.onDragEnd.fire(this,{fromElement:e,draggedElement:t,toElement:this.dropTarget})}}clear(){const e={draggedElement:this.draggedElement};this.dropTarget=null,this.prevDropTarget=null,this.draggedElement=null,this.isBottom=null,this.parentElement=null,this.onDragClear.fire(this,e)}}class Zs extends Gs{constructor(){super(...arguments),this.dropIsBanned=!1,this.matrixRowMap={},this.fromIndex=null,this.toIndex=null,this.toMatrix=null,this.doBanDropHere=()=>{this.dropIsBanned||(this.removeGhost(),this.parentElement.renderedTable.rows.splice(this.initialDraggedElementIndex,0,this.draggedRenderedRow),this.dropIsBanned=!0,this.lastDropTargetParentElement=this.parentElement)},this.doDrop=()=>{if(this.parentElement==this.toMatrix)this.fromIndex<this.toIndex&&this.toIndex--,this.parentElement.moveRowByIndex(this.fromIndex,this.toIndex);else if(this.toMatrix){const e=Object.assign({},this.parentElement.value[this.fromIndex]);this.parentElement.removeRowByIndex(this.fromIndex),this.toMatrix.addRowByIndex(e,this.toIndex)}return this.parentElement}}get draggedElementType(){return"matrix-row"}patchUserSelect(){const e=i.getBody();e&&(this.restoreUserSelectValue=e.style.userSelect,e.style.userSelect="none")}onStartDrag(){this.patchUserSelect();const e=this.parentElement.renderedTable.rows;let t=e.findIndex(e=>e.row===this.draggedElement);t>=0&&(this.draggedRenderedRow=e[t],this.initialDraggedElementIndex=t,this.draggedRenderedRow.isGhostRow=!0,this.lastDropTargetParentElement=this.parentElement);const s=[];this.survey.onMatrixRowDragOver.isEmpty?s.push(this.parentElement):function e(t){const n=t.filter(e=>e.isDescendantOf("matrixdynamic")&&e.allowRowReorder);n.forEach(t=>{s.push(t),"none"!==t.detailPanelMode&&t.visibleRows.forEach(t=>{t.isDetailPanelShowing&&e(t.questions)})})}(this.survey.getAllQuestions()),this.matrixRowMap={},s.forEach(e=>{e.visibleRows.forEach(t=>{this.matrixRowMap[t.id]={row:t,matrix:e}}),0==e.visibleRows.length&&(this.matrixRowMap[e.id]={row:e,matrix:e})}),this.fromIndex=this.parentElement.visibleRows.indexOf(this.draggedElement)}get shortcutClass(){return(new fe).append(this.parentElement.cssClasses.draggedRow).toString()}createDraggedElementShortcut(e,t,s){const n=i.createElement("div");if(n){if(n.className=this.shortcutClass,t){const e=t.closest("[data-sv-drop-target-matrix-row]"),i=e.cloneNode(!0);i.style.cssText=`\n        width: ${e.offsetWidth}px;\n      `,i.classList.remove("sv-matrix__drag-drop--moveup"),i.classList.remove("sv-matrix__drag-drop--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,n.appendChild(i);const r=t.getBoundingClientRect();n.shortcutXOffset=s.clientX-r.x,n.shortcutYOffset=s.clientY-r.y}return n}}getDropTargetByDataAttributeValue(e){const t=this.matrixRowMap[e];return(null==t?void 0:t.row)||(null==t?void 0:t.matrix)}canInsertIntoThisRow(e){const t=this.parentElement.lockedRowCount;return t<=0||e.rowIndex>t}isDropTargetValid(e,t){return this.canInsertIntoThisRow(e)}calculateIsBottom(e,t){const s=t.getBoundingClientRect();return e>=s.y+s.height/2}removeGhost(){const e=this.lastDropTargetParentElement.renderedTable.rows,t=e.indexOf(this.draggedRenderedRow);t>=0&&e.splice(t,1)}afterDragOver(e){if(!this.dropTarget)return;const t=this.matrixRowMap[this.dropTarget.id].matrix,s=this.matrixRowMap[this.dropTarget.id].row,n=this.isBottom&&!s.isDetailPanelShowing?1:0;let i=0;const r={allow:t==this.parentElement,row:s,fromMatrix:this.parentElement,toMatrix:t};if(this.survey.onMatrixRowDragOver.fire(this.survey,r),!r.allow)return;this.removeGhost(),this.lastDropTargetParentElement=t;const a=t.renderedTable.rows;if(t.visibleRows.length>0){const e=a.findIndex(e=>e.row==this.dropTarget);e>=0&&a.splice(e+n,0,this.draggedRenderedRow),i=t.visibleRows.indexOf(this.dropTarget)+n}else t.renderedTable.headerRow||(a[0].cells[0].colSpans=this.draggedRenderedRow.cells.length),a.splice(0,0,this.draggedRenderedRow);this.toIndex=i,this.toMatrix=t,this.dropIsBanned=!1,super.ghostPositionChanged()}clear(){this.matrixRowMap={},this.parentElement.renderedTable.rows.forEach(e=>{e.isGhostRow=!1}),this.parentElement.clearOnDrop(),this.toMatrix&&this.toMatrix.clearOnDrop(),this.fromIndex=null,this.toIndex=null;const e=i.getBody();e&&(e.style.userSelect=this.restoreUserSelectValue||"initial"),super.clear()}}class Ks{constructor(e,t=!0){this.dragHandler=e,this.preventOnTouch=t,this.onPointerUp=e=>{this.clearListeners()},this.tryToStartDrag=e=>{if(this.currentX=e.pageX,this.currentY=e.pageY,!this.isMicroMovement)return this.clearListeners(),this.dragHandler(this.pointerDownEvent,this.targets,this.itemModel),!0}}onPointerDown(e,t){this.targets={currentTarget:e.currentTarget,target:e.target},Pe&&this.preventOnTouch?this.dragHandler(e,this.targets,t):(this.pointerDownEvent=e,this.startX=e.pageX,this.startY=e.pageY,this.targets.currentTarget.getRootNode().addEventListener("pointermove",this.tryToStartDrag),this.targets.currentTarget.addEventListener("pointerup",this.onPointerUp),this.itemModel=t)}get isMicroMovement(){const e=Math.abs(this.currentX-this.startX),t=Math.abs(this.currentY-this.startY);return e<10&&t<10}clearListeners(){this.pointerDownEvent&&(this.targets.currentTarget.getRootNode().removeEventListener("pointermove",this.tryToStartDrag),this.targets.currentTarget.removeEventListener("pointerup",this.onPointerUp))}}class Js{constructor(e,t,s){this.locText=e,this.btnEdit=t,this.btnRemove=s}get showRemove(){return!!this.btnRemove}}class Ys{constructor(e,t){this.question=e,this.noEntry=t,this.items=[]}isEmpty(){return 0==this.items.length}dispose(){this.items.forEach(e=>{var t,s;null===(t=e.btnEdit)||void 0===t||t.dispose(),null===(s=e.btnRemove)||void 0===s||s.dispose()})}}class $s extends Yt{constructor(e){super(e),this.question=e}getValue(e,t,s,n){if(!n&&this.question.isEmpty())return{isFound:0===e.length,value:void 0};if(s>-1){const t=this.question.allRows;return s>=0&&s<t.length?t[s].getValueGetterContext().getValue(e,!1,s,n):{isFound:!1,value:void 0,context:this}}return super.getValue(e,t,s,n)}}class Xs extends Ms{constructor(e,t,s){super(t,s),this.index=e,this.buildCells(s)}getRowIndex(){const e=super.getRowIndex();return e>0?e:this.index+1}get rowName(){return this.id}get dataName(){return"row"+(this.index+1)}get text(){return"row "+(this.visibleIndex+1)}getAccessbilityText(){return(this.visibleIndex+1).toString()}get shortcutText(){const e=this.data.visibleRows.indexOf(this)+1,t=this.cells.length>1?this.cells[1].questionValue:void 0,s=this.cells.length>0?this.cells[0].questionValue:void 0;return t&&t.value||s&&s.value||""+e}}class en extends zs{constructor(e){super(e),this.rowCounter=0,this.setRowCountValueFromData=!1,this.startDragMatrixRow=(e,t)=>{this.dragDropMatrixRows.startDrag(e,this.draggedRow,this,t.target)},this.initialRowCount=this.getDefaultPropertyValue("rowCount"),this.createLocalizableString("confirmDeleteText",this,!1,"confirmDelete"),this.createLocalizableString("addRowText",this).onGetTextCallback=e=>e||this.defaultAddRowText,this.createLocalizableString("removeRowText",this,!1,"removeRow"),this.createLocalizableString("noRowsText",this,!1,!0),this.createLocalizableString("editRowText",this,!1,"editText"),this.registerPropertyChangedHandlers(["hideColumnsIfEmpty","allowAddRows"],()=>{this.updateShowTableAndAddRow()}),this.registerPropertyChangedHandlers(["allowRowReorder","isReadOnly","lockedRowCount"],()=>{this.resetRenderedTable()}),this.registerPropertyChangedHandlers(["minRowCount"],()=>{this.onMinRowCountChanged()}),this.registerPropertyChangedHandlers(["maxRowCount"],()=>{this.onMaxRowCountChanged()}),this.dragOrClickHelper=new Ks(this.startDragMatrixRow)}setSurveyImpl(e,t){super.setSurveyImpl(e,t),this.dragDropMatrixRows=new Zs(this.survey,null,!0)}isBanStartDrag(e){const t=e.target;return"true"===t.getAttribute("contenteditable")||"INPUT"===t.nodeName||!this.isDragHandleAreaValid(t)}isDragHandleAreaValid(e){return"icon"!==this.survey.matrixDragHandleArea||e.classList.contains(this.cssClasses.dragElementDecorator)}onPointerDown(e,t){t&&this.isRowsDragAndDrop&&!this.isDesignMode&&(this.isBanStartDrag(e)||t.isDetailPanelShowing||(this.draggedRow=t,this.dragOrClickHelper.onPointerDown(e)))}getType(){return"matrixdynamic"}get isRowsDynamic(){return!0}get confirmDelete(){return this.getPropertyValue("confirmDelete")}set confirmDelete(e){this.setPropertyValue("confirmDelete",e)}get isValueArray(){return!0}get keyName(){return this.getPropertyValue("keyName","")}set keyName(e){this.setPropertyValue("keyName",e)}get defaultRowValue(){return this.getPropertyValue("defaultRowValue")}set defaultRowValue(e){this.setPropertyValue("defaultRowValue",e)}get copyDefaultValueFromLastEntry(){return this.getPropertyValue("copyDefaultValueFromLastEntry")}set copyDefaultValueFromLastEntry(e){this.setPropertyValue("copyDefaultValueFromLastEntry",e)}get defaultValueFromLastRow(){return this.copyDefaultValueFromLastEntry}set defaultValueFromLastRow(e){this.copyDefaultValueFromLastEntry=e}isDefaultValueEmpty(){return super.isDefaultValueEmpty()&&this.isValueEmpty(this.defaultRowValue)}valueFromData(e){return this.minRowCount<1||this.isEmpty()?super.valueFromData(e):this.correctValueForMinMaxRows(e)}correctValueForMinMaxRows(e){Array.isArray(e)||(e=[]);for(var t=e.length;t<this.minRowCount;t++)e.push({});return e}isNewValueCorrect(e){return Array.isArray(e)}setDefaultValue(){if(!this.isValueEmpty(this.defaultRowValue)&&this.isValueEmpty(this.defaultValue)){if(this.isEmpty()&&0!=this.rowCount){for(var e=[],t=0;t<this.rowCount;t++)e.push(this.defaultRowValue);this.value=e}}else super.setDefaultValue()}moveRowByIndex(e,t){const s=this.createNewValue();if(!Array.isArray(s)&&Math.max(e,t)>=s.length)return;const n=s[e];s.splice(e,1),s.splice(t,0,n),this.value=s}addRowByIndex(e,t){const s=this.createNewValue();!Array.isArray(s)&&t>=s.length||(s.splice(t,0,e),this.rowCount++,this.value=s)}removeRowByIndex(e){const t=this.createNewValue();!Array.isArray(t)&&e>=t.length||(t.splice(e,1),this.rowCount--,this.value=t)}clearOnDrop(){this.isEditingSurveyElement||this.resetRenderedTable()}initDataUI(){this.generatedVisibleRows||this.getVisibleRows()}get rowCount(){return this.rowCountValue}set rowCount(e){if(!((e=a.getNumber(e))<0||e>xt.matrix.maxRowCount||e===this.rowCount)){this.setRowCountValueFromData=!1;var t=this.rowCountValue;if(this.rowCountValue=e,this.value&&this.value.length>e){var s=this.value;s.splice(e),this.value=s}if(this.isUpdateLocked)this.initialRowCount=e;else{if(this.generatedVisibleRows||0==t){this.generatedVisibleRows||(this.clearGeneratedRows(),this.generatedVisibleRows=[]),this.generatedVisibleRows.splice(e);for(var n=t;n<e;n++){var i=this.createMatrixRow(this.getValueForNewRow());this.generatedVisibleRows.push(i),this.onMatrixRowCreated(i)}this.runCondition(this.getDataFilteredProperties())}this.onRowsChanged()}}}updateBindingProp(e,t){super.updateBindingProp(e,t);const s=this.generatedVisibleRows;if("rowCount"!==e||!Array.isArray(s))return;const n=this.getUnbindValue(this.value)||[];if(n.length<s.length){let e=!1;for(let t=n.length;t<s.length;t++)e||(e=!s[t].isEmpty),n.push(s[t].value||{});e&&(this.value=n)}}updateProgressInfoByValues(e){let t=this.value;Array.isArray(t)||(t=[]);for(var s=0;s<this.rowCount;s++){const n=s<t.length?t[s]:{};this.updateProgressInfoByRow(e,n)}}getValueForNewRow(){var e=null;return this.onGetValueForNewRowCallBack&&(e=this.onGetValueForNewRowCallBack(this)),e}get allowRowReorder(){return this.getPropertyValue("allowRowReorder")}set allowRowReorder(e){this.setPropertyValue("allowRowReorder",e)}get allowRowsDragAndDrop(){return this.allowRowReorder}set allowRowsDragAndDrop(e){this.allowRowReorder=e}get allowRowDragIn(){var e,t;return!(null===(t=null===(e=this.survey)||void 0===e?void 0:e.onMatrixRowDragOver)||void 0===t?void 0:t.isEmpty)}get isRowsDragAndDrop(){return this.allowRowReorder&&!this.isReadOnly}get lockedRowCount(){return this.getPropertyValue("lockedRowCount",0)}set lockedRowCount(e){this.setPropertyValue("lockedRowCount",e)}get iconDragElement(){return this.cssClasses.iconDragElement}createRenderedTable(){return new tn(this)}get rowCountValue(){return this.getPropertyValue("rowCount")}set rowCountValue(e){this.setPropertyValue("rowCount",e)}get minRowCount(){return this.getPropertyValue("minRowCount")}set minRowCount(e){e<0&&(e=0),this.setPropertyValue("minRowCount",e)}onMinRowCountChanged(){const e=this.minRowCount;e>this.maxRowCount&&(this.maxRowCount=e),this.initialRowCount<e&&(this.initialRowCount=e),this.rowCount<e&&(this.rowCount=e)}get maxRowCount(){return this.getPropertyValue("maxRowCount")}set maxRowCount(e){e<=0||(e>xt.matrix.maxRowCount&&(e=xt.matrix.maxRowCount),e!=this.maxRowCount&&this.setPropertyValue("maxRowCount",e))}onMaxRowCountChanged(){const e=this.maxRowCount;e<this.minRowCount&&(this.minRowCount=e),this.rowCount>e&&(this.rowCount=e)}get allowAddRows(){return this.getPropertyValue("allowAddRows")}set allowAddRows(e){this.setPropertyValue("allowAddRows",e)}get allowRemoveRows(){return this.getPropertyValue("allowRemoveRows")}set allowRemoveRows(e){this.setPropertyValue("allowRemoveRows",e),this.isUpdateLocked||this.resetRenderedTable()}get canAddRow(){return this.allowAddRows&&!this.isReadOnly&&this.rowCount<this.maxRowCount}get canRemoveRows(){var e=this.allowRemoveRows&&!this.isReadOnly&&this.rowCount>this.minRowCount;return this.canRemoveRowsCallback?this.canRemoveRowsCallback(e):e}canRemoveRow(e){if(!this.survey)return!0;const t=e.rowIndex-1;return!(this.lockedRowCount>0&&t<this.lockedRowCount)&&this.survey.matrixAllowRemoveRow(this,t,e)}addRowUI(){this.addRow(!0)}getQuestionToFocusOnAddingRow(){if(0===this.visibleRows.length)return null;for(var e=this.visibleRows[this.visibleRows.length-1],t=0;t<e.cells.length;t++){var s=e.cells[t].question;if(s&&s.isVisible&&!s.isReadOnly)return s}return null}addRow(e){const t=this.rowCount,s=this.canAddRow;var n={question:this,canAddRow:s,allow:s};if(this.survey&&this.survey.matrixBeforeRowAdded(n),(s!==n.allow?n.allow:s!==n.canAddRow?n.canAddRow:s)&&(this.onStartRowAddingRemoving(),this.addRowCore(),this.onEndRowAdding(),this.singleInputOnAddItem(!1),this.detailPanelShowOnAdding&&this.visibleRows.length>0&&this.visibleRows[this.visibleRows.length-1].showDetailPanel(),e&&t!==this.rowCount)){const e=this.getQuestionToFocusOnAddingRow();e&&e.focus()}}get detailPanelShowOnAdding(){return this.getPropertyValue("detailPanelShowOnAdding")}set detailPanelShowOnAdding(e){this.setPropertyValue("detailPanelShowOnAdding",e)}hasRowsAsItems(){return!1}unbindValue(){this.clearGeneratedRows(),this.clearPropertyValue("value"),this.rowCountValue=0,super.unbindValue()}isValueSurveyElement(e){return this.isEditingSurveyElement||super.isValueSurveyElement(e)}addRowCore(){var e=this.rowCount;this.rowCount=this.rowCount+1;var t=this.getDefaultRowValue(!0),s=null;if(this.isValueEmpty(t)||(s=this.createNewValue()).length==this.rowCount&&(s[s.length-1]=t,this.value=s),this.data){this.runCellsCondition(this.getDataFilteredProperties());const e=this.generatedVisibleRows;if(this.isValueEmpty(t)&&e.length>0){const t=e[e.length-1];this.isValueEmpty(t.value)||(s||(s=this.createNewValue()),this.isValueSurveyElement(s)||this.isTwoValueEquals(s[s.length-1],t.value)||(s[s.length-1]=t.value,this.value=s))}}if(this.survey){const t=this.visibleRows;if(e+1==this.rowCount&&t.length>0){const e=t[t.length-1];this.survey.matrixRowAdded(this,e),this.onRowsChanged()}}}getDefaultRowValue(e){for(var t=null,s=0;s<this.columns.length;s++){var n=this.columns[s].templateQuestion;n&&!this.isValueEmpty(n.getDefaultValue())&&((t=t||{})[this.columns[s].name]=n.getDefaultValue())}if(!this.isValueEmpty(this.defaultRowValue))for(var i in this.defaultRowValue)(t=t||{})[i]=this.defaultRowValue[i];if(e&&this.copyDefaultValueFromLastEntry){var r=this.value;if(r&&Array.isArray(r)&&r.length>=this.rowCount-1){var a=r[this.rowCount-2];for(var i in a)(t=t||{})[i]=a[i]}}return t}focusAddBUtton(){const e=this.getRootElement();if(e&&this.cssClasses.buttonAdd){const t=e.querySelectorAll("."+this.cssClasses.buttonAdd)[0];t&&t.focus()}}getActionCellIndex(e){const t=this.showHeader?1:0;return this.isColumnLayoutHorizontal?e.cells.length:this.visibleRows.indexOf(e)+t}removeRowUI(e){if(e&&e.rowName){var t=this.visibleRows.indexOf(e);if(t<0)return;e=t}this.removeRow(e,void 0,()=>{const e=this.visibleRows.length,s=t>=e?e-1:t,n=s>-1?this.visibleRows[s]:void 0;setTimeout(()=>{n?this.renderedTable.focusActionCell(n,this.getActionCellIndex(n)):this.focusAddBUtton()},10)})}isRequireConfirmOnRowDelete(e){if(!this.confirmDelete)return!1;if(e<0||e>=this.rowCount)return!1;var t=this.createNewValue();return!(this.isValueEmpty(t)||!Array.isArray(t)||e>=t.length||this.isValueEmpty(t[e]))}removeRow(e,t,s){if(this.canRemoveRows&&!(e<0||e>=this.rowCount)){var n=this.visibleRows&&e<this.visibleRows.length?this.visibleRows[e]:null;void 0===t&&(t=this.isRequireConfirmOnRowDelete(e)),t?Je({message:this.confirmDeleteText,funcOnYes:()=>{this.removeRowAsync(e,n),s&&s()},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog}):(this.removeRowAsync(e,n),s&&s())}}removeRowAsync(e,t){t&&this.survey&&!this.survey.matrixRowRemoving(this,e,t)||(this.onStartRowAddingRemoving(),this.removeRowCore(e),this.singleInputOnRemoveItem(e),this.onEndRowRemoving(t))}removeRowCore(e){var t=this.visibleRows?this.visibleRows[e]:null;if(!((e=this.generatedVisibleRows.indexOf(t))<0)){if(this.generatedVisibleRows&&e<this.generatedVisibleRows.length&&this.generatedVisibleRows.splice(e,1),this.rowCountValue--,this.value){var s=[];(s=Array.isArray(this.value)&&e<this.value.length?this.createValueCopy():this.createNewValue()).splice(e,1),s=this.deleteRowValue(s,null),this.isRowChanging=!0,this.value=s,this.isRowChanging=!1}this.onRowsChanged(),this.survey&&this.survey.matrixRowRemoved(this,e,t)}}onSingleInputQuestionAdded(e){this.showHeader||(e.titleLocation="hidden")}getSingleInputQuestionsCore(e,t){const s=new Array,n=this.visibleRows;if(t)for(let e=0;e<n.length;e++){const t=n[e];t.hasValueAnyQuestion(!0)&&t.validate(new es)||this.fillSingleInputQuestionsByRow(s,t)}return this.getSingleInputQuestionsForDynamic(e,s)}fillSingleInputQuestionsInContainer(e,t){const s=this.getRowByQuestion(t);this.fillSingleInputQuestionsByRow(e,s)}fillSingleInputQuestionsByRow(e,t){t&&t.questions.forEach(t=>t.addNestedQuestion(e,!0,!1,!1))}getSingleInputAddTextCore(){if(this.canAddRow)return this.addRowText}singleInputAddItemCore(){this.addRowUI()}singleInputRemoveItemCore(e){this.removeRowUI(this.getRowByQuestion(e))}getSingleQuestionOnChange(e){const t=this.visibleRows;if(t.length>0){(e<0||e>=t.length)&&(e=t.length-1);const s=t[e].visibleQuestions;if(s.length>0)return s[0]}return null}createSingleInputSummary(){const e=new Ys(this,this.locNoRowsText),t=new Array,s=this.canRemoveRows;return this.visibleRows.forEach(e=>{const n=new Ze(new Bs(this,e),!0,void 0,this.getSingleInputTitleTemplate());n.setJson(this.locSingleInputTitleTemplate.getJson());const i=new De({locTitle:this.getLocalizableString("editRowText"),action:()=>{this.singleInputEditRow(e)}}),r=s&&this.canRemoveRow(e)?new De({locTitle:this.locRemoveRowText,action:()=>{this.removeRowUI(e)}}):void 0;t.push(new Js(n,i,r))}),e.items=t,e}get confirmDeleteText(){return this.getLocalizableStringText("confirmDeleteText")}set confirmDeleteText(e){this.setLocalizableStringText("confirmDeleteText",e)}get locConfirmDeleteText(){return this.getLocalizableString("confirmDeleteText")}get addRowText(){return this.getLocalizableStringText("addRowText",this.defaultAddRowText)}set addRowText(e){this.setLocalizableStringText("addRowText",e)}get locAddRowText(){return this.getLocalizableString("addRowText")}get defaultAddRowText(){return this.getLocalizationString(this.isColumnLayoutHorizontal?"addRow":"addColumn")}getSingleInputTitleTemplate(){return"rowIndexTemplateTitle"}get addRowButtonLocation(){return this.getPropertyValue("addRowButtonLocation")}set addRowButtonLocation(e){this.setPropertyValue("addRowButtonLocation",e)}get addRowLocation(){return this.addRowButtonLocation}set addRowLocation(e){this.addRowButtonLocation=e}getAddRowLocation(){return this.addRowButtonLocation}get hideColumnsIfEmpty(){return this.getPropertyValue("hideColumnsIfEmpty")}set hideColumnsIfEmpty(e){this.setPropertyValue("hideColumnsIfEmpty",e)}getShowColumnsIfEmpty(){return this.hideColumnsIfEmpty}get removeRowText(){return this.getLocalizableStringText("removeRowText")}set removeRowText(e){this.setLocalizableStringText("removeRowText",e)}get locRemoveRowText(){return this.getLocalizableString("removeRowText")}get noRowsText(){return this.getLocalizableStringText("noRowsText")}set noRowsText(e){this.setLocalizableStringText("noRowsText",e)}get locNoRowsText(){return this.getLocalizableString("noRowsText")}get emptyRowsText(){return this.noRowsText}set emptyRowsText(e){this.noRowsText=e}get locEmptyRowsText(){return this.locNoRowsText}getValueGetterContext(){return new $s(this)}getDisplayValueCore(e,t){if(!t||!Array.isArray(t))return t;for(var s=this.getUnbindValue(t),n=this.visibleRows,i=0;i<n.length&&i<s.length;i++){var r=s[i];r&&(s[i]=this.getRowDisplayValue(e,n[i],r))}return s}getConditionObjectRowName(e){return"["+e.toString()+"]"}getConditionObjectsRowIndeces(){const e=[],t=Math.max(this.rowCount,1);for(var s=0;s<Math.min(xt.matrix.maxRowCountInCondition,t);s++)e.push(s);return e}supportAutoAdvance(){return!1}get hasRowText(){return!1}onCheckForErrors(e,t,s){super.onCheckForErrors(e,t,s),t||this.validateMinRows()||e.push(new Dt(this.minRowCount,this))}validateMinRows(){if(this.minRowCount<=0||!this.isRequired||!this.generatedVisibleRows)return!0;let e=0;return this.generatedVisibleRows.forEach(t=>{t.isEmpty||e++}),e>=this.minRowCount}getUniqueColumnsNames(){var e=super.getUniqueColumnsNames();const t=this.keyName;return t&&e.indexOf(t)<0&&e.push(t),e}generateRows(){var e=new Array;if(0===this.rowCount)return e;for(var t=this.createNewValue(),s=0;s<this.rowCount;s++)e.push(this.createMatrixRow(this.getRowValueByIndex(t,s)));return this.isValueEmpty(this.getDefaultRowValue(!1))||(this.value=t),e}createMatrixRow(e){return new Xs(this.rowCounter++,this,e)}getInsertedDeletedIndex(e,t){const s=Math.min(e.length,t.length);for(let n=0;n<s;n++)if(t[n]!==e[n].editingObj)return n;return s}isEditingObjectValueChanged(){const e=this.value;if(!this.generatedVisibleRows||!this.isValueSurveyElement(e))return!1;let t=this.lastDeletedRow;this.lastDeletedRow=void 0;const s=this.generatedVisibleRows;if(!Array.isArray(e)||Math.abs(s.length-e.length)>1||s.length===e.length)return!1;const n=this.getInsertedDeletedIndex(s,e);if(s.length>e.length){this.lastDeletedRow=s[n];const e=s[n];s.splice(n,1),this.isRendredTableCreated&&this.renderedTable.onRemovedRow(e)}else{let i;t&&t.editingObj===e[n]?i=t:(t=void 0,i=this.createMatrixRow(e[n])),s.splice(n,0,i),t||this.onMatrixRowCreated(i),this.isRendredTableCreated&&this.renderedTable.onAddedRow(i,n)}return this.setPropertyValueDirectly("rowCount",e.length),!0}updateValueFromSurvey(e,t=!1){if(this.setRowCountValueFromData=!0,this.minRowCount>0&&a.isValueEmpty(e)&&!a.isValueEmpty(this.defaultRowValue)){e=[];for(let t=0;t<this.minRowCount;t++)e.push(a.createCopy(this.defaultRowValue))}super.updateValueFromSurvey(e,t),this.setRowCountValueFromData=!1}getFilteredDataCore(){const e=[];return this.generatedVisibleRows.forEach(t=>{t.isVisible&&!t.isEmpty&&e.push(t.filteredValue)}),e}onBeforeValueChanged(e){if(e&&Array.isArray(e)){var t=e.length;if(t!=this.rowCount&&(this.setRowCountValueFromData||!(t<this.initialRowCount))&&!this.isEditingObjectValueChanged()&&(this.setRowCountValueFromData=!0,this.rowCountValue=t,this.generatedVisibleRows)){if(t==this.generatedVisibleRows.length+1){this.onStartRowAddingRemoving();const s=this.getRowValueByIndex(e,t-1),n=this.createMatrixRow(s);this.generatedVisibleRows.push(n),this.onMatrixRowCreated(n),this.onEndRowAdding()}else this.clearGeneratedRows(),this.getVisibleRows(),this.onRowsChanged();this.setRowCountValueFromData=!1}}}createNewValue(){var e=this.createValueCopy();e&&Array.isArray(e)||(e=[]),e.length>this.rowCount&&e.splice(this.rowCount);var t=this.getDefaultRowValue(!1);t=t||{};for(var s=e.length;s<this.rowCount;s++)e.push(this.getUnbindValue(t));return e}deleteRowValue(e,t){if(!Array.isArray(e))return e;for(var s=!0,n=0;n<e.length;n++)if(this.isObject(e[n])&&Object.keys(e[n]).length>0){s=!1;break}return s?null:e}getRowValueByIndex(e,t){return Array.isArray(e)&&t>=0&&t<e.length?e[t]:null}getRowValueCore(e,t,s=!1){if(!this.generatedVisibleRows)return{};var n=this.getRowValueByIndex(t,this.generatedVisibleRows.indexOf(e));return!n&&s&&(n={}),n}getAddRowButtonCss(e=!1){return(new fe).append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.emptyRowsButton,e).toString()}getRemoveRowButtonCss(){return(new fe).append(this.cssClasses.button).append(this.cssClasses.buttonRemove).toString()}getRootCss(){var e;return(new fe).append(super.getRootCss()).append(this.cssClasses.empty,!(null===(e=this.renderedTable)||void 0===e?void 0:e.showTable)).toString()}}class tn extends Ns{setDefaultRowActions(e,t){super.setDefaultRowActions(e,t)}}I.addClass("matrixdynamic",[{name:"allowAddRows:boolean",default:!0},{name:"allowRemoveRows:boolean",default:!0},{name:"rowCount:number",default:2,minValue:0,isBindable:!0},{name:"minRowCount:number",default:0,minValue:0},{name:"maxRowCount:number",default:xt.matrix.maxRowCount},{name:"keyName"},"defaultRowValue:rowvalue",{name:"copyDefaultValueFromLastEntry:boolean",alternativeName:"defaultValueFromLastRow"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",dependsOn:"confirmDelete",visibleIf:function(e){return!e||e.confirmDelete},serializationProperty:"locConfirmDeleteText"},{name:"addRowButtonLocation",alternativeName:"addRowLocation",default:"default",choices:["default","top","bottom","topBottom"]},{name:"addRowText",serializationProperty:"locAddRowText"},{name:"removeRowText",serializationProperty:"locRemoveRowText"},"hideColumnsIfEmpty:boolean",{name:"noRowsText:text",alternativeName:"emptyRowsText",serializationProperty:"locNoRowsText",dependsOn:"hideColumnsIfEmpty",visibleIf:function(e){return!e||e.hideColumnsIfEmpty}},{name:"detailPanelShowOnAdding:boolean",dependsOn:"detailPanelMode",visibleIf:function(e){return"none"!==e.detailPanelMode}},{name:"allowRowReorder:switch",alternativeName:"allowRowsDragAndDrop"}],function(){return new en("")},"matrixdropdownbase"),xs.Instance.registerQuestion("matrixdynamic",e=>{var t=new en(e);return t.choices=[1,2,3,4,5],zs.addDefaultColumns(t),t});var sn={currentType:"default",getCss:function(){var e=this.currentType?this[this.currentType]:nn;return e||(e=nn),e},getAvailableThemes:function(){return Object.keys(this).filter(e=>-1===["currentType","getCss","getAvailableThemes"].indexOf(e))}},nn={root:"sd-root-modern",rootProgress:"sd-progress",rootMobile:"sd-root-modern--mobile",rootAnimationDisabled:"sd-root-modern--animation-disabled",rootReadOnly:"sd-root--readonly",rootCompact:"sd-root--compact",rootFitToContainer:"sd-root-modern--full-container",rootWrapper:"sd-root-modern__wrapper",rootWrapperFixed:"sd-root-modern__wrapper--fixed",rootWrapperHasImage:"sd-root-modern__wrapper--has-image",rootBackgroundImage:"sd-root_background-image",container:"sd-container-modern",header:"sd-title sd-container-modern__title",bodyContainer:"sv-components-row",body:"sd-body",bodyWithTimer:"sd-body--with-timer",clockTimerRoot:"sd-timer",clockTimerRootTop:"sd-timer--top",clockTimerRootBottom:"sd-timer--bottom",clockTimerProgress:"sd-timer__progress",clockTimerProgressAnimation:"sd-timer__progress--animation",clockTimerTextContainer:"sd-timer__text-container",clockTimerMinorText:"sd-timer__text--minor",clockTimerMajorText:"sd-timer__text--major",bodyEmpty:"sd-body sd-body--empty",bodyLoading:"sd-body--loading",footer:"sd-footer sd-body__navigation sd-clearfix",title:"sd-title",description:"sd-description",logo:"sd-logo",logoImage:"sd-logo__image",headerText:"sd-header__text",headerClose:"sd-hidden",navigationButton:"",bodyNavigationButton:"sd-btn",completedPage:"sd-completedpage",completedBeforePage:"sd-completed-before-page",timerRoot:"sd-body__timer",navigation:{complete:"sd-btn--action sd-navigation__complete-btn",prev:"sd-navigation__prev-btn",next:"sd-navigation__next-btn",start:"sd-navigation__start-btn",preview:"sd-navigation__preview-btn",edit:"sd-btn sd-btn--small"},panel:{contentEnter:"sd-element__content--enter",contentLeave:"sd-element__content--leave",enter:"sd-element-wrapper--enter",leave:"sd-element-wrapper--leave",asPage:"sd-panel--as-page",number:"sd-element__num",title:"sd-title sd-element__title sd-panel__title",titleExpandable:"sd-element__title--expandable",titleExpandableSvg:"sd-element__title-expandable-svg",titleNumInline:"sd-element__title--num-inline",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleOnExpand:"sd-panel__title--expanded",titleOnError:"sd-panel__title--error",titleBar:"sd-action-title-bar",description:"sd-description sd-panel__description",container:"sd-element sd-element--complex sd-panel sd-row__panel",withFrame:"sd-element--with-frame",content:"sd-element__content sd-panel__content",icon:"sd-panel__icon",iconExpanded:"sd-panel__icon--expanded",footer:"sd-panel__footer",requiredMark:"sd-panel__required-text",header:"sd-panel__header sd-element__header sd-element__header--location-top",collapsed:"sd-element--collapsed",expanded:"sd-element--expanded",expandable:"sd-element--expandable",expandableAnimating:"sd-elemenet--expandable--animating",nested:"sd-element--nested sd-element--nested-with-borders",invisible:"sd-element--invisible",navigationButton:"",compact:"sd-element--with-frame sd-element--compact",errorsContainer:"sd-panel__errbox sd-element__erbox sd-element__erbox--above-element"},paneldynamic:{mainRoot:"sd-element  sd-question sd-question--paneldynamic sd-element--complex sd-question--complex sd-row__question",empty:"sd-question--empty",root:"sd-paneldynamic",iconRemove:"sd-hidden",navigation:"sd-paneldynamic__navigation",title:"sd-title sd-element__title sd-question__title",header:"sd-paneldynamic__header sd-element__header",headerTab:"sd-paneldynamic__header-tab",button:"sd-action sd-paneldynamic__btn",buttonRemove:"sd-action--negative sd-paneldynamic__remove-btn",buttonAdd:"sd-paneldynamic__add-btn",buttonPrev:"sd-paneldynamic__prev-btn sd-action--icon sd-action",buttonPrevDisabled:"sd-action--disabled",buttonNextDisabled:"sd-action--disabled",buttonNext:"sd-paneldynamic__next-btn sd-action--icon sd-action",progressContainer:"sd-paneldynamic__progress-container",progress:"sd-progress",progressBar:"sd-progress__bar",nested:"sd-element--nested sd-element--nested-with-borders",progressText:"sd-paneldynamic__progress-text",separator:"sd-paneldynamic__separator",panelWrapper:"sd-paneldynamic__panel-wrapper",footer:"sd-paneldynamic__footer",panelFooter:"sd-paneldynamic__panel-footer",footerButtonsContainer:"sd-paneldynamic__buttons-container",panelsContainer:"sd-paneldynamic__panels-container",panelWrapperInRow:"sd-paneldynamic__panel-wrapper--in-row",panelWrapperEnter:"sd-paneldynamic__panel-wrapper--enter",panelWrapperLeave:"sd-paneldynamic__panel-wrapper--leave",panelWrapperList:"sd-paneldynamic__panel-wrapper--list",progressBtnIcon:"icon-progressbuttonv2",noEntriesPlaceholder:"sd-paneldynamic__placeholder sd-question__placeholder",compact:"sd-element--with-frame sd-element--compact",tabsContainer:"sd-paneldynamic__tabs-container",tabsContainerWithHeader:"sd-paneldynamic__tabs-container--with-header",tabsRoot:"sd-tabs-toolbar",tabsLeft:"sd-tabs-toolbar--left",tabsRight:"sd-tabs-toolbar--right",tabsCenter:"sd-tabs-toolbar--center",tabs:{item:"sd-tab-item",itemPressed:"sd-tab-item--pressed",itemAsIcon:"sd-tab-item--icon",itemIcon:"sd-tab-item__icon",itemTitle:"sd-tab-item__title"}},progress:"sd-progress sd-body__progress",progressTop:"sd-body__progress--top",progressBottom:"sd-body__progress--bottom",progressBar:"sd-progress__bar",progressText:"sd-progress__text",progressButtonsRoot:"sd-progress-buttons",progressButtonsNumbered:"sd-progress-buttons--numbered",progressButtonsFitSurveyWidth:"sd-progress-buttons--fit-survey-width",progressButtonsContainerCenter:"sd-progress-buttons__container-center",progressButtonsContainer:"sd-progress-buttons__container",progressButtonsConnector:"sd-progress-buttons__connector",progressButtonsButton:"sd-progress-buttons__button",progressButtonsButtonBackground:"sd-progress-buttons__button-background",progressButtonsButtonContent:"sd-progress-buttons__button-content",progressButtonsHeader:"sd-progress-buttons__header",progressButtonsFooter:"sd-progress-buttons__footer",progressButtonsImageButtonLeft:"sd-progress-buttons__image-button-left",progressButtonsImageButtonRight:"sd-progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sd-progress-buttons__image-button--hidden",progressButtonsListContainer:"sd-progress-buttons__list-container",progressButtonsList:"sd-progress-buttons__list",progressButtonsListElementPassed:"sd-progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sd-progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sd-progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sd-progress-buttons__page-title",progressButtonsPageDescription:"sd-progress-buttons__page-description",progressTextInBar:"sd-hidden",page:{root:"sd-page sd-body__page",emptyHeaderRoot:"sd-page__empty-header",title:"sd-title sd-page__title",description:"sd-description sd-page__description",number:"sd-page__num",errorsContainer:"sd-page__errbox"},pageTitle:"sd-title sd-page__title",pageDescription:"sd-description sd-page__description",row:"sd-row sd-clearfix",rowMultiple:"sd-row--multiple",rowCompact:"sd-row--compact",rowEnter:"sd-row--enter",rowDelayedEnter:"sd-row--delayed-enter",rowLeave:"sd-row--leave",rowReplace:"sd-row--replace",pageRow:"sd-page__row",question:{contentEnter:"sd-element__content--enter",contentLeave:"sd-element__content--leave",enter:"sd-element-wrapper--enter",leave:"sd-element-wrapper--leave",mobile:"sd-question--mobile",mainRoot:"sd-element sd-question sd-row__question",flowRoot:"sd-element sd-question sd-row__question sd-row__question--flow",withFrame:"sd-element--with-frame",asCell:"sd-table__cell",answered:"sd-question--answered",header:"sd-question__header sd-element__header",headerLeft:"sd-question__header--location--left",headerTop:"sd-question__header--location-top sd-element__header--location-top",headerBottom:"sd-question__header--location--bottom",content:"sd-element__content sd-question__content",contentSupportContainerQueries:"sd-question__content--support-container-queries",contentLeft:"sd-question__content--left",titleNumInline:"sd-element__title--num-inline",titleLeftRoot:"sd-question--left",titleTopRoot:"sd-question--title-top",descriptionUnderInputRoot:"sd-question--description-under-input",titleBottomRoot:"sd-question--title-bottom",titleOnAnswer:"sd-question__title--answer",titleEmpty:"sd-question__title--empty",titleOnError:"sd-question__title--error",title:"sd-title sd-element__title sd-question__title",titleExpandable:"sd-element__title--expandable",titleExpandableSvg:"sd-element__title-expandable-svg",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleReadOnly:"sd-element__title--readonly",titleBar:"sd-action-title-bar",requiredMark:"sd-question__required-text",number:"sd-element__num",description:"sd-description sd-question__description",descriptionUnderInput:"sd-question__description--under-input",comment:"sd-input sd-comment",required:"sd-question--required",titleRequired:"sd-question__title--required",indent:20,footer:"sd-question__footer",commentArea:"sd-question__comment-area",formGroup:"sd-question__form-group",hasError:"sd-question--error",hasErrorTop:"sd-question--error-top",hasErrorBottom:"sd-question--error-bottom",collapsed:"sd-element--collapsed",expandable:"sd-element--expandable",expandableAnimating:"sd-elemenet--expandable--animating",expanded:"sd-element--expanded",nested:"sd-element--nested",invisible:"sd-element--invisible",composite:"sd-element--complex sd-composite",disabled:"sd-question--disabled",readOnly:"sd-question--readonly",preview:"sd-question--preview",noPointerEventsMode:"sd-question--no-pointer-events",errorsContainer:"sd-element__erbox sd-question__erbox",errorsContainerTop:"sd-element__erbox--above-element sd-question__erbox--above-question",errorsContainerBottom:"sd-question__erbox--below-question",confirmDialog:"sd-popup--confirm sv-popup--confirm",singleInputTitle:"sd-element__title--singleinput",singleInputWrapper:"sd-question__singleinput-wrapper",breadcrumbsRoot:"sd-breadcrumbs",breadcrumbsItem:"sd-breadcrumbs-item",breadcrumbsItemButton:"sd-breadcrumbs-item__button",breadcrumbsSeparator:"sd-breadcrumbs-separator",summary:"sd-summary",summaryRow:"sd-summary-row",summaryRowContent:"sd-summary-row__content",summaryRowActions:"sd-summary-row__actions",summaryRowAction:"sd-summary-row-action",summaryRowActionEdit:"sd-summary-row-action sd-summary-row-action--edit",summaryRowActionDelete:"sd-summary-row-action sd-summary-row-action--delete"},image:{mainRoot:"sd-element sd-question sd-question--image",root:"sd-image",image:"sd-image__image",adaptive:"sd-image__image--adaptive",noImage:"sd-image__no-image",noImageSvgIconId:"icon-no-image",withFrame:""},html:{mainRoot:"sd-element sd-question sd-row__question sd-question--html",root:"sd-html",withFrame:"",nested:"sd-element--nested sd-html--nested"},error:{root:"sd-error",warningMode:"sd-error--warning",infoMode:"sd-error--info",icon:"",item:"sd-error__item",locationTop:"",locationBottom:""},checkbox:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-checkbox sd-selectbase__item",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",itemOnError:"sd-item--error",itemSelectAll:"sd-checkbox--selectall",itemNone:"sd-checkbox--none",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemReadOnly:"sd-item--readonly sd-checkbox--readonly",itemPreview:"sd-item--preview sd-checkbox--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",itemSvgIconId:"#icon-check-16x16",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-checkbox__decorator",otherArea:"sd-selectbase__other",column:"sd-selectbase__column"},radiogroup:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-radio sd-selectbase__item",itemOnError:"sd-item--error",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",itemDisabled:"sd-item--disabled sd-radio--disabled",itemReadOnly:"sd-item--readonly sd-radio--readonly",itemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-radio__decorator",otherArea:"sd-selectbase__other",clearButton:"",column:"sd-selectbase__column"},boolean:{mainRoot:"sd-element sd-question sd-row__question sd-question--boolean",root:"sv_qcbc sv_qbln sd-scrollable-container sd-boolean-root",rootRadio:"sv_qcbc sv_qbln sd-scrollable-container sd-scrollable-container--compact",item:"sd-boolean",itemOnError:"sd-boolean--error",control:"sd-boolean__control sd-visuallyhidden",itemChecked:"sd-boolean--checked",itemExchanged:"sd-boolean--exchanged",itemIndeterminate:"sd-boolean--indeterminate",itemDisabled:"sd-boolean--disabled",itemReadOnly:"sd-boolean--readonly",itemPreview:"sd-boolean--preview",itemHover:"sd-boolean--allowhover",label:"sd-boolean__label",labelTrue:"sd-boolean__label--true",labelFalse:"sd-boolean__label--false",switch:"sd-boolean__switch",disabledLabel:"sd-checkbox__label--disabled",labelReadOnly:"sd-checkbox__label--readonly",labelPreview:"sd-checkbox__label--preview",sliderText:"sd-boolean__thumb-text",slider:"sd-boolean__thumb",sliderGhost:"sd-boolean__thumb-ghost",radioItem:"sd-item",radioItemChecked:"sd-item--checked sd-radio--checked",radioItemDisabled:"sd-item--disabled sd-radio--disabled",radioItemReadOnly:"sd-item--readonly sd-radio--readonly",radioItemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-check-16x16",radioLabel:"sd-selectbase__label",radioControlLabel:"sd-item__control-label",radioFieldset:"sd-selectbase",itemRadioDecorator:"sd-item__svg sd-radio__svg",materialRadioDecorator:"sd-item__decorator sd-radio__decorator",itemRadioControl:"sd-visuallyhidden sd-item__control sd-radio__control",rootCheckbox:"sd-selectbase",checkboxItem:"sd-item sd-selectbase__item sd-checkbox",checkboxLabel:"sd-selectbase__label",checkboxItemOnError:"sd-item--error",checkboxItemIndeterminate:"sd-checkbox--intermediate",checkboxItemChecked:"sd-item--checked sd-checkbox--checked",checkboxItemDecorator:"sd-item__svg sd-checkbox__svg",checkboxItemDisabled:"sd-item--disabled sd-checkbox--disabled",checkboxItemReadOnly:"sd-item--readonly sd-checkbox--readonly",checkboxItemPreview:"sd-item--preview sd-checkbox--preview",controlCheckbox:"sd-visuallyhidden sd-item__control sd-checkbox__control",checkboxMaterialDecorator:"sd-item__decorator sd-checkbox__decorator",checkboxControlLabel:"sd-item__control-label",svgIconCheckedId:"#icon-check-16x16"},text:{root:"sd-input sd-text",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",constrolWithCharacterCounter:"sd-text__character-counter",characterCounterBig:"sd-text__character-counter--big",content:"sd-text__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},multipletext:{root:"sd-multipletext",rootMobile:"sd-multipletext--mobile",itemLabel:"sd-multipletext__item-container sd-input",itemLabelReadOnly:"sd-input--readonly",itemLabelDisabled:"sd-input--disabled",itemLabelPreview:"sd-input--preview",itemLabelOnError:"sd-multipletext__item-container--error",itemLabelAllowFocus:"sd-multipletext__item-container--allow-focus",itemLabelAnswered:"sd-multipletext__item-container--answered",itemWithCharacterCounter:"sd-multipletext-item__character-counter",item:"sd-multipletext__item",itemTitle:"sd-multipletext__item-title",content:"sd-multipletext__content sd-question__content",row:"sd-multipletext__row",cell:"sd-multipletext__cell",cellError:"sd-multipletext__cell--error",cellErrorTop:"sd-multipletext__cell--error-top",cellErrorBottom:"sd-multipletext__cell--error-bottom"},dropdown:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",onError:"sd-input--error",label:"sd-selectbase__label",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",item:"sd-item sd-radio sd-selectbase__item",itemDisabled:"sd-item--disabled sd-radio--disabled",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",cleanButtonIconId:"icon-cancel",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",control:"sd-input sd-dropdown",controlInputFieldComponent:"sd-dropdown__input-field-component",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-radio__decorator",hintPrefix:"sd-dropdown__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix"},imagepicker:{mainRoot:"sd-element sd-question sd-row__question",root:"sd-selectbase sd-imagepicker",rootResponsive:"sd-imagepicker--responsive",rootStatic:"sd-imagepicker--static",rootColumn:"sd-imagepicker--column",item:"sd-imagepicker__item",itemOnError:"sd-imagepicker__item--error",itemInline:"sd-imagepicker__item--inline",itemChecked:"sd-imagepicker__item--checked",itemDisabled:"sd-imagepicker__item--disabled",itemReadOnly:"sd-imagepicker__item--readonly",itemPreview:"sd-imagepicker__item--preview",itemHover:"sd-imagepicker__item--allowhover",label:"sd-imagepicker__label",itemDecorator:"sd-imagepicker__item-decorator",imageContainer:"sd-imagepicker__image-container",itemControl:"sd-imagepicker__control sd-visuallyhidden",image:"sd-imagepicker__image",itemText:"sd-imagepicker__text",itemNoImage:"sd-imagepicker__no-image",itemNoImageSvgIcon:"sd-imagepicker__no-image-svg",itemNoImageSvgIconId:"icon-no-image",column:"sd-selectbase__column sd-imagepicker__column",checkedItemDecorator:"sd-imagepicker__check-decorator",checkedItemSvgIcon:"sd-imagepicker__check-icon",checkedItemSvgIconId:"icon-check-24x24"},matrix:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",tableWrapper:"sd-matrix sd-table-wrapper",root:"sd-table sd-matrix__table",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",rootAlternateRows:"sd-table--alternate-rows",rowError:"sd-matrix__row--error",cell:"sd-table__cell sd-matrix__cell",row:"sd-table__row",rowDisabled:"sd-table__row-disabled",rowReadOnly:"sd-table__row-readonly",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-matrix__cell sd-table__cell--row-text",label:"sd-item sd-{type} sd-matrix__label",itemOnError:"sd-item--error",itemValue:"sd-visuallyhidden sd-item__control sd-{type}__control",itemChecked:"sd-item--checked sd-{type}--checked",itemDisabled:"sd-item--disabled sd-{type}--disabled",itemReadOnly:"sd-item--readonly sd-{type}--readonly",itemPreview:"sd-item--preview sd-{type}--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemHover:"sd-{type}--allowhover",materialDecorator:"sd-item__decorator sd-{type}__decorator",itemDecorator:"sd-item__svg sd-{type}__svg",cellText:"sd-matrix__text",cellTextSelected:"sd-matrix__text--checked",cellTextDisabled:"sd-matrix__text--disabled",cellResponsiveTitle:"sd-matrix__responsive-title",compact:"sd-element--with-frame sd-element--compact"},matrixdropdown:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",root:"sd-table sd-matrixdropdown",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",hasFooter:"sd-table--has-footer",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",tableWrapper:"sd-table-wrapper",rootAlternateRows:"sd-table--alternate-rows",cell:"sd-table__cell",cellResponsiveTitle:"sd-table__responsive-title",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",itemCell:"sd-table__cell--item",row:"sd-table__row",rowDelayedEnter:"sd-table__row--delayed-enter",rowEnter:"sd-table__row--enter",rowLeave:"sd-table__row--leave",expandedRow:"sd-table__row--expanded",rowHasPanel:"sd-table__row--has-panel",rowHasEndActions:"sd-table__row--has-end-actions",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",footerCell:"sd-table__cell sd-table__cell--footer",footerTotalCell:"sd-table__cell sd-table__cell--footer-total",columnTitleCell:"sd-table__cell--column-title",cellRequiredMark:"sd-question__required-text",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",detailRowCell:"sd-table__cell--detail",actionsCellPrefix:"sd-table__cell-action",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-matrix__question-wrapper sd-table__question-wrapper",compact:"sd-element--with-frame sd-element--compact"},matrixdynamic:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",empty:"sd-question--empty",root:"sd-table sd-matrixdynamic",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",hasFooter:"sd-table--has-footer",tableWrapper:"sd-table-wrapper",rootAlternateRows:"sd-table--alternate-rows",content:"sd-matrixdynamic__content sd-question__content",cell:"sd-table__cell",cellResponsiveTitle:"sd-table__responsive-title",row:"sd-table__row",rowEmpty:"sd-table__row--empty",rowDelayedEnter:"sd-table__row--delayed-enter",rowEnter:"sd-table__row--enter",rowLeave:"sd-table__row--leave",rowHasPanel:"sd-table__row--has-panel",rowHasEndActions:"sd-table__row--has-end-actions",expandedRow:"sd-table__row--expanded",itemCell:"sd-table__cell--item",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",footerCell:"sd-table__cell sd-table__cell--footer",columnTitleCell:"sd-table__cell--column-title",cellRequiredMark:"sd-question__required-text",button:"sd-action sd-matrixdynamic__btn",detailRow:"sd-table__row sd-table__row--detail",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",detailRowCell:"sd-table__cell--detail",actionsCellPrefix:"sd-table__cell-action",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",buttonAdd:"sd-matrixdynamic__add-btn",buttonRemove:"sd-action--negative sd-matrixdynamic__remove-btn",iconAdd:"sd-hidden",iconRemove:"",dragElementDecorator:"sd-drag-element__svg",iconDragElement:"#icon-drag-24x24",footer:"sd-matrixdynamic__footer",footerTotalCell:"sd-table__cell sd-table__cell--footer-total",noRowsSection:"sd-matrixdynamic__placeholder sd-question__placeholder",iconDrag:"sv-matrixdynamic__drag-icon",ghostRow:"sv-matrix-row--drag-drop-ghost-mod",draggedRow:"sv-matrixdynamic-dragged-row",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-matrix__question-wrapper sd-table__question-wrapper",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",compact:"sd-element--with-frame sd-element--compact"},rating:{rootDropdown:"sd-scrollable-container sd-scrollable-container--compact sd-selectbase",root:"sd-scrollable-container sd-rating",rootWrappable:"sd-rating--wrappable",rootLabelsTop:"sd-rating--labels-top",rootLabelsBottom:"sd-rating--labels-bottom",rootLabelsDiagonal:"sd-rating--labels-diagonal",item:"sd-rating__item",itemOnError:"sd-rating__item--error",itemHover:"sd-rating__item--allowhover",selected:"sd-rating__item--selected",itemStar:"sd-rating__item-star",itemStarOnError:"sd-rating__item-star--error",itemStarHover:"sd-rating__item-star--allowhover",itemStarSelected:"sd-rating__item-star--selected",itemStarDisabled:"sd-rating__item-star--disabled",itemStarReadOnly:"sd-rating__item-star--readonly",itemStarPreview:"sd-rating__item-star--preview",itemStarHighlighted:"sd-rating__item-star--highlighted",itemStarUnhighlighted:"sd-rating__item-star--unhighlighted",itemStarSmall:"sd-rating__item-star--small",itemSmiley:"sd-rating__item-smiley",itemSmileyOnError:"sd-rating__item-smiley--error",itemSmileyHover:"sd-rating__item-smiley--allowhover",itemSmileySelected:"sd-rating__item-smiley--selected",itemSmileyDisabled:"sd-rating__item-smiley--disabled",itemSmileyReadOnly:"sd-rating__item-smiley--readonly",itemSmileyPreview:"sd-rating__item-smiley--preview",itemSmileyHighlighted:"sd-rating__item-star--highlighted",itemSmileyScaleColored:"sd-rating__item-smiley--scale-colored",itemSmileyRateColored:"sd-rating__item-smiley--rate-colored",itemSmileySmall:"sd-rating__item-smiley--small",minText:"sd-rating__item-text sd-rating__min-text",itemText:"sd-rating__item-text",maxText:"sd-rating__item-text sd-rating__max-text",itemDisabled:"sd-rating__item--disabled",itemReadOnly:"sd-rating__item--readonly",itemPreview:"sd-rating__item--preview",itemFixedSize:"sd-rating__item--fixed-size",control:"sd-input sd-dropdown",itemSmall:"sd-rating--small",selectWrapper:"sv-dropdown_select-wrapper",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty",filterStringInput:"sd-dropdown__filter-string-input",chevronButtonIconId:"icon-chevron",popup:"sv-dropdown-popup",onError:"sd-input--error"},slider:{root:"sd-slider",rootSingleMode:"sd-slider--single",rootNegativeScaleMode:"sd-slider--negative-scale",rootDesignMode:"sd-slider--design-mode",rootAnimatedThumbMode:"sd-slider--animated-thumb-mode",visualContainer:"sd-slider-container",visualContainerSlider:"sd-slider-container__slider",rangeTrack:"sd-slider__track sd-slider__range-track",inverseTrackLeft:"sd-slider__track sd-slider__inverse-track sd-slider__inverse-track--left",inverseTrackRight:"sd-slider__track sd-slider__inverse-track sd-slider__inverse-track--right",thumbContainer:"sd-slider__thumb-container",thumbContainerIndeterminateMode:"sd-slider__thumb-container--indeterminate",thumbContainerFocusedMode:"sd-slider__thumb-container--focused",thumb:"sd-slider__thumb",thumbDot:"sd-slider__thumb-dot",tooltip:"sd-slider__tooltip",tooltipPanel:"sd-slider__tooltip-panel",tooltipOnHoverMode:"sd-slider__tooltip--on-hover",tooltipValue:"sd-slider__tooltip-value",input:"sd-slider__input",labelsContainer:"sd-slider-labels-container",label:"sd-slider__label",labelLongMod:"sd-slider__label--long",labelTick:"sd-slider__label-tick",labelText:"sd-slider__label-text",clearButton:""},comment:{root:"sd-input sd-comment",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",content:"sd-comment__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},expression:"sd-expression",file:{root:"sd-file",rootDragging:"sd-file--dragging",rootAnswered:"sd-file--answered",rootDisabled:"sd-file--disabled",rootReadOnly:"sd-file--readonly",rootPreview:"sd-file--preview",placeholderInput:"sd-visuallyhidden",previewItem:"sd-file__preview-item",fileSign:"",fileList:"sd-file__list",fileSignBottom:"sd-file__sign",dragArea:"sd-file__drag-area",dragAreaActive:"sd-file__drag-area--active",fileDecorator:"sd-file__decorator",onError:"sd-file__decorator--error",fileDecoratorDrag:"sd-file__decorator--drag",fileInput:"sd-visuallyhidden",chooseFile:"sd-file__choose-btn",chooseFileAsText:"sd-action sd-file__choose-btn--text",chooseFileAsTextDisabled:"sd-action--disabled",chooseFileAsIcon:"sd-file__choose-btn--icon",chooseFileIconId:"icon-choosefile",disabled:"sd-file__choose-btn--disabled",controlDisabled:"sd-file__choose-file-btn--disabled",removeButton:"sd-context-btn--negative",removeButtonBottom:"",removeButtonIconId:"icon-clear",removeFile:"sd-hidden",removeFileSvg:"",removeFileSvgIconId:"icon-close_16x16",wrapper:"sd-file__wrapper",defaultImage:"sd-file__default-image",defaultImageIconId:"icon-defaultfile",leftIconId:"icon-arrowleft",rightIconId:"icon-arrowright",removeFileButton:"sd-context-btn--small sd-context-btn--with-border sd-context-btn--colorful sd-context-btn--negative sd-file__remove-file-button",dragAreaPlaceholder:"sd-file__drag-area-placeholder",imageWrapper:"sd-file__image-wrapper",imageWrapperDefaultImage:"sd-file__image-wrapper--default-image",single:"sd-file--single",singleImage:"sd-file--single-image",mobile:"sd-file--mobile",videoContainer:"sd-file__video-container",contextButton:"sd-context-btn",video:"sd-file__video",actionsContainer:"sd-file__actions-container",closeCameraButton:"sd-file__close-camera-button",changeCameraButton:"sd-file__change-camera-button",takePictureButton:"sd-file__take-picture-button",loadingIndicator:"sd-file__loading-indicator",page:"sd-file__page"},signaturepad:{mainRoot:"sd-element sd-question sd-question--signature sd-row__question",root:"sd-signaturepad sjs_sp_container",small:"sd-row__question--small",controls:"sjs_sp_controls sd-signaturepad__controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas sd-signaturepad__canvas",backgroundImage:"sjs_sp__background-image sd-signaturepad__background-image",clearButton:"sjs_sp_clear sd-context-btn sd-context-btn--negative sd-signaturepad__clear",clearButtonIconId:"icon-clear",loadingIndicator:"sd-signaturepad__loading-indicator"},saveData:{root:"sv-save-data_root",rootWithButtons:"sv-save-data_root--with-buttons",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",rootCollapsedMod:"sv_window--collapsed",rootFullScreenMode:"sv_window--full-screen",rootContent:"sv_window_root-content",body:"sv_window_content",header:{root:"sv_window_header",titleCollapsed:"sv_window_header_title_collapsed",buttonsContainer:"sv_window_buttons_container",button:"sv_window_button",buttonExpanded:"",buttonCollapsed:"",collapseButton:"sv_window_button sv_window_button_collapse",closeButton:"sv_window_button sv_window_button_close",fullScreenButton:"sv_window_button sv_window_button_full_screen"}},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sd-ranking--disabled",rootReadOnly:"sd-ranking--readonly",rootPreview:"sd-ranking--preview",rootDesignMode:"sv-ranking--design-mode",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankEmptyValueMod:"sv-ranking--select-to-rank-empty-value",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",rootSelectToRankSwapAreas:"sv-ranking--select-to-rank-swap-areas",item:"sv-ranking-item",itemContent:"sv-ranking-item__content sd-ranking-item__content",itemIndex:"sv-ranking-item__index sd-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty sd-ranking-item__index--empty",itemDisabled:"sv-ranking-item--disabled",itemReadOnly:"sv-ranking-item--readonly",itemPreview:"sv-ranking-item--preview",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking--drag",itemOnError:"sv-ranking-item--error",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},buttongroup:{root:"sd-button-group-scrollable-container sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden",rootDropdown:"sd-button-group-scrollable-container sd-scrollable-container--compact sd-selectbase",selectWrapper:"sv-dropdown_select-wrapper",control:"sd-input sd-dropdown",controlEmpty:"sd-dropdown--empty",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlLabel:"sd-item__control-label",filterStringInput:"sd-dropdown__filter-string-input",chevronButtonIconId:"icon-chevron",popup:"sv-dropdown-popup",cleanButtonIconId:"icon-cancel",hintPrefix:"sd-dropdown__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix"},list:{root:"sv-list__container sd-list",item:"sv-list__item sd-list__item",itemBody:"sv-list__item-body sd-list__item-body",itemSelected:"sv-list__item--selected sd-list__item--selected",itemFocused:"sv-list__item--focused sd-list__item--focused",itemHovered:"sv-list__item--hovered sd-list__item--hovered"},actionBar:{root:"sd-action-bar",item:"sd-action",defaultSizeMode:"",smallSizeMode:"",itemPressed:"sd-action--pressed",itemAsIcon:"sd-action--icon",itemIcon:"sd-action__icon",itemTitle:"sd-action__title"},variables:{mobileWidth:"--sd-mobile-width",themeMark:"--sv-defaultV2-mark"},tagbox:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",onError:"sd-input--error",label:"sd-selectbase__label",itemSvgIconId:"#icon-check-16x16",item:"sd-item sd-checkbox sd-selectbase__item",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",cleanButtonIconId:"icon-cancel-24x24",cleanItemButton:"sd-tagbox-item_clean-button",cleanItemButtonSvg:"sd-tagbox-item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",chevronButtonIconId:"icon-chevron",control:"sd-input sd-tagbox sd-dropdown",controlValue:"sd-tagbox__value sd-dropdown__value",controlValueItems:"sd-tagbox__value-items",placeholderInput:"sd-tagbox__placeholder",controlEditable:"sd-input--editable",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty sd-tagbox--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-tagbox__filter-string-input sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-checkbox__decorator",hint:"sd-tagbox__hint",hintPrefix:"sd-dropdown__hint-prefix sd-tagbox__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix sd-tagbox__hint-suffix",hintSuffixWrapper:"sd-tagbox__hint-suffix-wrapper"}};sn.default=nn;var rn={setTimeout:e=>rn.safeTimeOut(e,1e3),clearTimeout:e=>{clearTimeout(e)},safeTimeOut:(e,t)=>t<=0?(e(),0):setTimeout(e,t),now:()=>Date.now()};class an{constructor(){this.listenerCounter=0,this.timerId=-1,this.onTimerTick=new ge,this.onTimer=this.onTimerTick}static get instance(){return an.instanceValue||(an.instanceValue=new an),an.instanceValue}start(e=null){e&&this.onTimerTick.add(e),this.prevTimeInMs=rn.now(),this.timerId<0&&(this.timerId=rn.setTimeout(()=>{this.doTimer()})),this.listenerCounter++}stop(e=null){e&&this.onTimerTick.remove(e),this.listenerCounter--,0==this.listenerCounter&&this.timerId>-1&&(rn.clearTimeout(this.timerId),this.timerId=-1)}doTimer(){if((this.onTimerTick.isEmpty||0==this.listenerCounter)&&(this.timerId=-1),this.timerId<0)return;const e=rn.now();let t=Math.floor((e-this.prevTimeInMs)/1e3);this.prevTimeInMs=e,t<0&&(t=1);const s=this.timerId;this.onTimerTick.fire(this,{seconds:t}),s===this.timerId&&(this.timerId=rn.setTimeout(()=>{this.doTimer()}))}}an.instanceValue=null;class on extends he{constructor(e){super(),this.timerFunc=null,this.surveyValue=e,this.onCreating()}get survey(){return this.surveyValue}onCreating(){}start(){this.survey&&(this.isRunning||this.isDesignMode||(this.survey.onCurrentPageChanged.add(()=>{this.update()}),this.timerFunc=(e,t)=>{this.doTimer(t.seconds)},this.setIsRunning(!0),this.update(),an.instance.start(this.timerFunc)))}stop(){this.isRunning&&(this.setIsRunning(!1),an.instance.stop(this.timerFunc))}get isRunning(){return this.getPropertyValue("isRunning",!1)}setIsRunning(e){this.setPropertyValue("isRunning",e)}update(){this.updateText(),this.updateProgress()}doTimer(e){var t=this.survey.currentPage;if(t){const s=t.getMaxTimeToFinish();s>0&&s<t.timeSpent+e&&(e=s-t.timeSpent),t.timeSpent=t.timeSpent+e}this.spent=this.spent+e,this.update(),this.onTimerTick&&this.onTimerTick(t)}updateProgress(){let{spent:e,limit:t}=this.survey.timerInfo;t?(0==e?(this.progress=0,setTimeout(()=>{this.progress=Math.floor((e+1)/t*100)/100},0)):e<=t&&(this.progress=Math.floor((e+1)/t*100)/100),this.progress>1&&(this.progress=void 0)):this.progress=void 0}updateText(){let e=this.survey.timerClock;this.clockMajorText=e.majorText,this.clockMinorText=e.minorText,this.text=this.survey.timerInfoText}get showProgress(){return void 0!==this.progress}get showTimerAsClock(){return!!this.survey.getCss().clockTimerRoot}get rootCss(){return(new fe).append(this.survey.getCss().clockTimerRoot).append(this.survey.getCss().clockTimerRootTop,this.survey.isTimerPanelShowingOnTop).append(this.survey.getCss().clockTimerRootBottom,this.survey.isTimerPanelShowingOnBottom).toString()}getProgressCss(){return(new fe).append(this.survey.getCss().clockTimerProgress).append(this.survey.getCss().clockTimerProgressAnimation,this.progress>0).toString()}get textContainerCss(){return this.survey.getCss().clockTimerTextContainer}get minorTextCss(){return this.survey.getCss().clockTimerMinorText}get majorTextCss(){return this.survey.getCss().clockTimerMajorText}}me([d()],on.prototype,"text",void 0),me([d()],on.prototype,"progress",void 0),me([d()],on.prototype,"clockMajorText",void 0),me([d()],on.prototype,"clockMinorText",void 0),me([d({defaultValue:0})],on.prototype,"spent",void 0);class ln extends he{constructor(e){super(),this.cssClasses=e,this.timeout=xt.notifications.lifetime,this.timer=void 0,this.actionsVisibility={},this.showActions=!0,this.actionBar=new Ce,this.actionBar.setCssClasses({root:ye.root,defaultSizeMode:ye.defaultSizeMode,smallSizeMode:ye.smallSizeMode},!1),this.css=this.cssClasses.root}getCssClass(e){return(new fe).append(this.cssClasses.root).append(this.cssClasses.rootWithButtons,this.actionBar.getVisibleActions().length>0).append(this.cssClasses.info,"error"!==e&&"success"!==e).append(this.cssClasses.error,"error"===e).append(this.cssClasses.success,"success"===e).append(this.cssClasses.shown,this.active).toString()}updateActionsVisibility(e){this.actionBar.actions.forEach(t=>t.visible=this.showActions&&this.actionsVisibility[t.id]===e)}notify(e,t="info",s=!1){this.isDisplayed=!0,setTimeout(()=>{this.updateActionsVisibility(t),this.message=e,this.active=!0,this.css=this.getCssClass(t),this.timer&&(clearTimeout(this.timer),this.timer=void 0),s||(this.timer=setTimeout(()=>{this.timer=void 0,this.active=!1,this.css=this.getCssClass(t)},this.timeout))},1)}addAction(e,t){e.visible=!1,e.innerCss=this.cssClasses.button;const s=this.actionBar.addAction(e);this.actionsVisibility[s.id]=t}}me([d({defaultValue:!1})],ln.prototype,"active",void 0),me([d({defaultValue:!1})],ln.prototype,"isDisplayed",void 0),me([d()],ln.prototype,"message",void 0),me([d()],ln.prototype,"css",void 0);class un{calcRow(e){return"top"===e?1:"middle"===e?2:3}calcColumn(e){return"left"===e?1:"center"===e?2:3}calcAlignItems(e){return"left"===e?"flex-start":"center"===e?"center":"flex-end"}calcAlignText(e){return"left"===e?"start":"center"===e?"center":"end"}calcJustifyContent(e){return"top"===e?"flex-start":"middle"===e?"center":"flex-end"}calcGridRow(){const e=this.calcRow(this.positionY);if(this.cover.renderedHeight)return e;const t=this.cover.getVisibleRows(),s=t.indexOf(e);if(-1===s)return 0;const n=t.length;return 3===n?e:1===n?1:s+1}constructor(e,t,s){this.cover=e,this.positionX=t,this.positionY=s}get survey(){return this.cover.survey}get css(){return(new fe).append(un.CLASSNAME).append(`${un.CLASSNAME}--${this.positionX}`).append(`${un.CLASSNAME}--${this.positionY}`).append(un.CLASSNAME+"--empty",this.isEmpty).toString()}get style(){const e=this.calcGridRow(),t={};return t.gridRow=e,t.gridColumn=0!==e?this.calcColumn(this.positionX):0,t.width=this.width?this.width+"px":void 0,0===e&&(t.display="none"),t}get contentStyle(){const e={};return e.textAlign=this.calcAlignText(this.positionX),e.alignItems=this.calcAlignItems(this.positionX),e.justifyContent=this.calcJustifyContent(this.positionY),e.maxWidth=this.contentMaxWidth,e}get showLogo(){return this.survey.hasLogo&&this.positionX===this.cover.logoPositionX&&this.positionY===this.cover.logoPositionY}get showTitle(){return this.survey.hasTitle&&this.positionX===this.cover.titlePositionX&&this.positionY===this.cover.titlePositionY}get showDescription(){return this.survey.renderedHasDescription&&this.positionX===this.cover.descriptionPositionX&&this.positionY===this.cover.descriptionPositionY}get isEmpty(){return!this.showLogo&&!this.showTitle&&!this.showDescription}get textAreaWidth(){return this.cover.renderedTextAreaWidth}get width(){if(this.cover.width)return Math.ceil(this.cover.width/3)}get contentMaxWidth(){return this.cover.getContentMaxWidth(this)}}un.CLASSNAME="sv-header__cell";class dn extends he{calcBackgroundSize(e){return"fill"===e?"100% 100%":"tile"===e?"auto":e}updateHeaderClasses(){const e=!this.backgroundColor||"transparent"===this.backgroundColor,t="var(--sjs-primary-backcolor)"===this.backgroundColor,s=!e&&!t;this.headerClasses=(new fe).append("sv-header").append("sv-header--height-auto",!this.renderedHeight).append("sv-header__without-background",e&&!this.backgroundImage).append("sv-header__background-color--none",e&&!this.titleColor&&!this.descriptionColor).append("sv-header__background-color--accent",t&&!this.titleColor&&!this.descriptionColor).append("sv-header__background-color--custom",s&&!this.titleColor&&!this.descriptionColor).append("sv-header__overlap",this.overlapEnabled).toString()}updateContentClasses(){const e=!!this.survey&&this.survey.calculateWidthMode(),t="survey"===this.inheritWidthFrom&&!!e&&"static"===e;if(this.maxWidth=t?this.survey.width:void 0,this.maxWidth){const e=this.maxWidth.toString();-1===e.indexOf("px")&&-1===e.indexOf("%")&&(this.maxWidth=parseFloat(e)+"px")}this.contentClasses=(new fe).append("sv-header__content").append("sv-header__content--static",t).append("sv-header__content--responsive","container"===this.inheritWidthFrom||!!e&&"responsive"===e).toString()}updateBackgroundImageClasses(){this.backgroundImageClasses=(new fe).append("sv-header__background-image").append("sv-header__background-image--contain","contain"===this.backgroundImageFit).append("sv-header__background-image--tile","tile"===this.backgroundImageFit).toString()}fromTheme(e){super.fromJSON(e.header||{}),e.cssVariables&&(this.backgroundColor=e.cssVariables["--sjs-header-backcolor"],this.titleColor=e.cssVariables["--sjs-font-headertitle-color"],this.descriptionColor=e.cssVariables["--sjs-font-headerdescription-color"]),this.init()}init(){this.renderBackgroundImage=tt(this.backgroundImage),this.updateHeaderClasses(),this.updateContentClasses(),this.updateBackgroundImageClasses()}constructor(){super(),this.cells=[],["top","middle","bottom"].forEach(e=>["left","center","right"].forEach(t=>this.cells.push(new un(this,t,e)))),this.init()}getType(){return"cover"}get renderedHeight(){return this.survey&&!this.survey.isMobile||!this.survey?this.height?this.height+"px":void 0:this.survey&&this.survey.isMobile&&this.mobileHeight?this.mobileHeight+"px":void 0}get renderedTextAreaWidth(){return this.textAreaWidth?this.textAreaWidth+"px":void 0}get isEmpty(){return!this.survey.hasLogo&&!this.survey.hasTitle&&!this.survey.renderedHasDescription}get survey(){return this._survey}set survey(e){this._survey!==e&&(this._survey=e,e&&(this.updateContentClasses(),this._survey.onPropertyChanged.add((e,t)=>{"widthMode"!=t.name&&"width"!=t.name||this.updateContentClasses()})))}get backgroundImageStyle(){return this.backgroundImage?{opacity:this.backgroundImageOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.calcBackgroundSize(this.backgroundImageFit)}:null}propertyValueChanged(e,t,s,n,i){super.propertyValueChanged(e,t,s),"height"!==e&&"backgroundColor"!==e&&"backgroundImage"!==e&&"overlapEnabled"!==e||this.updateHeaderClasses(),"inheritWidthFrom"===e&&this.updateContentClasses(),"backgroundImageFit"===e&&this.updateBackgroundImageClasses()}getVisibleRows(){const e=[];for(let t=0;t<3;t++){const s=3*t;this.cells[s].isEmpty&&this.cells[s+1].isEmpty&&this.cells[s+2].isEmpty||e.push(t+1)}return 0!==e.length?e:[1,2,3]}getContentMaxWidth(e){if(e.isEmpty||e.showLogo)return;const t=this.cells.indexOf(e),s=Math.floor(t/3),n=t%3;if(1==n){if(!this.cells[3*s].isEmpty||!this.cells[3*s+2].isEmpty)return"100%"}else{if(0==n){let e=0,t=n+1;for(;t<3&&this.cells[3*s+t].isEmpty;)this.cells[3*s+t].isEmpty&&e++,t++;return 100*(e+1)+"%"}if(2==n){let e=0,t=n-1;for(;t>0&&this.cells[3*s+t].isEmpty;)this.cells[3*s+t].isEmpty&&e++,t--;return 100*(e+1)+"%"}}}processResponsiveness(){if(this.survey&&this.survey.rootElement&&!this.survey.isMobile){const e=this.survey.rootElement.querySelectorAll(".sv-header__content")[0];if(!e)return;let t=e.getBoundingClientRect().width;const s=i.getComputedStyle(e),n=parseFloat(s.paddingLeft)||0,r=parseFloat(s.paddingRight)||0,a=parseFloat(s.columnGap)||0;this.width=t-n-r-2*a}}get hasBackground(){return!!this.backgroundImage||"transparent"!==this.backgroundColor}}me([d()],dn.prototype,"height",void 0),me([d()],dn.prototype,"mobileHeight",void 0),me([d()],dn.prototype,"inheritWidthFrom",void 0),me([d()],dn.prototype,"textAreaWidth",void 0),me([d()],dn.prototype,"textGlowEnabled",void 0),me([d()],dn.prototype,"overlapEnabled",void 0),me([d({defaultValue:"transparent"})],dn.prototype,"backgroundColor",void 0),me([d()],dn.prototype,"titleColor",void 0),me([d()],dn.prototype,"descriptionColor",void 0),me([d({onSet:(e,t)=>{t.renderBackgroundImage=tt(e)}})],dn.prototype,"backgroundImage",void 0),me([d()],dn.prototype,"renderBackgroundImage",void 0),me([d()],dn.prototype,"backgroundImageFit",void 0),me([d()],dn.prototype,"backgroundImageOpacity",void 0),me([d()],dn.prototype,"logoPositionX",void 0),me([d()],dn.prototype,"logoPositionY",void 0),me([d()],dn.prototype,"titlePositionX",void 0),me([d()],dn.prototype,"titlePositionY",void 0),me([d()],dn.prototype,"descriptionPositionX",void 0),me([d()],dn.prototype,"descriptionPositionY",void 0),me([d()],dn.prototype,"logoStyle",void 0),me([d()],dn.prototype,"titleStyle",void 0),me([d()],dn.prototype,"descriptionStyle",void 0),me([d()],dn.prototype,"headerClasses",void 0),me([d()],dn.prototype,"contentClasses",void 0),me([d()],dn.prototype,"width",void 0),me([d()],dn.prototype,"maxWidth",void 0),me([d()],dn.prototype,"backgroundImageClasses",void 0),I.addClass("cover",[{name:"height:number",minValue:0,default:0},{name:"mobileHeight:number",minValue:0,default:0},{name:"inheritWidthFrom",default:"survey"},{name:"textAreaWidth:number",minValue:0,default:0},{name:"textGlowEnabled:boolean"},{name:"overlapEnabled:boolean"},{name:"backgroundImage:file"},{name:"backgroundImageOpacity:number",minValue:0,maxValue:1,default:1},{name:"backgroundImageFit",default:"cover",choices:["cover","fill","contain"]},{name:"logoPositionX",default:"left"},{name:"logoPositionY",default:"top"},{name:"titlePositionX",default:"left"},{name:"titlePositionY",default:"bottom"},{name:"descriptionPositionX",default:"left"},{name:"descriptionPositionY",default:"bottom"}],function(){return new dn});class hn{constructor(e){this.type=e,this.timestamp=new Date}}class cn extends he{constructor(){super(),this.taskList=[],this.onAllTasksCompleted=this.addEvent()}runTask(e,t){const s=new hn(e);return this.taskList.push(s),this.hasActiveTasks=!0,t(()=>this.taskFinished(s)),s}waitAndExecute(e){this.hasActiveTasks?this.onAllTasksCompleted.add(()=>{e()}):e()}taskFinished(e){const t=this.taskList.indexOf(e);t>-1&&this.taskList.splice(t,1),this.hasActiveTasks&&0==this.taskList.length&&(this.hasActiveTasks=!1,this.onAllTasksCompleted.fire(this,{}))}}me([d({defaultValue:!1})],cn.prototype,"hasActiveTasks",void 0);class pn extends he{constructor(e,t){super(),this.effectiveWidth=e,this.questionTitleWidth=t}getType(){return"panellayoutcolumn"}isEmpty(){return!this.width&&!this.questionTitleWidth}}me([d()],pn.prototype,"width",void 0),me([d({onSet:(e,t,s)=>{e!==s&&(t.width=e)}})],pn.prototype,"effectiveWidth",void 0),me([d()],pn.prototype,"questionTitleWidth",void 0),I.addClass("panellayoutcolumn",[{name:"effectiveWidth:number",isSerializable:!1,minValue:0},{name:"width:number",visible:!1},"questionTitleWidth"],e=>new pn);class gn extends he{static getRowId(){return"pr_"+gn.rowCounter++}get allowRendering(){return!this.panel||!this.panel.survey||!this.panel.survey.isLazyRenderingSuspended}startLazyRendering(e,t=Xe){if(!i.isAvailable())return;this._scrollableParent=t(e),this._scrollableParent===i.getDocumentElement()&&(this._scrollableParent=n.getWindow());const s=this._scrollableParent.scrollHeight>this._scrollableParent.clientHeight;this.isNeedRender=!s,s&&(this._updateVisibility=()=>{if(this.allowRendering){var t=function(e,t=0){if(void 0===xt.environment||!e.offsetHeight)return!1;const{root:s}=xt.environment,i=$e(s)?s.host.clientHeight:s.documentElement.clientHeight,r=e.getBoundingClientRect(),a=-t,o=Math.max(i,n.getInnerHeight())+t,l=r.top,u=r.bottom;return Math.max(a,l)<=Math.min(o,u)}(e,50);!this.isNeedRender&&t&&(this.isNeedRender=!0,this.stopLazyRendering())}},this.lazyRenderingTimeout=setTimeout(()=>{this._scrollableParent&&this._scrollableParent.addEventListener&&this._scrollableParent.addEventListener("scroll",this._updateVisibility),this.ensureVisibility()},10))}ensureVisibility(){this._updateVisibility&&this._updateVisibility()}stopLazyRendering(){this._scrollableParent&&this._updateVisibility&&this._scrollableParent.removeEventListener&&this._scrollableParent.removeEventListener("scroll",this._updateVisibility),clearTimeout(this.lazyRenderingTimeout),this._scrollableParent=void 0,this._updateVisibility=void 0}constructor(e){super(),this.panel=e,this._scrollableParent=void 0,this._updateVisibility=void 0,this.visibleElementsAnimation=new He(this.getVisibleElementsAnimationOptions(),e=>{this.setWidth(e),this.setPropertyValue("visibleElements",e)},()=>this.visibleElements),this.idValue=gn.getRowId(),this.visible=e.areInvisibleElementsShowing,this.createNewArray("elements"),this.createNewArray("visibleElements")}setIsLazyRendering(e){this.isLazyRenderingValue=e,this.isNeedRender=!e}isLazyRendering(){return!0===this.isLazyRenderingValue}get id(){return this.idValue}equalsCore(e){return this==e}get elements(){return this.getPropertyValue("elements")}getIsAnimationAllowed(){var e;return super.getIsAnimationAllowed()&&this.visible&&(null===(e=this.panel)||void 0===e?void 0:e.animationAllowed)}getVisibleElementsAnimationOptions(){const e=e=>{bt(e),ft(e,{width:ct(e)+"px"})};return{getRerenderEvent:()=>this.onElementRerendered,isAnimationEnabled:()=>this.animationAllowed,allowSyncRemovalAddition:!1,getAnimatedElement:e=>e.getWrapperElement(),getLeaveOptions:t=>{const s=t;return{cssClass:(t.isPanel?s.cssClasses.panel:s.cssClasses).leave,onBeforeRunAnimation:e,onAfterRunAnimation:yt}},getEnterOptions:t=>{const s=t;return{cssClass:(t.isPanel?s.cssClasses.panel:s.cssClasses).enter,onBeforeRunAnimation:e,onAfterRunAnimation:yt}}}}set visibleElements(e){if(!e.length)return this.visible=!1,void this.visibleElementsAnimation.cancel();this.visible=!0,this.visibleElementsAnimation.sync(e)}get visibleElements(){return this.getPropertyValue("visibleElements")}get visible(){return this.getPropertyValue("visible",!0)}set visible(e){this.setPropertyValue("visible",e),this.onVisibleChangedCallback&&this.onVisibleChangedCallback()}get isNeedRender(){return this.getPropertyValue("isneedrender",!0)}set isNeedRender(e){this.setPropertyValue("isneedrender",e)}updateVisible(){for(var e=[],t=0;t<this.elements.length;t++)this.elements[t].isVisible&&e.push(this.elements[t]),(this.elements[t].isPanel||"paneldynamic"===this.elements[t].getType())&&(this.setIsLazyRendering(!1),this.stopLazyRendering());this.visibleElements=e}addElement(e){this.elements.push(e),this.updateVisible()}get index(){return this.panel.rows.indexOf(this)}setWidth(e){var t=e.length;if(0==t)return;const s=1===e.length;for(var n=[],i=0;i<this.elements.length;i++)if((a=this.elements[i]).isVisible){a.isSingleInRow=s;var r=this.getElementWidth(a);r&&(a.renderWidth=this.getRenderedWidthFromWidth(r),n.push(a)),a.rightIndent=0}else a.renderWidth="";for(i=0;i<this.elements.length;i++){var a;!(a=this.elements[i]).isVisible||n.indexOf(a)>-1||(0==n.length?a.renderWidth=`${Number.parseFloat((100/t).toFixed(6))}%`:a.renderWidth=this.getRenderedCalcWidth(a,n,t))}}getRenderedCalcWidth(e,t,s){for(var n="100%",i=0;i<t.length;i++)n+=" - "+t[i].renderWidth;var r=s-t.length;return r>1&&(n="("+n+")/"+r.toString()),"calc("+n+")"}getElementWidth(e){var t=e.width;return t&&"string"==typeof t?t.trim():""}getRenderedWidthFromWidth(e){return a.isNumber(e)?e+"px":e}dispose(){super.dispose(),this.stopLazyRendering()}getRowCss(){return(new fe).append(this.panel.cssClasses.row).append(this.panel.cssClasses.rowCompact,this.panel.isCompact).append(this.panel.cssClasses.pageRow,this.panel.isPage||this.panel.showPanelAsPage).append(this.panel.cssClasses.rowMultiple,this.visibleElements.length>1).toString()}setRootElement(e){this.rootElement=e}getRootElement(){return this.rootElement}}gn.rowCounter=100;class mn extends We{static getPanelId(){return"sp_"+mn.panelCounter++}get gridLayoutColumns(){let e=this.getPropertyValue("gridLayoutColumns");return this._columns||(this.generateColumns([].concat(e)),e=this._columns,this.gridLayoutColumns=e),e}set gridLayoutColumns(e){this.setPropertyValue("gridLayoutColumns",e)}onAddRow(e){this.onRowVisibleChanged(),e.onVisibleChangedCallback=()=>this.onRowVisibleChanged()}getRowsAnimationOptions(){return{getRerenderEvent:()=>this.onElementRerendered,isAnimationEnabled:()=>this.animationAllowed,getAnimatedElement:e=>e.getRootElement(),getLeaveOptions:(e,t)=>({cssClass:this.cssClasses.rowLeave,onBeforeRunAnimation:bt,onAfterRunAnimation:yt}),getEnterOptions:(e,t)=>{const s=this.cssClasses;return{cssClass:(new fe).append(s.rowEnter).append(s.rowDelayedEnter,t.isDeletingRunning).toString(),onBeforeRunAnimation:bt,onAfterRunAnimation:yt}}}}get visibleRows(){return this.getPropertyValue("visibleRows")}set visibleRows(e){this.rowsAnimation.sync(e)}onRemoveRow(e){e.visibleElementsAnimation.cancel(),this.visibleRows=this.rows.filter(e=>e.visible),e.onVisibleChangedCallback=void 0}onRowVisibleChanged(){this.visibleRows=this.rows.filter(e=>e.visible)}constructor(e=""){super(e),this.isQuestionsReady=!1,this.questionsValue=new Array,this._columns=void 0,this._columnsReady=!1,this.rowsAnimation=new He(this.getRowsAnimationOptions(),e=>{this.setPropertyValue("visibleRows",e)},()=>this.visibleRows),this.isRandomizing=!1,this.onColumnPropertyValueChangedCallback=(e,t,s,n,i)=>{this._columnsReady&&(this.updateColumnWidth(this.gridLayoutColumns),this.updateRootStyle())},this.locCountRowUpdates=0,this.createNewArray("rows",(e,t)=>{this.onAddRow(e)},e=>{this.onRemoveRow(e)}),this.createNewArray("visibleRows"),this.createNewArray("gridLayoutColumns",e=>{e.onPropertyValueChangedCallback=this.onColumnPropertyValueChangedCallback}),this.elementsValue=this.createNewArray("elements",this.onAddElement.bind(this),this.onRemoveElement.bind(this)),this.setPropertyValueDirectly("id",mn.getPanelId()),this.addExpressionProperty("visibleIf",(e,t)=>{this.visible=!0===t},e=>!this.areInvisibleElementsShowing),this.addExpressionProperty("enableIf",(e,t)=>{this.readOnly=!1===t}),this.addExpressionProperty("requiredIf",(e,t)=>{this.isRequired=!0===t}),this.createLocalizableString("requiredErrorText",this),this.createLocalizableString("navigationTitle",this,!0).onGetTextCallback=e=>e||this.title||this.name,this.registerPropertyChangedHandlers(["questionTitleLocation"],()=>{this.onVisibleChanged.bind(this),this.updateElementCss(!0)}),this.registerPropertyChangedHandlers(["questionStartIndex","showQuestionNumbers"],()=>{this.updateVisibleIndexes()}),this.registerPropertyChangedHandlers(["title"],()=>{this.resetHasTextInTitle()})}getType(){return"panelbase"}setSurveyImpl(e,t){this.blockAnimations(),super.setSurveyImpl(e,t),this.isDesignMode&&this.onVisibleChanged();for(var s=0;s<this.elements.length;s++)this.elements[s].setSurveyImpl(e,t);this.releaseAnimations()}endLoadingFromJson(){super.endLoadingFromJson(),this.markQuestionListDirty(),this.onRowsChanged()}get hasTextInTitle(){return this.getPropertyValue("hasTextInTitle",void 0,()=>!!this.title)}resetHasTextInTitle(){this.resetPropertyValue("hasTextInTitle")}get hasTitle(){return this.canShowTitle(this.survey)&&(this.hasTextInTitle||this.locTitle.textOrHtml.length>0)||this.isDesignMode&&!this.isPanel&&this.showTitle&&xt.designMode.showEmptyTitles}delete(e=!0){this.deletePanel(),this.removeFromParent(),e&&this.dispose()}deletePanel(){const e=this.elements;for(let t=0;t<e.length;t++){const s=e[t];s.isPanel&&s.deletePanel(),this.onRemoveElementNotifySurvey(s)}}removeFromParent(){}canShowTitle(e){return!0}getDefaultTitleTagName(){return xt.titleTags.panel}get _showDescription(){return!(!this.hasTitle&&this.isDesignMode)&&(this.survey&&this.survey.showPageTitles&&this.hasDescription||this.showDescription&&this.isDesignMode&&xt.designMode.showEmptyDescriptions)}localeChanged(){super.localeChanged();for(var e=0;e<this.elements.length;e++)this.elements[e].localeChanged()}locStrsChanged(){super.locStrsChanged();for(var e=0;e<this.elements.length;e++)this.elements[e].locStrsChanged()}getMarkdownHtml(e,t,s){return"navigationTitle"===t&&this.locNavigationTitle.isEmpty?this.locTitle.renderedHtml||this.name:super.getMarkdownHtml(e,t,s)}get locNavigationTitle(){return this.getLocalizableString("navigationTitle")}get renderedNavigationTitle(){return this.locNavigationTitle.renderedHtml}get requiredMark(){return this.survey&&this.isRequired?this.survey.requiredMark:""}get requiredText(){return this.requiredMark}get titlePattern(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"}get isRequireTextOnStart(){return this.isRequired&&"requireNumTitle"==this.titlePattern}get isRequireTextBeforeTitle(){return this.isRequired&&"numRequireTitle"==this.titlePattern}get isRequireTextAfterTitle(){return this.isRequired&&"numTitleRequire"==this.titlePattern}get requiredErrorText(){return this.getLocalizableStringText("requiredErrorText")}set requiredErrorText(e){this.setLocalizableStringText("requiredErrorText",e)}get locRequiredErrorText(){return this.getLocalizableString("requiredErrorText")}get questionOrder(){return this.getPropertyValue("questionOrder")}set questionOrder(e){this.setPropertyValue("questionOrder",e)}get questionsOrder(){return this.questionOrder}set questionsOrder(e){this.questionOrder=e}addNoFromChild(e){return e}canRandomize(e){return e&&"initial"!==this.questionOrder||"random"===this.questionOrder}randomizeElements(e){if(!this.canRandomize(e)||this.isRandomizing)return!1;this.isRandomizing=!0;for(var t=[],s=this.elements,n=0;n<s.length;n++)t.push(s[n]);const i=a.randomizeArray(t);return this.setArrayPropertyDirectly("elements",i,!1),this.updateRows(),this.updateVisibleIndexes(),this.isRandomizing=!1,!0}get areQuestionsRandomized(){return"random"==("default"==this.questionOrder&&this.survey?this.survey.questionOrder:this.questionOrder)}get parent(){return this.getPropertyValue("parent",null)}set parent(e){this.setPropertyValue("parent",e)}get depth(){return null==this.parent?0:this.parent.depth+1}get visibleIf(){return this.getPropertyValue("visibleIf","")}set visibleIf(e){this.setPropertyValue("visibleIf",e)}calcCssClasses(e){var t={panel:{},error:{},row:"",rowEnter:"",rowLeave:"",rowDelayedEnter:"",rowMultiple:"",pageRow:"",rowCompact:""};return this.copyCssClasses(t.panel,e.panel),this.copyCssClasses(t.error,e.error),e.pageRow&&(t.pageRow=e.pageRow),e.rowCompact&&(t.rowCompact=e.rowCompact),e.row&&(t.row=e.row),e.rowEnter&&(t.rowEnter=e.rowEnter),e.rowLeave&&(t.rowLeave=e.rowLeave),e.rowDelayedEnter&&(t.rowDelayedEnter=e.rowDelayedEnter),e.rowMultiple&&(t.rowMultiple=e.rowMultiple),this.survey&&this.survey.updatePanelCssClasses(this,t),t}get id(){return this.getPropertyValue("id")}set id(e){this.setPropertyValue("id",e)}get isPanel(){return!1}getPanel(){return this}getLayoutType(){return"row"}isLayoutTypeSupported(e){return"flow"!==e}get questions(){return this.isQuestionsReady||(this.questionsValue=this.getQuestionsCore(!1),this.isQuestionsReady=!0),this.questionsValue}get visibleQuestions(){return this.getQuestionsCore(!0)}getQuestionsCore(e){const t=new Array;for(let n=0;n<this.elements.length;n++){const i=this.elements[n];if(!e||i.isVisible)if(i.isPanel){var s=i.getQuestionsCore(e);for(let e=0;e<s.length;e++)t.push(s[e])}else t.push(i)}return t}getQuestions(e){const t=this.questions;if(!e)return t;const s=[];return t.forEach(e=>{s.push(e),e.getNestedQuestions().forEach(e=>s.push(e))}),s}getQuestionByName(e){for(var t=this.questions,s=0;s<t.length;s++)if(t[s].name==e)return t[s];return null}getElementByName(e){for(var t=this.elements,s=0;s<t.length;s++){var n=t[s];if(n.name==e)return n;var i=n.getPanel();if(i){var r=i.getElementByName(e);if(r)return r}}return null}getQuestionByValueName(e,t=!1){const s=this.getQuestionsByValueName(e,t);return s.length>0?s[0]:null}getQuestionsByValueName(e,t=!1){const s=[];t&&(e=e.toLowerCase());for(var n=this.questions,i=0;i<n.length;i++){let r=n[i].getValueName();t&&(r=r.toLowerCase()),r==e&&s.push(n[i])}return s}getValue(){var e={};return this.collectValues(e,0),a.getUnbindValue(e)}hasValueAnyQuestion(e){const t=e?this.visibleQuestions:this.questions;for(let e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}collectValues(e,t){let s=this.elements;0===t&&(s=this.questions);for(var n=0;n<s.length;n++){const a=s[n];if(a.isPanel||a.isPage){const s={};a.collectValues(s,t-1)&&(e[a.name]=s)}else{const s=a;if(!s.isEmpty()){var i=s.getValueName();if(e[i]=s.getStructuredValue(t-1),this.data){var r=this.data.getComment(i);r&&(e[i+he.commentSuffix]=r)}}}}return!0}getDisplayValue(e){for(var t={},s=this.questions,n=0;n<s.length;n++){var i=s[n];i.isEmpty()||(t[e?i.title:i.getValueName()]=i.getDisplayValue(e))}return t}getComments(){var e={};if(!this.data)return e;for(var t=this.questions,s=0;s<t.length;s++){var n=t[s],i=this.data.getComment(n.getValueName());i&&(e[n.getValueName()]=i)}return e}clearIncorrectValues(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearIncorrectValues()}clearErrors(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearErrors();this.errors=[]}markQuestionListDirty(){this.isQuestionsReady=!1,this.parent&&this.parent.markQuestionListDirty()}get elements(){return he.collectDependency(this,"elements"),this.elementsValue}getElementsInDesign(e=!1){return this.elements}containsElement(e){for(var t=0;t<this.elements.length;t++){var s=this.elements[t];if(s==e)return!0;var n=s.getPanel();if(n&&n.containsElement(e))return!0}return!1}get isRequired(){return this.getPropertyValue("isRequired")}set isRequired(e){this.setPropertyValue("isRequired",e)}get requiredIf(){return this.getPropertyValue("requiredIf","")}set requiredIf(e){this.setPropertyValue("requiredIf",e)}searchText(e,t){super.searchText(e,t);for(var s=0;s<this.elements.length;s++)this.elements[s].searchText(e,t)}hasErrors(e=!0,t=!1){return!this.validate(e,t)}validate(e=!0,t=!1,s){const n=new es({fireCallback:e,focusOnFirstError:t,callbackResult:s});return this.validateCore(n),n.finish(),n.runningResult}validateContainerOnly(){this.validateInPanels(new es({fireCallback:!0,isOnValueChanged:!1})),this.parent&&this.parent.validateContainerOnly()}onQuestionValueChanged(e){const t=this.questions.indexOf(e);if(t<0)return;const s=this.questions.length-1,n=t+5<s?t+5:s;for(let e=t-5>0?t-5:0;e<=n;e++){if(e===t)continue;const s=this.questions[e];s.errors.length>0&&s.validate(!1)&&s.validate(!0)}}validateInPanels(e){var t=[];this.validateRequired(e,t),this.survey&&(this.survey.validatePanel(this,t,e.fireCallback),e.setErrorElement(this,t)),e.fireCallback&&(this.errors=t)}getErrorCustomText(e,t){return this.survey?this.survey.getSurveyErrorCustomText(this,e,t):e}validateRequired(e,t){if(!this.isRequired)return;var s=[];if(this.addQuestionsToList(s,!0),0==s.length)return;for(var n=0;n<s.length;n++)if(!s[n].isEmpty())return;const i=new It(this.requiredErrorText,this);t.push(i),e.setErrorElement(s[0],[i])}validateElement(e){const t=e.errorCount;return this.validateCore(e),e.errorCount<=t}validateCore(e){var t;let s=null===(t=this.survey)||void 0===t?void 0:t.currentSingleQuestion;s&&this.questions.indexOf(s)<0&&(s=void 0);const n=s?[s]:this.elements;let i=null;for(var r=0;r<n.length;r++)i=n[r],i.isVisible&&(i.isPanel?i.validateCore(e):i.validateElement(e));s||(this.validateInPanels(e),this.updateContainsErrors())}getContainsErrors(){var e=super.getContainsErrors();if(e)return e;for(var t=this.elements,s=0;s<t.length;s++)if(t[s].containsErrors)return!0;return!1}updateElementVisibility(){for(let e=0;e<this.elements.length;e++)this.elements[e].updateElementVisibility();super.updateElementVisibility()}getFirstQuestionToFocus(e=!1,t=!1){if(!e&&!t&&this.isCollapsed)return null;for(var s=this.elements,n=0;n<s.length;n++){var i=s[n];if(i.isVisible&&(t||!i.isCollapsed))if(i.isPanel){var r=i.getFirstQuestionToFocus(e,t);if(r)return r}else{const t=i.getFirstQuestionToFocus(e);if(t)return t}}return null}getFirstVisibleQuestion(){const e=this.questions;for(let t=0;t<e.length;t++)if(e[t].isVisible)return e[t];return null}getFirstVisibleElement(){const e=this.elements;for(let t=0;t<e.length;t++)if(e[t].isVisible)return e[t];return null}focusFirstQuestion(){const e=this.getFirstQuestionToFocus();e&&e.focus()}focusFirstErrorQuestion(){var e=this.getFirstQuestionToFocus(!0);e&&e.focus()}addQuestionsToList(e,t=!1,s=!1){this.addElementsToList(e,t,s,!1)}addPanelsIntoList(e,t=!1,s=!1){this.addElementsToList(e,t,s,!0)}addElementsToList(e,t,s,n){t&&!this.visible||this.addElementsToListCore(e,this.elements,t,s,n)}addElementsToListCore(e,t,s,n,i){for(var r=0;r<t.length;r++){var a=t[r];s&&!a.visible||((i&&a.isPanel||!i&&!a.isPanel)&&e.push(a),a.isPanel?a.addElementsToListCore(e,a.elements,s,n,i):n&&this.addElementsToListCore(e,a.getElementsInDesign(!1),s,n,i))}}calcMaxRowColSpan(){let e=0;return this.rows.forEach(t=>{let s=0,n=!1;t.elements.forEach(e=>{e.width&&(n=!0),s+=e.colSpan||1}),!n&&s>e&&(e=s)}),e}updateColumnWidth(e){let t=0,s=0;if(e.forEach(e=>{e.width?(t+=e.width,e.setPropertyValue("effectiveWidth",e.width)):s++}),s){const i=(n=(100-t)/s,Math.floor(100*n)/100);for(let t=0;t<e.length;t++)e[t].width||e[t].setPropertyValue("effectiveWidth",i)}var n}updateColumns(){this._columns=void 0,this.updateRootStyle()}updateRootStyle(){var e;super.updateRootStyle(),null===(e=this.elements)||void 0===e||e.forEach(e=>e.updateRootStyle())}updateCustomWidgets(){for(var e=0;e<this.elements.length;e++)this.elements[e].updateCustomWidgets()}get questionTitleLocation(){return this.getPropertyValue("questionTitleLocation")}set questionTitleLocation(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase())}getQuestionTitleLocation(){return this.onGetQuestionTitleLocation?this.onGetQuestionTitleLocation():"default"!=this.questionTitleLocation?this.questionTitleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"}availableQuestionTitleWidth(){return"left"===this.getQuestionTitleLocation()||this.hasElementWithTitleLocationLeft()}hasElementWithTitleLocationLeft(){return this.elements.some(e=>e instanceof mn?e.hasElementWithTitleLocationLeft():e instanceof ts?"left"===e.getTitleLocation():void 0)}getQuestionTitleWidth(){return(this.onGetQuestionTitleWidth?this.onGetQuestionTitleWidth():this.questionTitleWidth)||this.parent&&this.parent.getQuestionTitleWidth()}get columns(){return this._columns||(this.generateColumns(this.gridLayoutColumns),this.gridLayoutColumns=this._columns),this._columns||[]}generateColumns(e){var t;const s=null===(t=this.survey)||void 0===t?void 0:t.gridLayoutEnabled;let n=[].concat(e);if(s){let t=this.calcMaxRowColSpan();if(t<=e.length)n=e.slice(0,t);else for(let s=e.length;s<t;s++){const e=new pn;n.push(e)}}this._columns=n;try{this._columnsReady=!1,this.updateColumnWidth(n)}finally{this._columnsReady=!0}}createGridLayoutColumns(){return this.generateColumns([]),this._columns}updateGridColumns(){this.updateColumns(),this.elements.forEach(e=>{e.isPanel&&e.updateGridColumns()})}getColumsForElement(e){const t=this.findRowByElement(e);if(!t||!this.survey||!this.survey.gridLayoutEnabled)return[];let s=t.elements.length-1;for(;s>=0&&t.elements[s].getPropertyValueWithoutDefault("colSpan");)s--;const n=t.elements.indexOf(e);let i=0;for(let e=0;e<n;e++)i+=t.elements[e].colSpan;let r=e.getPropertyValueWithoutDefault("colSpan");if(!r&&n===s){let e=0;for(let n=0;n<t.elements.length;n++)n!==s&&(e+=t.elements[n].colSpan);r=this.columns.length-e}const a=this.columns.slice(i,i+(r||1));return e.setPropertyValueDirectly("effectiveColSpan",a.length),a}getStartIndex(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""}getQuestionStartIndex(){return this.getStartIndex()}getChildrenLayoutType(){return"row"}getProgressInfo(){return We.getProgressInfoByElements(this.elements,this.isRequired)}get root(){for(var e=this;e.parent;)e=e.parent;return e}childVisibilityChanged(){this.isRunningConditions||this.getIsPageVisible(null)!==this.getPropertyValue("isVisible",!0)&&this.onVisibleChanged()}canRenderFirstRows(){return this.isPage}isLazyRenderInRow(e){return!(!this.survey||!this.survey.isLazyRendering)&&(e>=this.survey.lazyRenderFirstBatchSize||!this.canRenderFirstRows())}createRowAndSetLazy(e){const t=this.createRow();return t.setIsLazyRendering(this.isLazyRenderInRow(e)),t}createRow(){return new gn(this)}onSurveyLoad(){this.blockAnimations(),super.onSurveyLoad();for(var e=0;e<this.elements.length;e++)this.elements[e].onSurveyLoad();this.onElementVisibilityChanged(this),this.releaseAnimations()}onFirstRenderingCore(){super.onFirstRenderingCore(),this.onRowsChanged(),this.elements.forEach(e=>e.onFirstRendering())}updateRows(){this.isLoadingFromJson||(this.getElementsForRows().forEach(e=>{e.isPanel&&e.updateRows()}),this.onRowsChanged())}get rows(){return this.getPropertyValue("rows")}ensureRowsVisibility(){this.rows.forEach(e=>{e.ensureVisibility()})}onRowsChanged(){this.isLoadingFromJson||(this.blockAnimations(),this.setArrayPropertyDirectly("rows",this.buildRows()),this.updateColumns(),this.releaseAnimations())}blockRowsUpdates(){this.locCountRowUpdates++}releaseRowsUpdates(){this.locCountRowUpdates--}updateRowsBeforeElementRemoved(e){const t=this.findRowByElement(e),s=this.rows.indexOf(t),n=t.elements.indexOf(e);t.elements.splice(n,1),0==t.elements.length?this.rows.splice(s,1):!t.elements[0].startWithNewLine&&this.rows[s-1]?(t.elements.forEach(e=>this.rows[s-1].addElement(e)),this.rows.splice(s,1)):t.updateVisible()}updateRowsOnElementAdded(e){if(!this.wasRendered&&0===this.rows.length&&this.elements.length>1)return;const t=this.elements.indexOf(e),s=this.elements[t+1],n=e=>{const t=this.createRowAndSetLazy(e);return this.isDesignMode&&t.setIsLazyRendering(!1),this.rows.splice(e,0,t),t},i=(e,t,s,...n)=>{const i=e.elements.splice(t,s,...n);return e.updateVisible(),i};if(!s)return void(0==t||e.startWithNewLine?i(n(this.rows.length),0,0,e):this.rows[this.rows.length-1].addElement(e));const r=this.findRowByElement(s);if(!r)return;const a=this.rows.indexOf(r),o=r.elements.indexOf(s);0==o?s.startWithNewLine?e.startWithNewLine||a<1?n(a).addElement(e):this.rows[a-1].addElement(e):i(r,0,0,e):e.startWithNewLine?i(n(a+1),0,0,...[e].concat(i(r,o,r.elements.length))):i(r,o,0,e)}canFireAddRemoveNotifications(e){return!!this.survey&&e.prevSurvey!==this.survey}onAddElement(e,t){const s=this.survey,n=this.canFireAddRemoveNotifications(e);this.surveyImpl&&e.setSurveyImpl(this.surveyImpl),e.parent=this,this.markQuestionListDirty(),this.canBuildRows()&&this.updateRowsOnElementAdded(e),n&&(e.isPanel?s.panelAdded(e,t,this,this.root):s.questionAdded(e,t,this,this.root)),this.addElementCallback&&this.addElementCallback(e),e.registerPropertyChangedHandlers(["visible","isVisible"],()=>{this.onElementVisibilityChanged(e)},this.id),e.registerPropertyChangedHandlers(["startWithNewLine"],()=>{this.onElementStartWithNewLineChanged(e)},this.id),this.onElementVisibilityChanged(this)}onRemoveElement(e){e.parent=null,this.unregisterElementPropertiesChanged(e),this.markQuestionListDirty(),this.updateRowsOnElementRemoved(e),this.isRandomizing||(this.onRemoveElementNotifySurvey(e),this.removeElementCallback&&this.removeElementCallback(e),this.onElementVisibilityChanged(this))}unregisterElementPropertiesChanged(e){e.unregisterPropertyChangedHandlers(["visible","isVisible","startWithNewLine"],this.id)}onRemoveElementNotifySurvey(e){this.canFireAddRemoveNotifications(e)&&(e.isPanel?this.survey.panelRemoved(e):this.survey.questionRemoved(e))}onElementVisibilityChanged(e){this.isLoadingFromJson||this.isRandomizing||(this.updateRowsVisibility(e),this.childVisibilityChanged(),this.parent&&this.parent.onElementVisibilityChanged(this))}onElementStartWithNewLineChanged(e){this.locCountRowUpdates>0||(this.blockAnimations(),this.updateRowsBeforeElementRemoved(e),this.updateRowsOnElementAdded(e),this.releaseAnimations())}updateRowsVisibility(e){for(var t=this.rows,s=0;s<t.length;s++){var n=t[s];if(n.elements.indexOf(e)>-1){n.updateVisible(),n.visible&&!n.isNeedRender&&(n.isNeedRender=!0);break}}}canBuildRows(){return!this.isLoadingFromJson&&"row"==this.getChildrenLayoutType()}buildRows(){if(!this.canBuildRows())return[];const e=new Array,t=this.getElementsForRows();for(let s=0;s<t.length;s++){const n=t[s],i=0==s||n.startWithNewLine,r=i?this.createRowAndSetLazy(e.length):e[e.length-1];i&&e.push(r),r.addElement(n)}return e.forEach(e=>e.updateVisible()),e}getElementsForRows(){return this.elements}getDragDropInfo(){const e=this.getPage(this.parent);return e?e.getDragDropInfo():void 0}updateRowsOnElementRemoved(e){this.canBuildRows()&&(this.updateRowsRemoveElementFromRow(e,this.findRowByElement(e)),this.updateColumns())}updateRowsRemoveElementFromRow(e,t){if(t&&t.panel){var s=t.elements.indexOf(e);s<0||(t.elements.splice(s,1),t.elements.length>0?(this.blockRowsUpdates(),t.elements[0].startWithNewLine=!0,this.releaseRowsUpdates(),t.updateVisible()):t.index>=0&&t.panel.rows.splice(t.index,1))}}getAllRows(){const e=[];return this.rows.forEach(t=>{const s=[];t.elements.forEach(e=>{e.isPanel?s.push(...e.getAllRows()):"paneldynamic"==e.getType()&&(this.isDesignMode?s.push(...e.template.getAllRows()):e.panels.forEach(e=>s.push(...e.getAllRows())))}),e.push(t),e.push(...s)}),e}findRowAndIndexByElement(e,t){if(!e)return{row:void 0,index:this.rows.length-1};t=t||this.rows;for(var s=0;s<t.length;s++)if(t[s].elements.indexOf(e)>-1)return{row:t[s],index:s};return{row:null,index:-1}}forceRenderRow(e){e&&!e.isNeedRender&&(e.isNeedRender=!0,e.stopLazyRendering())}forceRenderElement(e,t=()=>{},s=0){const n=this.getAllRows(),{row:i,index:r}=this.findRowAndIndexByElement(e,n);if(r>=0&&r<n.length){const e=[];e.push(i);for(let t=r-1;t>=r-s&&t>=0;t--)e.push(n[t]);this.forceRenderRows(e,t)}}forceRenderRows(e,t=()=>{}){const s=(n=e.length,()=>{--n<=0&&t()});var n;e.forEach(e=>new Ge(e.visibleElements,s)),e.forEach(e=>this.forceRenderRow(e))}findRowByElement(e){return this.findRowAndIndexByElement(e).row}elementWidthChanged(e){if(!this.isLoadingFromJson){var t=this.findRowByElement(e);t&&t.updateVisible()}}get ariaTitleId(){return this.id+"_ariaTitle"}get ariaLabelledBy(){return this.hasTitle?this.ariaTitleId:null}get ariaLabel(){return this.hasTitle?null:this.title||this.name||null}get ariaRole(){return"group"}get processedTitle(){return this.getRenderedTitle(this.locTitle.textOrHtml)}getRenderedTitle(e){return null!=this.textProcessor?this.textProcessor.processText(e,!0):e}get visible(){return this.getPropertyValue("visible")}set visible(e){e!==this.visible&&(this.setPropertyValue("visible",e),this.setPropertyValue("isVisible",this.isVisible),this.isLoadingFromJson||this.onVisibleChanged())}onHidingContent(){this.questions.forEach(e=>e.onHidingContent())}onVisibleChanged(){if(!this.isRandomizing&&(this.setPropertyValue("isVisible",this.isVisible),this.canUpdateValueOnVisibleChanged())){const t=this.questions,s=this.isVisible;for(var e=0;e<t.length;e++){const n=t[e];s?n.updateValueWithDefaults():(n.clearValueIfInvisible("onHiddenContainer"),n.onHidingContent())}}}notifyStateChanged(e){super.notifyStateChanged(e),this.isCollapsed&&this.questions.forEach(e=>e.onHidingContent())}get isVisible(){return this.areInvisibleElementsShowing||this.getIsPageVisible(null)}getIsContentVisible(e){if(this.areInvisibleElementsShowing)return!0;for(var t=0;t<this.elements.length;t++)if(this.elements[t]!=e&&this.elements[t].isVisible)return!0;return!1}getIsPageVisible(e){const t=this.getIsContentVisible(e);return this.visible&&t}setVisibleIndex(e){if(!this.isVisible||e<0)return this.resetVisibleIndexes(),0;this.lastVisibleIndex=e;var t=e;e+=this.beforeSetVisibleIndex(e);var s=this.getPanelStartIndex(e),n=s;const i=this.elements;for(var r=0;r<i.length;r++)n+=i[r].setVisibleIndex(n);return this.isContinueNumbering()&&(e+=n-s),e-t}updateVisibleIndexes(){void 0!==this.lastVisibleIndex&&(this.resetVisibleIndexes(),this.setVisibleIndex(this.lastVisibleIndex))}resetVisibleIndexes(){const e=this.elements;for(var t=0;t<e.length;t++)e[t].setVisibleIndex(-1)}beforeSetVisibleIndex(e){return 0}getPanelStartIndex(e){return e}isContinueNumbering(){return!0}get isReadOnly(){var e=!!this.parent&&this.parent.isReadOnly,t=!!this.survey&&this.survey.isDisplayMode;return this.readOnly||e||t}onReadOnlyChanged(){for(var e=0;e<this.elements.length;e++){var t=this.elements[e];t.setPropertyValue("isReadOnly",t.isReadOnly)}super.onReadOnlyChanged()}updateElementCss(e){super.updateElementCss(e);for(let t=0;t<this.elements.length;t++)this.elements[t].updateElementCss(e)}get enableIf(){return this.getPropertyValue("enableIf","")}set enableIf(e){this.setPropertyValue("enableIf",e)}addElement(e,t=-1){return!!this.canAddElement(e)&&(t<0||t>=this.elements.length?this.elements.push(e):this.elements.splice(t,0,e),this.wasRendered&&e.onFirstRendering(),this.updateColumns(),!0)}insertElement(e,t,s="bottom"){if(!t)return void this.addElement(e);this.blockRowsUpdates();let n=this.elements.indexOf(t);const i=this.findRowByElement(t);"left"==s||"right"==s?"right"==s?(e.startWithNewLine=!1,n++):0==i.elements.indexOf(t)?(t.startWithNewLine=!1,e.startWithNewLine=!0):e.startWithNewLine=!1:(e.startWithNewLine=!0,n="top"==s?this.elements.indexOf(i.elements[0]):this.elements.indexOf(i.elements[i.elements.length-1])+1),this.releaseRowsUpdates(),this.addElement(e,n)}insertElementAfter(e,t){const s=this.elements.indexOf(t);s>=0&&this.addElement(e,s+1)}insertElementBefore(e,t){const s=this.elements.indexOf(t);s>=0&&this.addElement(e,s)}canAddElement(e){return!!e&&e.isLayoutTypeSupported(this.getChildrenLayoutType())}addQuestion(e,t=-1){return this.addElement(e,t)}addPanel(e,t=-1){return this.addElement(e,t)}addNewQuestion(e,t=null,s=-1){var n=xs.Instance.createQuestion(e,t);return this.addQuestion(n,s)?n:null}addNewPanel(e=null){var t=this.createNewPanel(e);return this.addPanel(t)?t:null}indexOf(e){return this.elements.indexOf(e)}createNewPanel(e){var t=I.createClass("panel");return t.name=e,t}removeElement(e){var t=this.elements.indexOf(e);if(t<0){for(var s=0;s<this.elements.length;s++)if(this.elements[s].removeElement(e))return!0;return!1}return this.elements.splice(t,1),this.updateColumns(),!0}removeQuestion(e){this.removeElement(e)}runCondition(e){if(this.isDesignMode||this.isLoadingFromJson)return;var t=this.elements.slice();const s=this.getIsPageVisible();this.isRunningConditions=!0;for(var n=0;n<t.length;n++)t[n].runCondition(e);this.runConditionCore(e);const i=this.getIsPageVisible();this.isRunningConditions=!1,s!==i&&this.childVisibilityChanged()}onAnyValueChanged(e,t){for(var s=this.elements,n=0;n<s.length;n++)s[n].onAnyValueChanged(e,t)}checkBindings(e,t){for(var s=this.elements,n=0;n<s.length;n++)s[n].checkBindings(e,t)}needResponsiveWidth(){let e=!1;return this.elements.forEach(t=>{t.needResponsiveWidth()&&(e=!0)}),this.rows.forEach(t=>{t.elements.length>1&&(e=!0)}),e}get hasDescriptionUnderTitle(){return this.hasDescription}get cssHeader(){return this.cssClasses.panel.header}get cssDescription(){return this.cssClasses.panel.description}get questionErrorLocation(){return this.getPropertyValue("questionErrorLocation")}set questionErrorLocation(e){this.setPropertyValue("questionErrorLocation",e)}getQuestionErrorLocation(){return"default"!==this.questionErrorLocation?this.questionErrorLocation:this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"}getTitleOwner(){return this}get no(){return""}get cssTitleNumber(){return this.cssClasses.panel.number}get cssRequiredMark(){return this.cssClasses.panel.requiredMark}get cssError(){return this.getCssError(this.cssClasses)}getCssError(e){return(new fe).append(e.error.root).toString()}getSerializableColumnsValue(){let e=-1;for(let t=this.gridLayoutColumns.length-1;t>=0;t--)if(!this.gridLayoutColumns[t].isEmpty()){e=t;break}return this.gridLayoutColumns.slice(0,e+1)}afterRender(e){this.afterRenderCore(e)}dispose(){if(super.dispose(),this.rows){for(let e=0;e<this.rows.length;e++)this.rows[e].dispose();this.rows.splice(0,this.rows.length)}this.disposeElements(),this.elements.splice(0,this.elements.length)}disposeElements(){for(let e=0;e<this.elements.length;e++)this.elements[e].dispose()}}mn.panelCounter=100,me([d({defaultValue:!0})],mn.prototype,"showTitle",void 0),me([d({defaultValue:!0})],mn.prototype,"showDescription",void 0),me([d()],mn.prototype,"questionTitleWidth",void 0);class vn extends mn{constructor(e=""){super(e),this.forcusFirstQuestionOnExpand=!0,this.createNewArray("footerActions"),this.registerPropertyChangedHandlers(["width"],()=>{this.parent&&this.parent.elementWidthChanged(this)}),this.registerPropertyChangedHandlers(["indent","innerIndent","rightIndent"],()=>{this.resetIndents()}),this.registerPropertyChangedHandlers(["colSpan"],()=>{var e;null===(e=this.parent)||void 0===e||e.updateColumns()})}getType(){return"panel"}get contentId(){return this.id+"_content"}getSurvey(e=!1){return e&&this.isPanel?this.parent?this.parent.getSurvey(e):null:super.getSurvey(e)}get isPanel(){return!0}get page(){return this.getPage(this.parent)}set page(e){this.setPage(this.parent,e)}removeFromParent(){this.parent&&this.removeSelfFromList(this.parent.elements)}moveTo(e,t=null){return this.moveToBase(this.parent,e,t)}get visibleIndex(){return this.getPropertyValue("visibleIndex",-1)}get showNumber(){return this.getPropertyValue("showNumber")}set showNumber(e){this.setPropertyValue("showNumber",e),this.notifySurveyOnVisibilityChanged()}addNoFromChild(e){return this.isQuestionIndexRecursive?this.calcNo()+e:super.addNoFromChild(e)}get showQuestionNumbers(){return this.getPropertyValue("showQuestionNumbers")}set showQuestionNumbers(e){this.setPropertyValue("showQuestionNumbers",e),this.notifySurveyOnVisibilityChanged()}get questionStartIndex(){return this.getPropertyValue("questionStartIndex","")}set questionStartIndex(e){this.setPropertyValue("questionStartIndex",e)}getQuestionStartIndex(){return this.questionStartIndex?this.questionStartIndex:super.getQuestionStartIndex()}get no(){return this.getPropertyValue("no",void 0,()=>this.calcNo())}calcNo(){let e=this.hasTitle?a.getNumberByIndex(this.visibleIndex,this.getStartIndex()):"";return this.onGetNoCallback&&(e=this.onGetNoCallback(e)),this.parent&&(e=this.parent.addNoFromChild(e)),this.survey&&(e=this.survey.getUpdatedPanelNo(this,e)),e||""}notifyStateChanged(e){this.isLoadingFromJson||this.locTitle.strChanged(),super.notifyStateChanged(e)}createLocTitleProperty(){const e=super.createLocTitleProperty();return e.onGetTextCallback=e=>(e||"default"===this.state||(e=this.name),e),e}beforeSetVisibleIndex(e){if(this.isPage||!this.parent)return super.beforeSetVisibleIndex(e);let t=-1;return!this.showNumber&&!this.isQuestionIndexRecursive||!this.isDesignMode&&this.locTitle.isEmpty&&!this.hasParentInQuestionIndex()||(t=e),this.setPropertyValue("visibleIndex",t),this.resetPropertyValue("no"),t<0?0:1}getPanelStartIndex(e){return"off"===this.showQuestionNumbers?-1:this.isQuestionIndexOnPanel?0:e}get isQuestionIndexOnPanel(){return"onpanel"===this.showQuestionNumbers||this.isQuestionIndexRecursive}get isQuestionIndexRecursive(){if(this.isPage)return!1;const e=this.showQuestionNumbers;return"default"!==e?"recursive"===e:!!this.survey&&"recursive"===this.survey.showQuestionNumbers}hasParentInQuestionIndex(){if(!this.isQuestionIndexOnPanel)return!1;const e=this.questionStartIndex,t=e.indexOf(".");return t>-1&&t<e.length-1}isContinueNumbering(){return"off"!==this.showQuestionNumbers&&!this.isQuestionIndexOnPanel}notifySurveyOnVisibilityChanged(){null==this.survey||this.isLoadingFromJson||this.survey.panelVisibilityChanged(this,this.isVisible)}getRenderedTitle(e){if(this.isPanel&&!e){if(this.isCollapsed||this.isExpanded)return this.name;if(this.isDesignMode)return"["+this.name+"]"}return super.getRenderedTitle(e)}get innerIndent(){return this.getPropertyValue("innerIndent")}set innerIndent(e){this.setPropertyValue("innerIndent",e)}get startWithNewLine(){return this.getPropertyValue("startWithNewLine")}set startWithNewLine(e){this.setPropertyValue("startWithNewLine",e)}get allowAdaptiveActions(){return this.getPropertyValue("allowAdaptiveActions")}set allowAdaptiveActions(e){this.setPropertyValue("allowAdaptiveActions",e)}get innerPaddingLeft(){return this.getPropertyValue("innerPaddingLeft",void 0,()=>this.getIndentSize(this.innerIndent))}set innerPaddingLeft(e){this.setPropertyValue("innerPaddingLeft",e)}calcPaddingLeft(){return this.getIndentSize(this.indent)}calcPaddingRight(){return this.getIndentSize(this.rightIndent)}resetIndents(){this.resetPropertyValue("innerPaddingLeft"),super.resetIndents()}getIndentSize(e){if(this.survey){if(e<1)return"";var t=this.survey.css;return t&&t.question&&t.question.indent?e*t.question.indent+"px":""}}clearOnDeletingContainer(){this.elements.forEach(e=>{(e instanceof ts||e instanceof vn)&&e.clearOnDeletingContainer()})}get footerActions(){return this.getPropertyValue("footerActions")}getFooterToolbar(){var e,t;if(!this.footerToolbarValue){var s=this.footerActions;this.hasEditButton&&s.push({id:"cancel-preview",locTitle:this.survey.locEditText,innerCss:this.survey.cssNavigationEdit,component:"sv-nav-btn",action:()=>{this.cancelPreview()}}),s=this.onGetFooterActionsCallback?this.onGetFooterActionsCallback():null===(e=this.survey)||void 0===e?void 0:e.getUpdatedPanelFooterActions(this,s),this.footerToolbarValue=this.createActionContainer(this.allowAdaptiveActions);let n=this.onGetFooterToolbarCssCallback?this.onGetFooterToolbarCssCallback():"";n||(n=null===(t=this.cssClasses.panel)||void 0===t?void 0:t.footer),n&&(this.footerToolbarValue.containerCss=n),this.footerToolbarValue.setItems(s),this.footerToolbarValue.flushUpdates()}return this.footerToolbarValue}get hasEditButton(){return!1}cancelPreview(){this.hasEditButton&&this.survey.cancelPreviewByPage(this)}get cssTitle(){return this.getCssPanelTitle()}getCssPanelTitle(){return this.getCssTitle(this.cssClasses.panel)}getCssTitleExpandableSvg(){return"default"===this.state?null:this.cssClasses.panel.titleExpandableSvg}get showErrorsAbovePanel(){return!this.showPanelAsPage}getCssError(e){if(this.isPage)return super.getCssError(e);const t=(new fe).append(super.getCssError(e)).append(e.panel.errorsContainer);return t.append("panel-error-root",t.isEmpty()).toString()}onVisibleChanged(){super.onVisibleChanged(),this.notifySurveyOnVisibilityChanged()}needResponsiveWidth(){return!this.startWithNewLine||super.needResponsiveWidth()}focusIn(){this.survey&&this.survey.whenPanelFocusIn(this)}getHasFrameV2(){return super.getHasFrameV2()&&!this.showPanelAsPage}getIsNested(){return super.getIsNested()&&void 0!==this.parent}get showPanelAsPage(){return!1}expand(e=!0){this.forcusFirstQuestionOnExpand=e,super.expand()}onElementExpanded(e){if(this.forcusFirstQuestionOnExpand&&null!=this.survey&&!this.isLoadingFromJson){const t=this.getFirstQuestionToFocus(!1);t&&setTimeout(()=>{!this.isDisposed&&this.survey&&this.survey.scrollElementToTop(t,t,null,t.inputId,!1,{behavior:"smooth"})},e?0:15)}}getCssRoot(e){return(new fe).append(super.getCssRoot(e)).append(e.container).append(e.asPage,this.showPanelAsPage).append(e.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()}getContainerCss(){return this.getCssRoot(this.cssClasses.panel)}afterRenderCore(e){var t;super.afterRenderCore(e),this.isPanel&&(null===(t=this.survey)||void 0===t||t.afterRenderPanel(this,e))}}I.addClass("panelbase",["name",{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"readOnly:boolean",overridingProperty:"enableIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition",{name:"questionTitleWidth",visibleIf:function(e){return!!e&&e.availableQuestionTitleWidth()}},{name:"questionTitleLocation",default:"default",choices:["default","top","bottom","left","hidden"]},{name:"gridLayoutColumns:panellayoutcolumns",className:"panellayoutcolumn",isArray:!0,onSerializeValue:e=>e.getSerializableColumnsValue(),visibleIf:function(e){return!!e&&!!e.survey&&e.survey.gridLayoutEnabled}},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"},{name:"questionOrder",alternativeName:"questionsOrder",default:"default",choices:["default","initial","random"]},{name:"questionErrorLocation",default:"default",choices:["default","top","bottom"]}],function(){return new mn}),I.addClass("panel",[{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"startWithNewLine:boolean",default:!0},{name:"width"},{name:"minWidth",defaultFunc:()=>"auto"},{name:"maxWidth",defaultFunc:()=>xt.maxWidth},{name:"colSpan:number",visible:!1,onSerializeValue:e=>e.getPropertyValue("colSpan")},{name:"effectiveColSpan:number",minValue:1,isSerializable:!1,visibleIf:function(e){return!!e.survey&&e.survey.gridLayoutEnabled}},{name:"innerIndent:number",default:0,choices:[0,1,2,3]},{name:"indent:number",default:0,choices:[0,1,2,3],visible:!1},{name:"page",isSerializable:!1,visibleIf:function(e){var t=e?e.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(e){var t=e?e.survey:null;return t?t.pages.map(e=>({value:e.name,text:e.title})):[]}},{name:"showNumber:boolean"},{name:"showQuestionNumbers",default:"default",choices:["default","onpanel","recursive","off"]},{name:"questionStartIndex",visibleIf:e=>e.isPanel},{name:"allowAdaptiveActions:boolean",default:!0,visible:!1}],function(){return new vn},"panelbase"),_s.Instance.registerElement("panel",e=>new vn(e));class fn extends vn{constructor(e=""){super(e),this.timeSpent=0,this._isReadyForClean=!0,this.createLocalizableString("navigationDescription",this,!0)}getType(){return"page"}toString(){return this.name}get isPage(){return!this.isPanel}get isPanel(){return!!this.parent}get showPanelAsPage(){return!0}get hasEditButton(){return this.isPanel&&this.survey&&"preview"===this.survey.state&&!!this.parent&&!this.parent.isPanel}getElementsForRows(){var e;if(!this.isStartPage){const t=null===(e=this.survey)||void 0===e?void 0:e.currentSingleElement;if(t)return t.page===this?[t]:[]}return super.getElementsForRows()}disposeElements(){this.isPageContainer||super.disposeElements()}onRemoveElement(e){this.isPageContainer?(e.parent=null,this.unregisterElementPropertiesChanged(e)):super.onRemoveElement(e)}getTemplate(){return this.isPanel?"panel":super.getTemplate()}get no(){if(!this.canShowPageNumber()||!this.survey)return"";let e=this.isStartPage?"":this.num+". ";return this.survey.getUpdatedPageNo(this,e)}get cssTitleNumber(){return this.isPanel?this.cssClasses.panel.number:this.cssClasses.page.number}getCssTitleExpandableSvg(){return null}get cssRequiredMark(){return""}canShowPageNumber(){return this.survey&&this.survey.showPageNumbers}canShowTitle(e){return!e||e.showPageTitles}setTitleValue(e){super.setTitleValue(e),this.navigationLocStrChanged()}getDefaultTitleTagName(){return xt.titleTags.page}get navigationTitle(){return this.getLocalizableStringText("navigationTitle")}set navigationTitle(e){this.setLocalizableStringText("navigationTitle",e)}get navigationDescription(){return this.getLocalizableStringText("navigationDescription")}set navigationDescription(e){this.setLocalizableStringText("navigationDescription",e)}get locNavigationDescription(){return this.getLocalizableString("navigationDescription")}navigationLocStrChanged(){this.locNavigationTitle.isEmpty&&this.locTitle.strChanged(),this.locNavigationTitle.strChanged(),this.locNavigationDescription.strChanged()}getMarkdownHtml(e,t,s){const n=super.getMarkdownHtml(e,t,s);return"navigationTitle"===t&&this.canShowPageNumber()&&n?this.num+". "+n:n}get passed(){return this.getPropertyValue("passed",!1)}set passed(e){this.setPropertyValue("passed",e)}removeFromParent(){this.survey&&this.removeSelfFromList(this.survey.pages)}get visibleIndex(){return this.getPropertyValue("visibleIndex",-1)}set visibleIndex(e){this.setPropertyValue("visibleIndex",e)}canRenderFirstRows(){return!this.isDesignMode||0==this.visibleIndex}get isStartPage(){return this.survey&&this.survey.isPageStarted(this)}get isStarted(){return this.isStartPage}calcCssClasses(e){if(this.isPanel)return super.calcCssClasses(e);const t={page:{},error:{},pageTitle:"",pageDescription:"",row:"",rowMultiple:"",pageRow:"",rowCompact:"",rowEnter:"",rowLeave:"",rowDelayedEnter:"",rowReplace:""};return this.copyCssClasses(t.page,e.page),this.copyCssClasses(t.error,e.error),e.pageTitle&&(t.pageTitle=e.pageTitle),e.pageDescription&&(t.pageDescription=e.pageDescription),e.row&&(t.row=e.row),e.pageRow&&(t.pageRow=e.pageRow),e.rowMultiple&&(t.rowMultiple=e.rowMultiple),e.rowCompact&&(t.rowCompact=e.rowCompact),e.rowEnter&&(t.rowEnter=e.rowEnter),e.rowDelayedEnter&&(t.rowDelayedEnter=e.rowDelayedEnter),e.rowLeave&&(t.rowLeave=e.rowLeave),e.rowReplace&&(t.rowReplace=e.rowReplace),this.survey&&this.survey.updatePageCssClasses(this,t),t}getCssPanelTitle(){return this.isPanel?super.getCssPanelTitle():this.cssClasses.page?(new fe).append(this.cssClasses.page.title).toString():""}get cssRoot(){return!this.isPanel&&this.cssClasses.page&&this.survey?(new fe).append(this.cssClasses.page.root).append(this.cssClasses.page.emptyHeaderRoot,!(this.survey.renderedHasHeader||this.survey.isShowProgressBarOnTop&&!this.survey.isStaring)).toString():""}getCssError(e){return this.isPanel?super.getCssError(e):(new fe).append(super.getCssError(e)).append(e.page.errorsContainer).toString()}get navigationButtonsVisibility(){const e=this.showNavigationButtons;return null==e?"inherit":e?"show":"hide"}set navigationButtonsVisibility(e){"string"==typeof e&&(e=e.toLowerCase()),this.showNavigationButtons=e}get showNavigationButtons(){return this.getPropertyValue("showNavigationButtons",void 0)}set showNavigationButtons(e){this.setShowNavigationButtonsProperty(e)}setShowNavigationButtonsProperty(e){!0===e||!1===e?this.setPropertyValue("showNavigationButtons",e):"show"===e?this.setPropertyValue("showNavigationButtons",!0):"hide"===e?this.setPropertyValue("showNavigationButtons",!1):this.setPropertyValue("showNavigationButtons",void 0)}get isActive(){return!!this.survey&&this.survey.currentPage===this}get wasShown(){return this.wasRendered}get hasShown(){return this.wasRendered}setWasShown(e){e||this.resetWasRendered()}onFirstRenderingCore(){var e;if(super.onFirstRenderingCore(),!this.isDesignMode){for(var t=this.elements,s=0;s<t.length;s++)t[s].isPanel&&t[s].randomizeElements(this.areQuestionsRandomized);if(this.randomizeElements(this.areQuestionsRandomized)){const t=null===(e=this.survey)||void 0===e?void 0:e.currentSingleElement;(null==t?void 0:t.page)===this&&(this.survey.currentSingleElement=this.getFirstVisibleElement())}}}scrollToTop(){this.survey&&this.survey.scrollElementToTop(this,null,this,this.id,!1,{block:"start"})}getAllPanels(e=!1,t=!1){var s=new Array;return this.addPanelsIntoList(s,e,t),s}getPanels(e=!1,t=!1){return this.getAllPanels(e,t)}get timeLimit(){return this.getPropertyValue("timeLimit",0)}set timeLimit(e){this.setPropertyValue("timeLimit",e)}get maxTimeToFinish(){return this.timeLimit}set maxTimeToFinish(e){this.timeLimit=e}getMaxTimeToFinish(){if(0!==this.timeLimit)return this.timeLimit;const e=this.survey?this.survey.timeLimitPerPage:0;return e>0?e:0}onNumChanged(e){}onVisibleChanged(){this.isRandomizing||(super.onVisibleChanged(),null!=this.survey&&this.survey.pageVisibilityChanged(this,this.isVisible))}ensureRowsVisibility(){super.ensureRowsVisibility(),this.getPanels().forEach(e=>e.ensureRowsVisibility())}get isReadyForClean(){return this._isReadyForClean}set isReadyForClean(e){const t=this._isReadyForClean;this._isReadyForClean=e,this._isReadyForClean!==t&&this.isReadyForCleanChangedCallback&&this.isReadyForCleanChangedCallback()}enableOnElementRerenderedEvent(){super.enableOnElementRerenderedEvent(),this.isReadyForClean=!1}disableOnElementRerenderedEvent(){super.disableOnElementRerenderedEvent(),this.isReadyForClean=!0}}me([d({defaultValue:-1,onSet:(e,t)=>t.onNumChanged(e)})],fn.prototype,"num",void 0),I.addClass("page",[{name:"showNavigationButtons:boolean",defaultFunc:()=>{},onSetValue:function(e,t){e&&e.setShowNavigationButtonsProperty(t)},alternativeName:"navigationButtonsVisibility"},{name:"timeLimit:number",alternativeName:"maxTimeToFinish",default:0,minValue:0,visibleIf:e=>!!e.survey&&e.survey.showTimer},{name:"navigationTitle",serializationProperty:"locNavigationTitle"},{name:"navigationDescription",visibleIf:function(e){return!!e.survey&&"buttons"===e.survey.progressBarType},serializationProperty:"locNavigationDescription"},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"},{name:"state",visible:!1},{name:"isRequired",visible:!1},{name:"startWithNewLine",visible:!1},{name:"width",visible:!1},{name:"minWidth",visible:!1},{name:"maxWidth",visible:!1},{name:"colSpan",visible:!1,isSerializable:!1},{name:"effectiveColSpan:number",visible:!1,isSerializable:!1},{name:"innerIndent",visible:!1},{name:"indent",visible:!1},{name:"page",visible:!1,isSerializable:!1},{name:"showNumber",visible:!1},{name:"showQuestionNumbers",visible:!1},{name:"questionStartIndex",visible:!1},{name:"allowAdaptiveActions",visible:!1},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText",visible:!1}],function(){return new fn},"panel");class bn extends he{constructor(e){super(),this.survey=e,this.onResize=this.addEvent()}isListElementClickable(e){return!(this.survey.onServerValidateQuestions&&!this.survey.onServerValidateQuestions.isEmpty&&"onComplete"!==this.survey.checkErrorsMode)||e<=this.survey.currentPageNo+1}getRootCss(e="center"){let t=this.survey.css.progressButtonsContainerCenter;return this.survey.css.progressButtonsRoot&&(t+=" "+this.survey.css.progressButtonsRoot+" "+this.survey.css.progressButtonsRoot+"--"+(-1!==["footer","contentBottom"].indexOf(e)?"bottom":"top"),t+=" "+this.survey.css.progressButtonsRoot+"--"+(this.showItemTitles?"with-titles":"no-titles")),this.showItemNumbers&&this.survey.css.progressButtonsNumbered&&(t+=" "+this.survey.css.progressButtonsNumbered),this.isFitToSurveyWidth&&(t+=" "+this.survey.css.progressButtonsFitSurveyWidth),t}getListElementCss(e){if(!(e>=this.survey.visiblePages.length))return(new fe).append(this.survey.css.progressButtonsListElementPassed,this.survey.visiblePages[e].passed).append(this.survey.css.progressButtonsListElementCurrent,this.survey.currentPageNo===e).append(this.survey.css.progressButtonsListElementNonClickable,!this.isListElementClickable(e)).toString()}getScrollButtonCss(e,t){return(new fe).append(this.survey.css.progressButtonsImageButtonLeft,t).append(this.survey.css.progressButtonsImageButtonRight,!t).append(this.survey.css.progressButtonsImageButtonHidden,!e).toString()}clickListElement(e){e instanceof fn||(e=this.survey.visiblePages[e]),this.survey.tryNavigateToPage(e)}isListContainerHasScroller(e){const t=e.querySelector("."+this.survey.css.progressButtonsListContainer);return!!t&&t.scrollWidth>t.offsetWidth}isCanShowItemTitles(e){const t=e.querySelector("ul");if(!t||t.children.length<2)return!0;if(t.clientWidth>t.parentElement.clientWidth)return!1;const s=t.children[0].clientWidth;for(let e=0;e<t.children.length;e++)if(Math.abs(t.children[e].clientWidth-s)>5)return!1;return!0}clearConnectorsWidth(e){const t=e.querySelectorAll(".sd-progress-buttons__connector");for(let e=0;e<t.length;e++)t[e].style.width=""}adjustConnectors(e){const t=e.querySelector("ul");if(!t)return;const s=e.querySelectorAll(".sd-progress-buttons__connector"),n=this.showItemNumbers?36:20,i=(t.clientWidth-n)/(t.children.length-1)-n;for(let e=0;e<s.length;e++)s[e].style.width=i+"px"}get isFitToSurveyWidth(){return"default"===sn.currentType&&"survey"===this.survey.progressBarInheritWidthFrom&&"static"==this.survey.widthMode}get progressWidth(){return this.isFitToSurveyWidth?this.survey.renderedWidth:""}get showItemNumbers(){return"default"===sn.currentType&&this.survey.progressBarShowPageNumbers}get showItemTitles(){return"default"!==sn.currentType||this.survey.progressBarShowPageTitles}getItemNumber(e){let t="";return this.showItemNumbers&&(t+=this.survey.visiblePages.indexOf(e)+1),t}get headerText(){return this.survey.currentPage?this.survey.currentPage.renderedNavigationTitle:""}get footerText(){return this.progressText}get progressText(){return this.getPropertyValue("progressText",void 0,()=>this.survey.getProgressText())}get progressBarAriaLabel(){return l("progressbar",this.survey.getLocale())}resetProgressText(){this.resetPropertyValue("progressText")}processResponsiveness(e){this.onResize.fire(this,{width:e})}}class yn{constructor(e,t,s){this.model=e,this.element=t,this.viewModel=s,this.criticalProperties=["progressBarType","progressBarShowPageTitles"],this.canShowItemTitles=!0,this.processResponsiveness=(e,t)=>{if(this.viewModel.onUpdateScroller(e.isListContainerHasScroller(this.element)),this.model.clearConnectorsWidth(this.element),e.showItemTitles){if(e.survey.isMobile)return this.prevWidth=t.width,this.canShowItemTitles=!1,this.model.adjustConnectors(this.element),void this.viewModel.onResize(this.canShowItemTitles);void 0!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{(void 0===this.prevWidth||this.prevWidth<t.width&&!this.canShowItemTitles||this.prevWidth>t.width&&this.canShowItemTitles)&&(this.prevWidth=t.width,this.canShowItemTitles=e.isCanShowItemTitles(this.element),this.viewModel.onResize(this.canShowItemTitles),this.timer=void 0)},10)}else this.model.adjustConnectors(this.element)},this.model.survey.registerFunctionOnPropertiesValueChanged(this.criticalProperties,()=>this.forceUpdate(),"ProgressButtonsResponsivityManager"+this.viewModel.container),this.model.onResize.add(this.processResponsiveness),this.forceUpdate()}forceUpdate(){this.viewModel.onUpdateSettings(),this.processResponsiveness(this.model,{})}dispose(){clearTimeout(this.timer),this.model.onResize.remove(this.processResponsiveness),this.model.survey.unRegisterFunctionOnPropertiesValueChanged(this.criticalProperties,"ProgressButtonsResponsivityManager"+this.viewModel.container),this.element=void 0,this.model=void 0}}function Cn(e){if(e.parentQuestion)return Cn(e.parentQuestion);let t=e.parent;for(;t&&"page"!==t.getType()&&t.parent;)t=t.parent;return t&&"page"===t.getType()?t:null}function wn(e,t){var s=xn(e,t);const n={items:s,searchEnabled:!1,locOwner:e,listRole:"menu",listItemRole:"menuitemradio",listAriaLabel:l("toc",e.getLocale())};var i=new Ee(n);i.allowSelection=!1;const r=(e,t)=>{i.selectedItem=!!e&&i.actions.filter(t=>t.id===e.name)[0]||t};r(e.currentPage,s[0]),e.onCurrentPageChanged.add((t,s)=>{r(e.currentPage)}),e.onFocusInQuestion.add((e,t)=>{r(Cn(t.question))});const a=()=>{i.setItems(xn(e,t))};return e.registerFunctionOnPropertyValueChanged("pages",a,"toc"),e.onEndLoadingFromJson.add(a),i}function xn(e,t){return(e.pages||[]).map(s=>new De({id:s.name,locTitle:s.locNavigationTitle,action:()=>(i.activeElementBlur(),t&&t(),s.isPage?e.tryNavigateToPage(s):s.isPanel?function(e,t){return e.isDesignMode||t.focusFirstQuestion(),!0}(e,s):void 0),visible:new de(()=>s.isVisible&&!s.isStartPage)}))}class _n{constructor(e){this.survey=e,this.icon="icon-navmenu_24x24",this.togglePopup=()=>{this.popupModel.toggleVisibility()},this.listModel=wn(e,()=>{this.popupModel.isVisible=!1}),this.popupModel=new Re("sv-list",{model:this.listModel}),this.popupModel.overlayDisplayMode="tablet-dropdown-overlay",this.popupModel.displayMode=new de(()=>this.isMobile?"overlay":"popup"),_n.StickyPosition&&(e.onAfterRenderSurvey.add((e,t)=>this.initStickyTOCSubscriptions(t.htmlElement)),this.initStickyTOCSubscriptions(e.rootElement))}initStickyTOCSubscriptions(e){_n.StickyPosition&&e&&(e.addEventListener("scroll",t=>{this.updateStickyTOCSize(e)}),this.updateStickyTOCSize(e))}updateStickyTOCSize(e){if(!e)return;const t=e.querySelector("."+_n.RootStyle);if(t&&(t.style.height="",!this.isMobile&&_n.StickyPosition&&e)){const s=e.getBoundingClientRect().height,n=this.survey.findLayoutElement("advanced-header"),i=n&&n.data;let r=!i||i.hasBackground;const a="advanced"===this.survey.headerView?".sv-header":".sv_custom_header+div div."+(this.survey.css.title||"sd-title"),o=e.querySelector(a),l=o&&r?o.getBoundingClientRect().height:0,u=e.querySelector(".sv-scroll__scroller")||e,d=u.scrollTop>l?0:l-u.scrollTop;t.style.height=s-d-1+"px"}}get isMobile(){return this.survey.isMobile}get containerCss(){return function(e,t=!1){let s=_n.RootStyle;return t?s+" "+_n.RootStyle+"--mobile":(s+=" "+_n.RootStyle+"--"+(e.tocLocation||"").toLowerCase(),_n.StickyPosition&&(s+=" "+_n.RootStyle+"--sticky"),s)}(this.survey,this.isMobile)}dispose(){const[e]=this.survey.unRegisterFunctionOnPropertyValueChanged("pages","toc");this.survey.onEndLoadingFromJson.remove(e),this.survey.onPageAdded.remove(e),this.popupModel.dispose(),this.listModel.dispose()}}_n.RootStyle="sv_progress-toc",_n.StickyPosition=!0;class Vn extends P{constructor(e,t,s){super(),this.survey=e,this.valuesHash=t,this.variablesHash=s}getValue(e,t,s,n){if(1===e.length){const t=e[0].name;let s=this.getBuiltInVariableValue(t);if("locale"===t&&(s=this.survey.locale||o.defaultLocale),void 0!==s)return{value:s,isFound:!0}}let i=new T(this.variablesHash).getValue(e,t,s,n);return i&&i.isFound?i:(i=super.getValue(e,t,s,n),i&&i.isFound?i:new T(this.valuesHash).getValue(e,t,s,n))}updateValueByItem(e,t){const s=xt.expressionVariables.unwrapPostfix,n=e.endsWith(s);n&&(e=e.substring(0,e.length-s.length));const i=this.survey.getQuestionByValueName(e,!0);i&&(t.isFound=!0,t.context=i.getValueGetterContext(n))}isSearchNameRevert(){return!0}getBuiltInVariableValue(e){const t=this.survey;if("pageno"===(e=e.toLocaleLowerCase())){var s=t.currentPage;return null!=s?t.visiblePages.indexOf(s)+1:0}return"pagecount"===e?t.visiblePageCount:"correctedanswers"===e||"correctanswers"===e||"correctedanswercount"===e?t.getCorrectedAnswerCount():"incorrectedanswers"===e||"incorrectanswers"===e||"incorrectedanswercount"===e?t.getInCorrectedAnswerCount():"questioncount"===e?t.getQuizQuestionCount():void 0}}class In extends Ue{get platformName(){return In.platform}get commentSuffix(){return xt.commentSuffix}set commentSuffix(e){xt.commentSuffix=e}get commentPrefix(){return this.commentSuffix}set commentPrefix(e){this.commentSuffix=e}constructor(e=null,t=null){super(),this.valuesHash={},this.variablesHash={},this.onEndLoadingFromJson=this.addEvent(),this.onTriggerExecuted=this.addEvent(),this.onCompleting=this.addEvent(),this.onComplete=this.addEvent(),this.onShowingPreview=this.addEvent(),this.onNavigateToUrl=this.addEvent(),this.onStarted=this.addEvent(),this.onPartialSend=this.addEvent(),this.onCurrentPageChanging=this.addEvent(),this.onCurrentPageChanged=this.addEvent(),this.onValueChanging=this.addEvent(),this.onValueChanged=this.addEvent(),this.onVariableChanged=this.addEvent(),this.onQuestionVisibleChanged=this.addEvent(),this.onVisibleChanged=this.onQuestionVisibleChanged,this.onPageVisibleChanged=this.addEvent(),this.onPanelVisibleChanged=this.addEvent(),this.onQuestionCreated=this.addEvent(),this.onQuestionAdded=this.addEvent(),this.onQuestionRemoved=this.addEvent(),this.onPanelAdded=this.addEvent(),this.onPanelRemoved=this.addEvent(),this.onPageAdded=this.addEvent(),this.onValidateQuestion=this.addEvent(),this.onSettingQuestionErrors=this.addEvent(),this.onServerValidateQuestions=this.addEvent(),this.onValidatePanel=this.addEvent(),this.onErrorCustomText=this.addEvent(),this.onValidatePage=this.addEvent(),this.onValidatedErrorsOnCurrentPage=this.onValidatePage,this.onProcessHtml=this.addEvent(),this.onGetQuestionDisplayValue=this.addEvent(),this.onGetQuestionTitle=this.addEvent(),this.onGetTitleTagName=this.addEvent(),this.onGetQuestionNumber=this.addEvent(),this.onGetQuestionNo=this.onGetQuestionNumber,this.onGetPanelNumber=this.addEvent(),this.onGetPageNumber=this.addEvent(),this.onGetProgressText=this.addEvent(),this.onProgressText=this.onGetProgressText,this.onTextMarkdown=this.addEvent(),this.onTextRenderAs=this.addEvent(),this.onSendResult=this.addEvent(),this.onGetResult=this.addEvent(),this.onOpenFileChooser=this.addEvent(),this.onUploadFiles=this.addEvent(),this.onDownloadFile=this.addEvent(),this.onClearFiles=this.addEvent(),this.onChoicesLoaded=this.addEvent(),this.onLoadChoicesFromServer=this.onChoicesLoaded,this.onLoadedSurveyFromService=this.addEvent(),this.onProcessDynamicText=this.addEvent(),this.onProcessTextValue=this.onProcessDynamicText,this.onUpdateQuestionCssClasses=this.addEvent(),this.onUpdatePanelCssClasses=this.addEvent(),this.onUpdatePageCssClasses=this.addEvent(),this.onUpdateChoiceItemCss=this.addEvent(),this.onAfterRenderSurvey=this.addEvent(),this.onAfterRenderHeader=this.addEvent(),this.onAfterRenderPage=this.addEvent(),this.onAfterRenderQuestion=this.addEvent(),this.onAfterRenderQuestionInput=this.addEvent(),this.onAfterRenderPanel=this.addEvent(),this.onFocusInQuestion=this.addEvent(),this.onFocusInPanel=this.addEvent(),this.onShowingChoiceItem=this.addEvent(),this.onChoicesLazyLoad=this.addEvent(),this.onChoicesSearch=this.addEvent(),this.onGetChoiceDisplayValue=this.addEvent(),this.onMatrixRowAdded=this.addEvent(),this.onMatrixRowAdding=this.addEvent(),this.onMatrixBeforeRowAdded=this.onMatrixRowAdding,this.onMatrixRowRemoving=this.addEvent(),this.onMatrixRowRemoved=this.addEvent(),this.onMatrixRenderRemoveButton=this.addEvent(),this.onMatrixAllowRemoveRow=this.onMatrixRenderRemoveButton,this.onMatrixDetailPanelVisibleChanged=this.addEvent(),this.onMatrixCellCreating=this.addEvent(),this.onMatrixCellCreated=this.addEvent(),this.onAfterRenderMatrixCell=this.addEvent(),this.onMatrixAfterCellRender=this.onAfterRenderMatrixCell,this.onMatrixCellValueChanged=this.addEvent(),this.onMatrixCellValueChanging=this.addEvent(),this.onMatrixCellValidate=this.addEvent(),this.onMatrixColumnAdded=this.addEvent(),this.onMultipleTextItemAdded=this.addEvent(),this.onDynamicPanelAdded=this.addEvent(),this.onDynamicPanelRemoved=this.addEvent(),this.onDynamicPanelRemoving=this.addEvent(),this.onTimerTick=this.addEvent(),this.onTimer=this.onTimerTick,this.onTimerPanelInfoText=this.addEvent(),this.onDynamicPanelValueChanged=this.addEvent(),this.onDynamicPanelItemValueChanged=this.onDynamicPanelValueChanged,this.onDynamicPanelValueChanging=this.addEvent(),this.onGetDynamicPanelTabTitle=this.addEvent(),this.onDynamicPanelCurrentIndexChanged=this.addEvent(),this.onCheckAnswerCorrect=this.addEvent(),this.onIsAnswerCorrect=this.onCheckAnswerCorrect,this.onDragDropAllow=this.addEvent(),this.onMatrixRowDragOver=this.addEvent(),this.onExpressionRunning=this.addEvent(),this.onScrollToTop=this.addEvent(),this.onScrollingElementToTop=this.onScrollToTop,this.onLocaleChangedEvent=this.addEvent(),this.onGetQuestionTitleActions=this.addEvent(),this.onGetPanelTitleActions=this.addEvent(),this.onGetPageTitleActions=this.addEvent(),this.onGetPanelFooterActions=this.addEvent(),this.onGetMatrixRowActions=this.addEvent(),this.onElementContentVisibilityChanged=this.addEvent(),this.onGetExpressionDisplayValue=this.addEvent(),this.onCheckSingleInputPerPageMode=this.addEvent(),this.onPopupVisibleChanged=this.addEvent(),this.onOpenDropdownMenu=this.addEvent(),this.onElementWrapperComponentName=this.addEvent(),this.onElementWrapperComponentData=this.addEvent(),this.onCreateCustomChoiceItem=this.addEvent(),this.jsonErrors=null,this.cssValue=null,this.showHeaderOnCompletePage="auto",this._isLazyRenderingSuspended=!1,this.hideRequiredErrors=!1,this.cssVariables={},this._isMobile=!1,this._isCompact=!1,this.setValueOnExpressionCounter=0,this._isDesignMode=!1,this.validationAllowSwitchPages=!1,this.validationAllowComplete=!1,this.isNavigationButtonPressed=!1,this.mouseDownPage=null,this.isSmoothScrollEnabled=!1,this.onResize=new ge,this.isCurrentPageRendering=!0,this.isCurrentPageRendered=void 0,this.skeletonHeight=void 0,this.isTriggerIsRunning=!1,this.triggerKeys=null,this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter=0,this.conditionUpdateVisibleIndexes=!1,this.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,this.isEndLoadingFromJson=null,this.nofifyQuesitonHash={},this.questionHashes={names:{},namesInsensitive:{},valueNames:{},valueNamesInsensitive:{}},this.setValueFromTriggerCounter=0,this.isMovingPage=!1,this.needRenderIcons=!0,this.skippedPages=[],this.skeletonComponentName="sv-skeleton",this.taskManager=new cn,this.questionErrorComponent="sv-question-error",this.pageComponent="sv-page",this.onBeforeRunConstructor(),this.createHtmlLocString("completedHtml","completingSurvey"),this.createHtmlLocString("completedBeforeHtml","completingSurveyBefore","completed-before"),this.createHtmlLocString("loadingHtml","loadingSurvey","loading"),this.createLocalizableString("emptySurveyText",this,!0,"emptySurvey"),this.createLocalizableString("logo",this,!1),this.createLocalizableString("startSurveyText",this,!1,!0),this.createLocalizableString("pagePrevText",this,!1,!0),this.createLocalizableString("pageNextText",this,!1,!0),this.createLocalizableString("completeText",this,!1,!0),this.createLocalizableString("previewText",this,!1,!0),this.createLocalizableString("editText",this,!1,!0),this.createLocalizableString("questionTitleTemplate",this,!0),this.timerModelValue=new on(this),this.timerModelValue.onTimerTick=e=>{this.doTimer(e)},this.createNewArray("pages",e=>{e.isReadyForCleanChangedCallback&&e.isReadyForCleanChangedCallback(),this.doOnPageAdded(e)},e=>{e.isReadyForClean?this.doOnPageRemoved(e):e.isReadyForCleanChangedCallback=()=>{this.doOnPageRemoved(e),e.isReadyForCleanChangedCallback=void 0}}),this.createNewArray("triggers",e=>{e.setOwner(this)}),this.createNewArray("calculatedValues",e=>{e.setOwner(this)}),this.createNewArray("completedHtmlOnCondition",e=>{e.locOwner=this}),this.createNewArray("navigateToUrlOnCondition",e=>{e.locOwner=this}),this.registerPropertyChangedHandlers(["locale"],()=>{this.onSurveyLocaleChanged()}),this.registerPropertyChangedHandlers(["firstPageIsStartPage"],()=>{this.onFirstPageIsStartedChanged()}),this.registerPropertyChangedHandlers(["readOnly"],()=>{this.onReadOnlyChanged()}),this.registerPropertyChangedHandlers(["progressBarType"],()=>{this.updateProgressText()}),this.registerPropertyChangedHandlers(["questionStartIndex","requiredMark","questionTitlePattern"],()=>{this.resetVisibleIndexes()}),this.registerPropertyChangedHandlers(["isLoading","isCompleted","isCompletedBefore","readOnly","isStartedState","currentPage","isShowingPreview"],()=>{this.updateState()}),this.registerPropertyChangedHandlers(["state","currentPage","showPreviewBeforeComplete"],()=>{this.onStateAndCurrentPageChanged()}),this.registerPropertyChangedHandlers(["logo","logoPosition"],()=>{this.resetHasLogo()}),this.registerPropertyChangedHandlers(["backgroundImage"],()=>{this.resetPropertyValue("renderBackgroundImage")}),this.registerPropertyChangedHandlers(["backgroundImage","backgroundOpacity","backgroundImageFit","fitToContainer","backgroundImageAttachment"],()=>{this.resetPropertyValue("backgroundImageStyle")}),this.registerPropertyChangedHandlers(["showPrevButton","showCompleteButton"],()=>{this.updateButtonsVisibility()}),this.onGetQuestionNumber.onCallbacksChanged=()=>{this.resetVisibleIndexes()},this.onGetPanelNumber.onCallbacksChanged=()=>{this.resetVisibleIndexes()},this.onGetProgressText.onCallbacksChanged=()=>{this.updateProgressText()},this.onTextMarkdown.onCallbacksChanged=()=>{this.locStrsChanged()},this.onProcessHtml.onCallbacksChanged=()=>{this.locStrsChanged()},this.onGetQuestionTitle.onCallbacksChanged=()=>{this.locStrsChanged()},this.onUpdatePageCssClasses.onCallbacksChanged=()=>{this.currentPage&&this.currentPage.updateElementCss()},this.onUpdatePanelCssClasses.onCallbacksChanged=()=>{this.currentPage&&this.currentPage.updateElementCss()},this.onUpdateQuestionCssClasses.onCallbacksChanged=()=>{this.currentPage&&this.currentPage.updateElementCss()},this.onShowingChoiceItem.onCallbacksChanged=()=>{this.rebuildQuestionChoices()},this.locTitle.onStringChanged.add(()=>this.resetPropertyValue("titleIsEmpty")),this.onBeforeCreating(),e&&(("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),e&&e.clientId&&(this.clientId=e.clientId),this.fromJSON(e),this.surveyId&&this.loadSurveyFromService(this.surveyId,this.clientId)),this.onCreating(),t&&this.render(t),this.updateCss(),this.setCalculatedWidthModeUpdater(),this.notifier=new ln(this.css.saveData),this.notifier.addAction(this.createTryAgainAction(),"error"),this.onPopupVisibleChanged.add((e,t)=>{t.visible?this.onScrollCallback=()=>{t.popup.hide()}:this.onScrollCallback=void 0}),this.layoutElements.push({id:"timerpanel",template:"survey-timerpanel",component:"sv-timerpanel",data:this.timerModel}),this.layoutElements.push({id:"progress-buttons",component:"sv-progress-buttons",getData:()=>this.progressBar,processResponsiveness:e=>this.progressBar.processResponsiveness&&this.progressBar.processResponsiveness(e)}),this.layoutElements.push({id:"progress-questions",component:"sv-progress-questions",data:this}),this.layoutElements.push({id:"progress-pages",component:"sv-progress-pages",data:this}),this.layoutElements.push({id:"progress-correctquestions",component:"sv-progress-correctquestions",data:this}),this.layoutElements.push({id:"progress-requiredquestions",component:"sv-progress-requiredquestions",data:this}),this.addLayoutElement({id:"toc-navigation",component:"sv-navigation-toc",getData:()=>this.tocModel,processResponsiveness:e=>this.tocModel.updateStickyTOCSize(this.rootElement)}),this.layoutElements.push({id:"buttons-navigation",component:"sv-action-bar",getData:()=>this.navigationBar})}get tocModel(){return this.tocModelValue||(this.tocModelValue=new _n(this)),this.tocModelValue}get sjsVersion(){return this.getPropertyValue("sjsVersion")}set sjsVersion(e){this.setPropertyValue("sjsVersion",e)}processClosedPopup(e,t){throw new Error("Method not implemented.")}createTryAgainAction(){return{id:"save-again",title:this.getLocalizationString("saveAgainButton"),action:()=>{this.isCompleted?this.saveDataOnComplete():this.doComplete()}}}createHtmlLocString(e,t,s){const n=this.createLocalizableString(e,this,!1,t);s&&(n.onGetTextCallback=e=>this.processHtml(e,s))}getType(){return"survey"}onPropertyValueChanged(e,t,s){"questionsOnPageMode"===e&&this.onQuestionsOnPageModeChanged(t)}get pages(){return this.getPropertyValue("pages")}render(e=null){this.renderCallback&&this.renderCallback()}updateSurvey(e,t){for(var s in e)if("model"!=s&&"children"!=s)if(0==s.indexOf("on")&&this[s]&&this[s].add){let t=e[s],n=function(e,s){t(e,s)};this[s].add(n)}else this[s]=e[s];e&&e.data&&this.onValueChanged.add((t,s)=>{e.data[s.name]=s.value})}getCss(){return this.css}updateCompletedPageCss(){this.containerCss=this.css.container,this.completedCss=(new fe).append(this.css.body).append(this.css.completedPage).toString(),this.completedBeforeCss=(new fe).append(this.css.body).append(this.css.completedBeforePage).toString(),this.loadingBodyCss=(new fe).append(this.css.body).append(this.css.bodyLoading).toString()}updateCss(){this.rootCss=this.getRootCss(),this.updateNavigationCss(),this.updateCompletedPageCss(),this.updateWrapperFormCss()}get css(){return this.cssValue||(this.cssValue={},this.copyCssClasses(this.cssValue,sn.getCss())),this.cssValue}set css(e){this.setCss(e)}setCss(e,t=!0){t?this.mergeValues(e,this.css):this.cssValue=e,this.updateElementCss(!1)}get cssTitle(){return this.css.title}get cssNavigationComplete(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.complete)}get cssNavigationPreview(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.preview)}get cssNavigationEdit(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.edit)}get cssNavigationPrev(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.prev)}get cssNavigationStart(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.start)}get cssNavigationNext(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.css.navigation.next)}get cssSurveyNavigationButton(){return(new fe).append(this.css.navigationButton).append(this.css.bodyNavigationButton).toString()}get bodyCss(){return(new fe).append(this.css.body).append(this.css.bodyWithTimer,this.showTimer&&"running"===this.state).append(this.css.body+"--"+this.calculatedWidthMode).toString()}get bodyContainerCss(){return this.css.bodyContainer}insertAdvancedHeader(e){e.survey=this,this.layoutElements.push({id:"advanced-header",container:"header",component:"sv-header",index:-100,data:e,processResponsiveness:t=>e.processResponsiveness()})}getNavigationCss(e,t){return(new fe).append(e).append(t).toString()}get lazyRenderEnabled(){return!0===this.lazyRenderEnabledValue}set lazyRenderEnabled(e){if(this.lazyRenderEnabled===e)return;this.lazyRenderEnabledValue=e;const t=this.currentPage;t&&t.updateRows()}get lazyRendering(){return this.lazyRenderEnabled}set lazyRendering(e){this.lazyRenderEnabled=e}get isLazyRendering(){return this.lazyRenderEnabled||xt.lazyRender.enabled}get lazyRenderFirstBatchSize(){return this.lazyRenderFirstBatchSizeValue||xt.lazyRender.firstBatchSize}set lazyRenderFirstBatchSize(e){this.lazyRenderFirstBatchSizeValue=e}get isLazyRenderingSuspended(){return this._isLazyRenderingSuspended}suspendLazyRendering(){this.isLazyRendering&&(this._isLazyRenderingSuspended=!0)}releaseLazyRendering(){this.isLazyRendering&&(this._isLazyRenderingSuspended=!1)}updateLazyRenderingRowsOnRemovingElements(){var e,t;if(this.isLazyRendering){var s=this.currentPage;s&&et(null===(t=this.rootElement||(null===(e=this.creator)||void 0===e?void 0:e.rootElement))||void 0===t?void 0:t.querySelector(`#${s.id}`))}}get triggers(){return this.getPropertyValue("triggers")}set triggers(e){this.setPropertyValue("triggers",e)}get calculatedValues(){return this.getPropertyValue("calculatedValues")}set calculatedValues(e){this.setPropertyValue("calculatedValues",e)}get surveyId(){return this.getPropertyValue("surveyId","")}set surveyId(e){this.setPropertyValue("surveyId",e)}get surveyPostId(){return this.getPropertyValue("surveyPostId","")}set surveyPostId(e){this.setPropertyValue("surveyPostId",e)}get clientId(){return this.getPropertyValue("clientId","")}set clientId(e){this.setPropertyValue("clientId",e)}get cookieName(){return this.getPropertyValue("cookieName","")}set cookieName(e){this.setPropertyValue("cookieName",e)}get partialSendEnabled(){return this.getPropertyValue("partialSendEnabled")}set partialSendEnabled(e){this.setPropertyValue("partialSendEnabled",e)}get sendResultOnPageNext(){return this.partialSendEnabled}set sendResultOnPageNext(e){this.partialSendEnabled=e}get surveyShowDataSaving(){return this.getPropertyValue("surveyShowDataSaving")}set surveyShowDataSaving(e){this.setPropertyValue("surveyShowDataSaving",e)}get autoFocusFirstQuestion(){return this.getPropertyValue("autoFocusFirstQuestion")}set autoFocusFirstQuestion(e){this.setPropertyValue("autoFocusFirstQuestion",e)}get focusFirstQuestionAutomatic(){return this.autoFocusFirstQuestion}set focusFirstQuestionAutomatic(e){this.autoFocusFirstQuestion=e}get autoFocusFirstError(){return this.getPropertyValue("autoFocusFirstError")}set autoFocusFirstError(e){this.setPropertyValue("autoFocusFirstError",e)}get focusOnFirstError(){return this.autoFocusFirstError}set focusOnFirstError(e){this.autoFocusFirstError=e}get showNavigationButtons(){return this.getPropertyValue("showNavigationButtons")}set showNavigationButtons(e){!0===e||!1===e?this.setPropertyValue("showNavigationButtons",e):"none"===e?this.setPropertyValue("showNavigationButtons",!1):["top","bottom","both","topBottom"].indexOf(e)>-1&&(this.setPropertyValue("showNavigationButtons",!0),this.navigationButtonsLocation=e)}get navigationButtonsLocation(){return this.getPropertyValue("navigationButtonsLocation")}set navigationButtonsLocation(e){this.setPropertyValue("navigationButtonsLocation",e)}get showPrevButton(){return this.getPropertyValue("showPrevButton")}set showPrevButton(e){this.setPropertyValue("showPrevButton",e)}get showCompleteButton(){return this.getPropertyValue("showCompleteButton",!0)}set showCompleteButton(e){this.setPropertyValue("showCompleteButton",e)}get showTOC(){return this.getPropertyValue("showTOC")}set showTOC(e){this.setPropertyValue("showTOC",e)}get tocLocation(){return this.getPropertyValue("tocLocation")}set tocLocation(e){this.setPropertyValue("tocLocation",e)}get showTitle(){return this.getPropertyValue("showTitle")}set showTitle(e){this.setPropertyValue("showTitle",e)}get showPageTitles(){return this.getPropertyValue("showPageTitles")}set showPageTitles(e){this.setPropertyValue("showPageTitles",e)}get showCompletePage(){return this.getPropertyValue("showCompletePage")}set showCompletePage(e){this.setPropertyValue("showCompletePage",e)}get showCompletedPage(){return this.showCompletePage}set showCompletedPage(e){this.showCompletePage=e}get navigateToUrl(){return this.getPropertyValue("navigateToUrl")}set navigateToUrl(e){this.setPropertyValue("navigateToUrl",e)}get navigateToUrlOnCondition(){return this.getPropertyValue("navigateToUrlOnCondition")}set navigateToUrlOnCondition(e){this.setPropertyValue("navigateToUrlOnCondition",e)}getNavigateToUrl(){var e=this.getExpressionItemOnRunCondition(this.navigateToUrlOnCondition),t=e?e.url:this.navigateToUrl;return t&&(t=this.processText(t,!1)),t}navigateTo(){var e={url:this.getNavigateToUrl(),allow:!0};this.onNavigateToUrl.fire(this,e),e.url&&e.allow&&function(e){const t=n.getLocation();e&&t&&(t.href=function(e){return e&&e.toLocaleLowerCase().indexOf("javascript:")>-1?encodeURIComponent(e):e}(e))}(e.url)}get requiredMark(){return this.getPropertyValue("requiredMark")}set requiredMark(e){this.setPropertyValue("requiredMark",e)}get requiredText(){return this.requiredMark}set requiredText(e){this.requiredMark=e}beforeSettingQuestionErrors(e,t){this.makeRequiredErrorsInvisible(t),this.onSettingQuestionErrors.fire(this,{question:e,errors:t})}makeRequiredErrorsInvisible(e){if(this.hideRequiredErrors)for(var t=0;t<e.length;t++){var s=e[t].getErrorType();"required"!=s&&"requireoneanswer"!=s||(e[t].visible=!1)}}get questionStartIndex(){return this.getPropertyValue("questionStartIndex","")}set questionStartIndex(e){this.setPropertyValue("questionStartIndex",e)}get storeOthersAsComment(){return this.getPropertyValue("storeOthersAsComment")}set storeOthersAsComment(e){this.setPropertyValue("storeOthersAsComment",e)}get maxTextLength(){return this.getPropertyValue("maxTextLength")}set maxTextLength(e){this.setPropertyValue("maxTextLength",e)}get maxCommentLength(){return this.getPropertyValue("maxCommentLength")}set maxCommentLength(e){this.setPropertyValue("maxCommentLength",e)}get maxOthersLength(){return this.maxCommentLength}set maxOthersLength(e){this.maxCommentLength=e}get autoAdvanceEnabled(){return this.getPropertyValue("autoAdvanceEnabled")}set autoAdvanceEnabled(e){this.setPropertyValue("autoAdvanceEnabled",e)}get goNextPageAutomatic(){return this.autoAdvanceEnabled}set goNextPageAutomatic(e){this.autoAdvanceEnabled=e}get autoAdvanceAllowComplete(){return this.getPropertyValue("autoAdvanceAllowComplete")}set autoAdvanceAllowComplete(e){this.setPropertyValue("autoAdvanceAllowComplete",e)}get allowCompleteSurveyAutomatic(){return this.autoAdvanceAllowComplete}set allowCompleteSurveyAutomatic(e){this.autoAdvanceAllowComplete=e}get checkErrorsMode(){return this.getPropertyValue("checkErrorsMode")}set checkErrorsMode(e){this.setPropertyValue("checkErrorsMode",e)}get validateVisitedEmptyFields(){return this.getPropertyValue("validateVisitedEmptyFields")}set validateVisitedEmptyFields(e){this.setPropertyValue("validateVisitedEmptyFields",e)}getValidateVisitedEmptyFields(){return this.validateVisitedEmptyFields&&this.isValidateOnValueChange}get autoGrowComment(){return this.getPropertyValue("autoGrowComment")}set autoGrowComment(e){this.setPropertyValue("autoGrowComment",e)}get allowResizeComment(){return this.getPropertyValue("allowResizeComment")}set allowResizeComment(e){this.setPropertyValue("allowResizeComment",e)}get commentAreaRows(){return this.getPropertyValue("commentAreaRows")}set commentAreaRows(e){this.setPropertyValue("commentAreaRows",e)}get textUpdateMode(){return this.getPropertyValue("textUpdateMode")}set textUpdateMode(e){this.setPropertyValue("textUpdateMode",e)}get clearInvisibleValues(){return this.getPropertyValue("clearInvisibleValues")}set clearInvisibleValues(e){!0===e&&(e="onComplete"),!1===e&&(e="none"),this.setPropertyValue("clearInvisibleValues",e)}clearIncorrectValues(e=!1){for(var t=0;t<this.pages.length;t++)this.pages[t].clearIncorrectValues();if(e){var s=this.data,n=!1;for(var i in s)if(!this.getQuestionByValueName(i)&&!this.iscorrectValueWithPostPrefix(i,xt.commentSuffix)&&!this.iscorrectValueWithPostPrefix(i,xt.matrix.totalsSuffix)){var r=this.getCalculatedValueByName(i);r&&r.includeIntoResult||(n=!0,delete s[i])}n&&(this.data=s)}}iscorrectValueWithPostPrefix(e,t){return e.indexOf(t)===e.length-t.length&&!!this.getQuestionByValueName(e.substring(0,e.indexOf(t)))}get keepIncorrectValues(){return this.getPropertyValue("keepIncorrectValues")}set keepIncorrectValues(e){this.setPropertyValue("keepIncorrectValues",e)}get locale(){return this.getPropertyValueWithoutDefault("locale")||o.currentLocale}set locale(e){e!==o.defaultLocale||o.currentLocale||(e=""),this.setPropertyValue("locale",e)}onSurveyLocaleChanged(){this.notifyElementsOnAnyValueOrVariableChanged("locale"),this.localeChanged(),this.onLocaleChangedEvent.fire(this,this.locale)}get localeDir(){return o.localeDirections[this.locale]}getUsedLocales(){var e=new Array;this.addUsedLocales(e);var t=e.indexOf("default");if(t>-1){var s=o.defaultLocale,n=e.indexOf(s);n>-1&&e.splice(n,1),t=e.indexOf("default"),e[t]=s}return e}localeChanged(){for(var e=0;e<this.pages.length;e++)this.pages[e].localeChanged()}getLocale(){return this.locale}locStrsChanged(){if(!this.isClearingUnsedValues&&(super.locStrsChanged(),this.currentPage)){if(this.isDesignMode)this.pages.forEach(e=>e.locStrsChanged());else{var e=this.activePage;e&&e.locStrsChanged();const s=this.visiblePages;for(var t=0;t<s.length;t++)s[t].navigationLocStrChanged()}this.isStartPageActive||this.updateProgressText(),this.navigationBarValue&&this.navigationBar.locStrsChanged()}}getMarkdownHtml(e,t,s){return this.getSurveyMarkdownHtml(this,e,t,s)}getRenderer(e){return this.getRendererForString(this,e)}getRendererContext(e){return this.getRendererContextForString(this,e)}getRendererForString(e,t,s){let n=this.getBuiltInRendererForString(e,t,s);n=this.elementWrapperComponentNameCore(n,e,"string",t);const i={element:e,name:t,renderAs:n};return this.onTextRenderAs.fire(this,i),i.renderAs}getRendererContextForString(e,t,s){return this.elementWrapperDataCore(t,e,"string")}getExpressionDisplayValue(e,t,s){const n={question:e,value:t,displayValue:s};return this.onGetExpressionDisplayValue.fire(this,n),n.displayValue}getBuiltInRendererForString(e,t,s){if(this.isDesignMode)return Ze.editableRenderer}getProcessedText(e){return this.processText(e,!0)}getLocString(e){return this.getLocalizationString(e)}getErrorCustomText(e,t){return this.getSurveyErrorCustomText(this,e,t)}getSurveyErrorCustomText(e,t,s){const n={text:t,name:s.getErrorType(),obj:e,error:s};return this.onErrorCustomText.fire(this,n),n.text}getQuestionDisplayValue(e,t){const s={question:e,displayValue:t};return this.onGetQuestionDisplayValue.fire(this,s),s.displayValue}get emptySurveyText(){return this.getLocalizableStringText("emptySurveyText")}set emptySurveyText(e){this.setLocalizableStringText("emptySurveyText",e)}get logo(){return this.getLocalizableStringText("logo")}set logo(e){this.setLocalizableStringText("logo",e)}get locLogo(){return this.getLocalizableString("logo")}get logoWidth(){return this.getPropertyValue("logoWidth")}set logoWidth(e){this.setPropertyValue("logoWidth",e)}get renderedLogoWidth(){return this.logoWidth?it(this.logoWidth):void 0}get renderedStyleLogoWidth(){return this.logoWidth?rt(this.logoWidth):void 0}get logoHeight(){return this.getPropertyValue("logoHeight")}set logoHeight(e){this.setPropertyValue("logoHeight",e)}get renderedLogoHeight(){return this.logoHeight?it(this.logoHeight):void 0}get renderedStyleLogoHeight(){return this.logoHeight?rt(this.logoHeight):void 0}get logoPosition(){return this.getPropertyValue("logoPosition")}set logoPosition(e){this.setPropertyValue("logoPosition",e)}get hasLogo(){return this.getPropertyValue("hasLogo",void 0,()=>!!this.logo&&"none"!==this.logoPosition)}resetHasLogo(){this.resetPropertyValue("hasLogo")}get isLogoBefore(){return!this.isDesignMode&&this.renderedHasLogo&&("left"===this.logoPosition||"top"===this.logoPosition)}get isLogoAfter(){return this.isDesignMode?this.renderedHasLogo:this.renderedHasLogo&&("right"===this.logoPosition||"bottom"===this.logoPosition)}get logoClassNames(){return(new fe).append(this.css.logo).append({left:"sv-logo--left",right:"sv-logo--right",top:"sv-logo--top",bottom:"sv-logo--bottom"}[this.logoPosition]).toString()}get titleIsEmpty(){return this.getPropertyValue("titleIsEmpty",void 0,()=>this.locTitle.isEmpty)}get renderedHasTitle(){return this.isDesignMode?this.isPropertyVisible("title"):!this.titleIsEmpty&&this.showTitle}get renderedHasDescription(){return this.isDesignMode?this.isPropertyVisible("description"):!!this.hasDescription&&this.showTitle}get hasTitle(){return this.renderedHasTitle}get renderedHasLogo(){return this.isDesignMode?this.isPropertyVisible("logo"):this.hasLogo}get renderedHasHeader(){return this.renderedHasTitle||this.renderedHasLogo}get logoFit(){return this.getPropertyValue("logoFit")}set logoFit(e){this.setPropertyValue("logoFit",e)}get themeVariables(){return Object.assign({},this.cssVariables)}setIsMobile(e=!0){this._isMobile!==e&&(this._isMobile=e,this.updateCss(),this.getAllQuestions().forEach(t=>t.setIsMobile(e)))}get isMobile(){return this._isMobile&&!this.isDesignMode}set isCompact(e){e!==this._isCompact&&(this._isCompact=e,this.updateElementCss(),this.triggerResponsiveness(!0))}get isCompact(){return this._isCompact}isLogoImageChoosen(){return this.locLogo.renderedHtml}get titleMaxWidth(){return""}get renderBackgroundImage(){return this.getPropertyValue("renderBackgroundImage",void 0,()=>tt(this.backgroundImage))}get backgroundOpacity(){return this.getPropertyValue("backgroundOpacity")}set backgroundOpacity(e){this.setPropertyValue("backgroundOpacity",e)}get backgroundImageStyle(){return this.getPropertyValue("backgroundImageStyle",void 0,()=>this.calcBackgroundImageStyle())}calcBackgroundImageStyle(){return{opacity:this.backgroundOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.backgroundImageFit,backgroundAttachment:this.fitToContainer?void 0:this.backgroundImageAttachment}}updateWrapperFormCss(){this.wrapperFormCss=(new fe).append(this.css.rootWrapper).append(this.css.rootWrapperHasImage,!!this.backgroundImage).append(this.css.rootWrapperFixed,!this.formScrollDisabled).toString()}get completedHtml(){return this.getLocalizableStringText("completedHtml")}set completedHtml(e){this.setLocalizableStringText("completedHtml",e)}get locCompletedHtml(){return this.getLocalizableString("completedHtml")}get completedHtmlOnCondition(){return this.getPropertyValue("completedHtmlOnCondition")}set completedHtmlOnCondition(e){this.setPropertyValue("completedHtmlOnCondition",e)}runExpression(e,t){if(!e)return null;var s=this.getFilteredProperties();const n=this.createExpressionRunner(e);let i;return n.onRunComplete=e=>{i=e,t&&t(e)},n.runContext(this.getValueGetterContext(),s)||i}beforeExpressionRunning(e,t,s){const n={element:e,propertyName:t,expression:s,allow:!0};return this.onExpressionRunning.fire(this,n),n.allow?n.expression:""}get isSettingValueOnExpression(){return this.setValueOnExpressionCounter>0}startSetValueOnExpression(){this.setValueOnExpressionCounter++}finishSetValueOnExpression(){this.setValueOnExpressionCounter--}runCondition(e){if(!e)return!1;const t=this.getFilteredProperties();return new ae(e).runContext(this.getValueGetterContext(),t)}runTriggers(){this.checkTriggers(this.getFilteredValues(),!1)}get renderedCompletedHtml(){var e=this.getExpressionItemOnRunCondition(this.completedHtmlOnCondition);return e?e.html:this.completedHtml}getExpressionItemOnRunCondition(e){if(0==e.length)return null;for(var t=this.getFilteredProperties(),s=0;s<e.length;s++)if(e[s].runCondition(t))return e[s];return null}get completedBeforeHtml(){return this.getLocalizableStringText("completedBeforeHtml")}set completedBeforeHtml(e){this.setLocalizableStringText("completedBeforeHtml",e)}get locCompletedBeforeHtml(){return this.getLocalizableString("completedBeforeHtml")}get loadingHtml(){return this.getLocalizableStringText("loadingHtml")}set loadingHtml(e){this.setLocalizableStringText("loadingHtml",e)}get locLoadingHtml(){return this.getLocalizableString("loadingHtml")}get navigationBar(){return this.navigationBarValue||(this.navigationBarValue=this.createNavigationBar(),this.updateNavigationCss()),this.navigationBarValue}addNavigationItem(e){e.component||(e.component="sv-nav-btn"),e.innerCss||(e.innerCss=this.cssSurveyNavigationButton);const t=e.action;return e.action=()=>{this.taskManager.waitAndExecute(()=>t())},this.navigationBar.addAction(e)}removeNavigationItem(e){const t=this.navigationBar.getActionById(e);if(t){const e=this.navigationBar.actions;e.splice(e.indexOf(t),1)}}get startSurveyText(){return this.getLocalizableStringText("startSurveyText")}set startSurveyText(e){this.setLocalizableStringText("startSurveyText",e)}get locStartSurveyText(){return this.getLocalizableString("startSurveyText")}get pagePrevText(){return this.getLocalizableStringText("pagePrevText")}set pagePrevText(e){this.setLocalizableStringText("pagePrevText",e)}get locPagePrevText(){return this.getLocalizableString("pagePrevText")}get pageNextText(){return this.getLocalizableStringText("pageNextText")}set pageNextText(e){this.setLocalizableStringText("pageNextText",e)}get locPageNextText(){return this.getLocalizableString("pageNextText")}get completeText(){return this.getLocalizableStringText("completeText")}set completeText(e){this.setLocalizableStringText("completeText",e)}get locCompleteText(){return this.getLocalizableString("completeText")}get previewText(){return this.getLocalizableStringText("previewText")}set previewText(e){this.setLocalizableStringText("previewText",e)}get locPreviewText(){return this.getLocalizableString("previewText")}get editText(){return this.getLocalizableStringText("editText")}set editText(e){this.setLocalizableStringText("editText",e)}get locEditText(){return this.getLocalizableString("editText")}getElementTitleTagName(e,t){if(this.onGetTitleTagName.isEmpty)return t;const s={element:e,tagName:t};return this.onGetTitleTagName.fire(this,s),s.tagName}get questionTitlePattern(){return this.getPropertyValue("questionTitlePattern","numTitleRequire")}set questionTitlePattern(e){"numRequireTitle"!==e&&"requireNumTitle"!==e&&"numTitle"!=e&&(e="numTitleRequire"),this.setPropertyValue("questionTitlePattern",e)}getQuestionTitlePatternOptions(){const e=new Array,t=this.getLocalizationString("questionTitlePatternText"),s=this.questionStartIndex?this.questionStartIndex:"1.";return e.push({value:"numTitleRequire",text:s+" "+t+" "+this.requiredMark}),e.push({value:"numRequireTitle",text:s+" "+this.requiredMark+" "+t}),e.push({value:"numTitle",text:s+" "+t}),e}get questionTitleTemplate(){return this.getLocalizableStringText("questionTitleTemplate")}set questionTitleTemplate(e){this.setLocalizableStringText("questionTitleTemplate",e),this.questionTitlePattern=this.getNewTitlePattern(e),this.questionStartIndex=this.getNewQuestionTitleElement(e,"no",this.questionStartIndex,"1"),this.requiredMark=this.getNewQuestionTitleElement(e,"require",this.requiredMark,"*")}getNewTitlePattern(e){if(e){for(var t=[];e.indexOf("{")>-1;){var s=(e=e.substring(e.indexOf("{")+1)).indexOf("}");if(s<0)break;t.push(e.substring(0,s)),e=e.substring(s+1)}if(t.length>1){if("require"==t[0])return"requireNumTitle";if("require"==t[1]&&3==t.length)return"numRequireTitle";if(t.indexOf("require")<0)return"numTitle"}if(1==t.length&&"title"==t[0])return"numTitle"}return"numTitleRequire"}getNewQuestionTitleElement(e,t,s,n){if(t="{"+t+"}",!e||e.indexOf(t)<0)return s;for(var i=e.indexOf(t),r="",a="",o=i-1;o>=0&&"}"!=e[o];o--);for(o<i-1&&(r=e.substring(o+1,i)),o=i+=t.length;o<e.length&&"{"!=e[o];o++);for(o>i&&(a=e.substring(i,o)),o=0;o<r.length&&r.charCodeAt(o)<33;)o++;for(r=r.substring(o),o=a.length-1;o>=0&&a.charCodeAt(o)<33;)o--;return a=a.substring(0,o+1),r||a?r+(s||n)+a:s}get locQuestionTitleTemplate(){return this.getLocalizableString("questionTitleTemplate")}getUpdatedQuestionTitle(e,t){if(this.onGetQuestionTitle.isEmpty)return t;const s={question:e,title:t};return this.onGetQuestionTitle.fire(this,s),s.title}getUpdatedQuestionNo(e,t){if(this.onGetQuestionNumber.isEmpty)return t;const s={question:e,number:t,no:t};return this.onGetQuestionNumber.fire(this,s),s.no===t?s.number:s.no}getUpdatedPanelNo(e,t){if(this.onGetPanelNumber.isEmpty)return t;const s={panel:e,number:t};return this.onGetPanelNumber.fire(this,s),s.number}getUpdatedPageNo(e,t){if(this.onGetPageNumber.isEmpty)return t;const s={page:e,number:t};return this.onGetPageNumber.fire(this,s),s.number}get showPageNumbers(){return this.getPropertyValue("showPageNumbers")}set showPageNumbers(e){e!==this.showPageNumbers&&(this.setPropertyValue("showPageNumbers",e),this.updateVisibleIndexes())}get showQuestionNumbers(){return this.getPropertyValue("showQuestionNumbers")}set showQuestionNumbers(e){!0===e&&(e="on"),!1===e&&(e="off"),(e="onpage"===(e=e.toLowerCase())?"onPage":e)!==this.showQuestionNumbers&&(this.setPropertyValue("showQuestionNumbers",e),this.updateVisibleIndexes())}get progressBar(){return this.progressBarValue||(this.progressBarValue=new bn(this)),this.progressBarValue}get showProgressBar(){return this.getPropertyValue("showProgressBar")}set showProgressBar(e){this.setShowProgressBar(e)}setShowProgressBar(e){"off"===e&&(e=!1),!0===e||!1===e?this.setPropertyValue("showProgressBar",e):(this.setPropertyValue("showProgressBar",!0),this.progressBarLocation=e)}get progressBarLocation(){return this.getPropertyValue("progressBarLocation")}set progressBarLocation(e){this.setPropertyValue("progressBarLocation",e.toLowerCase())}get progressBarType(){return this.getPropertyValue("progressBarType")}set progressBarType(e){"correctquestion"===e&&(e="correctQuestion"),"requiredquestion"===e&&(e="requiredQuestion"),this.setPropertyValue("progressBarType",e)}get progressBarComponentName(){let e=this.progressBarType;return xt.legacyProgressBarView||"default"!==sn.currentType||Sn(e,"pages")&&(e="buttons"),"progress-"+e}get isShowProgressBarOnTop(){return!!this.canShowProgressBar()&&!!this.showProgressBar&&-1!==["auto","aboveheader","belowheader","topbottom","top","both"].indexOf(this.progressBarLocation)}get isShowProgressBarOnBottom(){return!(!this.canShowProgressBar()||!this.showProgressBar||"bottom"!==this.progressBarLocation&&"both"!==this.progressBarLocation&&"topbottom"!==this.progressBarLocation)}getProgressTypeComponent(){return"sv-progress-"+this.progressBarType.toLowerCase()}getProgressCssClasses(e=""){return(new fe).append(this.css.progress).append(this.css.progressTop,this.isShowProgressBarOnTop&&(!e||"header"==e)).append(this.css.progressBottom,this.isShowProgressBarOnBottom&&(!e||"footer"==e)).toString()}canShowProgressBar(){return!this.isShowingPreview||!this.showPreviewBeforeComplete||"allQuestions"!=this.previewMode}get processedTitle(){return this.locTitle.renderedHtml}get questionTitleLocation(){return this.getPropertyValue("questionTitleLocation")}set questionTitleLocation(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase()),this.isLoadingFromJson||this.updateElementCss(!0)}updateElementCss(e){this.startPage&&this.startPage.updateElementCss(e);for(var t=this.visiblePages,s=0;s<t.length;s++)t[s].updateElementCss(e);this.updateCss()}get questionErrorLocation(){return this.getPropertyValue("questionErrorLocation")}set questionErrorLocation(e){this.setPropertyValue("questionErrorLocation",e.toLowerCase())}get questionDescriptionLocation(){return this.getPropertyValue("questionDescriptionLocation")}set questionDescriptionLocation(e){this.setPropertyValue("questionDescriptionLocation",e)}get mode(){return this.readOnly?"display":"edit"}set mode(e){(e=e.toLowerCase())!=this.mode&&("edit"!=e&&"display"!=e||(this.readOnly="display"==e))}get readOnly(){return this.getPropertyValue("readOnly")}set readOnly(e){this.setPropertyValue("readOnly",e)}onReadOnlyChanged(){for(var e=0;e<this.pages.length;e++){var t=this.pages[e];t.setPropertyValue("isReadOnly",t.isReadOnly)}this.updateButtonsVisibility(),this.updateCss()}get data(){for(var e={},t=this.getValuesKeys(),s=0;s<t.length;s++){var n=t[s],i=this.getDataValueCore(this.valuesHash,n);void 0!==i&&(e[n]=i)}return this.setCalculatedValuesIntoResult(e),e}set data(e){this.valuesHash={},this.setDataCore(e,!e)}mergeData(e){if(!e)return;const t=this.data;this.mergeValues(e,t),this.setDataCore(t)}setDataCore(e,t=!1){if(t&&(this.valuesHash={}),e)for(var s in e){const t="string"==typeof s?s.trim():s;this.setDataValueCore(this.valuesHash,t,e[s])}this.isSettingDataValue=!0,this.updateAllQuestionsValue(t),this.notifyAllQuestionsOnValueChanged(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isSettingDataValue=!1,this.runConditions(),this.updateAllQuestionsValue(t)}isSettingData(){return!0===this.isSettingDataValue}get isSurvey(){return!0}getData(e){const t=e||{includePages:!1,includePanels:!1};return t.includePages||t.includePanels?this.getStructuredData(!!t.includePages,t.includePanels?100:t.includePages?1:0):this.data}getStructuredData(e=!0,t=-1){if(0===t)return this.data;const s={};return this.pages.forEach(n=>{if(e){const e={};n.collectValues(e,t-1)&&(s[n.name]=e)}else n.collectValues(s,t)}),s}setStructuredData(e,t=!1){if(!e)return;const s={};for(let t in e)if(this.getQuestionByValueName(t))s[t]=e[t];else{let n=this.getPageByName(t);n||(n=this.getPanelByName(t)),n&&this.collectDataFromPanel(n,s,e[t])}t?this.mergeData(s):this.data=s}collectDataFromPanel(e,t,s){for(let n in s){let i=e.getElementByName(n);i&&(i.isPanel?this.collectDataFromPanel(i,t,s[n]):t[n]=s[n])}}get editingObj(){return this.editingObjValue}set editingObj(e){if(this.editingObj!=e&&(this.unConnectEditingObj(),this.editingObjValue=e,!this.isDisposed)){if(!e)for(var t=this.getAllQuestions(),s=0;s<t.length;s++)t[s].unbindValue();this.editingObj&&(this.setDataCore({}),this.onEditingObjPropertyChanged=(e,t)=>{I.hasOriginalProperty(this.editingObj,t.name)&&("locale"===t.name&&this.setDataCore({}),this.updateOnSetValue(t.name,this.editingObj[t.name],t.oldValue))},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))}}unConnectEditingObj(){this.editingObj&&!this.editingObj.isDisposed&&this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged)}get isEditingSurveyElement(){return!!this.editingObj}setCalculatedValuesIntoResult(e){for(var t=0;t<this.calculatedValues.length;t++){var s=this.calculatedValues[t];s.includeIntoResult&&s.name&&void 0!==this.getVariable(s.name)&&(e[s.name]=this.getVariable(s.name))}}getAllValues(){return this.data}getPlainData(e){e||(e={includeEmpty:!0,includeQuestionTypes:!1,includeValues:!1});const t=[],s=[];if(this.getAllQuestions().forEach(n=>{var i=n.getPlainData(e);i&&(t.push(i),s.push(n.valueName||n.name))}),e.includeValues){const e=this.getValuesKeys();for(var n=0;n<e.length;n++){var i=e[n];if(-1==s.indexOf(i)){var r=this.getDataValueCore(this.valuesHash,i);r&&t.push({name:i,title:i,value:r,displayValue:r,isNode:!1,getString:e=>"object"==typeof e?JSON.stringify(e):e})}}}return t}getFilteredValues(){const e={};for(var t in this.variablesHash)e[t]=this.variablesHash[t];if(this.addCalculatedValuesIntoFilteredValues(e),!this.isDesignMode){const n=this.getValuesKeys();for(var s=0;s<n.length;s++)t=n[s],e[t]=this.getDataValueCore(this.valuesHash,t);this.getAllQuestions().forEach(t=>{t.hasFilteredValue&&(e[t.getFilteredName()]=t.getFilteredValue(!0))})}return e}addCalculatedValuesIntoFilteredValues(e){for(var t=this.calculatedValues,s=0;s<t.length;s++)e[t[s].name]=t[s].value}getFilteredProperties(){return{survey:this}}getValuesKeys(){if(!this.editingObj)return Object.keys(this.valuesHash);for(var e=I.getPropertiesByObj(this.editingObj),t=[],s=0;s<e.length;s++)t.push(e[s].name);return t}getDataValueCore(e,t){return this.editingObj?I.getObjPropertyValue(this.editingObj,t):this.getDataFromValueHash(e,t)}setDataValueCore(e,t,s){this.editingObj?I.setObjPropertyValue(this.editingObj,t,s):this.setDataToValueHash(e,t,s)}deleteDataValueCore(e,t){this.editingObj?this.editingObj[t]=null:this.deleteDataFromValueHash(e,t)}getDataFromValueHash(e,t){return this.valueHashGetDataCallback?this.valueHashGetDataCallback(e,t):e[t]}setDataToValueHash(e,t,s){this.valueHashSetDataCallback?this.valueHashSetDataCallback(e,t,s):e[t]=s}deleteDataFromValueHash(e,t){this.valueHashDeleteDataCallback?this.valueHashDeleteDataCallback(e,t):delete e[t]}get comments(){for(var e={},t=this.getValuesKeys(),s=0;s<t.length;s++){var n=t[s];n.indexOf(this.commentSuffix)>0&&(e[n]=this.getDataValueCore(this.valuesHash,n))}return e}get visiblePages(){if(this.isDesignMode)return this.pages;if(this.pageContainerValue&&(this.isShowingPreview||this.isSinglePage))return[this.pageContainerValue];for(var e=new Array,t=0;t<this.pages.length;t++)this.isPageInVisibleList(this.pages[t])&&e.push(this.pages[t]);return e}isPageInVisibleList(e){return this.isDesignMode||e.isVisible&&!e.isStartPage}get isEmpty(){return 0==this.pages.length}get PageCount(){return this.pageCount}get pageCount(){return this.pages.length}get visiblePageCount(){return this.visiblePages.length}get startPage(){var e=this.firstPageIsStartPage&&this.pages.length>1?this.pages[0]:null;return e&&e.onFirstRendering(),e}get startedPage(){return this.startPage}get currentPage(){return this.getPropertyValue("currentPage",null)}set currentPage(e){if(this.isLoadingFromJson)return;var t=this.getPageByObject(e);if(e&&!t)return;if(!t&&this.isCurrentPageAvailable)return;var s=this.visiblePages;if(null!=t&&s.indexOf(t)<0)return;if(t==this.currentPage)return;const n=this.currentSingleElement;if(this.isShowingPreview||!n||t===n.page){var i=this.currentPage;(this.isShowingPreview||n||this.currentPageChanging(t,i))&&(this.setPropertyValue("currentPage",t),t&&(t.onFirstRendering(),t.updateCustomWidgets()),this.locStrsChanged(),this.isShowingPreview||this.currentPageChanged(t,i))}else this.currentSingleElement=t.getFirstVisibleElement()}get currentElementName(){var e;return(null===(e=this.currentElement)||void 0===e?void 0:e.name)||""}set currentElementName(e){e&&(this.currentElement=this.getElementByName(e))}get currentElement(){return this.currentSingleElement||this.currentPage}set currentElement(e){if(e)if(e.isPage)this.currentPage=e;else{const t=e.page;t&&!this.isSingleVisibleQuestion?this.currentPage=t:this.currentSingleElement=e}}getElementByName(e){return e?this.getPageByName(e)||this.getPanelByName(e)||this.getQuestionByName(e):null}tryNavigateToPage(e){if(!this.performValidationOnPageChanging(e))return!1;const t=this.visiblePages.indexOf(e)<this.currentPageNo||!this.doServerValidation(!1,!1,e);return t&&(this.currentPage=e),t}performValidationOnPageChanging(e){if(this.isDesignMode)return!1;if(this.canGoTroughValidation())return!0;const t=this.visiblePages.indexOf(e);if(t<0||t>=this.visiblePageCount)return!1;if(t===this.currentPageNo)return!1;if(t<this.currentPageNo||"onComplete"===this.checkErrorsMode||this.validationAllowSwitchPages)return!0;if(!this.validateCurrentPage())return!1;for(let e=this.currentPageNo+1;e<t;e++){const t=this.visiblePages[e];if(!t.validate(!0,!0))return!1;t.passed=!0}return!0}updateCurrentPage(){this.isCurrentPageAvailable||(this.currentPage=this.firstVisiblePage)}get isCurrentPageAvailable(){const e=this.currentPage;return!!e&&this.isPageInVisibleList(e)&&this.isPageExistsInSurvey(e)}isPageExistsInSurvey(e){return this.pages.indexOf(e)>-1||!!this.onContainsPageCallback&&this.onContainsPageCallback(e)}get activePage(){return this.getPropertyValue("activePage")}get isStartPageActive(){return"starting"===this.state}get isShowStartingPage(){return this.isStartPageActive}get matrixDragHandleArea(){return this.getPropertyValue("matrixDragHandleArea","entireItem")}set matrixDragHandleArea(e){this.setPropertyValue("matrixDragHandleArea",e)}get isShowingPage(){return"running"==this.state||"preview"==this.state||this.isStartPageActive}updateActivePage(){const e=this.isStartPageActive?this.startPage:this.currentPage;e!==this.activePage&&this.setPropertyValue("activePage",e)}onStateAndCurrentPageChanged(){this.updateActivePage(),this.updateButtonsVisibility()}getPageByObject(e){if(!e)return null;if(e.getType&&"page"==e.getType())return e;if("string"==typeof e||e instanceof String)return this.getPageByName(String(e));if(!isNaN(e)){var t=Number(e),s=this.visiblePages;return e<0||e>=s.length?null:s[t]}return e}get currentPageNo(){return this.visiblePages.indexOf(this.currentPage)}set currentPageNo(e){var t=this.visiblePages;e<0||e>=t.length||(this.currentPage=t[e])}get questionOrder(){return this.getPropertyValue("questionOrder")}set questionOrder(e){this.setPropertyValue("questionOrder",e)}get questionsOrder(){return this.questionOrder}set questionsOrder(e){this.questionOrder=e}focusFirstQuestion(){if(!this.focusingQuestionInfo){var e=this.activePage;e&&(e.scrollToTop(),e.focusFirstQuestion())}}scrollToTopOnPageChange(e=!0){var t=this.activePage;t&&(e&&t.scrollToTop(),this.isCurrentPageRendering&&this.autoFocusFirstQuestion&&!this.focusingQuestionInfo&&(t.focusFirstQuestion(),this.isCurrentPageRendering=!1))}get state(){return this.getPropertyValue("state","empty")}updateState(){this.setPropertyValue("state",this.calcState())}calcState(){return this.isLoading?"loading":this.isCompleted?"completed":this.isCompletedBefore?"completedbefore":!this.isDesignMode&&this.isEditMode&&this.isStartedState&&this.startPage?"starting":this.isShowingPreview?this.currentPage?"preview":"empty":this.currentPage?"running":"empty"}get isCompleted(){return this.getPropertyValue("isCompleted",!1)}set isCompleted(e){this.setPropertyValue("isCompleted",e)}get isShowingPreview(){return this.getPropertyValue("isShowingPreview",!1)}set isShowingPreview(e){this.isShowingPreview!=e&&(this.setPropertyValue("isShowingPreview",e),this.onShowingPreviewChanged())}get isStartedState(){return this.getPropertyValue("isStartedState",!1)}set isStartedState(e){this.setPropertyValue("isStartedState",e)}get isCompletedBefore(){return this.getPropertyValue("isCompletedBefore",!1)}set isCompletedBefore(e){this.setPropertyValue("isCompletedBefore",e)}get isLoading(){return this.getPropertyValue("isLoading",!1)}set isLoading(e){this.setPropertyValue("isLoading",e)}beginLoading(){this.isLoading=!0}endLoading(){this.isLoading=!1}get completedState(){return this.getPropertyValue("completedState","")}get completedStateText(){return this.getPropertyValue("completedStateText","")}setCompletedState(e,t){this.setPropertyValue("completedState",e),t||("saving"==e&&(t=this.getLocalizationString("savingData")),"error"==e&&(t=this.getLocalizationString("savingDataError")),"success"==e&&(t=this.getLocalizationString("savingDataSuccess"))),this.setPropertyValue("completedStateText",t),"completed"===this.state&&this.showCompletePage&&this.completedState&&this.notify(this.completedStateText,this.completedState,"error"===e)}notify(e,t,s=!1){this.notifier.showActions=s,this.notifier.notify(e,t,s)}clear(e=!0,t=!0){this.isCompleted=!1,this.isCompletedBefore=!1,this.isLoading=!1,this.completedByTriggers=void 0,this.skippedPages=[],e&&this.setDataCore(null,!0),this.timerModel.spent=0;for(var s=0;s<this.pages.length;s++)this.pages[s].timeSpent=0,this.pages[s].setWasShown(!1),this.pages[s].passed=!1;if(this.onFirstPageIsStartedChanged(),t&&(this.currentPage=this.firstVisiblePage,this.currentSingleElement)){const e=this.getSingleElements();this.currentSingleElement=e.length>0?e[0]:void 0}e&&this.updateValuesWithDefaults()}mergeValues(e,t){gt(e,t)}updateValuesWithDefaults(){if(!this.isDesignMode&&!this.isLoading)for(var e=0;e<this.pages.length;e++)for(var t=this.pages[e].questions,s=0;s<t.length;s++)t[s].updateValueWithDefaults()}updateCustomWidgets(e){e&&e.updateCustomWidgets()}currentPageChanging(e,t,s,n){const i=this.createPageChangeEventOptions(e,t,s,n);return this.currentPageChangingFromOptions(i)}currentPageChangingFromOptions(e){e.allow=!0,e.allowChanging=!0,this.onCurrentPageChanging.fire(this,e);const t=e.allowChanging&&e.allow;return t&&e.newCurrentPage!==e.oldCurrentPage&&(this.isCurrentPageRendering=!0),t}currentPageChanged(e,t){if(this.notifyQuestionsOnHidingContent(t),!t||t.isDisposed||t.passed||t.validate(!1)&&(t.passed=!0),!0===this.isCurrentPageRendered&&(this.isCurrentPageRendered=!1),!this.currentSingleElement){const s=this.createPageChangeEventOptions(e,t);this.onCurrentPageChanged.fire(this,s)}}notifyQuestionsOnHidingContent(e){e&&!e.isDisposed&&e.questions.forEach(e=>e.onHidingContent())}createPageChangeEventOptions(e,t,s,n){const i=e&&t?e.visibleIndex-t.visibleIndex:0;let r=i;return 0===r&&n&&s&&(r=e.elements.indexOf(s)-e.elements.indexOf(n)),{oldCurrentQuestion:n,newCurrentQuestion:s,oldCurrentPage:t,newCurrentPage:e,isNextPage:1===i,isPrevPage:-1===i,isGoingForward:r>0,isGoingBackward:r<0,isAfterPreview:!0===this.changeCurrentPageFromPreview}}getProgress(){if(null==this.currentPage)return 0;if("pages"!==this.progressBarType){var e=this.getProgressInfo();return"requiredQuestions"===this.progressBarType?e.requiredQuestionCount>=1?Math.ceil(100*e.requiredAnsweredQuestionCount/e.requiredQuestionCount):100:e.questionCount>=1?Math.ceil(100*e.answeredQuestionCount/e.questionCount):100}const t=this.visiblePages;var s=t.indexOf(this.currentPage);return Math.ceil(100*s/t.length)}get isNavigationButtonsShowing(){if(this.isDesignMode)return"none";var e=this.activePage;return e?"hide"===e.navigationButtonsVisibility?"none":"show"===e.navigationButtonsVisibility?this.showNavigationButtons?this.navigationButtonsLocation:"bottom":this.showNavigationButtons?this.navigationButtonsLocation:"none":"none"}get isNavigationButtonsShowingOnTop(){return this.getIsNavigationButtonsShowingOn("top")}get isNavigationButtonsShowingOnBottom(){return this.getIsNavigationButtonsShowingOn("bottom")}getIsNavigationButtonsShowingOn(e){var t=this.isNavigationButtonsShowing;return"both"==t||"topBottom"==t||t==e}get isEditMode(){return!this.readOnly}get isDisplayMode(){return this.readOnly&&!this.isDesignMode||"preview"==this.state}get isUpdateValueTextOnTyping(){return"onTyping"==this.textUpdateMode}get isDesignMode(){return this._isDesignMode}setDesignMode(e){!!this._isDesignMode!=!!e&&(this._isDesignMode=!!e,this.onQuestionsOnPageModeChanged("standard"))}get showInvisibleElements(){return this.getPropertyValue("showInvisibleElements",!1)}set showInvisibleElements(e){var t=this.visiblePages;this.setPropertyValue("showInvisibleElements",e),this.isLoadingFromJson||(this.runConditions(),this.updateAllElementsVisibility(t))}updateAllElementsVisibility(e){for(var t=0;t<this.pages.length;t++){var s=this.pages[t];s.updateElementVisibility(),e.indexOf(s)>-1!=s.isVisible&&this.onPageVisibleChanged.fire(this,{page:s,visible:s.isVisible})}}get areInvisibleElementsShowing(){return this.isDesignMode||this.showInvisibleElements}get areEmptyElementsHidden(){return this.isShowingPreview&&this.showPreviewBeforeComplete&&"answeredQuestions"==this.previewMode&&this.isAnyQuestionAnswered}get isAnyQuestionAnswered(){const e=this.getAllQuestions(!0);for(let t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}get hasCookie(){if(!this.cookieName)return!1;var e=i.getCookie();return e&&e.indexOf(this.cookieName+"=true")>-1}setCookie(){this.cookieName&&i.setCookie(this.cookieName+"=true; expires=Fri, 31 Dec 9999 0:0:0 GMT")}deleteCookie(){this.cookieName&&i.setCookie(this.cookieName+"=;")}get ignoreValidation(){return!this.validationEnabled}set ignoreValidation(e){this.validationEnabled=!e}nextPage(){return this.currentSingleElement?this.performNext():!this.isLastPage&&this.doCurrentPageComplete(!1)}performNext(){const e=this.currentSingleElement;if(!e)return this.nextPage();if(this.resetNavigationButton(),this.isSingleVisibleInput){if(!e.validateSingleInput())return!1;if(e.nextSingleInput())return this.updateButtonsVisibility(),!0}if(!this.validationEnabled)return this.performNextAfterValidation(e),!0;const t=e.isQuestion?[e]:e.visibleQuestions;return!0===this.validateElements(t,!0,!1,t=>{t||this.performNextAfterValidation(e)})}performNextAfterValidation(e){this.sendPartialResult();const t=this.getSingleElements(),s=t.indexOf(e);if(s<0||s===t.length-1)return!1;let n={};e.isQuestion?n[e.name]=e.value:e.isPanel&&(n=e.getValue()),this.checkTriggers(n,!0,!1,!0,e.name),e===this.currentSingleElement&&(this.currentSingleElement=t[s+1])}performPrevious(){return this.prevPage()}validateOnNavigate(e,t){const s=this.canGoTroughValidation()||e&&this.validationAllowComplete||!e&&(this.validationAllowSwitchPages||this.isValidateOnComplete)||t&&this.isValidateOnComplete,n=()=>{t?this.showPreviewCore():this.doCurrentPageCompleteCore(e)};if(s)return n(),!0;const i=e=>{e||n()};return this.isValidateOnComplete?this.isLastPage?!0!==this.validate(!0,this.autoFocusFirstError,i,!0):(n(),!0):!1!==this.validateCurrentPage(i)}canGoTroughValidation(){return!this.isEditMode||!this.validationEnabled}get isCurrentPageHasErrors(){return!1===this.validateActivePage()}get isCurrentPageValid(){return this.validateActivePage()}hasCurrentPageErrors(e){return this.hasPageErrors(void 0,e)}validateCurrentPage(e){return this.validatePage(void 0,e)}hasPageErrors(e,t){const s=this.validatePage(e,t);return void 0===s?s:!s}validatePage(e,t){return e||(e=this.activePage),!e||this.validatePageCore(e,!0,t)}hasErrors(e=!0,t=!1,s){const n=this.validate(e,t,s);return void 0===n?n:!n}validate(e=!0,t=!1,s,n){return this.validateElements(this.visiblePages,e,t,s,n)}validateElements(e,t=!0,s=!1,n,i){n&&(t=!0);const r=new es({fireCallback:t,focusOnFirstError:s,callbackResult:n?e=>{n(!e)}:void 0,changeCurrentPage:!!i});for(const t of e)t.validateElement(r);return r.finish(),r.runningResult}ensureUniqueNames(e=null){if(null==e)for(var t=0;t<this.pages.length;t++)this.ensureUniqueName(this.pages[t]);else this.ensureUniqueName(e)}ensureUniqueName(e){if(e.isPage&&this.ensureUniquePageName(e),e.isPanel&&this.ensureUniquePanelName(e),e.isPage||e.isPanel)for(var t=e.elements,s=0;s<t.length;s++)this.ensureUniqueNames(t[s]);else this.ensureUniqueQuestionName(e)}ensureUniquePageName(e){return this.ensureUniqueElementName(e,e=>this.getPageByName(e))}ensureUniquePanelName(e){return this.ensureUniqueElementName(e,e=>this.getPanelByName(e))}ensureUniqueQuestionName(e){return this.ensureUniqueElementName(e,e=>this.getQuestionByName(e))}ensureUniqueElementName(e,t){var s=t(e.name);if(s&&s!=e){for(var n=this.getNewName(e.name);t(n);)n=this.getNewName(e.name);e.name=n}}getNewName(e){for(var t=e.length;t>0&&e[t-1]>="0"&&e[t-1]<="9";)t--;var s=e.substring(0,t),n=0;return t<e.length&&(n=parseInt(e.substring(t))),s+ ++n}validateActivePage(e){return this.validatePageCore(this.activePage,e)}validatePageCore(e,t,s){if(void 0===t&&(t=this.focusOnFirstError),!e)return!0;let n;s&&(n=e=>{s(!e)});const i=e.validate(!0,t,n);return this.fireValidatedErrorsOnPage(e),i}fireValidatedErrorsOnPage(e){if(this.onValidatePage.isEmpty||!e)return;const t=this.getNestedQuestionsByQuestionArray(e.questions,!0);for(var s=new Array,n=new Array,i=0;i<t.length;i++){var r=t[i];if(r.errors.length>0){s.push(r);for(var a=0;a<r.errors.length;a++)n.push(r.errors[a])}}this.onValidatePage.fire(this,{questions:s,errors:n,page:e})}prevPage(){if(this.isFirstPage||"starting"===this.state)return!1;this.resetNavigationButton();const e=this.currentSingleElement;if(this.doSkipOnPrevPage(e))return!0;if(e)return this.prevPageSingleElement(e);const t=this.visiblePages,s=t.indexOf(this.currentPage);return this.currentPage=t[s-1],!0}doSkipOnPrevPage(e){const t=e||this.currentPage,s=this.skippedPages.find(e=>e.to===t);let n;if(s){this.skippedPages.splice(this.skippedPages.indexOf(s),1);const e=s.from;!e.isDisposed&&e.isVisible&&(n=e)}return n&&(e?this.currentSingleElement=n:this.currentPage=n),!!n}prevPageSingleElement(e){if(this.isSingleVisibleInput&&e.prevSingleInput())return this.updateButtonsVisibility(),!0;const t=this.getSingleElements(),s=t.indexOf(e);return 0!==s&&(this.currentSingleElement=t[s-1],!0)}tryComplete(){return this.isValidateOnComplete&&this.cancelPreview(),this.doCurrentPageComplete(!0),this.isCompleted}completeLastPage(){return this.tryComplete()}navigationMouseDown(){return this.isNavigationButtonPressed=!0,!0}resetNavigationButton(){this.isNavigationButtonPressed=!1}nextPageUIClick(){return(!this.mouseDownPage||this.mouseDownPage===this.activePage)&&(this.mouseDownPage=null,this.performNext())}nextPageMouseDown(){return this.mouseDownPage=this.activePage,this.navigationMouseDown()}showPreview(){return this.resetNavigationButton(),!(!this.isValidateOnComplete&&this.doServerValidation(!0,!0))&&!!this.validateOnNavigate(!0,!0)&&this.isShowingPreview}showPreviewCore(){var e={allowShowPreview:!0,allow:!0};this.onShowingPreview.fire(this,e),this.isShowingPreview=e.allowShowPreview&&e.allow}cancelPreview(e=null){var t;if(!this.isShowingPreview)return;this.gotoPageFromPreview=e,this.isShowingPreview=!1;const s=null===(t=this.currentSingleElement)||void 0===t?void 0:t.page;s&&(s.updateRows(),this.currentPage=s)}cancelPreviewByPage(e){this.cancelPreview(e)}doCurrentPageComplete(e){return!this.isValidatingOnServer&&(this.resetNavigationButton(),!0===this.validateOnNavigate(e))}doCurrentPageCompleteCore(e){if(this.doServerValidation(e))return!1;if(e){this.currentPage.passed=!0;const e=this.doComplete(this.canBeCompletedByTrigger,this.completedTrigger);return e&&this.cancelPreview(),e}return this.doNextPage(),!0}get isSinglePage(){return"singlePage"==this.questionsOnPageMode}set isSinglePage(e){this.questionsOnPageMode=e?"singlePage":"standard"}get isSingleVisibleQuestion(){return!this.isDesignMode&&(this.isSingleVisibleQuestionVal(this.questionsOnPageMode)||this.isSingleVisibleInput)}get isSingleVisibleInput(){return!this.isDesignMode&&"inputPerPage"==this.questionsOnPageMode}isSingleVisibleQuestionVal(e){return"questionPerPage"===e||"questionOnPage"===e}get questionsOnPageMode(){return this.getPropertyValue("questionsOnPageMode")}set questionsOnPageMode(e){this.setPropertyValue("questionsOnPageMode",e)}get firstPageIsStartPage(){return this.getPropertyValue("firstPageIsStartPage")}set firstPageIsStartPage(e){this.setPropertyValue("firstPageIsStartPage",e)}get firstPageIsStarted(){return this.firstPageIsStartPage}set firstPageIsStarted(e){this.firstPageIsStartPage=e}isPageStarted(e){return this.firstPageIsStartPage&&this.pages.length>1&&this.pages[0]===e}get showPreviewBeforeComplete(){return this.getPropertyValue("showPreviewBeforeComplete")}set showPreviewBeforeComplete(e){this.setShowPreviewBeforeComplete(e)}setShowPreviewBeforeComplete(e){void 0===e||"noPreview"===e||!1===e?this.setPropertyValue("showPreviewBeforeComplete",!1):(this.setPropertyValue("showPreviewBeforeComplete",!0),"showAllQuestions"===e&&(this.previewMode="allQuestions"),"showAnsweredQuestions"===e&&(this.previewMode="answeredQuestions"))}get previewMode(){return this.getPropertyValue("previewMode")}set previewMode(e){this.setPropertyValue("previewMode",e)}onFirstPageIsStartedChanged(){this.isStartedState=this.firstPageIsStartPage&&this.pages.length>1,this.pageVisibilityChanged(this.pages[0],!this.isStartedState)}onShowingPreviewChanged(){this.updatePagesContainer()}createRootPage(e,t){const s=I.createClass("page");return s.name=e,s.isPageContainer=!0,t.forEach(e=>{e.isStartPage||s.addElement(e)}),s}disposeContainerPage(){let e=this.pageContainerValue;[].concat(e.elements).forEach(t=>e.removeElement(t)),e.dispose(),this.pageContainerValue=void 0}updatePagesContainer(){if(this.isDesignMode)return;this.getAllQuestions().forEach(e=>e.updateElementVisibility()),this.setPropertyValue("currentPage",void 0);const e="preview-page";let t;if(this.isSinglePage){const s=this.pageContainerValue;s&&s.name===e?(t=s.elements[0],this.disposeContainerPage()):t=this.createRootPage("single-page",this.pages)}if(this.isShowingPreview&&(t=this.createRootPage(e,t?[t]:this.pages)),t&&(t.setSurveyImpl(this),this.pageContainerValue=t,this.currentPage=t,this.currentSingleElementValue&&this.visiblePages.forEach(e=>e.updateRows())),!this.isSinglePage&&!this.isShowingPreview){this.disposeContainerPage();let e=this.gotoPageFromPreview;this.gotoPageFromPreview=null,a.isValueEmpty(e)&&this.visiblePageCount>0&&(e=this.visiblePages[this.visiblePageCount-1]),e&&(this.changeCurrentPageFromPreview=!0,this.currentPage=e,this.changeCurrentPageFromPreview=!1)}!this.currentPage&&this.visiblePageCount>0&&(this.currentPage=this.visiblePages[0]),this.isShowingPreview&&this.pages.forEach(e=>{e.onFirstRendering()}),this.pages.forEach(e=>{e.wasRendered&&e.updateElementCss(!0)}),this.updateButtonsVisibility()}getSingleElements(e){const t=new Array,s=this.pages,n=this.isSingleVisibleInput;for(var i=0;i<s.length;i++){const r=s[i];if(!r.isStartPage&&r.isVisible){const s=[];n?r.addQuestionsToList(s,!0):r.elements.forEach(e=>s.push(e)),s.forEach(s=>{(s===e||s.isVisible)&&t.push(s)})}}return t}get currentSingleElement(){return this.isShowingPreview?void 0:this.currentSingleElementValue}set currentSingleElement(e){if(e&&e.isQuestion&&this.isSingleVisibleQuestionVal(this.questionsOnPageMode))for(;e.parent&&e.parent.isPanel;)e=e.parent;const t=this.currentSingleElement;if(e!==t&&!this.isCompleted){const s=(null==e?void 0:e.isQuestion)?e:void 0,n=(null==t?void 0:t.isQuestion)?t:void 0,i=null==e?void 0:e.page,r=i&&t?this.createPageChangeEventOptions(i,t.page,s,n):void 0;if(r&&!this.currentPageChangingFromOptions(r))return;this.currentSingleElementValue=e,e?(this.isSingleVisibleInput&&e.isQuestion&&e.onSetAsSingleInput(),i.updateRows(),i!==this.currentPage?this.currentPage=i:s&&this.autoFocusFirstQuestion&&s.focus(),this.updateButtonsVisibility(),r&&this.onCurrentPageChanged.fire(this,r)):this.visiblePages.forEach(e=>e.updateRows())}}get currentSingleQuestion(){const e=this.currentSingleElement;return e&&e.isQuestion?e:void 0}set currentSingleQuestion(e){this.currentSingleElement=e}supportsNestedSingleInput(e){const t={question:e,enabled:!0};return this.onCheckSingleInputPerPageMode.fire(this,t),t.enabled}changeCurrentSingleElementOnVisibilityChanged(){const e=this.currentSingleElement;if(!e||e.isVisible)return;const t=this.getSingleElements(e),s=t.indexOf(e),n=s>0?t[s-1]:s<t.length-1?t[s+1]:void 0;this.currentSingleElement=n}onQuestionsOnPageModeChanged(e){if(!this.isShowingPreview&&!this.isDesignMode&&(this.skippedPages=[],this.currentSingleElement=void 0,"singlePage"===e&&this.updatePagesContainer(),"inputPerPage"===e&&this.getAllQuestions().forEach(e=>e.resetSingleInput()),this.isSinglePage&&this.updatePagesContainer(),this.setupSingleInputNavigationActions(),this.isSingleVisibleQuestion)){const e=this.getSingleElements();e.length>0&&(this.currentSingleElement=e[0])}}setupSingleInputNavigationActions(){const e="sv-singleinput-add";if(this.isSingleVisibleInput){const t=()=>{this.currentSingleQuestion.singleInputAddItem(!0),this.resetNavigationButton()};this.addNavigationItem({id:e,visible:!1,action:()=>t()})}else this.removeNavigationItem(e)}getPageStartIndex(){return this.firstPageIsStartPage&&this.pages.length>0?1:0}get isFirstPage(){return this.getPropertyValue("isFirstPage")}get isLastPage(){return this.getPropertyValue("isLastPage")}updateNavigationElements(){this.updateButtonsVisibility()}updateButtonsVisibility(){this.updateIsFirstLastPageState(),this.setPropertyValue("isShowPrevButton",this.calcIsShowPrevButton()),this.setPropertyValue("isShowNextButton",this.calcIsShowNextButton()),this.setPropertyValue("isCompleteButtonVisible",this.calcIsCompleteButtonVisible()),this.setPropertyValue("isPreviewButtonVisible",this.calcIsPreviewButtonVisible()),this.setPropertyValue("isCancelPreviewButtonVisible",this.calcIsCancelPreviewButtonVisible()),this.updateSingleInputActions()}updateSingleInputActions(){if(!this.isSingleVisibleInput)return;const e=this.currentSingleQuestion;if(!e)return;const t=this.navigationBar.getActionById("sv-singleinput-add");t&&(t.title=e.getSingleInputAddText(),t.visible=!!t.title)}get isShowPrevButton(){return this.getPropertyValue("isShowPrevButton")}get isShowNextButton(){return this.getPropertyValue("isShowNextButton")}get isCompleteButtonVisible(){return this.getPropertyValue("isCompleteButtonVisible")}get isPreviewButtonVisible(){return this.getPropertyValue("isPreviewButtonVisible")}get isCancelPreviewButtonVisible(){return this.getPropertyValue("isCancelPreviewButtonVisible")}get isFirstElement(){return this.getPropertyValue("isFirstElement")}get isLastElement(){return this.getPropertyValue("isLastElement")}updateIsFirstLastPageState(){const e=this.currentPage;let t,s;const n=this.currentSingleElement;if(n){let e=!0,i=!0;if(this.isSingleVisibleInput){const t=n.getSingleInputElementPos();0!==t&&(e=-1===t,i=1===t)}const r=this.getSingleElements(),a=r.indexOf(n);a>=0&&(t=e&&0===a,s=i&&a===r.length-1)}this.setPropertyValue("isFirstPage",!(!e||e!==this.firstVisiblePage||n&&!0!==t)),this.setPropertyValue("isLastPage",!(!e||e!==this.lastVisiblePage||n&&!0!==s)),this.setPropertyValue("isFirstElement",t),this.setPropertyValue("isLastElement",s)}get isLastPageOrElement(){return void 0!==this.isLastElement?this.isLastElement:this.isLastPage}get isFirstPageOrElement(){return void 0!==this.isFirstElement?this.isFirstElement:this.isFirstPage}calcIsShowPrevButton(){if(this.isFirstPageOrElement||!this.showPrevButton||"running"!==this.state)return!1;if(void 0!==this.isFirstElement)return!0;const e=this.visiblePages[this.currentPageNo-1];return e&&e.getMaxTimeToFinish()<=0}calcIsShowNextButton(){return"running"===this.state&&!this.isLastPageOrElement&&!this.canBeCompletedByTrigger}calcIsCompleteButtonVisible(){const e=this.state;return this.isEditMode&&("running"===this.state&&(this.isLastPageOrElement&&!this.showPreviewBeforeComplete||this.canBeCompletedByTrigger)||"preview"===e)&&this.showCompleteButton}calcIsPreviewButtonVisible(){return this.isEditMode&&this.showPreviewBeforeComplete&&"running"==this.state&&this.isLastPageOrElement}calcIsCancelPreviewButtonVisible(){return this.isEditMode&&this.showPreviewBeforeComplete&&"preview"==this.state}get firstVisiblePage(){if(1===this.visiblePageCount)return this.visiblePages[0];const e=this.pages;for(let t=0;t<e.length;t++)if(this.isPageInVisibleList(e[t]))return e[t];return null}get lastVisiblePage(){if(1===this.visiblePageCount)return this.visiblePages[0];const e=this.pages;for(let t=e.length-1;t>=0;t--)if(this.isPageInVisibleList(e[t]))return e[t];return null}doComplete(e=!1,t){if(!this.isCompleted)return this.checkOnCompletingEvent(e,t)?(this.checkOnPageTriggers(!0),this.stopTimer(),this.notifyQuestionsOnHidingContent(this.currentPage),this.isCompleted=!0,this.clearUnusedValues(),this.saveDataOnComplete(e,t),this.setCookie(),!0):(this.isCompleted=!1,!1)}saveDataOnComplete(e=!1,t){let s=this.hasCookie;const n=e=>{o=!0,this.setCompletedState("saving",e)},i=e=>{this.setCompletedState("error",e)},r=e=>{this.setCompletedState("success",e),this.navigateTo()},a=e=>{this.setCompletedState("","")};var o=!1,l={isCompleteOnTrigger:e,completeTrigger:t,showSaveInProgress:n,showSaveError:i,showSaveSuccess:r,clearSaveMessages:a,showDataSaving:n,showDataSavingError:i,showDataSavingSuccess:r,showDataSavingClear:a};this.onComplete.fire(this,l),!s&&this.surveyPostId&&this.sendResult(),o||this.navigateTo()}checkOnCompletingEvent(e,t){var s={allowComplete:!0,allow:!0,isCompleteOnTrigger:e,completeTrigger:t};return this.onCompleting.fire(this,s),s.allowComplete&&s.allow}start(){return!!this.firstPageIsStartPage&&(this.isCurrentPageRendering=!0,!!this.validatePageCore(this.startPage,!0)&&(this.isStartedState=!1,this.notifyQuestionsOnHidingContent(this.pages[0]),this.startTimerFromUI(),this.onStarted.fire(this,{}),this.updateVisibleIndexes(),this.currentPageNo=0,this.currentPage&&this.currentPage.locStrsChanged(),!0))}get isValidatingOnServer(){return this.getPropertyValue("isValidatingOnServer",!1)}setIsValidatingOnServer(e){e!=this.isValidatingOnServer&&(this.setPropertyValue("isValidatingOnServer",e),this.onIsValidatingOnServerChanged())}createServerValidationOptions(e,t,s){var n=this;const i={data:{},errors:{},survey:this,complete:function(){n.completeServerValidation(i,t,s)}};if(e&&this.isValidateOnComplete)i.data=this.data;else for(var r=this.activePage.questions,a=0;a<r.length;a++){var o=r[a];if(o.visible){var l=this.getValue(o.getValueName());this.isValueEmpty(l)||(i.data[o.getValueName()]=l)}}return i}onIsValidatingOnServerChanged(){}doServerValidation(e,t=!1,s){if(!this.onServerValidateQuestions||this.onServerValidateQuestions.isEmpty)return!1;if(!e&&this.isValidateOnComplete)return!1;this.setIsValidatingOnServer(!0);const n="function"==typeof this.onServerValidateQuestions;return this.serverValidationEventCount=n?1:this.onServerValidateQuestions.length,n?this.onServerValidateQuestions(this,this.createServerValidationOptions(e,t,s)):this.onServerValidateQuestions.fireByCreatingOptions(this,()=>this.createServerValidationOptions(e,t,s)),!0}completeServerValidation(e,t,s){if(this.serverValidationEventCount>1&&(this.serverValidationEventCount--,e&&e.errors&&0===Object.keys(e.errors).length))return;if(this.serverValidationEventCount=0,this.setIsValidatingOnServer(!1),!e&&!e.survey)return;var n=e.survey;let i=!0;if(e.errors){var r=this.autoFocusFirstError;for(var a in e.errors){var o=n.getQuestionByName(a);o&&o.errors&&(i=!1,o.addError(new Ot(e.errors[a],this)),r&&(r=!1,o.page&&(this.currentPage=o.page),o.focus(!0)))}this.fireValidatedErrorsOnPage(this.currentPage)}i&&(t?this.showPreviewCore():s?this.currentPage=s:n.isLastPage?n.doComplete():n.doNextPage())}doNextPage(){var e=this.currentPage;if(this.checkOnPageTriggers(!1),this.sendPartialResult(),this.isCompleted)this.doComplete(!0);else if(e===this.currentPage){var t=this.visiblePages,s=t.indexOf(this.currentPage);this.currentPage=t[s+1]}}setCompleted(e){this.doComplete(!0,e)}sendPartialResult(){this.partialSendEnabled&&!this.isCompleted&&this.sendResult(this.surveyPostId,this.clientId,!0)}canBeCompleted(e,t){var s;if(!xt.triggers.changeNavigationButtonsOnComplete)return;const n=this.canBeCompletedByTrigger;this.completedByTriggers||(this.completedByTriggers={}),t?this.completedByTriggers[e.id]={trigger:e,pageId:null===(s=this.currentPage)||void 0===s?void 0:s.id}:delete this.completedByTriggers[e.id],n!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility()}get canBeCompletedByTrigger(){var e;if(!this.completedByTriggers)return!1;const t=Object.keys(this.completedByTriggers);if(0===t.length)return!1;const s=null===(e=this.currentPage)||void 0===e?void 0:e.id;if(!s)return!0;for(let e=0;e<t.length;e++)if(s===this.completedByTriggers[t[e]].pageId)return!0;return!1}get completedTrigger(){if(!this.canBeCompletedByTrigger)return;const e=Object.keys(this.completedByTriggers)[0];return this.completedByTriggers[e].trigger}get processedCompletedHtml(){var e=this.renderedCompletedHtml;return e?this.processHtml(e,"completed"):""}get processedCompletedBeforeHtml(){return this.locCompletedBeforeHtml.textOrHtml}get processedLoadingHtml(){return this.locLoadingHtml.textOrHtml}getProgressInfo(){var e=this.isDesignMode?this.pages:this.visiblePages;return We.getProgressInfoByElements(e,!1)}get progressBarAriaLabel(){return l("progressbar",this.getLocale())}get progressText(){return this.progressBar.progressText}get progressValue(){return this.getPropertyValue("progressValue",void 0,()=>this.getProgress())}updateProgressText(e=!1){this.isShowingPreview||e&&"pages"==this.progressBarType&&this.onGetProgressText.isEmpty||(this.progressBarValue&&this.progressBarValue.resetProgressText(),this.resetPropertyValue("progressValue"))}getProgressText(){if(!this.isDesignMode&&null==this.currentPage)return"";const e={questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0,text:""};var t=this.progressBarType.toLowerCase();if("questions"===t||"requiredquestions"===t||"correctquestions"===t||!this.onGetProgressText.isEmpty){var s=this.getProgressInfo();e.questionCount=s.questionCount,e.answeredQuestionCount=s.answeredQuestionCount,e.requiredQuestionCount=s.requiredQuestionCount,e.requiredAnsweredQuestionCount=s.requiredAnsweredQuestionCount}return e.text=this.getProgressTextCore(e),this.onGetProgressText.fire(this,e),e.text}getProgressTextCore(e){var t=this.progressBarType.toLowerCase();if("questions"===t)return this.getLocalizationFormatString("questionsProgressText",e.answeredQuestionCount,e.questionCount);if("requiredquestions"===t)return this.getLocalizationFormatString("questionsProgressText",e.requiredAnsweredQuestionCount,e.requiredQuestionCount);if("correctquestions"===t){var s=this.getCorrectedAnswerCount();return this.getLocalizationFormatString("questionsProgressText",s,e.questionCount)}var n=this.isDesignMode?this.pages:this.visiblePages,i=n.indexOf(this.currentPage)+1;return this.getLocalizationFormatString("progressText",i,n.length)}getRootCss(){return(new fe).append(this.css.root).append(this.css.rootProgress+"--"+this.progressBarType).append(this.css.rootMobile,this.isMobile).append(this.css.rootAnimationDisabled,!xt.animationEnabled).append(this.css.rootReadOnly,this.readOnly&&!this.isDesignMode).append(this.css.rootCompact,this.isCompact).append(this.css.rootFitToContainer,this.fitToContainer).toString()}afterRenderSurvey(e){if(!n.isAvailable())return;this.destroyResizeObserver(),Array.isArray(e)&&(e=We.GetFirstNonTextElement(e));let t=e;const s=this.css.variables;if(s){const e=Number.parseFloat(i.getComputedStyle(t).getPropertyValue(s.mobileWidth));if(e){let s=!1;this.resizeObserver=new ResizeObserver(i=>{n.requestAnimationFrame(()=>{s=!(s||!pt(t))&&this.processResponsiveness(t.offsetWidth,e,t.offsetHeight)})}),this.resizeObserver.observe(t)}}this.onAfterRenderSurvey.fire(this,{survey:this,htmlElement:e}),this.rootElement=e,this.scrollerElement=e.getElementsByClassName("sv-scroll__scroller")[0],this.addScrollEventListener()}beforeDestroySurveyElement(){this.destroyResizeObserver(),this.removeScrollEventListener(),this.rootElement=void 0,this.scrollerElement=void 0}processResponsiveness(e,t,s){const n=e<t,i=this.isMobile!==n;this.setIsMobile(n),this.layoutElements.forEach(t=>t.processResponsiveness&&t.processResponsiveness(e));const r={height:s,width:e};return this.onResize.fire(this,r),i}triggerResponsiveness(e){this.getAllQuestions().forEach(t=>{t.triggerResponsiveness(e)})}destroyResizeObserver(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)}updateQuestionCssClasses(e,t){this.onUpdateQuestionCssClasses.fire(this,{question:e,cssClasses:t})}updatePanelCssClasses(e,t){this.onUpdatePanelCssClasses.fire(this,{panel:e,cssClasses:t})}updatePageCssClasses(e,t){this.onUpdatePageCssClasses.fire(this,{page:e,cssClasses:t})}updateChoiceItemCss(e,t){t.question=e,this.onUpdateChoiceItemCss.fire(this,t)}afterRenderPage(e){if(!this.isDesignMode&&!this.focusingQuestionInfo){const e=!1===this.isCurrentPageRendered;setTimeout(()=>this.scrollToTopOnPageChange(e),1)}this.focusQuestionInfo(),this.isCurrentPageRendered=!0,this.onAfterRenderPage.isEmpty||this.onAfterRenderPage.fire(this,{page:this.activePage,htmlElement:e})}afterRenderHeader(e){this.onAfterRenderHeader.isEmpty||this.onAfterRenderHeader.fire(this,{htmlElement:e})}afterRenderQuestion(e,t){this.onAfterRenderQuestion.fire(this,{question:e,htmlElement:t})}afterRenderQuestionInput(e,t){if(this.onAfterRenderQuestionInput.isEmpty)return;let s=e.inputId;const{root:n}=xt.environment;if(s&&(!t||t.id!==s)&&void 0!==n){let e=n.getElementById(s);e&&(t=e)}this.onAfterRenderQuestionInput.fire(this,{question:e,htmlElement:t})}afterRenderPanel(e,t){this.onAfterRenderPanel.fire(this,{panel:e,htmlElement:t})}whenQuestionFocusIn(e){this.onFocusInQuestion.fire(this,{question:e})}whenPanelFocusIn(e){this.onFocusInPanel.fire(this,{panel:e})}rebuildQuestionChoices(){this.getAllQuestions().forEach(e=>e.surveyChoiceItemVisibilityChange())}canChangeChoiceItemsVisibility(){return!this.onShowingChoiceItem.isEmpty}getChoiceItemVisibility(e,t,s){const n={question:e,item:t,visible:s};return this.onShowingChoiceItem.fire(this,n),n.visible}loadQuestionChoices(e){this.onChoicesLazyLoad.fire(this,e)}getChoiceDisplayValue(e){this.onGetChoiceDisplayValue.isEmpty?e.setItems(null):this.onGetChoiceDisplayValue.fire(this,e)}matrixBeforeRowAdded(e){this.onMatrixRowAdding.fire(this,e)}matrixRowAdded(e,t){this.onMatrixRowAdded.fire(this,{question:e,row:t})}matrixColumnAdded(e,t){this.onMatrixColumnAdded.fire(this,{question:e,column:t})}multipleTextItemAdded(e,t){this.onMultipleTextItemAdded.fire(this,{question:e,item:t})}getQuestionByValueNameFromArray(e,t,s){var n=this.getQuestionsByValueName(e);if(n){for(var i=0;i<n.length;i++){var r=n[i].getQuestionFromArray(t,s);if(r)return r}return null}}matrixRowRemoved(e,t,s){this.onMatrixRowRemoved.fire(this,{question:e,rowIndex:t,row:s})}matrixRowRemoving(e,t,s){var n={question:e,rowIndex:t,row:s,allow:!0};return this.onMatrixRowRemoving.fire(this,n),n.allow}matrixAllowRemoveRow(e,t,s){const n={question:e,rowIndex:t,row:s,allow:!0};return this.onMatrixRenderRemoveButton.fire(this,n),n.allow}matrixDetailPanelVisibleChanged(e,t,s,n){const i={question:e,rowIndex:t,row:s,visible:n,detailPanel:s.detailPanel};this.onMatrixDetailPanelVisibleChanged.fire(this,i)}matrixCellCreating(e,t){t.question=e,this.onMatrixCellCreating.fire(this,t)}matrixCellCreated(e,t){t.question=e,this.onMatrixCellCreated.fire(this,t)}matrixAfterCellRender(e){var t;const s=this.onAfterRenderMatrixCell;s.isEmpty||(e.question=null===(t=e.cellQuestion)||void 0===t?void 0:t.parentQuestion,s.fire(this,e))}matrixCellValueChanged(e,t){t.question=e,this.onMatrixCellValueChanged.fire(this,t)}matrixCellValueChanging(e,t){t.question=e,this.onMatrixCellValueChanging.fire(this,t)}get isValidateOnValueChanging(){return"onValueChanging"===this.checkErrorsMode}get isValidateOnValueChanged(){return"onValueChanged"===this.checkErrorsMode}get isValidateOnValueChange(){return this.isValidateOnValueChanged||this.isValidateOnValueChanging}get isValidateOnComplete(){return"onComplete"===this.checkErrorsMode||this.validationAllowSwitchPages&&!this.validationAllowComplete}matrixCellValidate(e,t){return t.question=e,this.onMatrixCellValidate.fire(this,t),t.error?new Ot(t.error,this):null}dynamicPanelAdded(e,t,s,n){!this.isLoadingFromJson&&n&&this.updateVisibleIndexes(e.page),this.onDynamicPanelAdded.fire(this,{question:e,panel:s,panelIndex:t})}dynamicPanelRemoved(e,t,s,n){for(var i=s?s.questions:[],r=0;r<i.length;r++)i[r].clearOnDeletingContainer();n&&this.updateVisibleIndexes(e.page),this.onDynamicPanelRemoved.fire(this,{question:e,panelIndex:t,panel:s})}dynamicPanelRemoving(e,t,s){const n={question:e,panelIndex:t,panel:s,allow:!0};return this.onDynamicPanelRemoving.fire(this,n),n.allow}dynamicPanelGetTabTitle(e,t){t.question=e,this.onGetDynamicPanelTabTitle.fire(this,t)}dynamicPanelCurrentIndexChanged(e,t){t.question=e,this.onDynamicPanelCurrentIndexChanged.fire(this,t)}dragAndDropAllow(e){return this.onDragDropAllow.fire(this,e),e.allow}elementContentVisibilityChanged(e){this.currentPage&&this.currentPage.ensureRowsVisibility(),this.onElementContentVisibilityChanged.fire(this,{element:e})}getUpdatedPanelFooterActions(e,t,s){const n={question:s,panel:e,actions:t};return this.onGetPanelFooterActions.fire(this,n),n.actions}getUpdatedElementTitleActions(e,t){return e.isPage?this.getUpdatedPageTitleActions(e,t):e.isPanel?this.getUpdatedPanelTitleActions(e,t):this.getUpdatedQuestionTitleActions(e,t)}getTitleActionsResult(e,t){return e!=t.actions?t.actions:e!=t.titleActions?t.titleActions:e}getUpdatedQuestionTitleActions(e,t){const s={question:e,actions:t,titleActions:t};return this.onGetQuestionTitleActions.fire(this,s),this.getTitleActionsResult(t,s)}getUpdatedPanelTitleActions(e,t){const s={panel:e,actions:t,titleActions:t};return this.onGetPanelTitleActions.fire(this,s),this.getTitleActionsResult(t,s)}getUpdatedPageTitleActions(e,t){var s={page:e,actions:t,titleActions:t};return this.onGetPageTitleActions.fire(this,s),this.getTitleActionsResult(t,s)}getUpdatedMatrixRowActions(e,t,s){const n={question:e,actions:s,row:t};return this.onGetMatrixRowActions.fire(this,n),n.actions}scrollElementToTop(e,t,s,n,i,r,a,o){const l={element:e,question:t,page:s,elementId:n,cancel:!1,allow:!0};if(this.onScrollToTop.fire(this,l),!l.cancel&&l.allow){const t=this.getPageByElement(e),{rootElement:s}=xt.environment,n=this.rootElement||a||s;if(this.isLazyRendering&&t){let s=1;this.skeletonHeight&&n&&"function"==typeof n.getBoundingClientRect&&(s=n.getBoundingClientRect().height/this.skeletonHeight-1),t.forceRenderElement(e,()=>{const e=null==n?void 0:n.querySelector(`#${l.elementId}`);this.suspendLazyRendering(),We.ScrollElementToTop(e,i,r,()=>{this.releaseLazyRendering(),et(n.querySelector(`#${t.id}`)),o&&o()})},s)}else if(e.isPage&&!this.isSinglePage&&!this.isDesignMode&&this.rootElement){const e=n.querySelector(ht(this.css.rootWrapper));We.ScrollElementToViewCore(e,!1,i,r,o)}else{const e=null==n?void 0:n.querySelector(`#${l.elementId}`);this.suspendLazyRendering(),We.ScrollElementToTop(e,i,r,()=>{this.releaseLazyRendering(),et(e),o&&o()})}}}chooseFiles(e,t,s){this.onOpenFileChooser.isEmpty?function(e,t){n.isFileReaderAvailable()&&(e.value="",e.onchange=s=>{if(!n.isFileReaderAvailable())return;if(!e||!e.files||e.files.length<1)return;let i=[];for(let t=0;t<e.files.length;t++)i.push(e.files[t]);t(i)},e.click())}(e,t):this.onOpenFileChooser.fire(this,{input:e,element:s&&s.element||this.survey,elementType:s&&s.elementType,item:s&&s.item,propertyName:s&&s.propertyName,callback:t,context:s})}uploadFiles(e,t,s,n){this.onUploadFiles.isEmpty?n("error",this.getLocString("noUploadFilesHandler")):this.taskManager.runTask("file",i=>{this.onUploadFiles.fire(this,{question:e,name:t,files:s||[],callback:(e,t)=>{n(e,t),i()}})}),this.surveyPostId&&this.uploadFilesCore(t,s,n)}downloadFile(e,t,s,n){this.onDownloadFile.isEmpty&&n&&n("skipped",s.content||s),this.onDownloadFile.fire(this,{question:e,name:t,content:s.content||s,fileValue:s,callback:n})}clearFiles(e,t,s,n,i){this.onClearFiles.isEmpty&&i&&i("success",s),this.onClearFiles.fire(this,{question:e,name:t,value:s,fileName:n,callback:i})}updateChoicesFromServer(e,t,s){var n={question:e,choices:t,serverResult:s};return this.onChoicesLoaded.fire(this,n),n.choices}loadedChoicesFromServer(e){this.locStrsChanged()}uploadFilesCore(e,t,s){this.reportWarningOnUsingService()}getPage(e){return this.pages[e]}addPage(e,t=-1){null!=e&&(t<0||t>=this.pages.length?this.pages.push(e):this.pages.splice(t,0,e))}addNewPage(e=null,t=-1){var s=this.createNewPage(e);return this.addPage(s,t),s}removePage(e){var t=this.pages.indexOf(e);t<0||(this.pages.splice(t,1),this.currentPage==e&&(this.currentPage=this.pages.length>0?this.pages[0]:null))}getQuestionByName(e,t=!1){const s=this.getQuestionsFromHash(this.questionHashes.names,this.questionHashes.namesInsensitive,e,t);return s?s[0]:null}findQuestionByName(e){return this.getQuestionByName(e)}getEditingSurveyElement(){return this.editingObjValue}getQuestionByValueName(e,t=!1){var s=this.getQuestionsByValueName(e,t);return s?s[0]:null}getQuestionsByValueName(e,t=!1){return this.getQuestionsFromHash(this.questionHashes.valueNames,this.questionHashes.valueNamesInsensitive,e,t)}getCalculatedValueByName(e){for(var t=0;t<this.calculatedValues.length;t++)if(e==this.calculatedValues[t].name)return this.calculatedValues[t];return null}getQuestionsFromHash(e,t,s,n){if(!s)return null;let i=e[s];return i||(n&&(i=t[s=s.toLowerCase()],i)?i:null)}getQuestionsByNames(e,t=!1){var s=[];if(!e)return s;for(var n=0;n<e.length;n++)if(e[n]){var i=this.getQuestionByName(e[n],t);i&&s.push(i)}return s}getPageByElement(e){for(var t=0;t<this.pages.length;t++){var s=this.pages[t];if(s.containsElement(e))return s}return null}getPageByQuestion(e){return this.getPageByElement(e)}getPageByName(e){for(var t=0;t<this.pages.length;t++)if(this.pages[t].name==e)return this.pages[t];return null}getPagesByNames(e){var t=[];if(!e)return t;for(var s=0;s<e.length;s++)if(e[s]){var n=this.getPageByName(e[s]);n&&t.push(n)}return t}getAllQuestions(e=!1,t=!1,s=!1){s&&(t=!1,(e?this.visiblePages:this.pages).forEach(e=>e.onFirstRendering()));for(var n=[],i=0;i<this.pages.length;i++)this.pages[i].addQuestionsToList(n,e,t);return s?this.getNestedQuestionsByQuestionArray(n,e):n}getNestedQuestionsByQuestionArray(e,t){const s=[];return e.forEach(e=>{e.getNestedQuestions(t,!0,!0).forEach(e=>s.push(e))}),s}getQuizQuestions(){for(var e=new Array,t=this.getPageStartIndex();t<this.pages.length;t++)if(this.pages[t].isVisible)for(var s=this.pages[t].questions,n=0;n<s.length;n++){var i=s[n];i.quizQuestionCount>0&&e.push(i)}return e}getPanelByName(e,t=!1){var s=this.getAllPanels();t&&(e=e.toLowerCase());for(var n=0;n<s.length;n++){var i=s[n].name;if(t&&(i=i.toLowerCase()),i==e)return s[n]}return null}getAllPanels(e=!1,t=!1){for(var s=new Array,n=0;n<this.pages.length;n++)this.pages[n].addPanelsIntoList(s,e,t);return s}createNewPage(e){const t=I.createClass("page");return t.name=e,t}getValueChangeReason(){return this.isSettingValueOnExpression?"expression":this.isSettingValueFromTrigger?"trigger":void 0}questionOnValueChanging(e,t,s){if(this.editingObj){const s=I.findProperty(this.editingObj.getType(),e);s&&(t=s.settingValue(this.editingObj,t))}if(this.onValueChanging.isEmpty)return t;var n={name:e,question:this.getQuestionByValueName(s||e),value:this.getUnbindValue(t),oldValue:this.getValue(e),reason:this.getValueChangeReason()};return this.onValueChanging.fire(this,n),n.value}getLocNotification(e,t,s){return e||a.isTwoValueEquals(t,s,!1,!0,!1)}updateQuestionValue(e,t){if(!this.isLoadingFromJson){var s=this.getQuestionsByValueName(e);if(s)for(var n=0;n<s.length;n++){var i=s[n].value;(i===t&&Array.isArray(i)&&this.editingObj||!this.isTwoValueEquals(i,t))&&s[n].updateValueFromSurvey(t,!1)}}}validateQuestionOnValueChanged(e){!this.isNavigationButtonPressed&&(this.isValidateOnValueChanged||e.getAllErrors().length>0)&&this.validateQuestionOnValueChangedCore(e)}validateQuestionOnValueChangedCore(e){var t=e.getAllErrors().length;let s=e.validate(!0,!1,!this.isValidateOnValueChanging);return e.page&&this.isValidateOnValueChange&&(t>0||e.getAllErrors().length>0)&&this.fireValidatedErrorsOnPage(e.page),s}validateOnValueChanging(e,t){if(this.isLoadingFromJson)return!1;const s=this.getQuestionsByValueName(e);if(!s)return!1;let n=!0;for(let e=0;e<s.length;e++){const i=s[e];this.isTwoValueEquals(i.valueForSurvey,t)||(i.value=t),n=this.validateQuestionOnValueChangedCore(i)&&n&&0==i.errors.length}return n}fireOnValueChanged(e,t,s){this.onValueChanged.fire(this,{name:e,question:s,value:t,reason:this.getValueChangeReason()})}notifyQuestionOnValueChanged(e,t,s){if(!this.isLoadingFromJson){var n=this.getQuestionsByValueName(e);if(n)for(var i=0;i<n.length;i++){var r=n[i];this.validateQuestionOnValueChanged(r),r.onSurveyValueChanged(t)}this.updateProgressText(!0),this.fireOnValueChanged(e,t,s?this.getQuestionByName(s):void 0),this.isDisposed||(this.checkElementsBindings(e,t),this.notifyElementsOnAnyValueOrVariableChanged(e,s))}}checkElementsBindings(e,t){this.isRunningElementsBindings=!0;for(var s=0;s<this.pages.length;s++)this.pages[s].checkBindings(e,t);this.isRunningElementsBindings=!1,this.updateVisibleIndexAfterBindings&&(this.updateVisibleIndexes(),this.updateVisibleIndexAfterBindings=!1)}notifyElementsOnAnyValueOrVariableChanged(e,t){if("processing"!==this.isEndLoadingFromJson)if(this.isRunningConditions)this.conditionNotifyElementsOnAnyValueOrVariableChanged=!0;else{for(var s=0;s<this.pages.length;s++)this.pages[s].onAnyValueChanged(e,t);this.isEndLoadingFromJson||this.locStrsChanged()}}updateAllQuestionsValue(e){for(var t=this.getAllQuestions(),s=0;s<t.length;s++){var n=t[s],i=n.getValueName();n.updateValueFromSurvey(this.getValue(i),e),n.requireUpdateCommentValue&&n.updateCommentFromSurvey(this.getComment(i))}}notifyAllQuestionsOnValueChanged(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].onSurveyValueChanged(this.getValue(e[t].getValueName()))}checkOnPageTriggers(e){for(var t=this.getCurrentPageQuestions(!0),s={},n=0;n<t.length;n++){var i=t[n].getValueName();s[i]=this.getValue(i)}this.addCalculatedValuesIntoFilteredValues(s),this.checkTriggers(s,!0,e)}getCurrentPageQuestions(e=!1){var t=[],s=this.currentPage;if(!s)return t;for(var n=0;n<s.questions.length;n++){var i=s.questions[n];(e||i.visible)&&i.name&&t.push(i)}return t}checkTriggers(e,t,s=!1,n=!1,i){if(this.isCompleted||0==this.triggers.length||this.isDisplayMode)return;if(this.isTriggerIsRunning){for(var r in e)this.triggerKeys[r]=e[r];return}let a=!1;if(!s&&i&&this.hasRequiredValidQuestionTrigger){const e=this.getQuestionByValueName(i);a=e&&!e.validate(!1)}this.isTriggerIsRunning=!0,this.triggerKeys=e;var o=this.getFilteredProperties();let l=this.canBeCompletedByTrigger;for(let e=0;e<this.triggers.length;e++){const i=this.triggers[e];if(a&&i.requireValidQuestion)continue;const r={isOnNextPage:t,isOnComplete:s,isOnNavigation:n,keys:this.triggerKeys,properties:o};i.checkExpression(r)}l!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility(),this.isTriggerIsRunning=!1}checkTriggersAndRunConditions(e,t,s){var n={};n[e]={newValue:t,oldValue:s},this.runConditionOnValueChanged(e,t),this.checkTriggers(n,!1,!1,!1,e)}get hasRequiredValidQuestionTrigger(){for(let e=0;e<this.triggers.length;e++)if(this.triggers[e].requireValidQuestion)return!0;return!1}doElementsOnLoad(){for(var e=0;e<this.pages.length;e++)this.pages[e].onSurveyLoad()}get isRunningConditions(){return this.isRunningConditionsValue}runExpressions(){this.runConditions()}runConditions(){if(!this.isCompleted&&"processing"!==this.isEndLoadingFromJson&&!this.isRunningConditions){this.isRunningConditionsValue=!0;var e=this.getFilteredProperties();this.runConditionsCore(e),this.isRunningConditionsValue=!1,this.isValueChangedOnRunningCondition&&this.conditionRunnerCounter<xt.maxConditionRunCountOnValueChanged?(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter++,this.runConditions()):(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter=0,this.conditionUpdateVisibleIndexes&&(this.conditionUpdateVisibleIndexes=!1,this.updateVisibleIndexes()),this.conditionNotifyElementsOnAnyValueOrVariableChanged&&(this.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,this.notifyElementsOnAnyValueOrVariableChanged("")))}}runConditionOnValueChanged(e,t){this.questionTriggersKeys||(this.questionTriggersKeys={}),this.questionTriggersKeys[e]=t,this.isRunningConditions?this.isValueChangedOnRunningCondition=!0:(this.runConditions(),this.runQuestionsTriggers(e,t),this.questionTriggersKeys=void 0)}runConditionsCore(e){for(var t=this.pages,s=0;s<this.calculatedValues.length;s++)this.calculatedValues[s].resetCalculation();for(s=0;s<this.calculatedValues.length;s++)this.calculatedValues[s].doCalculation(this.calculatedValues,e);super.runConditionCore(e);for(let s=0;s<t.length;s++)t[s].runCondition(e)}runQuestionsTriggers(e,t){this.isDisplayMode||this.isDesignMode||this.getAllQuestions().forEach(s=>{s.runTriggers(e,t,this.questionTriggersKeys)})}sendResult(e=null,t=null,s=!1){this.isEditMode&&(s&&this.onPartialSend&&this.onPartialSend.fire(this,null),!e&&this.surveyPostId&&(e=this.surveyPostId),e&&(t&&(this.clientId=t),s&&!this.clientId||this.reportWarningOnUsingService()))}getResult(e,t){this.reportWarningOnUsingService()}loadSurveyFromService(e=null,t=null){e&&(this.surveyId=e),t&&(this.clientId=t),this.reportWarningOnUsingService()}reportWarningOnUsingService(){k.warn("Self-hosted Form Library no longer supports integration with SurveyJS Demo Service. Learn more: https://surveyjs.io/stay-updated/release-notes/v2.0.0#form-library-removes-apis-for-integration-with-surveyjs-demo-service")}loadSurveyFromServiceJson(e){e&&(this.fromJSON(e),this.notifyAllQuestionsOnValueChanged(),this.onLoadSurveyFromService(),this.onLoadedSurveyFromService.fire(this,{}))}onLoadingSurveyFromService(){}onLoadSurveyFromService(){}resetVisibleIndexes(){for(var e=this.getAllQuestions(!0),t=0;t<e.length;t++)e[t].setVisibleIndex(-1);this.updateVisibleIndexes()}updateVisibleIndexes(e){this.isLoadingFromJson||this.isEndLoadingFromJson||(this.isRunningConditions&&this.onQuestionVisibleChanged.isEmpty&&this.onPageVisibleChanged.isEmpty?this.conditionUpdateVisibleIndexes=!0:this.isRunningElementsBindings?this.updateVisibleIndexAfterBindings=!0:(this.updatePageVisibleIndexes(),this.updatePageElementsVisibleIndexes(e),this.updateProgressText(!0)))}updatePageElementsVisibleIndexes(e){if("onPage"==this.showQuestionNumbers)for(var t=e?[e]:this.visiblePages,s=0;s<t.length;s++)t[s].setVisibleIndex(0);else{let e=this.getStartVisibleIndex();const t=this.pages;for(let s=0;s<t.length;s++)e+=t[s].setVisibleIndex(e)}}getStartVisibleIndex(){const e=this.showQuestionNumbers;return"on"===e||"recursive"===e?0:-1}updatePageVisibleIndexes(){this.updateButtonsVisibility();for(var e=0,t=0;t<this.pages.length;t++){const s=this.pages[t],n=s.isVisible&&(t>0||!s.isStartPage);s.visibleIndex=n?e++:-1,s.num=n?s.visibleIndex+1:-1}}fromJSON(e,t){if(!e)return;this.resetHasLogo(),this.resetPropertyValue("titleIsEmpty"),this.questionHashesClear(),this.jsonErrors=null,this.sjsVersion=void 0;const s=new V;s.toObject(e,this,t),s.errors.length>0&&(this.jsonErrors=s.errors),this.onStateAndCurrentPageChanged(),this.endLoading(),this.updateState(),this.sjsVersion&&xt.version&&a.compareVerions(this.sjsVersion,xt.version)>0&&k.warn("The version of the survey JSON schema (v"+this.sjsVersion+") is newer than your current Form Library version ("+xt.version+"). Please update the Form Library to make sure that all survey features work as expected.")}startLoadingFromJson(e){super.startLoadingFromJson(e),e&&e.locale&&(this.locale=e.locale)}setJsonObject(e){this.fromJSON(e)}endLoadingFromJson(){this.isEndLoadingFromJson="processing",this.onFirstPageIsStartedChanged(),super.endLoadingFromJson(),this.hasCookie&&(this.isCompletedBefore=!0),this.doElementsOnLoad(),this.onQuestionsOnPageModeChanged("standard"),this.isEndLoadingFromJson="conditions",this.runConditions(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isEndLoadingFromJson=null,this.updateVisibleIndexes(),this.updateCurrentPage(),this.setCalculatedWidthModeUpdater(),this.onEndLoadingFromJson.fire(this,{})}updateNavigationCss(){const e=this.navigationBarValue;e&&(e.cssClasses=this.css.actionBar,e.containerCss=this.css.footer,this.updateNavigationItemCssCallback&&this.updateNavigationItemCssCallback())}createNavigationBar(){const e=new Ce;return e.setItems(this.createNavigationActions()),e.locOwner=this,e}createNavigationActions(){const e="sv-nav-btn",t=new De({id:"sv-nav-start",visible:new de(()=>this.isStartPageActive),visibleIndex:10,locTitle:this.locStartSurveyText,action:()=>this.start(),component:e}),s=new De({id:"sv-nav-prev",visible:new de(()=>this.isShowPrevButton),visibleIndex:20,data:{mouseDown:()=>this.navigationMouseDown()},locTitle:this.locPagePrevText,action:()=>this.performPrevious(),component:e}),n=new De({id:"sv-nav-next",visible:new de(()=>this.isShowNextButton),visibleIndex:30,data:{mouseDown:()=>this.nextPageMouseDown()},locTitle:this.locPageNextText,action:()=>this.nextPageUIClick(),component:e}),i=new De({id:"sv-nav-preview",visible:new de(()=>this.isPreviewButtonVisible),visibleIndex:40,data:{mouseDown:()=>this.navigationMouseDown()},locTitle:this.locPreviewText,action:()=>this.showPreview(),component:e}),r=new De({id:"sv-nav-complete",visible:new de(()=>this.isCompleteButtonVisible),visibleIndex:50,data:{mouseDown:()=>this.navigationMouseDown()},locTitle:this.locCompleteText,action:()=>this.taskManager.waitAndExecute(()=>this.tryComplete()),component:e});return this.updateNavigationItemCssCallback=()=>{t.innerCss=this.cssNavigationStart,s.innerCss=this.cssNavigationPrev,n.innerCss=this.cssNavigationNext,i.innerCss=this.cssNavigationPreview,r.innerCss=this.cssNavigationComplete},[t,s,n,i,r]}onBeforeRunConstructor(){}onBeforeCreating(){}onCreating(){}getProcessedTextValue(e){if(this.getProcessedTextValueCore(e),!this.onProcessDynamicText.isEmpty){var t=this.isValueEmpty(e.value);this.onProcessDynamicText.fire(this,e),e.isExists=e.isExists||t&&!this.isValueEmpty(e.value)}}getProcessedTextValueCore(e){const t=e.name.toLocaleLowerCase();if(-1!==["no","require","title"].indexOf(t))return;const s=(new S).getValueInfo({name:t,context:this.getValueGetterContext(),isText:!0,isDisplayValue:e.returnDisplayValue});s.isFound&&(e.isExists=!0,e.value=s.value)}clearUnusedValues(){this.isClearingUnsedValues=!0;for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].clearUnusedValues();this.clearInvisibleQuestionValues(),this.isClearingUnsedValues=!1}hasVisibleQuestionByValueName(e){const t=e;var s=this.getQuestionsByValueName(t.getValueName());if(!Array.isArray(s)||s.length<2)return!1;for(var n=0;n<s.length;n++){const e=s[n];if(e!==t&&e.isVisible&&e.isParentVisible&&!e.parentQuestion&&e.parentQuestion===t.parentQuestion)return!0}return!1}questionsByValueName(e){return this.getQuestionsByValueName(e)||[]}clearInvisibleQuestionValues(){const e="none"===this.clearInvisibleValues?"none":"onComplete",t=this.getAllQuestions();for(var s=0;s<t.length;s++)t[s].clearValueIfInvisible(e)}getVariable(e){if(!e)return null;e=e.toLowerCase();var t=this.variablesHash[e];return this.isValueEmpty(t)&&(e.indexOf(".")>-1||e.indexOf("[")>-1)?(new S).getValue(e,new T(this.variablesHash)):t}setVariable(e,t){if(!e)return;const s=this.getVariable(e);this.valuesHash&&delete this.valuesHash[e],e=e.toLowerCase(),this.variablesHash[e]=t,this.notifyElementsOnAnyValueOrVariableChanged(e),a.isTwoValueEquals(s,t)||(this.checkTriggersAndRunConditions(e,t,s),this.onVariableChanged.fire(this,{name:e,value:t}))}getVariableNames(){var e=[];for(var t in this.variablesHash)e.push(t);return e}getUnbindValue(e){return this.editingObj?e:a.getUnbindValue(e)}getValue(e){if(!e||0==e.length)return null;var t=this.getDataValueCore(this.valuesHash,e);return this.getUnbindValue(t)}setValue(e,t,s=!1,n=!0,i){var r=t;if(n&&(r=this.questionOnValueChanging(e,t)),(!this.isValidateOnValueChanging||this.validateOnValueChanging(e,r))&&(this.editingObj||!this.isValueEqual(e,r)||!this.isTwoValueEquals(r,t))){var a=this.getValue(e);this.isValueEmpyOnSetValue(e,r)?this.deleteDataValueCore(this.valuesHash,e):(r=this.getUnbindValue(r),this.setDataValueCore(this.valuesHash,e,r)),s=this.getLocNotification(s,r,a),this.updateOnSetValue(e,r,a,s,n,i)}}questionValueChanging(e,t){const s=e,n=s.parentQuestion;if(!n)return t;if(n.isDescendantOf("paneldynamic")&&!this.onDynamicPanelValueChanging.isEmpty){const e=n.getValueChangingOptions(s);if(e)return e.value=t,this.onDynamicPanelValueChanging.fire(this,e),e.value}return t}questionValueChanged(e,t){const s=e,n=s.parentQuestion;if(n&&n.isDescendantOf("paneldynamic")&&!this.onDynamicPanelValueChanged.isEmpty){const e=n.getValueChangingOptions(s);e&&(e.value=s.value,e.oldValue=t,this.onDynamicPanelValueChanged.fire(this,e))}}isValueEmpyOnSetValue(e,t){return!(!this.isValueEmpty(t,!1)||this.editingObj&&null!=t&&this.editingObj.getDefaultPropertyValue(e)!==t)}updateOnSetValue(e,t,s,n=!1,i=!0,r){this.updateQuestionValue(e,t),!0===n||this.isDisposed||this.isRunningElementsBindings||(r=r||e,this.nofifyQuesitonHash[e]=!0,this.checkTriggersAndRunConditions(e,t,s),this.nofifyQuesitonHash[e]&&(i&&this.notifyQuestionOnValueChanged(e,t,r),"text"!==n&&this.tryGoNextPageAutomatic(e),delete this.nofifyQuesitonHash[e]))}isValueEqual(e,t){""!==t&&void 0!==t||(t=null);var s=this.getValue(e);return""!==s&&void 0!==s||(s=null),null===t||null===s?t===s:this.isTwoValueEquals(t,s)}doOnPageAdded(e){if(e.setSurveyImpl(this),e.name||(e.name=this.generateNewName(this.pages,"page")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),!this.runningPages&&(this.isLoadingFromJson||(this.updateProgressText(),this.updateCurrentPage()),this.canFireAddPage())){var t={page:e};this.onPageAdded.fire(this,t)}}canFireAddPage(){return!this.isMovingPage}doOnPageRemoved(e){e.setSurveyImpl(null),this.runningPages||(e===this.currentPage&&this.updateCurrentPage(),this.updateVisibleIndexes(),this.updateProgressText(),this.updateLazyRenderingRowsOnRemovingElements())}generateNewName(e,t){for(var s={},n=0;n<e.length;n++)s[e[n].name]=!0;for(var i=1;s[t+i];)i++;return t+i}tryGoNextPageAutomatic(e){if(this.isEndLoadingFromJson||!this.autoAdvanceEnabled||!this.currentPage)return;const t=this.getQuestionByValueName(e);if(!t||t&&(!t.visible||!t.supportAutoAdvance()))return;if(!t.validate(!1)&&!t.supportGoNextPageError())return;if(this.currentSingleElement){const e=this.currentSingleElement,t=()=>{e===this.currentSingleElement&&(this.isLastElement?this.autoAdvanceAllowComplete&&this.tryCompleteOrShowPreview():this.performNext())};rn.safeTimeOut(t,xt.autoAdvanceDelay)}var s=this.getCurrentPageQuestions();if(s.indexOf(t)<0)return;for(var n=0;n<s.length;n++)if(s[n].hasInput&&s[n].isEmpty())return;if(this.isLastPage&&(!0!==this.autoAdvanceEnabled||!this.autoAdvanceAllowComplete))return;if(!this.validateActivePage(!1))return;const i=this.currentPage;rn.safeTimeOut(()=>{i===this.currentPage&&(this.isLastPage?this.tryCompleteOrShowPreview():this.nextPage())},xt.autoAdvanceDelay)}tryCompleteOrShowPreview(){this.showPreviewBeforeComplete?this.showPreview():this.tryComplete()}getComment(e){return this.getValue(e+this.commentSuffix)||""}setComment(e,t,s=!1){if(t||(t=""),this.isTwoValueEquals(t,this.getComment(e)))return;const n=e+this.commentSuffix;t=this.questionOnValueChanging(n,t,e),s=this.getLocNotification(s,t,this.getComment(e)),this.isValueEmpty(t)?this.deleteDataValueCore(this.valuesHash,n):this.setDataValueCore(this.valuesHash,n,t);var i=this.getQuestionsByValueName(e);if(i)for(var r=0;r<i.length;r++)i[r].updateCommentFromSurvey(t),this.validateQuestionOnValueChanged(i[r]);s||this.checkTriggersAndRunConditions(e,this.getValue(e),void 0),"text"!==s&&this.tryGoNextPageAutomatic(e);var a=this.getQuestionByValueName(e);a&&(this.fireOnValueChanged(n,t,a),a.comment=t,a.comment!=t&&(a.comment=t))}clearValue(e){this.setValue(e,null),this.setComment(e,null)}get clearDisabledChoices(){return this.getPropertyValue("clearDisabledChoices",!1)}set clearDisabledChoices(e){this.setPropertyValue("clearDisabledChoices",e)}get clearValueOnDisableItems(){return this.clearDisabledChoices}set clearValueOnDisableItems(e){this.clearDisabledChoices=e}getQuestionClearIfInvisible(e){return this.isShowingPreview||this.runningPages?"none":"default"!==e?e:this.clearInvisibleValues}questionVisibilityChanged(e,t,s){s&&this.updateVisibleIndexes(e.page),t||this.changeCurrentSingleElementOnVisibilityChanged(),this.onQuestionVisibleChanged.fire(this,{question:e,name:e.name,visible:t})}pageVisibilityChanged(e,t){if(this.isLoadingFromJson)return;(t&&!this.currentPage||e===this.currentPage)&&this.updateCurrentPage(),this.updateVisibleIndexes(),t||this.changeCurrentSingleElementOnVisibilityChanged();const s=this.currentSingleElement,n=this.currentPage;s&&n&&s.page!==n&&(this.currentSingleElement=n.getFirstVisibleElement()),this.onPageVisibleChanged.fire(this,{page:e,visible:t})}panelVisibilityChanged(e,t){e.page&&(this.updateVisibleIndexes(e.page),t||this.changeCurrentSingleElementOnVisibilityChanged()),this.onPanelVisibleChanged.fire(this,{panel:e,visible:t})}questionCreated(e){this.onQuestionCreated.fire(this,{question:e})}questionAdded(e,t,s,n){e.name||(e.name=this.generateNewName(this.getAllQuestions(!1,!0),"question")),e.page&&this.questionHashesAdded(e),this.isLoadingFromJson||(this.currentPage||this.updateCurrentPage(),this.updateVisibleIndexes(e.page),this.setCalculatedWidthModeUpdater()),this.canFireAddElement()&&this.onQuestionAdded.fire(this,{question:e,name:e.name,index:t,parent:s,page:n,parentPanel:s,rootPanel:n})}canFireAddElement(){return!this.isMovingQuestion}questionRemoved(e){this.questionHashesRemoved(e,e.name,e.getValueName()),this.updateVisibleIndexes(e.page),this.onQuestionRemoved.fire(this,{question:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()}questionRenamed(e,t,s){this.questionHashesRemoved(e,t,s),this.questionHashesAdded(e)}questionHashesClear(){this.questionHashes.names={},this.questionHashes.namesInsensitive={},this.questionHashes.valueNames={},this.questionHashes.valueNamesInsensitive={}}questionHashesPanelAdded(e){if(!this.isLoadingFromJson)for(var t=e.questions,s=0;s<t.length;s++)this.questionHashesAdded(t[s])}questionHashesAdded(e){this.questionHashAddedCore(this.questionHashes.names,e,e.name),this.questionHashAddedCore(this.questionHashes.namesInsensitive,e,e.name.toLowerCase()),this.questionHashAddedCore(this.questionHashes.valueNames,e,e.getValueName()),this.questionHashAddedCore(this.questionHashes.valueNamesInsensitive,e,e.getValueName().toLowerCase())}questionHashesRemoved(e,t,s){t&&(this.questionHashRemovedCore(this.questionHashes.names,e,t),this.questionHashRemovedCore(this.questionHashes.namesInsensitive,e,t.toLowerCase())),s&&(this.questionHashRemovedCore(this.questionHashes.valueNames,e,s),this.questionHashRemovedCore(this.questionHashes.valueNamesInsensitive,e,s.toLowerCase()))}questionHashAddedCore(e,t,s){var n;(n=e[s])?(n=e[s]).indexOf(t)<0&&n.push(t):e[s]=[t]}questionHashRemovedCore(e,t,s){var n=e[s];if(n){var i=n.indexOf(t);i>-1&&n.splice(i,1),0==n.length&&delete e[s]}}panelAdded(e,t,s,n){e.name||(e.name=this.generateNewName(this.getAllPanels(!1,!0),"panel")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(e.page),this.canFireAddElement()&&this.onPanelAdded.fire(this,{panel:e,name:e.name,index:t,parent:s,page:n,parentPanel:s,rootPanel:n})}panelRemoved(e){this.updateVisibleIndexes(e.page),this.onPanelRemoved.fire(this,{panel:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()}validateQuestion(e,t,s){if(!this.onValidateQuestion.isEmpty){var n={name:e.name,question:e,value:e.value,errors:t,error:null};this.onValidateQuestion.fire(this,n),n.error&&t.push(new Ot(n.error,this))}s&&this.beforeSettingQuestionErrors(e,t)}validatePanel(e,t,s){if(e.isPanel&&!this.onValidatePanel.isEmpty){const s={name:e.name,panel:e,error:null,errors:t};this.onValidatePanel.fire(this,s),s.error&&t.push(new Ot(s.error,this))}s&&this.makeRequiredErrorsInvisible(t)}processHtml(e,t){t||(t="");var s={html:e,reason:t};return this.onProcessHtml.fire(this,s),this.processText(s.html,!0)}getValueGetterContext(){return new Vn(this,this.valuesHash,this.variablesHash)}processText(e,t){return this.processTextEx({text:e,returnDisplayValue:t,doEncoding:!1}).text}processTextEx(e){const t=void 0===e.doEncoding?xt.web.encodeUrlParams:e.doEncoding;let s=e.text;!e.runAtDesign&&this.isDesignMode||(s=this.textPreProcessor.process(s,!0===e.returnDisplayValue,t,e.replaceUndefinedValues));const n={text:s,hasAllValuesOnLastRun:!0};return n.hasAllValuesOnLastRun=this.textPreProcessor.hasAllValuesOnLastRun,n}get textPreProcessor(){return this.textPreProcessorValue||(this.textPreProcessorValue=new gs,this.textPreProcessorValue.onProcess=e=>{this.getProcessedTextValue(e)}),this.textPreProcessorValue}getSurveyMarkdownHtml(e,t,s,n){const i={element:e,text:t,name:s,item:n,html:null};return this.onTextMarkdown.fire(this,i),i.html}getCorrectedAnswerCount(){return this.getCorrectAnswerCount()}getCorrectAnswerCount(){return this.getCorrectedAnswerCountCore(!0)}getQuizQuestionCount(){for(var e=this.getQuizQuestions(),t=0,s=0;s<e.length;s++)t+=e[s].quizQuestionCount;return t}getInCorrectedAnswerCount(){return this.getIncorrectAnswerCount()}getInCorrectAnswerCount(){return this.getIncorrectAnswerCount()}getIncorrectAnswerCount(){return this.getCorrectedAnswerCountCore(!1)}onCorrectQuestionAnswer(e,t){this.onIsAnswerCorrect.isEmpty||(t.question=e,this.onIsAnswerCorrect.fire(this,t))}getCorrectedAnswerCountCore(e){var t=this.getQuizQuestions(),s=0;for(let n=0;n<t.length;n++){const i=t[n],r=i.correctAnswerCount;s+=e?r:i.quizQuestionCount-r}return s}getCorrectedAnswers(){return this.getCorrectedAnswerCount()}getInCorrectedAnswers(){return this.getInCorrectedAnswerCount()}get showTimerPanel(){return this.showTimer?this.timerLocation:"none"}set showTimerPanel(e){this.showTimer="none"!==e,this.showTimer&&(this.timerLocation=e)}get showTimer(){return this.getPropertyValue("showTimer")}set showTimer(e){this.setPropertyValue("showTimer",e)}get timerLocation(){return this.getPropertyValue("timerLocation")}set timerLocation(e){this.setPropertyValue("timerLocation",e)}get isTimerPanelShowingOnTop(){return this.showTimer&&"top"===this.timerLocation}get isTimerPanelShowingOnBottom(){return this.showTimer&&"bottom"===this.timerLocation}get timerInfoMode(){return this.getTimerInfoVal(this.getPropertyValue("timerInfoMode"))}set timerInfoMode(e){this.setPropertyValue("timerInfoMode",e)}getTimerInfoVal(e){return"all"===e?"combined":e}get showTimerPanelMode(){const e=this.timerInfoMode;return"combined"===e?"all":e}set showTimerPanelMode(e){this.timerInfoMode=this.getTimerInfoVal(e)}updateGridColumns(){this.pages.forEach(e=>e.updateGridColumns())}get widthMode(){return this.getPropertyValue("widthMode")}set widthMode(e){this.setPropertyValue("widthMode",e)}setCalculatedWidthModeUpdater(){this.isLoadingFromJson||(this.calculatedWidthModeUpdater&&this.calculatedWidthModeUpdater.dispose(),this.calculatedWidthModeUpdater=new de(()=>this.calculateWidthMode()),this.calculatedWidthMode=this.calculatedWidthModeUpdater)}calculateWidthMode(){if("auto"==this.widthMode){let e=!1;return this.isSingleVisibleInput||this.pages.forEach(t=>{t.needResponsiveWidth()&&(e=!0)}),e?"responsive":"static"}return this.widthMode}get width(){return this.getPropertyValue("width")}set width(e){this.setPropertyValue("width",e)}get renderedWidth(){const e="static"==this.getPropertyValue("calculatedWidthMode");let t=this.getPropertyValue("width");if(this.isScaled&&this.responsiveStartWidth>1){let s=this.responsiveStartWidth;try{t=t||this.staticStartWidth,s=isNaN(t)?parseFloat(t.toString().replace("px","")):t}catch(e){}return(e?s:this.responsiveStartWidth)*this.widthScale/100+"px"}return t&&!isNaN(t)&&(t+="px"),e&&t||void 0}setStaticStartWidth(e){this.staticStartWidth=e}setResponsiveStartWidth(e){this.responsiveStartWidth=e}get isScaled(){return Math.abs(this.widthScale-100)>.001}get timerInfo(){return this.getTimerInfo()}get timerClock(){let e,t;if(this.currentPage){let{spent:s,limit:n,minorSpent:i,minorLimit:r}=this.getTimerInfo();e=n>0?this.getDisplayClockTime(n-s):this.getDisplayClockTime(s),void 0!==i&&(t=r>0?this.getDisplayClockTime(r-i):this.getDisplayClockTime(i))}return{majorText:e,minorText:t}}get timerInfoText(){const e={text:this.getTimerInfoText()};this.onTimerPanelInfoText.fire(this,e);var t=new Ze(this,!0);return t.text=e.text,t.textOrHtml}getTimerInfo(){let e=this.currentPage;if(!e)return{spent:0,limit:0};let t=e.timeSpent,s=this.timeSpent,n=e.getMaxTimeToFinish(),i=this.timeLimit;return"page"==this.timerInfoMode?{spent:t,limit:n}:"survey"==this.timerInfoMode?{spent:s,limit:i}:n>0&&i>0?{spent:t,limit:n,minorSpent:s,minorLimit:i}:n>0?{spent:t,limit:n,minorSpent:s}:i>0?{spent:s,limit:i,minorSpent:t}:{spent:t,minorSpent:s}}getTimerInfoText(){var e=this.currentPage;if(!e)return"";var t=this.getDisplayTime(e.timeSpent),s=this.getDisplayTime(this.timeSpent),n=e.getMaxTimeToFinish(),i=this.getDisplayTime(n),r=this.getDisplayTime(this.timeLimit);return"page"==this.timerInfoMode?this.getTimerInfoPageText(e,t,i):"survey"==this.timerInfoMode?this.getTimerInfoSurveyText(s,r):"combined"==this.timerInfoMode?n<=0&&this.timeLimit<=0?this.getLocalizationFormatString("timerSpentAll",t,s):n>0&&this.timeLimit>0?this.getLocalizationFormatString("timerLimitAll",t,i,s,r):this.getTimerInfoPageText(e,t,i)+" "+this.getTimerInfoSurveyText(s,r):""}getTimerInfoPageText(e,t,s){return e&&e.getMaxTimeToFinish()>0?this.getLocalizationFormatString("timerLimitPage",t,s):this.getLocalizationFormatString("timerSpentPage",t,s)}getTimerInfoSurveyText(e,t){const s=this.timeLimit>0?"timerLimitSurvey":"timerSpentSurvey";return this.getLocalizationFormatString(s,e,t)}getDisplayClockTime(e){e<0&&(e=0);const t=Math.floor(e/60),s=e%60;let n=s.toString();return s<10&&(n="0"+n),`${t}:${n}`}getDisplayTime(e){const t=Math.floor(e/60),s=e%60;let n="";return t>0&&(n+=t+" "+this.getLocalizationString("timerMin")),n&&0==s?n:(n&&(n+=" "),n+s+" "+this.getLocalizationString("timerSec"))}get timerModel(){return this.timerModelValue}startTimer(){this.isEditMode&&this.timerModel.start()}startTimerFromUI(){this.showTimer&&"running"===this.state&&this.startTimer()}stopTimer(){this.timerModel.stop()}get timeSpent(){return this.timerModel.spent}set timeSpent(e){this.timerModel.spent=e}get timeLimit(){return this.getPropertyValue("timeLimit",0)}set timeLimit(e){this.setPropertyValue("timeLimit",e)}get maxTimeToFinish(){return this.timeLimit}set maxTimeToFinish(e){this.timeLimit=e}get timeLimitPerPage(){return this.getPropertyValue("timeLimitPerPage",0)}set timeLimitPerPage(e){this.setPropertyValue("timeLimitPerPage",e)}get maxTimeToFinishPage(){return this.timeLimitPerPage}set maxTimeToFinishPage(e){this.timeLimitPerPage=e}doTimer(e){if(this.onTimerTick.fire(this,{}),this.timeLimit>0&&this.timeLimit<=this.timeSpent&&(this.timeSpent=this.timeLimit,this.tryComplete()),e){var t=e.getMaxTimeToFinish();t>0&&t==e.timeSpent&&(this.isLastPage?this.tryComplete():this.nextPage())}}get inSurvey(){return!0}getSurveyData(){return this}getSurvey(){return this}getTextProcessor(){return this}getObjects(e,t){var s=[];return Array.prototype.push.apply(s,this.getPagesByNames(e)),Array.prototype.push.apply(s,this.getQuestionsByNames(t)),s}setTriggerValue(e,t,s){if(e)if(s)this.setVariable(e,t);else{this.startSetValueFromTrigger();const s=(new S).getValueInfo({name:e,context:this.getValueGetterContext(),createObjects:!0});s.isFound&&s.question?s.question.value=t:e.indexOf(".")<0&&this.setValue(e,t),this.finishSetValueFromTrigger()}}copyTriggerValue(e,t,s){if(!e||!t)return;const n=(new S).getValueInfo({name:t,context:this.getValueGetterContext(),createObjects:!0,isText:s,isDisplayValue:s});n.isFound&&this.setTriggerValue(e,a.getUnbindValue(n.value),!1)}triggerExecuted(e){this.onTriggerExecuted.fire(this,{trigger:e})}get isSettingValueFromTrigger(){return this.setValueFromTriggerCounter>0}startSetValueFromTrigger(){this.setValueFromTriggerCounter++}finishSetValueFromTrigger(){this.setValueFromTriggerCounter--}startMovingQuestion(){this.isMovingQuestion=!0}stopMovingQuestion(){this.isMovingQuestion=!1}get isQuestionDragging(){return this.isMovingQuestion}startMovingPage(){this.isMovingPage=!0}stopMovingPage(){this.isMovingPage=!1}focusQuestion(e){return this.focusQuestionByInstance(this.getQuestionByName(e,!0))}focusQuestionByInstance(e,t=!1){var s;if(!e||!e.isVisible||!e.page)return!1;if((null===(s=this.focusingQuestionInfo)||void 0===s?void 0:s.question)===e)return!1;this.focusingQuestionInfo={question:e,onError:t};const n=this.currentSingleElement;this.skippedPages.push({from:n||this.currentPage,to:n?e:e.page});const i=this.activePage!==e.page&&!e.page.isStartPage;return i&&(this.currentPage=e.page),this.isSingleVisibleQuestion&&!this.isDesignMode&&(this.currentSingleElement=e),i||this.focusQuestionInfo(),!0}focusQuestionInfo(){var e;const t=null===(e=this.focusingQuestionInfo)||void 0===e?void 0:e.question;t&&!t.isDisposed&&t.focus(this.focusingQuestionInfo.onError),this.focusingQuestionInfo=void 0}questionEditFinishCallback(e,t){const s=this.enterKeyAction||xt.enterKeyAction;if("loseFocus"==s&&t.target.blur(),"moveToNextEditor"==s){const s=this.currentPage.questions,n=s.indexOf(e);n>-1&&n<s.length-1?s[n+1].focus():t.target.blur()}}elementWrapperComponentNameCore(e,t,s,n,i){if(this.onElementWrapperComponentName.isEmpty)return e;const r={componentName:e,element:t,wrapperName:s,reason:n,item:i};return this.onElementWrapperComponentName.fire(this,r),r.componentName}elementWrapperDataCore(e,t,s,n,i){if(this.onElementWrapperComponentData.isEmpty)return e;const r={data:e,element:t,wrapperName:s,reason:n,item:i};return this.onElementWrapperComponentData.fire(this,r),r.data}getElementWrapperComponentName(e,t){const s="logo-image"===t?"sv-logo-image":In.TemplateRendererComponentName;return this.elementWrapperComponentNameCore(s,e,"component",t)}getQuestionContentWrapperComponentName(e){return this.elementWrapperComponentNameCore(In.TemplateRendererComponentName,e,"content-component")}getRowWrapperComponentName(e){return this.elementWrapperComponentNameCore(In.TemplateRendererComponentName,e,"row")}getItemValueWrapperComponentName(e,t){return this.elementWrapperComponentNameCore(In.TemplateRendererComponentName,t,"itemvalue",void 0,e)}getElementWrapperComponentData(e,t){return this.elementWrapperDataCore(e,e,"component",t)}getRowWrapperComponentData(e){return this.elementWrapperDataCore(e,e,"row")}getItemValueWrapperComponentData(e,t){return this.elementWrapperDataCore(e,t,"itemvalue",void 0,e)}getMatrixCellTemplateData(e){const t=e.question;return this.elementWrapperDataCore(t,t,"cell")}searchText(e){e&&(e=e.toLowerCase());for(var t=[],s=0;s<this.pages.length;s++)this.pages[s].searchText(e,t);return t}getSkeletonComponentName(e){return this.skeletonComponentName}addLayoutElement(e){const t=this.removeLayoutElement(e.id);return this.layoutElements.push(e),t}findLayoutElement(e){const t=this.layoutElements.filter(t=>t.id===e)[0];return t}removeLayoutElement(e){const t=this.findLayoutElement(e);if(t){const e=this.layoutElements.indexOf(t);this.layoutElements.splice(e,1)}return t}getContainerContent(e){const t=new Array;for(let s of this.layoutElements)if("display"!==this.mode&&Sn(s.id,"timerpanel"))"header"===e&&this.isTimerPanelShowingOnTop&&!this.isStartPageActive&&t.push(s),"footer"===e&&this.isTimerPanelShowingOnBottom&&!this.isStartPageActive&&t.push(s);else if("running"===this.state&&Sn(s.id,this.progressBarComponentName)){if("singlePage"!=this.questionsOnPageMode||"questions"==this.progressBarType){const n=this.findLayoutElement("advanced-header"),i=n&&n.data;let r=!i||i.hasBackground;Sn(this.progressBarLocation,"aboveHeader")&&(r=!1),Sn(this.progressBarLocation,"belowHeader")&&(r=!0),!this.showTOC||i&&i.hasBackground||!this.isShowProgressBarOnTop||this.isStartPageActive?("header"!==e||r||(s.index=-150,this.isShowProgressBarOnTop&&!this.isStartPageActive&&t.push(s)),"center"===e&&r&&(s.index&&delete s.index,this.isShowProgressBarOnTop&&!this.isStartPageActive&&t.push(s))):"center"===e&&(r?delete s.index:s.index=-150,t.push(s)),"footer"===e&&this.isShowProgressBarOnBottom&&!this.isStartPageActive&&t.push(s)}}else if(Sn(s.id,"buttons-navigation"))"contentTop"===e&&this.isNavigationButtonsShowingOnTop&&t.push(s),"contentBottom"===e&&this.isNavigationButtonsShowingOnBottom&&t.push(s);else if("running"===this.state&&Sn(s.id,"toc-navigation")&&this.showTOC)"left"===e&&-1!==["left","both"].indexOf(this.tocLocation)&&t.push(s),"right"===e&&-1!==["right","both"].indexOf(this.tocLocation)&&t.push(s);else if(Sn(s.id,"advanced-header")){if("running"===this.state||"starting"===this.state||!0===this.showHeaderOnCompletePage&&"completed"===this.state){const n=s&&s.data;!this.showTOC||n&&n.hasBackground?s.container===e&&t.push(s):"contentTop"===e&&t.push(s)}}else(Array.isArray(s.container)&&-1!==s.container.indexOf(e)||s.container===e)&&t.push(s);return t.sort((e,t)=>(e.index||0)-(t.index||0)),t.forEach(e=>{e.getData&&(e.data=e.getData())}),t}processPopupVisiblityChanged(e,t,s){this.onPopupVisibleChanged.fire(this,{question:e,popup:t,visible:s})}processOpenDropdownMenu(e,t){const s=Object.assign({question:e},t);this.onOpenDropdownMenu.fire(this,s),t.menuType=s.menuType}getCssTitleExpandableSvg(){return null}createCustomChoiceItem(e){this.onCreateCustomChoiceItem.fire(this,e)}applyTheme(e){if(e){if(Object.keys(e).forEach(t=>{"header"!==t&&("isPanelless"===t?this.isCompact=e[t]:this[t]=e[t])}),"header"in e&&!e.headerView&&(this.headerView="advanced"),"basic"!==this.headerView){this.removeLayoutElement("advanced-header");const t=new dn;t.fromTheme(e),this.insertAdvancedHeader(t)}this.themeChanged(e)}}themeChanged(e){this.getAllQuestions().forEach(t=>t.themeChanged(e))}dispose(){if(this.unConnectEditingObj(),this.removeScrollEventListener(),this.destroyResizeObserver(),this.rootElement=void 0,this.layoutElements){for(var e=0;e<this.layoutElements.length;e++)this.layoutElements[e].data&&this.layoutElements[e].data!==this&&this.layoutElements[e].data.dispose&&this.layoutElements[e].data.dispose();this.layoutElements.splice(0,this.layoutElements.length)}if(super.dispose(),this.editingObj=null,this.pages){for(this.currentPage=null,e=0;e<this.pages.length;e++)this.pages[e].setSurveyImpl(void 0),this.pages[e].dispose();this.pages.splice(0,this.pages.length),this.disposeCallback&&this.disposeCallback()}}_isElementShouldBeSticky(e){var t;if(!e)return!1;const s=null===(t=this.scrollerElement)||void 0===t?void 0:t.querySelector(e);return!!s&&!!this.scrollerElement&&this.scrollerElement.scrollTop>0&&s.getBoundingClientRect().y<=this.scrollerElement.getBoundingClientRect().y}get rootScrollDisabled(){return!(this.fitToContainer&&this.formScrollDisabled)}get formScrollDisabled(){return!this.backgroundImage||"fixed"!==this.backgroundImageAttachment}onScroll(){this.rootElement&&(this._isElementShouldBeSticky(".sv-components-container-center")?this.rootElement.classList&&this.rootElement.classList.add("sv-root--sticky-top"):this.rootElement.classList&&this.rootElement.classList.remove("sv-root--sticky-top"),this.tocModel&&this.tocModel.updateStickyTOCSize(this.rootElement)),this.onScrollCallback&&this.onScrollCallback()}addScrollEventListener(){this.scrollHandler=()=>{this.onScroll()},this.rootElement.addEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].addEventListener("scroll",this.scrollHandler),this.scrollerElement&&this.scrollerElement.addEventListener("scroll",this.scrollHandler)}removeScrollEventListener(){this.rootElement&&this.scrollHandler&&(this.rootElement.removeEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].removeEventListener("scroll",this.scrollHandler),this.scrollerElement&&this.scrollerElement.removeEventListener("scroll",this.scrollHandler))}}function Sn(e,t){return!!e&&!!t&&e.toUpperCase()===t.toUpperCase()}In.TemplateRendererComponentName="sv-template-renderer",In.platform="unknown",me([d()],In.prototype,"completedCss",void 0),me([d()],In.prototype,"completedBeforeCss",void 0),me([d()],In.prototype,"loadingBodyCss",void 0),me([d()],In.prototype,"containerCss",void 0),me([d({onSet:(e,t)=>{t.updateCss()}})],In.prototype,"fitToContainer",void 0),me([d({onSet:(e,t)=>{if("basic"===e)t.removeLayoutElement("advanced-header");else if(!t.findLayoutElement("advanced-header")){const e=new dn;t.insertAdvancedHeader(e)}}})],In.prototype,"headerView",void 0),me([d()],In.prototype,"showBrandInfo",void 0),me([d()],In.prototype,"enterKeyAction",void 0),me([d()],In.prototype,"lazyRenderFirstBatchSizeValue",void 0),me([d({defaultValue:{}})],In.prototype,"cssVariables",void 0),me([d()],In.prototype,"_isMobile",void 0),me([d()],In.prototype,"_isCompact",void 0),me([d({onSet:(e,t)=>{t.updateCss()}})],In.prototype,"backgroundImage",void 0),me([d()],In.prototype,"backgroundImageFit",void 0),me([d({onSet:(e,t)=>{t.updateCss()}})],In.prototype,"backgroundImageAttachment",void 0),me([d()],In.prototype,"wrapperFormCss",void 0),me([d({getDefaultValue:e=>"buttons"===e.progressBarType})],In.prototype,"progressBarShowPageTitles",void 0),me([d()],In.prototype,"progressBarShowPageNumbers",void 0),me([d()],In.prototype,"progressBarInheritWidthFrom",void 0),me([d({defaultValue:!0})],In.prototype,"validationEnabled",void 0),me([d()],In.prototype,"rootCss",void 0),me([d({onSet:(e,t)=>{t.updateGridColumns()}})],In.prototype,"gridLayoutEnabled",void 0),me([d()],In.prototype,"calculatedWidthMode",void 0),me([d({defaultValue:100,onSet(e,t,s){t.pages.forEach(e=>e.updateRootStyle())}})],In.prototype,"widthScale",void 0),me([d()],In.prototype,"staticStartWidth",void 0),me([d()],In.prototype,"responsiveStartWidth",void 0),me([c()],In.prototype,"layoutElements",void 0),I.addClass("survey",[{name:"locale",choices:()=>o.getLocales(!0),onGetValue:e=>e.locale==o.defaultLocale?null:e.locale},{name:"title",serializationProperty:"locTitle",dependsOn:"locale"},{name:"description:text",serializationProperty:"locDescription",dependsOn:"locale"},{name:"logo:file",serializationProperty:"locLogo"},{name:"logoWidth",default:"auto",minValue:0},{name:"logoHeight",default:"40px",minValue:0},{name:"logoFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"logoPosition",default:"left",choices:["none","left","right","top","bottom"]},{name:"autoFocusFirstQuestion:boolean",alternativeName:"focusFirstQuestionAutomatic"},{name:"autoFocusFirstError:boolean",default:!0,alternativeName:"focusOnFirstError"},{name:"completedHtml:html",serializationProperty:"locCompletedHtml"},{name:"completedBeforeHtml:html",serializationProperty:"locCompletedBeforeHtml"},{name:"completedHtmlOnCondition:htmlconditions",className:"htmlconditionitem",isArray:!0},{name:"loadingHtml:html",serializationProperty:"locLoadingHtml"},{name:"pages:surveypages",className:"page",isArray:!0,onSerializeValue:e=>e.originalPages||e.pages},{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1,onGetValue:function(e){return null},onSetValue:function(e,t,s){e.pages.splice(0,e.pages.length);var n=e.addNewPage("");s.toObject({questions:t},n,null==s?void 0:s.options)}},{name:"triggers:triggers",baseClassName:"surveytrigger",classNamePart:"trigger"},{name:"calculatedValues:calculatedvalues",className:"calculatedvalue",isArray:!0},{name:"sjsVersion",visible:!1},{name:"surveyId",visible:!1},{name:"surveyPostId",visible:!1},{name:"surveyShowDataSaving:boolean",visible:!1},"cookieName",{name:"partialSendEnabled:boolean",alternativeName:"sendResultOnPageNext"},{name:"showNavigationButtons:boolean",default:!0},{name:"navigationButtonsLocation",default:"bottom",choices:["top","bottom","topBottom"]},{name:"showPrevButton:boolean",default:!0,visibleIf:e=>"none"!==e.showNavigationButtons},{name:"showTitle:boolean",default:!0},{name:"showPageTitles:boolean",default:!0},{name:"showCompletePage:boolean",default:!0,alternativeName:"showCompletedPage"},"navigateToUrl",{name:"navigateToUrlOnCondition:urlconditions",className:"urlconditionitem",isArray:!0},{name:"questionOrder",alternativeName:"questionsOrder",default:"initial",choices:["initial","random"]},{name:"matrixDragHandleArea",visible:!1,default:"entireItem",choices:["entireItem","icon"]},"showPageNumbers:boolean",{name:"showQuestionNumbers",default:"off",choices:["on","onPage","recursive","off"]},{name:"questionTitleLocation",default:"top",choices:["top","bottom","left"]},{name:"questionDescriptionLocation",default:"underTitle",choices:["underInput","underTitle"]},{name:"questionErrorLocation",default:"top",choices:["top","bottom"]},{name:"showProgressBar:boolean",default:!1,onSetValue:(e,t,s)=>{e&&e.setShowProgressBar(t)}},{name:"progressBarLocation",default:"auto",choices:["auto","aboveheader","belowheader","bottom","topbottom"],visibleIf:e=>e.showProgressBar},{name:"progressBarType",default:"pages",choices:["pages","questions","requiredQuestions","correctQuestions"],visibleIf:e=>e.showProgressBar},{name:"progressBarShowPageTitles:switch",category:"navigation",visibleIf:e=>e.showProgressBar&&"pages"===e.progressBarType},{name:"progressBarShowPageNumbers:switch",default:!1,category:"navigation",visibleIf:e=>e.showProgressBar&&"pages"===e.progressBarType},{name:"progressBarInheritWidthFrom",default:"container",choices:["container","survey"],category:"navigation",visibleIf:e=>e.showProgressBar&&"pages"===e.progressBarType},{name:"showTOC:switch",default:!1},{name:"tocLocation",default:"left",choices:["left","right"],dependsOn:["showTOC"],visibleIf:e=>!!e&&e.showTOC},{name:"readOnly:boolean"},{name:"mode",visible:!1,isSerializable:!1},{name:"storeOthersAsComment:boolean",default:!0},{name:"maxTextLength:number",default:0,minValue:0},{name:"maxCommentLength:number",default:0,minValue:0,alternativeName:"maxOthersLength"},{name:"autoAdvanceEnabled:boolean",alternativeName:"goNextPageAutomatic",onSetValue:function(e,t){"autogonext"!==t&&(t=a.isTwoValueEquals(t,!0)),"autogonext"===t&&(t=!0),e.setPropertyValue("autoAdvanceEnabled",t)}},{name:"autoAdvanceAllowComplete:boolean",default:!0,alternativeName:"allowCompleteSurveyAutomatic",visibleIf:e=>!0===e.autoAdvanceEnabled},{name:"clearInvisibleValues",default:"onComplete",choices:["none","onComplete","onHidden","onHiddenContainer"]},{name:"checkErrorsMode",default:"onNextPage",choices:["onNextPage","onValueChanged","onComplete"]},{name:"validateVisitedEmptyFields:boolean",dependsOn:"checkErrorsMode",visibleIf:e=>"onValueChanged"===e.checkErrorsMode},{name:"textUpdateMode",default:"onBlur",choices:["onBlur","onTyping"]},{name:"autoGrowComment:boolean",default:!1},{name:"allowResizeComment:boolean",default:!0},{name:"commentAreaRows:number",minValue:1},{name:"startSurveyText",serializationProperty:"locStartSurveyText",visibleIf:e=>e.firstPageIsStartPage},{name:"pagePrevText",serializationProperty:"locPagePrevText",visibleIf:e=>"none"!==e.showNavigationButtons&&e.showPrevButton},{name:"pageNextText",serializationProperty:"locPageNextText",visibleIf:e=>"none"!==e.showNavigationButtons},{name:"completeText",serializationProperty:"locCompleteText",visibleIf:e=>"none"!==e.showNavigationButtons},{name:"previewText",serializationProperty:"locPreviewText",visibleIf:e=>e.showPreviewBeforeComplete},{name:"editText",serializationProperty:"locEditText",visibleIf:e=>e.showPreviewBeforeComplete},{name:"requiredMark",default:"*",alternativeName:"requiredText"},{name:"questionStartIndex",dependsOn:["showQuestionNumbers"],visibleIf:e=>!e||"off"!==e.showQuestionNumbers},{name:"questionTitlePattern",default:"numTitleRequire",dependsOn:["questionStartIndex","requiredMark"],choices:e=>e?e.getQuestionTitlePatternOptions():[]},{name:"questionTitleTemplate",visible:!1,isSerializable:!1,serializationProperty:"locQuestionTitleTemplate"},{name:"firstPageIsStartPage:boolean",default:!1,alternativeName:"firstPageIsStarted"},{name:"isSinglePage:boolean",default:!1,visible:!1,isSerializable:!1},{name:"questionsOnPageMode",default:"standard",choices:["standard","singlePage","questionPerPage","inputPerPage"]},{name:"showPreviewBeforeComplete:boolean",default:!1,onSetValue:(e,t,s)=>{e&&e.setShowPreviewBeforeComplete(t)}},{name:"previewMode",default:"allQuestions",choices:["allQuestions","answeredQuestions"],visibleIf:e=>e.showPreviewBeforeComplete},{name:"showTimer:boolean"},{name:"timeLimit:number",alternativeName:"maxTimeToFinish",default:0,minValue:0,enableIf:e=>e.showTimer},{name:"timeLimitPerPage:number",alternativeName:"maxTimeToFinishPage",default:0,minValue:0,enableIf:e=>e.showTimer},{name:"timerLocation",default:"top",choices:["top","bottom"],enableIf:e=>e.showTimer},{name:"timerInfoMode",alternativeName:"showTimerPanelMode",default:"combined",choices:["page","survey","combined"],enableIf:e=>e.showTimer},{name:"showTimerPanel",visible:!1,isSerializable:!1},{name:"widthMode",default:"auto",choices:["auto","static","responsive"]},{name:"gridLayoutEnabled:boolean",default:!1},{name:"width",visibleIf:e=>"static"===e.widthMode},{name:"fitToContainer:boolean",default:!0,visible:!1},{name:"headerView",default:"basic",choices:["basic","advanced"],visible:!1},{name:"backgroundImage:file",visible:!1},{name:"backgroundImageFit",default:"cover",choices:["auto","contain","cover"],visible:!1},{name:"backgroundImageAttachment",default:"scroll",choices:["scroll","fixed"],visible:!1},{name:"backgroundOpacity:number",minValue:0,maxValue:1,default:1,visible:!1},{name:"showBrandInfo:boolean",default:!1,visible:!1}]);class Pn extends is{getBaseType(){return"choiceitem"}get showCommentArea(){return this.getPropertyValue("showCommentArea")}set showCommentArea(e){e&&!this.supportComment&&(e=!1),this.setPropertyValue("showCommentArea",e)}get isCommentRequired(){return this.getPropertyValue("isCommentRequired")}set isCommentRequired(e){this.setPropertyValue("isCommentRequired",e)}get isCommentShowing(){return this.getPropertyValue("isCommentShowing",!1)}get locCommentPlaceholder(){return this.locCommentPlaceholderValue||this.createCommentPlaceholder(),this.locCommentPlaceholderValue}createCommentPlaceholder(){const e=new Ze(this,!0,"commentPlaceholder");e.onChanged=()=>{this.setPropertyValue("commentPlaceholder",this.locCommentPlaceholderValue.text)},this.locCommentPlaceholderValue=e}get commentPlaceholder(){return this.locCommentPlaceholder.text}set commentPlaceholder(e){this.locCommentPlaceholder.text=e}setIsCommentShowing(e){this.setPropertyValue("isCommentShowing",e)}get supportComment(){const e=this.locOwner;return!(!e||!e.supportMultipleComment)&&e.supportMultipleComment(this)}canAddPpropertyToJSON(e){return"commentPlaceholder"===e.name?!!this.locCommentPlaceholderValue:super.canAddPpropertyToJSON(e)}onLocOwnerChanged(){this.showCommentArea&&!this.supportComment&&(this.showCommentArea=!1)}}class Tn extends ts{get waitingChoicesByURL(){return!this.isChoicesLoaded&&this.hasChoicesUrl}get selectedItemValues(){return this.getPropertyValue("selectedItemValues")}set selectedItemValues(e){this.setPropertyValue("selectedItemValues",e)}constructor(e){super(e),this.isRunningChoices=!1,this.isFirstLoadChoicesFromUrl=!0,this.isUpdatingChoicesDependedQuestions=!1,this._renderedChoices=[],this.renderedChoicesAnimation=new He(this.getRenderedChoicesAnimationOptions(),e=>{this._renderedChoices=e,this.renderedChoicesChangedCallback&&this.renderedChoicesChangedCallback()},()=>this._renderedChoices),this.headItemsCount=0,this.footItemsCount=0,this.otherItemValue=this.createItemValue("other"),this.otherItem.showCommentArea=!0,this.otherItem.isCommentRequired=!0,this.noneItemValue=this.createNoneItem(xt.noneItemValue,"noneText","noneItemText"),this.refuseItemValue=this.createNoneItem(xt.refuseItemValue,"refuseText","refuseItemText"),this.dontKnowItemValue=this.createNoneItem(xt.dontKnowItemValue,"dontKnowText","dontKnowItemText"),this.createItemValues("choices"),this.registerPropertyChangedHandlers(["choices"],()=>{this.filterItems()||this.onVisibleChoicesChanged()}),this.createItemValues("customChoices"),this.registerPropertyChangedHandlers(["customChoices"],()=>{this.onVisibleChoicesChanged()}),this.registerPropertyChangedHandlers(["choicesFromQuestion","choicesFromQuestionMode","choiceValuesFromQuestion","choiceTextsFromQuestion","showNoneItem","showRefuseItem","showDontKnowItem","isUsingRestful","isMessagePanelVisible"],()=>{this.onVisibleChoicesChanged()}),this.registerPropertyChangedHandlers(["hideIfChoicesEmpty"],()=>{this.onVisibleChanged()}),this.registerPropertyChangedHandlers(["selecteditemValues"],e=>{this.onSelectedItemValuesChangedHandler(e)}),this.createNewArray("visibleChoices",()=>this.updateRenderedChoices(),()=>this.updateRenderedChoices()),this.setNewRestfulProperty();var t=this.createLocalizableString("otherText",this.otherItemValue,!0,"otherItemText");this.createLocalizableString("otherErrorText",this,!0,"otherRequiredError"),this.createLocalizableString("otherPlaceholder",this,!1,!0),this.otherItemValue.setLocText(t),this.choicesByUrl.createItemValue=e=>this.createItemValue(e),this.choicesByUrl.beforeSendRequestCallback=()=>{this.onBeforeSendRequest()},this.choicesByUrl.getResultCallback=e=>{this.onLoadChoicesFromUrl(e)},this.choicesByUrl.updateResultCallback=(e,t)=>this.survey?this.survey.updateChoicesFromServer(this,e,t):e}getType(){return"selectbase"}dispose(){super.dispose();const e=this.getQuestionWithChoices();e&&e.removeDependedQuestion(this);const t=this.commentAreaModelValues;t&&Object.keys(t).forEach(e=>{t[e].dispose()})}get otherTextAreaModel(){return this.getCommentTextAreaModel(this.otherItem)}getCommentTextAreaModel(e){const t=null==e?void 0:e.value;if(void 0===t)return null;this.commentAreaModelValues||(this.commentAreaModelValues={});const s=this.commentAreaModelValues;return s[t]||(s[t]=new Jt(this.getOtherTextAreaOptions(e))),s[t]}getOtherTextAreaOptions(e){const t={question:this,id:()=>this.getItemCommentId(e),propertyNames:[this.getCommentPropertyValue(e)],className:()=>this.cssClasses.comment,placeholder:()=>this.getCommentPlaceholder(e),isDisabledAttr:()=>this.isInputReadOnly||!1,rows:()=>this.commentAreaRows,maxLength:()=>this.getOthersMaxLength(),autoGrow:()=>this.survey&&this.survey.autoGrowComment,ariaRequired:()=>this.ariaRequired||this.a11y_input_ariaRequired,ariaLabel:()=>this.ariaLabel||this.a11y_input_ariaLabel,getTextValue:()=>this.getCommentValueCore(e),onTextAreaChange:t=>{this.onOtherValueChange(e,t)},onTextAreaInput:t=>{this.onOtherValueInput(e,t)}};return t}getCommentPlaceholder(e){if(e.commentPlaceholder)return e.commentPlaceholder;if(this.isOtherItemByValue(e))return this.otherPlaceholder;const t=this.commentPlaceholder;return new ms(e).processText(t,!0)}resetDependedQuestion(){this.choicesFromQuestion=""}get otherId(){return this.getItemCommentId(this.otherItem)}getItemCommentId(e){return this.id+"_"+e.normalizedId}getCommentElementsId(){return[this.commentId,this.otherId]}getItemValueType(){return"choiceitem"}createItemValue(e,t){const s=I.createClass(this.getItemValueType(),{value:e});return s.locOwner=this,t&&(s.text=t),s}validateElementCore(e){return!0!==e.isOnValueChanged&&this.clearIncorrectValues(),super.validateElementCore(e)}get isUsingCarryForward(){return!!this.carryForwardQuestionType}get carryForwardQuestionType(){return this.getPropertyValue("carryForwardQuestionType")}setCarryForwardQuestionType(e,t){const s=e?"select":t?"array":void 0;this.setPropertyValue("carryForwardQuestionType",s)}get isUsingRestful(){return this.getPropertyValueWithoutDefault("isUsingRestful")||!1}updateIsUsingRestful(){this.setPropertyValueDirectly("isUsingRestful",this.hasChoicesUrl)}supportGoNextPageError(){return!this.isOtherSelected||!!this.otherValue}isLayoutTypeSupported(e){return!0}localeChanged(){super.localeChanged(),"none"!==this.choicesOrder&&(this.updateVisibleChoices(),this.onVisibleChoicesChanged())}locStrsChanged(){super.locStrsChanged(),this.choicesFromUrl&&(is.locStrsChanged(this.choicesFromUrl),is.locStrsChanged(this.visibleChoices)),this.isUsingCarryForward&&is.locStrsChanged(this.visibleChoices)}updatePrevOtherErrorValue(e){const t=this.otherValue;e!==t&&(this.prevOtherErrorValue=t)}get otherValue(){return this.getStoreOthersAsComment()?this.getQuestionComment():this.otherValueCore}trimCommentValue(e){if(!(""===e||e&&""===e.toString().trim()))return e}set otherValue(e){e=this.trimCommentValue(e),this.isSettingComment||this.otherValue===e||(this.onUpdateCommentOnAutoOtherMode(e),this.updatePrevOtherErrorValue(e),this.isSettingComment=!0,this.getStoreOthersAsComment()?this.setNewComment(e):(this.otherValueCore=e,this.isOtherSelected&&!this.isRenderedValueSetting&&(this.value=this.getValueOnSettingOther(e))),this.isSettingComment=!1,this.updateChoicesDependedQuestions())}get otherValueCore(){return this.getPropertyValue("otherValue")}set otherValueCore(e){this.setPropertyValue("otherValue",e)}get otherItem(){return this.otherItemValue}get isOtherSelected(){return this.showOtherItem&&this.getHasOther(this.renderedValue)}get isNoneSelected(){return this.showNoneItem&&this.getIsItemValue(this.renderedValue,this.noneItem)}supportMultipleComment(e){return!0}isCommentShowing(e){return e&&e.showCommentArea&&this.isItemSelected(e)}getCommentValue(e){return this.isCommentShowing(e)&&this.getCommentValueCore(e)||""}setCommentValue(e,t){this.isCommentShowing(e)&&this.setCommentValueCore(e,t)}get commentPropertyValue(){return"comment"}getCommentValueCore(e){return this.isOtherItemByValue(e)?this.otherValue:this.getPropertyValue(this.getCommentPropertyValue(e),this.getCommentValueByItem(e))||""}getCommentValueByItem(e){const t=this.value;return"object"==typeof t&&t[this.commentPropertyValue]||""}setCommentValueCore(e,t){this.isOtherItemByValue(e)?this.otherValue=t:(this.setCommentPropertyValue(e,t),this.isItemSelectedCore(e)&&(this.value=t?{value:e.value,comment:t}:e.value))}setCommentPropertyValue(e,t){this.setPropertyValue(this.getCommentPropertyValue(e),t)}isOtherItemByValue(e){return e.value===this.otherItem.value}getCommentPropertyValue(e){return this.isOtherItemByValue(e)?this.getStoreOthersAsComment()?"comment":"otherValue":"other_"+e.normalizedId}get showNoneItem(){return this.getPropertyValue("showNoneItem")}set showNoneItem(e){this.setPropertyValue("showNoneItem",e)}get hasNone(){return this.showNoneItem}set hasNone(e){this.showNoneItem=e}get noneItem(){return this.noneItemValue}get noneText(){return this.getLocalizableStringText("noneText")}set noneText(e){this.setLocalizableStringText("noneText",e)}get locNoneText(){return this.getLocalizableString("noneText")}get showRefuseItem(){return this.getPropertyValue("showRefuseItem")}set showRefuseItem(e){this.setPropertyValue("showRefuseItem",e)}get refuseItem(){return this.refuseItemValue}get refuseText(){return this.getLocalizableStringText("refuseText")}set refuseText(e){this.setLocalizableStringText("refuseText",e)}get locRefuseText(){return this.getLocalizableString("refuseText")}get showDontKnowItem(){return this.getPropertyValue("showDontKnowItem")}set showDontKnowItem(e){this.setPropertyValue("showDontKnowItem",e)}get dontKnowItem(){return this.dontKnowItemValue}get dontKnowText(){return this.getLocalizableStringText("dontKnowText")}set dontKnowText(e){this.setLocalizableStringText("dontKnowText",e)}get locDontKnowText(){return this.getLocalizableString("dontKnowText")}createNoneItem(e,t,s){const n=this.createItemValue(e);n.isExclusive=!0;const i=this.createLocalizableString(t,n,!0,s);return n.setLocText(i),n}get choicesVisibleIf(){return this.getPropertyValue("choicesVisibleIf","")}set choicesVisibleIf(e){this.setPropertyValue("choicesVisibleIf",e),this.filterItems()}get choicesEnableIf(){return this.getPropertyValue("choicesEnableIf","")}set choicesEnableIf(e){this.setPropertyValue("choicesEnableIf",e),this.filterItems()}surveyChoiceItemVisibilityChange(){this.filterItems()}runConditionCore(e){super.runConditionCore(e),this.runItemsEnableCondition(e),this.runItemsCondition(e),this.choices.forEach(t=>{t.runConditionCore(e)})}isTextValue(){return!0}setDefaultIntoValue(e){!this.isValueEmpty(e)&&this.showOtherItem&&this.hasUnknownValue(e,!0)?this.setDefaultUnknownValue(e):super.setDefaultIntoValue(e)}setDefaultUnknownValue(e){this.renderedValue=this.setOtherValueIntoValue(e),this.otherValue=e}valueToData(e){return a.isValueEmpty(e)?e:Array.isArray(e)?e.length>0?e[0]:void 0:e}filterItems(){if(this.isLoadingFromJson||!this.data||this.areInvisibleElementsShowing)return!1;var e=this.getDataFilteredProperties();return this.runItemsEnableCondition(e),this.runItemsCondition(e)}runItemsCondition(e){this.setConditionalChoicesRunner();var t=this.runConditionsForItems(e);return this.filteredChoicesValue&&this.filteredChoicesValue.length===this.activeChoices.length&&(this.filteredChoicesValue=void 0),t&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues()),t}runItemsEnableCondition(e){this.setConditionalEnableChoicesRunner(),is.runEnabledConditionsForItems(this.activeChoices,this.conditionChoicesEnableIfRunner,e,(e,t)=>t&&this.onEnableItemCallBack(e))&&this.clearDisabledValues(),this.onAfterRunItemsEnableCondition()}onAfterRunItemsEnableCondition(){}onEnableItemCallBack(e){return!0}onSelectedItemValuesChangedHandler(e){var t;null===(t=this.survey)||void 0===t||t.loadedChoicesFromServer(this)}getItemIfChoicesNotContainThisValue(e,t){return this.waitingChoicesByURL?this.createItemValue(e,t):null}getSingleSelectedItem(){const e=this.selectedItemValues;if(this.isEmpty())return null;const t=this.getItemByValue(this.value);return this.onGetSingleSelectedItem(t),t||e&&this.value==e.id||this.updateSelectedItemValues(),t||e||(this.isOtherSelected?this.otherItem:this.getItemIfChoicesNotContainThisValue(this.value))}onGetSingleSelectedItem(e){}getMultipleSelectedItems(){return[]}setConditionalChoicesRunner(){const e=this.getExpressionFromSurvey("choicesVisibleIf");e?(this.conditionChoicesVisibleIfRunner||(this.conditionChoicesVisibleIfRunner=new ae(e)),this.conditionChoicesVisibleIfRunner.expression=e):this.conditionChoicesVisibleIfRunner=null}setConditionalEnableChoicesRunner(){const e=this.getExpressionFromSurvey("choicesEnableIf");e?(this.conditionChoicesEnableIfRunner||(this.conditionChoicesEnableIfRunner=new ae(e)),this.conditionChoicesEnableIfRunner.expression=e):this.conditionChoicesEnableIfRunner=null}canSurveyChangeItemVisibility(){return!!this.survey&&this.survey.canChangeChoiceItemsVisibility()}changeItemVisibility(){return this.canSurveyChangeItemVisibility()?(e,t)=>this.survey.getChoiceItemVisibility(this,e,t):null}runConditionsForItems(e){this.filteredChoicesValue=[];const t=this.changeItemVisibility();return is.runConditionsForItems(this.activeChoices,this.getFilteredChoices(),this.areInvisibleElementsShowing?null:this.conditionChoicesVisibleIfRunner,e,!this.survey||!this.survey.areInvisibleElementsShowing,(e,s)=>t?t(e,s):s)}getHasOther(e){return this.getIsItemValue(e,this.otherItem)}getIsItemValue(e,t){return e===t.value}get validatedValue(){return this.renderedValueToDataCore(this.value)}createRestful(){return new ds}setNewRestfulProperty(){this.setPropertyValue("choicesByUrl",this.createRestful()),this.choicesByUrl.owner=this,this.choicesByUrl.loadingOwner=this}get autoOtherMode(){return this.getPropertyValue("autoOtherMode")}set autoOtherMode(e){this.setPropertyValue("autoOtherMode",e)}getQuestionComment(){return this.showCommentArea?super.getQuestionComment():this.otherValueCore?this.otherValueCore:this.showCommentArea||this.getStoreOthersAsComment()?super.getQuestionComment():this.otherValueCore}selectOtherValueFromComment(e){e&&(this.prevIsOtherSelected=!0),this.value=e?this.otherItem.value:void 0}onUpdateCommentOnAutoOtherMode(e){if(!this.autoOtherMode)return;const t=this.isOtherSelected;(!t&&e||t&&!e)&&this.selectOtherValueFromComment(!!e)}getValueOnSettingOther(e){const t=this.rendredValueToData(this.renderedValue);if(this.showCommentArea||this.getStoreOthersAsComment())return t;const s=this.getItemByValue(e);if(!s||s===this.otherItem)return t;if(this.otherValueCore="",!Array.isArray(t))return e;const n=t.indexOf(this.otherItem.value);return n>-1&&t.splice(n,1),t.indexOf(e)<0&&t.push(e),t}clearValue(e){super.clearValue(e),this.selectedItemValues=void 0}get renderedValue(){return this.getPropertyValue("renderedValue",null)}set renderedValue(e){this.setRenderedValue(e,!0)}setRenderedValue(e,t){this.setPropertyValue("renderedValue",e),t&&!this.isReadOnlyAttr&&(e=this.rendredValueToData(e),this.isTwoValueEquals(e,this.value)||(this.value=e)),this.onRenderedValueChagned(t)}onRenderedValueChagned(e){this.choices.forEach(t=>this.updateItemIsCommentShowing(t,e)),this.showOtherItem&&this.updateItemIsCommentShowing(this.otherItem,e)}updateItemIsCommentShowing(e,t){if(e.showCommentArea){const s=this.isCommentShowing(e);e.setIsCommentShowing(s),!s&&t&&this.setCommentValueCore(e,void 0)}}selectItem(e){if(this.isReadOnlyAttr||!e)return;const t=this.getSingleSelectedItem();this.renderedValue=e.value,t&&t!==this.getSingleSelectedItem()&&this.onItemDeselected(t),this.onItemSelected(e)}onItemSelected(e){e.showCommentArea&&this.focusOtherComment(e)}onItemDeselected(e){e.showCommentArea&&this.setCommentValueCore(e,void 0)}setQuestionValue(e,t=!0,s=!0){this.isLoadingFromJson||this.isTwoValueEquals(this.value,e)||(this.setRenderedValue(this.rendredValueFromData(e),!1),super.setQuestionValue(e,t),this.updateChoicesDependedQuestions(),!this.showCommentArea&&s&&!this.isOtherSelected&&this.otherValue&&(this.makeCommentEmpty=!0,this.otherValueCore="",this.setPropertyValue("comment","")))}setValueCore(e){super.setValueCore(e),this.makeCommentEmpty&&(this.setCommentIntoData(""),this.makeCommentEmpty=!1)}setNewValue(e){e=this.valueFromData(e),(this.choicesByUrl.isRunning||this.choicesByUrl.isWaitingForParameters)&&this.isValueEmpty(e)||(this.cachedValueForUrlRequests=e),super.setNewValue(e)}valueFromData(e){let t=this.getItemByValue(e,this.activeChoices);return t?this.getChoiceValue(t,e,!1):super.valueFromData(e)}getChoiceValue(e,t,s){const n="object"==typeof t,i=n?t[this.commentPropertyValue]:"",r=!a.isValueEmpty(i);if(n&&e.showCommentArea&&(s||r)){const t={value:e.value};return r&&(t[this.commentPropertyValue]=i),t}return e.value}getItemByValue(e,t){const s=t||this.visibleChoices;return e&&"object"==typeof e&&!a.isValueEmpty(e.value)&&(e=e.value),is.getItemByValue(s,e)}rendredValueFromData(e){if(e&&"object"==typeof e&&!a.isValueEmpty(e.value)){const t=this.getItemByValue(e.value);t&&(this.setCommentPropertyValue(t,e[this.commentPropertyValue]),e=e.value)}return this.getStoreOthersAsComment()||!this.showOtherItem?e:this.renderedValueFromDataCore(e)}getValueFromValueWithComment(e){return e&&"object"==typeof e&&!a.isValueEmpty(e.value)?e.value:e}rendredValueToData(e){return this.getStoreOthersAsComment()?e:this.renderedValueToDataCore(e)}renderedValueFromDataCore(e){return this.hasUnknownValue(e,!0,!1)?(this.otherValue=e,this.otherItem.value):this.valueFromData(e)}renderedValueToDataCore(e){return e==this.otherItem.value&&this.needConvertRenderedOtherToDataValue()&&(e=this.otherValue),e}needConvertRenderedOtherToDataValue(){let e=this.otherValue;return!!e&&(e=e.trim(),!!e&&this.hasUnknownValue(e,!0,!1))}getIsQuestionReady(){return super.getIsQuestionReady()&&!this.waitingChoicesByURL&&!this.waitingGetChoiceDisplayValueResponse}updateSelectedItemValues(){if(this.waitingGetChoiceDisplayValueResponse||!this.survey||this.isEmpty())return;const e=this.value,t=Array.isArray(e)?e:[e];t.some(e=>!this.getItemByValue(e,this.choices))&&(this.choicesLazyLoadEnabled||this.hasChoicesUrl)&&(this.waitingGetChoiceDisplayValueResponse=!0,this.updateIsReady(),this.survey.getChoiceDisplayValue({question:this,values:t,setItems:(s,...n)=>{if(this.waitingGetChoiceDisplayValueResponse=!1,!s||!s.length)return void this.updateIsReady();const i=s.map((e,s)=>this.createItemValue(t[s],e));this.setCustomValuesIntoItems(i,n),Array.isArray(e)?this.selectedItemValues=i:this.selectedItemValues=i[0],this.updateIsReady(),this.onSelectedItemValuesUpdated()}}))}onSelectedItemValuesUpdated(){}setCustomValuesIntoItems(e,t){Array.isArray(t)&&0!==t.length&&t.forEach(t=>{const s=t.values,n=t.propertyName;if(Array.isArray(s))for(let t=0;t<e.length&&t<s.length;t++)e[t][n]=s[t]})}hasUnknownValue(e,t=!1,s=!0,n=!1){if(!Array.isArray(e))return this.hasUnknownValueItem(e,t,s,n);for(let i=0;i<e.length;i++)if(this.hasUnknownValueItem(e[i],t,s,n))return!0;return!1}hasUnknownValueItem(e,t=!1,s=!0,n=!1){if(!n&&this.isValueEmpty(e))return!1;if(t&&e==this.otherItem.value)return!1;if(this.showNoneItem&&e==this.noneItem.value)return!1;if(this.showRefuseItem&&e==this.refuseItem.value)return!1;if(this.showDontKnowItem&&e==this.dontKnowItem.value)return!1;var i=s?this.getFilteredChoices():this.activeChoices;return null==this.getItemByValue(e,i)}isValueDisabled(e){var t=this.getItemByValue(e,this.getFilteredChoices());return!!t&&!t.isEnabled}endLoadingFromJson(){super.endLoadingFromJson(),this.updateVisibleChoices()}get customChoices(){return this.getPropertyValue("customChoices")}set customChoices(e){this.setPropertyValue("customChoices",e)}get choicesByUrl(){return this.getPropertyValue("choicesByUrl")}set choicesByUrl(e){e&&(this.setNewRestfulProperty(),this.choicesByUrl.fromJSON(e.toJSON()))}get choices(){return this.getPropertyValue("choices")}set choices(e){this.setPropertyValue("choices",e)}get choicesFromQuestion(){return this.getPropertyValue("choicesFromQuestion")}set choicesFromQuestion(e){var t=this.getQuestionWithChoices();this.isLockVisibleChoices=!!t&&t.name===e,t&&t.name!==e&&(t.removeDependedQuestion(this),this.isInDesignMode&&!this.isLoadingFromJson&&e&&this.setPropertyValue("choicesFromQuestion",void 0)),this.setPropertyValue("choicesFromQuestion",e),this.isLockVisibleChoices=!1}get choicesFromQuestionMode(){return this.getPropertyValue("choicesFromQuestionMode")}set choicesFromQuestionMode(e){this.setPropertyValue("choicesFromQuestionMode",e)}get choiceValuesFromQuestion(){return this.getPropertyValue("choiceValuesFromQuestion")}set choiceValuesFromQuestion(e){this.setPropertyValue("choiceValuesFromQuestion",e)}get choiceTextsFromQuestion(){return this.getPropertyValue("choiceTextsFromQuestion")}set choiceTextsFromQuestion(e){this.setPropertyValue("choiceTextsFromQuestion",e)}get hideIfChoicesEmpty(){return this.getPropertyValue("hideIfChoicesEmpty")}set hideIfChoicesEmpty(e){this.setPropertyValue("hideIfChoicesEmpty",e)}get keepIncorrectValues(){return this.getPropertyValue("keepIncorrectValues",!1)}set keepIncorrectValues(e){this.setPropertyValue("keepIncorrectValues",e)}get storeOthersAsComment(){return this.getPropertyValue("storeOthersAsComment")}set storeOthersAsComment(e){this.setPropertyValue("storeOthersAsComment",e)}get choicesOrder(){return this.getPropertyValue("choicesOrder")}set choicesOrder(e){(e=e.toLowerCase())!=this.choicesOrder&&(this.setPropertyValue("choicesOrder",e),this.onVisibleChoicesChanged())}get otherText(){return this.getLocalizableStringText("otherText")}set otherText(e){this.setLocalizableStringText("otherText",e),this.onVisibleChoicesChanged()}get locOtherText(){return this.getLocalizableString("otherText")}get separateSpecialChoices(){return this.getPropertyValue("separateSpecialChoices")}set separateSpecialChoices(e){this.setPropertyValue("separateSpecialChoices",e)}get otherPlaceholder(){return this.getLocalizableStringText("otherPlaceholder")}set otherPlaceholder(e){this.setLocalizableStringText("otherPlaceholder",e)}get locOtherPlaceholder(){return this.getLocalizableString("otherPlaceholder")}get otherPlaceHolder(){return this.otherPlaceholder}set otherPlaceHolder(e){this.otherPlaceholder=e}get otherErrorText(){return this.getLocalizableStringText("otherErrorText")}set otherErrorText(e){this.setLocalizableStringText("otherErrorText",e)}get locOtherErrorText(){return this.getLocalizableString("otherErrorText")}get visibleChoices(){return this.getPropertyValue("visibleChoices")}get enabledChoices(){for(var e=[],t=this.visibleChoices,s=0;s<t.length;s++)t[s].isEnabled&&e.push(t[s]);return e}updateVisibleChoices(){if(this.isLoadingFromJson||this.isDisposed)return;var e=this.calcVisibleChoices(),t=new Array;(e||[]).forEach(e=>t.push(e));const s=this.visibleChoices;this.isTwoValueEquals(s,t)&&!this.choicesLazyLoadEnabled||(this.setArrayPropertyDirectly("visibleChoices",t),this.updateRenderedChoices())}calcVisibleChoices(){let e=new Array;return this.customChoices.forEach(t=>e.push(t)),this.getFilteredChoices().forEach(t=>e.push(t)),e=this.sortArrayByChoicesOrder(e),this.addToVisibleChoices(e,this.isAddDefaultItems),e}setCanShowOptionItemCallback(e){this.canShowOptionItemCallback=e,e&&this.onVisibleChoicesChanged()}get newItem(){return this.newItemValue}addToVisibleChoices(e,t){this.headItemsCount=0,this.footItemsCount=0,this.isEmptyActiveChoicesInDesign||this.addNewItemToVisibleChoices(e,t);const s=new Array;this.addNonChoicesItems(s,t),s.sort((e,t)=>e.index===t.index?0:e.index<t.index?-1:1);for(let t=0;t<s.length;t++){const n=s[t];n.index<0?(e.splice(t,0,n.item),this.headItemsCount++):(e.push(n.item),this.footItemsCount++)}}addNewItemToVisibleChoices(e,t){t&&(this.newItemValue||(this.newItemValue=this.createItemValue("newitem"),this.newItemValue.isGhost=!0,this.newItemValue.registerFunctionOnPropertyValueChanged("isVisible",()=>{this.updateVisibleChoices()})),this.newItemValue.isVisible&&!this.isUsingCarryForward&&this.canShowOptionItem(this.newItemValue,t,!1)&&(this.footItemsCount=1,e.push(this.newItemValue)))}addNonChoicesItems(e,t){this.supportNone()&&this.addNonChoiceItem(e,this.noneItem,t,this.showNoneItem,xt.specialChoicesOrder.noneItem),this.supportRefuse()&&this.addNonChoiceItem(e,this.refuseItem,t,this.showRefuseItem,xt.specialChoicesOrder.refuseItem),this.supportDontKnow()&&this.addNonChoiceItem(e,this.dontKnowItem,t,this.showDontKnowItem,xt.specialChoicesOrder.dontKnowItem),this.supportOther()&&this.addNonChoiceItem(e,this.otherItem,t,this.showOtherItem,xt.specialChoicesOrder.otherItem)}addNonChoiceItem(e,t,s,n,i){this.canShowOptionItem(t,s,n)&&i.forEach(s=>e.push({index:s,item:t}))}canShowOptionItem(e,t,s){let n=t&&(!this.canShowOptionItemCallback||this.canShowOptionItemCallback(e))||s;return this.canSurveyChangeItemVisibility()?this.changeItemVisibility()(e,n):n}isItemInList(e){return e===this.otherItem?this.showOtherItem:e===this.noneItem?this.showNoneItem:e===this.refuseItem?this.showRefuseItem:e===this.dontKnowItem?this.showDontKnowItem:e!==this.newItemValue}get isAddDefaultItems(){return xt.showDefaultItemsInCreator&&this.isInDesignMode&&!this.customWidget}getPlainData(e={includeEmpty:!0,includeQuestionTypes:!1}){var t=super.getPlainData(e);if(t){var s=Array.isArray(this.value)?this.value:[this.value];t.isNode=!0,t.data=(t.data||[]).concat(s.map((t,s)=>{var n=this.getItemByValue(t),i={name:s,title:this.getLocalizationString("choices_Choice"),value:t,displayValue:this.getChoicesDisplayValue(this.visibleChoices,t),getString:e=>"object"==typeof e?JSON.stringify(e):e,isNode:!1};return n&&(e.calculations||[]).forEach(e=>{i[e.propertyName]=n[e.propertyName]}),this.isOtherSelected&&this.otherItemValue===n&&(i.isOther=!0,i.displayValue=this.otherValue),i}))}return t}getDisplayValueCore(e,t){return t=this.getValueFromValueWithComment(t),this.useDisplayValuesInDynamicTexts?this.getChoicesDisplayValue(this.visibleChoices,t):t}getDisplayValueEmpty(){return is.getTextOrHtmlByValue(this.visibleChoices,void 0)}getChoicesDisplayValue(e,t){if(t==this.otherItemValue.value)return this.otherValue?this.otherValue:this.locOtherText.textOrHtml;const s=this.getSingleSelectedItem();if(s&&this.isTwoValueEquals(s.value,t))return s.locText.textOrHtml;var n=is.getTextOrHtmlByValue(e,t);return""==n&&t?t:n}getDisplayArrayValue(e,t,s){var n=this.visibleChoices,i=[];const r=[];for(var o=0;o<t.length;o++)r.push(s?s(o):t[o]);if(a.isTwoValueEquals(this.value,r)&&this.getMultipleSelectedItems().forEach((e,t)=>i.push(this.getItemDisplayValue(e,r[t]))),0===i.length)for(o=0;o<r.length;o++){let e=this.getChoicesDisplayValue(n,r[o]);e&&i.push(e)}return i.join(xt.choicesSeparator)}getItemDisplayValue(e,t){if(e===this.otherItem){if(this.showOtherItem&&this.showCommentArea&&t)return t;if(this.comment)return this.comment}return e.locText.textOrHtml}getFilteredChoices(){return this.filteredChoicesValue?this.filteredChoicesValue:this.activeChoices}get activeChoices(){const e=this.getCarryForwardQuestion();return"select"===this.carryForwardQuestionType?(e.addDependedQuestion(this),this.getChoicesFromSelectQuestion(e)):"array"===this.carryForwardQuestionType?(e.addDependedQuestion(this),this.getChoicesFromArrayQuestion(e)):this.isEmptyActiveChoicesInDesign?[]:this.choicesFromUrl?this.choicesFromUrl:this.getChoices()}get isMessagePanelVisible(){return this.getPropertyValue("isMessagePanelVisible",!1)}set isMessagePanelVisible(e){this.setPropertyValue("isMessagePanelVisible",e)}get isEmptyActiveChoicesInDesign(){return this.isInDesignMode&&(this.hasChoicesUrl||this.isMessagePanelVisible)}getCarryForwardQuestion(e){const t=this.findCarryForwardQuestion(e),s=this.getQuestionWithChoicesCore(t),n=s?null:this.getQuestionWithArrayValue(t);return this.setCarryForwardQuestionType(!!s,!!n),s||n?t:null}getIsReadyDependsOn(){const e=super.getIsReadyDependsOn();return this.carryForwardQuestion&&e.push(this.carryForwardQuestion),e}getQuestionWithChoices(){return this.getQuestionWithChoicesCore(this.findCarryForwardQuestion())}findCarryForwardQuestion(e){var t;return e||(e=this.data||(null===(t=this.parentQuestion)||void 0===t?void 0:t.data)),this.carryForwardQuestion=null,this.choicesFromQuestion&&e&&(this.carryForwardQuestion=e.findQuestionByName(this.choicesFromQuestion)),this.carryForwardQuestion}getQuestionWithChoicesCore(e){return e&&e.visibleChoices&&I.isDescendantOf(e.getType(),"selectbase")&&e!==this?e:null}getQuestionWithArrayValue(e){return e&&e.isValueArray?e:null}getChoicesFromArrayQuestion(e){if(this.isInDesignMode)return[];const t=e.value;if(!Array.isArray(t))return[];const s=[];for(var n=0;n<t.length;n++){const e=t[n];if(!a.isValueObject(e))continue;const i=this.getValueKeyName(e);if(i&&!this.isValueEmpty(e[i])){const t=this.choiceTextsFromQuestion?e[this.choiceTextsFromQuestion]:void 0;s.push(this.createItemValue(e[i],t))}}return s}getValueKeyName(e){if(this.choiceValuesFromQuestion)return this.choiceValuesFromQuestion;const t=Object.keys(e);return t.length>0?t[0]:void 0}getChoicesFromSelectQuestion(e){if(this.isInDesignMode)return[];const t=[];var s="selected"==this.choicesFromQuestionMode||"unselected"!=this.choicesFromQuestionMode&&void 0;const n=e.visibleChoices;for(var i=0;i<n.length;i++)if(!e.isBuiltInChoice(n[i]))if(void 0!==s){var r=e.isItemSelected(n[i]);(r&&s||!r&&!s)&&t.push(this.copyChoiceItem(n[i]))}else t.push(this.copyChoiceItem(n[i]));return"selected"===this.choicesFromQuestionMode&&!this.showOtherItem&&e.isOtherSelected&&e.otherValue&&t.push(this.createItemValue(e.otherItem.value,e.otherValue)),t}copyChoiceItem(e){const t=this.createItemValue(e.value);return t.setData(e),t}get hasActiveChoices(){var e=this.visibleChoices;e&&0!=e.length||(this.onVisibleChoicesChanged(),e=this.visibleChoices);for(var t=0;t<e.length;t++)if(!this.isBuiltInChoice(e[t]))return!0;return!1}isBuiltInChoice(e){return[this.otherItem,this.noneItem,this.refuseItem,this.dontKnowItem,this.newItemValue].indexOf(e)>-1}isNoneItem(e){return!0===e.isExclusive}getChoices(){return this.choices}get showOtherItem(){return this.getPropertyValue("showOtherItem",!1)}set showOtherItem(e){this.supportOther()&&this.showOtherItem!=e&&(this.setPropertyValue("showOtherItem",e),this.onVisibleChoicesChanged())}get hasOther(){return this.showOtherItem}set hasOther(e){this.showOtherItem=e}get requireUpdateCommentValue(){return this.showCommentArea||this.showOtherItem}supportOther(){return this.isSupportProperty("showOtherItem")}supportNone(){return this.isSupportProperty("showNoneItem")}supportRefuse(){return this.isSupportProperty("showRefuseItem")}supportDontKnow(){return this.isSupportProperty("showDontKnowItem")}isSupportProperty(e){return!this.isDesignMode||this.getPropertyByName(e).visible}onCheckForErrors(e,t,s){if(super.onCheckForErrors(e,t,s),this.hasEmptyComments()&&(!t||this.prevOtherErrorValue)){const t=new Rt(this.otherErrorText,this);t.onUpdateErrorTextCallback=e=>{e.text=this.otherErrorText},e.push(t)}}hasEmptyComments(){const e=this.visibleChoices;for(let t=0;t<e.length;t++){const s=e[t];if(s.isCommentRequired&&this.isCommentShowing(s)&&!this.getCommentValue(e[t]))return!0}return!1}setSurveyImpl(e,t){this.isRunningChoices=!0,super.setSurveyImpl(e,t),this.isRunningChoices=!1,this.runChoicesByUrl(),this.isAddDefaultItems&&this.updateVisibleChoices()}setSurveyCore(e){super.setSurveyCore(e),e&&this.choicesFromQuestion&&this.onVisibleChoicesChanged()}getStoreOthersAsComment(){return!this.showCommentArea&&(!!this.checkHasChoicesComments()||!0===this.storeOthersAsComment||"default"==this.storeOthersAsComment&&(null==this.survey||this.survey.storeOthersAsComment)||this.hasChoicesUrl&&!this.choicesFromUrl)}checkHasChoicesComments(){const e=this.choices;for(let t=0;t<e.length;t++)if(e[t].showCommentArea)return!0;return!1}onSurveyLoad(){this.runChoicesByUrl(),this.onVisibleChoicesChanged(),super.onSurveyLoad()}onAnyValueChanged(e,t){super.onAnyValueChanged(e,t),e!=this.getValueName()&&this.runChoicesByUrl();const s=this.choicesFromQuestion;e&&s&&(e===s||t===s)&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues())}updateValueFromSurvey(e,t){var s="";this.showOtherItem&&this.activeChoices.length>0&&!this.isRunningChoices&&!this.choicesByUrl.isRunning&&this.getStoreOthersAsComment()&&(this.hasUnknownValue(e)&&!this.getHasOther(e)?(s=this.getCommentFromValue(e),e=this.setOtherValueIntoValue(e)):this.data&&(s=this.data.getComment(this.getValueName()))),super.updateValueFromSurvey(e,t),!this.isRunningChoices&&!this.choicesByUrl.isRunning||this.isEmpty()||(this.cachedValueForUrlRequests=this.value),s&&this.setNewComment(s)}getCommentFromValue(e){return e}setOtherValueIntoValue(e){return this.otherItem.value}onOtherValueInput(e,t){this.isInputTextUpdate&&t.target&&this.setCommentValueCore(e,t.target.value)}onOtherValueChange(e,t){var s;this.setCommentValueCore(e,((null===(s=t.target)||void 0===s?void 0:s.value)||"").trim());const n=this.getCommentValueCore(e);n!==t.target.value&&(t.target.value=n||"")}runChoicesByUrl(){if(this.updateIsUsingRestful(),this.choicesByUrl&&!this.isLoadingFromJson&&!this.isRunningChoices&&!this.isInDesignMode){var e=this.surveyImpl?this.surveyImpl.getTextProcessor():this.textProcessor;e||(e=this.survey),e&&(this.updateIsReady(),this.isRunningChoices=!0,this.choicesByUrl.run(e),this.isRunningChoices=!1)}}onBeforeSendRequest(){!0!==xt.web.disableQuestionWhileLoadingChoices||this.isReadOnly||(this.enableOnLoadingChoices=!0,this.readOnly=!0)}onLoadChoicesFromUrl(e){this.enableOnLoadingChoices&&(this.readOnly=!1);const t=[];this.isReadOnly||this.choicesByUrl&&this.choicesByUrl.error&&t.push(this.choicesByUrl.error);var s=null,n=!0;this.isFirstLoadChoicesFromUrl&&!this.cachedValueForUrlRequests&&this.defaultValue&&(this.cachedValueForUrlRequests=this.defaultValue,n=!1),this.isValueEmpty(this.cachedValueForUrlRequests)&&(this.cachedValueForUrlRequests=this.value);var i=this.createCachedValueForUrlRequests(this.cachedValueForUrlRequests,n);if(e&&(e.length>0||this.choicesByUrl.allowEmptyResponse)&&(s=new Array,is.setData(s,e)),s)for(var r=0;r<s.length;r++)s[r].locOwner=this;this.setChoicesFromUrl(s,t,i)}canAvoidSettChoicesFromUrl(e){return!this.isFirstLoadChoicesFromUrl&&(!((!e||Array.isArray(e)&&0===e.length)&&!this.isEmpty())&&a.isTwoValueEquals(this.choicesFromUrl,e))}setChoicesFromUrl(e,t,s){if(!this.canAvoidSettChoicesFromUrl(e)){if(this.isFirstLoadChoicesFromUrl=!1,this.choicesFromUrl=e,this.filterItems(),this.onVisibleChoicesChanged(),e){var n=this.updateCachedValueForUrlRequests(s,e);if(n&&!this.isReadOnly){var i=!this.isTwoValueEquals(this.value,n.value);try{this.isValueEmpty(n.value)||(this.allowNotifyValueChanged=!1,this.setQuestionValue(void 0,!0,!1)),this.allowNotifyValueChanged=i,i?this.value=n.value:this.setQuestionValue(n.value)}finally{this.allowNotifyValueChanged=!0}}}this.isReadOnly||e||this.isFirstLoadChoicesFromUrl||(this.value=null),this.errors=t,this.choicesLoaded()}}createCachedValueForUrlRequests(e,t){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var s=[],n=0;n<e.length;n++)s.push(this.createCachedValueForUrlRequests(e[n],!0));return s}return{value:e,isExists:!t||!this.hasUnknownValue(e)}}updateCachedValueForUrlRequests(e,t){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var s=[],n=0;n<e.length;n++){var i=this.updateCachedValueForUrlRequests(e[n],t);if(i&&!this.isValueEmpty(i.value)){var r=i.value;(a=this.getItemByValue(i.value,t))&&(r=a.value),s.push(r)}}return{value:s}}var a,o=e.isExists&&this.hasUnknownValue(e.value)?null:e.value;return(a=this.getItemByValue(o,t))&&(o=a.value),{value:o}}updateChoicesDependedQuestions(){this.isLoadingFromJson||this.isUpdatingChoicesDependedQuestions||!this.allowNotifyValueChanged||this.choicesByUrl.isRunning||(this.isUpdatingChoicesDependedQuestions=!0,this.updateDependedQuestions(),this.isUpdatingChoicesDependedQuestions=!1)}updateDependedQuestion(){this.onVisibleChoicesChanged(),this.clearIncorrectValues()}onSurveyValueChanged(e){super.onSurveyValueChanged(e),this.updateChoicesDependedQuestions()}onVisibleChoicesChanged(){this.isLoadingFromJson||this.isLockVisibleChoices||(this.updateVisibleChoices(),this.renderedValue===this.otherItem.value&&this.setRenderedValue(this.rendredValueFromData(this.value),!1),this.onVisibleChanged(),this.visibleChoicesChangedCallback&&this.visibleChoicesChangedCallback(),this.updateChoicesDependedQuestions())}isVisibleCore(){const e=super.isVisibleCore();if(!this.hideIfChoicesEmpty||!e)return e;var t=this.isUsingCarryForward?this.visibleChoices:this.getFilteredChoices();return!t||t.length>0}sortArrayByChoicesOrder(e){const t=e.slice();if(this.isInDesignMode)return t;const s=this.choicesOrder.toLowerCase();return"asc"==s?this.sortArray(t,1):"desc"==s?this.sortArray(t,-1):"random"==s?this.randomizeArray(t):t}sortArray(e,t){return e.sort(function(e,s){return a.compareStrings(e.calculatedText,s.calculatedText)*t})}randomizeArray(e){return a.randomizeArray(e)}get hasChoicesUrl(){return this.choicesByUrl&&!!this.choicesByUrl.url}clearIncorrectValues(){this.canClearIncorrectValues()&&this.hasValueToClearIncorrectValues()&&(this.clearIncorrectValuesCallback?this.clearIncorrectValuesCallback():this.clearIncorrectValuesCore())}canClearIncorrectValues(){return!(this.canAddCustomChoices()||this.carryForwardQuestion&&!this.carryForwardQuestion.isReady||this.survey&&this.survey.questionsByValueName(this.getValueName()).length>1||this.hasChoicesUrl&&(!this.choicesFromUrl||0==this.choicesFromUrl.length))}canAddCustomChoices(){return!1}hasValueToClearIncorrectValues(){return!(this.survey&&this.survey.keepIncorrectValues||this.keepIncorrectValues||this.isEmpty())}clearValueIfInvisibleCore(e){super.clearValueIfInvisibleCore(e),this.clearIncorrectValues()}isItemSelected(e){return e===this.otherItem?this.isOtherSelected:this.isItemSelectedCore(e)}isItemSelectedCore(e){return e.value===this.renderedValue}clearDisabledValues(){this.survey&&this.survey.clearDisabledChoices&&this.clearDisabledValuesCore()}clearIncorrectValuesCore(){var e=this.value;this.canClearValueAnUnknown(e)&&this.clearValue(!0)}canClearValueAnUnknown(e){return!(!this.getStoreOthersAsComment()&&this.isOtherSelected)&&this.hasUnknownValue(e,!0,!0,!0)}clearDisabledValuesCore(){this.isValueDisabled(this.value)&&this.clearValue(!0)}clearUnusedValues(){super.clearUnusedValues(),this.isOtherValueUnused()&&(this.otherValue="")}isOtherValueUnused(){return!this.isOtherSelected}getColumnClass(){return(new fe).append(this.cssClasses.column).append("sv-q-column-"+this.colCount,this.hasColumns).toString()}getItemIndex(e){return this.visibleChoices.indexOf(e)}getItemClass(e){const t={item:e};var s=this.getItemClassCore(e,t);return t.css=s,this.survey&&this.survey.updateChoiceItemCss(this,t),t.css}getCurrentColCount(){return this.colCount}getItemClassCore(e,t){const s=(new fe).append(this.cssClasses.item).append(this.cssClasses.itemInline,!this.hasColumns&&0===this.colCount).append("sv-q-col-"+this.getCurrentColCount(),!this.hasColumns&&0!==this.colCount).append(this.cssClasses.itemOnError,this.hasCssError()),n=this.getIsDisableAndReadOnlyStyles(!e.isEnabled),i=n[0],r=n[1],a=this.isItemSelected(e),o=!(r||a||this.survey&&this.survey.isDesignMode),l=e===this.noneItem;return t.isDisabled=r||i,t.isChecked=a,t.isNone=l,s.append(this.cssClasses.itemDisabled,r).append(this.cssClasses.itemReadOnly,i).append(this.cssClasses.itemPreview,this.isPreviewStyle).append(this.cssClasses.itemChecked,a).append(this.cssClasses.itemHover,o).append(this.cssClasses.itemNone,l).toString()}getLabelClass(e){return(new fe).append(this.cssClasses.label).append(this.cssClasses.labelChecked,this.isItemSelected(e)).toString()}getControlLabelClass(e){return(new fe).append(this.cssClasses.controlLabel).append(this.cssClasses.controlLabelChecked,this.isItemSelected(e)).toString()||void 0}updateRenderedChoices(){this.renderedChoices=this.onGetRenderedChoicesCallback?this.onGetRenderedChoicesCallback(this.visibleChoices):this.visibleChoices}getRenderedChoicesAnimationOptions(){return{isAnimationEnabled:()=>this.animationAllowed,getRerenderEvent:()=>this.onElementRerendered,getKey:e=>e!=this.newItemValue?e.value:this.newItemValue,getLeaveOptions:e=>{let t=this.cssClasses.itemLeave;if(this.hasColumns){const s=this.bodyItems.indexOf(e);-1!==s&&s!==this.bodyItems.length-1&&(t="")}return{cssClass:t,onBeforeRunAnimation:bt,onAfterRunAnimation:yt}},getAnimatedElement:e=>e.getRootElement(),getEnterOptions:e=>{let t=this.cssClasses.itemEnter;if(this.hasColumns){const s=this.bodyItems.indexOf(e);-1!==s&&s!==this.bodyItems.length-1&&(t="")}return{cssClass:t,onBeforeRunAnimation:t=>{if(0==this.getCurrentColCount()&&this.bodyItems.indexOf(e)>=0){const e=t.parentElement.firstElementChild.offsetLeft;t.offsetLeft>e&&ft(t,{moveAnimationDuration:"0s",fadeAnimationDelay:"0s"},"--")}bt(t)},onAfterRunAnimation:yt}}}}get renderedChoices(){return this._renderedChoices}set renderedChoices(e){this.renderedChoicesAnimation.sync(e)}get headItems(){const e=this.separateSpecialChoices||this.isInDesignMode?this.headItemsCount:0,t=[];for(let s=0;s<e;s++)this.renderedChoices[s]&&t.push(this.renderedChoices[s]);return t}get footItems(){const e=this.separateSpecialChoices||this.isInDesignMode?this.footItemsCount:0,t=[],s=this.renderedChoices;for(let n=0;n<e;n++)this.renderedChoices[s.length-e+n]&&t.push(this.renderedChoices[s.length-e+n]);return t}get dataChoices(){return this.renderedChoices.filter(e=>!this.isBuiltInChoice(e))}get bodyItems(){return this.hasHeadItems||this.hasFootItems?this.dataChoices:this.renderedChoices}get hasHeadItems(){return this.headItems.length>0}get hasFootItems(){return this.footItems.length>0}get itemFlowDirection(){return xt.itemFlowDirection}get columns(){if(!this.hasColumns||0===this.renderedChoices.length)return[];const e=this.getCurrentColCount();let t=this.separateSpecialChoices||this.isInDesignMode?this.dataChoices:this.renderedChoices;return"column"===this.itemFlowDirection?this.getColumnsWithColumnItemFlow(t,e):this.getColumnsWithRowItemFlow(t,e)}getColumnsWithColumnItemFlow(e,t){const s=[];let n=Math.floor(e.length/t);e.length%t&&(n+=1);let i=e.length,r=t,a=0;for(let o=0;o<t;o++){const t=[];for(let s=0;s<n;s++){i<=r&&(n=1);const o=e[s+a];o&&(t.push(o),i--)}s.push(t),r--,a+=t.length}return s}getColumnsWithRowItemFlow(e,t){const s=[];for(let n=0;n<t;n++){const i=[];for(let s=n;s<e.length;s+=t)i.push(e[s]);s.push(i)}return s}getItemsColumnKey(e){return(e||[]).map(e=>e.value||"").join("")}get hasColumns(){return!this.isMobile&&this.getCurrentColCount()>1}get rowLayout(){return 0==this.getCurrentColCount()&&!(this.hasFootItems||this.hasHeadItems)}get blockedRow(){return 0==this.getCurrentColCount()&&(this.hasFootItems||this.hasHeadItems)}choicesLoaded(){this.isChoicesLoaded=!0,this.updateIsReady(),this.survey&&this.survey.loadedChoicesFromServer(this),this.loadedChoicesFromServerCallback&&this.loadedChoicesFromServerCallback()}getItemValueWrapperComponentName(e){const t=this.survey;return t?t.getItemValueWrapperComponentName(e,this):In.TemplateRendererComponentName}getItemValueWrapperComponentData(e){const t=this.survey;return t?t.getItemValueWrapperComponentData(e,this):e}ariaItemChecked(e){return this.renderedValue===e.value?"true":"false"}isOtherItem(e){return this.showOtherItem&&e.value==this.otherItem.value}get itemSvgIcon(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId}getSelectBaseRootCss(){return(new fe).append(this.getQuestionRootCss()).append(this.cssClasses.rootRow,this.rowLayout).toString()}allowMobileInDesignMode(){return!0}getAriaItemLabel(e){return e.locText.renderedHtml}getItemId(e){return this.inputId+"_"+this.getItemIndex(e)}get questionName(){return this.name+"_"+this.id}getItemEnabled(e){return!this.isDisabledAttr&&e.isEnabled}focusOtherComment(e){var t;this.autoOtherMode||We.FocusElement(this.getItemCommentId(e),!1,null===(t=this.survey)||void 0===t?void 0:t.rootElement)}getDefaultItemComponent(){return""}get itemComponent(){return this.getPropertyValue("itemComponent",this.getDefaultItemComponent())}set itemComponent(e){this.setPropertyValue("itemComponent",e)}}me([c()],Tn.prototype,"_renderedChoices",void 0);class En extends Tn{constructor(e){super(e)}get colCount(){return this.getPropertyValue("colCount",this.isFlowLayout?0:void 0)}set colCount(e){e<0||e>5||this.isFlowLayout||(this.setPropertyValue("colCount",e),this.fireCallback(this.colCountChangedCallback))}onParentChanged(){super.onParentChanged(),this.isFlowLayout&&this.setPropertyValue("colCount",null)}onParentQuestionChanged(){this.onVisibleChoicesChanged()}getSearchableItemValueKeys(e){e.push("choices")}}function Rn(e,t){var s;if(!e)return!1;if(e.templateQuestion){const t=null===(s=e.colOwner)||void 0===s?void 0:s.data;if(!(e=e.templateQuestion).getCarryForwardQuestion(t))return!1}return e.carryForwardQuestionType===t}I.addClass("choiceitem",[{name:"showCommentArea:boolean",locationInTable:"detail",visibleIf:e=>e.supportComment},{name:"isCommentRequired:boolean",locationInTable:"detail",visibleIf:e=>e.showCommentArea},{name:"commentPlaceholder",locationInTable:"detail",serializationProperty:"locCommentPlaceholder",visibleIf:e=>e.showCommentArea}],e=>new Pn(e),"itemvalue"),I.addClass("selectbase",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},"choicesFromQuestion:question_carryforward",{name:"choices:choiceitem[]",uniqueProperty:"value",baseValue:function(){return l("choices_Item")},dependsOn:"choicesFromQuestion",visibleIf:e=>!e.choicesFromQuestion},{name:"choicesFromQuestionMode",default:"all",choices:["all","selected","unselected"],dependsOn:"choicesFromQuestion",visibleIf:e=>Rn(e,"select")},{name:"choiceValuesFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:e=>Rn(e,"array")},{name:"choiceTextsFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:e=>Rn(e,"array")},{name:"choicesOrder",default:"none",choices:["none","asc","desc","random"],dependsOn:"choicesFromQuestion",visibleIf:e=>!e.choicesFromQuestion},{name:"choicesByUrl:restfull",className:"choicesByUrl",onGetValue:function(e){return e.choicesByUrl.getData()},onSetValue:function(e,t){e.choicesByUrl.setData(t)}},"hideIfChoicesEmpty:boolean","choicesVisibleIf:condition",{name:"choicesEnableIf:condition",dependsOn:"choicesFromQuestion",visibleIf:e=>!e.choicesFromQuestion},{name:"defaultValue:value",visibleIf:e=>!e.choicesFromQuestion,dependsOn:"choicesFromQuestion"},{name:"correctAnswer:value",visibleIf:e=>!e.choicesFromQuestion,dependsOn:"choicesFromQuestion"},{name:"separateSpecialChoices:boolean",visible:!1},{name:"showOtherItem:boolean",alternativeName:"hasOther"},{name:"showNoneItem:boolean",alternativeName:"hasNone"},{name:"showRefuseItem:boolean",visible:!1,version:"1.9.128"},{name:"showDontKnowItem:boolean",visible:!1,version:"1.9.128"},{name:"otherPlaceholder",alternativeName:"otherPlaceHolder",serializationProperty:"locOtherPlaceholder",dependsOn:"showOtherItem",visibleIf:function(e){return e.showOtherItem}},{name:"noneText",serializationProperty:"locNoneText",dependsOn:"showNoneItem",visibleIf:function(e){return e.showNoneItem}},{name:"refuseText",serializationProperty:"locRefuseText",dependsOn:"showRefuseItem",visibleIf:function(e){return e.showRefuseItem}},{name:"dontKnowText",serializationProperty:"locDontKnowText",dependsOn:"showDontKnowItem",visibleIf:function(e){return e.showDontKnowItem}},{name:"otherText",serializationProperty:"locOtherText",dependsOn:"showOtherItem",visibleIf:function(e){return e.showOtherItem}},{name:"otherErrorText",serializationProperty:"locOtherErrorText",dependsOn:"showOtherItem",visibleIf:function(e){return e.showOtherItem}},{name:"storeOthersAsComment",default:"default",choices:["default",!0,!1],visible:!1}],null,"question"),I.addClass("checkboxbase",[{name:"colCount:number",default:1,choices:[0,1,2,3,4,5],layout:"row"}],null,"selectbase");class kn extends he{get focusFirstInputSelector(){return this.getFocusFirstInputSelector()}getFocusFirstInputSelector(){return Pe?this.isValueEmpty(this.question.value)?this.itemSelector:this.selectedItemSelector:!this.listModel.showFilter&&this.question.value?this.selectedItemSelector:""}resetItemsSettings(){this.itemsSettings.skip=0,this.itemsSettings.take=Math.max(this.minPageSize,this.question.choicesLazyLoadPageSize),this.itemsSettings.totalCount=0,this.itemsSettings.items=[]}setItems(e,t){this.itemsSettings.items=[].concat(this.itemsSettings.items,e),this.itemsSettings.totalCount=t,this.listModel.isAllDataLoaded=this.choicesLazyLoadEnabled&&this.itemsSettings.items.length==this.itemsSettings.totalCount,this.question.choices=this.itemsSettings.items}_loadQuestionChoices(e){const t=this.filterString;this.setIsChoicesLoading(!0),this.question.survey.loadQuestionChoices({question:this.question,filter:this.filterString,skip:this.itemsSettings.skip,take:this.itemsSettings.take,setItems:(s,n)=>{this.setItems(s||[],n||0),this.popupRecalculatePosition(this.itemsSettings.skip===this.itemsSettings.take),e&&e(),this.processCustomValue(t),this.setIsChoicesLoading(!1)}}),this.itemsSettings.skip+=this.itemsSettings.take}setIsChoicesLoading(e){this.question.setIsChoicesLoading&&this.question.setIsChoicesLoading(e)}processCustomValue(e){if(!this.allowCustomChoices)return;const t=e||this.filterString;this.listModel.getVisibleActions().filter(e=>a.isTwoValueEquals(e.text,t,!1,!1))[0]?this.customValue=void 0:(this.customValue=t,this.updateItems(),this.listModel.focusFirstVisibleItem())}updateQuestionChoices(e){const t=this.itemsSettings.skip+1<this.itemsSettings.totalCount;this.itemsSettings.skip&&!t||(this.resetTimer(),this.filterString&&xt.dropdownSearchDelay>0?this.timer=setTimeout(()=>{this._loadQuestionChoices(e)},xt.dropdownSearchDelay):this._loadQuestionChoices(e))}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=void 0)}updatePopupFocusFirstInputSelector(){this._popupModel.focusFirstInputSelector=this.focusFirstInputSelector}getDropdownMenuOptions(){const e=n.getInnerWidth(),t=n.getInnerHeight(),s=function(e,t,s=600){const i=e||n.getInnerWidth(),r=t||n.getInnerHeight();return Math.min(i,r)>=s}(e,t);let i="dropdown",r="desktop";return Pe&&(i="popup",r=s?"tablet":"mobile"),{menuType:i,deviceType:r,hasTouchScreen:Pe,screenHeight:t,screenWidth:e}}checkFocusRemainsWithinComponent(e){if(!this.question.cssClasses.root||!(null==e?void 0:e.target))return!1;const t=e.target.closest(ht(this.question.cssClasses.root));return t&&t.contains(e.relatedTarget)}createButtons(){this.editorButtons=new Ce,this.editorButtons.containerCss="sd-dropdown-action-bar",this.chevronButton=new De({id:"chevron",css:"sd-editor-chevron-button",iconName:this.question.cssClasses.chevronButtonIconId||"icon-chevron",iconSize:"auto",showTitle:!1,locTitle:this.locSelectCaption,disableTabStop:!0,enabled:new de(()=>!this.question.isInputReadOnly),visible:new de(()=>!this.question.isPreviewStyle),action:e=>{this.onClick()}}),this.clearButton=new De({id:"clear",css:"sd-editor-clean-button",iconName:this.question.cssClasses.cleanButtonIconId||"icon-cancel-24x24",iconSize:"auto",showTitle:!1,locTitle:this.locClearCaption,disableTabStop:!0,enabled:new de(()=>!this.question.isInputReadOnly),visible:new de(()=>{const e=this.question.isEmpty(),t=this.question.isReadOnly;return this.question.allowClear&&!e&&!t}),action:e=>{this.onClear()}}),this.editorButtons.setItems([this.clearButton,this.chevronButton]),this.editorButtons.actions.forEach(e=>e.cssClasses={item:"sd-editor-button-item",itemIcon:"sv-editor-button-item__icon",itemPressed:"sd-editor-button-item--pressed"})}createPopup(){this._popupModel=new Re("sv-list",{model:this.listModel},{verticalPosition:"bottom",horizontalPosition:"center",showPointer:!1}),this._popupModel.displayMode=Pe?"overlay":"popup",this._popupModel.positionMode="fixed",this._popupModel.isFocusedContainer=!1,this._popupModel.isFocusedContent=Pe,this._popupModel.setWidthByTarget=!Pe,this._popupModel.locale=this.question.getLocale(),this.updatePopupFocusFirstInputSelector(),this.listModel.registerPropertyChangedHandlers(["showFilter"],()=>{this.updatePopupFocusFirstInputSelector()}),this._popupModel.onVisibilityChanged.add((e,t)=>{this.popupVisibilityChanged(t.isVisible),this.chevronButton.pressed=t.isVisible})}popupVisibilityChanged(e){if(e&&(this.listModel.renderElements=!0),e&&this.choicesLazyLoadEnabled&&(this.listModel.actions=[],this.resetItemsSettings(),this.updateQuestionChoices()),e){this.updatePopupFocusFirstInputSelector();const e=this.getDropdownMenuOptions();this.question.processOpenDropdownMenu(e),this._popupModel.updateDisplayMode(e.menuType)&&this.listModel.setSearchEnabled(this.inputAvailable&&"dropdown"!==e.menuType),this.question.onOpenedCallBack&&this.question.onOpenedCallBack()}e||this.onHidePopup(),this.ariaExpanded=e?"true":"false",this.question.processPopupVisiblilityChanged(this.popupModel,e)}setFilterStringToListModel(e){if(this.listModel.filterString=e,this.listModel.resetFocusedItem(),this.question.selectedItem&&this.question.selectedItem.text.indexOf(e)>=0)return this.listModel.focusedItem=this.getAvailableItems().filter(e=>e.id==this.question.selectedItem.value)[0],void(this.listModel.filterString&&this.listModel.actions.map(e=>e.selectedValue=!1));this.listModel.focusedItem&&this.listModel.isItemVisible(this.listModel.focusedItem)||this.listModel.focusFirstVisibleItem()}setTextWrapEnabled(e){this.listModel.textWrapEnabled=e}popupRecalculatePosition(e){setTimeout(()=>{this.popupModel.recalculatePosition(e)},1)}onHidePopup(){this.question.suggestedItem=null,this.choicesLazyLoadEnabled&&this.resetItemsSettings(),this.customValue=void 0,this.resetCustomItemValue()}getAvailableItems(){return this.allowCustomChoices?[].concat(this.question.visibleChoices,[this.customItemValue]):this.question.visibleChoices}setOnTextSearchCallbackForListModel(e){e.setOnTextSearchCallback((e,t)=>{if(e.id===this.customItemValue.id)return e.visible;if(this.filteredItems)return this.filteredItems.indexOf(e)>=0;let s=e.text.toLocaleLowerCase();s=xt.comparator.normalizeTextCallback(s,"filter");const n=s.indexOf(t.toLocaleLowerCase());return"startsWith"==this.question.searchMode?0==n:n>-1})}createListModel(){const e=this.getAvailableItems();let t=this.onSelectionChanged;t||(t=e=>{this.setQuestionValue(e),this.popupModel.hide()});const s={items:e,onSelectionChanged:t,allowSelection:!1,locOwner:this.question,elementId:this.listElementId},n=new Ee(s);return this.setOnTextSearchCallbackForListModel(n),n.renderElements=!1,n.forceShowFilter=this.question.choicesLazyLoadEnabled,n.areSameItemsCallback=(e,t)=>e===t,n}setQuestionValue(e){let t=e;this.allowCustomChoices&&e.id===this.customItemValue.id&&(t=this.createCustomItem()),t&&(this.resetFilterString(),this.question.selectItem(t),this.searchEnabled&&this.applyInputString(t))}createCustomItem(){const e=new is(this.customValue),t={item:e,question:this.question,allow:!0};return this.question.survey.createCustomChoiceItem(t),t.allow?(this.question.customChoices.push(e),this.customValue=void 0,this.updateItems(),e):(this.clear(),null)}updateAfterListModelCreated(e){e.isItemSelected=e=>!!e.selected,e.isAllDataLoaded=!this.choicesLazyLoadEnabled,e.disableSearch=this.choicesLazyLoadEnabled,e.actions.forEach(e=>e.disableTabStop=!0),e.setOnFilterStringChangedCallback(this.listModelFilterStringChanged),e.setLoadingIndicatorVisibilityObserver(e=>{e&&this.updateQuestionChoices()})}getPopupCssClasses(){return"sv-single-select-list"}updateCssClasses(e,t){this.popupModel.cssClass=(new fe).append(e).append(this.getPopupCssClasses()).toString(),this.listModel.cssClasses=t}resetFilterString(){this.filterString&&(this.filterString=void 0,this.listModel.filterString=""),this.inputString=null,this.hintString=""}clear(){this.customValue=void 0,this.resetFilterString()}onSetFilterString(){if(this.filteredItems=void 0,!this.filterString&&!this.popupModel.isVisible)return;const e={question:this.question,choices:this.getAvailableItems(),filter:this.filterString,filteredChoices:void 0};this.question.survey.onChoicesSearch.fire(this.question.survey,e),this.filteredItems=e.filteredChoices,this.filterString&&!this.popupModel.isVisible&&this.popupModel.show();const t=()=>{this.setFilterStringToListModel(this.filterString),this.filterString&&this.applyHintString(),this.popupRecalculatePosition(!0)};this.choicesLazyLoadEnabled?(this.resetItemsSettings(),this.updateQuestionChoices(t)):t()}get isAllDataLoaded(){return!!this.itemsSettings.totalCount&&this.itemsSettings.items.length==this.itemsSettings.totalCount}loadQuestionChoices(e){this.isAllDataLoaded||this._loadQuestionChoices(e)}get canShowSelectedItem(){return!this.focused||this._markdownMode||!this.searchEnabled}get needRenderInput(){return!this.question.isInputReadOnly||!!this.placeholderRendered}updateCustomItemValue(){this.customValue?(this.customItemValue.text=this.getLocalizationFormatString("createCustomItem",this.customValue),this.customItemValue.visible=!0):this.resetCustomItemValue()}resetCustomItemValue(){this.customItemValue.text="",this.customItemValue.visible=!1}get customItemValue(){return this._customItemValue||(this._customItemValue=new is("newCustomItem",this.getLocalizationFormatString("createCustomItem",this.customValue)),this._customItemValue.css="sv-list-item--custom-value"),this._customItemValue}applyInputString(e){(null==e?void 0:e.locText.hasHtml)||this.question.inputFieldComponentName?(this._markdownMode=!0,this.inputString=this.cleanHtml(null==e?void 0:e.locText.getHtmlValue()),this.hintString=""):(this.inputString=null==e?void 0:e.title,this.hintString=null==e?void 0:e.title)}cleanHtml(e){return this.htmlCleanerElement?(this.htmlCleanerElement.innerHTML=e,this.htmlCleanerElement.textContent):""}fixInputCase(){const e=this.hintStringMiddle;e&&this.inputString!=e&&(this.inputString=e)}applyHintString(){const e=this.listModel.focusedItem||this.question.selectedItem;(null==e?void 0:e.locText.hasHtml)||this.question.inputFieldComponentName?(this._markdownMode=!0,this.hintString=""):e===this.customItemValue?this.hintString="":this.hintString=null==e?void 0:e.title}get inputStringRendered(){return this.inputString||""}set inputStringRendered(e){var t;this.inputString=e,this.filterString=e,this.choicesLazyLoadEnabled||this.processCustomValue(),e&&this.searchEnabled&&(null===(t=this.listModel.focusedItem)||void 0===t?void 0:t.id)!==this.customItemValue.id||(this.hintString="")}get placeholderRendered(){return this.hintString||this.question.readOnly||!this.question.isEmpty()?"":this.inputPlaceholder}get listElementId(){return this.question.inputId+"_list"}get hintStringLC(){var e;return(null===(e=this.hintString)||void 0===e?void 0:e.toLowerCase())||""}get inputStringLC(){var e;return(null===(e=this.inputString)||void 0===e?void 0:e.toLowerCase())||""}get showHintPrefix(){return!!this.inputString&&this.hintStringLC.indexOf(this.inputStringLC)>0}get hintStringPrefix(){return this.inputString?this.hintString.substring(0,this.hintStringLC.indexOf(this.inputStringLC)):null}get showHintString(){return!!this.searchEnabled&&!(!this.hintStringLC&&!this.inputStringLC)||!this.searchEnabled&&this.hintStringLC&&this.question.isEmpty()}get hintStringSuffix(){return this.hintStringLC.indexOf(this.inputStringLC)>=0?this.hintString.substring(this.hintStringLC.indexOf(this.inputStringLC)+this.inputStringLC.length):""}get hintStringMiddle(){const e=this.hintStringLC.indexOf(this.inputStringLC);return-1==e?null:this.hintString.substring(e,e+this.inputStringLC.length)}constructor(e,t){super(),this.question=e,this.onSelectionChanged=t,this.minPageSize=25,this.loadingItemHeight=40,this.timer=void 0,this._markdownMode=!1,this.filteredItems=void 0,this.selectedItemSelector=".sv-list__item--selected",this.itemSelector=".sv-list__item",this.itemsSettings={skip:0,take:0,totalCount:0,items:[]},this.listModelFilterStringChanged=e=>{this.filterString!==e&&(this.filterString=e,this.choicesLazyLoadEnabled||this.processCustomValue())},this.questionPropertyChangedHandler=(e,t)=>{this.onPropertyChangedHandler(e,t)},this.ariaExpanded="false",this.createLocalizableString("clearCaption",this.question,!1,!0),this.createLocalizableString("selectCaption",this.question,!1,!0),this.htmlCleanerElement=i.createElement("div"),e.onPropertyChanged.add(this.questionPropertyChangedHandler),this.showInputFieldComponent=this.question.showInputFieldComponent,this.listModel=this.createListModel(),this.setChoicesLazyLoadEnabled(this.question.choicesLazyLoadEnabled),this.setInputPlaceholder(this.question.placeholder),this.updateAfterListModelCreated(this.listModel),this.setSearchEnabled(this.question.searchEnabled),this.setAllowCustomChoices(this.question.allowCustomChoices),this.setTextWrapEnabled(this.question.textWrapEnabled),this.createPopup(),this.createButtons(),this.resetItemsSettings();const s=e.cssClasses;this.updateCssClasses(s.popup,s.list)}get popupModel(){return this._popupModel}get clearCaption(){return this.getLocalizableStringText("clearCaption")}set clearCaption(e){this.setLocalizableStringText("clearCaption",e)}get locClearCaption(){return this.getLocalizableString("clearCaption")}get selectCaption(){return this.getLocalizableStringText("selectCaption")}set selectCaption(e){this.setLocalizableStringText("selectCaption",e)}get locSelectCaption(){return this.getLocalizableString("selectCaption")}get inputAvailable(){return this.searchEnabled||this.allowCustomChoices}get noTabIndex(){return this.question.isInputReadOnly||this.inputAvailable}get filterReadOnly(){return!this.filterStringEnabled||!this.focused}get filterStringEnabled(){return!this.question.isInputReadOnly&&this.inputAvailable}get inputMode(){return Pe?"none":"text"}get popupEnabled(){return!this.question.isInputReadOnly}get ariaQuestionRole(){return this.filterStringEnabled?void 0:"combobox"}get ariaQuestionRequired(){return this.ariaQuestionRole?this.question.a11y_input_ariaRequired:void 0}get ariaQuestionInvalid(){return this.ariaQuestionRole?this.question.a11y_input_ariaInvalid:void 0}get ariaQuestionErrorMessage(){return this.ariaQuestionRole?this.question.a11y_input_ariaErrormessage:void 0}get ariaQuestionLabel(){return this.ariaQuestionRole?this.question.a11y_input_ariaLabel:void 0}get ariaQuestionLabelledby(){return this.ariaQuestionRole?this.question.a11y_input_ariaLabelledBy:void 0}get ariaQuestionDescribedby(){return this.ariaQuestionRole?this.question.a11y_input_ariaDescribedBy:void 0}get ariaQuestionControls(){return this.ariaQuestionRole&&this.popupEnabled?this.listElementId:void 0}get ariaQuestionExpanded(){return this.ariaQuestionRole?this.popupEnabled?this.ariaExpanded:"false":void 0}get ariaQuestionActivedescendant(){return this.ariaQuestionRole?this.ariaActivedescendant:void 0}get ariaInputRole(){return this.filterStringEnabled?"combobox":void 0}get ariaInputRequired(){return this.ariaInputRole?this.question.a11y_input_ariaRequired:void 0}get ariaInputInvalid(){return this.ariaInputRole?this.question.a11y_input_ariaInvalid:void 0}get ariaInputErrorMessage(){return this.ariaInputRole?this.question.a11y_input_ariaErrormessage:void 0}get ariaInputLabel(){return this.ariaInputRole?this.question.a11y_input_ariaLabel:void 0}get ariaInputLabelledby(){return this.ariaInputRole?this.question.a11y_input_ariaLabelledBy:void 0}get ariaInputDescribedby(){return this.ariaInputRole?this.question.a11y_input_ariaDescribedBy:void 0}get ariaInputControls(){return this.ariaInputRole&&this.popupEnabled?this.listElementId:void 0}get ariaInputExpanded(){return this.ariaInputRole?this.popupEnabled?this.ariaExpanded:"false":void 0}get ariaInputActivedescendant(){return this.ariaInputRole?this.ariaActivedescendant:void 0}setSearchEnabled(e){this.listModel.setSearchEnabled(Pe&&(e||this.question.allowCustomChoices)),this.searchEnabled=e}setAllowCustomChoices(e){this.allowCustomChoices=e,e&&(this.searchEnabled=e)}setChoicesLazyLoadEnabled(e){this.choicesLazyLoadEnabled=e,this.listModel.disableSearch=e,this.listModel.isAllDataLoaded=!e}setInputPlaceholder(e){this.inputPlaceholder=e}updateItems(){this.listModel.setItems(this.getAvailableItems())}onClick(e){this.question.readOnly||this.question.isDesignMode||this.question.isPreviewStyle||this.question.isReadOnlyAttr||(this._popupModel.toggleVisibility(),this.focusItemOnClickAndPopup(),this.question.focusInputElement(!1))}chevronPointerDown(e){this._popupModel.isVisible&&e.preventDefault()}onPropertyChangedHandler(e,t){"value"==t.name&&(this.showInputFieldComponent=this.question.showInputFieldComponent),"textWrapEnabled"==t.name&&this.setTextWrapEnabled(t.newValue)}focusItemOnClickAndPopup(){this._popupModel.isVisible&&this.question.value&&this.changeSelectionWithKeyboard(!1)}onClear(e){this.question.clearValue(!0),this._popupModel.hide(),e&&(e.preventDefault(),e.stopPropagation())}getSelectedAction(){return this.question.selectedItem||null}changeSelectionWithKeyboard(e){var t;let s=this.listModel.focusedItem;!s&&this.question.selectedItem?is.getItemByValue(this.question.visibleChoices,this.question.value)&&(this.listModel.focusedItem=this.question.selectedItem):e?this.listModel.focusPrevVisibleItem():this.listModel.focusNextVisibleItem(),this.beforeScrollToFocusedItem(s),this.scrollToFocusedItem(),this.afterScrollToFocusedItem(),this.ariaActivedescendant=null===(t=this.listModel.focusedItem)||void 0===t?void 0:t.elementId}beforeScrollToFocusedItem(e){this.question.value&&e&&(e.selectedValue=!1,this.listModel.focusedItem.selectedValue=!this.listModel.filterString,this.question.suggestedItem=this.listModel.focusedItem)}afterScrollToFocusedItem(){var e;this.question.value&&!this.listModel.filterString&&this.searchEnabled?this.applyInputString(this.listModel.focusedItem||this.question.selectedItem):this.applyHintString(),this.fixInputCase(),this.ariaActivedescendant=null===(e=this.listModel.focusedItem)||void 0===e?void 0:e.elementId}keyHandler(e){let t=!1;const s=e.which||e.keyCode;if(this.popupModel.isVisible&&38===e.keyCode)this.changeSelectionWithKeyboard(!0),t=!0;else if(40===e.keyCode)this.popupModel.show(),this.changeSelectionWithKeyboard(!1),t=!0;else if(this.popupModel.isVisible||32!==e.keyCode)if(this.popupModel.isVisible||13!==e.keyCode)if(!this.popupModel.isVisible||13!==e.keyCode&&(32!==e.keyCode||this.searchEnabled&&this.inputString))if(46===s||8===s)this.inputAvailable||this.onClear(e);else if(27===e.keyCode)this._popupModel.hide(),this.hintString="",this.onEscape();else{if((38===e.keyCode||40===e.keyCode||32===e.keyCode&&!this.searchEnabled)&&(t=!0),32===e.keyCode&&this.searchEnabled)return;lt(e,{processEsc:!1,disableTabStop:this.question.isInputReadOnly})}else 13===e.keyCode&&this.searchEnabled&&!this.inputString&&this.question instanceof An&&!this._markdownMode&&this.question.value?(this._popupModel.hide(),this.onClear(e)):(this.listModel.selectFocusedItem(),this.onFocus(e)),t=!0;else this.question.survey.questionEditFinishCallback(this.question,e),t=!0;else this.popupModel.show(),this.changeSelectionWithKeyboard(!1),t=!0;t&&(e.preventDefault(),e.stopPropagation())}onEscape(){this.searchEnabled&&this.applyInputString(this.question.selectedItem)}onScroll(e){const t=e.target;t.scrollHeight-(t.scrollTop+t.offsetHeight)<=this.loadingItemHeight&&this.updateQuestionChoices()}onBlur(e){this.checkFocusRemainsWithinComponent(e)||(this.focused=!1,this.popupModel.isVisible&&"overlay"==this.popupModel.displayMode||(ot(e),this._popupModel.hide(),this.resetFilterString(),e.stopPropagation()))}onFocus(e){this.focused=!0,this.setInputStringFromSelectedItem(this.question.selectedItem)}setInputStringFromSelectedItem(e){this.focused&&this.searchEnabled&&e&&this.applyInputString(e)}dispose(){super.dispose(),this.question&&this.question.onPropertyChanged.remove(this.questionPropertyChangedHandler),this.questionPropertyChangedHandler=void 0,this.listModel&&this.listModel.dispose(),this.popupModel&&this.popupModel.dispose(),this.htmlCleanerElement=void 0}scrollToFocusedItem(){this.listModel.scrollToFocusedItem()}}me([d({defaultValue:!1})],kn.prototype,"focused",void 0),me([d({defaultValue:!1})],kn.prototype,"allowCustomChoices",void 0),me([d({onSet:(e,t)=>{t.updateCustomItemValue()}})],kn.prototype,"customValue",void 0),me([d({defaultValue:!0})],kn.prototype,"searchEnabled",void 0),me([d()],kn.prototype,"choicesLazyLoadEnabled",void 0),me([d({defaultValue:"",onSet:(e,t)=>{t.onSetFilterString()}})],kn.prototype,"filterString",void 0),me([d({defaultValue:"",onSet:(e,t)=>{t.question.inputHasValue=!!e}})],kn.prototype,"inputString",void 0),me([d({})],kn.prototype,"showInputFieldComponent",void 0),me([d()],kn.prototype,"ariaActivedescendant",void 0),me([d()],kn.prototype,"ariaExpanded",void 0),me([d()],kn.prototype,"inputPlaceholder",void 0),me([d({defaultValue:""})],kn.prototype,"hintString",void 0);class An extends Tn{constructor(e){super(e),this.lastSelectedItemValue=null,this.minMaxChoices=[],this.onOpened=this.addEvent(),this.createLocalizableString("placeholder",this,!1,!0),this.createLocalizableString("readOnlyText",this,!0),this.registerPropertyChangedHandlers(["choicesMin","choicesMax","choicesStep"],()=>{this.onVisibleChoicesChanged()}),this.registerPropertyChangedHandlers(["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"],()=>{this.getSingleSelectedItem(),this.updateReadOnlyText()}),this.updateReadOnlyText()}locStrsChanged(){super.locStrsChanged(),this.updateReadOnlyText(),this.updateInputPlaceholder(this.placeholder)}updateReadOnlyText(){this.readOnlyText=this.calculateReadOnlyText()}onSelectedItemValuesUpdated(){super.onSelectedItemValuesUpdated(),this.updateReadOnlyText()}updateInputPlaceholder(e){this.dropdownListModelValue&&this.dropdownListModel.setInputPlaceholder(e)}get showOptionsCaption(){return this.allowClear}set showOptionsCaption(e){this.allowClear=e}get showClearButton(){return this.allowClear&&!this.isEmpty()}get optionsCaption(){return this.placeholder}set optionsCaption(e){this.placeholder=e}get placeholder(){return this.getLocalizableStringText("placeholder")}set placeholder(e){this.setLocalizableStringText("placeholder",e),this.updateInputPlaceholder(e)}get locPlaceholder(){return this.getLocalizableString("placeholder")}getType(){return"dropdown"}get isNewA11yStructure(){return!0}get a11yQuestionAriaRole(){return this.searchEnabled?null:"combobox"}get a11yInputAriaRole(){return this.searchEnabled?"combobox":null}get selectedItem(){return this.getSingleSelectedItem()}isOtherValueUnused(){var e;return!(null===(e=this.selectedItem)||void 0===e?void 0:e.showCommentArea)}onGetSingleSelectedItem(e){e&&(this.lastSelectedItemValue=e)}get isShowingChoiceComment(){var e;return null===(e=this.selectedItem)||void 0===e?void 0:e.showCommentArea}supportAutoAdvance(){return!this.isShowingChoiceComment}getChoices(){var e=super.getChoices();if(this.choicesMax<=this.choicesMin)return e;for(var t=[],s=0;s<e.length;s++)t.push(e[s]);if(0===this.minMaxChoices.length||this.minMaxChoices.length!==(this.choicesMax-this.choicesMin)/this.choicesStep+1)for(this.minMaxChoices=[],s=this.choicesMin;s<=this.choicesMax;s+=this.choicesStep)this.minMaxChoices.push(this.createItemValue(s));return t.concat(this.minMaxChoices)}get choicesMin(){return this.getPropertyValue("choicesMin")}set choicesMin(e){this.setPropertyValue("choicesMin",e)}get choicesMax(){return this.getPropertyValue("choicesMax")}set choicesMax(e){this.setPropertyValue("choicesMax",e)}get choicesStep(){return this.getPropertyValue("choicesStep")}set choicesStep(e){e<1&&(e=1),this.setPropertyValue("choicesStep",e)}get autocomplete(){return this.getPropertyValue("autocomplete")}set autocomplete(e){this.setPropertyValue("autocomplete",e)}get readOnlyText(){return this.getLocalizableStringText("readOnlyText")}set readOnlyText(e){this.setLocalizableStringText("readOnlyText",e)}get locReadOnlyText(){return this.getLocalizableString("readOnlyText")}calculateReadOnlyText(){if("select"==this.renderAs){if(this.isOtherSelected)return this.otherText;if(this.isNoneSelected)return this.noneText;if(this.selectedItem)return this.selectedItemText}return this.selectedItem?this.selectedItemText:this.placeholder}getControlClass(){return(new fe).append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).append(this.cssClasses.controlInputFieldComponent,!!this.inputFieldComponentName).toString()}updateCssClasses(e,t){super.updateCssClasses(e,t),this.useDropdownList&&mt(e,t)}calcCssClasses(e){const t=super.calcCssClasses(e);return this.dropdownListModelValue&&this.dropdownListModel.updateCssClasses(t.popup,t.list),t}get selectedItemLocText(){const e=this.suggestedItem||this.selectedItem;return null==e?void 0:e.locText}get inputFieldComponentName(){return this.inputFieldComponent||this.itemComponent}get showSelectedItemLocText(){return!this.inputHasValue&&!this.inputFieldComponentName&&!!this.selectedItemLocText&&this.dropdownListModel.canShowSelectedItem}get showInputFieldComponent(){return!this.inputHasValue&&!!this.inputFieldComponentName&&!this.isEmpty()}get selectedItemText(){const e=this.selectedItem;return e?e.text:""}get useDropdownList(){return"select"!==this.renderAs}get dropdownListModel(){return this.isDisposed||!this.useDropdownList||this.dropdownListModelValue||(this.dropdownListModelValue=new kn(this)),this.dropdownListModelValue}set dropdownListModel(e){this.dropdownListModelValue=e}get popupModel(){return this.dropdownListModel.popupModel}onOpenedCallBack(){this.onOpened.fire(this,{question:this,choices:this.choices})}onSelectedItemValuesChangedHandler(e){var t;null===(t=this.dropdownListModelValue)||void 0===t||t.setInputStringFromSelectedItem(e),super.onSelectedItemValuesChangedHandler(e)}hasUnknownValue(e,t,s,n){return!this.choicesLazyLoadEnabled&&super.hasUnknownValue(e,t,s,n)}needConvertRenderedOtherToDataValue(){var e;const t=null===(e=this.otherValue)||void 0===e?void 0:e.trim();return!!t&&super.hasUnknownValue(t,!0,!1)}getItemIfChoicesNotContainThisValue(e,t){return this.choicesLazyLoadEnabled?this.createItemValue(e,t):super.getItemIfChoicesNotContainThisValue(e,t)}onVisibleChoicesChanged(){super.onVisibleChoicesChanged(),this.dropdownListModelValue&&this.dropdownListModel.updateItems()}canAddCustomChoices(){return this.allowCustomChoices}getIsQuestionReady(){return super.getIsQuestionReady()&&!this.isChoicesLoading}ensureQuestionIsReady(){super.ensureQuestionIsReady(),this.dropdownListModel&&this.choicesLazyLoadEnabled&&this.dropdownListModel.loadQuestionChoices()}onLoadChoicesFromUrl(e){this.updateCustomChoices(this.value,e),super.onLoadChoicesFromUrl(e)}valueFromData(e){const t=super.valueFromData(e);return this.survey&&this.survey.isSettingData()&&this.updateCustomChoices(t,this.visibleChoices),t}updateCustomChoices(e,t){null!=e&&this.allowCustomChoices&&!this.choicesLazyLoadEnabled&&(this.customChoices.splice(0,this.customChoices.length),t.filter(t=>a.isTwoValueEquals(t.id,e,!1,!1))[0]||this.customChoices.splice(0,this.customChoices.length,new is(e)))}setIsChoicesLoading(e){this.isChoicesLoading=e,this.updateIsReady()}getFirstInputElementId(){return this.inputId+(this.searchEnabled||this.allowCustomChoices?"_0":"")}getInputId(){return this.inputId+"_0"}clearValue(e){var t;super.clearValue(e),this.lastSelectedItemValue=null,null===(t=this.dropdownListModelValue)||void 0===t||t.clear()}afterRenderCore(e){super.afterRenderCore(e),this.dropdownListModelValue&&this.dropdownListModelValue.clear()}onClick(e){this.onOpenedCallBack&&this.onOpenedCallBack()}onKeyUp(e){46===(e.which||e.keyCode)&&(this.clearValue(!0),e.preventDefault(),e.stopPropagation())}supportEmptyValidation(){return!0}onBlurCore(e){this.dropdownListModel.onBlur(e),super.onBlurCore(e)}onFocusCore(e){this.dropdownListModel.onFocus(e),super.onFocusCore(e)}dispose(){super.dispose(),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)}}me([d()],An.prototype,"allowClear",void 0),me([d({onSet:(e,t)=>{t.dropdownListModelValue&&t.dropdownListModel.setSearchEnabled(e)}})],An.prototype,"searchEnabled",void 0),me([d()],An.prototype,"searchMode",void 0),me([d({onSet:(e,t)=>{t.dropdownListModelValue&&t.dropdownListModel.setAllowCustomChoices(e)}})],An.prototype,"allowCustomChoices",void 0),me([d()],An.prototype,"textWrapEnabled",void 0),me([d({defaultValue:!1})],An.prototype,"inputHasValue",void 0),me([d({onSet:(e,t)=>{t.dropdownListModelValue&&t.dropdownListModel.setChoicesLazyLoadEnabled(e)}})],An.prototype,"choicesLazyLoadEnabled",void 0),me([d()],An.prototype,"choicesLazyLoadPageSize",void 0),me([d()],An.prototype,"suggestedItem",void 0),I.addClass("dropdown",[{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",alternativeName:"showOptionsCaption",default:!0},{name:"choicesMin:number",default:0},{name:"choicesMax:number",default:0},{name:"choicesStep:number",default:1,minValue:1},{name:"autocomplete",alternativeName:"autoComplete",choices:xt.questions.dataList},{name:"textWrapEnabled:boolean",default:!0},{name:"renderAs",default:"default",visible:!1},{name:"searchEnabled:boolean",default:!0,visible:!1},{name:"allowCustomChoices:boolean",default:!1,visibleIf:e=>!e.choicesFromQuestion,dependsOn:"choicesFromQuestion"},{name:"searchMode",default:"contains",choices:["contains","startsWith"]},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"inputFieldComponent",visible:!1},{name:"itemComponent",visible:!1,default:""}],function(){return new An("")},"selectbase"),xs.Instance.registerQuestion("dropdown",e=>{var t=new An(e);return t.choices=xs.DefaultChoices,t});class Ln{constructor(e){this.row=e}getValue(e,t,s,n){if(0===e.length)return{isFound:!0,value:this.row.value,context:this}}getTextValue(e,t,s){return s?this.row.getDisplayValue(t):t}}class Dn extends is{getBaseType(){return"matrixcolumn"}get isExclusive(){return this.getPropertyValue("isExclusive",!1)}set isExclusive(e){this.setPropertyValue("isExclusive",e)}}class Nn extends he{constructor(e,t,s,n){super(),this.item=e,this.fullName=t,this.data=s,this.setValueDirectly(n),this.registerPropertyChangedHandlers(["value"],()=>{this.data.onMatrixRowChanged(this)}),this.data.hasErrorInRow(this)&&(this.hasError=!0)}cellClick(e){this.data.cellClick(this,e)}isChecked(e){return this.data.isCellChecked(this,e)}get name(){return this.item.value}get text(){return this.item.text}get locText(){return this.item.locText}get isVisible(){return this.item.isVisible}get value(){return this.getPropertyValue("value")}set value(e){this.isReadOnly||this.setValueDirectly(this.data.getCorrectedRowValue(e))}setValueDirectly(e){this.setPropertyValue("value",e)}getDisplayValue(e){return this.data.getDisplayRowValue(e)}get isReadOnly(){return!this.item.enabled||this.data.isInputReadOnly}get isReadOnlyAttr(){return this.data.isReadOnlyAttr}get isDisabledAttr(){return!this.item.enabled||this.data.isDisabledAttr}get rowTextClasses(){return(new fe).append(this.data.cssClasses.rowTextCell).toString()}get hasError(){return this.getPropertyValue("hasError",!1)}set hasError(e){this.setPropertyValue("hasError",e)}get rowClasses(){const e=this.data.cssClasses;return(new fe).append(e.row).append(e.rowError,this.hasError).append(e.rowReadOnly,this.isReadOnly).append(e.rowDisabled,this.data.isDisabledStyle).toString()}getValueGetterContext(){return new Ln(this)}}class On extends he{constructor(e){super(),this.cellsOwner=e,this.values={},this.locs={}}getType(){return"cells"}get isEmpty(){return 0==Object.keys(this.values).length}valuesChanged(){!this.locNotification&&this.onValuesChanged&&this.onValuesChanged()}getDefaultCellLocText(e){return this.getCellLocCore(this.defaultRowValue,e)}getCellDisplayLocText(e,t){return this.getCellLocCore(e,t)}getCellLocCore(e,t){if(e=this.getCellRowColumnValue(e,this.rows),t=this.getCellRowColumnValue(t,this.columns),a.isValueEmpty(e)||a.isValueEmpty(t))return null;this.locs[e]||(this.locs[e]={});let s=this.locs[e][t];return s||(s=this.createString(),s.setJson(this.getCellLocData(e,t)),s.onGetTextCallback=e=>{if(!e){const e=is.getItemByValue(this.columns,t);if(e)return e.locText.getJson()||e.value}return e},s.onStrChanged=(s,n)=>{this.updateValues(e,t,n)},this.locs[e][t]=s),s}get defaultRowValue(){return xt.matrix.defaultRowName}getCellLocData(e,t){return this.getCellLocDataFromValue(e,t)||this.getCellLocDataFromValue(this.defaultRowValue,t)}getCellLocDataFromValue(e,t){return this.values[e]&&this.values[e][t]?this.values[e][t]:null}getCellText(e,t){var s=this.getCellLocCore(e,t);return s?s.calculatedText:null}setCellText(e,t,s){const n=this.getCellLocCore(e,t);n&&(n.text=s)}updateValues(e,t,s){s?(this.values[e]||(this.values[e]={}),this.values[e][t]=s,this.valuesChanged()):this.values[e]&&this.values[e][t]&&(delete this.values[e][t],0==Object.keys(this.values[e]).length&&delete this.values[e],this.valuesChanged())}getDefaultCellText(e){var t=this.getCellLocCore(this.defaultRowValue,e);return t?t.calculatedText:null}setDefaultCellText(e,t){this.setCellText(this.defaultRowValue,e,t)}getCellDisplayText(e,t){var s=this.getCellDisplayLocText(e,t);return s?s.calculatedText:null}get rows(){return this.cellsOwner?this.cellsOwner.getRows():[]}get columns(){return this.cellsOwner?this.cellsOwner.getColumns():[]}getCellRowColumnValue(e,t){if(null==e)return null;if("number"==typeof e){if(e<0||e>=t.length)return null;e=t[e].value}return e.value?e.value:e}getJson(){if(this.isEmpty)return null;const e=this.values[this.defaultRowValue],t={};for(let s in this.values){const n={},i=this.values[s];for(let t in i)if(s===this.defaultRowValue||!e||e[t]!==i[t]){const e=this.getCellLocCore(s,t);n[t]=e?e.getJson():i[t]}t[s]=n}return t}setJson(e,t){if(this.values={},e)for(var s in e)if("pos"!=s){var n=e[s];for(var i in this.values[s]={},n)"pos"!=i&&(this.values[s][i]=n[i])}this.locNotification=!0,this.runFuncOnLocs((e,t,s)=>s.setJson(this.getCellLocData(e,t))),this.locNotification=!1,this.valuesChanged()}locStrsChanged(){this.runFuncOnLocs((e,t,s)=>s.strChanged())}runFuncOnLocs(e){for(let t in this.locs){const s=this.locs[t];for(let n in s)e(t,n,s[n])}}createString(){return new Ze(this.cellsOwner,!0)}}class jn extends P{constructor(e){super(),this.question=e}getValue(e,t,s,n){if(e.length>0){const i=super.getValue(e,t,s,n);if(i&&i.isFound)return i}return new T(this.question.value).getValue(e,t,s,n)}getRootObj(){return this.question.data}updateValueByItem(e,t){var s;const n=this.question.getMatrixRows();e=e.toLocaleLowerCase();for(let i=0;i<n.length;i++){const r=n[i];if(((null===(s=r.name)||void 0===s?void 0:s.toString())||"").toLocaleLowerCase()===e)return t.isFound=!0,void(t.context=r.getValueGetterContext())}}}class qn extends hs{constructor(e){super(e),this.isRowChanging=!1,this.emptyLocalizableString=new Ze(this),this.cellsValue=new On(this),this.cellsValue.onValuesChanged=()=>{this.updateHasCellText(),this.propertyValueChanged("cells",this.cells,this.cells)},this.registerPropertyChangedHandlers(["columns"],()=>{this.onColumnsChanged()}),this.registerPropertyChangedHandlers(["rows"],()=>{this.runCondition(this.getDataFilteredProperties()),this.onRowsChanged()}),this.registerPropertyChangedHandlers(["hideIfRowsEmpty"],()=>{this.updateVisibilityBasedOnRows()}),this.registerPropertyChangedHandlers(["cellType"],()=>{this.value=this.convertToCorrectValue(this.value)})}getType(){return"matrix"}get cellType(){return this.getPropertyValue("cellType")}set cellType(e){"checkbox"!==e&&(e="radio"),this.setPropertyValue("cellType",e)}get isMultiSelect(){return"checkbox"===this.cellType}get cellComponent(){return this.getPropertyValue("cellComponent")}set itemComponent(e){this.setPropertyValue("cellComponent",e)}get hasSingleInput(){return!1}get eachRowRequired(){return this.getPropertyValue("eachRowRequired")}set eachRowRequired(e){this.setPropertyValue("eachRowRequired",e)}get isAllRowRequired(){return this.eachRowRequired}set isAllRowRequired(e){this.eachRowRequired=e}get eachRowUnique(){return this.getPropertyValue("eachRowUnique")}set eachRowUnique(e){this.setPropertyValue("eachRowUnique",e)}get hasRows(){return this.rows.length>0}get rowOrder(){return this.getPropertyValue("rowOrder")}set rowOrder(e){(e=e.toLowerCase())!=this.rowOrder&&(this.setPropertyValue("rowOrder",e),this.onRowsChanged())}get rowsOrder(){return this.rowOrder}set rowsOrder(e){this.rowOrder=e}get hideIfRowsEmpty(){return this.getPropertyValue("hideIfRowsEmpty")}set hideIfRowsEmpty(e){this.setPropertyValue("hideIfRowsEmpty",e)}getRows(){return this.rows}getColumns(){return this.visibleColumns}addColumn(e,t){var s=new Dn(e,t);return this.columns.push(s),s}get checkType(){return this.isMultiSelect?"checkbox":"radio"}formatCss(e){return(e||"").replace("{type}",this.checkType)}getItemClass(e,t){const s=e.isChecked(t),n=this.isReadOnly,i=!s&&!n,r=this.hasCellText,a=this.cssClasses;return(new fe).append(a.cell,r).append(r?a.cellText:this.formatCss(a.label)).append(a.itemOnError,!r&&(this.eachRowRequired||this.eachRowUnique?e.hasError:this.hasCssError())).append(r?a.cellTextSelected:this.formatCss(a.itemChecked),s).append(r?a.cellTextDisabled:this.formatCss(a.itemDisabled),this.isDisabledStyle).append(r?a.cellTextReadOnly:this.formatCss(a.itemReadOnly),this.isReadOnlyStyle).append(r?a.cellTextPreview:this.formatCss(a.itemPreview),this.isPreviewStyle).append(this.formatCss(a.itemHover),i&&!r).toString()}get itemSvgIcon(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId}getItemSvgIcon(e,t){return this.isMultiSelect&&e.isChecked(t)?this.cssClasses.itemPreviewSvgIconId:this.itemSvgIcon}get cssItemValue(){return this.formatCss(this.cssClasses.itemValue)}get cssMaterialDecorator(){return this.formatCss(this.cssClasses.materialDecorator)}get cssItemDecorator(){return this.formatCss(this.cssClasses.itemDecorator)}locStrsChanged(){super.locStrsChanged(),this.cells.locStrsChanged()}getQuizQuestionCount(){for(var e=0,t=0;t<this.rows.length;t++)this.isValueEmpty(this.correctAnswer[this.rows[t].value])||e++;return e}convertToCorrectValue(e){if(null==e||"object"!=typeof e)return e;const t=Object.keys(e);for(let s=0;s<t.length;s++){const n=t[s],i=e[n];Array.isArray(i)&&!this.isMultiSelect&&(i.length>0?e[n]=i[0]:delete e[n]),!Array.isArray(i)&&this.isMultiSelect&&(e[n]=[i])}return e}getCorrectAnswerCount(){for(var e=0,t=this.value,s=0;s<this.rows.length;s++){var n=this.rows[s].value;!this.isValueEmpty(t[n])&&this.isTwoValueEquals(this.correctAnswer[n],t[n])&&e++}return e}runConditionCore(e){is.runEnabledConditionsForItems(this.rows,void 0,e),super.runConditionCore(e)}createRowsVisibleIfRunner(){const e=this.getExpressionFromSurvey("rowsVisibleIf");return e?new ae(e):null}onRowsChanged(){this.clearGeneratedRows(),super.onRowsChanged()}getMatrixRows(){if(this.generatedVisibleRows)return this.generatedVisibleRows;const e=new Array;let t=this.value;t||(t={});const s=this.rows;for(let n=0;n<s.length;n++){const i=s[n];if(this.isValueEmpty(i.value))continue;const r=this.id+"_"+i.value.toString().replace(/\s/g,"_");e.push(this.createMatrixRow(i,r,t[i.value]))}return this.generatedVisibleRows=e,e}getVisibleRows(){const e=[];return this.getMatrixRows().forEach(t=>{t.isVisible&&e.push(t)}),e}getRowByName(e){const t=this.visibleRows;for(let s=0;s<t.length;s++)if(t[s].name===e)return t[s];return null}getSingleInputQuestionsCore(e,t){if(this.nestedQuestionsValue)return this.nestedQuestionsValue;const s=[],n=this.isMultiSelect?"checkbox":"radiogroup";return this.visibleRows.forEach(e=>{const t=I.createClass(n);t.name=e.name,t.locTitle.sharedData=e.locText,t.choices=this.visibleColumns,t.value=e.value,t.isRequired=this.isAllRowRequired,t.setSurveyImpl(this),t.setParentQuestion(this),s.push(t)}),this.nestedQuestionsValue=s,s}resetSingleInput(){super.resetSingleInput(),this.nestedQuestionsValue&&(this.nestedQuestionsValue.forEach(e=>e.dispose()),this.nestedQuestionsValue=null)}getSurveyData(){return this}getTextProcessor(){var e;return null===(e=this.surveyImpl)||void 0===e?void 0:e.getTextProcessor()}getValue(e){const t=this.getRowByName(e);return t?t.value:void 0}setValue(e,t,s,n,i){this.getRowByName(e).value=t}getVariable(e){var t;return null===(t=this.data)||void 0===t?void 0:t.getVariable(e)}setVariable(e,t){var s;null===(s=this.data)||void 0===s||s.setVariable(e,t)}getComment(e){var t;return null===(t=this.data)||void 0===t?void 0:t.getComment(e)}setComment(e,t,s){var n;null===(n=this.data)||void 0===n||n.setComment(e,t,s)}getAllValues(){var e;return null===(e=this.data)||void 0===e?void 0:e.getAllValues()}getFilteredProperties(){var e;return null===(e=this.data)||void 0===e?void 0:e.getFilteredProperties()}findQuestionByName(e){var t;return null===(t=this.data)||void 0===t?void 0:t.findQuestionByName(e)}getEditingSurveyElement(){var e;return null===(e=this.data)||void 0===e?void 0:e.getEditingSurveyElement()}sortVisibleRows(e){return this.survey&&this.survey.isDesignMode?e:"random"===this.rowOrder.toLowerCase()?a.randomizeArray(e):e}endLoadingFromJson(){super.endLoadingFromJson(),this.rows=this.sortVisibleRows(this.rows),this.onRowsChanged(),this.onColumnsChanged()}isNewValueCorrect(e){return a.isValueObject(e,!0)}processRowsOnSet(e){return this.sortVisibleRows(e)}get visibleRows(){return this.getVisibleRows()}get cells(){return this.cellsValue}set cells(e){this.cells.setJson(e&&e.getJson?e.getJson():null)}get hasCellText(){return this.getPropertyValue("hasCellText",!1)}updateHasCellText(){this.setPropertyValue("hasCellText",!this.cells.isEmpty)}setCellText(e,t,s){this.cells.setCellText(e,t,s)}getCellText(e,t){return this.cells.getCellText(e,t)}setDefaultCellText(e,t){this.cells.setDefaultCellText(e,t)}getDefaultCellText(e){return this.cells.getDefaultCellText(e)}getCellDisplayText(e,t){return this.cells.getCellDisplayText(e,t)}getCellDisplayLocText(e,t){return this.cells.getCellDisplayLocText(e,t)||this.emptyLocalizableString}supportAutoAdvance(){return!0===this.isMouseDown&&this.hasValuesInAllRows()}onCheckForErrors(e,t,s){if(super.onCheckForErrors(e,t,s),!t||this.hasCssError()){const t={noValue:!1,isNotUnique:!1};this.checkErrorsAllRows(s,t),t.noValue&&e.push(new At(null,this)),t.isNotUnique&&e.push(new Lt(null,this))}}hasValuesInAllRows(){const e={noValue:!1,isNotUnique:!1};return this.checkErrorsAllRows(!1,e,!0),!e.noValue}checkErrorsAllRows(e,t,s){const n=this.eachRowRequired||s,i=this.eachRowUnique;if(t.noValue=!1,t.isNotUnique=!1,e&&(this.errorsInRow=void 0),!n&&!i)return;const r=this.visibleRows;if(!r)return;const a={};for(var o=0;o<r.length;o++){const s=r[o].value;let l=this.isValueEmpty(s);const u=i&&!l&&!0===a[s];l=l&&n,e&&(l||u)&&this.addErrorIntoRow(r[o]),l||(a[s]=!0),t.noValue=t.noValue||l,t.isNotUnique=t.isNotUnique||u}e&&r.forEach(e=>{e.hasError=this.hasErrorInRow(e)})}addErrorIntoRow(e){this.errorsInRow||(this.errorsInRow={}),this.errorsInRow[e.name]=!0,e.hasError=!0}refreshRowsErrors(){this.errorsInRow&&this.checkErrorsAllRows(!0,{noValue:!1,isNotUnique:!1})}getIsAnswered(){return super.getIsAnswered()&&this.hasValuesInAllRows()}createMatrixRow(e,t,s){var n=new Nn(e,t,this,s);return this.onMatrixRowCreated(n),n}onMatrixRowCreated(e){}setQuestionValue(e,t=!0){if(super.setQuestionValue(e,this.isRowChanging||t),this.generatedVisibleRows&&0!=this.generatedVisibleRows.length){this.isRowChanging=!0;var s=this.value;if(s||(s={}),0==this.rows.length)this.generatedVisibleRows[0].setValueDirectly(s);else for(var n=0;n<this.generatedVisibleRows.length;n++){var i=s[this.generatedVisibleRows[n].name];this.isValueEmpty(i)&&(i=null),this.generatedVisibleRows[n].setValueDirectly(i)}this.refreshRowsErrors(),this.updateIsAnswered(),this.isRowChanging=!1}}getValueGetterContext(){return new jn(this)}getDisplayValueCore(e,t){var s={};for(var n in t){var i=e?is.getTextOrHtmlByValue(this.rows,n):n;i||(i=n);var r=is.getTextOrHtmlByValue(this.columns,t[n]);r||(r=t[n]),s[i]=r}return s}getPlainData(e={includeEmpty:!0}){var t=super.getPlainData(e);if(t){var s=this.createValueCopy();t.isNode=!0,t.data=Object.keys(s||{}).map(t=>{var n=this.rows.filter(e=>e.value===t)[0],i={name:t,title:n?n.text:"row",value:s[t],displayValue:is.getTextOrHtmlByValue(this.visibleColumns,s[t]),getString:e=>"object"==typeof e?JSON.stringify(e):e,isNode:!1},r=is.getItemByValue(this.visibleColumns,s[t]);return r&&(e.calculations||[]).forEach(e=>{i[e.propertyName]=r[e.propertyName]}),i})}return t}addConditionObjectsByContext(e,t){for(var s=0;s<this.rows.length;s++){var n=this.rows[s];n.value&&e.push({name:this.getValueName()+"."+n.value,text:this.processedTitle+"."+n.calculatedText,question:this})}}getConditionJson(e=null,t=null){if(!t)return super.getConditionJson(e);var s=new An(t);s.choices=this.columns;var n=(new V).toJsonObject(s);return n.type=s.getType(),n}clearIncorrectValues(){this.clearInvisibleValuesInRowsAndColumns(!0,!0,!0),super.clearIncorrectValues()}clearValueIfInvisibleCore(e){super.clearValueIfInvisibleCore(e),this.clearInvisibleValuesInRowsAndColumns(!0,!0,!1)}clearInvisibleColumnValues(){this.clearInvisibleValuesInRowsAndColumns(!1,!0,!1)}clearInvisibleValuesInRows(){this.clearInvisibleValuesInRowsAndColumns(!0,!1,!1)}clearInvisibleValuesInRowsAndColumns(e,t,s){if(this.isEmpty())return;let n=this.getUnbindValue(this.value);const i={},r=this.rows;for(let s=0;s<r.length;s++){const a=r[s].value;n[a]&&(e&&!r[s].isVisible?delete n[a]:(t&&this.clearIncorrectValuesInRow(a,n),null!=n[a]&&(i[a]=n[a])))}s&&(n=i),this.isTwoValueEquals(n,this.value)||(this.value=n)}clearIncorrectValuesInRow(e,t){const s=t[e];if(void 0!==s)if(this.isMultiSelect&&Array.isArray(s)){for(let e=s.length-1;e>=0;e--)this.getVisibleColumnByValue(s[e])||s.splice(e,1);0===s.length&&delete t[e]}else this.getVisibleColumnByValue(s)||delete t[e];else delete t[e]}getVisibleColumnByValue(e){const t=is.getItemByValue(this.columns,e);return t&&t.isVisible?t:null}getFirstInputElementId(){var e=this.generatedVisibleRows;return e||(e=this.visibleRows),e.length>0&&this.visibleColumns.length>0?this.inputId+"_"+e[0].name+"_0":super.getFirstInputElementId()}onMatrixRowChanged(e){if(!this.isRowChanging){if(this.isRowChanging=!0,this.hasRows){const t=this.value||{};this.isValueEmpty(e.value)?delete t[e.name]:t[e.name]=e.value,this.setNewValue(t)}else this.setNewValue(e.value);this.isRowChanging=!1}}getCorrectedRowValue(e){const t=this.getColumnByValue(e);return t?t.value:e}getDisplayRowValue(e){const t=this.getColumnByValue(e);return t?t.text:null!=e?e.toString():""}cellClick(e,t){this.isReadOnly||this.isDisabledAttr||(e.value=this.getValueOnCellClick(e,t))}getValueOnCellClick(e,t){if(this.isMultiSelect){if(t.isExclusive){if(this.isCellChecked(e,t))return;return[t.value]}let s=Array.isArray(e.value)?[].concat(e.value):[];if(this.isCellChecked(e,t)){const n=this.getRowValueIndex(e,t);n>-1&&s.splice(n,1),0===s.length&&(s=void 0)}else Array.isArray(s)||(s=[]),this.columns.forEach(e=>{if(e.isExclusive){const t=s.indexOf(e.value);t>-1&&s.splice(t,1)}}),s.push(t.value);return s}return t.value}isCellChecked(e,t){return this.isMultiSelect?this.getRowValueIndex(e,t)>-1:a.isTwoValueEquals(e.value,t.value)}getRowValueIndex(e,t){const s=e.value;if(!Array.isArray(s))return-1;for(let e=0;e<s.length;e++)if(this.isTwoValueEquals(s[e],t.value))return e;return-1}getColumnByValue(e){const t=this.columns;for(var s=0;s<t.length;s++)if(e===t[s].value)return t[s];for(s=0;s<t.length;s++)if(this.isTwoValueEquals(e,t[s].value))return t[s];return null}hasErrorInRow(e){return!!this.errorsInRow&&!!this.errorsInRow[e.name]}getSearchableItemValueKeys(e){e.push("columns"),e.push("rows")}get SurveyModel(){return this.survey}getColumnHeaderWrapperComponentName(e){return this.SurveyModel.getElementWrapperComponentName({column:e},"column-header")}getColumnHeaderWrapperComponentData(e){return this.SurveyModel.getElementWrapperComponentData({column:e},"column-header")}getRowHeaderWrapperComponentName(e){return this.SurveyModel.getElementWrapperComponentName({row:e},"row-header")}getRowHeaderWrapperComponentData(e){return this.SurveyModel.getElementWrapperComponentData({row:e},"row-header")}}I.addClass("matrixcolumn",[{name:"isExclusive:boolean",visibleIf:e=>{var t;return"checkbox"===(null===(t=e.locOwner)||void 0===t?void 0:t.cellType)},locationInTable:"detail"}],e=>new Dn(e),"itemvalue"),I.addClass("matrix",["rowTitleWidth",{name:"columns:matrixcolumn[]",uniqueProperty:"value",baseValue:function(){return l("matrix_column")}},{name:"rows:itemvalue[]",uniqueProperty:"value",baseValue:function(){return l("matrix_row")}},{name:"cells:cells",serializationProperty:"cells"},{name:"rowOrder",alternativeName:"rowsOrder",default:"initial",choices:["initial","random"]},{name:"eachRowRequired:boolean",alternativeName:"isAllRowRequired"},{name:"eachRowUnique:boolean",category:"validation"},"hideIfRowsEmpty:boolean",{name:"cellComponent",visible:!1,default:"survey-matrix-cell"},{name:"cellType",default:"radio",choices:["radio","checkbox"]}],function(){return new qn("")},"matrixbase"),xs.Instance.registerQuestion("matrix",e=>{var t=new qn(e);return t.rows=xs.DefaultRows,t.columns=xs.DefaultColums,t});class Mn extends he{updateRemainingCharacterCounter(e,t){this.remainingCharacterCounter=a.getRemainingCharacterCounterText(e,t)}}me([d()],Mn.prototype,"remainingCharacterCounter",void 0);class Fn extends ts{constructor(e){super(e),this.characterCounter=new Mn}isTextValue(){return!0}get maxLength(){return this.getPropertyValue("maxLength")}set maxLength(e){this.setPropertyValue("maxLength",e),this.updateRemainingCharacterCounter(this.value)}getMaxLength(){return a.getMaxLength(this.maxLength,this.survey?this.survey.maxTextLength:-1)}updateRemainingCharacterCounter(e){this.characterCounter.updateRemainingCharacterCounter(e,this.getMaxLength())}get placeHolder(){return this.placeholder}set placeHolder(e){this.placeholder=e}get locPlaceHolder(){return this.locPlaceholder}getType(){return"textbase"}isEmpty(){return super.isEmpty()||""===this.value}get textUpdateMode(){return this.getPropertyValue("textUpdateMode")}set textUpdateMode(e){this.setPropertyValue("textUpdateMode",e)}getIsInputTextUpdate(){return"default"==this.textUpdateMode?super.getIsInputTextUpdate():"onTyping"==this.textUpdateMode}get renderedPlaceholder(){return this.getPropertyValue("renderedPlaceholder",void 0,()=>this.hasPlaceholder()?this.placeHolder:void 0)}onReadOnlyChanged(){super.onReadOnlyChanged(),this.resetRenderedPlaceholder()}localeChanged(){super.localeChanged(),this.resetRenderedPlaceholder()}supportEmptyValidation(){return!0}resetRenderedPlaceholder(){this.resetPropertyValue("renderedPlaceholder")}hasPlaceholder(){return!this.isReadOnly}setNewValue(e){super.setNewValue(e),this.updateRemainingCharacterCounter(e)}setQuestionValue(e,t=!0){super.setQuestionValue(e,t),this.updateRemainingCharacterCounter(e)}convertToCorrectValue(e){return Array.isArray(e)?e.join(this.getValueSeparator()):e}getValueSeparator(){return", "}getControlCssClassBuilder(){return(new fe).append(this.cssClasses.root).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle)}getControlClass(){return this.getControlCssClassBuilder().toString()}get isNewA11yStructure(){return!0}}me([d({localizable:!0,onSet:(e,t)=>t.resetRenderedPlaceholder()})],Fn.prototype,"placeholder",void 0),I.addClass("textbase",[],function(){return new Fn("")},"question");class Bn{setInputValue(e){this.inputElement.maxLength>=0&&this.inputElement.maxLength<e.length&&(e=e.slice(0,this.inputElement.maxLength)),this.inputElement.value=e}constructor(e,t,s){this.inputMaskInstance=e,this.inputElement=t,this.prevUnmaskedValue=void 0,this.inputMaskInstancePropertyChangedHandler=(e,t)=>{if("saveMaskedValue"!==t.name){const e=this.inputMaskInstance.getMaskedValue(this.prevUnmaskedValue);this.setInputValue(e)}},this.clickHandler=e=>{this.inputElement.value==this.inputMaskInstance.getMaskedValue("")&&this.inputElement.setSelectionRange(0,0)},this.beforeInputHandler=e=>{const t=this.createArgs(e),s=this.inputMaskInstance.processInput(t);this.setInputValue(s.value),this.inputElement.setSelectionRange(s.caretPosition,s.caretPosition),s.cancelPreventDefault||e.preventDefault()},this.changeHandler=e=>{const t=this.inputMaskInstance.processInput({prevValue:"",insertedChars:e.target.value,selectionStart:0,selectionEnd:0});this.setInputValue(t.value)};let n=s;null==n&&(n=""),this.setInputValue(e.saveMaskedValue?n:e.getMaskedValue(n)),this.prevUnmaskedValue=n,e.onPropertyChanged.add(this.inputMaskInstancePropertyChangedHandler),this.addInputEventListener()}createArgs(e){const t={insertedChars:e.data,selectionStart:e.target.selectionStart,selectionEnd:e.target.selectionEnd,prevValue:e.target.value,inputDirection:"forward"};return"deleteContentBackward"===e.inputType&&(t.inputDirection="backward",t.selectionStart===t.selectionEnd&&(t.selectionStart=Math.max(t.selectionStart-1,0))),"deleteContentForward"===e.inputType&&t.selectionStart===t.selectionEnd&&(t.selectionEnd+=1),t}addInputEventListener(){this.inputElement&&(this.inputElement.addEventListener("beforeinput",this.beforeInputHandler),this.inputElement.addEventListener("click",this.clickHandler),this.inputElement.addEventListener("focus",this.clickHandler),this.inputElement.addEventListener("change",this.changeHandler))}removeInputEventListener(){this.inputElement&&(this.inputElement.removeEventListener("beforeinput",this.beforeInputHandler),this.inputElement.removeEventListener("click",this.clickHandler),this.inputElement.removeEventListener("focus",this.clickHandler),this.inputElement.removeEventListener("change",this.changeHandler))}dispose(){this.removeInputEventListener(),this.inputElement=void 0,this.inputMaskInstance.onPropertyChanged.remove(this.inputMaskInstancePropertyChangedHandler)}}var zn=/[0-9]/;function Hn(){const e=(I.getChildrenClasses("masksettings")||[]).map(e=>{let t=e.name;return-1!==e.name.indexOf("mask")&&(t=t.slice(0,t.indexOf("mask"))),t});return e.unshift("none"),e}class Qn extends Fn{createMaskAdapter(){this.input&&!this.maskTypeIsEmpty&&(this.maskInputAdapter=new Bn(this.maskInstance,this.input,this.value))}deleteMaskAdapter(){this.maskInputAdapter&&(this.maskInputAdapter.dispose(),this.maskInputAdapter=void 0)}updateMaskAdapter(){this.deleteMaskAdapter(),this.createMaskAdapter()}onSetMaskType(e){this.setNewMaskSettingsProperty(),this.updateMaskAdapter()}get maskTypeIsEmpty(){switch(this.inputType){case"tel":case"text":return"none"===this.maskType;default:return!0}}get maskSettings(){return this.getPropertyValue("maskSettings")}set maskSettings(e){if(!e)return;const t=this.maskSettings;t&&t.dispose(),this.setNewMaskSettingsProperty(),this.maskSettings.fromJSON(e.toJSON()),this.updateMaskAdapter()}setNewMaskSettingsProperty(){this.setPropertyValue("maskSettings",this.createMaskSettings())}createMaskSettings(){let e=this.maskType&&"none"!==this.maskType?this.maskType+"mask":"masksettings";I.findClass(e)||(e="masksettings");const t=I.createClass(e);return t.onPropertyChanged.add((e,t)=>{this.onNestedPropertyChanged.fire(this,{name:"maskSettings",newValue:t.newValue,nestedName:t.name}),this.updateInputValue()}),t.owner=this,t}constructor(e){super(e),this._isWaitingForEnter=!1,this.onCompositionUpdate=e=>{this.isInputTextUpdate&&setTimeout(()=>{this.updateValueOnEvent(e)},1),this.updateRemainingCharacterCounter(e.target.value)},this.onKeyUp=e=>{this.updateDateValidationMessage(e),this.isInputTextUpdate?this._isWaitingForEnter&&13!==e.keyCode||(this.updateValueOnEvent(e),this._isWaitingForEnter=!1):13===e.keyCode&&this.updateValueOnEvent(e),this.updateRemainingCharacterCounter(e.target.value)},this.readOnlyBlocker=e=>{if(this.isReadOnlyAttr&&["color","range"].indexOf(this.inputType)>-1)return e.preventDefault(),!0},this.onKeyDown=e=>{this.readOnlyBlocker(e)||(this.onKeyDownPreprocess&&this.onKeyDownPreprocess(e),this.isInputTextUpdate&&(this._isWaitingForEnter=229===e.keyCode),this.onTextKeyDownHandler(e))},this.onChange=e=>{this.updateDateValidationMessage(e),e.target===xt.environment.root.activeElement?this.isInputTextUpdate&&this.updateValueOnEvent(e):this.updateValueOnEvent(e),this.updateRemainingCharacterCounter(e.target.value)},this.createLocalizableString("minErrorText",this,!0,"minError"),this.createLocalizableString("maxErrorText",this,!0,"maxError"),this.setNewMaskSettingsProperty(),this.locDataListValue=new Ke(this),this.locDataListValue.onValueChanged=(e,t)=>{this.propertyValueChanged("dataList",e,t)},this.registerPropertyChangedHandlers(["min","max","inputType","minValueExpression","maxValueExpression"],()=>{this.setRenderedMinMax()}),this.registerPropertyChangedHandlers(["inputType","inputSize"],()=>{this.resetInputSize(),this.resetRenderedPlaceholder()})}isTextValue(){return this.isDateInputType||["text","number","password"].indexOf(this.inputType)>-1}getType(){return"text"}onSurveyLoad(){super.onSurveyLoad(),this.setRenderedMinMax()}get inputType(){return this.getPropertyValue("inputType")}set inputType(e){"datetime_local"!==(e=e.toLowerCase())&&"datetime"!==e||(e="datetime-local"),this.setPropertyValue("inputType",e.toLowerCase()),this.isLoadingFromJson||(this.min=void 0,this.max=void 0,this.step=void 0),this.updateMaskAdapter()}getMaxLength(){return this.isTextInput?super.getMaxLength():null}runConditionCore(e){super.runConditionCore(e),(this.minValueExpression||this.maxValueExpression)&&this.setRenderedMinMax(e)}getDisplayValueCore(e,t){return this.maskTypeIsEmpty||a.isValueEmpty(t)?super.getDisplayValueCore(e,t):this.maskInstance.getMaskedValue(t)}isLayoutTypeSupported(e){return!0}get inputSize(){return this.getPropertyValue("inputSize")}set inputSize(e){this.setPropertyValue("inputSize",e)}get size(){return this.inputSize}set size(e){this.inputSize=e}get isTextInput(){return["text","search","tel","url","email","password"].indexOf(this.inputType)>-1}get renderedInputSize(){return this.getPropertyValue("renderedInputSize",void 0,()=>{const e=this.calInputSize();return e>0?e:void 0})}get inputWidth(){return this.getPropertyValue("inputWidth",void 0,()=>this.calInputSize()>0?"auto":"")}calInputSize(){if(!this.isTextInput)return 0;let e=this.inputSize>0?this.inputSize:0;return e<1&&this.parent&&this.parent.inputSize&&(e=this.parent.inputSize),e}resetInputSize(){this.resetPropertyValue("renderedInputSize"),this.resetPropertyValue("inputWidth")}get autocomplete(){return this.getPropertyValue("autocomplete")}set autocomplete(e){this.setPropertyValue("autocomplete",e)}get min(){return this.getPropertyValue("min")}set min(e){this.isValueExpression(e)?this.minValueExpression=e.substring(1):this.setPropertyValue("min",e)}get max(){return this.getPropertyValue("max")}set max(e){this.isValueExpression(e)?this.maxValueExpression=e.substring(1):this.setPropertyValue("max",e)}get minValueExpression(){return this.getPropertyValue("minValueExpression","")}set minValueExpression(e){this.setPropertyValue("minValueExpression",e)}get maxValueExpression(){return this.getPropertyValue("maxValueExpression","")}set maxValueExpression(e){this.setPropertyValue("maxValueExpression",e)}get renderedMin(){return this.getPropertyValue("renderedMin")}get renderedMax(){return this.getPropertyValue("renderedMax")}get minErrorText(){return this.getLocalizableStringText("minErrorText")}set minErrorText(e){this.setLocalizableStringText("minErrorText",e)}get locMinErrorText(){return this.getLocalizableString("minErrorText")}get maxErrorText(){return this.getLocalizableStringText("maxErrorText")}set maxErrorText(e){this.setLocalizableStringText("maxErrorText",e)}get locMaxErrorText(){return this.getLocalizableString("maxErrorText")}get isMinMaxType(){return Wn(this)}get maskInstance(){return this.maskSettings}get inputValue(){return this._inputValue||this.maskTypeIsEmpty?this._inputValue:this.maskInstance.getMaskedValue("")}set inputValue(e){let t=e;this._inputValue=e,this.maskTypeIsEmpty||(t=this.maskInstance.getUnmaskedValue(e),this._inputValue=this.maskInstance.getMaskedValue(t),t&&this.maskSettings.saveMaskedValue&&(t=this._inputValue)),this.value=t}getFilteredValue(){return this.getExpressionValue(this.value)}getExpressionValue(e){return!this.maskTypeIsEmpty&&this.maskSettings.saveMaskedValue?this.maskInstance.getUnmaskedValue(e):e}convertToCorrectValue(e){return null!=e&&"string"!=typeof e&&!this.maskTypeIsEmpty&&this.maskSettings.saveMaskedValue?this.maskInstance.getMaskedValue(e):super.convertToCorrectValue(e)}onChangeQuestionValue(e){super.onChangeQuestionValue(e),this.updateInputValue()}updateInputValue(){const e=this.value;this.maskTypeIsEmpty?this._inputValue=e:this.maskSettings.saveMaskedValue?this._inputValue=null!=e?e:this.maskInstance.getMaskedValue(""):this._inputValue=this.maskInstance.getMaskedValue(e)}hasToConvertToUTC(e){return xt.storeUtcDates&&this.isDateTimeLocaleType()&&!!e}createDate(e){return r("question-text",e)}valueForSurveyCore(e){return this.hasToConvertToUTC(e)&&(e=this.createDate(e).toISOString()),super.valueForSurveyCore(e)}valueFromDataCore(e){if(this.hasToConvertToUTC(e)){const t=this.createDate(e);let s=this.createDate(t.getTime()-60*t.getTimezoneOffset()*1e3).toISOString();e=s.substring(0,s.length-2)}return super.valueFromDataCore(e)}onCheckForErrors(e,t,s){super.onCheckForErrors(e,t,s);const n=this.getIsInputTextUpdate();if(!t||!n){if(!this.isOnValueChanged){if(this.isValueLessMin){const t=new Ot(this.getMinMaxErrorText(this.minErrorText,this.getCalculatedMinMax(this.renderedMin)),this);t.onUpdateErrorTextCallback=e=>{e.text=this.getMinMaxErrorText(this.minErrorText,this.getCalculatedMinMax(this.renderedMin))},e.push(t)}if(this.isValueGreaterMax){const t=new Ot(this.getMinMaxErrorText(this.maxErrorText,this.getCalculatedMinMax(this.renderedMax)),this);t.onUpdateErrorTextCallback=e=>{e.text=this.getMinMaxErrorText(this.maxErrorText,this.getCalculatedMinMax(this.renderedMax))},e.push(t)}this.isStepNumberIncorrect&&e.push(new Ot(this.getStepErrorText(),this)),this.dateValidationMessage&&e.push(new Ot(this.dateValidationMessage,this))}if("email"===this.inputType&&!this.validators.some(e=>"emailvalidator"===e.getType())){const t=this.getValidatorTitle(),s=new Ut;s.errorOwner=this;const n=s.validate(this.value,t);n&&n.error&&e.push(n.error)}}}canSetValueToSurvey(){if(!this.isMinMaxType)return!0;const e=!this.isValueLessMin&&!this.isValueGreaterMax;return(!e||this.errors.length>0)&&this.survey&&(this.survey.isValidateOnValueChanging||this.survey.isValidateOnValueChanged)&&this.validate(),e}convertFuncValuetoQuestionValue(e){let t=this.maskTypeIsEmpty?this.inputType:this.maskSettings.getTypeForExpressions();return a.convertValToQuestionVal(e,t)}getMinMaxErrorText(e,t){if(a.isValueEmpty(t))return e;let s=t.toString();return"date"===this.inputType&&t.toDateString&&(s=t.toDateString()),e.replace("{0}",s)}getStepErrorText(){return this.getLocalizationString("stepError").replace("{0}",this.renderedStep)}get isValueLessMin(){return!this.isValueEmpty(this.renderedMin)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)<this.getCalculatedMinMax(this.renderedMin)}get isValueGreaterMax(){return!this.isValueEmpty(this.renderedMax)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)>this.getCalculatedMinMax(this.renderedMax)}get isStepNumberIncorrect(){if("number"!==this.inputType||this.isEmpty()||!a.isNumber(this.renderedStep)||!a.isNumber(this.value))return!1;let e=a.getNumber(this.value),t=a.getNumber(this.renderedStep),s=1;for(;Math.round(t*s)/s!==t&&s<1e6;)s*=10;return e*=s,t*=s,t>0&&e%t!==0}get isDateInputType(){return"date"===this.inputType||this.isDateTimeLocaleType()}isDateTimeLocaleType(){return"datetime-local"===this.inputType}getCalculatedMinMax(e){return this.isValueEmpty(e)?e:this.isDateInputType?this.createDate(e):e}setRenderedMinMax(e=null){const t=(e,t)=>{this.setPropertyValue(e,this.convertFuncValuetoQuestionValue(t))},s=e=>{!e&&this.isDateInputType&&xt.minDate&&(e=xt.minDate),t("renderedMin",e)},n=e=>{!e&&this.isDateInputType&&(e=xt.maxDate),t("renderedMax",e)};this.runExpressionByProperty("minValueExpression",e,e=>{s(e)})||s(this.min),this.runExpressionByProperty("maxValueExpression",e,e=>{n(e)})||n(this.max)}get step(){return this.getPropertyValue("step")}set step(e){this.setPropertyValue("step",e)}get renderedStep(){return this.isValueEmpty(this.step)?"number"!==this.inputType?void 0:"any":this.step}getIsInputTextUpdate(){return!!this.maskTypeIsEmpty&&super.getIsInputTextUpdate()}supportAutoAdvance(){return!this.getIsInputTextUpdate()&&!this.isDateInputType}supportGoNextPageError(){return!this.isDateInputType}get dataList(){return this.locDataList.value}set dataList(e){this.locDataList.value=e}get locDataList(){return this.locDataListValue}get dataListId(){return this.locDataList.hasValue()?this.id+"_datalist":void 0}setNewValue(e){(e=this.correctValueType(e))&&(this.dateValidationMessage=void 0),super.setNewValue(e)}correctValueType(e){if(!e)return e;if("number"===this.inputType||"range"===this.inputType)return a.isNumber(e)?a.getNumber(e):"";if("month"===this.inputType){const t=this.createDate(e),s=0==t.toISOString().indexOf(e)&&-1==e.indexOf("T"),n=(s?t.getUTCMonth():t.getMonth())+1;return(s?t.getUTCFullYear():t.getFullYear())+"-"+(n<10?"0":"")+n}return e}hasPlaceholder(){return!this.isReadOnly&&"range"!==this.inputType}getControlCssClassBuilder(){const e=this.getMaxLength();return super.getControlCssClassBuilder().append(this.cssClasses.constrolWithCharacterCounter,!!e).append(this.cssClasses.characterCounterBig,e>99)}isReadOnlyRenderDiv(){return this.isReadOnly&&"div"===xt.readOnly.textRenderMode}get inputStyle(){var e={};return e.width=this.inputWidth,this.updateTextAlign(e),e}updateTextAlign(e){"auto"!==this.inputTextAlignment?e.textAlign=this.inputTextAlignment:this.maskTypeIsEmpty||"auto"===this.maskSettings.getTextAlignment()||(e.textAlign=this.maskSettings.getTextAlignment())}updateValueOnEvent(e){const t=e.target.value;this.isTwoValueEquals(this.value,t)||(this.inputValue=t)}updateDateValidationMessage(e){this.dateValidationMessage=this.isDateInputType&&e.target?e.target.validationMessage:void 0}onBlurCore(e){this.updateDateValidationMessage(e),this.updateValueOnEvent(e),this.updateRemainingCharacterCounter(e.target.value),super.onBlurCore(e)}onFocusCore(e){this.updateRemainingCharacterCounter(e.target.value),super.onFocusCore(e)}afterRenderQuestionElement(e){e&&(this.input=e instanceof HTMLInputElement?e:e.querySelector("input"),this.createMaskAdapter()),super.afterRenderQuestionElement(e)}beforeDestroyQuestionElement(e){this.deleteMaskAdapter(),this.input=void 0}}me([d({onSet:(e,t)=>{t.onSetMaskType(e)}})],Qn.prototype,"maskType",void 0),me([d()],Qn.prototype,"inputTextAlignment",void 0),me([d()],Qn.prototype,"_inputValue",void 0);const Un=["number","range","date","datetime-local","month","time","week"];function Wn(e){const t=e?e.inputType:"";return!!t&&Un.indexOf(t)>-1}function Gn(e,t){const s=e.split(t);return 2!==s.length?-1:a.isNumber(s[0])&&a.isNumber(s[1])?60*parseFloat(s[0])+parseFloat(s[1]):-1}function Zn(e,t,s,n){let i=n?s:t;if(!Wn(e))return i;if(a.isValueEmpty(t)||a.isValueEmpty(s))return i;if(0===e.inputType.indexOf("date")||"month"===e.inputType){const a="month"===e.inputType,o="question-text-minmax",l=r(o,a?t+"-01":t),u=r(o,a?s+"-01":s);if(!l||!u)return i;if(l>u)return n?t:s}if("week"===e.inputType||"time"===e.inputType)return function(e,t,s){const n=Gn(e,s),i=Gn(t,s);return!(n<0||i<0)&&n>i}(t,s,"week"===e.inputType?"-W":":")?n?t:s:i;if("number"===e.inputType){if(!a.isNumber(t)||!a.isNumber(s))return i;if(a.getNumber(t)>a.getNumber(s))return n?t:s}return"string"==typeof t||"string"==typeof s?i:t>s?n?t:s:i}function Kn(e,t){e&&e.inputType&&(t.inputType="range"!==e.inputType?e.inputType:"number",t.textUpdateMode="onBlur")}I.addClass("text",[{name:"inputType",default:"text",choices:xt.questions.inputTypes},{name:"inputSize:number",alternativeName:"size",minValue:0,dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"],dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"autocomplete",alternativeName:"autoComplete",choices:xt.questions.dataList},{name:"min",dependsOn:"inputType",visibleIf:function(e){return Wn(e)},onPropertyEditorUpdate:function(e,t){Kn(e,t)},onSettingValue:(e,t)=>Zn(e,t,e.max,!1)},{name:"max",dependsOn:"inputType",nextToProperty:"*min",visibleIf:function(e){return Wn(e)},onSettingValue:(e,t)=>Zn(e,e.min,t,!0),onPropertyEditorUpdate:function(e,t){Kn(e,t)}},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Wn(e)}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Wn(e)}},{name:"minErrorText",serializationProperty:"locMinErrorText",dependsOn:"inputType",visibleIf:function(e){return Wn(e)}},{name:"maxErrorText",serializationProperty:"locMaxErrorText",dependsOn:"inputType",visibleIf:function(e){return Wn(e)}},{name:"inputTextAlignment",default:"auto",choices:["left","right","auto"]},{name:"maskType",default:"none",visibleIndex:0,dependsOn:"inputType",visibleIf:e=>"text"===e.inputType||"tel"===e.inputType,choices:e=>Hn()},{name:"maskSettings:masksettings",className:"masksettings",visibleIndex:1,dependsOn:["inputType","maskType"],visibleIf:e=>"text"===e.inputType||"tel"===e.inputType,onGetValue:function(e){return e.maskSettings.getData()},onSetValue:function(e,t){e.maskSettings.setData(t)}},{name:"step:number",dependsOn:"inputType",visibleIf:function(e){return!!e&&("number"===e.inputType||"range"===e.inputType)}},{name:"maxLength:number",default:-1,dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"dataList:string[]",serializationProperty:"locDataList",dependsOn:"inputType",visibleIf:function(e){return!!e&&"text"===e.inputType}}],function(){return new Qn("")},"textbase"),xs.Instance.registerQuestion("text",e=>new Qn(e));class Jn extends P{constructor(e){super(),this.question=e}getRootObj(){return this.question.data}updateValueByItem(e,t){const s=this.question.items;for(let n=0;n<s.length;n++){const i=s[n].question;if(i.getValueName()===e)return t.isFound=!0,void(t.context=i.getValueGetterContext())}}}class Yn extends Qn{get a11y_input_ariaLabel(){return this.locTitle.renderedHtml}get a11y_input_ariaLabelledBy(){return null}get a11y_input_ariaDescribedBy(){return null}}class $n extends he{constructor(e=null,t=null){super(),this.focusIn=()=>{this.editor.focusIn()},this.editorValue=this.createEditor(e),this.maskSettings=this.editorValue.maskSettings,this.editor.questionTitleTemplateCallback=function(){return""},this.editor.titleLocation="left",t&&(this.title=t),this.editor.onPropertyChanged.add((e,t)=>{"maskSettings"!==t.name&&this.onPropertyChanged.fire(this,t)})}getType(){return"multipletextitem"}get id(){return this.editor.id}getOriginalObj(){return this.editor}get name(){return this.editor.name}set name(e){this.editor.name=e}get question(){return this.data}get editor(){return this.editorValue}createEditor(e){return new Yn(e)}addUsedLocales(e){super.addUsedLocales(e),this.editor.addUsedLocales(e)}localeChanged(){super.localeChanged(),this.editor.localeChanged()}locStrsChanged(){super.locStrsChanged(),this.editor.locStrsChanged()}setData(e){this.data=e,e&&(this.editor.defaultValue=e.getItemDefaultValue(this.name),this.editor.setSurveyImpl(this),this.editor.parent=e,this.editor.setParentQuestion(e))}get isRequired(){return this.editor.isRequired}set isRequired(e){this.editor.isRequired=e}get inputType(){return this.editor.inputType}set inputType(e){this.editor.inputType=e}get title(){return this.editor.title}set title(e){this.editor.title=e}get locTitle(){return this.editor.locTitle}get fullTitle(){return this.editor.fullTitle}get maxLength(){return this.editor.maxLength}set maxLength(e){this.editor.maxLength=e}getMaxLength(){var e=this.getSurvey();return a.getMaxLength(this.maxLength,e?e.maxTextLength:-1)}get placeholder(){return this.editor.placeholder}set placeholder(e){this.editor.placeholder=e}get locPlaceholder(){return this.editor.locPlaceholder}get placeHolder(){return this.placeholder}set placeHolder(e){this.placeholder=e}get locPlaceHolder(){return this.locPlaceholder}get requiredErrorText(){return this.editor.requiredErrorText}set requiredErrorText(e){this.editor.requiredErrorText=e}get locRequiredErrorText(){return this.editor.locRequiredErrorText}get inputSize(){return this.editor.inputSize}set inputSize(e){this.editor.inputSize=e}get size(){return this.inputSize}set size(e){this.inputSize=e}get defaultValueExpression(){return this.editor.defaultValueExpression}set defaultValueExpression(e){this.editor.defaultValueExpression=e}get minValueExpression(){return this.editor.minValueExpression}set minValueExpression(e){this.editor.minValueExpression=e}get maxValueExpression(){return this.editor.maxValueExpression}set maxValueExpression(e){this.editor.maxValueExpression=e}get validators(){return this.editor.validators}set validators(e){this.editor.validators=e}getValidators(){return this.validators}get maskType(){return this.editor.maskType}set maskType(e){this.editor.maskType=e,this.maskSettings=this.editor.maskSettings}get maskSettings(){return this.getPropertyValue("maskSettings")}set maskSettings(e){this.setPropertyValue("maskSettings",e),this.editor.maskSettings!==e&&(this.editor.maskSettings=e)}get inputTextAlignment(){return this.editor.inputTextAlignment}set inputTextAlignment(e){this.editor.inputTextAlignment=e}get value(){return this.data?this.data.getMultipleTextValue(this.name):null}set value(e){null!=this.data&&this.data.setMultipleTextValue(this.name,e)}isEmpty(){return this.editor.isEmpty()}onValueChanged(e){this.valueChangedCallback&&this.valueChangedCallback(e)}getSurveyData(){return this}getSurvey(){return this.data?this.data.getSurvey():null}getTextProcessor(){return this.data?this.data.getTextProcessor():null}getValue(e){return this.data?this.data.getMultipleTextValue(e):null}setValue(e,t){this.data&&this.data.setMultipleTextValue(e,t)}getVariable(e){}setVariable(e,t){}getComment(e){return null}setComment(e,t){}getAllValues(){return this.data?this.data.getAllValues():this.value}getFilteredProperties(){return{survey:this.getSurvey()}}findQuestionByName(e){const t=this.getSurvey();return t?t.getQuestionByName(e):null}getEditingSurveyElement(){}getValidatorTitle(){return this.title}get validatedValue(){return this.value}set validatedValue(e){this.value=e}getDataFilteredProperties(){return this.getFilteredProperties()}}class Xn extends ts{static addDefaultItems(e){for(var t=xs.DefaultMutlipleTextItems,s=0;s<t.length;s++)e.addItem(t[s])}constructor(e){super(e),this.isMultipleItemValueChanging=!1,this.createNewArray("items",e=>{e.setData(this),this.survey&&this.survey.multipleTextItemAdded(this,e)}),this.registerPropertyChangedHandlers(["items","colCount","itemErrorLocation"],()=>{this.calcVisibleRows()}),this.registerPropertyChangedHandlers(["inputSize"],()=>{this.resetItemsSize()})}getType(){return"multipletext"}setSurveyImpl(e,t){super.setSurveyImpl(e,t);for(var s=0;s<this.items.length;s++)this.items[s].setData(this)}get isAllowTitleLeft(){return!1}get hasSingleInput(){return!1}get isContainer(){return!0}get id(){return this.getPropertyValue("id")}set id(e){var t;null===(t=this.items)||void 0===t||t.map((t,s)=>t.editor.id=e+"_"+s),this.setPropertyValue("id",e)}onSurveyLoad(){this.editorsOnSurveyLoad(),super.onSurveyLoad(),a.isValueEmpty(this.rows)||this.calcVisibleRows()}setQuestionValue(e,t=!0){super.setQuestionValue(e,t),this.performForEveryEditor(e=>{e.editor.updateValueFromSurvey(e.value)}),this.updateIsAnswered()}onSurveyValueChanged(e){super.onSurveyValueChanged(e),this.performForEveryEditor(e=>{e.editor.onSurveyValueChanged(e.value)})}resetItemsSize(){this.performForEveryEditor(e=>{e.editor.resetInputSize()})}editorsOnSurveyLoad(){this.performForEveryEditor(e=>{e.editor.onSurveyLoad()})}performForEveryEditor(e){for(var t=0;t<this.items.length;t++){var s=this.items[t];s.editor&&e(s)}}get items(){return this.getPropertyValue("items")}set items(e){this.setPropertyValue("items",e)}addItem(e,t=null){var s=this.createTextItem(e,t);return this.items.push(s),s}getItemByName(e){for(var t=0;t<this.items.length;t++)if(this.items[t].name==e)return this.items[t];return null}getElementsInDesign(e=!1){let t;return t=super.getElementsInDesign(e),t.concat(this.items)}addConditionObjectsByContext(e,t){for(var s=0;s<this.items.length;s++){var n=this.items[s];e.push({name:this.getValueName()+"."+n.name,text:this.processedTitle+"."+n.fullTitle,question:this})}}collectNestedQuestionsCore(e,t,s,n){n&&e.push(this),this.items.forEach(i=>i.editor.addNestedQuestion(e,t,s,n))}getConditionJson(e=null,t=null){if(!t)return super.getConditionJson(e);var s=this.getItemByName(t);if(!s)return null;var n=(new V).toJsonObject(s);return n.type="text",n}locStrsChanged(){super.locStrsChanged();for(var e=0;e<this.items.length;e++)this.items[e].locStrsChanged()}localeChanged(){super.localeChanged();for(var e=0;e<this.items.length;e++)this.items[e].localeChanged()}get itemErrorLocation(){return this.getPropertyValue("itemErrorLocation")}set itemErrorLocation(e){this.setPropertyValue("itemErrorLocation",e)}getQuestionErrorLocation(){return"default"!==this.itemErrorLocation?this.itemErrorLocation:this.getErrorLocation()}get showItemErrorOnTop(){return"top"==this.getQuestionErrorLocation()}get showItemErrorOnBottom(){return"bottom"==this.getQuestionErrorLocation()}getChildErrorLocation(e){return this.getQuestionErrorLocation()}isNewValueCorrect(e){return a.isValueObject(e,!0)}supportAutoAdvance(){for(var e=0;e<this.items.length;e++)if(this.items[e].isEmpty())return!1;return!0}get colCount(){return this.getPropertyValue("colCount")}set colCount(e){e<1||e>5||this.setPropertyValue("colCount",e)}get inputSize(){return this.getPropertyValue("inputSize")}set inputSize(e){this.setPropertyValue("inputSize",e)}get itemSize(){return this.inputSize}set itemSize(e){this.inputSize=e}get itemTitleWidth(){return this.getPropertyValue("itemTitleWidth")||""}set itemTitleWidth(e){this.setPropertyValue("itemTitleWidth",e)}onRowCreated(e){return e}calcVisibleRows(){const e=this.colCount,t=this.items;let s,n,i=0,r=[];for(var a=0;a<t.length;a++)0==i&&(s=this.onRowCreated(new ei),n=this.onRowCreated(new ti),this.showItemErrorOnTop?(r.push(n),r.push(s)):(r.push(s),r.push(n))),s.cells.push(new si(t[a],this)),n.cells.push(new ni(t[a],this)),i++,(i>=e||a==t.length-1)&&(i=0,n.onAfterCreated());this.rows=r}getRows(){return a.isValueEmpty(this.rows)&&this.calcVisibleRows(),this.rows}onValueChanged(){super.onValueChanged(),this.onItemValueChanged()}createTextItem(e,t){return new $n(e,t)}onItemValueChanged(){if(!this.isMultipleItemValueChanging)for(var e=0;e<this.items.length;e++){var t=null;this.value&&this.items[e].name in this.value&&(t=this.value[this.items[e].name]),this.items[e].onValueChanged(t)}}runConditionCore(e){super.runConditionCore(e),this.items.forEach(t=>t.editor.runCondition(e))}getIsRunningValidators(){if(super.getIsRunningValidators())return!0;for(var e=0;e<this.items.length;e++)if(this.items[e].editor.isRunningValidators)return!0;return!1}validateElementCore(e){let t=!0;for(var s=0;s<this.items.length;s++)e.isOnValueChanged&&this.items[s].editor.isEmpty()||(t=this.items[s].editor.validateElement(e)&&t);return super.validateElementCore(e)&&t}getAllErrors(){for(var e=super.getAllErrors(),t=0;t<this.items.length;t++){var s=this.items[t].editor.getAllErrors();s&&s.length>0&&(e=e.concat(s))}return e}clearErrors(){super.clearErrors();for(var e=0;e<this.items.length;e++)this.items[e].editor.clearErrors()}getContainsErrors(){var e=super.getContainsErrors();if(e)return e;for(var t=this.items,s=0;s<t.length;s++)if(t[s].editor.containsErrors)return!0;return!1}getIsAnswered(){if(!super.getIsAnswered())return!1;for(var e=0;e<this.items.length;e++){var t=this.items[e].editor;if(t.isVisible&&!t.isAnswered)return!1}return!0}getProgressInfo(){for(var e=[],t=0;t<this.items.length;t++)e.push(this.items[t].editor);return We.getProgressInfoByElements(e,this.isRequired)}getValueGetterContext(){return new Jn(this)}getDisplayValueCore(e,t){if(!t)return t;for(var s={},n=0;n<this.items.length;n++){var i=this.items[n],r=t[i.name];if(!a.isValueEmpty(r)){var o=i.name;e&&i.title&&(o=i.title),s[o]=i.editor.getDisplayValue(e,r)}}return s}allowMobileInDesignMode(){return!0}getMultipleTextValue(e){return this.value?this.value[e]:null}setMultipleTextValue(e,t){this.isMultipleItemValueChanging=!0,this.isValueEmpty(t)&&(t=void 0);var s=this.value;s||(s={}),s[e]=t,this.setNewValue(s),this.isMultipleItemValueChanging=!1}getItemDefaultValue(e){return this.defaultValue?this.defaultValue[e]:null}getTextProcessor(){return this.textProcessor}getAllValues(){return this.data?this.data.getAllValues():null}addElement(e,t){}removeElement(e){return!1}getQuestionTitleLocation(){return"left"}getQuestionTitleWidth(){}getColumsForElement(e){return[]}updateColumns(){}getQuestionStartIndex(){return this.getStartIndex()}getChildrenLayoutType(){return"row"}elementWidthChanged(e){}get elements(){return[]}indexOf(e){return-1}ensureRowsVisibility(){}validateContainerOnly(){}onQuestionValueChanged(e){}getItemLabelCss(e){return(new fe).append(this.cssClasses.itemLabel).append(this.cssClasses.itemLabelDisabled,this.isDisabledStyle).append(this.cssClasses.itemLabelReadOnly,this.isReadOnlyStyle).append(this.cssClasses.itemLabelPreview,this.isPreviewStyle).append(this.cssClasses.itemLabelAnswered,e.editor.isAnswered).append(this.cssClasses.itemLabelAllowFocus,!this.isDesignMode).append(this.cssClasses.itemLabelOnError,e.editor.errors.length>0).append(this.cssClasses.itemWithCharacterCounter,!!e.getMaxLength()).toString()}getItemCss(){return(new fe).append(this.cssClasses.item).toString()}getItemTitleCss(){return(new fe).append(this.cssClasses.itemTitle).toString()}get ariaRole(){return"group"}get ariaRequired(){return null}get ariaInvalid(){return null}}me([c()],Xn.prototype,"rows",void 0);class ei extends he{constructor(){super(...arguments),this.isVisible=!0,this.cells=[]}}me([d()],ei.prototype,"isVisible",void 0),me([c()],ei.prototype,"cells",void 0);class ti extends ei{onAfterCreated(){const e=()=>{this.isVisible=this.cells.some(e=>{var t,s;return(null===(t=e.item)||void 0===t?void 0:t.editor)&&(null===(s=e.item)||void 0===s?void 0:s.editor.hasVisibleErrors)})};this.cells.forEach(t=>{var s,n;(null===(s=t.item)||void 0===s?void 0:s.editor)&&(null===(n=t.item)||void 0===n||n.editor.registerFunctionOnPropertyValueChanged("hasVisibleErrors",e))}),e()}}class si{constructor(e,t){this.item=e,this.question=t,this.isErrorsCell=!1}getClassName(){return(new fe).append(this.question.cssClasses.cell).toString()}get className(){return this.getClassName()}}class ni extends si{constructor(){super(...arguments),this.isErrorsCell=!0}getClassName(){return(new fe).append(super.getClassName()).append(this.question.cssClasses.cellError).append(this.question.cssClasses.cellErrorTop,this.question.showItemErrorOnTop).append(this.question.cssClasses.cellErrorBottom,this.question.showItemErrorOnBottom).toString()}}I.addClass("multipletextitem",[{name:"!name",isUnique:!0},"isRequired:boolean",{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"inputType",default:"text",choices:xt.questions.inputTypes},{name:"maskType",default:"none",visibleIndex:0,dependsOn:"inputType",visibleIf:e=>"text"===e.inputType,choices:e=>Hn()},{name:"maskSettings:masksettings",className:"masksettings",visibleIndex:1,dependsOn:"inputType",visibleIf:e=>"text"===e.inputType,onGetValue:function(e){return e.maskSettings.getData()},onSetValue:function(e,t){e.maskSettings.setData(t)}},{name:"inputTextAlignment",default:"auto",choices:["left","right","auto"]},{name:"title",serializationProperty:"locTitle"},{name:"maxLength:number",default:-1},{name:"inputSize:number",alternativeName:"size",minValue:0},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"defaultValueExpression:expression",visible:!1},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Wn(e)}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Wn(e)}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"}],function(){return new $n("")}),I.addClass("multipletext",[{name:"!items:textitems",className:"multipletextitem",isArray:!0},{name:"inputSize:number",minValue:0,visible:!1,alternativeName:"itemSize"},{name:"colCount:number",default:1,choices:[1,2,3,4,5]},{name:"itemErrorLocation",default:"default",choices:["default","top","bottom"],visible:!1},{name:"itemTitleWidth",category:"layout"}],function(){return new Xn("")},"question"),xs.Instance.registerQuestion("multipletext",e=>{var t=new Xn(e);return Xn.addDefaultItems(t),t});class ii extends vn{constructor(e=""){super(e),this.createLocalizableString("content",this,!0),this.registerPropertyChangedHandlers(["content"],()=>{this.onContentChanged()})}getType(){return"flowpanel"}getChildrenLayoutType(){return"flow"}onSurveyLoad(){super.onSurveyLoad(),this.onContentChanged()}get content(){return this.getLocalizableStringText("content")}set content(e){this.setLocalizableStringText("content",e)}get locContent(){return this.getLocalizableString("content")}get html(){return this.getPropertyValue("html","")}set html(e){this.setPropertyValue("html",e)}onContentChanged(){var e;e=this.onCustomHtmlProducing?this.onCustomHtmlProducing():this.produceHtml(),this.html=e,this.contentChangedCallback&&this.contentChangedCallback()}produceHtml(){for(var e=[],t=/{(.*?(element:)[^$].*?)}/g,s=this.content,n=0,i=null;null!==(i=t.exec(s));){i.index>n&&(e.push(s.substring(n,i.index)),n=i.index);var r=this.getQuestionFromText(i[0]);r?e.push(this.getHtmlForQuestion(r)):e.push(s.substring(n,i.index+i[0].length)),n=i.index+i[0].length}return n<s.length&&e.push(s.substring(n,s.length)),e.join("").replace(new RegExp("<br>","g"),"<br/>")}getQuestionFromText(e){return e=(e=e.substring(1,e.length-1)).replace(ii.contentElementNamePrefix,"").trim(),this.getQuestionByName(e)}getHtmlForQuestion(e){return this.onGetHtmlForQuestion?this.onGetHtmlForQuestion(e):""}getQuestionHtmlId(e){return this.name+"_"+e.id}onAddElement(e,t){super.onAddElement(e,t),this.addElementToContent(e),e.renderWidth=""}onRemoveElement(e){var t=this.getElementContentText(e);this.content=this.content.replace(t,""),super.onRemoveElement(e)}dragDropMoveElement(e,t,s){}addElementToContent(e){if(!this.isLoadingFromJson){var t=this.getElementContentText(e);this.insertTextAtCursor(t)||(this.content=this.content+t)}}insertTextAtCursor(e,t=null){if(!this.isDesignMode||!n.isAvailable())return!1;let s=n.getSelection();if(s.getRangeAt&&s.rangeCount){let n=s.getRangeAt(0);n.deleteContents();const r=new Text(e);if(n.insertNode(r),this.getContent){var i=this.getContent(t);this.content=i}return!0}return!1}getElementContentText(e){return"{"+ii.contentElementNamePrefix+e.name+"}"}}ii.contentElementNamePrefix="element:",I.addClass("flowpanel",[{name:"content:html",serializationProperty:"locContent"}],function(){return new ii},"panel");class ri extends ts{constructor(e){super(e)}getType(){return"nonvalue"}get hasInput(){return!1}get hasTitle(){return!1}getTitleLocation(){return""}get hasComment(){return!1}validateElementCore(e){return!0}getAllErrors(){return[]}supportAutoAdvance(){return!1}addConditionObjectsByContext(e,t){}getConditionJson(e=null,t=null){return null}get ariaRole(){return null}get ariaRequired(){return null}}I.addClass("nonvalue",[{name:"title",visible:!1},{name:"description",visible:!1},{name:"valueName",visible:!1},{name:"enableIf",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"clearIfInvisible",visible:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1},{name:"readOnly",visible:!1},{name:"requiredIf",visible:!1},{name:"validators",visible:!1},{name:"titleLocation",visible:!1},{name:"showTitle",visible:!1,isSerializable:!1},{name:"showCommentArea",visible:!1},{name:"useDisplayValuesInDynamicTexts",alternativeName:"useDisplayValuesInTitle",visible:!1}],function(){return new ri("")},"question");class ai extends ts{constructor(e){super(e)}getType(){return"empty"}}I.addClass("empty",[],function(){return new ai("")},"question");class oi extends Pn{get isExclusive(){return this.getPropertyValue("isExclusive")}set isExclusive(e){this.setPropertyValue("isExclusive",e)}getBaseType(){return"checkboxitem"}onPropertyValueChanged(e,t,s){super.onPropertyValueChanged(e,t,s),"showCommentArea"===e&&this.locOwner&&this.locOwner.onItemHasCommentChanged()}}class li extends En{constructor(e){super(e),this.invisibleOldValues={},this.isChangingValueOnClearIncorrect=!1,this.selectAllItemValue=this.createSelectAllItem(),this.registerPropertyChangedHandlers(["showSelectAllItem","selectAllText"],()=>{this.onVisibleChoicesChanged()}),this.registerPropertyChangedHandlers(["choices"],()=>{this.onItemHasCommentChanged()})}getDefaultItemComponent(){return"survey-checkbox-item"}getType(){return"checkbox"}getItemValueType(){return"checkboxitem"}createSelectAllItem(){const e=this.createItemValue("");return e.value="",e.id="selectall",this.selectAllItemText=this.createLocalizableString("selectAllText",e,!0,"selectAllItemText"),e.locOwner=this,e.setLocText(this.selectAllItemText),e}onCreating(){super.onCreating(),this.createNewArray("renderedValue"),this.createNewArray("value")}getFirstInputElementId(){return this.inputId+"_0"}get valuePropertyName(){return this.getPropertyValue("valuePropertyName")}set valuePropertyName(e){this.setPropertyValue("valuePropertyName",e)}getValuePropertyName(){return this.valuePropertyName||(this.isTheOnlyComment?"":"value")}getQuestionFromArray(e,t){if(e&&e===this.getValuePropertyName()){const e=this.value;if(Array.isArray(e)&&t<e.length)return this}return null}getDependedQuestionsByValueName(e){return e&&this.getValuePropertyName()?[]:super.getDependedQuestionsByValueName(e)}get selectAllItem(){return this.selectAllItemValue}get selectAllText(){return this.getLocalizableStringText("selectAllText")}set selectAllText(e){this.setLocalizableStringText("selectAllText",e)}get locSelectAllText(){return this.getLocalizableString("selectAllText")}get showSelectAllItem(){return this.getPropertyValue("showSelectAllItem")}set showSelectAllItem(e){this.setPropertyValue("showSelectAllItem",e)}get hasSelectAll(){return this.showSelectAllItem}set hasSelectAll(e){this.showSelectAllItem=e}get isAllSelected(){return this.allElementsSelected()}set isAllSelected(e){e?this.selectAll():this.clearValue(!0)}toggleSelectAll(){this.isAllSelected=!this.isAllSelected}allElementsSelected(){if(this.isNoneItemsSelected())return!1;const e=this.getVisibleEnableItems();if(0===e.length)return!1;const t=this.value;if(!t||!Array.isArray(t)||0===t.length)return!1;if(t.length<e.length)return!1;const s=[];for(let e=0;e<t.length;e++)s.push(this.getRealValue(t[e]));for(let t=0;t<e.length;t++)if(s.indexOf(e[t].value)<0)return!1;return!0}isNoneItemsSelected(){const e=this.getNoneItems();for(let t=0;t<e.length;t++)if(this.isItemSelected(e[t]))return!0;return!1}getNoneItems(){const e=new Array;return this.visibleChoices.forEach(t=>{this.isNoneItem(t)&&e.push(t)}),e}selectAll(){const e=[],t=this.getVisibleEnableItems();for(let s=0;s<t.length;s++)e.push(t[s].value);this.renderedValue=e}clickItemHandler(e,t){this.selectItem(e,t)}selectItem(e,t){if(!this.isReadOnlyAttr&&e)if(e===this.selectAllItem)!0===t||!1===t?this.isAllSelected=t:this.toggleSelectAll();else{if(this.isNoneItem(e))this.renderedValue=t?[e.value]:[];else{const s=[].concat(this.renderedValue||[]),n=s.indexOf(e.value);t?n<0&&s.push(e.value):n>-1&&s.splice(n,1),this.renderedValue=s}t&&this.onItemSelected(e)}}isItemSelectedCore(e){if(e===this.selectAllItem)return this.isAllSelected;var t=this.renderedValue;if(!t||!Array.isArray(t))return!1;for(var s=0;s<t.length;s++)if(this.isTwoValueEquals(t[s],e.value))return!0;return!1}hasUnknownValueItem(e,t=!1,s=!0,n=!1){return super.hasUnknownValueItem(this.getRealValue(e),t,s,n)}setCommentValueCore(e,t){if(t=this.trimCommentValue(t),this.isOtherItemByValue(e))super.setCommentValueCore(e,t);else{this.setCommentPropertyValue(e,t);const s=this.getItemValIndexByItemValue(e.value);if(s>-1){const e=this.createValueCopy(),n=e[s];t?n[this.commentPropertyValue]=t:delete n[this.commentPropertyValue],this.value=e}}}getCommentValueByItem(e){const t=this.getItemValIndexByItemValue(e.value);return t>-1?this.value[t][this.commentPropertyValue]:void 0}getItemValIndexByItemValue(e){const t=this.value;if(!Array.isArray(t))return-1;for(let s=0;s<t.length;s++){const n=this.getRealValue(t[s]);if(a.isTwoValueEquals(n,e))return s}return-1}get isTheOnlyComment(){return this.getPropertyValue("isTheOnlyComment",void 0,()=>this.calcIsTheOnlyComment())}calcIsTheOnlyComment(){for(let e=0;e<this.choices.length;e++){const t=this.choices[e];if(t.showCommentArea&&t.value!==this.otherItem.value)return!1}return!0}onItemHasCommentChanged(){this.resetPropertyValue("isTheOnlyComment")}getRealValue(e){if(!e||"object"!=typeof e)return e;const t=this.getValuePropertyName();return t?e[t]:e}getValueFromReal(e){const t=this.getValuePropertyName();if(t){const s={};return s[t]=e,s}return e}get isValueArray(){return!0}get maxSelectedChoices(){return this.getPropertyValue("maxSelectedChoices")}set maxSelectedChoices(e){e<0&&(e=0),this.setPropertyValue("maxSelectedChoices",e),this.filterItems()}get minSelectedChoices(){return this.getPropertyValue("minSelectedChoices")}set minSelectedChoices(e){e<0&&(e=0),this.setPropertyValue("minSelectedChoices",e)}get selectedChoices(){const e=this.renderedValue,t=this.visibleChoices,s=this.selectedItemValues;if(this.isEmpty())return[];const n=this.defaultSelectedItemValues?[].concat(this.defaultSelectedItemValues,t):t,i=e.map(e=>is.getItemByValue(n,e)).filter(e=>!!e);return i.length||s||this.updateSelectedItemValues(),this.validateItemValues(i)}get selectedItems(){return this.selectedChoices}get hasFilteredValue(){return!!this.getValuePropertyName()}getFilteredName(){let e=super.getFilteredName();return this.hasFilteredValue&&(e+=xt.expressionVariables.unwrapPostfix),e}getFilteredValue(e){return e&&this.hasFilteredValue?this.renderedValue:super.getFilteredValue(e)}getMultipleSelectedItems(){return this.selectedChoices}validateItemValues(e){if(e.length)return e;const t=this.selectedItemValues;return t&&t.length?(this.defaultSelectedItemValues=[].concat(t),t):this.renderedValue.map(e=>this.createItemValue(e))}getAnswerCorrectIgnoreOrder(){return!0}onCheckForErrors(e,t,s){if(super.onCheckForErrors(e,t,s),!t&&this.checkMinSelectedChoicesUnreached()){const t=new Ot(this.getLocalizationFormatString("minSelectError",this.minSelectedChoices),this);e.push(t)}}onVisibleChoicesChanged(){super.onVisibleChoicesChanged(),this.updateSelectAllItemProps()}onEnableItemCallBack(e){return!this.shouldCheckMaxSelectedChoices()||this.isItemSelected(e)}onAfterRunItemsEnableCondition(){this.updateSelectAllItemProps();const e=this.maxSelectedChoices<1||this.isOtherSelected||!this.shouldCheckMaxSelectedChoices();this.otherItem.setIsEnabled(e)}updateSelectAllItemProps(){this.hasSelectAll&&this.selectAllItem.setIsEnabled(this.getSelectAllEnabled())}getSelectAllEnabled(){if(!this.hasSelectAll)return!0;let e=this.getVisibleEnableItems().length;const t=this.maxSelectedChoices;return!(t>0&&t<e)&&e>0}getVisibleEnableItems(){const e=new Array,t=this.visibleChoices;for(let s=0;s<t.length;s++){const n=t[s];!n.isEnabled||this.isBuiltInChoice(n)||n.isExclusive||e.push(n)}return e}shouldCheckMaxSelectedChoices(){if(this.maxSelectedChoices<1)return!1;var e=this.value;return(Array.isArray(e)?e.length:0)>=this.maxSelectedChoices}checkMinSelectedChoicesUnreached(){if(this.minSelectedChoices<1)return!1;var e=this.value,t=Array.isArray(e)?e.length:0;return(1!==t||!this.isNoneItemsSelected())&&t<this.minSelectedChoices}getItemClassCore(e,t){return this.value,t.isSelectAllItem=e===this.selectAllItem,(new fe).append(super.getItemClassCore(e,t)).append(this.cssClasses.itemSelectAll,t.isSelectAllItem).toString()}updateValueFromSurvey(e,t){super.updateValueFromSurvey(e,t),this.invisibleOldValues={}}onSurveyLoad(){this.onItemHasCommentChanged(),super.onSurveyLoad()}setDefaultUnknownValue(e){if(Array.isArray(e))if(this.hasActiveChoices){const s=[];let n="";for(t=0;t<e.length;t++){const i=this.getRealValue(e[t]);this.hasUnknownValue(i)?n||(n=i,s.push(this.otherItem.value)):s.push(i)}this.renderedValue=s,this.otherValue=n}else{for(var t=0;t<e.length;t++){const s=this.getRealValue(e[t]);this.addIntoInvisibleOldValues(s)}this.value=e}else super.setDefaultUnknownValue(e)}addIntoInvisibleOldValues(e){this.invisibleOldValues[e]=e}hasValueToClearIncorrectValues(){return super.hasValueToClearIncorrectValues()||!a.isValueEmpty(this.invisibleOldValues)}setNewValue(e){this.isChangingValueOnClearIncorrect||(this.invisibleOldValues={}),e=this.valueFromData(e);var t=this.value;e||(e=[]),t||(t=[]),this.isTwoValueEquals(t,e)||(this.removeNoneItemsValues(t,e),super.setNewValue(e))}getCommentFromValue(e){var t=this.getFirstUnknownIndex(e);return t<0?"":e[t]}getStoreOthersAsComment(){return!this.getValuePropertyName()&&super.getStoreOthersAsComment()}setOtherValueIntoValue(e){var t=this.getFirstUnknownIndex(e);if(t<0)return e;let s=this.otherItem.value;const n=this.getValuePropertyName();if(n){const e={};e[n]=s,s=e}return e.splice(t,1,s),e}getFirstUnknownIndex(e){if(!Array.isArray(e))return-1;for(var t=0;t<e.length;t++)if(this.hasUnknownValueItem(e[t],!1,!1))return t;return-1}removeNoneItemsValues(e,t){if(1===e.length&&1===t.length&&this.getRealValue(e[0])===this.getRealValue(t[0]))return;const s=this.getNoneItems().map(e=>e.value);if(s.length>0){const n=this.noneIndexInArray(e,s),i=this.noneIndexInArray(t,s);if(n.index>-1)if(n.val===i.val)t.length>0&&t.splice(i.index,1);else{const e=this.noneIndexInArray(t,[n.val]);e.index>-1&&e.index<t.length-1&&t.splice(e.index,1)}else i.index>-1&&t.length>1&&t.splice(0,t.length,this.getValueFromReal(i.val))}}noneIndexInArray(e,t){if(!Array.isArray(e))return{index:-1,val:void 0};for(var s=e.length-1;s>=0;s--){const n=t.indexOf(this.getRealValue(e[s]));if(n>-1)return{index:s,val:t[n]}}return{index:-1,val:void 0}}supportSelectAll(){return this.isSupportProperty("showSelectAllItem")}addNonChoicesItems(e,t){super.addNonChoicesItems(e,t),this.supportSelectAll()&&this.addNonChoiceItem(e,this.selectAllItem,t,this.hasSelectAll,xt.specialChoicesOrder.selectAllItem)}isBuiltInChoice(e){return e===this.selectAllItem||super.isBuiltInChoice(e)}isItemInList(e){return e==this.selectAllItem?this.hasSelectAll:super.isItemInList(e)}getDisplayValueEmpty(){return is.getTextOrHtmlByValue(this.visibleChoices.filter(e=>e!=this.selectAllItemValue),void 0)}getDisplayValueCore(e,t){if(!Array.isArray(t))return super.getDisplayValueCore(e,t);const s=this.getValuePropertyName();return this.getDisplayArrayValue(e,t,e=>{let n=t[e];return s&&n[s]&&(n=n[s]),n})}clearIncorrectValuesCore(){this.clearIncorrectAndDisabledValues(!1)}clearDisabledValuesCore(){this.clearIncorrectAndDisabledValues(!0)}clearIncorrectAndDisabledValues(e){var t=this.value,s=!1,n=this.restoreValuesFromInvisible();if(t||0!=n.length){if(!Array.isArray(t)||0==t.length){if(this.isChangingValueOnClearIncorrect=!0,e||(this.showCommentArea?this.value=null:this.clearValue(!0)),this.isChangingValueOnClearIncorrect=!1,0==n.length)return;t=[]}for(var i=[],r=0;r<t.length;r++){const n=this.getRealValue(t[r]);var a=this.canClearValueAnUnknown(n);!e&&!a||e&&!this.isValueDisabled(n)?i.push(t[r]):(s=!0,a&&this.addIntoInvisibleOldValues(t[r]))}for(r=0;r<n.length;r++)i.push(n[r]),s=!0;s&&(this.isChangingValueOnClearIncorrect=!0,0==i.length?this.clearValue(!0):this.value=i,this.isChangingValueOnClearIncorrect=!1)}}restoreValuesFromInvisible(){for(var e=[],t=this.visibleChoices,s=0;s<t.length;s++){const i=t[s];if(i!==this.selectAllItem){var n=t[s].value;a.isTwoValueEquals(n,this.invisibleOldValues[n])&&(this.isItemSelected(i)||e.push(n),delete this.invisibleOldValues[n])}}return e}getConditionJson(e=null,t=null){const s=super.getConditionJson(e,t);return"contains"!=e&&"notcontains"!=e||(s.type="radiogroup"),s.maxSelectedChoices=0,s.minSelectedChoices=0,s}isAnswerCorrect(){return a.isArrayContainsEqual(this.value,this.correctAnswer)}setDefaultValueWithOthers(){this.value=this.renderedValueFromDataCore(this.defaultValue)}getIsItemValue(e,t){return!(!e||!Array.isArray(e))&&e.indexOf(t.value)>=0}valueFromData(e){if(!e)return e;if(!Array.isArray(e))return[super.valueFromData(e)];let t=[];for(let s=0;s<e.length;s++){const n=this.getItemByValue(e[s],this.visibleChoices);n?t.push(this.getChoiceValue(n,e[s],!0)):t.push(e[s])}return t}rendredValueFromData(e){return e=this.convertValueFromObject(e),super.rendredValueFromData(e)}convertValueFromObject(e){if(!this.getValuePropertyName()||!Array.isArray(e))return e;const t=[];for(let s=0;s<e.length;s++)t.push(this.getRealValue(e[s]));return t}renderedValueFromDataCore(e){if(e&&Array.isArray(e)||(e=[]),!this.hasActiveChoices)return e;for(var t=0;t<e.length;t++){if(e[t]==this.otherItem.value)return e;if(this.hasUnknownValueItem(e[t],!0,!1)){this.otherValue=e[t];var s=e.slice();return s[t]=this.otherItem.value,s}}return e}renderedValueToDataCore(e){if(!e||!e.length)return e;const t=[],s=this.createValueCopy();for(var n=0;n<e.length;n++){let i=-1,r=e[n];r===this.otherItem.value&&this.needConvertRenderedOtherToDataValue()?(i=this.getFirstUnknownIndex(s),r=this.otherValue,i>-1&&(s[i]=this.getValueFromReal(this.otherValue))):i=this.getItemValIndexByItemValue(r),i>-1?t.push(s[i]):t.push(this.getValueFromReal(r))}return t}valueToData(e){if(a.isValueEmpty(e))return e;if(Array.isArray(e)||(e=[e]),!this.getValuePropertyName())return e;const t=[];for(let s=0;s<e.length;s++){const n=e[s];t.push("object"==typeof n?n:this.getValueFromReal(n))}return t}selectOtherValueFromComment(e){var t=[];const s=this.renderedValue;if(Array.isArray(s))for(var n=0;n<s.length;n++)s[n]!==this.otherItem.value&&t.push(s[n]);e&&t.push(this.otherItem.value),this.value=t}get checkBoxSvgPath(){return"M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"}get isNewA11yStructure(){return!0}get a11y_input_ariaRole(){return"group"}get a11y_input_ariaRequired(){return null}}I.addClass("checkboxitem",[{name:"isExclusive:boolean",locationInTable:"detail"}],e=>new oi(e),"choiceitem"),I.addClass("checkbox",[{name:"showSelectAllItem:boolean",alternativeName:"hasSelectAll"},{name:"separateSpecialChoices",visible:!0},{name:"maxSelectedChoices:number",default:0,onSettingValue:(e,t)=>{if(t<=0)return 0;const s=e.minSelectedChoices;return s>0&&t<s?s:t}},{name:"minSelectedChoices:number",default:0,onSettingValue:(e,t)=>{if(t<=0)return 0;const s=e.maxSelectedChoices;return s>0&&t>s?s:t}},{name:"selectAllText",serializationProperty:"locSelectAllText",dependsOn:"showSelectAllItem",visibleIf:function(e){return e.hasSelectAll}},{name:"valuePropertyName",category:"data"},{name:"itemComponent",visible:!1,default:"survey-checkbox-item"}],function(){return new li("")},"checkboxbase"),I.getProperty("checkbox","choices").type="checkboxitem[]",xs.Instance.registerQuestion("checkbox",e=>{var t=new li(e);return t.choices=xs.DefaultChoices,t});class ui extends Ee{updateItemState(){this.actions.forEach(e=>{const t=this.isItemSelected(e);e.visible=!this.hideSelectedItems||!t})}constructor(e){super(e),this.onItemClick=e=>{this.isItemDisabled(e)||(this.isExpanded=!1,this.isItemSelected(e)?(this.selectedItems.splice(this.selectedItems.indexOf(e),1)[0],this.onSelectionChanged&&this.onSelectionChanged(e,"removed")):(this.selectedItems.push(e),this.onSelectionChanged&&this.onSelectionChanged(e,"added")))},this.isItemDisabled=e=>void 0!==e.enabled&&!e.enabled,this.isItemSelected=e=>!!this.allowSelection&&this.selectedItems.filter(t=>this.areSameItems(t,e)).length>0,this.setSelectedItems(e.selectedItems||[])}updateState(){this.updateItemState(),this.raiseUpdate({needUpdateIsEmpty:!0})}setSelectedItems(e){this.selectedItems=e,this.updateState()}selectFocusedItem(){super.selectFocusedItem(),this.hideSelectedItems&&this.focusNextVisibleItem()}}me([d()],ui.prototype,"hideSelectedItems",void 0);class di extends kn{get needRenderInput(){return!this.question.isInputReadOnly||!!this.filterStringPlaceholder}locStrsChanged(){super.locStrsChanged(),this.syncFilterStringPlaceholder()}updateListState(){this.listModel.updateState(),this.updateCustomItemValue(),this.syncFilterStringPlaceholder()}syncFilterStringPlaceholder(){this.getSelectedActions().length||this.question.selectedItems.length||this.listModel.focusedItem?this.filterStringPlaceholder=void 0:this.filterStringPlaceholder=this.question.placeholder}getSelectedActions(){return this.listModel.actions.filter(e=>e.selected)}getFocusFirstInputSelector(){return this.listModel.hideSelectedItems&&Pe&&!this.isValueEmpty(this.question.value)?this.itemSelector:super.getFocusFirstInputSelector()}getPopupCssClasses(){return"sv-multi-select-list"}createListModel(){const e=this.getAvailableItems();let t=this.onSelectionChanged;t||(t=(e,t)=>{this.resetFilterString(),"selectall"===e.id?this.selectAllItems():"added"===t&&e.value===xt.noneItemValue?this.selectNoneItem():"added"===t?this.selectItem(e.value):"removed"===t&&this.deselectItem(e.value),this.popupRecalculatePosition(!1),this.closeOnSelect&&(this.popupModel.isVisible=!1)});const s={items:e,onSelectionChanged:t,allowSelection:!1,locOwner:this.question,elementId:this.listElementId},n=new ui(s);return this.setOnTextSearchCallbackForListModel(n),n.forceShowFilter=this.question.choicesLazyLoadEnabled,n}get shouldResetAfterCancel(){return Pe&&!this.closeOnSelect}createPopup(){super.createPopup(),this.popupModel.onFooterActionsCreated.add((e,t)=>{t.actions.push({id:"sv-dropdown-done-button",title:this.doneButtonCaption,innerCss:"sv-popup__button--done",needSpace:!0,action:()=>{this.popupModel.isVisible=!1},enabled:new de(()=>!this.isTwoValueEquals(this.question.renderedValue,this.previousValue))})}),this.popupModel.onVisibilityChanged.add((e,t)=>{this.shouldResetAfterCancel&&t.isVisible&&(this.previousValue=[].concat(this.question.renderedValue||[]))}),this.popupModel.onCancel=()=>{this.shouldResetAfterCancel&&(this.question.renderedValue=this.previousValue,this.updateListState())}}selectAllItems(){this.question.toggleSelectAll(),this.question.isAllSelected&&this.question.hideSelectedItems&&this.popupModel.hide(),this.updateListState()}selectNoneItem(){this.question.renderedValue=[xt.noneItemValue],this.updateListState()}selectItem(e){let t;if(this.allowCustomChoices&&e===this.customItemValue.id){const e=this.createCustomItem();e&&(t=e.id)}else t=e;if(null!=t){let e=[].concat(this.question.renderedValue||[]);e.push(t),this.question.renderedValue=e,this.updateListState()}}deselectItem(e){let t=[].concat(this.question.renderedValue||[]);t.splice(t.indexOf(e),1),this.question.renderedValue=t,this.applyHintString(),this.updateListState()}clear(){super.clear(),this.syncFilterStringPlaceholder()}onClear(e){super.onClear(e),this.updateListState()}setHideSelectedItems(e){this.listModel.hideSelectedItems=e,this.updateListState()}removeLastSelectedItem(){this.deselectItem(this.question.renderedValue[this.question.renderedValue.length-1]),this.popupRecalculatePosition(!1)}constructor(e,t){super(e,t),this.setHideSelectedItems(e.hideSelectedItems),this.syncFilterStringPlaceholder(),this.closeOnSelect=e.closeOnSelect}inputKeyHandler(e){8!==e.keyCode||this.filterString||(this.removeLastSelectedItem(),e.preventDefault(),e.stopPropagation())}setInputStringFromSelectedItem(e){this.question.searchEnabled&&(this.inputString=null)}focusItemOnClickAndPopup(){}onEscape(){}beforeScrollToFocusedItem(e){}afterScrollToFocusedItem(){var e;(null===(e=this.listModel.focusedItem)||void 0===e?void 0:e.selected)?this.hintString="":this.applyHintString(),this.syncFilterStringPlaceholder()}onPropertyChangedHandler(e,t){super.onPropertyChangedHandler(e,t),"value"!==t.name&&"renderedValue"!==t.name&&"placeholder"!==t.name||this.syncFilterStringPlaceholder()}}me([d({defaultValue:""})],di.prototype,"filterStringPlaceholder",void 0),me([d({defaultValue:!0})],di.prototype,"closeOnSelect",void 0),me([d()],di.prototype,"previousValue",void 0),me([d({localizable:{defaultStr:"tagboxDoneButtonCaption"}})],di.prototype,"doneButtonCaption",void 0);class hi extends li{constructor(e){super(e),this.itemDisplayNameMap={},this.onOpened=this.addEvent(),this.createLocalizableString("placeholder",this,!1,!0),this.createLocalizableString("readOnlyText",this,!0),this.deselectAllItemText=this.createLocalizableString("deselectAllText",this.selectAllItem,!0,"deselectAllItemText"),this.registerPropertyChangedHandlers(["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"],()=>{this.updateReadOnlyText()}),this.updateReadOnlyText()}locStrsChanged(){var e;super.locStrsChanged(),this.updateReadOnlyText(),null===(e=this.dropdownListModelValue)||void 0===e||e.locStrsChanged()}updateReadOnlyText(){this.readOnlyText=this.displayValue||this.placeholder}onSelectedItemValuesUpdated(){super.onSelectedItemValuesUpdated(),this.updateReadOnlyText()}getDefaultItemComponent(){return""}get dropdownListModel(){return this.isDisposed||this.dropdownListModelValue||(this.dropdownListModelValue=new di(this)),this.dropdownListModelValue}set dropdownListModel(e){this.dropdownListModelValue=e}get placeholder(){return this.getLocalizableStringText("placeholder")}set placeholder(e){this.setLocalizableStringText("placeholder",e),this.dropdownListModelValue&&this.dropdownListModel.setInputPlaceholder(e)}get locPlaceholder(){return this.getLocalizableString("placeholder")}get readOnlyText(){return this.getLocalizableStringText("readOnlyText")}set readOnlyText(e){this.setLocalizableStringText("readOnlyText",e)}get locReadOnlyText(){return this.getLocalizableString("readOnlyText")}getType(){return"tagbox"}supportMultipleComment(e){return e===this.otherItem}get a11yInputAriaRole(){return"combobox"}get popupModel(){return this.dropdownListModel.popupModel}getControlClass(){return(new fe).append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlEditable,!this.isDisabledStyle&&!this.isReadOnlyStyle&&!this.isPreviewStyle).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()}updateCssClasses(e,t){super.updateCssClasses(e,t),mt(e,t)}calcCssClasses(e){const t=super.calcCssClasses(e);return this.dropdownListModelValue&&this.dropdownListModel.updateCssClasses(t.popup,t.list),t}onOpenedCallBack(){this.onOpened.fire(this,{question:this,choices:this.choices})}hasUnknownValue(e,t=!1,s=!0,n=!1){return!this.choicesLazyLoadEnabled&&super.hasUnknownValue(e,t,s,n)}needConvertRenderedOtherToDataValue(){var e;const t=null===(e=this.otherValue)||void 0===e?void 0:e.trim();return!!t&&super.hasUnknownValue(t,!0,!1)}onVisibleChoicesChanged(){super.onVisibleChoicesChanged(),this.dropdownListModelValue&&this.dropdownListModel.updateItems()}getItemIfChoicesNotContainThisValue(e,t){return this.choicesLazyLoadEnabled?this.createItemValue(e,t):super.getItemIfChoicesNotContainThisValue(e,t)}validateItemValues(e){this.updateItemDisplayNameMap();const t=this.renderedValue;if(e.length&&e.length===t.length)return e;const s=this.selectedItemValues;if(!e.length&&s&&s.length)return this.defaultSelectedItemValues=[].concat(s),s;const n=e.map(e=>e.value);return t.filter(e=>-1===n.indexOf(e)).forEach(t=>{const s=this.getItemIfChoicesNotContainThisValue(t,this.itemDisplayNameMap[t]);s&&e.push(s)}),e.sort((e,s)=>t.indexOf(e.value)-t.indexOf(s.value)),e}updateItemDisplayNameMap(){const e=e=>{this.itemDisplayNameMap[e.value]=e.text};(this.defaultSelectedItemValues||[]).forEach(e),(this.selectedItemValues||[]).forEach(e),this.visibleChoices.forEach(e)}getIsQuestionReady(){return super.getIsQuestionReady()&&!this.isChoicesLoading}ensureQuestionIsReady(){super.ensureQuestionIsReady(),this.dropdownListModel&&this.choicesLazyLoadEnabled&&this.dropdownListModel.loadQuestionChoices()}onLoadChoicesFromUrl(e){this.updateCustomChoices(this.value,e),super.onLoadChoicesFromUrl(e)}valueFromData(e,t){const s=super.valueFromData(e);return this.survey&&this.survey.isSettingData()&&this.updateCustomChoices(s,this.visibleChoices),s}updateCustomChoices(e,t){if(null!=e&&e.length>0&&this.allowCustomChoices&&!this.choicesLazyLoadEnabled){this.customChoices.splice(0,this.customChoices.length);const s=[];e.forEach(e=>{t.filter(t=>a.isTwoValueEquals(t.id,e,!1,!1))[0]||s.push(new is(e))}),s.length>0&&this.customChoices.splice(0,this.customChoices.length,...s)}}setIsChoicesLoading(e){this.isChoicesLoading=e,this.updateIsReady()}canAddCustomChoices(){return this.allowCustomChoices}getFirstInputElementId(){return this.inputId+(this.searchEnabled||this.allowCustomChoices?"_0":"")}getInputId(){return this.inputId+"_0"}supportEmptyValidation(){return!0}onBlurCore(e){this.dropdownListModel.onBlur(e),super.onBlurCore(e)}onFocusCore(e){this.dropdownListModel.onFocus(e),super.onFocusCore(e)}allElementsSelected(){const e=super.allElementsSelected();return this.updateSelectAllItemText(e),e}updateSelectAllItemText(e){this.selectAllItem.setLocText(e?this.deselectAllItemText:this.selectAllItemText)}dispose(){super.dispose(),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)}clearValue(e){var t;super.clearValue(e),null===(t=this.dropdownListModelValue)||void 0===t||t.clear()}get showClearButton(){return this.allowClear&&!this.isEmpty()}}me([d()],hi.prototype,"searchMode",void 0),me([d({onSet:(e,t)=>{t.dropdownListModelValue&&t.dropdownListModel.setAllowCustomChoices(e)}})],hi.prototype,"allowCustomChoices",void 0),me([d()],hi.prototype,"allowClear",void 0),me([d({onSet:(e,t)=>{t.dropdownListModelValue&&t.dropdownListModel.setSearchEnabled(e)}})],hi.prototype,"searchEnabled",void 0),me([d({onSet:(e,t)=>{t.dropdownListModelValue&&t.dropdownListModel.setHideSelectedItems(e)}})],hi.prototype,"hideSelectedItems",void 0),me([d({onSet:(e,t)=>{t.dropdownListModelValue&&t.dropdownListModel.setChoicesLazyLoadEnabled(e)}})],hi.prototype,"choicesLazyLoadEnabled",void 0),me([d()],hi.prototype,"choicesLazyLoadPageSize",void 0),me([d({getDefaultValue:()=>xt.tagboxCloseOnSelect})],hi.prototype,"closeOnSelect",void 0),me([d()],hi.prototype,"textWrapEnabled",void 0),I.addClass("tagbox",[{name:"placeholder",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",default:!0},{name:"searchEnabled:boolean",default:!0},{name:"allowCustomChoices:boolean",default:!1,visibleIf:e=>!e.choicesFromQuestion,dependsOn:"choicesFromQuestion"},{name:"textWrapEnabled:boolean",default:!0},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"hideSelectedItems:boolean",default:!1},{name:"closeOnSelect:boolean"},{name:"itemComponent",visible:!1,default:""},{name:"searchMode",default:"contains",choices:["contains","startsWith"]}],function(){return new hi("")},"checkbox"),xs.Instance.registerQuestion("tagbox",e=>{const t=new hi(e);return t.choices=xs.DefaultChoices,t});class ci extends Gs{constructor(){super(...arguments),this.doDragOver=()=>{"imagepicker"!==this.parentElement.getType()&&(this.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button").style.cursor="grabbing")},this.doBanDropHere=()=>{"imagepicker"!==this.parentElement.getType()&&(this.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button").style.cursor="not-allowed")}}get draggedElementType(){return"item-value"}createDraggedElementShortcut(e,t,s){if("imagepicker"===this.parentElement.getType())return this.createImagePickerShortcut(this.draggedElement,e,t,s);const n=i.createElement("div");if(!n)return;n.className="sv-drag-drop-choices-shortcut";const r=t.closest("[data-sv-drop-target-item-value]").cloneNode(!0);r.classList.add("sv-drag-drop-choices-shortcut__content"),r.querySelector(".svc-item-value-controls__drag-icon").style.visibility="visible",r.querySelector(".svc-item-value-controls__remove").style.backgroundColor="transparent",r.classList.remove("svc-item-value--moveup"),r.classList.remove("svc-item-value--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,n.appendChild(r);const a=t.getBoundingClientRect();return n.shortcutXOffset=s.clientX-a.x,n.shortcutYOffset=s.clientY-a.y,this.isBottom=null,"function"==typeof this.onShortcutCreated&&this.onShortcutCreated(n),n}createImagePickerShortcut(e,t,s,n){const r=i.createElement("div");if(!r)return;r.classList.add("sv-drag-drop-image-picker-shortcut");const a=s.closest("[data-sv-drop-target-item-value]");this.imagepickerControlsNode=a.querySelector(".svc-image-item-value-controls");const o=a.querySelector(".sd-imagepicker__image-container");let l=a.querySelector(e.imageLink?"img":".sd-imagepicker__no-image").cloneNode(!0);return this.imagepickerControlsNode&&(this.imagepickerControlsNode.style.display="none"),o.style.width=l.width+"px",o.style.height=l.height+"px",l.style.objectFit="cover",l.style.borderRadius="4px",r.appendChild(l),r}getDropTargetByDataAttributeValue(e){let t;return t=this.parentElement.choices.filter(t=>""+t.value==e)[0],t}getChoices(){const e=this.parentElement;return"ranking"===e.getType()?e.selectToRankEnabled?e.unRankingChoices:e.rankingChoices:e.visibleChoices}isDropTargetValid(e,t){const s=this.getChoices();if("imagepicker"!==this.parentElement.getType()){const e=s.indexOf(this.dropTarget),t=s.indexOf(this.draggedElement);if(t>e&&this.dropTarget.isDragDropMoveUp)return this.dropTarget.isDragDropMoveUp=!1,!1;if(t<e&&this.dropTarget.isDragDropMoveDown)return this.dropTarget.isDragDropMoveDown=!1,!1}return-1!==s.indexOf(e)}isDropTargetDoesntChanged(e){return this.dropTarget===this.prevDropTarget&&e===this.isBottom}calculateIsBottom(e,t){const s=t.getBoundingClientRect();return e>=s.y+s.height/2}afterDragOver(e){const t=this.getChoices(),s=t.indexOf(this.dropTarget),n=t.indexOf(this.draggedElement);if(n<s&&!0===this.isBottom)t.splice(n,1),t.splice(s,0,this.draggedElement);else{if(!(n>s&&!1===this.isBottom))return;t.splice(s,1),t.splice(n,0,this.dropTarget)}"imagepicker"!==this.parentElement.getType()&&(n!==s&&(e.classList.remove("svc-item-value--moveup"),e.classList.remove("svc-item-value--movedown"),this.dropTarget.isDragDropMoveDown=!1,this.dropTarget.isDragDropMoveUp=!1),n>s&&(this.dropTarget.isDragDropMoveDown=!0),n<s&&(this.dropTarget.isDragDropMoveUp=!0),super.ghostPositionChanged())}doDrop(){const e=this.parentElement.choices,t=this.getChoices().filter(t=>-1!==e.indexOf(t)),s=e.indexOf(this.draggedElement);let n=t.indexOf(this.draggedElement);return e.splice(s,1),e.splice(n,0,this.draggedElement),this.parentElement}clear(){this.parentElement&&this.updateVisibleChoices(this.parentElement),this.imagepickerControlsNode&&(this.imagepickerControlsNode.style.display="flex",this.imagepickerControlsNode=null),super.clear()}updateVisibleChoices(e){"ranking"===e.getType()?e.updateRankingChoices():e.updateVisibleChoices()}}class pi extends ci{constructor(){super(...arguments),this.isDragOverRootNode=!1,this.doDragOver=()=>{this.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item").style.cursor="grabbing"},this.reorderRankedItem=(e,t,s)=>{if(t==s)return;const n=e.rankingChoices,i=n[t];e.isValueSetByUser=!0,n.splice(t,1),n.splice(s,0,i),this.updateDraggedElementShortcut(s+1)},this.doBanDropHere=()=>{this.isDragOverRootNode?this.allowDropHere=!0:(this.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item").style.cursor="not-allowed",Pe&&this.parentElement.updateRankingChoices(!0))}}get draggedElementType(){return"ranking-item"}createDraggedElementShortcut(e,t,s){const n=i.createElement("div");if(!n)return;n.className=this.shortcutClass+" sv-ranking-shortcut";const r=t.cloneNode(!0);n.appendChild(r);const a=t.getBoundingClientRect();n.style.left=a.x,n.style.top=a.y,this.domAdapter.rootElement.append(n);const o=n.offsetHeight;let l=s.clientY;return l>a.y+o&&(l=a.y+o-10),n.shortcutXOffset=s.clientX-a.x,n.shortcutYOffset=l-a.y,this.parentElement&&this.parentElement.useFullItemSizeForShortcut&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px"),n}get shortcutClass(){return(new fe).append(this.parentElement.cssClasses.root).append(this.parentElement.cssClasses.rootMobileMod,Ve).toString()}getDropTargetByDataAttributeValue(e){return this.parentElement.rankingChoices[e]}findDropTargetNodeByDragOverNode(e){return this.isDragOverRootNode=this.getIsDragOverRootNode(e),super.findDropTargetNodeByDragOverNode(e)}getIsDragOverRootNode(e){return"string"==typeof e.className&&-1!==e.className.indexOf("sv-ranking")}isDropTargetValid(e,t){return-1!==this.parentElement.rankingChoices.indexOf(e)}calculateIsBottom(e,t){return this.dropTarget instanceof is&&this.draggedElement!==this.dropTarget&&super.calculateIsBottom(e,t)}getIndices(e,t,s){let n=t.indexOf(this.draggedElement),i=s.indexOf(this.dropTarget);return n<0&&this.draggedElement&&(this.draggedElement=is.getItemByValue(t,this.draggedElement.value)||this.draggedElement,n=t.indexOf(this.draggedElement)),-1===i?i=e.value.length:t==s?(!this.isBottom&&n<i&&i--,this.isBottom&&n>i&&i++):t!=s&&this.isBottom&&i++,{fromIndex:n,toIndex:i}}afterDragOver(e){const{fromIndex:t,toIndex:s}=this.getIndices(this.parentElement,this.parentElement.rankingChoices,this.parentElement.rankingChoices);this.reorderRankedItem(this.parentElement,t,s)}updateDraggedElementShortcut(e){var t;if(null===(t=this.domAdapter)||void 0===t?void 0:t.draggedElementShortcut){const t=null!==e?e+"":"";this.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item__index").innerText=t}}ghostPositionChanged(){this.parentElement.currentDropTarget=this.draggedElement,super.ghostPositionChanged()}doDrop(){return this.parentElement.setValue(),this.parentElement}clear(){this.parentElement&&(this.parentElement.dropTargetNodeMove=null,this.parentElement.updateRankingChoices(!0)),super.clear()}}class gi extends pi{constructor(){super(...arguments),this.selectToRank=(e,t,s)=>{const n=[].concat(e.rankingChoices),i=e.unRankingChoices[t];n.splice(s,0,i),this.updateChoices(e,n)},this.unselectFromRank=(e,t,s)=>{const n=[].concat(e.rankingChoices);n.splice(t,1),this.updateChoices(e,n)}}findDropTargetNodeByDragOverNode(e){if("from-container"===e.dataset.ranking||"to-container"===e.dataset.ranking)return e;let t=e.closest("[data-ranking='to-container']"),s=e.closest("[data-ranking='from-container']");return 0===this.parentElement.unRankingChoices.length&&s?s:0===this.parentElement.rankingChoices.length&&t?t:super.findDropTargetNodeByDragOverNode(e)}getDropTargetByDataAttributeValue(e){return this.parentElement.rankingChoices[e]||this.parentElement.unRankingChoices[e]}getDropTargetByNode(e,t){return"to-container"===e.dataset.ranking?"to-container":"from-container"===e.dataset.ranking||e.closest("[data-ranking='from-container']")?"from-container":super.getDropTargetByNode(e,t)}isDropTargetValid(e,t){return"to-container"===e||"from-container"===e||super.isDropTargetValid(e,t)}afterDragOver(e){const t=this.parentElement,s=t.rankingChoices,n=t.unRankingChoices;this.isDraggedElementUnranked&&this.isDropTargetRanked?this.doRankBetween(e,n,s,this.selectToRank):this.isDraggedElementRanked&&this.isDropTargetRanked?this.doRankBetween(e,s,s,this.reorderRankedItem):!this.isDraggedElementRanked||this.isDropTargetRanked||this.doRankBetween(e,s,n,this.unselectFromRank)}doRankBetween(e,t,s,n){const i=this.parentElement;let{fromIndex:r,toIndex:a}=this.getIndices(i,t,s);n(i,r,a,e)}get isDraggedElementRanked(){return-1!==this.parentElement.rankingChoices.indexOf(this.draggedElement)}get isDropTargetRanked(){return"to-container"===this.dropTarget||-1!==this.parentElement.rankingChoices.indexOf(this.dropTarget)}get isDraggedElementUnranked(){return!this.isDraggedElementRanked}updateChoices(e,t){e.isValueSetByUser=!0,e.rankingChoices=t,e.updateUnRankingChoices(t)}}class mi extends li{constructor(e){super(e),this.domNode=null,this.onVisibleChoicesChanged=()=>{if(super.onVisibleChoicesChanged(),!this.carryForwardStartUnranked||this.isValueSetByUser||this.selectToRankEnabled||this.defaultValue||(this.value=[]),1===this.visibleChoices.length&&!this.selectToRankEnabled)return this.value=[],this.value.push(this.visibleChoices[0].value),void this.updateRankingChoices();this.isEmpty()||this.selectToRankEnabled||(this.visibleChoices.length>this.value.length&&this.addToValueByVisibleChoices(),this.visibleChoices.length<this.value.length&&this.removeFromValueByVisibleChoices()),this.updateRankingChoices()},this.localeChanged=()=>{super.localeChanged(),this.updateRankingChoicesSync()},this._rankingChoicesAnimation=new He(this.getChoicesAnimationOptions(!0),e=>{this._renderedRankingChoices=e},()=>this.renderedRankingChoices),this._unRankingChoicesAnimation=new He(this.getChoicesAnimationOptions(!1),e=>{this._renderedUnRankingChoices=e},()=>this.renderedUnRankingChoices),this.rankingChoices=[],this.unRankingChoices=[],this._renderedRankingChoices=[],this._renderedUnRankingChoices=[],this.handlePointerDown=(e,t,s)=>{const n=e.target;this.isDragStartNodeValid(n)&&this.isAllowStartDrag(n,t)&&(this.draggedChoiceValue=t.value,this.draggedTargetNode=s,this.dragOrClickHelper.onPointerDown(e))},this.startDrag=e=>{const t=is.getItemByValue(this.visibleChoices,this.draggedChoiceValue);this.dragDropRankingChoices.startDrag(e,t,this,this.draggedTargetNode)},this.handlePointerUp=(e,t,s)=>{if(!this.selectToRankEnabled)return;const n=e.target;this.isAllowStartDrag(n,t)&&this.handleKeydownSelectToRank(e,t," ",!1)},this.handleKeydown=(e,t)=>{if(!this.isReadOnlyAttr&&!this.isDesignMode){const s=e.key,n=this.rankingChoices.indexOf(t);if(this.selectToRankEnabled)return void this.handleKeydownSelectToRank(e,t);if("ArrowUp"===s&&n||"ArrowDown"===s&&n!==this.rankingChoices.length-1){const t="ArrowUp"==s?n-1:n+1;this.dragDropRankingChoices.reorderRankedItem(this,n,t),this.setValueAfterKeydown(t,"",!0,e)}}},this.focusItem=(e,t)=>{if(this.domNode)if(this.selectToRankEnabled&&t){const s="[data-ranking='"+t+"']";this.domNode.querySelectorAll(s+" ."+this.cssClasses.item)[e].focus()}else this.domNode.querySelectorAll("."+this.cssClasses.item)[e].focus()},this.isValueSetByUser=!1,this.setValue=()=>{const e=[];this.rankingChoices.forEach(t=>{e.push(t.value)}),this.value=e,this.isValueSetByUser=!0},this.registerFunctionOnPropertyValueChanged("selectToRankEnabled",()=>{this.clearValue(!0),this.setDragDropRankingChoices(),this.updateRankingChoicesSync()}),this.dragOrClickHelper=new Ks(this.startDrag)}getType(){return"ranking"}getItemTabIndex(e){if(!this.isDesignMode&&!e.disabled)return 0}supportContainerQueries(){return this.selectToRankEnabled}get rootClass(){return(new fe).append(this.cssClasses.root).append(this.cssClasses.rootMobileMod,this.isMobileMode()).append(this.cssClasses.rootDisabled,this.isDisabledStyle).append(this.cssClasses.rootReadOnly,this.isReadOnlyStyle).append(this.cssClasses.rootPreview,this.isPreviewStyle).append(this.cssClasses.rootDesignMode,!!this.isDesignMode).append(this.cssClasses.itemOnError,this.hasCssError()).append(this.cssClasses.rootDragHandleAreaIcon,"icon"===xt.rankingDragHandleArea).append(this.cssClasses.rootSelectToRankMod,this.selectToRankEnabled).append(this.cssClasses.rootSelectToRankEmptyValueMod,this.isEmpty()).append(this.cssClasses.rootSelectToRankAlignHorizontal,this.selectToRankEnabled&&"horizontal"===this.renderedSelectToRankAreasLayout).append(this.cssClasses.rootSelectToRankAlignVertical,this.selectToRankEnabled&&"vertical"===this.renderedSelectToRankAreasLayout).append(this.cssClasses.rootSelectToRankSwapAreas,this.selectToRankEnabled&&"horizontal"===this.renderedSelectToRankAreasLayout&&this.selectToRankSwapAreas).toString()}isItemSelectedCore(e){return!this.selectToRankEnabled||super.isItemSelectedCore(e)}getItemClassCore(e,t){return(new fe).append(super.getItemClassCore(e,t)).append(this.cssClasses.itemGhostMod,this.currentDropTarget===e).toString()}getContainerClasses(e){let t=!1;const s="to"===e,n="from"===e;return s?t=0===this.renderedRankingChoices.length:n&&(t=0===this.renderedUnRankingChoices.length),(new fe).append(this.cssClasses.container).append(this.cssClasses.containerToMode,s).append(this.cssClasses.containerFromMode,n).append(this.cssClasses.containerEmptyMode,t).toString()}isItemCurrentDropTarget(e){return this.dragDropRankingChoices.dropTarget===e}get ghostPositionCssClass(){return"top"===this.ghostPosition?this.cssClasses.dragDropGhostPositionTop:"bottom"===this.ghostPosition?this.cssClasses.dragDropGhostPositionBottom:""}getItemIndexClasses(e){let t;return t=this.selectToRankEnabled?-1!==this.unRankingChoices.indexOf(e):this.isEmpty(),(new fe).append(this.cssClasses.itemIndex).append(this.cssClasses.itemIndexEmptyMode,t).toString()}getNumberByIndex(e){return this.isEmpty()?"":e+1+""}updateRankingChoicesSync(){this.blockAnimations(),this.updateRankingChoices(),this.releaseAnimations()}setSurveyImpl(e,t){super.setSurveyImpl(e,t),this.setDragDropRankingChoices(),this.updateRankingChoicesSync()}isAnswerCorrect(){return a.isArraysEqual(this.value,this.correctAnswer,!1)}get requireStrictCompare(){return!0}onSurveyValueChanged(e){super.onSurveyValueChanged(e),this.isLoadingFromJson||this.updateRankingChoices()}onSurveyLoad(){this.blockAnimations(),super.onSurveyLoad(),this.updateRankingChoices(),this.releaseAnimations()}updateValueFromSurvey(e,t){super.updateValueFromSurvey(e,t),e&&(this.isValueSetByUser=!0)}addToValueByVisibleChoices(){const e=this.value.slice();this.visibleChoices.forEach(t=>{-1===e.indexOf(t.value)&&e.push(t.value)}),this.value=e}removeFromValueByVisibleChoices(){const e=this.value.slice(),t=this.visibleChoices;for(let s=this.value.length-1;s>=0;s--)is.getItemByValue(t,this.value[s])||e.splice(s,1);this.value=e}getChoicesAnimationOptions(e){return{getKey:e=>e.value,getRerenderEvent:()=>this.onElementRerendered,isAnimationEnabled:()=>this.animationAllowed&&!this.isDesignMode&&this.isVisible&&!!this.domNode,getReorderOptions:(e,t)=>{let s="";return e!==this.currentDropTarget&&(s=t?"sv-dragdrop-movedown":"sv-dragdrop-moveup"),{cssClass:s}},getLeaveOptions:t=>{const s=e?this.renderedRankingChoices:this.renderedUnRankingChoices;return"vertical"==this.renderedSelectToRankAreasLayout&&1==s.length&&s.indexOf(t)>=0?{cssClass:"sv-ranking-item--animate-item-removing-empty"}:{cssClass:"sv-ranking-item--animate-item-removing",onBeforeRunAnimation:e=>{e.style.setProperty("--animation-height",e.offsetHeight+"px")}}},getEnterOptions:t=>{const s=e?this.renderedRankingChoices:this.renderedUnRankingChoices;return"vertical"==this.renderedSelectToRankAreasLayout&&1==s.length&&s.indexOf(t)>=0?{cssClass:"sv-ranking-item--animate-item-adding-empty"}:{cssClass:"sv-ranking-item--animate-item-adding",onBeforeRunAnimation:e=>{e.style.setProperty("--animation-height",e.offsetHeight+"px")}}},getAnimatedElement:t=>{var s;const n=this.cssClasses;let i="";this.selectToRankEnabled&&(!e&&n.containerFromMode?i=ht(n.containerFromMode):e&&n.containerToMode&&(i=ht(n.containerToMode)));const r=e?this.renderedRankingChoices.indexOf(t):this.renderedUnRankingChoices.indexOf(t);return null===(s=this.domNode)||void 0===s?void 0:s.querySelector(`${i} [data-sv-drop-target-ranking-item='${r}']`)},allowSyncRemovalAddition:!0}}get rankingChoicesAnimation(){return this._rankingChoicesAnimation}get unRankingChoicesAnimation(){return this._unRankingChoicesAnimation}get renderedRankingChoices(){return this._renderedRankingChoices}set renderedRankingChoices(e){this.rankingChoicesAnimation.sync(e)}get renderedUnRankingChoices(){return this._renderedUnRankingChoices}set renderedUnRankingChoices(e){this.unRankingChoicesAnimation.sync(e)}updateRenderedRankingChoices(){this.renderedRankingChoices=this.rankingChoices}updateRenderedUnRankingChoices(){this.renderedUnRankingChoices=this.unRankingChoices}updateRankingChoices(e=!1){if(this.selectToRankEnabled)return void this.updateRankingChoicesSelectToRankMode(e);const t=[];e&&(this.rankingChoices=[]),this.isEmpty()?this.rankingChoices=this.visibleChoices:(this.value.forEach(e=>{this.visibleChoices.forEach(s=>{s.value===e&&t.push(s)})}),this.rankingChoices=t)}updateUnRankingChoices(e){const t=[];this.visibleChoices.forEach(e=>{t.push(e)}),e.forEach(e=>{t.forEach((s,n)=>{s.value===e.value&&t.splice(n,1)})}),this.unRankingChoices=t}updateRankingChoicesSelectToRankMode(e){const t=[];this.isEmpty()||this.value.forEach(e=>{this.visibleChoices.forEach(s=>{s.value===e&&t.push(s)})}),this.updateUnRankingChoices(t),this.rankingChoices=t}endLoadingFromJson(){super.endLoadingFromJson(),this.setDragDropRankingChoices()}setDragDropRankingChoices(){this.dragDropRankingChoices=this.createDragDropRankingChoices()}createDragDropRankingChoices(){return this.selectToRankEnabled?new gi(this.survey,null,this.longTap):new pi(this.survey,null,this.longTap)}isDragStartNodeValid(e){return"icon"!==xt.rankingDragHandleArea||e.classList.contains(this.cssClasses.itemIconHoverMod)}isAllowStartDrag(e,t){return!this.isReadOnly&&!this.isDesignMode&&this.canStartDragDueMaxSelectedChoices(e)&&this.canStartDragDueItemEnabled(t)}canStartDragDueMaxSelectedChoices(e){return!this.selectToRankEnabled||(!e.closest("[data-ranking='from-container']")||this.checkMaxSelectedChoicesUnreached())}canStartDragDueItemEnabled(e){return e.enabled}checkMaxSelectedChoicesUnreached(){if(this.maxSelectedChoices<1)return!0;var e=this.value;return(Array.isArray(e)?e.length:0)<this.maxSelectedChoices}afterRenderQuestionElement(e){this.domNode=e,super.afterRenderQuestionElement(e)}beforeDestroyQuestionElement(e){this.domNode=void 0,super.beforeDestroyQuestionElement(e)}supportSelectAll(){return!1}supportOther(){return!1}supportNone(){return!1}supportRefuse(){return!1}supportDontKnow(){return!1}handleKeydownSelectToRank(e,t,s,n=!0){if(this.isDesignMode)return;let i=e.key;if(s&&(i=s)," "!==i&&"ArrowUp"!==i&&"ArrowDown"!==i)return;const r=this.dragDropRankingChoices,a=this.rankingChoices,o=-1!==a.indexOf(t),l=(o?a:this.unRankingChoices).indexOf(t);if(l<0)return;let u;if(" "===i&&!o){if(!this.checkMaxSelectedChoicesUnreached()||!this.canStartDragDueItemEnabled(t))return;return u=this.value.length,r.selectToRank(this,l,u),void this.setValueAfterKeydown(u,"to-container",n,e)}if(!o)return;if(" "===i)return r.unselectFromRank(this,l),u=this.unRankingChoices.indexOf(t),void this.setValueAfterKeydown(u,"from-container",n,e);const d="ArrowUp"===i?-1:"ArrowDown"===i?1:0;0!==d&&(u=l+d,u<0||u>=a.length||(r.reorderRankedItem(this,l,u),this.setValueAfterKeydown(u,"to-container",n,e)))}setValueAfterKeydown(e,t,s=!0,n){this.setValue(),s&&setTimeout(()=>{this.focusItem(e,t)},1),n&&n.preventDefault()}getIconHoverCss(){return(new fe).append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconHoverMod).toString()}getIconFocusCss(){return(new fe).append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconFocusMod).toString()}get longTap(){return this.getPropertyValue("longTap")}set longTap(e){this.setPropertyValue("longTap",e)}getDefaultItemComponent(){return"sv-ranking-item"}get selectToRankEnabled(){return this.getPropertyValue("selectToRankEnabled",!1)}set selectToRankEnabled(e){this.setPropertyValue("selectToRankEnabled",e)}get selectToRankSwapAreas(){return this.getPropertyValue("selectToRankSwapAreas",!1)}set selectToRankSwapAreas(e){this.setPropertyValue("selectToRankSwapAreas",e)}get selectToRankAreasLayout(){return this.getPropertyValue("selectToRankAreasLayout")}set selectToRankAreasLayout(e){this.setPropertyValue("selectToRankAreasLayout",e)}get renderedSelectToRankAreasLayout(){return this.isMobileMode()?"vertical":this.selectToRankAreasLayout}isMobileMode(){return Ve}get useFullItemSizeForShortcut(){return this.getPropertyValue("useFullItemSizeForShortcut")}set useFullItemSizeForShortcut(e){this.setPropertyValue("useFullItemSizeForShortcut",e)}get dragDropSvgIcon(){return this.cssClasses.dragDropSvgIconId||"#icon-drag-24x24"}get arrowsSvgIcon(){return this.cssClasses.arrowsSvgIconId||"#icon-reorder-24x24"}get dashSvgIcon(){return this.cssClasses.dashSvgIconId||"#icon-rankingundefined-16x16"}get isNewA11yStructure(){return!1}}me([c({onSet:(e,t)=>t.updateRenderedRankingChoices(),onRemove:(e,t,s)=>s.updateRenderedRankingChoices(),onPush:(e,t,s)=>s.updateRenderedRankingChoices()})],mi.prototype,"rankingChoices",void 0),me([c({onSet:(e,t)=>t.updateRenderedUnRankingChoices(),onRemove:(e,t,s)=>s.updateRenderedUnRankingChoices(),onPush:(e,t,s)=>s.updateRenderedUnRankingChoices()})],mi.prototype,"unRankingChoices",void 0),me([c()],mi.prototype,"_renderedRankingChoices",void 0),me([c()],mi.prototype,"_renderedUnRankingChoices",void 0),me([d({defaultValue:null})],mi.prototype,"currentDropTarget",void 0),me([d({defaultValue:!0})],mi.prototype,"carryForwardStartUnranked",void 0),me([d({localizable:{defaultStr:"selectToRankEmptyRankedAreaText"}})],mi.prototype,"selectToRankEmptyRankedAreaText",void 0),me([d({localizable:{defaultStr:"selectToRankEmptyUnrankedAreaText"}})],mi.prototype,"selectToRankEmptyUnrankedAreaText",void 0),I.addClass("ranking",[{name:"showOtherItem",visible:!1,isSerializable:!1},{name:"otherText",visible:!1,isSerializable:!1},{name:"otherErrorText",visible:!1,isSerializable:!1},{name:"storeOthersAsComment",visible:!1,isSerializable:!1},{name:"showNoneItem",visible:!1,isSerializable:!1},{name:"showRefuseItem",visible:!1,isSerializable:!1},{name:"showDontKnowItem",visible:!1,isSerializable:!1},{name:"noneText",visible:!1,isSerializable:!1},{name:"showSelectAllItem",visible:!1,isSerializable:!1},{name:"selectAllText",visible:!1,isSerializable:!1},{name:"colCount:number",visible:!1,isSerializable:!1},{name:"separateSpecialChoices",visible:!1,isSerializable:!1},{name:"longTap",default:!0,visible:!1,isSerializable:!1},{name:"selectToRankEnabled:switch",default:!1,visible:!0,isSerializable:!0},{name:"selectToRankSwapAreas:switch",default:!1,visible:!1,isSerializable:!0,dependsOn:"selectToRankEnabled"},{name:"selectToRankAreasLayout",default:"horizontal",choices:["horizontal","vertical"],dependsOn:"selectToRankEnabled",visibleIf:e=>!!e.selectToRankEnabled,visible:!0,isSerializable:!0},{name:"selectToRankEmptyRankedAreaText:text",serializationProperty:"locSelectToRankEmptyRankedAreaText",category:"general",dependsOn:"selectToRankEnabled",visibleIf:e=>!!e.selectToRankEnabled},{name:"selectToRankEmptyUnrankedAreaText:text",serializationProperty:"locSelectToRankEmptyUnrankedAreaText",category:"general",dependsOn:"selectToRankEnabled",visibleIf:e=>!!e.selectToRankEnabled},{name:"maxSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:e=>!!e.selectToRankEnabled,isSerializable:!0},{name:"minSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:e=>!!e.selectToRankEnabled,isSerializable:!0},{name:"itemComponent",visible:!1,default:"sv-ranking-item"}],function(){return new mi("")},"checkbox"),xs.Instance.registerQuestion("ranking",e=>{const t=new mi(e);return t.choices=xs.DefaultChoices,t});class vi extends Fn{constructor(e){super(e)}get textAreaModel(){return this.textAreaModelValue||(this.textAreaModelValue=new Jt(this.getTextAreaOptions())),this.textAreaModelValue}getTextAreaOptions(){const e=this,t={question:this,id:()=>this.inputId,propertyNames:["value"],className:()=>this.className,placeholder:()=>this.renderedPlaceholder,isDisabledAttr:()=>this.isDisabledAttr,isReadOnlyAttr:()=>this.isReadOnlyAttr,autoGrow:()=>this.renderedAutoGrow,maxLength:()=>this.getMaxLength(),rows:()=>this.rows,cols:()=>this.cols,ariaRequired:()=>this.a11y_input_ariaRequired,ariaLabel:()=>this.a11y_input_ariaLabel,ariaLabelledBy:()=>this.a11y_input_ariaLabelledBy,ariaDescribedBy:()=>this.a11y_input_ariaDescribedBy,ariaInvalid:()=>this.a11y_input_ariaInvalid,ariaErrormessage:()=>this.a11y_input_ariaErrormessage,getTextValue:()=>this.value,onTextAreaChange:t=>{var s;s=t.target.value,a.isTwoValueEquals(e.value,s,!1,!0,!1)||(e.value=s)},onTextAreaInput:e=>{this.onInput(e)},onTextAreaKeyDown:e=>{this.onKeyDown(e)},onTextAreaFocus:e=>{this.onFocus(e)},onTextAreaBlur:e=>{this.onBlur(e)}};return t}get rows(){return this.getPropertyValue("rows")}set rows(e){this.setPropertyValue("rows",e)}get cols(){return this.getPropertyValue("cols")}set cols(e){this.setPropertyValue("cols",e)}get acceptCarriageReturn(){return this.getPropertyValue("acceptCarriageReturn")}set acceptCarriageReturn(e){this.setPropertyValue("acceptCarriageReturn",e)}get autoGrow(){return this.getPropertyValue("autoGrow")}set autoGrow(e){this.setPropertyValue("autoGrow",e)}get renderedAutoGrow(){const e=this.autoGrow;return void 0===e&&this.survey?this.survey.autoGrowComment:!!e}get allowResize(){return this.getPropertyValue("allowResize")}set allowResize(e){this.setPropertyValue("allowResize",e)}get renderedAllowResize(){const e=this.allowResize;return void 0===e&&this.survey?this.survey.allowResizeComment:!!e}get resizeStyle(){return this.renderedAllowResize?"both":"none"}getType(){return"comment"}afterRenderQuestionElement(e){this.element=(null==e?void 0:e.querySelector(`#${this.inputId}`))||e,super.afterRenderQuestionElement(e)}beforeDestroyQuestionElement(e){super.beforeDestroyQuestionElement(e),this.element=void 0}onInput(e){this.isInputTextUpdate&&(this.value=e.target.value),this.updateRemainingCharacterCounter(e.target.value)}onBlurCore(e){super.onBlurCore(e)}onKeyDown(e){this.onKeyDownPreprocess&&this.onKeyDownPreprocess(e),this.acceptCarriageReturn||"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation())}setNewValue(e){!this.acceptCarriageReturn&&e&&(e=e.replace(new RegExp("(\r\n|\n|\r)","gm"),"")),super.setNewValue(e)}getValueSeparator(){return"\n"}notifyStateChanged(e){super.notifyStateChanged(e),this.isCollapsed||this.textAreaModel.updateElement()}get className(){return(this.cssClasses?this.getControlClass():"panel-comment-root")||void 0}}I.addClass("comment",[{name:"maxLength:number",default:-1},{name:"cols:number",default:50,visible:!1,isSerializable:!1},{name:"rows:number",default:4},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"]},{name:"autoGrow:boolean",defaultFunc:()=>{}},{name:"allowResize:boolean",defaultFunc:()=>{}},{name:"acceptCarriageReturn:boolean",default:!0,visible:!1}],function(){return new vi("")},"textbase"),xs.Instance.registerQuestion("comment",e=>new vi(e));const fi="environment",bi="user";class yi{constructor(){this.canFlipValue=void 0}static clear(){yi.cameraList=void 0,yi.cameraIndex=-1}static setCameraList(e){const t=function(e){const t=e.label.toLocaleLowerCase();return t.indexOf(bi)>-1?bi:t.indexOf(fi)>-1?fi:t.indexOf("front")>-1?bi:t.indexOf("back")>-1?fi:""};yi.clear(),Array.isArray(e)&&e.length>0&&(yi.cameraIndex=-1,e.sort((s,n)=>{if(s===n)return 0;if(s.label!==n.label){const e=t(s),i=t(n);if(e!==i){if(e===bi)return-1;if(i===bi)return 1;if(e===fi)return-1;if(i===fi)return 1}}return e.indexOf(s)<e.indexOf(n)?-1:1})),yi.cameraList=e}hasCamera(e){if(void 0===yi.cameraList){if(yi.mediaDevicesCallback){const t=t=>{this.setVideoInputs(t),this.hasCameraCallback(e)};return void yi.mediaDevicesCallback(t)}"undefined"!=typeof navigator&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(t=>{this.setVideoInputs(t),this.hasCameraCallback(e),this.updateCanFlipValue()}).catch(t=>{yi.cameraList=null,this.hasCameraCallback(e)}):(yi.cameraList=null,this.hasCameraCallback(e))}else this.hasCameraCallback(e)}getMediaConstraints(e){const t=yi.cameraList;if(!Array.isArray(t)||t.length<1)return;yi.cameraIndex<0&&(yi.cameraIndex=0);const s=t[yi.cameraIndex],n={};return s&&s.deviceId?n.deviceId={exact:s.deviceId}:n.facingMode=yi.cameraFacingMode,e&&((null==e?void 0:e.height)&&(n.height={ideal:e.height}),(null==e?void 0:e.width)&&(n.width={ideal:e.width})),{video:n,audio:!1}}startVideo(e,t,s,n){if(!e)return void t(void 0);e.style.width="100%",e.style.height="auto",e.style.height="100%",e.style.objectFit="contain";const i=this.getMediaConstraints({width:s,height:n});navigator.mediaDevices.getUserMedia(i).then(s=>{var n;e.srcObject=s,!(null===(n=yi.cameraList[yi.cameraIndex])||void 0===n?void 0:n.deviceId)&&s.getTracks()[0].getCapabilities().facingMode&&(yi.canSwitchFacingMode=!0,this.updateCanFlipValue()),e.play(),t(s)}).catch(e=>{t(void 0)})}getImageSize(e){return{width:e.videoWidth,height:e.videoHeight}}snap(e,t){if(!e)return!1;if(!i.isAvailable())return!1;const s=i.getDocument().createElement("canvas"),n=this.getImageSize(e);s.height=n.height,s.width=n.width;let r=s.getContext("2d");return r.clearRect(0,0,s.width,s.height),r.drawImage(e,0,0,s.width,s.height),s.toBlob(t,"image/png"),!0}updateCanFlipValue(){const e=yi.cameraList;this.canFlipValue=Array.isArray(e)&&e.length>1||yi.canSwitchFacingMode,this.onCanFlipChangedCallback&&this.onCanFlipChangedCallback(this.canFlipValue)}canFlip(e){return void 0===this.canFlipValue&&this.updateCanFlipValue(),e&&(this.onCanFlipChangedCallback=e),this.canFlipValue}flip(){this.canFlip()&&(yi.canSwitchFacingMode?yi.cameraFacingMode=yi.cameraFacingMode===bi?"environment":bi:yi.cameraIndex>=yi.cameraList.length-1?yi.cameraIndex=0:yi.cameraIndex++)}hasCameraCallback(e){e(Array.isArray(yi.cameraList))}setVideoInputs(e){const t=[];e.forEach(e=>{"videoinput"===e.kind&&t.push(e)}),yi.setCameraList(t.length>0?t:null)}}function Ci(e,t,s){const n=atob(e.split(",")[1]),i=new Uint8Array(n.split("").map(e=>e.charCodeAt(0))).buffer;return new File([i],t,{type:s})}yi.cameraIndex=-1,yi.cameraFacingMode=bi,yi.canSwitchFacingMode=!1;class wi extends ts{constructor(){super(...arguments),this.isUploading=!1,this.onUploadStateChanged=this.addEvent(),this.onStateChanged=this.addEvent()}stateChanged(e){this.currentState!=e&&("loading"===e&&(this.isUploading=!0),"loaded"===e&&(this.isUploading=!1),"error"===e&&(this.isUploading=!1),this.currentState=e,this.onStateChanged.fire(this,{state:e}),this.onUploadStateChanged.fire(this,{state:e}))}get showLoadingIndicator(){return this.isUploading}get storeDataAsText(){return this.getPropertyValue("storeDataAsText")}set storeDataAsText(e){this.setPropertyValue("storeDataAsText",e)}get waitForUpload(){return this.getPropertyValue("waitForUpload")}set waitForUpload(e){this.setPropertyValue("waitForUpload",e)}clearValue(e){this.clearOnDeletingContainer(),super.clearValue(e)}clearOnDeletingContainer(){this.survey&&this.survey.clearFiles(this,this.name,this.value,null,()=>{})}onCheckForErrors(e,t,s){super.onCheckForErrors(e,t,s),this.isUploading&&this.waitForUpload&&e.push(new kt(this.getLocalizationString("uploadingFile"),this))}uploadFiles(e){this.survey&&(this.stateChanged("loading"),this.survey.uploadFiles(this,this.name,e,(e,t)=>{Array.isArray(e)&&(this.setValueFromResult(e),Array.isArray(t)&&(t.forEach(e=>this.errors.push(new kt(e,this))),this.stateChanged("error"))),"success"===e&&Array.isArray(t)&&this.setValueFromResult(t),"error"===e&&("string"==typeof t&&this.errors.push(new kt(t,this)),Array.isArray(t)&&t.length>0&&t.forEach(e=>this.errors.push(new kt(e,this))),this.stateChanged("error")),this.stateChanged("loaded")}))}loadPreview(e){}onChangeQuestionValue(e){super.onChangeQuestionValue(e),this.stateChanged(this.isEmpty()?"empty":"loaded")}getIsQuestionReady(){return super.getIsQuestionReady()&&!this.isFileLoading}get isFileLoading(){return this.isFileLoadingValue}set isFileLoading(e){this.isFileLoadingValue=e,this.updateIsReady()}}me([d()],wi.prototype,"isUploading",void 0),me([d({defaultValue:"empty"})],wi.prototype,"currentState",void 0);class xi extends he{static getId(){return"sv_sfp_"+xi.pageCounter++}constructor(e,t){super(),this.question=e,this.index=t,this.id=xi.getId()}get css(){return this.question.cssClasses.page}}xi.pageCounter=0,me([c({})],xi.prototype,"items",void 0);class _i extends wi{get fileNavigatorVisible(){const e=this.showLoadingIndicator,t=this.isPlayingVideo,s=this.containsMultiplyFiles,n=this.pageSize<this.previewValue.length;return!e&&!t&&s&&n}get pagesCount(){return Math.ceil(this.previewValue.length/this.pageSize)}get actionsContainerVisible(){const e=this.showLoadingIndicator,t=this.isPlayingVideo;return!e&&!t}constructor(e){super(e),this.isDragging=!1,this.fileNavigator=new Ce,this.canFlipCameraValue=void 0,this.prevPreviewLength=0,this.isClearingFiles=!1,this._renderedPages=[],this.pagesAnimation=new Qe(this.getPagesAnimationOptions(),e=>{this._renderedPages=e},()=>this.renderedPages),this.calcAvailableItemsCount=(e,t,s)=>{let n=Math.floor(e/(t+s));return(n+1)*(t+s)-s<=e&&n++,n},this.dragCounter=0,this.onDragEnter=e=>{this.canDragDrop()&&(e.preventDefault(),this.isDragging=!0,this.dragCounter++)},this.onDragOver=e=>{if(!this.canDragDrop())return e.returnValue=!1,!1;e.dataTransfer.dropEffect="copy",e.preventDefault()},this.onDrop=e=>{if(this.canDragDrop()){this.isDragging=!1,this.dragCounter=0,e.preventDefault();let t=e.dataTransfer;this.onChange(t)}},this.onDragLeave=e=>{this.canDragDrop()&&(this.dragCounter--,0===this.dragCounter&&(this.isDragging=!1))},this.doChange=e=>{var t=e.target||e.srcElement;this.onChange(t)},this.doClean=()=>{this.needConfirmRemoveFile?Je({message:this.confirmRemoveAllMessage,funcOnYes:()=>{this.clearFilesCore()},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog}):this.clearFilesCore()},this.doDownloadFileFromContainer=e=>{e.stopPropagation();const t=e.currentTarget;if(t&&t.getElementsByTagName){const e=t.getElementsByTagName("a")[0];null==e||e.click()}},this.doDownloadFile=(e,t)=>{e.stopPropagation(),Ye()&&(e.preventDefault(),function(e,t){try{const s=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(s.length),r=new Uint8Array(i);for(let e=0;e<s.length;e++)r[e]=s.charCodeAt(e);const a=new Blob([i],{type:n});navigator&&navigator.msSaveBlob&&navigator.msSaveOrOpenBlob(a,t)}catch(e){}}(t.content,t.name))},this.createLocalizableString("takePhotoCaption",this,!1,!0),this.createLocalizableString("clearCaption",this,!1,!0),this.actionsContainer=new Ce,this.actionsContainer.locOwner=this,this.fileIndexAction=new De({id:"fileIndex",title:this.getFileIndexCaption(),enabled:!1}),this.prevFileAction=new De({id:"prevPage",iconSize:16,action:()=>{this.navigationDirection="left",this.indexToShow=this.previewValue.length&&(this.indexToShow-1+this.pagesCount)%this.pagesCount||0,this.fileIndexAction.title=this.getFileIndexCaption()}}),this.nextFileAction=new De({id:"nextPage",iconSize:16,action:()=>{this.navigationDirection="right",this.indexToShow=this.previewValue.length&&(this.indexToShow+1)%this.pagesCount||0,this.fileIndexAction.title=this.getFileIndexCaption()}}),this.takePictureAction=new De({iconName:"icon-takepicture",id:"sv-file-take-picture",iconSize:"auto",innerCss:new de(()=>(new fe).append(this.cssClasses.contextButton).append(this.cssClasses.takePictureButton).toString()),locTitle:this.locTakePhotoCaption,showTitle:!1,action:()=>{this.snapPicture()}}),this.closeCameraAction=new De({iconName:"icon-closecamera",id:"sv-file-close-camera",iconSize:"auto",innerCss:new de(()=>(new fe).append(this.cssClasses.contextButton).append(this.cssClasses.closeCameraButton).toString()),action:()=>{this.stopVideo()}}),this.changeCameraAction=new De({iconName:"icon-changecamera",id:"sv-file-change-camera",iconSize:"auto",innerCss:new de(()=>(new fe).append(this.cssClasses.contextButton).append(this.cssClasses.changeCameraButton).toString()),visible:new de(()=>this.canFlipCamera()),action:()=>{this.flipCamera()}}),this.chooseFileAction=new De({iconName:"icon-choosefile",id:"sv-file-choose-file",iconSize:"auto",data:{question:this},enabledIf:()=>!this.isInputReadOnly,component:"sv-file-choose-btn"}),this.startCameraAction=new De({iconName:"icon-takepicture_24x24",id:"sv-file-start-camera",iconSize:"auto",locTitle:this.locTakePhotoCaption,showTitle:new de(()=>!this.isAnswered),enabledIf:()=>!this.isInputReadOnly,action:()=>{this.startVideo()}}),this.cleanAction=new De({iconName:"icon-clear",id:"sv-file-clean",iconSize:"auto",locTitle:this.locClearButtonCaption,showTitle:!1,enabledIf:()=>!this.isInputReadOnly,innerCss:new de(()=>this.cssClasses.removeButton),action:()=>{this.doClean()}}),[this.closeCameraAction,this.changeCameraAction,this.takePictureAction].forEach(e=>{e.cssClasses={}}),this.registerFunctionOnPropertiesValueChanged(["sourceType","currentMode","isAnswered"],()=>{this.updateActionsVisibility()}),this.actionsContainer.actions=[this.chooseFileAction,this.startCameraAction,this.cleanAction],this.fileNavigator.actions=[this.prevFileAction,this.fileIndexAction,this.nextFileAction]}get videoId(){return this.id+"_video"}get hasVideoUI(){return"file"!==this.currentMode}get hasFileUI(){return"camera"!==this.currentMode}startVideo(){"file"===this.currentMode||this.isDesignMode||this.isPlayingVideo||(this.setIsPlayingVideo(!0),setTimeout(()=>{this.startVideoInCamera()},0))}get videoHtmlElement(){var e;return null===(e=this.rootElement)||void 0===e?void 0:e.querySelector(`#${this.videoId}`)}startVideoInCamera(){this.camera.startVideo(this.videoHtmlElement,e=>{this.videoStream=e,e||this.stopVideo()},it(this.imageWidth),it(this.imageHeight))}stopVideo(){this.setIsPlayingVideo(!1),this.closeVideoStream()}snapPicture(){this.isPlayingVideo&&(this.camera.snap(this.videoHtmlElement,e=>{if(e){const t=new File([e],"snap_picture.png",{type:"image/png"});this.loadFiles([t])}}),this.stopVideo())}canFlipCamera(){return void 0===this.canFlipCameraValue&&(this.canFlipCameraValue=this.camera.canFlip(e=>{this.canFlipCameraValue=e})),this.canFlipCameraValue}flipCamera(){this.canFlipCamera()&&(this.closeVideoStream(),this.camera.flip(),this.startVideoInCamera())}closeVideoStream(){this.videoStream&&(this.videoStream.getTracks().forEach(e=>{e.stop()}),this.videoStream=void 0)}onHidingContent(){super.onHidingContent(),this.stopVideo()}updateElementCssCore(e){super.updateElementCssCore(e),this.prevFileAction.iconName=this.cssClasses.leftIconId,this.nextFileAction.iconName=this.cssClasses.rightIconId,this.updateCurrentMode()}getFileIndexCaption(){return this.getLocalizationFormatString("indexText",this.indexToShow+1,this.pagesCount)}updateFileNavigator(){this.updatePages(),this.navigationDirection=void 0,this.indexToShow=this.previewValue.length&&(this.indexToShow+this.pagesCount)%this.pagesCount||0,this.fileIndexAction.title=this.getFileIndexCaption()}updateRenderedPages(){this.pages&&this.pages[this.indexToShow]&&(this.renderedPages=[this.pages[this.indexToShow]])}updatePages(){let e;this.blockAnimations(),this.pages=[],this.renderedPages=[],this.previewValue.forEach((t,s)=>{s%this.pageSize==0&&(e=new xi(this,this.pages.length),this.pages.push(e)),e.items.push(t)}),this.releaseAnimations(),this.updateRenderedPages()}previewValueChanged(){this.navigationDirection=void 0,this.previewValue.length!==this.prevPreviewLength&&(this.previewValue.length>0?this.prevPreviewLength>this.previewValue.length?this.indexToShow>=this.pagesCount&&this.indexToShow>0&&(this.indexToShow=this.pagesCount-1,this.navigationDirection="left-delete"):this.indexToShow=Math.floor(this.prevPreviewLength/this.pageSize):this.indexToShow=0),this.updatePages(),this.fileIndexAction.title=this.getFileIndexCaption(),this.containsMultiplyFiles=this.previewValue.length>1,this.previewValue.length>0&&!this.calculatedGapBetweenItems&&!this.calculatedItemWidth&&setTimeout(()=>{this.processResponsiveness(0,this._width)},1),this.prevPreviewLength=this.previewValue.length}getType(){return"file"}onChangeQuestionValue(e){super.onChangeQuestionValue(e),this.isLoadingFromJson||this.loadPreview(e)}get showPreview(){return this.getPropertyValue("showPreview")}set showPreview(e){this.setPropertyValue("showPreview",e)}get allowMultiple(){return this.getPropertyValue("allowMultiple")}set allowMultiple(e){this.setPropertyValue("allowMultiple",e)}get imageHeight(){return this.getPropertyValue("imageHeight")}set imageHeight(e){this.setPropertyValue("imageHeight",e)}get imageWidth(){return this.getPropertyValue("imageWidth")}set imageWidth(e){this.setPropertyValue("imageWidth",e)}get acceptedTypes(){return this.getPropertyValue("acceptedTypes")}set acceptedTypes(e){this.setPropertyValue("acceptedTypes",e)}get allowImagesPreview(){return this.getPropertyValue("allowImagesPreview")}set allowImagesPreview(e){this.setPropertyValue("allowImagesPreview",e)}get maxSize(){return this.getPropertyValue("maxSize")}set maxSize(e){this.setPropertyValue("maxSize",e)}chooseFile(e){if(!this.rootElement)return;const t=this.rootElement.querySelector(`#${this.inputId}`);t&&(e.preventDefault(),e.stopImmediatePropagation(),t&&(this.survey?this.survey.chooseFiles(t,e=>this.loadFiles(e),{element:this,elementType:this.getType(),propertyName:this.name}):t.click()))}get needConfirmRemoveFile(){return this.getPropertyValue("needConfirmRemoveFile")}set needConfirmRemoveFile(e){this.setPropertyValue("needConfirmRemoveFile",e)}getConfirmRemoveMessage(e){return this.confirmRemoveMessage.format(e)}get takePhotoCaption(){return this.getLocalizableStringText("takePhotoCaption")}set takePhotoCaption(e){this.setLocalizableStringText("takePhotoCaption",e)}get locTakePhotoCaption(){return this.getLocalizableString("takePhotoCaption")}get clearButtonCaption(){return this.getLocalizableStringText("clearCaption")}set clearButtonCaption(e){this.setLocalizableStringText("clearCaption",e)}get locClearButtonCaption(){return this.getLocalizableString("clearCaption")}get locRenderedPlaceholder(){return void 0===this.locRenderedPlaceholderValue&&(this.locRenderedPlaceholderValue=new de(()=>{const e=this.isReadOnly,t=!this.isDesignMode&&this.hasFileUI||this.isDesignMode&&"camera"!=this.sourceType,s=!this.isDesignMode&&this.hasVideoUI||this.isDesignMode&&"file"!=this.sourceType;let n;return n=e?this.locNoFileChosenCaption:t&&s?this.locFileOrPhotoPlaceholder:t?this.locFilePlaceholder:this.locPhotoPlaceholder,n})),this.locRenderedPlaceholderValue}get currentMode(){return this.getPropertyValue("currentMode",this.sourceType)}get isPlayingVideo(){return this.getPropertyValue("isPlayingVideo",!1)}setIsPlayingVideo(e){this.setPropertyValue("isPlayingVideo",e)}updateCurrentMode(){!this.isDesignMode&&this.survey&&("file"!==this.sourceType?this.camera.hasCamera(e=>{this.setPropertyValue("currentMode",e?this.sourceType:"file")}):this.setPropertyValue("currentMode",this.sourceType))}updateActionsVisibility(){const e=this.isDesignMode;this.chooseFileAction.visible=!e&&this.hasFileUI||e&&"camera"!==this.sourceType,this.startCameraAction.visible=!e&&this.hasVideoUI||e&&"file"!==this.sourceType,this.cleanAction.visible=!!this.isAnswered}get inputTitle(){return this.isUploading?this.loadingFileTitle:this.isEmpty()?this.chooseFileTitle:" "}get chooseButtonText(){return this.isEmpty()||this.allowMultiple?this.chooseButtonCaption:this.replaceButtonCaption}clear(e){this.survey&&(this.containsMultiplyFiles=!1,this.isClearingFiles=!0,this.survey.clearFiles(this,this.name,this.value,null,(t,s)=>{"success"===t&&(this.value=void 0,this.errors=[],e&&e(),this.indexToShow=0,this.fileIndexAction.title=this.getFileIndexCaption(),this.isClearingFiles=!1)}))}get renderCapture(){return this.allowCameraAccess?"user":void 0}get multipleRendered(){return this.allowMultiple?"multiple":void 0}get showFileDecorator(){const e=this.isPlayingVideo,t=this.showLoadingIndicator;return!e&&!t}get showDragAreaPlaceholder(){return!this.isAnswered}get showLoadingIndicator(){return this.isUploading||this.isClearingFiles}get allowShowPreview(){const e=this.showLoadingIndicator,t=this.isPlayingVideo;return!e&&!t}get showPreviewContainer(){return this.previewValue&&this.previewValue.length>0}defaultImage(e){return!this.canPreviewImage(e)&&!!this.cssClasses.defaultImage}removeFile(e){this.removeFileByContent(this.value.filter(t=>t.name===e)[0])}removeFileByContent(e){this.survey&&(this.isClearingFiles=!0,this.survey.clearFiles(this,this.name,this.value,e.name,(t,s)=>{if("success"===t){var n=this.value;Array.isArray(n)?this.value=n.filter(t=>!a.isTwoValueEquals(t,e,!0,!1,!1)):this.value=void 0,this.isClearingFiles=!1}}))}setValueFromResult(e){this.value=(this.value||[]).concat(e.map(e=>({name:e.file.name,type:e.file.type,content:e.content})))}loadFiles(e){if(this.survey&&(this.errors=[],this.allFilesOk(e))){var t=()=>{this.stateChanged("loading");var t=[];this.storeDataAsText?e.forEach(s=>{let n=new FileReader;n.onload=i=>{(t=t.concat([{name:s.name,type:s.type,content:n.result}])).length===e.length&&(this.value=(this.value||[]).concat(t))},n.readAsDataURL(s)}):this.uploadFiles(e)};this.allowMultiple?t():this.clear(t)}}get camera(){return this.cameraValue||(this.cameraValue=new yi),this.cameraValue}canPreviewImage(e){return this.allowImagesPreview&&!!e&&this.isFileImage(e)}loadPreview(e){if((!this.showPreview||this.prevLoadedPreviewValue!==e)&&(this.previewValue.splice(0,this.previewValue.length),this.showPreview&&e)){this.prevLoadedPreviewValue=e;var t=Array.isArray(e)?e:e?[e]:[];this.storeDataAsText?(t.forEach(e=>{var t=e.content||e;this.previewValue.push({name:e.name,type:e.type,content:t})}),this.previewValueChanged()):(this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new Vi(this,(e,t)=>{"error"!==e&&(t.forEach(e=>{this.previewValue.push(e)}),this.previewValueChanged()),this.isFileLoading=!1,this._previewLoader.dispose(),this._previewLoader=void 0}),this._previewLoader.load(t))}}allFilesOk(e){var t=this.errors?this.errors.length:0;return(e||[]).forEach(e=>{this.maxSize>0&&e.size>this.maxSize&&this.errors.push(new Pt(this.maxSize,this))}),t===this.errors.length}isFileImage(e){if(!e||!e.content||!e.content.substring)return!1;var t=e.content&&e.content.substring(0,10);return"data:image"===(t=t&&t.toLowerCase())||!!e.type&&0===e.type.toLowerCase().indexOf("image/")}getPlainData(e={includeEmpty:!0}){var t=super.getPlainData(e);if(t&&!this.isEmpty()){t.isNode=!1;var s=Array.isArray(this.value)?this.value:[this.value];t.data=s.map((e,t)=>({name:t,title:"File",value:e.content&&e.content||e,displayValue:e.name&&e.name||e,getString:e=>"object"==typeof e?JSON.stringify(e):e,isNode:!1}))}return t}getImageWrapperCss(e){return(new fe).append(this.cssClasses.imageWrapper).append(this.cssClasses.imageWrapperDefaultImage,this.defaultImage(e)).toString()}getActionsContainerCss(e){return(new fe).append(e.actionsContainer).append(e.actionsContainerAnswered,this.isAnswered).toString()}getRemoveButtonCss(){return(new fe).append(this.cssClasses.removeFileButton).append(this.cssClasses.contextButton).toString()}getChooseFileCss(){const e=this.isAnswered;return(new fe).append(this.cssClasses.chooseFile).append(this.cssClasses.controlDisabled,this.isReadOnly).append(this.cssClasses.chooseFileAsText,!e).append(this.cssClasses.chooseFileAsTextDisabled,!e&&this.isInputReadOnly).append(this.cssClasses.contextButton,e).append(this.cssClasses.chooseFileAsIcon,e).toString()}getReadOnlyFileCss(){return(new fe).append("form-control").append(this.cssClasses.placeholderInput).toString()}get fileRootCss(){return(new fe).append(this.cssClasses.root).append(this.cssClasses.rootDisabled,this.isDisabledStyle).append(this.cssClasses.rootReadOnly,this.isReadOnlyStyle).append(this.cssClasses.rootPreview,this.isPreviewStyle).append(this.cssClasses.rootDragging,this.isDragging).append(this.cssClasses.rootAnswered,this.isAnswered).append(this.cssClasses.single,!this.allowMultiple).append(this.cssClasses.singleImage,!this.allowMultiple&&this.isAnswered&&this.canPreviewImage(this.value[0])).append(this.cssClasses.mobile,this.isMobile).toString()}getFileDecoratorCss(){return(new fe).append(this.cssClasses.fileDecorator).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.fileDecoratorDrag,this.isDragging).toString()}onChange(e){if(!n.isFileReaderAvailable())return;if(!e||!e.files||e.files.length<1)return;let t=[],s=this.allowMultiple?e.files.length:1;for(let n=0;n<s;n++)t.push(e.files[n]);e.value="",this.loadFiles(t)}calcCssClasses(e){const t=super.calcCssClasses(e);return this.actionsContainer.cssClasses=e.actionBar,this.actionsContainer.cssClasses.itemWithTitle=this.actionsContainer.cssClasses.item,this.actionsContainer.cssClasses.item="",this.actionsContainer.cssClasses.itemAsIcon=t.contextButton,this.actionsContainer.containerCss=t.actionsContainer,t}onSurveyLoad(){super.onSurveyLoad(),this.updateCurrentMode(),this.updateActionsVisibility(),this.loadPreview(this.value)}needResponsiveness(){return this.supportResponsiveness()}supportResponsiveness(){return!0}getObservedElementSelector(){return ht(this.cssClasses.dragArea)}getFileListSelector(){return ht(this.cssClasses.fileList)}get renderedPages(){return this._renderedPages}set renderedPages(e){this.pagesAnimation.sync(e)}getPagesAnimationOptions(){return{getEnterOptions:e=>{const t=this.cssClasses.page;return{cssClass:t?(new fe).append(`${t}--enter-from-left`,"left"==this.navigationDirection||"left-delete"==this.navigationDirection).append(`${t}--enter-from-right`,"right"==this.navigationDirection).toString():""}},getLeaveOptions:e=>{const t=this.cssClasses.page;return{cssClass:t?(new fe).append(`${t}--leave-to-left`,"right"==this.navigationDirection).append(`${t}--leave-to-right`,"left"==this.navigationDirection).toString():""}},getAnimatedElement:e=>{var t;return null===(t=this.rootElement)||void 0===t?void 0:t.querySelector(`#${e.id}`)},isAnimationEnabled:()=>this.animationAllowed&&!!this.rootElement,getRerenderEvent:()=>this.onElementRerendered}}triggerResponsiveness(e){e&&(this.calculatedGapBetweenItems=void 0,this.calculatedItemWidth=void 0),super.triggerResponsiveness()}processResponsiveness(e,t){if(this._width=t,this.rootElement&&(!this.calculatedGapBetweenItems||!this.calculatedItemWidth)&&this.allowMultiple){const e=this.getFileListSelector()?this.rootElement.querySelector(this.getFileListSelector()):void 0;if(e){const t=e.querySelector(ht(this.cssClasses.page));if(t){const e=t.querySelector(ht(this.cssClasses.previewItem));this.calculatedGapBetweenItems=Math.ceil(Number.parseFloat(i.getComputedStyle(t).gap)),e&&(this.calculatedItemWidth=Math.ceil(Number.parseFloat(i.getComputedStyle(e).width)))}}}return!(!this.calculatedGapBetweenItems||!this.calculatedItemWidth||(this.pageSize=Math.max(this.calcAvailableItemsCount(t,this.calculatedItemWidth,this.calculatedGapBetweenItems),1),0))}canDragDrop(){return!this.isInputReadOnly&&"camera"!==this.currentMode&&!this.isPlayingVideo}afterRenderQuestionElement(e){super.afterRenderQuestionElement(e),this.rootElement=e}beforeDestroyQuestionElement(e){super.beforeDestroyQuestionElement(e),this.stopVideo(),this.rootElement=void 0}clearFilesCore(){if(this.rootElement){const e=this.rootElement.querySelectorAll("input")[0];e&&(e.value="")}this.clear()}doRemoveFile(e,t){t.stopPropagation(),this.needConfirmRemoveFile?Je({message:this.getConfirmRemoveMessage(e.name),funcOnYes:()=>{this.removeFileCore(e)},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog}):this.removeFileCore(e)}removeFileCore(e){const t=this.previewValue.indexOf(e);this.removeFileByContent(-1===t?e:this.value[t])}dispose(){this.cameraValue=void 0,this.closeVideoStream(),super.dispose()}}me([d()],_i.prototype,"isDragging",void 0),me([c({})],_i.prototype,"previewValue",void 0),me([c({})],_i.prototype,"pages",void 0),me([d({defaultValue:0,onSet:(e,t)=>{t.updateRenderedPages()}})],_i.prototype,"indexToShow",void 0),me([d({defaultValue:1,onSet:(e,t)=>{t.updateFileNavigator()}})],_i.prototype,"pageSize",void 0),me([d({defaultValue:!1})],_i.prototype,"containsMultiplyFiles",void 0),me([d()],_i.prototype,"allowCameraAccess",void 0),me([d({onSet:(e,t)=>{t.isLoadingFromJson||t.updateCurrentMode()}})],_i.prototype,"sourceType",void 0),me([d()],_i.prototype,"canFlipCameraValue",void 0),me([d({localizable:{defaultStr:"confirmRemoveFile"}})],_i.prototype,"confirmRemoveMessage",void 0),me([d({localizable:{defaultStr:"confirmRemoveAllFiles"}})],_i.prototype,"confirmRemoveAllMessage",void 0),me([d({localizable:{defaultStr:"noFileChosen"}})],_i.prototype,"noFileChosenCaption",void 0),me([d({localizable:{defaultStr:"chooseFileCaption"}})],_i.prototype,"chooseButtonCaption",void 0),me([d({localizable:{defaultStr:"replaceFileCaption"}})],_i.prototype,"replaceButtonCaption",void 0),me([d({localizable:{defaultStr:"removeFileCaption"}})],_i.prototype,"removeFileCaption",void 0),me([d({localizable:{defaultStr:"loadingFile"}})],_i.prototype,"loadingFileTitle",void 0),me([d({localizable:{defaultStr:"chooseFile"}})],_i.prototype,"chooseFileTitle",void 0),me([d({localizable:{defaultStr:"fileOrPhotoPlaceholder"}})],_i.prototype,"fileOrPhotoPlaceholder",void 0),me([d({localizable:{defaultStr:"photoPlaceholder"}})],_i.prototype,"photoPlaceholder",void 0),me([d({localizable:{defaultStr:"filePlaceholder"}})],_i.prototype,"filePlaceholder",void 0),me([d()],_i.prototype,"locRenderedPlaceholderValue",void 0),me([d()],_i.prototype,"isClearingFiles",void 0),me([c()],_i.prototype,"_renderedPages",void 0),I.addClass("file",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"showPreview:boolean",default:!0,visible:!1},"allowMultiple:boolean",{name:"allowImagesPreview:boolean",default:!0,dependsOn:"showPreview",visibleIf:e=>!!e.showPreview},"imageHeight","imageWidth","acceptedTypes",{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1},{name:"maxSize:number",default:0},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"validators",visible:!1},{name:"needConfirmRemoveFile:boolean"},{name:"sourceType",choices:["file","camera","file-camera"],default:"file",category:"general",visible:!0},{name:"fileOrPhotoPlaceholder:text",serializationProperty:"locFileOrPhotoPlaceholder",category:"general"},{name:"photoPlaceholder:text",serializationProperty:"locPhotoPlaceholder",category:"general"},{name:"filePlaceholder:text",serializationProperty:"locFilePlaceholder",category:"general"},{name:"allowCameraAccess:switch",category:"general",visible:!1}],function(){return new _i("")},"question"),xs.Instance.registerQuestion("file",e=>new _i(e));class Vi{constructor(e,t){this.fileQuestion=e,this.callback=t,this.loaded=[]}load(e){let t=0;this.loaded=new Array(e.length),e.forEach((s,n)=>{this.fileQuestion.survey&&this.fileQuestion.survey.downloadFile(this.fileQuestion,this.fileQuestion.name,s,(i,r)=>{this.fileQuestion&&this.callback&&("error"!==i?(this.loaded[n]={content:r,name:s.name,type:s.type},t++,t===e.length&&this.callback(i,this.loaded)):this.callback("error",this.loaded))})})}dispose(){this.fileQuestion=void 0,this.callback=void 0}}class Ii extends ri{constructor(e){super(e),this.createLocalizableString("html",this).onGetTextCallback=e=>this.survey&&!this.ignoreHtmlProgressing?this.processHtml(e):e}getType(){return"html"}get isCompositeQuestion(){return!0}getProcessedText(e){return this.ignoreHtmlProgressing?e:super.getProcessedText(e)}get html(){return this.getLocalizableStringText("html","")}set html(e){this.setLocalizableStringText("html",e)}get locHtml(){return this.getLocalizableString("html")}get processedHtml(){return this.processHtml(this.html)}processHtml(e){return this.survey?this.survey.processHtml(e,"html-question"):this.html}get isNewA11yStructure(){return!0}get renderCssRoot(){return(new fe).append(this.cssClasses.root).append(this.cssClasses.nested,this.getIsNested()).toString()||void 0}}I.addClass("html",[{name:"html:html",serializationProperty:"locHtml"},{name:"showNumber",visible:!1},{name:"state",visible:!1},{name:"titleLocation",visible:!1},{name:"descriptionLocation",visible:!1},{name:"errorLocation",visible:!1},{name:"indent",visible:!1},{name:"width",visible:!1}],function(){return new Ii("")},"nonvalue"),xs.Instance.registerQuestion("html",e=>new Ii(e));class Si extends En{constructor(e){super(e)}getDefaultItemComponent(){return"survey-radiogroup-item"}getType(){return"radiogroup"}getFirstInputElementId(){return this.inputId+"_0"}get selectedItem(){return this.getSingleSelectedItem()}get allowClear(){return this.getPropertyValue("allowClear")}set allowClear(e){this.setPropertyValue("allowClear",e)}get showClearButton(){return this.allowClear}set showClearButton(e){this.allowClear=e}get canShowClearButton(){return this.allowClear&&!this.isReadOnly}get clearButtonCaption(){return this.getLocalizationString("clearCaption")}supportAutoAdvance(){var e;return!0===this.isMouseDown&&!(null===(e=this.selectedItem)||void 0===e?void 0:e.showCommentArea)}getConditionJson(e=null,t=null){const s=super.getConditionJson(e,t);return delete s.allowClear,delete s.showClearButton,s}setNewComment(e){this.isMouseDown=!0,super.setNewComment(e),this.isMouseDown=!1}clickItemHandler(e){this.selectItem(e)}isOtherValueUnused(){var e;return!(null===(e=this.selectedItem)||void 0===e?void 0:e.showCommentArea)}getDefaultTitleActions(){const e=[];if(!this.isDesignMode){const t=new De({locTitleName:"clearCaption",id:`sv-clr-btn-${this.id}`,action:()=>{this.clearValue(!0)},innerCss:this.cssClasses.clearButton,visible:new de(()=>this.canShowClearButton)});e.push(t)}return e}get isNewA11yStructure(){return!0}get a11y_input_ariaRole(){return"radiogroup"}}I.addClass("radiogroup",[{name:"allowClear:boolean",alternativeName:"showClearButton"},{name:"separateSpecialChoices",visible:!0},{name:"itemComponent",visible:!1,default:"survey-radiogroup-item"}],function(){return new Si("")},"checkboxbase"),xs.Instance.registerQuestion("radiogroup",e=>{var t=new Si(e);return t.choices=xs.DefaultChoices,t});class Pi extends he{onStringChangedCallback(){this.text=this.itemValue.text}get value(){return this.itemValue.getPropertyValue("value")}get locText(){return this.locString||this.itemValue.locText}constructor(e,t=null){super(),this.itemValue=e,this.locString=t,this.locText.onStringChanged.add(this.onStringChangedCallback.bind(this)),this.onStringChangedCallback()}}me([d({defaultValue:""})],Pi.prototype,"highlight",void 0),me([d({defaultValue:""})],Pi.prototype,"text",void 0),me([d()],Pi.prototype,"style",void 0);class Ti extends is{constructor(e,t,s){super(e,t),this.description=s}}class Ei extends ts{constructor(e){super(e),this.iCounter=0,this.createItemValues("rateValues"),this.createLocalizableString("ratingOptionsCaption",this,!1,!0),this.registerFunctionOnPropertiesValueChanged(["rateMin","rateMax","minRateDescription","maxRateDescription","rateStep","displayRateDescriptionsAsExtremeItems"],()=>this.resetRenderedItems()),this.registerFunctionOnPropertiesValueChanged(["rateType"],()=>{this.setIconsToRateValues(),this.resetRenderedItems(),this.updateRateCount()}),this.registerFunctionOnPropertiesValueChanged(["rateValues"],()=>{this.setIconsToRateValues(),this.resetRenderedItems()}),this.registerSychProperties(["rateValues"],()=>{this.autoGenerate=0==this.rateValues.length,this.setIconsToRateValues(),this.resetRenderedItems()}),this.registerFunctionOnPropertiesValueChanged(["rateColorMode","scaleColorMode"],()=>{this.updateColors(this.survey.themeVariables)}),this.registerFunctionOnPropertiesValueChanged(["displayMode"],()=>{this.updateRenderAsBasedOnDisplayMode(!0)}),this.registerSychProperties(["autoGenerate"],()=>{this.autoGenerate||0!==this.rateValues.length||this.setPropertyValue("rateValues",this.visibleRateValues),this.autoGenerate&&(this.rateValues.splice(0,this.rateValues.length),this.updateRateMax()),this.resetRenderedItems()}),this.createLocalizableString("minRateDescription",this,!0).onStringChanged.add((e,t)=>{this.setPropertyValue("hasMinRateDescription",!e.isEmpty)}),this.createLocalizableString("maxRateDescription",this,!0).onStringChanged.add((e,t)=>{this.setPropertyValue("hasMaxRateDescription",!e.isEmpty)}),this.createLocalizableString("readOnlyText",this,!0),this.registerPropertyChangedHandlers(["value","renderAs","placeholder","choices","visibleChoices"],()=>{this.updateReadOnlyText()}),this.updateReadOnlyText(),this.initPropertyDependencies()}setIconsToRateValues(){"smileys"==this.rateType&&this.rateValues.map(e=>e.icon=this.getItemSmiley(e))}locStrsChanged(){var e;super.locStrsChanged(),this.updateReadOnlyText(),null===(e=this.dropdownListModelValue)||void 0===e||e.locStrsChanged()}updateReadOnlyText(){this.readOnlyText=this.displayValue||this.placeholder}endLoadingFromJson(){super.endLoadingFromJson(),void 0!==this.jsonObj.rateMin&&void 0!==this.jsonObj.rateCount&&void 0===this.jsonObj.rateMax&&this.updateRateMax(),void 0!==this.jsonObj.rateMax&&void 0!==this.jsonObj.rateCount&&void 0===this.jsonObj.rateMin&&this.updateRateMin(),void 0===this.jsonObj.autoGenerate&&void 0!==this.jsonObj.rateValues&&(this.autoGenerate=!this.jsonObj.rateValues.length),this.updateRateCount(),this.setIconsToRateValues()}useRateValues(){return!!this.rateValues.length&&!this.autoGenerate}updateRateMax(){this.rateMax=this.rateMin+this.rateStep*(this.rateCount-1)}updateRateMin(){this.rateMin=this.rateMax-this.rateStep*(this.rateCount-1)}updateRateCount(){let e=0;e=this.useRateValues()?this.rateValues.length:Math.trunc((this.rateMax-this.rateMin)/(this.rateStep||1))+1,e>10&&"smileys"==this.rateDisplayMode&&(e=10),this.rateCount=e,this.rateValues.length>e&&this.rateValues.splice(e,this.rateValues.length-e)}initPropertyDependencies(){this.registerSychProperties(["rateCount"],()=>{if(this.useRateValues())if(this.rateCount<this.rateValues.length){if(this.rateCount>=10&&"smileys"==this.rateDisplayMode)return;this.rateValues.splice(this.rateCount,this.rateValues.length-this.rateCount)}else for(let e=this.rateValues.length;e<this.rateCount;e++)this.rateValues.push(new is(l("choices_Item")+(e+1)));else this.rateMax=this.rateMin+this.rateStep*(this.rateCount-1)}),this.registerSychProperties(["rateMin","rateMax","rateStep","rateValues"],()=>{this.updateRateCount()})}get showSelectedItemLocText(){return!this.readOnly&&!this.inputHasValue&&!!this.selectedItemLocText}get selectedItemLocText(){var e;return!this.readOnly&&(null===(e=this.visibleRateValues.filter(e=>e.value==this.value)[0])||void 0===e?void 0:e.locText)}get rateValues(){return this.getPropertyValue("rateValues")}set rateValues(e){this.setPropertyValue("rateValues",e)}selectItem(e){!this.isReadOnly&&e&&(this.value=e.value)}get rateMin(){return this.getPropertyValue("rateMin")}set rateMin(e){this.setPropertyValue("rateMin",e)}get rateMax(){return this.getPropertyValue("rateMax")}set rateMax(e){this.setPropertyValue("rateMax",e)}get rateStep(){return this.getPropertyValue("rateStep")}set rateStep(e){this.setPropertyValue("rateStep",e)}updateColors(e){function t(e){const t=getComputedStyle(i.getDocumentElement());return t.getPropertyValue&&t.getPropertyValue(e)}function s(s,n){let r=!!e&&e[s];if(r||(r=t(n)),!r)return null;const a=i.createElement("canvas");if(!a)return null;var o=a.getContext("2d");o.fillStyle=r,"#000000"==o.fillStyle&&(o.fillStyle=t(n));const l=o.fillStyle;if(l.startsWith("rgba"))return l.substring(5,l.length-1).split(",").map(e=>+e.trim());var u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return u?[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16),1]:null}"monochrome"!==this.colorMode&&i.isAvailable()&&(Ei.colorsCalculated||(Ei.badColor=s("--sjs-special-red","--sd-rating-bad-color"),Ei.normalColor=s("--sjs-special-yellow","--sd-rating-normal-color"),Ei.goodColor=s("--sjs-special-green","--sd-rating-good-color"),Ei.badColorLight=s("--sjs-special-red-light","--sd-rating-bad-color-light"),Ei.normalColorLight=s("--sjs-special-yellow-light","--sd-rating-normal-color-light"),Ei.goodColorLight=s("--sjs-special-green-light","--sd-rating-good-color-light"),this.colorsCalculated=!0,this.resetRenderedItems()))}getDisplayValueCore(e,t){return this.useRateValues?is.getTextOrHtmlByValue(this.visibleRateValues,t)||t:super.getDisplayValueCore(e,t)}get visibleRateValues(){return this.renderedRateItems.map(e=>e.itemValue)}supportEmptyValidation(){return"dropdown"===this.renderAs}itemValuePropertyChanged(e,t,s,n){this.useRateValues()||void 0===n||(this.autoGenerate=!1),super.itemValuePropertyChanged(e,t,s,n)}runConditionCore(e){super.runConditionCore(e),this.runRateItesmCondition(e)}runRateItesmCondition(e){var t;if(!this.useRateValues())return;let s=!1;if((null===(t=this.survey)||void 0===t?void 0:t.areInvisibleElementsShowing)?this.rateValues.forEach(e=>{s=s||!e.isVisible,e.setIsVisible(e,!0)}):s=is.runConditionsForItems(this.rateValues,void 0,void 0,e,!0),s&&(this.resetRenderedItems(),!this.isEmpty()&&!this.isReadOnly)){const e=is.getItemByValue(this.rateValues,this.value);e&&!e.isVisible&&this.clearValue()}}getRateValuesCore(){if(!this.useRateValues())return this.createRateValues();const e=new Array;return this.rateValues.forEach(t=>{t.isVisible&&e.push(t)}),e}calculateRateValues(){let e=this.getRateValuesCore();return"smileys"==this.rateType&&e.length>10&&(e=e.slice(0,10)),e}calculateRenderedRateItems(){const e=this.calculateRateValues();return e.map((t,s)=>{let n=null;return this.displayRateDescriptionsAsExtremeItems&&(0==s&&(n=new Pi(t,this.minRateDescription&&this.locMinRateDescription||t.locText)),s==e.length-1&&(n=new Pi(t,this.maxRateDescription&&this.locMaxRateDescription||t.locText))),n||(n=new Pi(t)),n})}calculateVisibleChoices(){return this.calculateRateValues().map((e,t)=>this.getRatingItemValue(e,t))}resetRenderedItems(){if(this.autoGenerate){const e=this.getRateValuesCore();this.rateMax=e[e.length-1].value}Array.isArray(this.getPropertyValueWithoutDefault("renderedRateItems"))&&this.setArrayPropertyDirectly("renderedRateItems",this.calculateRenderedRateItems()),Array.isArray(this.getPropertyValueWithoutDefault("visibleChoices"))&&this.setArrayPropertyDirectly("visibleChoices",this.calculateVisibleChoices)}get renderedRateItems(){return this.getPropertyValue("renderedRateItems",void 0,()=>this.calculateRenderedRateItems())}get visibleChoices(){return this.getPropertyValue("visibleChoices",void 0,()=>this.calculateVisibleChoices())}createRateValues(){for(var e=[],t=this.rateMin,s=this.rateStep;t<=this.rateMax&&e.length<xt.ratingMaximumRateValueCount;){let n=new is(t);n.locOwner=this,n.ownerPropertyName="rateValues",e.push(n),t=this.correctValue(t+s,s)}return e}getRatingItemValue(e,t){if(!e)return null;const s=e.value;let n;0===t&&(n=this.minRateDescription&&this.locMinRateDescription),t===this.rateCount-1&&(n=this.maxRateDescription&&this.locMaxRateDescription);let i=new Ti(s,e.text,n);return i.locOwner=e.locOwner,i.ownerPropertyName=e.ownerPropertyName,i}correctValue(e,t){if(!e)return e;if(Math.round(e)==e)return e;for(var s=0;Math.round(t)!=t;)t*=10,s++;return parseFloat(e.toFixed(s))}getType(){return"rating"}getFirstInputElementId(){return this.inputId+"_0"}getInputId(e){return this.inputId+"_"+e}get questionName(){return this.name+"_"+this.id}supportAutoAdvance(){return!0===this.isMouseDown||"dropdown"===this.renderAs}supportOther(){return!1}getPlainDataCalculatedValue(e){const t=super.getPlainDataCalculatedValue(e);if(void 0!==t||!this.useRateValues||this.isEmpty())return t;const s=is.getItemByValue(this.visibleRateValues,this.value);return s?s[e]:void 0}get minRateDescription(){return this.getLocalizableStringText("minRateDescription")}set minRateDescription(e){this.setLocalizableStringText("minRateDescription",e)}get locMinRateDescription(){return this.getLocalizableString("minRateDescription")}get maxRateDescription(){return this.getLocalizableStringText("maxRateDescription")}set maxRateDescription(e){this.setLocalizableStringText("maxRateDescription",e)}get locMaxRateDescription(){return this.getLocalizableString("maxRateDescription")}get hasMinRateDescription(){return this.getPropertyValue("hasMinRateDescription",void 0,()=>!!this.minRateDescription)}get hasMaxRateDescription(){return this.getPropertyValue("hasMaxRateDescription",void 0,()=>!!this.maxRateDescription)}get hasMinLabel(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMinRateDescription}get hasMaxLabel(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMaxRateDescription}updateRenderAsBasedOnDisplayMode(e){this.isDesignMode?(e||"dropdown"===this.renderAs)&&(this.renderAs="default"):(e||"auto"!==this.displayMode)&&(this.renderAs="dropdown"===this.displayMode?"dropdown":"default")}onSurveyLoad(){super.onSurveyLoad(),"dropdown"===this.renderAs&&"auto"===this.displayMode?this.displayMode=this.renderAs:this.updateRenderAsBasedOnDisplayMode()}get rateDisplayMode(){return this.rateType}set rateDisplayMode(e){this.rateType=e}get isStar(){return"stars"==this.rateType}get isSmiley(){return"smileys"==this.rateType}getDefaultItemComponent(){return"dropdown"==this.renderAs?"sv-rating-dropdown-item":this.isStar?"sv-rating-item-star":this.isSmiley?"sv-rating-item-smiley":"sv-rating-item"}get itemComponent(){return this.getPropertyValue("itemComponent",this.getDefaultItemComponent())}set itemComponent(e){this.setPropertyValue("itemComponent",e)}valueToData(e){if(this.useRateValues()){var t=is.getItemByValue(this.rateValues,e);return t?t.value:e}return isNaN(e)?e:parseFloat(e)}setValueFromClick(e){if(!this.isReadOnlyAttr){this.value===("string"==typeof this.value?e:parseFloat(e))?this.clearValue(!0):this.value=e;for(let e=0;e<this.renderedRateItems.length;e++)this.renderedRateItems[e].highlight="none"}}onItemMouseIn(e){if(Pe)return;if(this.isReadOnly||!e.itemValue.isEnabled||this.isDesignMode)return;let t=!0,s=null!=this.value;if("stars"===this.rateType)for(let n=0;n<this.renderedRateItems.length;n++)this.renderedRateItems[n].highlight=(t&&!s?"highlighted":!t&&s&&"unhighlighted")||"none",this.renderedRateItems[n]==e&&(t=!1),this.renderedRateItems[n].itemValue.value==this.value&&(s=!1);else e.highlight="highlighted"}onItemMouseOut(e){Pe||this.renderedRateItems.forEach(e=>e.highlight="none")}get itemSmallMode(){return!this.isSingleInputActive&&this.inMatrixMode&&"small"==xt.matrix.rateSize}get ratingRootCss(){const e=this.hasMaxLabel||this.hasMinLabel;return(new fe).append(this.cssClasses.root).append(this.cssClasses.rootWrappable,"buttons"==this.displayMode||!!this.survey&&this.survey.isDesignMode||"auto"==this.displayMode&&!this.supportResponsiveness()).append(this.cssClasses.rootLabelsTop,e&&"top"==this.rateDescriptionLocation).append(this.cssClasses.rootLabelsBottom,e&&"bottom"==this.rateDescriptionLocation).append(this.cssClasses.rootLabelsDiagonal,e&&"topBottom"==this.rateDescriptionLocation).append(this.cssClasses.itemSmall,this.itemSmallMode&&"labels"!=this.rateType).toString()}get itemStarIcon(){return this.itemSmallMode?"icon-rating-star-small":"icon-rating-star"}get itemStarIconAlt(){return this.itemStarIcon+"-2"}getItemSmiley(e){const t=this.useRateValues()?this.rateValues.length:this.rateMax-this.rateMin+1,s=["very-good","not-good","normal","good","average","excellent","poor","perfect","very-poor","terrible"].slice(0,t),n=["terrible","very-poor","poor","not-good","average","normal","good","very-good","excellent","perfect"].filter(e=>-1!=s.indexOf(e));return this.useRateValues()?n[this.rateValues.indexOf(e)]:n[e.value-this.rateMin]}getItemSmileyIconName(e){return"icon-"+this.getItemSmiley(e)}getItemClassByText(e,t){return this.getItemClass(e)}getRenderedItemColor(e,t){let s=t?Ei.badColorLight:Ei.badColor,n=t?Ei.goodColorLight:Ei.goodColor;const i=(this.rateCount-1)/2,r=t?Ei.normalColorLight:Ei.normalColor;if(e<i?n=r:(s=r,e-=i),!s||!n)return null;const a=[0,0,0,0];for(let t=0;t<4;t++)a[t]=s[t]+(n[t]-s[t])*e/i,t<3&&(a[t]=Math.trunc(a[t]));return"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}getItemStyle(e,t="none"){if("monochrome"===this.scaleColorMode&&"default"==this.rateColorMode||this.isPreviewStyle||this.isReadOnlyStyle)return{};const s=this.visibleRateValues.indexOf(e),n=this.getRenderedItemColor(s,!1),i="highlighted"==t&&"colored"===this.scaleColorMode&&this.getRenderedItemColor(s,!0);return i?{"--sd-rating-item-color":n,"--sd-rating-item-color-light":i}:{"--sd-rating-item-color":n}}getItemClass(e,t="none"){let s=this.value==e.value;this.isStar&&(s=this.useRateValues()?this.rateValues.indexOf(this.rateValues.filter(e=>e.value==this.value)[0])>=this.rateValues.indexOf(e):this.value>=e.value);const n=!(this.isReadOnly||!e.isEnabled||this.value==e.value||this.survey&&this.survey.isDesignMode),i=this.renderedRateItems.filter(t=>t.itemValue==e)[0],r=this.isStar&&"highlighted"==(null==i?void 0:i.highlight),a=this.isStar&&"unhighlighted"==(null==i?void 0:i.highlight);let o=this.cssClasses.item,l=this.cssClasses.selected,u=this.cssClasses.itemDisabled,d=this.cssClasses.itemReadOnly,h=this.cssClasses.itemPreview,c=this.cssClasses.itemHover,p=this.cssClasses.itemOnError,g=null,m=null,v=null,f=null,b=null;this.isStar&&(o=this.cssClasses.itemStar,l=this.cssClasses.itemStarSelected,u=this.cssClasses.itemStarDisabled,d=this.cssClasses.itemStarReadOnly,h=this.cssClasses.itemStarPreview,c=this.cssClasses.itemStarHover,p=this.cssClasses.itemStarOnError,g=this.cssClasses.itemStarHighlighted,m=this.cssClasses.itemStarUnhighlighted,b=this.cssClasses.itemStarSmall),this.isSmiley&&(o=this.cssClasses.itemSmiley,l=this.cssClasses.itemSmileySelected,u=this.cssClasses.itemSmileyDisabled,d=this.cssClasses.itemSmileyReadOnly,h=this.cssClasses.itemSmileyPreview,c=this.cssClasses.itemSmileyHover,p=this.cssClasses.itemSmileyOnError,g=this.cssClasses.itemSmileyHighlighted,v=this.cssClasses.itemSmileyScaleColored,f=this.cssClasses.itemSmileyRateColored,b=this.cssClasses.itemSmileySmall);const y=!this.isStar&&!this.isSmiley&&(!this.displayRateDescriptionsAsExtremeItems||this.useRateValues()&&e!=this.rateValues[0]&&e!=this.rateValues[this.rateValues.length-1]||!this.useRateValues()&&e.value!=this.rateMin&&e.value!=this.rateMax)&&e.locText.calculatedText.length<=2&&Number.isInteger(Number(e.locText.calculatedText)),C={item:e,css:""};return C.css=(new fe).append(o).append(l,s).append(u,this.isDisabledStyle).append(d,this.isReadOnlyStyle).append(h,this.isPreviewStyle).append(c,n).append(g,r).append(v,"colored"==this.scaleColorMode).append(f,"scale"==this.rateColorMode&&s).append(m,a).append(p,this.hasCssError()).append(b,this.itemSmallMode).append(this.cssClasses.itemFixedSize,y).toString(),this.survey&&this.survey.updateChoiceItemCss(this,C),C.css}getControlClass(){return this.isEmpty(),(new fe).append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()}get placeholder(){return this.getLocalizableStringText("ratingOptionsCaption")}set placeholder(e){this.setLocalizableStringText("ratingOptionsCaption",e)}get locPlaceholder(){return this.getLocalizableString("ratingOptionsCaption")}get allowClear(){return!0}get searchEnabled(){return!1}get renderedValue(){return this.value}set renderedValue(e){this.value=e}isItemSelected(e){return e.value==this.value}get readOnlyText(){return this.getLocalizableStringText("readOnlyText")}set readOnlyText(e){this.setLocalizableStringText("readOnlyText",e)}get locReadOnlyText(){return this.getLocalizableString("readOnlyText")}needResponsiveWidth(){this.getPropertyValue("rateValues");const e=this.getPropertyValue("rateStep"),t=this.getPropertyValue("rateMax"),s=this.getPropertyValue("rateMin");return"dropdown"!=this.displayMode&&!!(this.hasMinRateDescription||this.hasMaxRateDescription||e&&(t-s)/e>9)}supportResponsiveness(){return!this.inMatrixMode}onBeforeSetCompactRenderer(){this.isDisposed||this.dropdownListModelValue||(this.dropdownListModelValue=new kn(this))}getCompactRenderAs(){return"buttons"==this.displayMode?"default":"dropdown"}getDesktopRenderAs(){return"dropdown"==this.displayMode?"dropdown":"default"}set dropdownListModel(e){this.dropdownListModelValue=e,this.updateElementCss()}get dropdownListModel(){return"dropdown"===this.renderAs&&this.onBeforeSetCompactRenderer(),this.dropdownListModelValue}onBlurCore(e){var t;null===(t=this.dropdownListModel)||void 0===t||t.onBlur(e),super.onBlurCore(e)}updateCssClasses(e,t){super.updateCssClasses(e,t),mt(e,t)}calcCssClasses(e){const t=super.calcCssClasses(e);return this.dropdownListModelValue&&this.dropdownListModelValue.updateCssClasses(t.popup,t.list),t}themeChanged(e){this.colorsCalculated=!1,this.updateColors(e.cssVariables)}setSurveyImpl(e,t){super.setSurveyImpl(e,t),this.survey&&(this.updateColors(this.survey.themeVariables),this.updateRenderAsBasedOnDisplayMode())}dispose(){super.dispose(),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)}get a11yInputAriaRole(){return"dropdown"===this.renderAs?"combobox":null}get isNewA11yStructure(){return!0}get a11y_input_ariaRole(){return"radiogroup"}}Ei.colorsCalculated=!1,me([d({defaultValue:!1})],Ei.prototype,"inputHasValue",void 0),me([d()],Ei.prototype,"autoGenerate",void 0),me([d()],Ei.prototype,"rateCount",void 0),me([d()],Ei.prototype,"displayRateDescriptionsAsExtremeItems",void 0),me([d()],Ei.prototype,"displayMode",void 0),me([d()],Ei.prototype,"rateDescriptionLocation",void 0),me([d()],Ei.prototype,"rateType",void 0),me([d()],Ei.prototype,"scaleColorMode",void 0),me([d()],Ei.prototype,"rateColorMode",void 0),I.addClass("rating",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"rateType",alternativeName:"rateDisplayMode",default:"labels",category:"rateValues",choices:["labels","stars","smileys"],visibleIndex:1},{name:"scaleColorMode",category:"rateValues",default:"monochrome",choices:["monochrome","colored"],visibleIf:function(e){return"smileys"==e.rateDisplayMode},visibleIndex:2},{name:"rateColorMode",category:"rateValues",default:"scale",choices:["default","scale"],visibleIf:function(e){return"smileys"==e.rateDisplayMode&&"monochrome"==e.scaleColorMode},visibleIndex:3},{name:"autoGenerate",category:"rateValues",default:!0,choices:[!0,!1],visibleIndex:5},{name:"rateCount:number",default:5,category:"rateValues",visibleIndex:4,onSettingValue:(e,t)=>t<2?2:t>xt.ratingMaximumRateValueCount&&t>e.rateValues.length?xt.ratingMaximumRateValueCount:t>10&&"smileys"==e.rateDisplayMode?10:t},{name:"rateValues:itemvalue[]",baseValue:function(){return l("choices_Item")},category:"rateValues",visibleIf:function(e){return!e.autoGenerate},visibleIndex:6},{name:"rateMin:number",default:1,onSettingValue:(e,t)=>t>e.rateMax-e.rateStep?e.rateMax-e.rateStep:t,visibleIf:function(e){return!!e.autoGenerate},visibleIndex:7},{name:"rateMax:number",default:5,onSettingValue:(e,t)=>t<e.rateMin+e.rateStep?e.rateMin+e.rateStep:t,visibleIf:function(e){return!!e.autoGenerate},visibleIndex:8},{name:"rateStep:number",default:1,minValue:.1,onSettingValue:(e,t)=>(t<=0&&(t=1),t>e.rateMax-e.rateMin&&(t=e.rateMax-e.rateMin),t),visibleIf:function(e){return!!e.autoGenerate},visibleIndex:9},{name:"minRateDescription",alternativeName:"mininumRateDescription",serializationProperty:"locMinRateDescription",visibleIndex:18},{name:"maxRateDescription",alternativeName:"maximumRateDescription",serializationProperty:"locMaxRateDescription",visibleIndex:19},{name:"displayRateDescriptionsAsExtremeItems:boolean",default:!1,visibleIndex:21,visibleIf:function(e){return"labels"==e.rateType}},{name:"rateDescriptionLocation",default:"leftRight",choices:["leftRight","top","bottom","topBottom"],visibleIndex:20},{name:"displayMode",default:"auto",choices:["auto","buttons","dropdown"],visibleIndex:0},{name:"itemComponent",visible:!1,defaultFunc:e=>e?(e.getOriginalObj&&(e=e.getOriginalObj()),e.getDefaultItemComponent()):"sv-rating-item"}],function(){return new Ei("")},"question"),xs.Instance.registerQuestion("rating",e=>new Ei(e));class Ri extends is{getBaseType(){return"sliderlabel"}onGetText(e){return e||!this.locOwner?super.onGetText(e):this.locOwner.getTextByItem(this)}getCorrectValue(e){return"number"==typeof e?e:a.isNumber(e)?parseFloat(e.toString()):this.value||0}}class ki extends ts{get step(){return this.getPropertyValue("step")}set step(e){this.setPropertyValue("step",e)}get labelCount(){return this.customLabels.length>0?this.customLabels.length:this.tickSize?Math.round(100/this.tickSize)+2:this.getPropertyValue("labelCount")}set labelCount(e){this.setPropertyValue("labelCount",e)}get customLabels(){return this.getPropertyValue("customLabels")}set customLabels(e){this.setPropertyValue("customLabels",e)}get allowSwap(){return!this.minRangeLength&&this.getPropertyValue("allowSwap",!0)}set allowSwap(e){this.setPropertyValue("allowSwap",e)}constructor(e){super(e),this.getThumbContainerCss=e=>(new fe).append(this.cssClasses.thumbContainer).append(this.cssClasses.thumbContainerIndeterminateMode,!!this.isIndeterminate).append(this.cssClasses.thumbContainerFocusedMode,e===this.focusedThumb).toString(),this.getLabelCss=e=>(new fe).append(this.cssClasses.label).append(this.cssClasses.labelLongMod,e.renderedHtml.length>10).toString(),this.isIndeterminate=!1,this.getTrackPercentLeft=()=>{const{renderedValue:e,sliderType:t,renderedMin:s}=this;let n;return n="single"===t?e[0]>0?this.getPercent(Math.max(0,s)):this.getPercent(e[0]):this.getPercent(Math.min(...e)),n},this.getTrackPercentRight=()=>{const{renderedValue:e,sliderType:t,renderedMax:s}=this;let n;return n="single"===t?e[0]>0?this.getPercent(e[0]):this.getPercent(Math.min(0,s)):this.getPercent(Math.max(...e)),100-n},this.getPercent=e=>{const{renderedMax:t,renderedMin:s}=this,n=t-s;return Math.abs(e-s)/n*100},this.ensureMaxRangeBorders=(e,t)=>{const{renderedMaxRangeLength:s,renderedValue:n}=this,i=n.slice(),r=i[t];let a=!1;i[t]=e;for(let e=0;e<i.length-1;e++)if(Math.abs(i[e]-i[e+1])>s){a=!0;break}return a?r:e},this.ensureMinRangeBorders=(e,t)=>{const{renderedMinRangeLength:s,renderedValue:n,allowSwap:i,renderedMin:r,renderedMax:a}=this,o=n.slice(),l=o[t];let u=!1;o[t]=e;for(let e=0;e<o.length-1;e++)if(Math.abs(o[e]-o[e+1])<s){u=!0;break}if(!i){const s=t>0?o[t-1]:r,n=t<o.length-1?o[t+1]:a;(e<=s||e>=n)&&(u=!0)}return u?l:e},this.getClosestToStepValue=e=>{const{step:t,renderedMin:s,renderedMax:n}=this,i=s+Math.trunc((n-s)/t)*t;let r=s+Math.round((e-s)/t)*t;return r=Math.min(i,r),r},this.handleRangeOnChange=e=>{if(!this.isRangeMoving)return;if(!this.isAllowToChange())return;const{renderedMax:t,renderedMin:s,renderedValue:n,ensureMaxRangeBorders:i,ensureMinRangeBorders:r}=this,a=e.target,o=this.oldInputValue-+a.value;this.oldInputValue=+a.value;let l=!1;for(let e=0;e<n.length;e++){let a=n[e]-o;a=i(a,e),a=r(a,e),a<=t&&a>=s?n.splice(e,1,a):l=!0}l&&(l=!1)},this.prepareInputRangeForMoving=(e,t)=>{const{renderedMax:s,renderedMin:n}=this;this.isRangeMoving=!0,this.animatedThumb=!1;const i=e.target;i.style.setProperty("--sjs-range-slider-range-input-thumb-width","20px"),i.style.setProperty("--sjs-range-slider-range-input-thumb-left","initial"),i.style.setProperty("--sjs-range-slider-range-input-thumb-position","static");const r=(e.clientX-t.getBoundingClientRect().x)/t.getBoundingClientRect().width*100/100*(s-n)+n;i.value=""+r,this.oldInputValue=r},this.handleRangePointerDown=(e,t)=>{const{dragOrClickHelper:s,allowDragRange:n,step:i,prepareInputRangeForMoving:r}=this,a=e.target;i&&(a.step="0.1"),n&&(s.dragHandler=()=>{r.call(this,e,t)},s.onPointerDown(e))},this.handleRangePointerUp=(e,t)=>{const{step:s,renderedValue:n,getClosestToStepValue:i}=this,r=e.target;if(this.isRangeMoving){if(this.refreshInputRange(),this.isRangeMoving=!1,s){r.step=""+s;for(let e=0;e<n.length;e++)n[e]=i(n[e]);this.setSliderValue(n)}}else r.style.setProperty("--sjs-range-slider-range-input-thumb-width","0px"),r.style.setProperty("--sjs-range-slider-range-input-thumb-left","initial"),r.style.setProperty("--sjs-range-slider-range-input-thumb-position","static"),this.setValueByClickOnPath(e,t)},this.refreshInputRange=e=>{const{allowDragRange:t,renderedValue:s,getPercent:n}=this;if(!t)return;const r=e||i.getDocument().getElementById("sjs-slider-input-range-input");if(!r)return;const a=n(s[s.length-1]),o=n(s[0]);let l=a-o;r.style.setProperty("--sjs-range-slider-range-input-thumb-width",`calc(${l}% - 20px - 20px)`),r.style.setProperty("--sjs-range-slider-range-input-thumb-left",`calc(${o}% + 20px)`),r.style.setProperty("--sjs-range-slider-range-input-thumb-position","absolute")},this.setSliderValue=e=>{if(this.isAllowToChange()){let t;"single"===this.sliderType?t=Array.isArray(e)?e[0]:e:"range"===this.sliderType&&(t=e),this.value=t,this.resetPropertyValue("renderedValue")}},this.setValueByClickOnPath=(e,t)=>{const{renderedMax:s,renderedMin:n}=this;let r="rtl"==i.getComputedStyle(i.getBody()).direction,a=(e.clientX-t.getBoundingClientRect().x)/t.getBoundingClientRect().width*100;r&&(a=100-a);let o=a/100*(s-n)+n;this.setValueByClick(o,e.target)},this.setValueByClick=(e,t)=>{const{step:s,getClosestToStepValue:n,ensureMaxRangeBorders:i,ensureMinRangeBorders:r,renderedValue:a,refreshInputRange:o,setSliderValue:l}=this;this.animatedThumb=!0;const u=a.slice();let d=0;for(let t=0;t<u.length;t++){const s=Math.abs(u[d]-e);Math.abs(u[t]-e)<s&&(d=t)}if(u.length>1&&(e=r(e=i(e,d),d)),u[d]=e,s){const e=a.slice();for(let t=0;t<u.length;t++){const i=e[t]/s,r=u[t]/s;Math.round(r)===i&&(r>i?u[t]=u[t]+s:r<i&&(u[t]=u[t]-s)),u[t]=n(u[t])}}l(u),o()},this.handleOnChange=(e,t)=>{if(!this.isAllowToChange())return;if(null===this.oldValue)return;const{allowSwap:s,ensureMaxRangeBorders:n,ensureMinRangeBorders:i,renderedValue:r}=this;let a=+e.target.value;r.length>1&&(a=n(a,t),s||(a=i(a,t))),r.splice(t,1,a)},this.handlePointerDown=e=>{const{step:t,renderedValue:s}=this;if(t)for(let e=0;e<s.length;e++)i.getDocument().getElementById(`sjs-slider-input-${e}`).step=.1;this.oldValue=this.renderedValue,this.animatedThumb=!1},this.handlePointerUp=e=>{e.stopPropagation();const{step:t,focusedThumb:s,renderedValue:n,allowSwap:r,renderedMinRangeLength:a,getClosestToStepValue:o,refreshInputRange:l,setSliderValue:u}=this,d=n[s];if(e.target,n.sort((e,t)=>e-t),this.focusedThumb=n.indexOf(d),t)for(let e=0;e<n.length;e++)n[e]=o(n[e]),i.getDocument().getElementById(`sjs-slider-input-${e}`).step=t;if(r)for(let e=0;e<n.length-1;e++)if(Math.abs(n[e]-n[e+1])<a){this.setPropertyValue("renderedValue",this.oldValue);break}u(n),l(),this.oldValue=null},this.handleKeyDown=e=>{this.oldValue=this.renderedValue,this.animatedThumb=!0},this.handleKeyUp=e=>{this.oldValue=null,this.setSliderValue(this.renderedValue)},this.handleOnFocus=e=>{this.focusedThumb=e},this.handleOnBlur=()=>{this.focusedThumb=null},this.handleLabelPointerUp=(e,t)=>{const s=e.target;isNaN(t)||this.setValueByClick(t,s)},this.getTooltipValue=e=>{const{step:t,getClosestToStepValue:s,renderedValue:n,tooltipFormat:i,formatNumber:r}=this;let a=n[e];return a=t?s(a):a,a=r(a),i.replace("{0}",""+a)},this.getLabelText=e=>{const{step:t,renderedMax:s,renderedMin:n,renderedLabelCount:i,formatNumber:r}=this,a=i-1;let o=0===a?0:e*(s-n)/a;return t%1!=0?""+r(o+n):""+Math.round(o+n)},this.getLabelPosition=e=>{const{max:t,min:s,renderedLabelCount:n,customLabels:i}=this,r=n-1;return 0===r?0:s+e*(t-s)/r},this.isRangeMoving=!1,this.oldInputValue=null,this.oldValue=null,this.calcRenderedValue=()=>{const{renderedMax:e,renderedMin:t,renderedMaxRangeLength:s,getClosestToStepValue:n,sliderType:i}=this;let r;if("single"===i)return r=this.ensureValueRespectMinMax(this.value),null==r||0===r.length?(this.isIndeterminate=!0,this.isNegativeScale?[Math.min(e,0)]:[t]):Array.isArray(r)?[r[0]]:[r];if(r=Array.isArray(this.value)?this.value.slice():[],0===r.length){const i=e-t;if(this.isIndeterminate=!0,Math.abs(i)>s){const r=(i-s)/2;return[n(t+r),n(e-r)]}return[t,e]}return r.map(e=>this.ensureValueRespectMinMax(e))},this.createItemValues("customLabels"),this.dragOrClickHelper=new Ks(null,!1),this.initPropertyDependencies()}get generatedLabels(){return this.getPropertyValue("generatedLabels",void 0,()=>this.calcGeneratedLabels())}get tooltipVisibilityPG(){return"auto"===this.tooltipVisibility}set tooltipVisibilityPG(e){this.tooltipVisibility=e?"auto":"never"}get renderedValue(){return this.getPropertyValue("renderedValue",void 0,()=>this.calcRenderedValue())}set renderedValue(e){this.setPropertyValue("renderedValue",e)}getType(){return"slider"}get rootCss(){return(new fe).append(this.cssClasses.root).append(this.cssClasses.rootSingleMode,"single"===this.sliderType).append(this.cssClasses.rootNegativeScaleMode,!!this.isNegativeScale).append(this.cssClasses.rootDesignMode,!!this.isDesignMode).append(this.cssClasses.rootAnimatedThumbMode,!!this.animatedThumb).toString()}get tooltipCss(){return(new fe).append(this.cssClasses.tooltip).append(this.cssClasses.tooltipOnHoverMode,"auto"===this.tooltipVisibility).toString()}get renderedLabelCount(){return this.labelCount<0?6:this.labelCount}get renderedMax(){return this.max}get renderedMin(){return this.min}get renderedMaxRangeLength(){var e;return null!==(e=this.maxRangeLength)&&void 0!==e?e:this.renderedMax-this.renderedMin}get renderedMinRangeLength(){var e;return null!==(e=this.minRangeLength)&&void 0!==e?e:this.step}get renderedLabels(){const e=this.generatedLabels,t=this.customLabels;return this.autoGenerate?e:t}get isNegativeScale(){return this.renderedMin<0}getTextByItem(e){const t=e.value.toString();return this.labelFormat.replace("{0}",""+t)}endLoadingFromJson(){super.endLoadingFromJson(),void 0!==this.jsonObj.customLabels&&(this.autoGenerate=!1),this.isDesignMode||"range"!==this.sliderType||this.createNewArray("value")}updateValueFromSurvey(e,t){e=this.ensureValueRespectMinMax(e),super.updateValueFromSurvey(e,t),this.isIndeterminate&&(this.isIndeterminate=!1),this.resetPropertyValue("renderedValue")}runConditionCore(e){super.runConditionCore(e),this.runExpressionByProperty("maxValueExpression",e,e=>{this.max=null!=e?e:this.renderedMax}),this.runExpressionByProperty("minValueExpression",e,e=>{this.min=null!=e?e:this.renderedMin})}initPropertyDependencies(){this.registerFunctionOnPropertiesValueChanged(["min","max","step","autoGenerate","labelFormat","labelCount"],()=>{this.resetPropertyValue("generatedLabels"),this.locStrsChanged()}),this.registerSychProperties(["autoGenerate"],()=>{this.autoGenerate||0!==this.customLabels.length||this.setPropertyValue("customLabels",this.calcGeneratedLabels()),this.autoGenerate&&this.customLabels.splice(0,this.customLabels.length)}),this.registerFunctionOnPropertiesValueChanged(["min","max","step","maxRangeLength","minRangeLength","sliderType"],()=>{this.resetPropertyValue("renderedValue")})}setNewValue(e){e=this.ensureValueRespectMinMax(e),super.setNewValue(e),this.isIndeterminate&&(this.isIndeterminate=!1),this.resetPropertyValue("renderedValue")}setDefaultValue(){super.setDefaultValue();const e=this.defaultValue;"single"===this.sliderType&&Array.isArray(e)&&this.setSliderValue(e),this.resetPropertyValue("renderedValue")}getDefaultTitleActions(){const e=[];if(!this.isDesignMode){const t=new De({locTitleName:"clearCaption",id:`sv-clr-btn-${this.id}`,action:()=>{this.clearValue(!0)},innerCss:this.cssClasses.clearButton,visible:new de(()=>this.allowClear&&!this.isReadOnly)});e.push(t)}return e}getItemValueType(){return"sliderlabel"}createLabelItem(e){const t=new Ri(e);return t.locOwner=this,t}calcGeneratedLabels(){const e=[];for(let t=0;t<this.renderedLabelCount;t++)e.push(this.createLabelItem(this.getLabelPosition(t)));return e}formatNumber(e){return parseFloat(e.toFixed(4))}ensureValueRespectMinMax(e){return Array.isArray(e)?e.forEach((t,s,n)=>{t<this.min&&(e[s]=this.min),t>this.max&&(e[s]=this.max),0===s?null==t&&(e[s]=this.min):s===n.length-1&&null==t&&(e[s]=this.max)}):(e<this.min&&(e=this.min),e>this.max&&(e=this.max)),e}isAllowToChange(){return!(this.isReadOnly||this.isDisabledAttr||this.isPreviewStyle||this.isDisabledStyle)}}function Ai(e,t,s,n){return e>=t?s?e+n:t-n:s?t:e}me([d({defaultValue:"single"})],ki.prototype,"sliderType",void 0),me([d({defaultValue:100})],ki.prototype,"max",void 0),me([d({defaultValue:0})],ki.prototype,"min",void 0),me([d({defaultValue:null})],ki.prototype,"maxValueExpression",void 0),me([d({defaultValue:null})],ki.prototype,"minValueExpression",void 0),me([d({defaultValue:null})],ki.prototype,"maxRangeLength",void 0),me([d({defaultValue:null})],ki.prototype,"minRangeLength",void 0),me([d({defaultValue:"{0}"})],ki.prototype,"tooltipFormat",void 0),me([d({defaultValue:"{0}"})],ki.prototype,"labelFormat",void 0),me([d({defaultValue:"auto"})],ki.prototype,"tooltipVisibility",void 0),me([d({defaultValue:!0})],ki.prototype,"showLabels",void 0),me([d({defaultValue:!0})],ki.prototype,"autoGenerate",void 0),me([d({defaultValue:!0})],ki.prototype,"allowDragRange",void 0),me([d({defaultValue:null})],ki.prototype,"tickSize",void 0),me([d({defaultValue:!1})],ki.prototype,"allowClear",void 0),me([d({defaultValue:null})],ki.prototype,"focusedThumb",void 0),me([d({defaultValue:null})],ki.prototype,"animatedThumb",void 0),I.addClass("sliderlabel",[{name:"!value:number"},{name:"visibleIf",visible:!1},{name:"enableIf",visible:!1}],e=>new Ri(e),"itemvalue"),I.addClass("slider",[{name:"sliderType",default:"single",choices:["single","range"]},{name:"autoGenerate",default:!0,isSerializable:!1,choices:[!0,!1]},{name:"min:number",default:0,onSettingValue:(e,t)=>Ai(t,e.max,!1,e.step)},{name:"max:number",default:100,onSettingValue:(e,t)=>Ai(e.min,t,!0,e.step)},{name:"step:number",default:1},{name:"minValueExpression",type:"expression"},{name:"maxValueExpression",type:"expression"},{name:"minRangeLength:number",visibleIf:function(e){return"range"===e.sliderType}},{name:"maxRangeLength:number",visibleIf:function(e){return"range"===e.sliderType}},{name:"customLabels:sliderlabel[]",visibleIf:function(e){return!e.autoGenerate}},{name:"showLabels:boolean",default:!0},{name:"tooltipVisibility:string",default:"auto",visible:!1,choices:["auto","never"]},{name:"tooltipVisibilityPG:boolean",default:!0,isSerializable:!1},{name:"labelFormat:string",default:"{0}"},{name:"tooltipFormat:string",default:"{0}"},{name:"allowDragRange:boolean",default:!0,visible:!1,visibleIf:function(e){return"range"===e.sliderType}},{name:"allowSwap:boolean",default:!0,visibleIf:function(e){return"range"===e.sliderType}},{name:"labelCount:number",default:-1,visibleIf:function(e){return e.autoGenerate}},{name:"allowClear:boolean",default:!1}],function(){return new ki("")},"question"),xs.Instance.registerQuestion("slider",e=>new ki(e));class Li extends ts{constructor(e){super(e),this.createLocalizableString("labelFalse",this,!0,"booleanUncheckedLabel"),this.createLocalizableString("labelTrue",this,!0,"booleanCheckedLabel")}getType(){return"boolean"}isLayoutTypeSupported(e){return!0}supportAutoAdvance(){return"checkbox"!==this.renderAs}get isIndeterminate(){return this.isEmpty()}get booleanValue(){return this.isEmpty()?null:this.value==this.getValueTrue()}set booleanValue(e){this.isReadOnly||this.isDesignMode||this.setBooleanValue(e)}setBooleanValue(e){this.isValueEmpty(e)?this.value=void 0:this.value=1==e?this.getValueTrue():this.getValueFalse()}get defaultValue(){return this.getPropertyValue("defaultValue")}set defaultValue(e){!0===e&&(e="true"),!1===e&&(e="false"),this.setPropertyValue("defaultValue",e),this.updateValueWithDefaults()}getDefaultValue(){const e=this.defaultValue;if("indeterminate"!==e&&null!=e)return"true"==e?this.getValueTrue():this.getValueFalse()}get locTitle(){const e=this.getLocalizableString("title");return(this.isLabelRendered&&!this.showTitle||this.isValueEmpty(e.text))&&!this.isValueEmpty(this.locLabel.text)?this.locLabel:e}get labelRenderedAriaID(){return this.isLabelRendered?this.ariaTitleId:null}beforeDestroyQuestionElement(e){super.beforeDestroyQuestionElement(e),this.leftAnswerElement=void 0}get isLabelRendered(){return"hidden"===this.titleLocation||this.useTitleAsLabel}get canRenderLabelDescription(){return this.isLabelRendered&&this.hasDescription&&(this.hasDescriptionUnderTitle||this.hasDescriptionUnderInput)}get labelTrue(){return this.getLocalizableStringText("labelTrue")}set labelTrue(e){this.setLocalizableStringText("labelTrue",e)}get locLabelTrue(){return this.getLocalizableString("labelTrue")}get isDeterminated(){return null!==this.booleanValue&&void 0!==this.booleanValue}get locLabelLeft(){return this.swapOrder?this.getLocalizableString("labelTrue"):this.getLocalizableString("labelFalse")}get locLabelRight(){return this.swapOrder?this.getLocalizableString("labelFalse"):this.getLocalizableString("labelTrue")}get labelFalse(){return this.getLocalizableStringText("labelFalse")}set labelFalse(e){this.setLocalizableStringText("labelFalse",e)}get locLabelFalse(){return this.getLocalizableString("labelFalse")}getValueTrue(){return void 0===this.valueTrue||this.valueTrue}getValueFalse(){return void 0!==this.valueFalse&&this.valueFalse}setDefaultValue(){this.isDefaultValueSet("true",this.valueTrue)&&this.setBooleanValue(!0),this.isDefaultValueSet("false",this.valueFalse)&&this.setBooleanValue(!1);const e=this.defaultValue;"indeterminate"!==e&&null!=e||this.setBooleanValue(void 0)}isDefaultValueSet(e,t){return this.defaultValue==e||void 0!==t&&this.defaultValue===t}getDisplayValueCore(e,t){return t==this.getValueTrue()?this.locLabelTrue.textOrHtml:this.locLabelFalse.textOrHtml}getItemCssValue(e){return(new fe).append(e.item).append(e.itemOnError,this.hasCssError()).append(e.itemDisabled,this.isDisabledStyle).append(e.itemReadOnly,this.isReadOnlyStyle).append(e.itemPreview,this.isPreviewStyle).append(e.itemHover,!this.isDesignMode).append(e.itemChecked,!!this.booleanValue).append(e.itemExchanged,!!this.swapOrder).append(e.itemIndeterminate,!this.isDeterminated).toString()}getItemCss(){return this.getItemCssValue(this.cssClasses)}getCheckboxItemCss(){return this.getItemCssValue({item:this.cssClasses.checkboxItem,itemOnError:this.cssClasses.checkboxItemOnError,itemDisabled:this.cssClasses.checkboxItemDisabled,itemDisable:this.cssClasses.checkboxItemDisabled,itemReadOnly:this.cssClasses.checkboxItemReadOnly,itemPreview:this.cssClasses.checkboxItemPreview,itemChecked:this.cssClasses.checkboxItemChecked,itemIndeterminate:this.cssClasses.checkboxItemIndeterminate})}getLabelCss(e){return(new fe).append(this.cssClasses.label).append(this.cssClasses.disabledLabel,this.booleanValue===!e||this.isDisabledStyle).append(this.cssClasses.labelReadOnly,this.isReadOnlyStyle).append(this.cssClasses.labelPreview,this.isPreviewStyle).append(this.cssClasses.labelTrue,!this.isIndeterminate&&e===!this.swapOrder).append(this.cssClasses.labelFalse,!this.isIndeterminate&&e===this.swapOrder).toString()}updateValueFromSurvey(e,t=!1){super.updateValueFromSurvey(e,t)}onValueChanged(){super.onValueChanged()}get svgIcon(){return this.booleanValue&&this.cssClasses.svgIconCheckedId?this.cssClasses.svgIconCheckedId:!this.isDeterminated&&this.cssClasses.svgIconIndId?this.cssClasses.svgIconIndId:!this.booleanValue&&this.cssClasses.svgIconUncheckedId?this.cssClasses.svgIconUncheckedId:this.cssClasses.svgIconId}get itemSvgIcon(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId}get allowClick(){return this.isIndeterminate&&!this.isInputReadOnly}getCheckedLabel(){return!0===this.booleanValue?this.locLabelTrue:!1===this.booleanValue?this.locLabelFalse:void 0}setQuestionValue(e,t=!0){"true"===e&&"true"!==this.valueTrue&&(e=!0),"false"===e&&"false"!==this.valueFalse&&(e=!1),"indeterminate"!==e&&null!==e||(e=void 0),super.setQuestionValue(e,t)}onLabelClick(e,t){return this.allowClick&&(dt(e),this.booleanValue=t),!0}calculateBooleanValueByEvent(e,t){let s=!1;i.isAvailable()&&(s="rtl"==i.getComputedStyle(e.target).direction),this.booleanValue=s?!t:t}onSwitchClickModel(e){if(!this.allowClick)return!0;dt(e);var t=e.offsetX/e.target.offsetWidth>.5;this.calculateBooleanValueByEvent(e,t)}onKeyDownCore(e){return"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(e.stopPropagation(),this.calculateBooleanValueByEvent(e,"ArrowRight"===e.key)),!0}getRadioItemClass(e,t){let s;return e.radioItem&&(s=e.radioItem),e.radioItemChecked&&t===this.value&&(s=(s?s+" ":"")+e.radioItemChecked),this.isDisabledStyle&&(s+=" "+e.radioItemDisabled),this.isReadOnlyStyle&&(s+=" "+e.radioItemReadOnly),this.isPreviewStyle&&(s+=" "+e.radioItemPreview),s}supportResponsiveness(){return!0}getCompactRenderAs(){return"radio"}createActionContainer(e){return super.createActionContainer("checkbox"!==this.renderAs)}getIsTitleRenderedAsString(){return!1}get isNewA11yStructure(){return!0}get a11y_input_ariaRole(){return"switch"}}me([d({localizable:!0})],Li.prototype,"label",void 0),me([d({defaultValue:!1,onSet:(e,t)=>{e&&t.setPropertyValue("titleLocation","hidden")}})],Li.prototype,"useTitleAsLabel",void 0),me([d({defaultValue:!1})],Li.prototype,"swapOrder",void 0),me([d()],Li.prototype,"valueTrue",void 0),me([d()],Li.prototype,"valueFalse",void 0),I.addClass("boolean",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"label:text",serializationProperty:"locLabel",isSerializable:!1,visible:!1},{name:"labelTrue:text",serializationProperty:"locLabelTrue"},{name:"labelFalse:text",serializationProperty:"locLabelFalse"},"valueTrue","valueFalse",{name:"swapOrder:boolean",category:"general"},{name:"renderAs",default:"default",visible:!1},{name:"useTitleAsLabel",default:!1,visible:!1}],function(){return new Li("")},"question"),xs.Instance.registerQuestion("boolean",e=>new Li(e));class Di extends Pn{constructor(e,t,s){super(e,t,s),this.typeName=s,this.createLocalizableString("imageLink",this,!1)}getBaseType(){return"imageitemvalue"}get imageLink(){return this.getLocalizableStringText("imageLink")}set imageLink(e){this.setLocalizableStringText("imageLink",e),this.imageNotLoaded=!1,this.videoNotLoaded=!1}get locImageLink(){return this.getLocalizableString("imageLink")}getLocale(){return this.locOwner?this.locOwner.getLocale():""}getMarkdownHtml(e,t,s){return this.locOwner?this.locOwner.getMarkdownHtml(e,t,s):void 0}getRenderer(e){return this.locOwner?this.locOwner.getRenderer(e):null}getRendererContext(e){return this.locOwner?this.locOwner.getRendererContext(e):e}getProcessedText(e){return this.locOwner?this.locOwner.getProcessedText(e):e}onErrorHandler(){this.contentNotLoaded=!0}set contentNotLoaded(e){this.locOwner instanceof Ni&&"video"==this.locOwner.contentMode?this.videoNotLoaded=e:this.imageNotLoaded=e}get contentNotLoaded(){return this.locOwner instanceof Ni&&"video"==this.locOwner.contentMode?this.videoNotLoaded:this.imageNotLoaded}}me([d({defaultValue:!1})],Di.prototype,"videoNotLoaded",void 0),me([d({defaultValue:!1})],Di.prototype,"imageNotLoaded",void 0);class Ni extends En{constructor(e){super(e),this.isResponsiveValue=!1,this.onContentLoaded=(e,t)=>{e.contentNotLoaded=!1;const s=t.target;"video"==this.contentMode?e.aspectRatio=s.videoWidth/s.videoHeight:e.aspectRatio=s.naturalWidth/s.naturalHeight,this._width&&this.processResponsiveness(0,this._width)},this.gridColCount=void 0,this.colCount=0,this.registerPropertyChangedHandlers(["minImageWidth","maxImageWidth","minImageHeight","maxImageHeight","visibleChoices","colCount","isResponsiveValue"],()=>{this._width&&this.processResponsiveness(0,this._width)}),this.registerPropertyChangedHandlers(["imageWidth","imageHeight"],()=>{this.calcIsResponsive()}),this.calcIsResponsive()}getType(){return"imagepicker"}supportAutoAdvance(){return!this.multiSelect}get hasSingleInput(){return!1}getItemValueType(){return"imageitemvalue"}get isCompositeQuestion(){return!0}get itemFlowDirection(){return"row"}supportOther(){return!1}supportNone(){return!1}supportRefuse(){return!1}supportDontKnow(){return!1}isAnswerCorrect(){return this.multiSelect?a.isArrayContainsEqual(this.value,this.correctAnswer):super.isAnswerCorrect()}get multiSelect(){return this.getPropertyValue("multiSelect")}set multiSelect(e){this.setPropertyValue("multiSelect",e)}isItemSelected(e){var t=this.value;const s=e;if(this.isValueEmpty(t))return!1;if(!s.imageLink||s.contentNotLoaded)return!1;if(!this.multiSelect)return this.isTwoValueEquals(t,e.value);if(!Array.isArray(t))return!1;for(var n=0;n<t.length;n++)if(this.isTwoValueEquals(t[n],e.value))return!0;return!1}getItemEnabled(e){const t=e;return!(!t.imageLink||t.contentNotLoaded)&&super.getItemEnabled(e)}clearIncorrectValues(){if(this.multiSelect){var e=this.value;if(!e)return;if(!Array.isArray(e)||0==e.length)return void this.clearValue(!0);for(var t=[],s=0;s<e.length;s++)this.hasUnknownValue(e[s],!0)||t.push(e[s]);if(t.length==e.length)return;0==t.length?this.clearValue(!0):this.value=t}else super.clearIncorrectValues()}getDisplayValueCore(e,t){return this.multiSelect||Array.isArray(t)?this.getDisplayArrayValue(e,t):super.getDisplayValueCore(e,t)}get showLabel(){return this.getPropertyValue("showLabel")}set showLabel(e){this.setPropertyValue("showLabel",e)}endLoadingFromJson(){super.endLoadingFromJson(),!this.isDesignMode&&this.multiSelect&&(this.createNewArray("renderedValue"),this.createNewArray("value")),this.calcIsResponsive()}getValueCore(){var e=super.getValueCore();return void 0!==e?e:this.multiSelect?[]:e}convertValToArrayForMultSelect(e){return this.multiSelect?this.isValueEmpty(e)||Array.isArray(e)?e:[e]:e}renderedValueFromDataCore(e){return this.convertValToArrayForMultSelect(e)}renderedValueToDataCore(e){return this.convertValToArrayForMultSelect(e)}get imageHeight(){return this.getPropertyValue("imageHeight")}set imageHeight(e){this.setPropertyValue("imageHeight",e)}get imageScale(){return this.survey?this.survey.widthScale/100:1}get renderedImageHeight(){return(this.isResponsive?Math.floor(this.responsiveImageHeight):this.imageHeight*this.imageScale)||150*this.imageScale}get imageWidth(){return this.getPropertyValue("imageWidth")}set imageWidth(e){this.setPropertyValue("imageWidth",e)}get renderedImageWidth(){return(this.isResponsive?Math.floor(this.responsiveImageWidth):this.imageWidth*this.imageScale)||200*this.imageScale}get imageFit(){return this.getPropertyValue("imageFit")}set imageFit(e){this.setPropertyValue("imageFit",e)}get contentMode(){return this.getPropertyValue("contentMode")}set contentMode(e){this.setPropertyValue("contentMode",e),"video"===e&&(this.showLabel=!0)}valueToData(e){return e}get inputType(){return this.multiSelect?"checkbox":"radio"}isBuiltInChoice(e){return!1}addToVisibleChoices(e,t){this.addNewItemToVisibleChoices(e,t)}getSelectBaseRootCss(){const e=this.isResponsive;return(new fe).append(super.getSelectBaseRootCss()).append(this.cssClasses.rootResponsive,e).append(this.cssClasses.rootStatic,!e).append(this.cssClasses.rootColumn,1==this.getCurrentColCount()).toString()}get isResponsive(){return this.isResponsiveValue}get exactSizesAreEmpty(){return!["imageHeight","imageWidth"].some(e=>void 0!==this[e]&&null!==this[e])}calcIsResponsive(){this.isResponsiveValue=this.exactSizesAreEmpty}getObservedElementSelector(){return ht(this.cssClasses.root)}supportResponsiveness(){return!0}needResponsiveness(){return this.supportResponsiveness()}needResponsiveWidth(){return this.colCount>2}getCurrentColCount(){return void 0===this.responsiveColCount||0===this.colCount?this.colCount:this.responsiveColCount}getContainerStyle(){return this.isResponsive?{gridAutoFlow:this.gridColCount?null:"column",gridTemplateColumns:this.gridColCount?`repeat(${this.gridColCount}, 1fr)`:null}:{}}processResponsiveness(e,t){if(this._width=t=Math.floor(t),this.isResponsive){const e=this.choices.length+(this.isDesignMode?1:0),s=(this.gapBetweenItems||0)*this.imageScale,n=this.minImageWidth*this.imageScale,i=this.maxImageWidth*this.imageScale,r=this.maxImageHeight*this.imageScale,a=this.minImageHeight*this.imageScale;let o,l=this.colCount;const u=((e,t,s)=>{let n=Math.floor(e/(t+s));return(n+1)*(t+s)-s<=e&&n++,n})(t,n,s);0===l?(o=(s+n)*e-s>t?Math.floor((t-s*(u-1))/u):Math.floor((t-s*(e-1))/e),this.gridColCount=Math.max(Math.min(e,u),1)):(u<l?(this.responsiveColCount=Math.max(u,1),l=this.responsiveColCount):this.responsiveColCount=l,this.gridColCount=this.responsiveColCount,o=Math.floor((t-s*(l-1))/l)),o=Math.max(n,Math.min(o,i));let d=Number.MIN_VALUE;this.choices.forEach(e=>{const t=o/e.aspectRatio;d=t>d?t:d}),d>r?d=r:d<a&&(d=a);const h=this.responsiveImageWidth,c=this.responsiveImageHeight;return this.responsiveImageWidth=o,this.responsiveImageHeight=d,h!==this.responsiveImageWidth||c!==this.responsiveImageHeight}return!1}triggerResponsiveness(e=!0){e&&this.reCalcGapBetweenItemsCallback&&this.reCalcGapBetweenItemsCallback(),super.triggerResponsiveness(e)}afterRender(e){super.afterRender(e);const t=this.getObservedElementSelector(),s=e&&t?e.querySelector(t):void 0;s&&(this.reCalcGapBetweenItemsCallback=()=>{this.gapBetweenItems=Math.ceil(Number.parseFloat(i.getComputedStyle(s).gap))||16},this.reCalcGapBetweenItemsCallback())}get ariaRole(){return this.multiSelect?"group":"radiogroup"}get ariaRequired(){return null}get inputRequiredAttribute(){return this.multiSelect?this.hasRequiredError():null}}me([d({})],Ni.prototype,"responsiveImageHeight",void 0),me([d({})],Ni.prototype,"responsiveImageWidth",void 0),me([d({})],Ni.prototype,"isResponsiveValue",void 0),me([d({})],Ni.prototype,"maxImageWidth",void 0),me([d({})],Ni.prototype,"minImageWidth",void 0),me([d({})],Ni.prototype,"maxImageHeight",void 0),me([d({})],Ni.prototype,"minImageHeight",void 0),me([d({})],Ni.prototype,"responsiveColCount",void 0),me([d()],Ni.prototype,"gridColCount",void 0),I.addClass("imageitemvalue",[{name:"imageLink:file",serializationProperty:"locImageLink"}],e=>new Di(e),"itemvalue"),I.addClass("responsiveImageSize",[],void 0,"number"),I.addClass("imagepicker",[{name:"showOtherItem",visible:!1},{name:"otherText",visible:!1},{name:"showNoneItem",visible:!1},{name:"showRefuseItem",visible:!1},{name:"showDontKnowItem",visible:!1},{name:"noneText",visible:!1},{name:"optionsCaption",visible:!1},{name:"otherErrorText",visible:!1},{name:"storeOthersAsComment",visible:!1},{name:"contentMode",default:"image",choices:["image","video"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight:number",minValue:0},{name:"imageWidth:number",minValue:0},{name:"minImageWidth:responsiveImageSize",default:200,minValue:0},{name:"minImageHeight:responsiveImageSize",default:133,minValue:0},{name:"maxImageWidth:responsiveImageSize",default:3e3,minValue:0},{name:"maxImageHeight:responsiveImageSize",default:3e3,minValue:0},"showLabel:boolean",{name:"colCount:number",default:0,choices:[0,1,2,3,4,5]},"multiSelect:boolean"],function(){return new Ni("")},"checkboxbase"),I.getProperty("imagepicker","choices").type="imageitemvalue[]",xs.Instance.registerQuestion("imagepicker",e=>new Ni(e));const Oi=[".mp4",".mov",".wmv",".flv",".avi",".mkv"],ji="embed";class qi extends ri{constructor(e){super(e),this.createLocalizableString("imageLink",this,!1).onGetTextCallback=e=>function(e,t){if(!e||!a.isUrlYoutubeVideo(e))return t?"":e;if(e.toLocaleLowerCase().indexOf(ji)>-1)return e;let s="";for(var n=e.length-1;n>=0&&"="!==e[n]&&"/"!==e[n];n--)s=e[n]+s;return"https://www.youtube.com/embed/"+s}(e,"youtube"==this.contentMode),this.createLocalizableString("altText",this,!1),this.registerPropertyChangedHandlers(["contentMode","imageLink"],()=>this.calculateRenderedMode())}getType(){return"image"}get isCompositeQuestion(){return!1}onSurveyLoad(){super.onSurveyLoad(),this.calculateRenderedMode()}get imageLink(){return this.getLocalizableStringText("imageLink")}set imageLink(e){this.setLocalizableStringText("imageLink",e)}get locImageLink(){return this.getLocalizableString("imageLink")}get altText(){return this.getLocalizableStringText("altText")}set altText(e){this.setLocalizableStringText("altText",e)}get locAltText(){return this.getLocalizableString("altText")}get imageHeight(){return this.getPropertyValue("imageHeight")}set imageHeight(e){this.setPropertyValue("imageHeight",e)}get renderedStyleHeight(){return this.imageHeight?rt(this.imageHeight):void 0}get renderedHeight(){return this.imageHeight?it(this.imageHeight):void 0}get imageWidth(){return this.getPropertyValue("imageWidth")}set imageWidth(e){this.setPropertyValue("imageWidth",e)}get renderedStyleWidth(){return this.imageWidth?rt(this.imageWidth):void 0}get renderedWidth(){return this.imageWidth?it(this.imageWidth):void 0}get imageFit(){return this.getPropertyValue("imageFit")}set imageFit(e){this.setPropertyValue("imageFit",e)}get contentMode(){return this.getPropertyValue("contentMode")}set contentMode(e){this.setPropertyValue("contentMode",e),"video"===e&&(this.showLabel=!0)}get renderedMode(){return this.getPropertyValue("renderedMode","image")}get ariaInvalid(){return null}get ariaLabel(){return null}get renderedAltText(){return this.altText||this.title}getImageCss(){const e=this.getPropertyByName("imageHeight"),t=this.getPropertyByName("imageWidth"),s=e.isDefaultValue(this.imageHeight)&&t.isDefaultValue(this.imageWidth);return(new fe).append(this.cssClasses.image).append(this.cssClasses.adaptive,s).toString()}onLoadHandler(){this.contentNotLoaded=!1}onErrorHandler(){this.contentNotLoaded=!0}setRenderedMode(e){this.setPropertyValue("renderedMode",e)}calculateRenderedMode(){"auto"!==this.contentMode?this.setRenderedMode(this.contentMode):this.isYoutubeVideo()?this.setRenderedMode("youtube"):this.isVideo()?this.setRenderedMode("video"):this.setRenderedMode("image")}isYoutubeVideo(){return a.isUrlYoutubeVideo(this.imageLink)}isVideo(){let e=this.imageLink;if(!e)return!1;e=e.toLowerCase();for(let t=0;t<Oi.length;t++)if(e.endsWith(Oi[t]))return!0;return!1}}me([d({defaultValue:!1})],qi.prototype,"contentNotLoaded",void 0),I.addClass("image",[{name:"imageLink:file",serializationProperty:"locImageLink"},{name:"altText",serializationProperty:"locAltText",alternativeName:"text",category:"general"},{name:"contentMode",default:"auto",choices:["auto","image","video","youtube"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight",default:"150"},{name:"imageWidth",default:"200"}],function(){return new qi("")},"nonvalue"),xs.Instance.registerQuestion("image",e=>new qi(e));class Mi{constructor(e,t,s,n){if(isNaN(e)||isNaN(t))throw new Error(`Point is invalid: (${e}, ${t})`);this.x=+e,this.y=+t,this.pressure=s||0,this.time=n||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class Fi{static fromPoints(e,t){const s=this.calculateControlPoints(e[0],e[1],e[2]).c2,n=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new Fi(e[1],s,n,e[2],t.start,t.end)}static calculateControlPoints(e,t,s){const n=e.x-t.x,i=e.y-t.y,r=t.x-s.x,a=t.y-s.y,o=(e.x+t.x)/2,l=(e.y+t.y)/2,u=(t.x+s.x)/2,d=(t.y+s.y)/2,h=Math.sqrt(n*n+i*i),c=Math.sqrt(r*r+a*a),p=c/(h+c),g=u+(o-u)*p,m=d+(l-d)*p,v=t.x-g,f=t.y-m;return{c1:new Mi(o+v,l+f),c2:new Mi(u+v,d+f)}}constructor(e,t,s,n,i,r){this.startPoint=e,this.control2=t,this.control1=s,this.endPoint=n,this.startWidth=i,this.endWidth=r}length(){let e,t,s=0;for(let n=0;n<=10;n+=1){const i=n/10,r=this.point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(n>0){const n=r-e,i=a-t;s+=Math.sqrt(n*n+i*i)}e=r,t=a}return s}point(e,t,s,n,i){return t*(1-e)*(1-e)*(1-e)+3*s*(1-e)*(1-e)*e+3*n*(1-e)*e*e+i*e*e*e}}class Bi{constructor(){try{this._et=new EventTarget}catch(e){this._et=document}}addEventListener(e,t,s){this._et.addEventListener(e,t,s)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,t,s){this._et.removeEventListener(e,t,s)}}class zi extends Bi{constructor(e,t={}){super(),this.canvas=e,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=e=>{1===e.buttons&&this._strokeBegin(e)},this._handleMouseMove=e=>{this._strokeMoveUpdate(e)},this._handleMouseUp=e=>{1===e.buttons&&this._strokeEnd(e)},this._handleTouchStart=e=>{if(e.cancelable&&e.preventDefault(),1===e.targetTouches.length){const t=e.changedTouches[0];this._strokeBegin(t)}},this._handleTouchMove=e=>{e.cancelable&&e.preventDefault();const t=e.targetTouches[0];this._strokeMoveUpdate(t)},this._handleTouchEnd=e=>{if(e.target===this.canvas){e.cancelable&&e.preventDefault();const t=e.changedTouches[0];this._strokeEnd(t)}},this._handlePointerStart=e=>{e.preventDefault(),this._strokeBegin(e)},this._handlePointerMove=e=>{this._strokeMoveUpdate(e)},this._handlePointerEnd=e=>{this._drawingStroke&&(e.preventDefault(),this._strokeEnd(e))},this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.dotSize=t.dotSize||0,this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=t.compositeOperation||"source-over",this.canvasContextOptions="canvasContextOptions"in t?t.canvasContextOptions:{},this._strokeMoveUpdate=this.throttle?function(e,t=250){let s,n,i,r=0,a=null;const o=()=>{r=Date.now(),a=null,s=e.apply(n,i),a||(n=null,i=[])};return function(...l){const u=Date.now(),d=t-(u-r);return n=this,i=l,d<=0||d>t?(a&&(clearTimeout(a),a=null),r=u,s=e.apply(n,i),a||(n=null,i=[])):a||(a=window.setTimeout(o,d)),s}}(zi.prototype._strokeUpdate,this.throttle):zi.prototype._strokeUpdate,this._ctx=e.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:e,canvas:t}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(e,t={}){return new Promise((s,n)=>{const i=new Image,r=t.ratio||window.devicePixelRatio||1,a=t.width||this.canvas.width/r,o=t.height||this.canvas.height/r,l=t.xOffset||0,u=t.yOffset||0;this._reset(this._getPointGroupOptions()),i.onload=()=>{this._ctx.drawImage(i,l,u,a,o),s()},i.onerror=e=>{n(e)},i.crossOrigin="anonymous",i.src=e,this._isEmpty=!1})}toDataURL(e="image/png",t){return"image/svg+xml"===e?("object"!=typeof t&&(t=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(t))}`):("number"!=typeof t&&(t=void 0),this.canvas.toDataURL(e,t))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:t=!0}={}){t&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:e,cancelable:!0})))return;this._drawingStroke=!0;const t=this._getPointGroupOptions(),s=Object.assign(Object.assign({},t),{points:[]});this._data.push(s),this._reset(t),this._strokeUpdate(e)}_strokeUpdate(e){if(!this._drawingStroke)return;if(0===this._data.length)return void this._strokeBegin(e);this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const t=e.clientX,s=e.clientY,n=void 0!==e.pressure?e.pressure:void 0!==e.force?e.force:0,i=this._createPoint(t,s,n),r=this._data[this._data.length-1],a=r.points,o=a.length>0&&a[a.length-1],l=!!o&&i.distanceTo(o)<=this.minDistance,u=this._getPointGroupOptions(r);if(!o||!o||!l){const e=this._addPoint(i,u);o?e&&this._drawCurve(e,u):this._drawDot(i,u),a.push({time:i.time,x:i.x,y:i.y,pressure:i.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e){this._drawingStroke&&(this._strokeUpdate(e),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:e})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,t,s){const n=this.canvas.getBoundingClientRect();return new Mi(e-n.left,t-n.top,s,(new Date).getTime())}_addPoint(e,t){const{_lastPoints:s}=this;if(s.push(e),s.length>2){3===s.length&&s.unshift(s[0]);const e=this._calculateCurveWidths(s[1],s[2],t),n=Fi.fromPoints(s,e);return s.shift(),n}return null}_calculateCurveWidths(e,t,s){const n=s.velocityFilterWeight*t.velocityFrom(e)+(1-s.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(n,s),r={end:i,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=i,r}_strokeWidth(e,t){return Math.max(t.maxWidth/(e+1),t.minWidth)}_drawCurveSegment(e,t,s){const n=this._ctx;n.moveTo(e,t),n.arc(e,t,s,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,t){const s=this._ctx,n=e.endWidth-e.startWidth,i=2*Math.ceil(e.length());s.beginPath(),s.fillStyle=t.penColor;for(let s=0;s<i;s+=1){const r=s/i,a=r*r,o=a*r,l=1-r,u=l*l,d=u*l;let h=d*e.startPoint.x;h+=3*u*r*e.control1.x,h+=3*l*a*e.control2.x,h+=o*e.endPoint.x;let c=d*e.startPoint.y;c+=3*u*r*e.control1.y,c+=3*l*a*e.control2.y,c+=o*e.endPoint.y;const p=Math.min(e.startWidth+o*n,t.maxWidth);this._drawCurveSegment(h,c,p)}s.closePath(),s.fill()}_drawDot(e,t){const s=this._ctx,n=t.dotSize>0?t.dotSize:(t.minWidth+t.maxWidth)/2;s.beginPath(),this._drawCurveSegment(e.x,e.y,n),s.closePath(),s.fillStyle=t.penColor,s.fill()}_fromData(e,t,s){for(const n of e){const{points:e}=n,i=this._getPointGroupOptions(n);if(e.length>1)for(let s=0;s<e.length;s+=1){const n=e[s],r=new Mi(n.x,n.y,n.pressure,n.time);0===s&&this._reset(i);const a=this._addPoint(r,i);a&&t(a,i)}else this._reset(i),s(e[0],i)}}toSVG({includeBackgroundColor:e=!1}={}){const t=this._data,s=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/s,i=this.canvas.height/s,r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("viewBox",`0 0 ${n} ${i}`),r.setAttribute("width",n.toString()),r.setAttribute("height",i.toString()),e&&this.backgroundColor){const e=document.createElement("rect");e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("fill",this.backgroundColor),r.appendChild(e)}return this._fromData(t,(e,{penColor:t})=>{const s=document.createElement("path");if(!(isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y))){const n=`M ${e.startPoint.x.toFixed(3)},${e.startPoint.y.toFixed(3)} C ${e.control1.x.toFixed(3)},${e.control1.y.toFixed(3)} ${e.control2.x.toFixed(3)},${e.control2.y.toFixed(3)} ${e.endPoint.x.toFixed(3)},${e.endPoint.y.toFixed(3)}`;s.setAttribute("d",n),s.setAttribute("stroke-width",(2.25*e.endWidth).toFixed(3)),s.setAttribute("stroke",t),s.setAttribute("fill","none"),s.setAttribute("stroke-linecap","round"),r.appendChild(s)}},(e,{penColor:t,dotSize:s,minWidth:n,maxWidth:i})=>{const a=document.createElement("circle"),o=s>0?s:(n+i)/2;a.setAttribute("r",o.toString()),a.setAttribute("cx",e.x.toString()),a.setAttribute("cy",e.y.toString()),a.setAttribute("fill",t),r.appendChild(a)}),r.outerHTML}}class Hi extends wi{getPenColorFromTheme(){const e=this.survey;return!!e&&!!e.themeVariables&&e.themeVariables["--sjs-primary-backcolor"]}updateColors(e){const t=this.getPenColorFromTheme(),s=this.getPropertyByName("penColor");e.penColor=this.penColor||t||s.defaultValue||"#1ab394";const n=this.getPropertyByName("backgroundColor"),i=t?"transparent":void 0,r=this.backgroundImage?"transparent":this.backgroundColor;e.backgroundColor=r||i||n.defaultValue||"#ffffff"}getCssRoot(e){return(new fe).append(super.getCssRoot(e)).append(e.small,"300"===this.signatureWidth.toString()).toString()}getFormat(){return"jpeg"===this.dataFormat?"image/jpeg":"svg"===this.dataFormat?"image/svg+xml":""}updateValue(){if(this.signaturePad){var e=this.signaturePad.toDataURL(this.getFormat());this.valueIsUpdatingInternally=!0,this.value=e,this.valueIsUpdatingInternally=!1}}constructor(e){super(e),this.valueIsUpdatingInternally=!1,this._loadedData=void 0,this.updateValueHandler=()=>{this._loadedData=void 0,this.scaleCanvas(!0,!0)}}getType(){return"signaturepad"}afterRenderQuestionElement(e){n.isAvailable()&&e&&(this.isDesignMode||this.initSignaturePad(e),this.element=e),super.afterRenderQuestionElement(e)}beforeDestroyQuestionElement(e){e&&this.destroySignaturePad(e)}themeChanged(e){this.signaturePad&&this.updateColors(this.signaturePad)}resizeCanvas(){this.canvas.width=this.containerWidth,this.canvas.height=this.containerHeight}scaleCanvas(e=!0,t=!1){const s=this.canvas,n=s.offsetWidth/this.containerWidth;(this.scale!=n||t)&&(this.scale=n,s.style.width=this.renderedCanvasWidth,this.resizeCanvas(),this.signaturePad.minWidth=this.penMinWidth*n,this.signaturePad.maxWidth=this.penMaxWidth*n,s.getContext("2d").scale(1/n,1/n),e&&this.loadPreview(this.value))}fromUrl(e){if(this.isFileLoading=!0,function(e){return"string"==typeof e?/^data:((?:\w+\/(?:(?!;).)+)?)((?:;[^;]+?)*),(.+)$/.test(e):null}(e))this.fromDataUrl(e),this.isFileLoading=!1;else{const t=new Image;t.crossOrigin="anonymous",t.src=e,t.onload=()=>{if(this.canvas){const s=i.createElement("canvas");s.width=this.containerWidth,s.height=this.containerHeight,s.getContext("2d").drawImage(t,0,0);var e=s.toDataURL(this.getFormat());this.fromDataUrl(e)}this.isFileLoading=!1},t.onerror=()=>{this.isFileLoading=!1}}}fromDataUrl(e){if(this._loadedData=e,this.signaturePad){let t=1,s=this.scale;"svg"===this.dataFormat&&(t=n.getDevicePixelRatio()||1,s=1);const i={width:this.canvas.width*s/t,height:this.canvas.height*s/t};this.signaturePad.fromDataURL(e,i)}}get loadedData(){return this._loadedData}loadPreview(e){if(!e)return this.signaturePad&&this.canvas&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width*this.scale,this.canvas.height*this.scale),this.signaturePad.clear()),void(this.valueWasChangedFromLastUpload=!1);if(this.storeDataAsText)this.fromDataUrl(e);else if(this.loadedData)this.fromDataUrl(this.loadedData);else{var t=e?[e]:[];this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new Vi(this,(t,s)=>{"success"===t&&s&&s.length>0&&s[0].content?(this.fromDataUrl(s[0].content),this.isFileLoading=!1):"skipped"===t&&this.fromUrl(e),this._previewLoader.dispose(),this._previewLoader=void 0}),this._previewLoader.load(t)}}onChangeQuestionValue(e){super.onChangeQuestionValue(e),this.isLoadingFromJson||(this._loadedData=void 0,this.loadPreview(e))}onSurveyLoad(){super.onSurveyLoad(),this.loadPreview(this.value)}initSignaturePad(e){var t=e.getElementsByTagName("canvas")[0];this.canvas=t,this.resizeCanvas();var s=new zi(t,{backgroundColor:"#ffffff"});this.signaturePad=s,this.isInputReadOnly&&s.off(),this.readOnlyChangedCallback=()=>{this.isInputReadOnly?s.off():s.on()},this.updateColors(s),s.addEventListener("beginStroke",()=>{this.scaleCanvas(),this.isDrawingValue=!0,t.focus()},{once:!1}),s.addEventListener("endStroke",()=>{this.isDrawingValue=!1,this.storeDataAsText?this.updateValue():this.valueWasChangedFromLastUpload=!0},{once:!1}),this.updateValueHandler(),this.readOnlyChangedCallback();var n=(e,t)=>{"signatureWidth"!==t.name&&"signatureHeight"!==t.name||this.valueIsUpdatingInternally||this.updateValueHandler()};this.onPropertyChanged.add(n),this.signaturePad.propertyChangedHandler=n}destroySignaturePad(e){this.signaturePad&&(this.onPropertyChanged.remove(this.signaturePad.propertyChangedHandler),this.signaturePad.off()),this.readOnlyChangedCallback=null,this.signaturePad=null}get dataFormat(){return this.getPropertyValue("dataFormat")}set dataFormat(e){this.setPropertyValue("dataFormat",Qi(e))}get signatureWidth(){return this.getPropertyValue("signatureWidth")}set signatureWidth(e){this.setPropertyValue("signatureWidth",e)}get signatureHeight(){return this.getPropertyValue("signatureHeight")}set signatureHeight(e){this.setPropertyValue("signatureHeight",e)}get containerHeight(){return this.signatureHeight||200}get containerWidth(){return this.signatureWidth||300}get renderedCanvasWidth(){return this.signatureAutoScaleEnabled?"100%":this.containerWidth+"px"}get height(){return this.getPropertyValue("height")}set height(e){this.setPropertyValue("height",e)}get allowClear(){return this.getPropertyValue("allowClear")}set allowClear(e){this.setPropertyValue("allowClear",e)}get canShowClearButton(){const e=!this.nothingIsDrawn(),t=this.isUploading;return!this.isInputReadOnly&&this.allowClear&&e&&!t}get penColor(){return this.getPropertyValue("penColor")}set penColor(e){this.setPropertyValue("penColor",e),this.signaturePad&&this.updateColors(this.signaturePad)}get backgroundColor(){return this.getPropertyValue("backgroundColor")}set backgroundColor(e){this.setPropertyValue("backgroundColor",e),this.signaturePad&&this.updateColors(this.signaturePad)}get backgroundImage(){return this.getPropertyValue("backgroundImage")}set backgroundImage(e){this.setPropertyValue("backgroundImage",e),this.signaturePad&&this.updateColors(this.signaturePad)}get clearButtonCaption(){return this.getLocalizationString("clearCaption")}get locRenderedPlaceholder(){return this.isReadOnly?this.locPlaceholderReadOnly:this.locPlaceholder}nothingIsDrawn(){const e=this.isDrawingValue,t=this.isEmpty(),s=this.isUploading,n=this.valueWasChangedFromLastUpload;return!e&&t&&!s&&!n}needShowPlaceholder(){return this.showPlaceholder&&this.nothingIsDrawn()}onBlurCore(e){if(super.onBlurCore(e),!this.storeDataAsText&&!this.element.contains(e.relatedTarget)){if(!this.valueWasChangedFromLastUpload)return;this.uploadFiles([Ci(this.signaturePad.toDataURL(this.getFormat()),this.name+"."+Qi(this.dataFormat),this.getFormat())]),this.valueWasChangedFromLastUpload=!1}}uploadResultItemToValue(e){return e.content}setValueFromResult(e){this.valueIsUpdatingInternally=!0,this.value=(null==e?void 0:e.length)?e.map(e=>e.content)[0]:void 0,this.valueIsUpdatingInternally=!1}clearValue(e){this.valueWasChangedFromLastUpload=!1,super.clearValue(e),this._loadedData=void 0,this.loadPreview(this.value)}endLoadingFromJson(){super.endLoadingFromJson(),300===this.signatureWidth&&this.width&&"number"==typeof this.width&&this.width&&(k.warn("Use signatureWidth property to set width for the signature pad"),this.signatureWidth=this.width,this.width=void 0),200===this.signatureHeight&&this.height&&(k.warn("Use signatureHeight property to set width for the signature pad"),this.signatureHeight=this.height,this.height=void 0)}}function Qi(e){return e||(e="png"),"jpeg"!==(e=e.replace("image/","").replace("+xml",""))&&"svg"!==e&&(e="png"),e}me([d({defaultValue:!1})],Hi.prototype,"isDrawingValue",void 0),me([d({defaultValue:!1})],Hi.prototype,"isReadyForUpload",void 0),me([d({defaultValue:!1})],Hi.prototype,"valueWasChangedFromLastUpload",void 0),me([d()],Hi.prototype,"signatureAutoScaleEnabled",void 0),me([d()],Hi.prototype,"penMinWidth",void 0),me([d()],Hi.prototype,"penMaxWidth",void 0),me([d({})],Hi.prototype,"showPlaceholder",void 0),me([d({localizable:{defaultStr:"signaturePlaceHolder"}})],Hi.prototype,"placeholder",void 0),me([d({localizable:{defaultStr:"signaturePlaceHolderReadOnly"}})],Hi.prototype,"placeholderReadOnly",void 0),I.addClass("signaturepad",[{name:"signatureWidth:number",category:"general",default:300},{name:"signatureHeight:number",category:"general",default:200},{name:"signatureAutoScaleEnabled:boolean",category:"general",default:!1},{name:"penMinWidth:number",category:"general",default:.5},{name:"penMaxWidth:number",category:"general",default:2.5},{name:"height:number",category:"general",visible:!1},{name:"allowClear:boolean",category:"general",default:!0},{name:"showPlaceholder:boolean",category:"general",default:!0},{name:"placeholder:text",serializationProperty:"locPlaceholder",category:"general",dependsOn:"showPlaceholder",visibleIf:e=>e.showPlaceholder},{name:"placeholderReadOnly:text",serializationProperty:"locPlaceholderReadOnly",category:"general",dependsOn:"showPlaceholder",visibleIf:e=>e.showPlaceholder},{name:"backgroundImage:file",category:"general"},{name:"penColor:color",category:"general"},{name:"backgroundColor:color",category:"general"},{name:"dataFormat",category:"general",default:"png",choices:[{value:"png",text:"PNG"},{value:"jpeg",text:"JPEG"},{value:"svg",text:"SVG"}],onSettingValue:(e,t)=>Qi(t)},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1}],function(){return new Hi("")},"question"),xs.Instance.registerQuestion("signaturepad",e=>new Hi(e));class Ui extends $t{constructor(e){super(),this.item=e}getIndex(){return this.panelIndex}getQuestionData(){return this.item.data}getValue(e,t,s,n){if(0===e.length)return;if(1===e.length){const t=this.getPanelValue(e[0].name);if(void 0!==t)return{isFound:!0,value:t,context:this}}const i=xt.expressionVariables,r=i.panel;if(e.length>1&&e[0].name.toLocaleLowerCase()===i.parentPanel.toLocaleLowerCase()){const t=this.item.data;if(t&&t.parentQuestion&&t.parent&&t.parent.data)return e[0].name=r,t.parent.data.getValueGetterContext().getValue(e,!0,s,n)}const a=this.item.panel,o=e[0].name===r;if(o||!t){o&&e.shift();const i=new Xt(a.questions).getValue(e,!1,s,n);if(i&&i.isFound)return i;const r=this.item.getAllValues();if(t){const t=this.getValueFromBindedQuestions(e,r);if(t)return t}return new T(r).getValue(e,!1,s,n)}}getTextValue(e,t,s){return e=e.toLocaleLowerCase(),[this.indexVar,this.visIndexVar].indexOf(e)>-1&&t>-1&&t++,super.getTextValue(e,t,s)}get indexVar(){return xt.expressionVariables.panelIndex.toLocaleLowerCase()}get visIndexVar(){return xt.expressionVariables.visiblePanelIndex.toLocaleLowerCase()}getPanelValue(e){return(e=e.toLocaleLowerCase())===this.indexVar?this.panelIndex:e==this.visIndexVar?this.visiblePanelIndex:void 0}get panelIndex(){return this.getPanels(!1).indexOf(this.item.panel)}get visiblePanelIndex(){return this.getPanels(!0).indexOf(this.item.panel)}getPanels(e){const t=this.item.data;return t?e?t.visiblePanels:t.panels:[]}}class Wi extends Yt{constructor(e){super(e),this.question=e}getValue(e,t,s,n){if(!n&&this.question.isEmpty())return{isFound:0===e.length,value:void 0};if(s>-1){const t=this.question;return s>=0&&s<t.panels.length?t.panels[s].data.getValueGetterContext().getValue(e,!1,s,n):{isFound:!1,value:void 0,context:this}}return super.getValue(e,t,s,n)}}class Gi extends De{constructor(e){super(e)}}class Zi{constructor(e,t){this.data=e,this.data=e,this.panelValue=t,this.textPreProcessor=new ms(this),this.setSurveyImpl()}get panel(){return this.panelValue}setSurveyImpl(){this.panel.setSurveyImpl(this)}getValueGetterContext(){return new Ui(this)}getValue(e){return this.getAllValues()[e]}setValue(e,t){const s=this.data.getPanelItemData(this),n=s?s[e]:void 0;if(a.isTwoValueEquals(t,n,!1,!0,!1))return;this.data.setPanelItemData(this,e,a.getUnbindValue(t));const i=this.panel.questions;for(var r=0;r<i.length;r++){const s=i[r];s.getValueName()!==e&&s.checkBindings(e,t);const n=xt.commentSuffix;if(e.endsWith(n)){e=e.substring(0,e.length-n.length);const s=this.panel.getQuestionByName(e);s&&(t=s.value)}const a=xt.expressionVariables.panel+"."+e;s.runTriggers(a,t)}}getVariable(e){}setVariable(e,t){}getComment(e){return this.getValue(e+xt.commentSuffix)||""}setComment(e,t,s){this.setValue(e+xt.commentSuffix,t)}findQuestionByName(e){if(!e)return;const t=xt.expressionVariables.panel+".";if(0===e.indexOf(t))return this.panel.getQuestionByName(e.substring(t.length));const s=this.getSurvey();return s?s.getQuestionByName(e):null}getEditingSurveyElement(){}getAllValues(){return this.data.getPanelItemData(this)}getFilteredProperties(){return this.data&&this.data.getRootData()?this.data.getRootData().getFilteredProperties():{survey:this.getSurvey()}}getSurveyData(){return this}getSurvey(){return this.data?this.data.getSurvey():null}getTextProcessor(){return this.textPreProcessor}}class Ki{constructor(e){this.data=e}getSurveyData(){return null}getSurvey(){return this.data.getSurvey()}getTextProcessor(){return null}}class Ji extends ts{constructor(e){super(e),this._renderedPanels=[],this.isPanelsAnimationRunning=!1,this.isAddingNewPanels=!1,this.isSetPanelItemData={},this.createNewArray("panels",e=>{this.onPanelAdded(e)},e=>{this.onPanelRemoved(e)}),this.createNewArray("visiblePanels"),this.templateValue=this.createAndSetupNewPanelObject(),this.template.renderWidth="100%",this.template.selectedElementInDesign=this,this.template.addElementCallback=e=>{this.addOnPropertyChangedCallback(e),this.rebuildPanels()},this.template.removeElementCallback=()=>{this.rebuildPanels()},this.createLocalizableString("confirmDeleteText",this,!1,"confirmDelete"),this.createLocalizableString("keyDuplicationError",this,!1,!0),this.createLocalizableString("addPanelText",this,!1,"addPanel"),this.createLocalizableString("removePanelText",this,!1,"removePanel"),this.createLocalizableString("prevPanelText",this,!1,"pagePrevText"),this.createLocalizableString("nextPanelText",this,!1,"pageNextText"),this.createLocalizableString("noEntriesText",this,!1,"noEntriesText"),this.createLocalizableString("editPanelText",this,!1,"editText"),this.createLocalizableString("templateTabTitle",this,!0,"panelDynamicTabTextFormat"),this.createLocalizableString("tabTitlePlaceholder",this,!0,"tabTitlePlaceholder"),this.registerPropertyChangedHandlers(["panelsState"],()=>{this.setPanelsState()}),this.registerPropertyChangedHandlers(["newPanelPosition","displayMode","showProgressBar"],()=>{this.updateFooterActions()}),this.registerPropertyChangedHandlers(["allowAddPanel"],()=>{this.updateNoEntriesTextDefaultLoc()}),this.registerPropertyChangedHandlers(["minPanelCount"],()=>{this.onMinPanelCountChanged()}),this.registerPropertyChangedHandlers(["maxPanelCount"],()=>{this.onMaxPanelCountChanged()}),this.registerPropertyChangedHandlers(["templateQuestionTitleLocation","templateQuestionTitleWidth"],()=>{const e=this.visiblePanelsCore;e&&e.forEach(e=>{e.updateElementCss(!0)})})}get isCompositeQuestion(){return!0}get hasSingleInput(){return!1}get isContainer(){return!0}getFirstQuestionToFocus(e){for(var t=0;t<this.visiblePanelsCore.length;t++){const s=this.visiblePanelsCore[t].getFirstQuestionToFocus(e);if(s)return s}return this.showAddPanelButton&&(!e||this.currentErrorCount>0)?this:null}getFirstInputElementId(){return this.showAddPanelButton?this.addButtonId:super.getFirstInputElementId()}getFirstErrorInputElementId(){const e=this.getFirstQuestionToFocus(!0);return e?e.inputId:super.getFirstErrorInputElementId()}setSurveyImpl(e,t){super.setSurveyImpl(e,t),this.setTemplatePanelSurveyImpl(),this.setPanelsSurveyImpl()}assignOnPropertyChangedToTemplate(){for(var e=this.template.elements,t=0;t<e.length;t++)this.addOnPropertyChangedCallback(e[t])}addOnPropertyChangedCallback(e){e.isQuestion&&e.setParentQuestion(this),e.onPropertyChanged.add((e,t)=>{this.onTemplateElementPropertyChanged(e,t)}),e.isPanel&&(e.addElementCallback=e=>{this.addOnPropertyChangedCallback(e)})}onTemplateElementPropertyChanged(e,t){if(!this.isLoadingFromJson&&!this.useTemplatePanel&&0!=this.panelsCore.length&&I.findProperty(e.getType(),t.name))for(var s=this.panelsCore,n=0;n<s.length;n++){var i=s[n].getQuestionByName(e.name);i&&i[t.name]!==t.newValue&&(i[t.name]=t.newValue)}}get useTemplatePanel(){return this.isDesignMode&&!this.isContentElement}getType(){return"paneldynamic"}clearOnDeletingContainer(){this.panelsCore.forEach(e=>{e.clearOnDeletingContainer()})}get isAllowTitleLeft(){return!1}removeElement(e){return this.template.removeElement(e)}get template(){return this.templateValue}getPanel(){return this.template}get templateElements(){return this.template.elements}get templateTitle(){return this.template.title}set templateTitle(e){this.template.title=e}get locTemplateTitle(){return this.template.locTitle}get templateTabTitle(){return this.locTemplateTabTitle.text}set templateTabTitle(e){this.locTemplateTabTitle.text=e}get locTemplateTabTitle(){return this.getLocalizableString("templateTabTitle")}get tabTitlePlaceholder(){return this.locTabTitlePlaceholder.text}set tabTitlePlaceholder(e){this.locTabTitlePlaceholder.text=e}get locTabTitlePlaceholder(){return this.getLocalizableString("tabTitlePlaceholder")}get templateDescription(){return this.template.description}set templateDescription(e){this.template.description=e}get locTemplateDescription(){return this.template.locDescription}get templateVisibleIf(){return this.getPropertyValue("templateVisibleIf")}set templateVisibleIf(e){this.setPropertyValue("templateVisibleIf",e),this.template.visibleIf=e}get items(){for(var e=[],t=0;t<this.panelsCore.length;t++)e.push(this.panelsCore[t].data);return e}get panels(){return this.buildPanelsFirstTime(this.canBuildPanels),this.panelsCore}get visiblePanels(){return this.buildPanelsFirstTime(this.canBuildPanels),this.visiblePanelsCore}get panelsCore(){return this.getPropertyValue("panels")}get visiblePanelsCore(){return this.getPropertyValue("visiblePanels")}onPanelAdded(e){if(this.onPanelRemovedCore(e),!e.visible)return;let t=0;const s=this.panelsCore;for(var n=0;n<s.length&&s[n]!==e;n++)s[n].visible&&t++;this.visiblePanelsCore.splice(t,0,e),this.addTabFromToolbar(e,t),this.currentPanel||(this.currentPanel=e),this.updateRenderedPanels()}onPanelRemoved(e){let t=this.onPanelRemovedCore(e);if(this.currentPanel===e){const e=this.visiblePanelsCore;t>=e.length&&(t=e.length-1),this.currentPanel=t>=0?e[t]:null}this.updateRenderedPanels()}onPanelRemovedCore(e){const t=this.visiblePanelsCore;let s=t.indexOf(e);return s>-1&&(t.splice(s,1),this.removeTabFromToolbar(e)),s}get currentIndex(){return this.isRenderModeList?-1:this.useTemplatePanel?0:this.visiblePanelsCore.indexOf(this.currentPanel)}set currentIndex(e){e<0||this.visiblePanelCount<1||(e>=this.visiblePanelCount&&(e=this.visiblePanelCount-1),this.currentPanel=this.visiblePanelsCore[e])}get currentPanel(){if(this.isDesignMode)return this.template;if(this.isRenderModeList||this.useTemplatePanel)return null;let e=this.getPropertyValue("currentPanel",null);return!e&&this.visiblePanelCount>0&&(e=this.visiblePanelsCore[0],this.currentPanel=e),e}set currentPanel(e){if(this.isRenderModeList||this.useTemplatePanel)return;const t=this.getPropertyValue("currentPanel"),s=e?this.visiblePanelsCore.indexOf(e):-1;if(!(e&&s<0||e===t)&&(t&&t.onHidingContent(),this.setPropertyValue("currentPanel",e),this.updateRenderedPanels(),this.updateFooterActions(),this.updateTabToolbarItemsPressedState(),this.fireCallback(this.currentIndexChangedCallback),s>-1&&this.survey)){const t={panel:e,visiblePanelIndex:s};this.survey.dynamicPanelCurrentIndexChanged(this,t)}}updateRenderedPanels(){this.isRenderModeList?this.renderedPanels=[].concat(this.visiblePanels):this.currentPanel?this.renderedPanels=[this.currentPanel]:this.renderedPanels=[]}set renderedPanels(e){0==this.renderedPanels.length||0==e.length?(this.blockAnimations(),this.panelsAnimation.sync(e),this.releaseAnimations()):(this.isPanelsAnimationRunning=!0,this.panelsAnimation.sync(e))}get renderedPanels(){return this._renderedPanels}getPanelsAnimationOptions(){const e=()=>{if(this.isRenderModeList)return"";let e=new fe,t=!1;const s=this.renderedPanels.filter(e=>e!==this.currentPanel)[0];let n=this.visiblePanels.indexOf(s);return n<0&&(t=!0,n=this.removedPanelIndex),e.append("sv-pd-animation-adding",!!this.focusNewPanelCallback).append("sv-pd-animation-removing",t).append("sv-pd-animation-left",n<=this.currentIndex).append("sv-pd-animation-right",n>this.currentIndex).toString()};return{getRerenderEvent:()=>this.onElementRerendered,getAnimatedElement:e=>{var t,s;if(e&&this.cssContent){const n=ht(this.cssContent);return null===(s=null===(t=this.getWrapperElement())||void 0===t?void 0:t.querySelector(`:scope ${n} #${e.id}`))||void 0===s?void 0:s.parentElement}},getEnterOptions:()=>({onBeforeRunAnimation:e=>{if(this.focusNewPanelCallback){const t=this.isRenderModeList?e:e.parentElement;We.ScrollElementToViewCore(t,!1,!1,{behavior:"smooth"})}!this.isRenderModeList&&e.parentElement?ft(e.parentElement,{heightTo:e.offsetHeight+"px"}):bt(e)},onAfterRunAnimation:e=>{yt(e),e.parentElement&&yt(e.parentElement)},cssClass:(new fe).append(this.cssClasses.panelWrapperEnter).append(e()).toString()}),getLeaveOptions:()=>({onBeforeRunAnimation:e=>{!this.isRenderModeList&&e.parentElement?ft(e.parentElement,{heightFrom:e.offsetHeight+"px"}):bt(e)},onAfterRunAnimation:e=>{yt(e),e.parentElement&&yt(e.parentElement)},cssClass:(new fe).append(this.cssClasses.panelWrapperLeave).append(e()).toString()}),isAnimationEnabled:()=>this.animationAllowed&&!!this.getWrapperElement()}}disablePanelsAnimations(){this.panelsCore.forEach(e=>{e.blockAnimations()})}enablePanelsAnimations(){this.panelsCore.forEach(e=>{e.releaseAnimations()})}updatePanelsAnimation(){this._panelsAnimations=new(this.isRenderModeList?He:Qe)(this.getPanelsAnimationOptions(),(e,t)=>{this._renderedPanels=e,t||(this.isPanelsAnimationRunning=!1,this.focusNewPanel())},()=>this._renderedPanels)}get panelsAnimation(){return this._panelsAnimations||this.updatePanelsAnimation(),this._panelsAnimations}onHidingContent(){super.onHidingContent(),this.currentPanel?this.currentPanel.onHidingContent():this.visiblePanelsCore.forEach(e=>e.onHidingContent())}get confirmDelete(){return this.getPropertyValue("confirmDelete")}set confirmDelete(e){this.setPropertyValue("confirmDelete",e)}get keyName(){return this.getPropertyValue("keyName","")}set keyName(e){this.setPropertyValue("keyName",e)}get confirmDeleteText(){return this.getLocalizableStringText("confirmDeleteText")}set confirmDeleteText(e){this.setLocalizableStringText("confirmDeleteText",e)}get locConfirmDeleteText(){return this.getLocalizableString("confirmDeleteText")}get keyDuplicationError(){return this.getLocalizableStringText("keyDuplicationError")}set keyDuplicationError(e){this.setLocalizableStringText("keyDuplicationError",e)}get locKeyDuplicationError(){return this.getLocalizableString("keyDuplicationError")}get prevPanelText(){return this.getLocalizableStringText("prevPanelText")}set prevPanelText(e){this.setLocalizableStringText("prevPanelText",e)}get locPrevPanelText(){return this.getLocalizableString("prevPanelText")}get panelPrevText(){return this.prevPanelText}set panelPrevText(e){this.prevPanelText=e}get locPanelPrevText(){return this.locPrevPanelText}get nextPanelText(){return this.getLocalizableStringText("nextPanelText")}set nextPanelText(e){this.setLocalizableStringText("nextPanelText",e)}get locNextPanelText(){return this.getLocalizableString("nextPanelText")}get panelNextText(){return this.nextPanelText}set panelNextText(e){this.nextPanelText=e}get locPanelNextText(){return this.locNextPanelText}get addPanelText(){return this.getLocalizableStringText("addPanelText")}set addPanelText(e){this.setLocalizableStringText("addPanelText",e)}get locAddPanelText(){return this.getLocalizableString("addPanelText")}get panelAddText(){return this.addPanelText}set panelAddText(e){this.addPanelText=e}get locPanelAddText(){return this.locAddPanelText}get removePanelText(){return this.getLocalizableStringText("removePanelText")}set removePanelText(e){this.setLocalizableStringText("removePanelText",e)}get locRemovePanelText(){return this.getLocalizableString("removePanelText")}get panelRemoveText(){return this.removePanelText}set panelRemoveText(e){this.removePanelText=e}get locPanelRemoveText(){return this.locRemovePanelText}get isProgressTopShowing(){return"carousel"==this.displayMode&&("top"===this.progressBarLocation||"topBottom"===this.progressBarLocation)}get isProgressBottomShowing(){return"carousel"==this.displayMode&&("bottom"===this.progressBarLocation||"topBottom"===this.progressBarLocation)}get isPrevButtonVisible(){return this.currentIndex>0}get isPrevButtonShowing(){return this.isPrevButtonVisible}get isNextButtonVisible(){return this.currentIndex>=0&&this.currentIndex<this.visiblePanelCount-1}get isNextButtonShowing(){return this.isNextButtonVisible}get isRangeShowing(){return this.showProgressBar&&this.currentIndex>=0&&this.visiblePanelCount>1}getElementsInDesign(e=!1){return e?[this.template]:this.templateElements}prepareValueForPanelCreating(){this.addingNewPanelsValue=this.value,this.isAddingNewPanels=!0,this.isNewPanelsValueChanged=!1}setValueAfterPanelsCreating(){this.isAddingNewPanels=!1,this.isNewPanelsValueChanged&&(this.isValueChangingInternally=!0,this.value=this.addingNewPanelsValue,this.isValueChangingInternally=!1)}getValueCore(){return this.isAddingNewPanels?this.addingNewPanelsValue:super.getValueCore()}setValueCore(e){this.isAddingNewPanels?(this.isNewPanelsValueChanged=!0,this.addingNewPanelsValue=e):super.setValueCore(e)}setIsMobile(e){super.setIsMobile(e),(this.panelsCore||[]).forEach(t=>t.getQuestions(!0).forEach(t=>{t.setIsMobile(e)}))}themeChanged(e){super.themeChanged(e),(this.panelsCore||[]).forEach(t=>t.getQuestions(!0).forEach(t=>{t.themeChanged(e)}))}get panelCount(){return!this.canBuildPanels||this.wasNotRenderedInSurvey?this.getPropertyValue("panelCount"):this.panelsCore.length}set panelCount(e){if(e<0)return;if(!this.isLoadingFromJson&&this.isDesignMode){const t=this.minPanelCount;e<t&&(e=t);const s=this.maxPanelCount;s>0&&e>s&&(e=s)}if(!this.canBuildPanels||this.wasNotRenderedInSurvey)return this.setPropertyValue("panelCount",e),void this.updateFooterActions();if(e==this.panelsCore.length||this.useTemplatePanel)return;this.updateBindings("panelCount",e),this.prepareValueForPanelCreating();const t=e-this.panelCount===1;for(let t=this.panelCount;t<e;t++){const e=this.createNewPanel();this.panelsCore.push(e),"list"==this.displayMode&&"default"!=this.panelsState&&("expanded"===this.panelsState?e.expand():e.title&&e.collapse())}t&&this.singleInputOnAddItem(this.settingPanelCountBasedOnValue),e<this.panelCount&&this.panelsCore.splice(e,this.panelCount-e),this.disablePanelsAnimations(),this.setValueAfterPanelsCreating(),this.setValueBasedOnPanelCount(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.enablePanelsAnimations()}get visiblePanelCount(){return this.visiblePanels.length}get panelsState(){return this.getPropertyValue("panelsState")}set panelsState(e){this.setPropertyValue("panelsState",e)}getStructuredValue(e=-1){if(e<0||this.isEmpty()||!Array.isArray(this.value))return this.value;const t=new Array,s=Math.min(this.visiblePanelCount,this.value.length);for(let n=0;n<s;n++){const s={};this.visiblePanels[n].collectValues(s,e),t.push(s)}return t}setTemplatePanelSurveyImpl(){this.template.setSurveyImpl(this.useTemplatePanel?this.surveyImpl:new Ki(this))}setPanelsSurveyImpl(){for(var e=0;e<this.panelsCore.length;e++){var t=this.panelsCore[e];t!=this.template&&t.setSurveyImpl(t.data)}}setPanelsState(){if(!this.useTemplatePanel&&"list"==this.displayMode&&this.templateTitle)for(var e=0;e<this.panelsCore.length;e++){var t=this.panelsState;"firstExpanded"===t&&(t=0===e?"expanded":"collapsed"),this.panelsCore[e].state=t}}setValueBasedOnPanelCount(){var e=this.value;if(e&&Array.isArray(e)||(e=[]),e.length!=this.panelCount){for(var t=e.length;t<this.panelCount;t++){const s=this.panels[t].getValue(),n=a.isValueEmpty(s)?{}:s;e.push(n)}e.length>this.panelCount&&e.splice(this.panelCount,e.length-this.panelCount),this.isValueChangingInternally=!0,this.value=e,this.isValueChangingInternally=!1}}get minPanelCount(){return this.getPropertyValue("minPanelCount")}set minPanelCount(e){e<0&&(e=0),this.setPropertyValue("minPanelCount",e)}onMinPanelCountChanged(){const e=this.minPanelCount;e>this.maxPanelCount&&(this.maxPanelCount=e),this.panelCount<e&&(this.panelCount=e)}get maxPanelCount(){return this.getPropertyValue("maxPanelCount")}set maxPanelCount(e){e<=0||(e>xt.panel.maxPanelCount&&(e=xt.panel.maxPanelCount),this.setPropertyValue("maxPanelCount",e),this.updateFooterActions())}onMaxPanelCountChanged(){const e=this.maxPanelCount;e<this.minPanelCount&&(this.minPanelCount=e),this.panelCount>e&&(this.panelCount=e),this.updateFooterActions()}get allowAddPanel(){return this.getPropertyValue("allowAddPanel")}set allowAddPanel(e){this.setPropertyValue("allowAddPanel",e)}get addButtonId(){return this.id+"addPanel"}get newPanelPosition(){return this.getPropertyValue("newPanelPosition")}set newPanelPosition(e){this.setPropertyValue("newPanelPosition",e)}get allowRemovePanel(){return this.getPropertyValue("allowRemovePanel")}set allowRemovePanel(e){this.setPropertyValue("allowRemovePanel",e)}get templateQuestionTitleLocation(){return this.getPropertyValue("templateQuestionTitleLocation")}set templateQuestionTitleLocation(e){this.setPropertyValue("templateQuestionTitleLocation",e)}get templateTitleLocation(){return this.templateQuestionTitleLocation}set templateTitleLocation(e){this.templateQuestionTitleLocation=e}get templateQuestionTitleWidth(){return this.template.questionTitleWidth}set templateQuestionTitleWidth(e){this.template.questionTitleWidth=e}get templateErrorLocation(){return this.getPropertyValue("templateErrorLocation")}set templateErrorLocation(e){this.setPropertyValue("templateErrorLocation",e.toLowerCase())}resetSingleInput(){super.resetSingleInput(),this.locTemplateTitle.onGetTextCallback=null}getSingleInputQuestionsCore(e,t){this.onFirstRendering();const s=new Array,n=this.visiblePanels;if(t)for(let e=0;e<n.length;e++){const t=n[e];t.hasValueAnyQuestion(!0)&&t.validate(!1,!1)||this.fillSingleInputQuestionsByPanel(s,t)}return this.getSingleInputQuestionsForDynamic(e,s)}fillSingleInputQuestionsInContainer(e,t){const s=this.getPanelByQuestion(t);this.fillSingleInputQuestionsByPanel(e,s)}fillSingleInputQuestionsByPanel(e,t){t&&t.visibleQuestions.forEach(t=>t.addNestedQuestion(e,!0,!1,!1))}getSingleQuestionLocTitleCore(){const e=this.locTemplateTitle;return e.onGetTextCallback=e=>{const t=this.singleInputQuestion;return t?this.processSingleInputTitle(e,this.getPanelByQuestion(t)):e},e}processSingleInputTitle(e,t){return e||(e=this.getSingleInputTitleTemplate()),t?t.getProcessedText(e):e}getSingleInputTitleTemplate(){return this.getLocalizationString("panelDynamicTabTextFormat")}getPanelByQuestion(e){let t=e.parent;for(;t&&t.parent;)t=t.parent;return t}getSingleInputAddTextCore(){if(this.canAddPanel)return this.panelAddText}singleInputAddItemCore(){this.addPanelUI()}singleInputRemoveItemCore(e){const t=this.getPanelByQuestion(e),s=this.visiblePanelsCore.indexOf(t);this.removePanelUI(s)}getSingleQuestionOnChange(e){const t=this.visiblePanelsCore;if(t.length>0){(e<0||e>=t.length)&&(e=t.length-1);const s=t[e].visibleQuestions;if(s.length>0)return s[0]}return null}createSingleInputSummary(){const e=new Ys(this,this.locNoEntriesText),t=new Array;return this.visiblePanels.forEach(e=>{const s=new Ze(this,!0,void 0,this.locTemplateTitle.localizationName);s.setJson(this.locTemplateTitle.getJson()),s.onGetTextCallback=t=>this.processSingleInputTitle(this.templateTitle,e);const n=new De({locTitle:this.getLocalizableString("editPanelText"),action:()=>{this.singInputEditPanel(e)}}),i=this.canRemovePanel?new De({locTitle:this.locPanelRemoveText,action:()=>{this.removePanelUI(e)}}):void 0;t.push(new Js(s,n,i))}),e.items=t,e}singleInputMoveToFirstCore(){var e;let t=null===(e=this.singleInputQuestion)||void 0===e?void 0:e.parent;for(;t&&t.parent;)t=t.parent;this.singInputEditPanel(t)}singInputEditPanel(e){if(!e)return;const t=e.visibleQuestions;t.length>0&&this.setSingleInputQuestion(t[0])}get showQuestionNumbers(){return this.getPropertyValue("showQuestionNumbers")}set showQuestionNumbers(e){this.setPropertyValue("showQuestionNumbers",e),!this.isLoadingFromJson&&this.survey&&this.survey.questionVisibilityChanged(this,this.visible,!0)}notifySurveyOnChildrenVisibilityChanged(){return"onSurvey"===this.showQuestionNumbers}get removePanelButtonLocation(){return this.getPropertyValue("removePanelButtonLocation")}set removePanelButtonLocation(e){this.setPropertyValue("removePanelButtonLocation",e)}get panelRemoveButtonLocation(){return this.removePanelButtonLocation}set panelRemoveButtonLocation(e){this.removePanelButtonLocation=e}get showRangeInProgress(){return this.showProgressBar}set showRangeInProgress(e){this.showProgressBar=e}get renderMode(){let e=this.displayMode;if("carousel"==e){const e=this.progressBarLocation;if("top"==e)return"progressTop";if("bottom"==e)return"progressBottom";if("topBottom"==e)return"progressTopBottom"}return e}set renderMode(e){(e||"").startsWith("progress")?("progressTop"==e?this.progressBarLocation="top":"progressBottom"==e?this.progressBarLocation="bottom":"progressTopBottom"==e&&(this.progressBarLocation="topBottom"),this.displayMode="carousel"):this.displayMode=e}updatePanelView(){this.blockAnimations(),this.updateRenderedPanels(),this.releaseAnimations(),this.updatePanelsAnimation()}get tabAlign(){return this.getPropertyValue("tabAlign")}set tabAlign(e){this.setPropertyValue("tabAlign",e),this.isRenderModeTab&&(this.tabbedMenu.containerCss=this.getTabbedMenuCss())}get isRenderModeList(){return"list"===this.displayMode||this.isSingleInputActive}get isRenderModeTab(){return"tab"===this.displayMode&&!this.isSingleInputActive}setVisibleIndex(e){if(!this.isVisible)return 0;const t="onSurvey"===this.showQuestionNumbers;let s=t?e:0;const n=this.isDesignMode?[this.template]:this.visiblePanelsCore;for(let e=0;e<n.length;e++){let i=this.setPanelVisibleIndex(n[e],s,"off"!=this.showQuestionNumbers);t&&(s+=i)}return super.setVisibleIndex(t?-1:e),t?s-e:1}setPanelVisibleIndex(e,t,s){return s?e.setVisibleIndex(t):(e.setVisibleIndex(-1),0)}get canAddPanel(){return!this.isDesignMode&&!(!this.legacyNavigation&&!this.isRenderModeList&&this.currentIndex<this.visiblePanelCount-1&&"next"!==this.newPanelPosition)&&this.allowAddPanel&&!this.isReadOnly&&this.panelCount<this.maxPanelCount}get canRemovePanel(){return!this.isDesignMode&&this.allowRemovePanel&&!this.isReadOnly&&this.panelCount>this.minPanelCount}rebuildPanels(){if(!this.isLoadingFromJson){this.prepareValueForPanelCreating();var e=[];if(this.useTemplatePanel)new Zi(this,this.template),e.push(this.template);else for(var t=0;t<this.panelCount;t++)e.push(this.createNewPanel());this.panelsCore.splice(0,this.panelsCore.length,...e),this.setValueAfterPanelsCreating(),this.setPanelsState(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.updateTabToolbar()}}get defaultPanelValue(){return this.getPropertyValue("defaultPanelValue")}set defaultPanelValue(e){this.setPropertyValue("defaultPanelValue",e)}get copyDefaultValueFromLastEntry(){return this.getPropertyValue("copyDefaultValueFromLastEntry")}set copyDefaultValueFromLastEntry(e){this.setPropertyValue("copyDefaultValueFromLastEntry",e)}get defaultValueFromLastPanel(){return this.copyDefaultValueFromLastEntry}set defaultValueFromLastPanel(e){this.copyDefaultValueFromLastEntry=e}isDefaultValueEmpty(){return super.isDefaultValueEmpty()&&this.isValueEmpty(this.defaultPanelValue)}setDefaultValue(){if(!this.isValueEmpty(this.defaultPanelValue)&&this.isValueEmpty(this.defaultValue)){if(this.isEmpty()&&0!=this.panelCount){for(var e=[],t=0;t<this.panelCount;t++)e.push(this.defaultPanelValue);this.value=e}}else super.setDefaultValue()}get isValueArray(){return!0}isEmpty(){var e=this.value;if(!e||!Array.isArray(e))return!0;for(var t=0;t<e.length;t++)if(!this.isRowEmpty(e[t]))return!1;return!0}getProgressInfo(){return We.getProgressInfoByElements(this.visiblePanelsCore,this.isRequired)}isRowEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}addPanelUI(){return this.addPanel(void 0,!0)}addPanel(e,t){const s=!0===t;if(s){if(!this.canAddPanel)return null;if(!this.canLeaveCurrentPanel())return null}const n=this.addPanelCore(e);return s&&("list"===this.displayMode&&"default"!==this.panelsState&&n.expand(),this.focusNewPanelCallback=()=>{null==n||n.focusFirstQuestion()},this.isPanelsAnimationRunning||this.focusNewPanel()),n}addPanelCore(e){const t=this.currentIndex;return void 0===e&&(e=t<0?this.panelCount:t+1),(e<0||e>this.panelCount)&&(e=this.panelCount),this.updateValueOnAddingPanel(t<0?this.panelCount-1:t,e),this.isRenderModeList||(this.currentIndex=e),this.notifyOnPanelAddedRemoved(!0,e),this.panelsCore[e]}focusNewPanel(){this.focusNewPanelCallback&&(this.focusNewPanelCallback(),this.focusNewPanelCallback=void 0)}updateValueOnAddingPanel(e,t){this.panelCount++;let s=this.value;if(!Array.isArray(s)||s.length!==this.panelCount)return;let n=!1;const i=this.panelCount-1;if(t<i){n=!0;const e=s[i];s.splice(i,1),s.splice(t,0,e)}if(this.isValueEmpty(this.defaultPanelValue)||(n=!0,this.copyValue(s[t],this.defaultPanelValue)),this.copyDefaultValueFromLastEntry&&s.length>1){const r=e>-1&&e<=i?e:i;n=!0,this.copyValue(s[t],s[r])}n&&(this.value=s)}canLeaveCurrentPanel(){return"list"===this.displayMode||!this.currentPanel||this.currentPanel.validate(!0,!0)}copyValue(e,t){for(var s in t)e[s]=t[s]}getPanelRemoveButtonId(e){return e.id+"_remove_button"}isRequireConfirmOnDelete(e){if(!this.confirmDelete)return!1;const t=this.getVisualPanelIndex(e);if(t<0||t>=this.visiblePanelCount)return!1;const s=this.visiblePanelsCore[t].getValue();return!this.isValueEmpty(s)&&(this.isValueEmpty(this.defaultPanelValue)||!this.isTwoValueEquals(s,this.defaultPanelValue))}goToNextPanel(){return!(this.currentIndex<0||!this.canLeaveCurrentPanel()||(this.currentIndex++,0))}goToPrevPanel(){this.currentIndex<0||this.currentIndex--}removePanelUI(e){this.removePanel(e,this.isRequireConfirmOnDelete(e))}removePanel(e,t){const s=this.getVisualPanelIndex(e);if(!(s<0||s>=this.visiblePanelCount))if(void 0!==t){if(!this.canRemovePanel)return;const e=()=>{var e;this.removePanelCore(s);const t=this.visiblePanelCount,n=s>=t?t-1:s;let i=0===t?this.addButtonId:n>-1?this.getPanelRemoveButtonId(this.visiblePanels[n]):"";i&&We.FocusElement(i,!0,null===(e=this.survey)||void 0===e?void 0:e.rootElement)};t?Je({message:this.confirmDeleteText,funcOnYes:()=>{e()},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog}):e()}else this.removePanelCore(s)}removePanelCore(e){this.removedPanelIndex=e;const t=this.visiblePanelsCore[e],s=this.panelsCore.indexOf(t);if(!(s<0)&&(!this.survey||this.survey.dynamicPanelRemoving(this,s,t))){this.panelsCore.splice(s,1),this.updateBindings("panelCount",this.panelCount),this.singleInputOnRemoveItem(e);var n=this.value;!n||!Array.isArray(n)||s>=n.length?this.updateFooterActions():(this.isValueChangingInternally=!0,n.splice(s,1),this.value=n,this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.notifyOnPanelAddedRemoved(!1,s,t),this.isValueChangingInternally=!1)}}notifyOnPanelAddedRemoved(e,t,s){if(s||(s=this.panelsCore[t]),this.survey){const n="onSurvey"===this.showQuestionNumbers;e?this.survey.dynamicPanelAdded(this,t,s,n):this.survey.dynamicPanelRemoved(this,t,s,n)}e&&s&&"onPanel"===this.showQuestionNumbers&&s.setVisibleIndex(0)}getVisualPanelIndex(e){if(a.isNumber(e))return e;const t=this.visiblePanelsCore;for(var s=0;s<t.length;s++)if(t[s]===e||t[s].data===e)return s;return-1}getPanelVisibleIndexById(e){const t=this.visiblePanelsCore;for(var s=0;s<t.length;s++)if(t[s].id===e)return s;return-1}locStrsChanged(){super.locStrsChanged(),this.locTemplateTitle.strChanged();for(var e=this.panelsCore,t=0;t<e.length;t++)e[t].locStrsChanged();this.tabbedMenu&&this.tabbedMenu.locStrsChanged()}clearIncorrectValues(){for(var e=0;e<this.panelsCore.length;e++)this.clearIncorrectValuesInPanel(e)}clearErrors(){super.clearErrors();for(var e=0;e<this.panelsCore.length;e++)this.panelsCore[e].clearErrors()}getQuestionFromArray(e,t){return t<0||t>=this.panelsCore.length?null:this.panelsCore[t].getQuestionByName(e)}clearIncorrectValuesInPanel(e){var t=this.panelsCore[e];t.clearIncorrectValues();var s=this.value,n=s&&e<s.length?s[e]:null;if(n){var i=!1;for(var r in n)this.getSharedQuestionFromArray(r,e)||t.getQuestionByValueName(r)||this.iscorrectValueWithPostPrefix(t,r,xt.commentSuffix)||this.iscorrectValueWithPostPrefix(t,r,xt.matrix.totalsSuffix)||(delete n[r],i=!0);i&&(s[e]=n,this.value=s)}}iscorrectValueWithPostPrefix(e,t,s){return t.indexOf(s)===t.length-s.length&&!!e.getQuestionByName(t.substring(0,t.indexOf(s)))}getSharedQuestionFromArray(e,t){return this.survey&&this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,t):null}addConditionObjectsByContext(e,t){const s=(null==t?void 0:t.isValidator)?t.errorOwner:t,n=!!t&&(!0===t||this.template.questions.indexOf(s)>-1),i=new Array,r=this.template.questions;for(var a=0;a<r.length;a++)r[a].addConditionObjectsByContext(i,t);for(var o=0;o<xt.panel.maxPanelCountInCondition;o++){const t="["+o+"].",s=this.getValueName()+t,n=this.processedTitle+t;for(a=0;a<i.length;a++)i[a].context?e.push(i[a]):e.push({name:s+i[a].name,text:n+i[a].text,question:i[a].question})}if(n){const s=!0===t?this.getValueName()+".":"",n=!0===t?this.processedTitle+".":"",r=xt.expressionVariables.panel+".";for(a=0;a<i.length;a++){if(i[a].question==t)continue;const o={name:s+r+i[a].name,text:n+r+i[a].text,question:i[a].question};o.context=this,e.push(o)}}}collectNestedQuestionsCore(e,t,s,n){n&&e.push(this);const i=t?this.visiblePanelsCore:this.panelsCore;Array.isArray(i)&&i.forEach(i=>{i.questions.forEach(i=>i.addNestedQuestion(e,t,s,n))})}getConditionJson(e=null,t=null){if(!t)return super.getConditionJson(e);var s=t,n=t.indexOf(".");n>-1&&(s=t.substring(0,n),t=t.substring(n+1));var i=this.template.getQuestionByName(s);return i?i.getConditionJson(e,t):null}onReadOnlyChanged(){var e=this.isReadOnly;this.template.readOnly=e;for(var t=0;t<this.panelsCore.length;t++)this.panelsCore[t].readOnly=e;this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),super.onReadOnlyChanged()}updateNoEntriesTextDefaultLoc(){const e=this.getLocalizableString("noEntriesText");e&&(e.localizationName=this.isReadOnly||!this.allowAddPanel?"noEntriesReadonlyText":"noEntriesText")}onSurveyLoad(){this.template.readOnly=this.isReadOnly,this.template.onSurveyLoad(),this.panelCount<this.minPanelCount&&(this.panelCount=this.minPanelCount),this.panelCount>this.maxPanelCount&&(this.panelCount=this.maxPanelCount),this.buildPanelsFirstTime(),super.onSurveyLoad()}buildPanelsFirstTime(e=!1){if(!this.hasPanelBuildFirstTime&&(e||!this.wasNotRenderedInSurvey)){if(this.blockAnimations(),this.hasPanelBuildFirstTime=!0,this.isBuildingPanelsFirstTime=!0,this.getPropertyValue("panelCount")>0&&(this.panelCount=this.getPropertyValue("panelCount")),this.useTemplatePanel&&this.rebuildPanels(),this.setPanelsSurveyImpl(),this.setPanelsState(),this.assignOnPropertyChangedToTemplate(),this.data&&this.isValueChangedWithoutPanels&&(this.isValueChangedWithoutPanels=!1,this.runTriggersOnBuildPanelsFirstTime()),this.survey)for(var t=0;t<this.panelCount;t++)this.notifyOnPanelAddedRemoved(!0,t);this.updateIsReady(),this.showAddPanelButton||this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),this.isBuildingPanelsFirstTime=!1,this.releaseAnimations()}}runTriggersOnBuildPanelsFirstTime(){this.value,this.visiblePanelsCore.forEach(e=>{const t=this.getPanelItemData(e.data);if(!a.isValueEmpty(t)){const s=a.createCopyWithPrefix(t,xt.expressionVariables.panel+".");e.questions.forEach(e=>e.runTriggers("",void 0,s))}})}get showAddPanelButton(){return this.allowAddPanel&&!this.isReadOnly}get wasNotRenderedInSurvey(){return!this.hasPanelBuildFirstTime&&!this.wasRendered&&!!this.survey}get canBuildPanels(){return!this.isLoadingFromJson&&!this.useTemplatePanel}onFirstRenderingCore(){super.onFirstRenderingCore(),this.buildPanelsFirstTime(),this.template.onFirstRendering();for(var e=0;e<this.panelsCore.length;e++)this.panelsCore[e].onFirstRendering()}localeChanged(){super.localeChanged();for(var e=0;e<this.panelsCore.length;e++)this.panelsCore[e].localeChanged()}runConditionCore(e){super.runConditionCore(e),this.runPanelsCondition(this.panelsCore,e)}runTriggers(e,t,s){super.runTriggers(e,t,s),this.visiblePanelsCore.forEach(n=>{n.questions.forEach(n=>n.runTriggers(e,t,s))})}reRunCondition(){this.data&&this.runCondition(this.getDataFilteredProperties())}runPanelsCondition(e,t){this.isValueChangingInternally=!0;for(var s=0;s<e.length;s++){const n=e[s],i=xt.expressionVariables.panel,r=a.createCopy(t);r[i]=n,n.runCondition(r),n.isVisible}this.isValueChangingInternally=!1}onAnyValueChanged(e,t){super.onAnyValueChanged(e,t),this.hasPanelBuildFirstTime||e!==this.getValueName()||(this.isValueChangedWithoutPanels=!0);for(var s=0;s<this.panelsCore.length;s++)this.panelsCore[s].onAnyValueChanged(e,t),this.panelsCore[s].onAnyValueChanged(xt.expressionVariables.panel,"")}hasKeysDuplicated(e){for(var t,s=[],n=0;n<this.panelsCore.length;n++)t=this.isValueDuplicated(this.panelsCore[n],s,e)||t;return t}updatePanelsContainsErrors(){for(var e=this.changingValueQuestion.parent;e;)e.updateContainsErrors(),e=e.parent;this.updateContainsErrors()}validateElementCore(e){if(this.isValueChangingInternally||this.isBuildingPanelsFirstTime)return!0;let t=!0;if(this.changingValueQuestion){const s=this.changingValueQuestion.validateElement(e);t=!this.hasKeysDuplicated(e)&&s,this.updatePanelsContainsErrors()}else t=this.validateInPanels(e);return super.validateElementCore(e)&&t}getContainsErrors(){var e=super.getContainsErrors();if(e)return e;for(var t=this.panelsCore,s=0;s<t.length;s++)if(t[s].containsErrors)return!0;return!1}getIsAnswered(){if(!super.getIsAnswered())return!1;for(var e=this.visiblePanelsCore,t=0;t<e.length;t++){var s=[];e[t].addQuestionsToList(s,!0);for(var n=0;n<s.length;n++)if(!s[n].isAnswered)return!1}return!0}clearValueOnHidding(e){if(!e){if(this.survey&&"none"===this.survey.getQuestionClearIfInvisible("onHidden"))return;this.clearValueInPanelsIfInvisible("onHiddenContainer")}super.clearValueOnHidding(e)}clearValueIfInvisible(e="onHidden"){const t="onHidden"===e?"onHiddenContainer":e;this.clearValueInPanelsIfInvisible(t),super.clearValueIfInvisible(e)}clearValueInPanelsIfInvisible(e){for(var t=0;t<this.panelsCore.length;t++){const i=this.panelsCore[t];var s=i.questions;this.isSetPanelItemData={};for(var n=0;n<s.length;n++){const t=s[n];t.visible&&!i.isVisible||(t.clearValueIfInvisible(e),this.isSetPanelItemData[t.getValueName()]=this.maxCheckCount+1)}}this.isSetPanelItemData={}}getIsRunningValidators(){if(super.getIsRunningValidators())return!0;for(var e=0;e<this.panelsCore.length;e++)for(var t=this.panelsCore[e].questions,s=0;s<t.length;s++)if(t[s].isRunningValidators)return!0;return!1}getAllErrors(){var e=super.getAllErrors();const t=this.visiblePanelsCore;for(var s=0;s<t.length;s++)for(var n=t[s].questions,i=0;i<n.length;i++){var r=n[i].getAllErrors();r&&r.length>0&&(e=e.concat(r))}return e}getValueGetterContext(){return new Wi(this)}getDisplayValueCore(e,t){var s=this.getUnbindValue(t);if(!s||!Array.isArray(s))return s;for(var n=0;n<this.panelsCore.length&&n<s.length;n++){var i=s[n];i&&(s[n]=this.getPanelDisplayValue(n,i,e))}return s}getPanelDisplayValue(e,t,s){if(!t)return t;for(var n=this.panelsCore[e],i=Object.keys(t),r=0;r<i.length;r++){var a=i[r],o=n.getQuestionByValueName(a);if(o||(o=this.getSharedQuestionFromArray(a,e)),o){var l=o.getDisplayValue(s,t[a]);t[a]=l,s&&o.title&&o.title!==a&&(t[o.title]=l,delete t[a])}}return t}validateInPanels(e){let t=!0;const s=this.visiblePanels,n=[];for(let i=0;i<s.length;i++){let r=s[i].validateElement(e);r=!this.isValueDuplicated(s[i],n,e)&&r,!this.isRenderModeList&&!r&&t&&e.focusOnFirstError&&(this.currentIndex=i),t=r&&t}return t}isValueDuplicated(e,t,s){if(!this.keyName)return!1;var n=e.getQuestionByValueName(this.keyName);if(!n||n.isEmpty())return!1;var i=n.value;this.changingValueQuestion&&n!=this.changingValueQuestion&&n.validateElement(s);for(var r=0;r<t.length;r++)if(i==t[r])return s.fireCallback&&n.addError(new Nt(this.keyDuplicationError,this)),s.setErrorElement(n),!0;return t.push(i),!1}getPanelActions(e){let t=e.footerActions;return"right"!==this.removePanelButtonLocation&&t.push(new De({id:`remove-panel-${e.id}`,component:"sv-paneldynamic-remove-btn",visible:new de(()=>[this.canRenderRemovePanel(e,"bottom")].every(e=>!0===e)),data:{question:this,panel:e}})),this.survey&&(t=this.survey.getUpdatedPanelFooterActions(e,t,this)),t}canRenderRemovePanelOnRight(e){return this.canRenderRemovePanel(e,"right")}canRenderRemovePanel(e,t){const s=this.canRemovePanel,n="collapsed"!==e.state;return this.removePanelButtonLocation===t&&s&&n}createNewPanel(){var e=this.createAndSetupNewPanelObject(),t=this.template.toJSON();return(new V).toObject(t,e),e.renderWidth="100%",e.updateCustomWidgets(),e.questions.forEach(e=>e.setParentQuestion(this)),new Zi(this,e),this.wasRendered&&(e.onFirstRendering(),e.locStrsChanged()),e.onGetFooterActionsCallback=()=>this.getPanelActions(e),e.onGetFooterToolbarCssCallback=()=>this.cssClasses.panelFooter,e.registerPropertyChangedHandlers(["visible"],()=>{e.visible?this.onPanelAdded(e):this.onPanelRemoved(e),this.updateFooterActions()}),e}createAndSetupNewPanelObject(){var e=this.createNewPanelObject();return e.isInteractiveDesignElement=!1,e.setParentQuestion(this),e.onGetQuestionTitleLocation=()=>this.getTemplateQuestionTitleLocation(),e.onGetQuestionTitleWidth=()=>this.templateQuestionTitleWidth,e}getTemplateQuestionTitleLocation(){return"default"!=this.templateQuestionTitleLocation?this.templateQuestionTitleLocation:this.getTitleLocationCore()}getChildErrorLocation(e){return"default"!==this.templateErrorLocation?this.templateErrorLocation:super.getChildErrorLocation(e)}createNewPanelObject(){return I.createClass("panel")}setPanelCountBasedOnValue(){if(!this.isValueChangingInternally&&!this.useTemplatePanel){var e=this.value,t=e&&Array.isArray(e)?e.length:0;0==t&&this.getPropertyValue("panelCount")>0&&(t=this.getPropertyValue("panelCount")),this.settingPanelCountBasedOnValue=!0,this.panelCount=t,this.settingPanelCountBasedOnValue=!1}}setQuestionValue(e){if(!this.settingPanelCountBasedOnValue){super.setQuestionValue(e,!1),this.setPanelCountBasedOnValue();for(var t=0;t<this.panelsCore.length;t++)this.panelUpdateValueFromSurvey(this.panelsCore[t]);this.updateIsAnswered()}}onSurveyValueChanged(e){if(void 0!==e||!this.isAllPanelsEmpty()){super.onSurveyValueChanged(e);for(var t=0;t<this.panelsCore.length;t++)this.panelSurveyValueChanged(this.panelsCore[t]);void 0===e&&this.setValueBasedOnPanelCount(),this.updateIsReady()}}isAllPanelsEmpty(){for(var e=0;e<this.panelsCore.length;e++)if(!a.isValueEmpty(this.panelsCore[e].getValue()))return!1;return!0}panelUpdateValueFromSurvey(e){const t=e.questions;for(var s=this.getPanelItemData(e.data),n=0;n<t.length;n++){const e=t[n];e.updateValueFromSurvey(s[e.getValueName()]),e.updateCommentFromSurvey(s[e.getValueName()+xt.commentSuffix]),e.initDataUI()}}panelSurveyValueChanged(e){for(var t=e.questions,s=this.getPanelItemData(e.data),n=0;n<t.length;n++){var i=t[n];i.onSurveyValueChanged(s[i.getValueName()])}}onSetData(){super.onSetData(),!this.isLoadingFromJson&&this.useTemplatePanel&&(this.setTemplatePanelSurveyImpl(),this.rebuildPanels())}isNewValueCorrect(e){return Array.isArray(e)}getValueChangingOptions(e){let t=e.parent;for(;t.parent;)t=t.parent;const s=t,n=this.panels.indexOf(s);return{question:this,panel:s,name:e.name,panelIndex:n,panelData:this.getPanelItemDataByIndex(n),oldValue:e.value}}getItemIndex(e){var t=this.items.indexOf(e);return t>-1?t:this.items.length}getVisibleItemIndex(e){const t=this.visiblePanelsCore;for(var s=0;s<t.length;s++)if(t[s].data===e)return s;return t.length}getPanelItemData(e){return this.getPanelItemDataByIndex(this.items.indexOf(e))}getPanelItemDataByIndex(e){const t=this.items;var s=this.value;return e<0&&Array.isArray(s)&&s.length>t.length&&(e=t.length),e<0||!s||!Array.isArray(s)||s.length<=e?{}:s[e]}setPanelItemData(e,t,s){if(this.isSetPanelItemData[t]>this.maxCheckCount)return;this.isSetPanelItemData[t]||(this.isSetPanelItemData[t]=0),this.isSetPanelItemData[t]++;var n=this.items,i=n.indexOf(e);i<0&&(i=n.length);var r=this.getUnbindValue(this.value);r&&Array.isArray(r)||(r=[]);const a=Math.max(i+1,n.length);for(var o=r.length;o<a;o++)r.push({});r[i]||(r[i]={}),this.isValueEmpty(s)?delete r[i][t]:r[i][t]=s,i>=0&&i<this.panelsCore.length&&(this.changingValueQuestion=this.panelsCore[i].getQuestionByValueName(t)),this.value=r,this.changingValueQuestion=null,this.isSetPanelItemData[t]--,this.isSetPanelItemData[t]-1&&delete this.isSetPanelItemData[t]}getRootData(){return this.data}getPlainData(e={includeEmpty:!0}){var t=super.getPlainData(e);if(t){t.isNode=!0;const s=Array.isArray(t.data)?[].concat(t.data):[];t.data=this.panels.map((t,s)=>{var n={name:t.name||s,title:t.title||"Panel",value:t.getValue(),displayValue:t.getValue(),getString:e=>"object"==typeof e?JSON.stringify(e):e,isNode:!0,data:t.questions.map(t=>t.getPlainData(e)).filter(e=>!!e)};return(e.calculations||[]).forEach(e=>{n[e.propertyName]=t[e.propertyName]}),n}),t.data=t.data.concat(s)}return t}updateElementCss(e){super.updateElementCss(e);for(var t=0;t<this.panelsCore.length;t++)this.panelsCore[t].updateElementCss(e)}get progressText(){var e=this.visiblePanelCount;return this.getLocalizationFormatString("panelDynamicProgressText",this.currentIndex+1,e)}get progress(){return(this.currentIndex+1)/this.visiblePanelCount*100+"%"}get progressBarAriaLabel(){return l("progressbar",this.getLocale())}getRootCss(){return(new fe).append(super.getRootCss()).append(this.cssClasses.empty,this.getShowNoEntriesPlaceholder()).toString()}get cssHeader(){const e=this.isRenderModeTab&&!!this.visiblePanelCount;return(new fe).append(super.getCssHeader(this.cssClasses)).append(this.cssClasses.headerTab,this.hasTitleOnTop&&e).toString()}getTabsContainerCss(){return(new fe).append(this.cssClasses.tabsContainer).append(this.cssClasses.tabsContainerWithHeader,this.hasTitleOnTop).toString()}getPanelWrapperCss(e){return(new fe).append(this.cssClasses.panelWrapper,!e||e.visible).append(this.cssClasses.panelWrapperList,this.isRenderModeList).append(this.cssClasses.panelWrapperInRow,"right"===this.removePanelButtonLocation).toString()}getPanelRemoveButtonCss(){return(new fe).append(this.cssClasses.button).append(this.cssClasses.buttonRemove).append(this.cssClasses.buttonRemoveRight,"right"===this.removePanelButtonLocation).toString()}getAddButtonCss(){return(new fe).append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.buttonAdd+"--list-mode","list"===this.displayMode).toString()}getPrevButtonCss(){return(new fe).append(this.cssClasses.buttonPrev).append(this.cssClasses.buttonPrevDisabled,!this.isPrevButtonVisible).toString()}getNextButtonCss(){return(new fe).append(this.cssClasses.buttonNext).append(this.cssClasses.buttonNextDisabled,!this.isNextButtonVisible).toString()}get noEntriesText(){return this.getLocalizableStringText("noEntriesText")}set noEntriesText(e){this.setLocalizableStringText("noEntriesText",e)}get locNoEntriesText(){return this.getLocalizableString("noEntriesText")}getShowNoEntriesPlaceholder(){return!!this.cssClasses.noEntriesPlaceholder&&!this.isDesignMode&&0===this.visiblePanelCount}needResponsiveWidth(){const e=this.getPanel();return!(!e||!e.needResponsiveWidth())}get hasTabbedMenu(){return this.isRenderModeTab&&this.visiblePanels.length>0}get tabbedMenu(){return this.isRenderModeTab?(this.tabbedMenuValue||(this.tabbedMenuValue=new je,this.tabbedMenuValue.dotsItem.popupModel.showPointer=!1,this.tabbedMenuValue.dotsItem.popupModel.verticalPosition="bottom",this.tabbedMenuValue.dotsItem.popupModel.horizontalPosition="center",this.updateElementCss(!1)),this.tabbedMenuValue):null}get showFooterToolbar(){return this.footerToolbar&&this._showFooterToolbar}get footerToolbar(){return this.footerToolbarValue||this.initFooterToolbar(),this.footerToolbarValue}get ariaRole(){return"group"}get ariaRequired(){return null}get ariaInvalid(){return null}updateFooterActions(){this.updateFooterActionsCallback&&this.updateFooterActionsCallback()}initFooterToolbar(){this.footerToolbarValue=this.createActionContainer();const e=[],t=new De({id:"sv-pd-prev-btn",title:this.prevPanelText,action:()=>{this.goToPrevPanel()}}),s=new De({id:"sv-pd-next-btn",title:this.nextPanelText,action:()=>{this.goToNextPanel()}}),n=new De({id:"sv-pd-add-btn",component:"sv-paneldynamic-add-btn",data:{question:this}}),i=new De({id:"sv-prev-btn-icon",component:"sv-paneldynamic-prev-btn",data:{question:this}}),r=new De({id:"sv-pd-progress-text",component:"sv-paneldynamic-progress-text",data:{question:this}}),a=new De({id:"sv-pd-next-btn-icon",component:"sv-paneldynamic-next-btn",data:{question:this}});e.push(t,s,n,i,r,a),this.updateFooterActionsCallback=()=>{const e=this.legacyNavigation,o=this.isRenderModeList,l=this.isMobile,u=!e&&!o;t.visible=u&&this.currentIndex>0,s.visible=u&&this.currentIndex<this.visiblePanelCount-1,s.needSpace=l&&s.visible&&t.visible,n.visible=this.canAddPanel,n.needSpace=this.isMobile&&!s.visible&&t.visible,r.visible=!this.isRenderModeList&&!l,r.needSpace=!e&&!this.isMobile;const d=e&&!o;i.visible=d,a.visible=d,i.needSpace=d},this.updateFooterActionsCallback(),this.footerToolbarValue.setItems(e),this.footerToolbar.flushUpdates(),this._showFooterToolbar=new de(()=>{var e;return null===(e=this.footerToolbarValue)||void 0===e?void 0:e.hasVisibleActions})}createTabByPanel(e,t){if(!this.isRenderModeTab)return;const s=new Ze(e,!0);s.onGetTextCallback=s=>{if(s||(s=this.locTabTitlePlaceholder.renderedHtml),!this.survey)return s;const n={title:s,panel:e,visiblePanelIndex:t};return this.survey.dynamicPanelGetTabTitle(this,n),n.title},s.sharedData=this.locTemplateTabTitle;const n=e.id,i=this.getPanelVisibleIndexById(n)===this.currentIndex;return new Gi({id:`${this.id}_tab_${n}`,panelId:n,pressed:i,locTitle:s,disableHide:i,action:()=>{this.currentIndex=this.getPanelVisibleIndexById(n)}})}getTabbedMenuCss(e){const t=null!=e?e:this.cssClasses;return(new fe).append(t.tabsRoot).append(t.tabsLeft,"left"===this.tabAlign).append(t.tabsRight,"right"===this.tabAlign).append(t.tabsCenter,"center"===this.tabAlign).toString()}updateTabToolbarItemsPressedState(){if(!this.isRenderModeTab)return;if(this.currentIndex<0||this.currentIndex>=this.visiblePanelCount)return;const e=this.visiblePanelsCore[this.currentIndex];this.tabbedMenu.actions.forEach(t=>{const s=t.panelId===e.id;t.pressed=s,t.disableHide=s})}updateTabToolbar(){if(!this.isRenderModeTab)return;const e=[],t=this.visiblePanelsCore;for(let s=0;s<t.length;s++)this.visiblePanelsCore.forEach(n=>e.push(this.createTabByPanel(t[s],s)));this.tabbedMenu.setItems(e)}addTabFromToolbar(e,t){if(!this.isRenderModeTab)return;const s=this.createTabByPanel(e,t);this.tabbedMenu.actions.splice(t,0,s),this.updateTabToolbarItemsPressedState()}removeTabFromToolbar(e){if(!this.isRenderModeTab)return;const t=this.tabbedMenu.actions.find(t=>t.panelId==e.id);t&&(this.tabbedMenu.actions.splice(this.tabbedMenu.actions.indexOf(t),1),this.updateTabToolbarItemsPressedState())}get showNavigation(){return(!this.isReadOnly||1!=this.visiblePanelCount)&&this.visiblePanelCount>0&&!!this.cssClasses.footer}showSeparator(e){return this.isRenderModeList&&e<this.renderedPanels.length-1}calcCssClasses(e){const t=super.calcCssClasses(e),s=this.tabbedMenu;return s&&(s.containerCss=this.getTabbedMenuCss(t),s.cssClasses=t.tabs,s.dotsItem.cssClasses=t.tabs,s.dotsItem.popupModel.contentComponentData.model.cssClasses=e.list),t}onMobileChanged(){super.onMobileChanged(),this.updateFooterActions()}}Ji.maxCheckCount=3,me([c({})],Ji.prototype,"_renderedPanels",void 0),me([d({onSet:(e,t)=>{t.fireCallback(t.renderModeChangedCallback),t.updatePanelView()}})],Ji.prototype,"displayMode",void 0),me([d({onSet:(e,t)=>{t.fireCallback(t.currentIndexChangedCallback)}})],Ji.prototype,"showProgressBar",void 0),me([d({onSet:(e,t)=>{}})],Ji.prototype,"progressBarLocation",void 0),me([d({defaultValue:!1})],Ji.prototype,"_showFooterToolbar",void 0),me([d({defaultValue:!1,onSet:(e,t)=>{t.updateFooterActions()}})],Ji.prototype,"legacyNavigation",void 0),I.addClass("paneldynamic",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"templateElements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"templateTitle:text",serializationProperty:"locTemplateTitle"},{name:"templateTabTitle",serializationProperty:"locTemplateTabTitle",visibleIf:e=>"tab"===e.displayMode},{name:"tabTitlePlaceholder",serializationProperty:"locTabTitlePlaceholder",visibleIf:e=>"tab"===e.displayMode},{name:"templateDescription:text",serializationProperty:"locTemplateDescription"},{name:"minWidth",defaultFunc:()=>"auto"},{name:"noEntriesText:text",serializationProperty:"locNoEntriesText"},{name:"allowAddPanel:boolean",default:!0},{name:"allowRemovePanel:boolean",default:!0},{name:"newPanelPosition",choices:["next","last"],default:"last",category:"layout"},{name:"panelCount:number",isBindable:!0,default:0,choices:[0,1,2,3,4,5,6,7,8,9,10]},{name:"minPanelCount:number",default:0,minValue:0},{name:"maxPanelCount:number",defaultFunc:()=>xt.panel.maxPanelCount},"defaultPanelValue:panelvalue",{name:"copyDefaultValueFromLastEntry:boolean",alternativeName:"defaultValueFromLastPanel"},{name:"panelsState",default:"default",choices:["default","collapsed","expanded","firstExpanded"],visibleIf:e=>"list"===e.displayMode},{name:"keyName"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",serializationProperty:"locConfirmDeleteText",visibleIf:e=>e.confirmDelete},{name:"addPanelText",alternativeName:"panelAddText",serializationProperty:"locAddPanelText",visibleIf:e=>e.allowAddPanel},{name:"removePanelText",alternativeName:"panelRemoveText",serializationProperty:"locRemovePanelText",visibleIf:e=>e.allowRemovePanel},{name:"prevPanelText",alternativeName:"panelPrevText",serializationProperty:"locPrevPanelText",visibleIf:e=>"list"!==e.displayMode},{name:"nextPanelText",alternativeName:"panelNextText",serializationProperty:"locNextPanelText",visibleIf:e=>"list"!==e.displayMode},{name:"showQuestionNumbers",default:"off",choices:["off","onPanel","onSurvey"]},{name:"renderMode",visible:!1,isSerializable:!1},{name:"displayMode",default:"list",choices:["list","carousel","tab"]},{name:"showProgressBar:boolean",alternativeName:"showRangeInProgress",default:!0,visibleIf:e=>"carousel"===e.displayMode},{name:"progressBarLocation",default:"top",choices:["top","bottom","topBottom"],visibleIf:e=>e.showProgressBar&&"carousel"===e.displayMode},{name:"tabAlign",default:"center",choices:["left","center","right"],visibleIf:e=>"tab"===e.displayMode},{name:"templateQuestionTitleLocation",alternativeName:"questionTitleLocation",default:"default",choices:["default","top","bottom","left"]},{name:"templateQuestionTitleWidth",visibleIf:function(e){return!!e&&e.template.availableQuestionTitleWidth()}},{name:"templateErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"templateVisibleIf:expression",category:"logic"},{name:"removePanelButtonLocation",alternativeName:"panelRemoveButtonLocation",default:"bottom",choices:["bottom","right"],visibleIf:e=>e.allowRemovePanel}],function(){return new Ji("")},"question"),xs.Instance.registerQuestion("paneldynamic",e=>new Ji(e));class Yi{static getProgressTextInBarCss(e){return(new fe).append(e.progressText).append(e.progressTextInBar).toString()}static getProgressTextUnderBarCss(e){return(new fe).append(e.progressText).append(e.progressTextUnderBar).toString()}}class $i extends he{static get operators(){return null!=$i.operatorsValue||($i.operatorsValue={empty:function(e,t){return!e},notempty:function(e,t){return!!e},equal:function(e,t){return e==t},notequal:function(e,t){return e!=t},contains:function(e,t){return e&&e.indexOf&&e.indexOf(t)>-1},notcontains:function(e,t){return!e||!e.indexOf||-1==e.indexOf(t)},greater:function(e,t){return e>t},less:function(e,t){return e<t},greaterorequal:function(e,t){return e>=t},lessorequal:function(e,t){return e<=t}}),$i.operatorsValue}constructor(){super(),this.idValue=$i.idCounter++}get id(){return this.idValue}getType(){return"triggerbase"}toString(){var e=this.getType().replace("trigger",""),t=this.expression;return t&&(e+=", "+t),e}get isInternal(){return!0===this.isGhost}get operator(){return this.getPropertyValue("operator","equal")}set operator(e){e&&(e=e.toLowerCase(),$i.operators[e]&&this.setPropertyValue("operator",e))}get value(){return this.getPropertyValue("value",null)}set value(e){this.setPropertyValue("value",e)}get name(){return this.getPropertyValue("name","")}set name(e){this.setPropertyValue("name",e)}get expression(){return this.getPropertyValue("expression",this.buildExpression())}set expression(e){this.setPropertyValue("expression",e)}canBeExecuted(e){return!0}canBeExecutedOnComplete(){return!1}checkExpression(e){if(this.isExecutingOnNextPage=e.isOnNextPage,this.isExecutingOnNavigation=e.isOnNavigation||e.isOnNextPage,!this.canBeExecuted(e.isOnNextPage))return;if(e.isOnComplete&&!this.canBeExecutedOnComplete())return;const t=Object.keys(e.keys);if(Array.isArray(t)&&!this.canBeExecuteOnKeysChange(t))return;const s=e.properties||null;this.runExpressionByProperty("expression",s,e=>{this.triggerResult(!0===e,s)},t=>this.isCheckRequired(t,e.keys))||this.isCheckRequired(null,e.keys)&&this.canSuccessOnEmptyExpression()&&this.triggerResult(!0,s)}canBeExecuteOnKeysChange(e){return!0}canSuccessOnEmptyExpression(){return!1}check(e){$i.operators[this.operator](e,this.value)?this.onSuccess(null):this.onFailure()}get requireValidQuestion(){return!1}triggerResult(e,t){e?(this.onSuccess(t),this.onSuccessExecuted()):this.onFailure()}onSuccess(e){}onFailure(){}onSuccessExecuted(){}buildExpression(){return this.name?this.isValueEmpty(this.value)&&this.isRequireValue?"":"{"+this.name+"} "+this.operator+" "+X.toOperandString(this.value):""}isCheckRequired(e,t){return!!t&&(!0===(null==e?void 0:e.hasFunction())||(new S).isAnyKeyChanged(t,this.getUsedVariables(e)))}getUsedVariables(e){if(!e)return[];const t=e.getVariables();if(Array.isArray(t)){const e=xt.expressionVariables.unwrapPostfix;for(let s=t.length-1;s>=0;s--){const n=t[s];n.endsWith(e)&&t.push(n.substring(0,n.length-e.length))}}return t}get isRequireValue(){return"empty"!==this.operator&&"notempty"!=this.operator}}$i.idCounter=1,$i.operatorsValue=null;class Xi extends $i{constructor(){super(),this.ownerValue=null}get owner(){return this.ownerValue}setOwner(e){this.ownerValue=e}getSurvey(e=!1){return this.owner&&this.owner.getSurvey?this.owner.getSurvey():null}isRealExecution(){return!0}onSuccessExecuted(){this.owner&&this.isRealExecution()&&this.owner.triggerExecuted(this)}}class er extends Xi{constructor(){super(),this.pages=[],this.questions=[]}getType(){return"visibletrigger"}onSuccess(e){this.onTrigger(this.onItemSuccess)}onFailure(){this.onTrigger(this.onItemFailure)}onTrigger(e){if(this.owner)for(var t=this.owner.getObjects(this.pages,this.questions),s=0;s<t.length;s++)e(t[s])}onItemSuccess(e){e.visible=!0}onItemFailure(e){e.visible=!1}}class tr extends Xi{constructor(){super()}getType(){return"completetrigger"}get requireValidQuestion(){return!0}isRealExecution(){return!xt.triggers.executeCompleteOnValueChanged===this.isExecutingOnNavigation}onSuccess(e){this.owner&&(this.isRealExecution()?this.owner.setCompleted(this):this.owner.canBeCompleted(this,!0))}onFailure(){this.owner.canBeCompleted(this,!1)}}class sr extends Xi{constructor(){super()}getType(){return"setvaluetrigger"}canBeExecuted(e){return!e&&!!this.setToName}canBeExecuteOnKeysChange(e){return(1!==e.length||e[0]!==this.setToName)&&super.canBeExecuteOnKeysChange(e)}onPropertyValueChanged(e,t,s){if(super.onPropertyValueChanged(e,t,s),"setToName"===e){var n=this.getSurvey();n&&!n.isLoadingFromJson&&n.isDesignMode&&(this.setValue=void 0)}}get setToName(){return this.getPropertyValue("setToName","")}set setToName(e){this.setPropertyValue("setToName",e)}get setValue(){return this.getPropertyValue("setValue")}set setValue(e){this.setPropertyValue("setValue",e)}get isVariable(){return this.getPropertyValue("isVariable")}set isVariable(e){this.setPropertyValue("isVariable",e)}onSuccess(e){this.setToName&&this.owner&&this.owner.setTriggerValue(this.setToName,a.getUnbindValue(this.setValue),this.isVariable)}}class nr extends Xi{constructor(){super()}getType(){return"skiptrigger"}get requireValidQuestion(){return this.canBeExecuted(!1)}get gotoName(){return this.getPropertyValue("gotoName","")}set gotoName(e){this.setPropertyValue("gotoName",e)}canBeExecuted(e){return e===!xt.triggers.executeSkipOnValueChanged}onSuccess(e){this.gotoName&&this.owner&&this.owner.focusQuestion(this.gotoName)}}class ir extends Xi{constructor(){super()}getType(){return"runexpressiontrigger"}get setToName(){return this.getPropertyValue("setToName","")}set setToName(e){this.setPropertyValue("setToName",e)}get runExpression(){return this.getPropertyValue("runExpression","")}set runExpression(e){this.setPropertyValue("runExpression",e)}canBeExecuted(e){return!e}onSuccess(e){this.owner&&this.runExpressionByProperty("runExpression",e,e=>{this.onCompleteRunExpression(e)})}onCompleteRunExpression(e){this.setToName&&void 0!==e&&this.owner.setTriggerValue(this.setToName,a.convertValToQuestionVal(e),!1)}}class rr extends Xi{constructor(){super()}canBeExecuted(e){return!e&&!!this.setToName&&!!this.fromName}get setToName(){return this.getPropertyValue("setToName","")}set setToName(e){this.setPropertyValue("setToName",e)}get fromName(){return this.getPropertyValue("fromName","")}set fromName(e){this.setPropertyValue("fromName",e)}get copyDisplayValue(){return this.getPropertyValue("copyDisplayValue")}set copyDisplayValue(e){this.setPropertyValue("copyDisplayValue",e)}getType(){return"copyvaluetrigger"}canBeExecuteOnKeysChange(e){return(1!==e.length||e[0]!==this.setToName)&&super.canBeExecuteOnKeysChange(e)}onSuccess(e){this.setToName&&this.owner&&this.owner.copyTriggerValue(this.setToName,this.fromName,this.copyDisplayValue)}canSuccessOnEmptyExpression(){return!0}getUsedVariables(e){const t=super.getUsedVariables(e);return 0===t.length&&this.fromName&&t.push(this.fromName),t}}I.addClass("trigger",[{name:"operator",default:"equal",visible:!1},{name:"value",visible:!1},"expression:condition"]),I.addClass("surveytrigger",[{name:"name",visible:!1}],null,"trigger"),I.addClass("visibletrigger",["pages:pages","questions:questions"],function(){return new er},"surveytrigger"),I.addClass("completetrigger",[],function(){return new tr},"surveytrigger"),I.addClass("setvaluetrigger",[{name:"!setToName:questionvalue"},{name:"setValue:triggervalue",dependsOn:"setToName",visibleIf:function(e){return!!e&&!!e.setToName}},{name:"isVariable:boolean",visible:!1}],function(){return new sr},"surveytrigger"),I.addClass("copyvaluetrigger",[{name:"!fromName:questionvalue"},{name:"!setToName:questionvalue"},{name:"copyDisplayValue:boolean",visible:!1}],function(){return new rr},"surveytrigger"),I.addClass("skiptrigger",[{name:"!gotoName:question"}],function(){return new nr},"surveytrigger"),I.addClass("runexpressiontrigger",[{name:"setToName:questionvalue"},"runExpression:expression"],function(){return new ir},"surveytrigger");class ar extends he{constructor(e,t=null){super(),this.closeOnCompleteTimeout=0,this.surveyValue=t||this.createSurvey(e),this.surveyValue.fitToContainer=!0,this.windowElement=i.createElement("div"),this.survey.onComplete.add((e,t)=>{this.onSurveyComplete()}),this.registerPropertyChangedHandlers(["isShowing"],()=>{this.showingChangedCallback&&this.showingChangedCallback()}),this.registerPropertyChangedHandlers(["isExpanded"],()=>{this.onExpandedChanged()}),this.width=new de(()=>this.survey.width),this.width=this.survey.width,this.updateCss(),this.onCreating()}onCreating(){}getType(){return"popupsurvey"}get survey(){return this.surveyValue}get isShowing(){return this.getPropertyValue("isShowing",!1)}set isShowing(e){this.setPropertyValue("isShowing",e)}get isFullScreen(){return this.getPropertyValue("isFullScreen",!1)}set isFullScreen(e){!this.isExpanded&&e&&(this.isExpanded=!0),this.setPropertyValue("isFullScreen",e),this.setCssRoot()}show(){this.isShowing=!0}hide(){this.isShowing=!1}toggleFullScreen(){this.isFullScreen=!this.isFullScreen}get isExpanded(){return this.getPropertyValue("isExpanded",!1)}set isExpanded(e){this.isFullScreen&&!e&&(this.isFullScreen=!1),this.setPropertyValue("isExpanded",e)}get isCollapsed(){return!this.isExpanded}onExpandedChanged(){this.expandedChangedCallback&&this.expandedChangedCallback(),this.updateCssButton()}get title(){return this.survey.title}set title(e){this.survey.title=e}get locTitle(){return this.survey.locTitle.isEmpty?null:this.survey.locTitle}get locDescription(){return this.survey.locTitle.isEmpty?null:this.survey.locDescription}expand(){this.isExpanded=!0}collapse(){this.isExpanded=!1}changeExpandCollapse(){this.isExpanded=!this.isExpanded}get allowClose(){return this.getPropertyValue("allowClose",!1)}set allowClose(e){this.setPropertyValue("allowClose",e)}get allowFullScreen(){return this.getPropertyValue("allowFullScreen",!1)}set allowFullScreen(e){this.setPropertyValue("allowFullScreen",e)}get css(){return this.survey.css}get cssButton(){return this.getPropertyValue("cssButton","")}get cssRoot(){let e=this.getPropertyValue("cssRoot","");return this.isCollapsed&&(e+=" "+this.getPropertyValue("cssRootCollapsedMod","")),e}get cssRootCollapsedMod(){return this.getPropertyValue("cssRootCollapsedMod")}get cssRootContent(){return this.getPropertyValue("cssRootContent")}get cssBody(){return this.getPropertyValue("cssBody","")}get cssHeaderRoot(){return this.getPropertyValue("cssHeaderRoot","")}get cssHeaderTitleCollapsed(){return this.getPropertyValue("cssHeaderTitleCollapsed","")}get cssHeaderButtonsContainer(){return this.getPropertyValue("cssHeaderButtonsContainer","")}get cssHeaderCollapseButton(){return this.getPropertyValue("cssHeaderCollapseButton","")}get cssHeaderCloseButton(){return this.getPropertyValue("cssHeaderCloseButton","")}get cssHeaderFullScreenButton(){return this.getPropertyValue("cssHeaderFullScreenButton","")}get renderedWidth(){let e=this.getPropertyValue("width","60%");return e&&!isNaN(e)&&(e+="px"),e}updateCss(){if(!this.css||!this.css.window)return;const e=this.css.window;this.setCssRoot(),this.setPropertyValue("cssRootCollapsedMod",e.rootCollapsedMod),this.setPropertyValue("cssRootContent",e.rootContent),this.setPropertyValue("cssBody",e.body);const t=e.header;t&&(this.setPropertyValue("cssHeaderRoot",t.root),this.setPropertyValue("cssHeaderTitleCollapsed",t.titleCollapsed),this.setPropertyValue("cssHeaderButtonsContainer",t.buttonsContainer),this.setPropertyValue("cssHeaderCollapseButton",t.collapseButton),this.setPropertyValue("cssHeaderCloseButton",t.closeButton),this.setPropertyValue("cssHeaderFullScreenButton",t.fullScreenButton),this.updateCssButton())}setCssRoot(){const e=this.css.window;this.isFullScreen?this.setPropertyValue("cssRoot",e.root+" "+e.rootFullScreenMode):this.setPropertyValue("cssRoot",e.root)}updateCssButton(){const e=this.css.window?this.css.window.header:null;e&&this.setCssButton(this.isExpanded?e.buttonExpanded:e.buttonCollapsed)}setCssButton(e){e&&this.setPropertyValue("cssButton",e)}createSurvey(e){return new In(e)}onSurveyComplete(){if(!(this.closeOnCompleteTimeout<0))if(0==this.closeOnCompleteTimeout)this.hide();else{var e=this,t=null;t=setInterval(function(){e.hide(),clearInterval(t)},1e3*this.closeOnCompleteTimeout)}}onScroll(){this.survey.onScroll()}}me([d()],ar.prototype,"width",void 0);class or{constructor(){this._lockScroll=!1}setRootElement(e){this._containerElementValue=null==e?void 0:e.querySelector(".sv-scroll__scroller"),this._scrollbarElement=null==e?void 0:e.querySelector(".sv-scroll__scrollbar"),this._scrollbarSizerElement=null==e?void 0:e.querySelector(".sv-scroll__scrollbar-sizer"),this._containerBodyElement=null==e?void 0:e.querySelector(".sv-scroll__container"),e&&n.isAvailable()&&(this._containerBodyResizeObserver=new ResizeObserver(e=>{for(let t of e){const e=t.contentBoxSize?t.contentBoxSize[0].blockSize:t.contentRect.width;this._scrollbarSizerElement.style.height=e+"px"}this.onInnerHeightChanged&&this.onInnerHeightChanged(this._containerBodyElement.clientHeight>this._containerElementValue.clientHeight)}),this._containerBodyResizeObserver.observe(this._containerBodyElement))}onScrollContainer(){this._lockScroll=!0,this._scrollbarElement.scrollTop=this._containerElementValue.scrollTop}onScrollScrollbar(){this._lockScroll?this._lockScroll=!1:this._containerElementValue.scrollTop=this._scrollbarElement.scrollTop}unsubscribeRootElement(){this._containerBodyResizeObserver&&(this._containerBodyResizeObserver.disconnect(),this._containerBodyResizeObserver=void 0)}}const lr='input:not(:disabled):not([readonly]):not([type=hidden]),select:not(:disabled):not([readonly]),textarea:not(:disabled):not([readonly]), button:not(:disabled):not([readonly]), [tabindex]:not([tabindex^="-"])';class ur extends he{updateIsVisible(e){this._isVisible=e,this.onVisibilityChanged.fire(this,{isVisible:e})}updateBeforeShowing(){this.model.onShow()}updateAfterHiding(){this.model.onHiding()}getLeaveOptions(){return{cssClass:"sv-popup--leave",onBeforeRunAnimation:e=>{e.setAttribute("inert","")},onAfterRunAnimation:e=>e.removeAttribute("inert")}}getEnterOptions(){return{cssClass:"sv-popup--enter"}}getAnimatedElement(){return this.getAnimationContainer()}isAnimationEnabled(){return"overlay"!==this.model.displayMode&&xt.animationEnabled}getRerenderEvent(){return this.onElementRerendered}getAnimationContainer(){var e;return null===(e=this.container)||void 0===e?void 0:e.querySelector(this.fixedPopupContainer)}get isVisible(){return this._isVisible}set isVisible(e){this.visibilityAnimation.sync(e)}get container(){return this.containerElement||this.createdContainer}getLocale(){return this.locale?this.locale:super.getLocale()}hidePopup(){this.model.isVisible=!1}getStyleClass(){return(new fe).append(this.model.cssClass)}getShowFooter(){return this.isOverlay}getShowHeader(){return!1}getPopupHeaderTemplate(){}createFooterActionBar(){this.footerToolbarValue=new Ce}resetDimensionsAndPositionStyleProperties(){this.top="",this.left="",this.height="",this.width="",this.minWidth=""}onModelChanging(e){}setupModel(e){this.model&&this.model.onVisibilityChanged.remove(this.onModelIsVisibleChangedCallback),this.onModelChanging(e),this._model=e,e.onVisibilityChanged.add(this.onModelIsVisibleChangedCallback),this.onModelIsVisibleChangedCallback()}get model(){return this._model}set model(e){this.setupModel(e)}constructor(e){super(),this.popupSelector=".sv-popup",this.fixedPopupContainer=".sv-popup",this.containerSelector=".sv-popup__container",this.scrollingContentSelector=".sv-popup__scrolling-content",this.visibilityAnimation=new ze(this,e=>{this._isVisible!==e&&(e?(this.updateBeforeShowing(),this.updateIsVisible(e)):(this.updateOnHiding(),this.updateIsVisible(e),this.updateAfterHiding(),this._isPositionSetValue=!1))},()=>this._isVisible),this.onVisibilityChanged=new ge,this.onModelIsVisibleChangedCallback=()=>{this.isVisible=this.model.isVisible},this._isPositionSetValue=!1,this.model=e,this.locale=this.model.locale}get title(){return this.model.title}get contentComponentName(){return this.model.contentComponentName}get contentComponentData(){return this.model.contentComponentData}get isModal(){return this.model.isModal}get isFocusedContent(){return this.model.isFocusedContent}get isFocusedContainer(){return this.model.isFocusedContainer}get showFooter(){return this.getShowFooter()}get showHeader(){return this.getShowHeader()}get popupHeaderTemplate(){return this.getPopupHeaderTemplate()}get isOverlay(){return"overlay"===this.model.displayMode}get styleClass(){return this.getStyleClass().toString()}get cancelButtonText(){return this.getLocalizationString("modalCancelButtonText")}get footerToolbar(){return this.footerToolbarValue||this.createFooterActionBar(),this.footerToolbarValue}onKeyDown(e){"Tab"===e.key||9===e.keyCode?this.trapFocus(e):"Escape"!==e.key&&27!==e.keyCode||this.hidePopup()}trapFocus(e){const t=this.container.querySelectorAll(lr),s=t[0],n=t[t.length-1];e.shiftKey?xt.environment.root.activeElement===s&&(n.focus(),e.preventDefault()):xt.environment.root.activeElement===n&&(s.focus(),e.preventDefault())}switchFocus(){this.isFocusedContent?this.focusFirstInput():this.isFocusedContainer&&this.focusContainer()}get isPositionSet(){return this._isPositionSetValue}updateOnShowing(){this.prevActiveElement=xt.environment.root.activeElement,this.isOverlay&&this.resetDimensionsAndPositionStyleProperties(),this.switchFocus(),this._isPositionSetValue=!0}updateOnHiding(){this.isFocusedContent&&this.prevActiveElement&&this.prevActiveElement.focus({preventScroll:!0})}focusContainer(){if(!this.container)return;const e=this.container.querySelector(this.popupSelector);null==e||e.focus()}focusFirstInput(){setTimeout(()=>{if(this.container){var e=this.container.querySelector(this.model.focusFirstInputSelector||lr);e?e.focus():this.focusContainer()}},100)}clickOutside(e){this.hidePopup(),null==e||e.stopPropagation()}blur(e){this.model.onBlur()}cancel(){this.model.onCancel(),this.hidePopup()}dispose(){super.dispose(),this.model&&this.model.onVisibilityChanged.remove(this.onModelIsVisibleChangedCallback),this.createdContainer&&(this.createdContainer.remove(),this.createdContainer=void 0),this.footerToolbarValue&&this.footerToolbarValue.dispose(),this.resetComponentElement()}initializePopupContainer(){if(!this.container){const e=i.createElement("div");this.createdContainer=e,(e=>{const{root:t}=xt.environment;return"string"==typeof e?t.getElementById(e):e})(xt.environment.popupMountContainer).appendChild(e)}}setComponentElement(e){e&&(this.containerElement=e)}resetComponentElement(){this.containerElement=void 0,this.prevActiveElement=void 0}preventScrollOuside(e,t){let s=e.target;for(;s!==this.container;){if("auto"===i.getComputedStyle(s).overflowY&&s.scrollHeight!==s.offsetHeight){const{scrollHeight:e,scrollTop:n,clientHeight:i}=s;if(!(t>0&&Math.abs(e-i-n)<1||t<0&&n<=0))return}s=s.parentElement}e.cancelable&&e.preventDefault()}}me([d({defaultValue:"0px"})],ur.prototype,"top",void 0),me([d({defaultValue:"0px"})],ur.prototype,"left",void 0),me([d({defaultValue:"auto"})],ur.prototype,"height",void 0),me([d({defaultValue:"auto"})],ur.prototype,"width",void 0),me([d({defaultValue:"auto"})],ur.prototype,"minWidth",void 0),me([d({defaultValue:!1})],ur.prototype,"_isVisible",void 0),me([d()],ur.prototype,"locale",void 0);class dr{constructor(e,t,s,n){this.x=e,this.y=t,this.width=s,this.height=n}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}}class hr{static calculatePosition(e,t,s,n,i,r="flex"){let a=e.left,o=e.top;return"flex"===r&&(a="center"==i?(e.left+e.right-s)/2:"left"==i?e.left-s:e.right),o="middle"==n?(e.top+e.bottom-t)/2:"top"==n?e.top-t:e.bottom,"center"!=i&&"middle"!=n&&("top"==n?o+=e.height:o-=e.height),{left:Math.round(a),top:Math.round(o)}}static getCorrectedVerticalDimensions(e,t,s,n,i=!0,r={top:0,bottom:0}){let a;const o=s-hr.bottomIndent;if("top"===n&&(a={height:t,top:e}),e<-r.top)a={height:i?t+e:t,top:-r.top};else if(t+e>s){let s=Math.min(t,o-e);a={height:i?s:t,top:i?e:e-(t-s)}}return a&&(a.height=Math.min(a.height,o),a.top=Math.max(a.top,-r.top)),a}static updateHorizontalDimensions(e,t,s,n,i="flex",r={left:0,right:0}){t+=r.left+r.right;let a,o=e;return"center"===n&&("fixed"===i?(e+t>s&&(a=s-e),o-=r.left):e<0?(o=r.left,a=Math.min(t,s)):t+e>s&&(o=s-t,o=Math.max(o,r.left),a=Math.min(t,s))),"left"===n&&e<0&&(o=r.left,a=Math.min(t,s)),"right"===n&&t+e>s&&(a=s-e),{width:a-r.left-r.right,left:o}}static updateVerticalPosition(e,t,s,n,i){if("middle"===n)return n;let r=t-(e.top+("center"!==s?e.height:0)),a=t+e.bottom-("center"!==s?e.height:0)-i;return r>0&&a<=0&&"top"==n?n="bottom":a>0&&r<=0&&"bottom"==n?n="top":a>0&&r>0&&(n=r<a?"top":"bottom"),n}static updateHorizontalPosition(e,t,s,n){if("center"===s)return s;let i=t-e.left,r=t+e.right-n;return i>0&&r<=0&&"left"==s?s="right":r>0&&i<=0&&"right"==s?s="left":r>0&&i>0&&(s=i<r?"left":"right"),s}static calculatePopupDirection(e,t){var s;return"center"==t&&"middle"!=e?s=e:"center"!=t&&(s=t),s}static calculatePointerTarget(e,t,s,n,i,r=0,a=0){var o={};return"center"!=i?(o.top=e.top+e.height/2,o.left=e[i]):"middle"!=n&&(o.top=e[n],o.left=e.left+e.width/2),o.left=Math.round(o.left-s),o.top=Math.round(o.top-t),"left"==i&&(o.left-=r+a),"center"===i&&(o.left-=r),o}}hr.bottomIndent=16;class cr extends ur{createFooterActionBar(){super.createFooterActionBar(),this.footerToolbar.setCssClasses({root:ye.root,defaultSizeMode:ye.defaultSizeMode,smallSizeMode:ye.smallSizeMode,item:"sd-action sv-menu-popup__button"},!1),this.footerToolbar.containerCss="sv-menu-footer-action-bar";let e=[{id:"cancel",visibleIndex:10,title:this.cancelButtonText,innerCss:"sv-popup__button--cancel",action:()=>{this.cancel()}}];e=this.model.updateFooterActions(e),this.footerToolbarValue.setItems(e)}getAvailableAreaRect(){const e=this.model.getAreaCallback?this.model.getAreaCallback(this.container):void 0;if(e){const t=e.getBoundingClientRect();return new dr(t.x,t.y,t.width,t.height)}return new dr(0,0,n.getInnerWidth(),n.getInnerHeight())}getTargetElementRect(e){const t=this.container;let s=this.model.getTargetCallback?this.model.getTargetCallback(t):void 0;if(t&&t.parentElement&&!this.isModal&&!s&&(s=t.parentElement),!s)return null;const n=s.getBoundingClientRect();return new dr(n.left-e.left,n.top-e.top,n.width,n.height)}_updatePosition(){var e,t,s;const r=this.getAvailableAreaRect(),a=this.getTargetElementRect(r);if(!a)return;const o=null===(e=this.container)||void 0===e?void 0:e.querySelector(this.containerSelector);if(!o)return;const l=null===(t=this.container)||void 0===t?void 0:t.querySelector(this.fixedPopupContainer),u=o.querySelector(this.scrollingContentSelector),d=i.getComputedStyle(o),h=parseFloat(d.marginLeft)||0,c=parseFloat(d.marginRight)||0,p=parseFloat(d.marginTop)||0,g=parseFloat(d.marginBottom)||0;let m=o.offsetHeight-u.offsetHeight+u.scrollHeight;const v=o.getBoundingClientRect().width;this.model.setWidthByTarget&&(this.minWidth=a.width+"px");let f=this.model.verticalPosition,b=this.getActualHorizontalPosition();if(n.isAvailable()){const e=[m,.9*n.getInnerHeight(),null===(s=n.getVisualViewport())||void 0===s?void 0:s.height];m=Math.ceil(Math.min(...e.filter(e=>"number"==typeof e))),f=hr.updateVerticalPosition(a,m,this.model.horizontalPosition,this.model.verticalPosition,r.height),b=hr.updateHorizontalPosition(a,v,b,r.width)}this.popupDirection=hr.calculatePopupDirection(f,b);const y=hr.calculatePosition(a,m,v+h+c,f,b,this.model.positionMode);if(n.isAvailable()){const e=hr.getCorrectedVerticalDimensions(y.top,m,r.height,f,this.model.canShrink,{top:p,bottom:g});if(e&&(this.height=e.height+"px",y.top=e.top),this.model.setWidthByTarget)this.width=a.width+"px",y.left=a.left;else{const e=hr.updateHorizontalDimensions(y.left,v,n.getInnerWidth(),b,this.model.positionMode,{left:h,right:c});e&&(this.width=e.width?e.width+"px":void 0,y.left=e.left)}}if(l){const e=l.getBoundingClientRect();y.top-=e.top,y.left-=e.left}this.showHeader&&(this.pointerTarget=hr.calculatePointerTarget(a,y.top,y.left,f,b,h,c),this.pointerTarget.top+="px",this.pointerTarget.left+="px"),y.left+=r.left,y.top+=r.top,this.left=y.left+"px",this.top=y.top+"px"}getActualHorizontalPosition(){let e=this.model.horizontalPosition;return i.isAvailable()&&"rtl"==i.getComputedStyle(i.getBody()).direction&&("left"===this.model.horizontalPosition?e="right":"right"===this.model.horizontalPosition&&(e="left")),e}getStyleClass(){const e=this.model.getDisplayMode();return super.getStyleClass().append("sv-popup--menu-phone","menu-overlay"===e).append("sv-popup--menu-tablet","menu-popup-overlay"===e).append("sv-popup--menu-popup","menu-popup"===e).append("sv-popup--show-pointer","menu-popup"===e&&this.showHeader).append(`sv-popup--${this.popupDirection}`,"menu-popup"===e&&(this.showHeader||"top"==this.popupDirection||"bottom"==this.popupDirection))}getShowHeader(){return this.model.showPointer&&!this.isOverlay}getPopupHeaderTemplate(){return"popup-pointer"}constructor(e){super(e),this.scrollEventCallBack=e=>{if(this.isOverlay&&Pe)return e.stopPropagation(),void e.preventDefault();this.hidePopup()},this.resizeEventCallback=()=>{if(!n.isAvailable())return;const e=n.getVisualViewport(),t=i.getDocumentElement();t&&e&&t.style.setProperty("--sv-popup-overlay-height",e.height*e.scale+"px")},this.resizeWindowCallback=()=>{this.isOverlay||this.updatePosition(!0,"vue"===In.platform||"vue3"===In.platform||"react"==In.platform||"js-ui"==In.platform)},this.clientY=0,this.touchStartEventCallback=e=>{this.clientY=e.touches[0].clientY},this.touchMoveEventCallback=e=>{this.preventScrollOuside(e,this.clientY-e.changedTouches[0].clientY)},this.model.onRecalculatePosition.add(this.recalculatePositionHandler)}setComponentElement(e){super.setComponentElement(e)}resetComponentElement(){super.resetComponentElement()}updateOnShowing(){const{root:e}=xt.environment;this.prevActiveElement=e.activeElement,this.isOverlay?this.resetDimensionsAndPositionStyleProperties():this.updatePosition(!0,!1),this.switchFocus(),n.addEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(n.getVisualViewport().addEventListener("resize",this.resizeEventCallback),this.container&&(this.container.addEventListener("touchstart",this.touchStartEventCallback),this.container.addEventListener("touchmove",this.touchMoveEventCallback)),this.resizeEventCallback()),n.addEventListener("scroll",this.scrollEventCallBack),this._isPositionSetValue=!0}get shouldCreateResizeCallback(){return!!n.getVisualViewport()&&this.isOverlay}updatePosition(e,t=!0){e&&(this.height="auto"),t?setTimeout(()=>{this._updatePosition()},1):this._updatePosition()}updateOnHiding(){super.updateOnHiding(),n.removeEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(n.getVisualViewport().removeEventListener("resize",this.resizeEventCallback),this.container&&(this.container.removeEventListener("touchstart",this.touchStartEventCallback),this.container.removeEventListener("touchmove",this.touchMoveEventCallback))),n.removeEventListener("scroll",this.scrollEventCallBack),this.isDisposed||(this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.minWidth=void 0)}onModelChanging(e){this.model&&this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler||(this.recalculatePositionHandler=(e,t)=>{this.isOverlay||this.updatePosition(t.isResetHeight)}),super.onModelChanging(e),e.onRecalculatePosition.add(this.recalculatePositionHandler)}dispose(){super.dispose(),this.updateOnHiding(),this.model&&(this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler=void 0),this.resetComponentElement()}}cr.tabletSizeBreakpoint=600,me([d({defaultValue:"left"})],cr.prototype,"popupDirection",void 0),me([d({defaultValue:{left:"0px",top:"0px"}})],cr.prototype,"pointerTarget",void 0);class pr extends ur{getStyleClass(){const e=this.model.getDisplayMode();return super.getStyleClass().append("sv-popup--modal-popup","modal-popup"===e).append("sv-popup--modal-overlay","modal-overlay"===e)}getShowFooter(){return!0}createFooterActionBar(){super.createFooterActionBar(),this.footerToolbar.setCssClasses({root:ye.root,defaultSizeMode:ye.defaultSizeMode,smallSizeMode:ye.smallSizeMode,item:"sv-popup__body-footer-item sv-popup__button sv-modal-popup__button sd-btn sd-btn--small"},!1),this.footerToolbar.containerCss="sv-modal-footer-action-bar";let e=[{id:"cancel",visibleIndex:10,title:this.cancelButtonText,innerCss:"sv-popup__button--cancel",action:()=>{this.cancel()}},{id:"apply",visibleIndex:20,title:this.applyButtonText,innerCss:"sv-popup__button--apply sd-btn--action",action:()=>{this.apply()}}];e=this.model.updateFooterActions(e),this.footerToolbarValue.setItems(e)}constructor(e){super(e),this.onScrollOutsideCallback=e=>{this.preventScrollOuside(e,e.deltaY)}}get applyButtonText(){return this.getLocalizationString("modalApplyButtonText")}apply(){this.model.onApply&&!this.model.onApply()||this.hidePopup()}clickOutside(){}onKeyDown(e){"Escape"!==e.key&&27!==e.keyCode||this.model.onCancel(),super.onKeyDown(e)}updateOnShowing(){this.container&&this.container.addEventListener("wheel",this.onScrollOutsideCallback,{passive:!1}),super.updateOnShowing()}updateOnHiding(){this.container&&this.container.removeEventListener("wheel",this.onScrollOutsideCallback),super.updateOnHiding()}}class gr extends Pn{getBaseType(){return"buttongroupitemvalue"}}me([d()],gr.prototype,"iconName",void 0),me([d()],gr.prototype,"iconSize",void 0),me([d()],gr.prototype,"showCaption",void 0);class mr extends En{constructor(e){super(e),this._allowClear=!0,this.createLocalizableString("buttongroupOptionsCaption",this,!1,!0),this.createLocalizableString("readOnlyText",this,!0),this.registerPropertyChangedHandlers(["value","renderAs","placeholder","choices","visibleChoices"],()=>{this.updateReadOnlyText()}),this.updateReadOnlyText()}locStrsChanged(){var e;super.locStrsChanged(),this.updateReadOnlyText(),null===(e=this.dropdownListModelValue)||void 0===e||e.locStrsChanged()}updateReadOnlyText(){this.readOnlyText=this.displayValue||this.placeholder}getType(){return"buttongroup"}getItemValueType(){return"buttongroupitemvalue"}supportOther(){return!1}getControlClass(){return this.isEmpty(),(new fe).append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()}getFirstInputElementId(){return this.inputId+"_0"}getInputId(e){return this.inputId+"_"+e}get placeholder(){return this.getLocalizableStringText("buttongroupOptionsCaption")}set placeholder(e){this.setLocalizableStringText("buttongroupOptionsCaption",e)}get locPlaceholder(){return this.getLocalizableString("buttongroupOptionsCaption")}get allowClear(){return this._allowClear}set allowClear(e){this._allowClear=e}get searchEnabled(){return!1}isItemSelected(e){return e.value==this.value}get readOnlyText(){return this.getLocalizableStringText("readOnlyText")}set readOnlyText(e){this.setLocalizableStringText("readOnlyText",e)}get locReadOnlyText(){return this.getLocalizableString("readOnlyText")}get showSelectedItemLocText(){return!this.readOnly&&!this.inputHasValue&&!!this.selectedItemLocText}get selectedItemLocText(){var e;return null===(e=this.selectedItem)||void 0===e?void 0:e.locText}set dropdownListModel(e){this.dropdownListModelValue=e,this.updateElementCss()}get dropdownListModel(){return"dropdown"===this.renderAs&&this.onBeforeSetCompactRenderer(),this.dropdownListModelValue}get selectedItem(){return this.getSingleSelectedItem()}onBlurCore(e){var t;null===(t=this.dropdownListModel)||void 0===t||t.onBlur(e),super.onBlurCore(e)}updateCssClasses(e,t){super.updateCssClasses(e,t),mt(e,t)}calcCssClasses(e){const t=super.calcCssClasses(e);return this.dropdownListModelValue&&this.dropdownListModelValue.updateCssClasses(t.popup,t.list),t}needResponsiveWidth(){return!0}supportResponsiveness(){return!0}getCompactRenderAs(){return"dropdown"}getObservedElementSelector(){return".sd-button-group-scrollable-container"}onBeforeSetCompactRenderer(){this.isDisposed||this.dropdownListModelValue||(this.dropdownListModelValue=new kn(this))}dispose(){super.dispose(),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)}}me([d({defaultValue:!1})],mr.prototype,"inputHasValue",void 0),I.addClass("buttongroup",[{name:"choices:buttongroupitemvalue[]"}],function(){return new mr("")},"checkboxbase"),I.addClass("buttongroupitemvalue",[{name:"showCaption:boolean",default:!0},{name:"iconName:text"},{name:"iconSize:number"}],e=>new gr(e),"choiceitem");class vr{constructor(e,t,s){this.question=e,this.item=t,this.index=s}get value(){return this.item.value}get iconName(){return this.item.iconName}get iconSize(){return this.item.iconSize||24}get caption(){return this.item.locText}get showCaption(){return this.item.showCaption||void 0===this.item.showCaption}get isRequired(){return this.question.isRequired}get selected(){return this.question.isItemSelected(this.item)}get readOnly(){return this.question.isInputReadOnly||!this.item.isEnabled}get name(){return this.question.name+"_"+this.question.id}get id(){return this.question.inputId+"_"+this.index}get hasErrors(){return this.question.errors.length>0}get describedBy(){return this.question.errors.length>0?this.question.id+"_errors":null}get labelClass(){return(new fe).append(this.question.cssClasses.item).append(this.question.cssClasses.itemSelected,this.selected).append(this.question.cssClasses.itemHover,!this.readOnly&&!this.selected).append(this.question.cssClasses.itemDisabled,this.question.isReadOnly||!this.item.isEnabled).toString()}get css(){return{label:this.labelClass,icon:this.question.cssClasses.itemIcon,control:this.question.cssClasses.itemControl,caption:this.question.cssClasses.itemCaption,decorator:this.question.cssClasses.itemDecorator}}onChange(){this.question.selectItem(this.item)}}class fr extends he{getSurvey(e=!1){var t;return null===(t=this.owner)||void 0===t?void 0:t.getSurvey()}getType(){return"masksettings"}setData(e){I.getProperties(this.getType()).forEach(t=>{const s=e[t.name];this[t.name]=void 0!==s?s:t.getDefaultValue(this)})}getData(){const e={};return I.getProperties(this.getType()).forEach(t=>{const s=this[t.name];t.isDefaultValue(s)||(e[t.name]=s)}),e}processInput(e){return{value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1}}getUnmaskedValue(e){return e}getMaskedValue(e){return e}getTextAlignment(){return"auto"}getTypeForExpressions(){return"text"}}function br(e){const t=[];let s=!1;const n=Object.keys(xt.maskSettings.patternDefinitions);for(let i=0;i<e.length;i++){const r=e[i];r===xt.maskSettings.patternEscapeChar?s=!0:s?(s=!1,t.push({type:"fixed",value:r})):t.push({type:-1!==n.indexOf(r)?"regex":"const",value:r})}return t}function yr(e,t,s){const n=xt.maskSettings.patternDefinitions[s.value];for(;t<e.length;){if(e[t].match(n))return t;t++}return t}function Cr(e,t,s,n=!1){let i="";if(!e)return i;let r="string"==typeof t?br(t):t;for(let t=0;t<r.length;t++)if("fixed"!==r[t].type||n||(i+=r[t].value),"regex"===r[t].type){const n=xt.maskSettings.patternDefinitions[r[t].value];if(!e[t]||!e[t].match(n)){if(s){i="";break}break}i+=e[t]}return i}me([d()],fr.prototype,"saveMaskedValue",void 0),I.addClass("masksettings",[{name:"saveMaskedValue:boolean",visibleIf:function(e){return!!e&&"masksettings"!==e.getType()}}],function(){return new fr});class wr extends fr{constructor(){super(...arguments),this.literals=[]}updateLiterals(){this.literals=br(this.pattern||"")}onPropertyValueChanged(e,t,s){super.onPropertyValueChanged(e,t,s),"pattern"===e&&this.updateLiterals()}getType(){return"patternmask"}fromJSON(e,t){super.fromJSON(e,t),this.updateLiterals()}_getMaskedValue(e,t=!1){return function(e,t,s){const n=null==e?"":e;let i="",r=0;const a="string"==typeof t?br(t):t;for(let e=0;e<a.length;e++)switch(a[e].type){case"regex":if(r<n.length&&(r=yr(n,r,a[e])),r<n.length)i+=n[r];else{if(!s)return i;i+=xt.maskSettings.patternPlaceholderChar}r++;break;case"const":case"fixed":i+=a[e].value,a[e].value===n[r]&&r++}return i}(null==e?"":e,this.literals,t)}_getUnmaskedValue(e,t=!1){return Cr(null==e?"":e,this.literals,t)}processInput(e){const t={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1};if(!e.insertedChars&&e.selectionStart===e.selectionEnd)return t;const s=e.prevValue.slice(0,e.selectionStart)+(e.insertedChars||""),n=Cr(e.prevValue.slice(0,e.selectionStart),this.literals.slice(0,e.selectionStart),!1),i=Cr(e.prevValue.slice(e.selectionEnd),this.literals.slice(e.selectionEnd),!1,!0);return t.value=this._getMaskedValue(n+(e.insertedChars||"")+i,!0),e.insertedChars||"backward"!==e.inputDirection?t.caretPosition=this._getMaskedValue(s).length:t.caretPosition=e.selectionStart,t}getMaskedValue(e){return this._getMaskedValue(e,!0)}getUnmaskedValue(e){return this._getUnmaskedValue(e,!0)}}me([d()],wr.prototype,"pattern",void 0),I.addClass("patternmask",[{name:"pattern"}],function(){return new wr},"masksettings");class xr extends fr{calccaretPosition(e,t,s){const n=e?this.displayNumber(this.parseNumber(e),!1).length:0;let i=0,r=t.selectionStart;const a=!t.insertedChars&&"forward"===t.inputDirection;for(let e=0;e<s.length;e++)if(s[e]!==this.thousandsSeparator&&i++,i===n+(a?1:0)){r=a?e:e+1;break}return r}numericalCompositionIsEmpty(e){return!e.integralPart&&!e.fractionalPart}displayNumber(e,t=!0,s=!1){let n=e.integralPart;t&&n&&(n=function(e,t=!0,s=3){let n=[];if(t){for(let t=e.length-s;t>-s;t-=s)n.push(e.substring(t,t+s));n=n.reverse()}else for(let t=0;t<e.length;t+=s)n.push(e.substring(t,t+s));return n}(n).join(this.thousandsSeparator));let i=e.fractionalPart;const r=e.isNegative?"-":"";if(""===i){if(s)return n&&"0"!==n?r+n:n;{const t=n+(e.hasDecimalSeparator&&!s?this.decimalSeparator:"");return"0"===t?t:r+t}}return n=n||"0",i=i.substring(0,this.precision),[r+n,i].join(this.decimalSeparator)}convertNumber(e){let t;const s=e.isNegative?"-":"";return t=e.fractionalPart?parseFloat(s+(e.integralPart||"0")+"."+e.fractionalPart.substring(0,this.precision)):parseInt(s+e.integralPart||"0"),t}validateNumber(e,t){const s=this.min||Number.MIN_SAFE_INTEGER,n=this.max||Number.MAX_SAFE_INTEGER;if(this.numericalCompositionIsEmpty(e))return!0;if(void 0!==this.min||void 0!==this.max){let i=this.convertNumber(e);if(Number.isNaN(i))return!0;if(i>=s&&i<=n)return!0;if(!t){if(e.hasDecimalSeparator||0==i){const t=Math.pow(.1,(e.fractionalPart||"").length);if(i>=0)return i+t>s&&i<=n;if(i<0)return i>=s&&i-t<n}else{let e=i,t=i;if(i>0){if(i+1>s&&i<=n)return!0;for(;e=10*e+9,t*=10,!(t>n);)if(e>s)return!0;return!1}if(i<0){if(i>=s&&i-1<n)return!0;for(;e*=10,t=10*t-9,!(e<s);)if(t<n)return!0;return!1}}return i>=0&&i<=n||i<0&&i>=s}return!1}return!0}parseNumber(e){const t={integralPart:"",fractionalPart:"",hasDecimalSeparator:!1,isNegative:!1},s=null==e?"":e.toString();let n=0;for(let e=0;e<s.length;e++){const i=s[e];switch(i){case"-":this.allowNegativeValues&&(void 0===this.min||this.min<0)&&n++;break;case this.decimalSeparator:this.precision>0&&(t.hasDecimalSeparator=!0);break;case this.thousandsSeparator:break;default:i.match(zn)&&(t.hasDecimalSeparator?t.fractionalPart+=i:t.integralPart+=i)}}return t.isNegative=n%2!=0,t.integralPart.length>1&&"0"===t.integralPart[0]&&(t.integralPart=t.integralPart.slice(1)),t}getNumberMaskedValue(e,t=!1){const s=this.parseNumber(e);return this.validateNumber(s,t)?this.displayNumber(s,!0,t):null}getNumberUnmaskedValue(e){const t=this.parseNumber(e);if(!this.numericalCompositionIsEmpty(t))return this.convertNumber(t)}getTextAlignment(){return"right"}getMaskedValue(e){let t=null==e?"":e.toString();return t=t.replace(".",this.decimalSeparator),this.getNumberMaskedValue(t,!0)}getUnmaskedValue(e){return this.getNumberUnmaskedValue(e)}processInput(e){const t={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1},s=e.prevValue.slice(0,e.selectionStart)+(e.insertedChars||""),n=s+e.prevValue.slice(e.selectionEnd),i=this.parseNumber(n);if(!this.validateNumber(i,!1))return t;const r=this.getNumberMaskedValue(n),a=this.calccaretPosition(s,e,r);return t.value=r,t.caretPosition=a,t}getType(){return"numericmask"}isValueUndefined(e){return""===e||super.isValueUndefined(e)}}function _r(e,t){switch(e){case"hour":case"minute":case"second":case"day":case"month":return 2;case"timeMarker":case"year":return t;default:return 1}}me([d()],xr.prototype,"allowNegativeValues",void 0),me([d()],xr.prototype,"decimalSeparator",void 0),me([d()],xr.prototype,"precision",void 0),me([d()],xr.prototype,"thousandsSeparator",void 0),me([d()],xr.prototype,"min",void 0),me([d()],xr.prototype,"max",void 0),I.addClass("numericmask",[{name:"allowNegativeValues:boolean",default:!0},{name:"decimalSeparator",default:".",maxLength:1},{name:"thousandsSeparator",default:",",maxLength:1},{name:"precision:number",default:2,minValue:0},{name:"min:number"},{name:"max:number"}],function(){return new xr},"masksettings");class Vr extends wr{constructor(){super(...arguments),this.defaultDate="1970-01-01T",this.turnOfTheCentury=68,this.twelve=12,this.lexems=[],this.inputDateTimeData=[],this.validBeginningOfNumbers={hour:1,hourU:2,minute:5,second:5,day:3,month:1}}get hasDatePart(){return this.lexems.some(e=>"day"===e.type||"month"===e.type||"year"===e.type)}get hasTimePart(){return this.lexems.some(e=>"hour"===e.type||"minute"===e.type||"second"===e.type)}get is12Hours(){return this.lexems.filter(e=>"hour"===e.type&&!e.upperCase).length>0}getType(){return"datetimemask"}getTypeForExpressions(){return this.hasTimePart?"datetime-local":"datetime"}updateLiterals(){this.lexems=function(e){const t=[];let s;const n=(e,n,i=!1)=>{if(s&&s===e){t[t.length-1].count++;const s=_r(e,t[t.length-1].count);t[t.length-1].maxCount=s}else{const s=_r(e,1);t.push({type:e,value:n,count:1,maxCount:s,upperCase:i})}};for(let i=0;i<e.length;i++){const r=e[i];switch(r){case"m":n("month",r);break;case"d":n("day",r);break;case"y":n("year",r);break;case"h":n("hour",r,!1);break;case"H":n("hour",r,!0);break;case"M":n("minute",r);break;case"s":n("second",r);break;case"t":n("timeMarker",r);break;case"T":n("timeMarker",r,!0);break;default:t.push({type:"separator",value:r,count:1,maxCount:1,upperCase:!1})}s=t[t.length-1].type}return t}(this.pattern||"")}leaveOnlyNumbers(e){let t="";for(let s=0;s<e.length;s++)e[s].match(zn)&&(t+=e[s]);return t}getMaskedStrFromISO(e){let t=new Date(e);return this.initInputDateTimeData(),this.hasTimePart||(t=new Date(e+"T00:00:00")),this.hasDatePart||(t=new Date(this.defaultDate+e)),isNaN(t)||this.lexems.forEach((e,s)=>{let n=this.inputDateTimeData[s];switch(n.isCompleted=!0,e.type){case"hour":this.is12Hours?n.value=((t.getHours()-1)%this.twelve+1).toString():n.value=t.getHours().toString();break;case"minute":n.value=t.getMinutes().toString();break;case"second":n.value=t.getSeconds().toString();break;case"timeMarker":{const s=t.getHours()>=this.twelve?"pm":"am";n.value=e.upperCase?s.toUpperCase():s;break}case"day":n.value=t.getDate().toString();break;case"month":n.value=(t.getMonth()+1).toString();break;case"year":{let s=t.getFullYear();2==e.count&&(s%=100),n.value=s.toString();break}}}),this.getFormatedString(!0)}initInputDateTimeData(){this.inputDateTimeData=[],this.lexems.forEach(e=>{this.inputDateTimeData.push({lexem:e,isCompleted:!1,value:void 0})})}getISO_8601Format(e){const t=[],s=[];if(void 0!==e.year){const s=this.getPlaceholder(4,e.year.toString(),"0")+e.year;t.push(s)}if(void 0!==e.month&&void 0!==e.year){const s=this.getPlaceholder(2,e.month.toString(),"0")+e.month;t.push(s)}if(void 0!==e.day&&void 0!==e.month&&void 0!==e.year){const s=this.getPlaceholder(2,e.day.toString(),"0")+e.day;t.push(s)}if(void 0!==e.hour){const t=this.getPlaceholder(2,e.hour.toString(),"0")+e.hour;s.push(t)}if(void 0!==e.minute&&void 0!==e.hour){const t=this.getPlaceholder(2,e.minute.toString(),"0")+e.minute;s.push(t)}if(void 0!==e.second&&void 0!==e.minute&&void 0!==e.hour){const t=this.getPlaceholder(2,e.second.toString(),"0")+e.second;s.push(t)}const n=[];return t.length>0&&n.push(t.join("-")),s.length>1&&n.push(s.join(":")),n.join("T")}isYearValid(e){if(void 0===e.min&&void 0===e.max)return!1;const t=e.year.toString(),s=e.min.toISOString().slice(0,t.length),n=e.max.toISOString().slice(0,t.length);return e.year>=parseInt(s)&&e.year<=parseInt(n)}createIDateTimeCompositionWithDefaults(e,t){const s=29==e.day&&2==e.month;let n=e.min.getFullYear(),i=e.max.getFullYear();s&&(n=4*Math.ceil(n/4),i=4*Math.floor(i/4),n>i&&(n=void 0,i=void 0));const r=void 0!==e.year?e.year:t?i:n,a=void 0!==e.month?e.month:t&&this.hasDatePart?12:1;return{year:r,month:a,day:void 0!==e.day?e.day:t&&this.hasDatePart?this.getMaxDateForMonth(r,a):1,hour:void 0!==e.hour?e.hour:t?23:0,minute:void 0!==e.minute?e.minute:t?59:0,second:void 0!==e.second?e.second:t?59:0}}getMaxDateForMonth(e,t){return 2==t?e%4==0&&e%100!=0||e%400==0?29:28:[31,28,31,30,31,30,31,31,30,31,30,31][t-1]}isDateValid(e){const t=new Date(this.getISO_8601Format(this.createIDateTimeCompositionWithDefaults(e,!1))),s=new Date(this.getISO_8601Format(this.createIDateTimeCompositionWithDefaults(e,!0)));return!isNaN(t)&&(t.getDate()===e.day||void 0===e.day)&&(t.getMonth()===e.month-1||void 0===e.month)&&(t.getFullYear()===e.year||void 0===e.year)&&s>=e.min&&t<=e.max}getPlaceholder(e,t,s){const n=e-(t||"").length;return n>0?s.repeat(n):""}isDateValid12(e){return this.is12Hours?!(this.is12Hours&&e.hour>this.twelve)&&(e.timeMarker?"p"===e.timeMarker[0].toLowerCase()?(e.hour!==this.twelve&&(e.hour+=this.twelve),this.isDateValid(e)):(e.hour===this.twelve&&(e.hour=0),this.isDateValid(e)):!!this.isDateValid(e)||(e.hour+=this.twelve,this.isDateValid(e))):this.isDateValid(e)}updateTimeMarkerInputDateTimeData(e,t){let s=e.value;if(!s)return;const n="timeMarker",i=Object.assign({},t);i[n]=s,this.isDateValid12(i)?e.isCompleted=!0:s=s.slice(0,s.length-1),e.value=s||void 0,t[n]=s||void 0}updateInputDateTimeData(e,t){let s=e.value;if(!s)return;const n=e.lexem.type,i=Object.assign({},t);if(i[n]=parseInt(this.parseTwoDigitYear(e)),s.length===e.lexem.maxCount){if(this.isDateValid12(i))return e.isCompleted=!0,e.value=s||void 0,void(t[n]=parseInt(s)>0?parseInt(s):void 0);s=s.slice(0,s.length-1)}i[n]=parseInt(s);const r=parseInt(s[0]),a=this.validBeginningOfNumbers[n+(e.lexem.upperCase?"U":"")];"year"!==n||this.isYearValid(i)?void 0!==a&&r>a?this.isDateValid12(i)?e.isCompleted=!0:s=s.slice(0,s.length-1):void 0!==a&&0!==r&&r<=a&&(this.checkValidationDateTimePart(i,n,e),e.isCompleted&&!this.isDateValid12(i)&&(s=s.slice(0,s.length-1))):(s=s.slice(0,s.length-1),e.isCompleted=!1),e.value=s||void 0,t[n]=parseInt(s)>0?parseInt(s):void 0}checkValidationDateTimePart(e,t,s){const n=e[t];let i=10*n,r=10;"month"===t&&(r=3),"hour"===t&&(r=this.is12Hours?3:5),s.isCompleted=!0;for(let n=0;n<r;n++)if(e[t]=i+n,this.isDateValid12(e)){s.isCompleted=!1;break}e[t]=n}getCorrectDatePartFormat(e,t){const s=e.lexem;let n=e.value||"";return n&&"timeMarker"===s.type?(t&&(n+=this.getPlaceholder(s.count,n,s.value)),n):(n&&e.isCompleted&&(n=parseInt(n).toString()),n&&e.isCompleted?n=this.getPlaceholder(s.count,n,"0")+n:(n=function(e,t){let s=t;return e.count<e.maxCount&&("day"===e.type&&0===parseInt(t[0])||"month"===e.type&&0===parseInt(t[0]))&&(s=t.slice(1,t.length)),s}(s,n),t&&(n+=this.getPlaceholder(s.count,n,s.value))),n)}createIDateTimeComposition(){let e,t;return this.hasDatePart?(e=this.min||"0001-01-01",t=this.max||"9996-12-31"):(e=this.defaultDate+(this.min||"00:00:00"),t=this.defaultDate+(this.max||"23:59:59")),{hour:void 0,minute:void 0,second:void 0,day:void 0,month:void 0,year:void 0,min:new Date(e),max:new Date(t)}}parseTwoDigitYear(e){const t=e.value;return"year"!==e.lexem.type||e.lexem.count>2?t:(this.max&&this.max.length>=4&&(this.turnOfTheCentury=parseInt(this.max.slice(2,4))),(parseInt(t)>this.turnOfTheCentury?"19":"20")+t)}getFormatedString(e){let t="",s="",n=!1,i=this.inputDateTimeData.length-1;if(!e){const e=this.inputDateTimeData.filter(e=>!!e.value);i=this.inputDateTimeData.indexOf(e[e.length-1])}for(let r=0;r<this.inputDateTimeData.length;r++){const a=this.inputDateTimeData[r];switch(a.lexem.type){case"timeMarker":case"hour":case"minute":case"second":case"day":case"month":case"year":if(void 0===a.value&&!e)return t+=n?s:"",t;{const o=e||i>r;t+=s+this.getCorrectDatePartFormat(a,o),n=a.isCompleted}break;case"separator":s=a.lexem.value}}return t}cleanTimeMarker(e,t){let s="";e=e.toUpperCase();for(let t=0;t<e.length;t++)(!s&&("P"==e[t]||"A"==e[t])||s&&"M"==e[t])&&(s+=e[t]);return s=t?s.toUpperCase():s.toLowerCase(),s}setInputDateTimeData(e){let t=0;this.initInputDateTimeData(),this.lexems.forEach((s,n)=>{if(e.length>0&&t<e.length){if("separator"===s.type)return;const i=this.inputDateTimeData[n],r=e[t];let a;a="timeMarker"===s.type?this.cleanTimeMarker(r,s.upperCase):this.leaveOnlyNumbers(r),i.value=a.slice(0,s.maxCount),t++}})}_getMaskedValue(e,t=!0){let s=null==e?"":e.toString();const n=this.getParts(s);this.setInputDateTimeData(n);const i=this.createIDateTimeComposition();return this.inputDateTimeData.forEach(e=>{"timeMarker"===e.lexem.type?this.updateTimeMarkerInputDateTimeData(e,i):this.updateInputDateTimeData(e,i)}),this.getFormatedString(t)}getParts(e){const t=[],s=this.lexems.filter(e=>"separator"!==e.type),n=this.lexems.filter(e=>"separator"===e.type).map(e=>e.value);let i="",r=!1,a=!1;for(let o=0;o<e.length;o++){const l=e[o];if(l.match(zn)||l===s[t.length].value||"timeMarker"===s[t.length].type?(r=!1,a=!1,i+=l):-1!==n.indexOf(l)?a||(r=!0,t.push(i),i=""):r||(a=!0,t.push(i),i=""),t.length>=s.length){r=!1;break}}return(""!=i||r)&&t.push(i),t}getUnmaskedValue(e){var t;let s=null==e?"":e.toString();const n=this.getParts(s);this.setInputDateTimeData(n);const i=null===(t=this.inputDateTimeData.filter(e=>"timeMarker"===e.lexem.type)[0])||void 0===t?void 0:t.value.toLowerCase()[0],r=this.createIDateTimeComposition();let a=!1;return this.inputDateTimeData.forEach(e=>{let t=e.value;if("timeMarker"==e.lexem.type||"separator"==e.lexem.type)return;if(!t||t.length<e.lexem.count)return void(a=!0);let s=parseInt(this.parseTwoDigitYear(e));"hour"==e.lexem.type&&"p"===i&&s!=this.twelve&&(s+=this.twelve),r[e.lexem.type]=s}),a?"":this.getISO_8601Format(r)}getMaskedValue(e){return this.getMaskedStrFromISO(e)}processInput(e){const t={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1},s=e.prevValue.slice(0,e.selectionStart),n=e.prevValue.slice(e.selectionEnd);return t.value=this._getMaskedValue(s+(e.insertedChars||"")+n),e.insertedChars||"backward"!==e.inputDirection?t.caretPosition=this._getMaskedValue(s+(e.insertedChars||""),!1).length:t.caretPosition=e.selectionStart,t}}me([d()],Vr.prototype,"min",void 0),me([d()],Vr.prototype,"max",void 0),I.addClass("datetimemask",[{name:"min",type:"datetime",enableIf:e=>!!e.pattern},{name:"max",type:"datetime",enableIf:e=>!!e.pattern}],function(){return new Vr},"patternmask");class Ir extends xr{getType(){return"currencymask"}wrapText(e){const t=this.prefix||"",s=this.suffix||"";let n=e;return n?(-1===n.indexOf(t)&&(n=t+n),-1===n.indexOf(s)&&(n+=s),n):n}unwrapInputArgs(e){let t=e.prevValue;if(t){if(this.prefix&&-1!==t.indexOf(this.prefix)){t=t.slice(t.indexOf(this.prefix)+this.prefix.length);const s=(this.prefix||"").length;e.selectionStart=Math.max(e.selectionStart-s,0),e.selectionEnd-=s}this.suffix&&-1!==t.indexOf(this.suffix)&&(t=t.slice(0,t.indexOf(this.suffix))),e.prevValue=t}}processInput(e){this.unwrapInputArgs(e);const t=super.processInput(e),s=(this.prefix||"").length;return t.value&&(t.caretPosition+=s),t.value=this.wrapText(t.value),t}getMaskedValue(e){const t=super.getMaskedValue(e);return this.wrapText(t)}}var Sr;me([d()],Ir.prototype,"prefix",void 0),me([d()],Ir.prototype,"suffix",void 0),I.addClass("currencymask",[{name:"prefix"},{name:"suffix"}],()=>new Ir,"numericmask"),Sr="2.3.9",xt.version=Sr;const Pr=new class{constructor(){this.icons={},this.iconPrefix="icon-",this.onIconsChanged=new ge}processId(e,t){return 0==e.indexOf(t)&&(e=e.substring(t.length)),st[e]||e}registerIconFromSymbol(e,t){this.icons[e]=t}registerIconFromSvgViaElement(e,t,s=this.iconPrefix){if(!i.isAvailable())return;e=this.processId(e,s);let n=i.createElement("div");n.innerHTML=t;let r=i.createElement("symbol"),a=n.querySelector("svg");r.innerHTML=a.innerHTML;for(var o=0;o<a.attributes.length;o++)r.setAttributeNS("http://www.w3.org/2000/svg",a.attributes[o].name,a.attributes[o].value);r.id=s+e,this.registerIconFromSymbol(e,r.outerHTML)}registerIconFromSvg(e,t,s=this.iconPrefix){e=this.processId(e,s);const n=(t=t.trim()).toLowerCase();return"<svg "===n.substring(0,5)&&"</svg>"===n.substring(n.length-6,n.length)&&(this.registerIconFromSymbol(e,'<symbol id="'+s+e+'" '+t.substring(5,n.length-6)+"</symbol>"),!0)}registerIconsFromFolder(e){e.keys().forEach(t=>{this.registerIconFromSvg(t.substring(2,t.length-4).toLowerCase(),e(t))})}registerIcons(e){for(const t in e)this.registerIconFromSvg(t,e[t]);this.updateMarkup()}registerIcon(e,t,s="v2"){this.registerIconFromSvg(e,t),Er(s,{[e]:t})}iconsRenderedHtml(){return Object.keys(this.icons).map(e=>this.icons[e]).join("")}updateMarkup(){this.onIconsChanged.fire(this,{})}},Tr={};function Er(e,t){Tr[e]||(Tr[e]={});const s=Tr[e];for(const e in t)s[e]=t[e]}var Rr,kr,Ar,Lr,Dr,Nr,Or,jr,qr,Mr,Fr,Br={},zr=[],Hr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Qr=Array.isArray;function Ur(e,t){for(var s in t)e[s]=t[s];return e}function Wr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Gr(e,t,s){var n,i,r,a={};for(r in t)"key"==r?n=t[r]:"ref"==r?i=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?Rr.call(arguments,2):s),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===a[r]&&(a[r]=e.defaultProps[r]);return Zr(e,a,n,i,null)}function Zr(e,t,s,n,i){var r={type:e,props:t,key:s,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==i?++Ar:i,__i:-1,__u:0};return null==i&&null!=kr.vnode&&kr.vnode(r),r}function Kr(e){return e.children}function Jr(e,t){this.props=e,this.context=t}function Yr(e,t){if(null==t)return e.__?Yr(e.__,e.__i+1):null;for(var s;t<e.__k.length;t++)if(null!=(s=e.__k[t])&&null!=s.__e)return s.__e;return"function"==typeof e.type?Yr(e):null}function $r(e){var t,s;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(s=e.__k[t])&&null!=s.__e){e.__e=e.__c.base=s.__e;break}return $r(e)}}function Xr(e){(!e.__d&&(e.__d=!0)&&Lr.push(e)&&!ea.__r++||Dr!=kr.debounceRendering)&&((Dr=kr.debounceRendering)||Nr)(ea)}function ea(){for(var e,t,s,n,i,r,a,o=1;Lr.length;)Lr.length>o&&Lr.sort(Or),e=Lr.shift(),o=Lr.length,e.__d&&(s=void 0,n=void 0,i=(n=(t=e).__v).__e,r=[],a=[],t.__P&&((s=Ur({},n)).__v=n.__v+1,kr.vnode&&kr.vnode(s),la(t.__P,s,n,t.__n,t.__P.namespaceURI,32&n.__u?[i]:null,r,null==i?Yr(n):i,!!(32&n.__u),a),s.__v=n.__v,s.__.__k[s.__i]=s,da(r,s,a),n.__e=n.__=null,s.__e!=i&&$r(s)));ea.__r=0}function ta(e,t,s,n,i,r,a,o,l,u,d){var h,c,p,g,m,v,f,b=n&&n.__k||zr,y=t.length;for(l=function(e,t,s,n,i){var r,a,o,l,u,d=s.length,h=d,c=0;for(e.__k=new Array(i),r=0;r<i;r++)null!=(a=t[r])&&"boolean"!=typeof a&&"function"!=typeof a?(l=r+c,(a=e.__k[r]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?Zr(null,a,null,null,null):Qr(a)?Zr(Kr,{children:a},null,null,null):null==a.constructor&&a.__b>0?Zr(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,o=null,-1!=(u=a.__i=ia(a,s,l,h))&&(h--,(o=s[u])&&(o.__u|=2)),null==o||null==o.__v?(-1==u&&(i>d?c--:i<d&&c++),"function"!=typeof a.type&&(a.__u|=4)):u!=l&&(u==l-1?c--:u==l+1?c++:(u>l?c--:c++,a.__u|=4))):e.__k[r]=null;if(h)for(r=0;r<d;r++)null!=(o=s[r])&&!(2&o.__u)&&(o.__e==n&&(n=Yr(o)),ga(o,o));return n}(s,t,b,l,y),h=0;h<y;h++)null!=(p=s.__k[h])&&(c=-1==p.__i?Br:b[p.__i]||Br,p.__i=h,v=la(e,p,c,i,r,a,o,l,u,d),g=p.__e,p.ref&&c.ref!=p.ref&&(c.ref&&pa(c.ref,null,p),d.push(p.ref,p.__c||g,p)),null==m&&null!=g&&(m=g),(f=!!(4&p.__u))||c.__k===p.__k?l=sa(p,l,e,f):"function"==typeof p.type&&void 0!==v?l=v:g&&(l=g.nextSibling),p.__u&=-7);return s.__e=m,l}function sa(e,t,s,n){var i,r;if("function"==typeof e.type){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=sa(i[r],t,s,n));return t}e.__e!=t&&(n&&(t&&e.type&&!t.parentNode&&(t=Yr(e)),s.insertBefore(e.__e,t||null)),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function na(e,t){return t=t||[],null==e||"boolean"==typeof e||(Qr(e)?e.some(function(e){na(e,t)}):t.push(e)),t}function ia(e,t,s,n){var i,r,a,o=e.key,l=e.type,u=t[s],d=null!=u&&!(2&u.__u);if(null===u&&null==e.key||d&&o==u.key&&l==u.type)return s;if(n>(d?1:0))for(i=s-1,r=s+1;i>=0||r<t.length;)if(null!=(u=t[a=i>=0?i--:r++])&&!(2&u.__u)&&o==u.key&&l==u.type)return a;return-1}function ra(e,t,s){"-"==t[0]?e.setProperty(t,null==s?"":s):e[t]=null==s?"":"number"!=typeof s||Hr.test(t)?s:s+"px"}function aa(e,t,s,n,i){var r,a;e:if("style"==t)if("string"==typeof s)e.style.cssText=s;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)s&&t in s||ra(e.style,t,"");if(s)for(t in s)n&&s[t]==n[t]||ra(e.style,t,s[t])}else if("o"==t[0]&&"n"==t[1])r=t!=(t=t.replace(jr,"$1")),a=t.toLowerCase(),t=a in e||"onFocusOut"==t||"onFocusIn"==t?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=s,s?n?s.u=n.u:(s.u=qr,e.addEventListener(t,r?Fr:Mr,r)):e.removeEventListener(t,r?Fr:Mr,r);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==s?"":s;break e}catch(e){}"function"==typeof s||(null==s||!1===s&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==s?"":s))}}function oa(e){return function(t){if(this.l){var s=this.l[t.type+e];if(null==t.t)t.t=qr++;else if(t.t<s.u)return;return s(kr.event?kr.event(t):t)}}}function la(e,t,s,n,i,r,a,o,l,u){var d,h,c,p,g,m,v,f,b,y,C,w,x,_,V,I,S,P=t.type;if(null!=t.constructor)return null;128&s.__u&&(l=!!(32&s.__u),r=[o=t.__e=s.__e]),(d=kr.__b)&&d(t);e:if("function"==typeof P)try{if(f=t.props,b="prototype"in P&&P.prototype.render,y=(d=P.contextType)&&n[d.__c],C=d?y?y.props.value:d.__:n,s.__c?v=(h=t.__c=s.__c).__=h.__E:(b?t.__c=h=new P(f,C):(t.__c=h=new Jr(f,C),h.constructor=P,h.render=ma),y&&y.sub(h),h.props=f,h.state||(h.state={}),h.context=C,h.__n=n,c=h.__d=!0,h.__h=[],h._sb=[]),b&&null==h.__s&&(h.__s=h.state),b&&null!=P.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=Ur({},h.__s)),Ur(h.__s,P.getDerivedStateFromProps(f,h.__s))),p=h.props,g=h.state,h.__v=t,c)b&&null==P.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),b&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(b&&null==P.getDerivedStateFromProps&&f!==p&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(f,C),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(f,h.__s,C)||t.__v==s.__v){for(t.__v!=s.__v&&(h.props=f,h.state=h.__s,h.__d=!1),t.__e=s.__e,t.__k=s.__k,t.__k.some(function(e){e&&(e.__=t)}),w=0;w<h._sb.length;w++)h.__h.push(h._sb[w]);h._sb=[],h.__h.length&&a.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(f,h.__s,C),b&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(p,g,m)})}if(h.context=C,h.props=f,h.__P=e,h.__e=!1,x=kr.__r,_=0,b){for(h.state=h.__s,h.__d=!1,x&&x(t),d=h.render(h.props,h.state,h.context),V=0;V<h._sb.length;V++)h.__h.push(h._sb[V]);h._sb=[]}else do{h.__d=!1,x&&x(t),d=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++_<25);h.state=h.__s,null!=h.getChildContext&&(n=Ur(Ur({},n),h.getChildContext())),b&&!c&&null!=h.getSnapshotBeforeUpdate&&(m=h.getSnapshotBeforeUpdate(p,g)),I=d,null!=d&&d.type===Kr&&null==d.key&&(I=ha(d.props.children)),o=ta(e,Qr(I)?I:[I],t,s,n,i,r,a,o,l,u),h.base=t.__e,t.__u&=-161,h.__h.length&&a.push(h),v&&(h.__E=h.__=null)}catch(e){if(t.__v=null,l||null!=r)if(e.then){for(t.__u|=l?160:128;o&&8==o.nodeType&&o.nextSibling;)o=o.nextSibling;r[r.indexOf(o)]=null,t.__e=o}else{for(S=r.length;S--;)Wr(r[S]);ua(t)}else t.__e=s.__e,t.__k=s.__k,e.then||ua(t);kr.__e(e,t,s)}else null==r&&t.__v==s.__v?(t.__k=s.__k,t.__e=s.__e):o=t.__e=ca(s.__e,t,s,n,i,r,a,l,u);return(d=kr.diffed)&&d(t),128&t.__u?void 0:o}function ua(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ua)}function da(e,t,s){for(var n=0;n<s.length;n++)pa(s[n],s[++n],s[++n]);kr.__c&&kr.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){kr.__e(e,t.__v)}})}function ha(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:Qr(e)?e.map(ha):Ur({},e)}function ca(e,t,s,n,i,r,a,o,l){var u,d,h,c,p,g,m,v=s.props,f=t.props,b=t.type;if("svg"==b?i="http://www.w3.org/2000/svg":"math"==b?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=r)for(u=0;u<r.length;u++)if((p=r[u])&&"setAttribute"in p==!!b&&(b?p.localName==b:3==p.nodeType)){e=p,r[u]=null;break}if(null==e){if(null==b)return document.createTextNode(f);e=document.createElementNS(i,b,f.is&&f),o&&(kr.__m&&kr.__m(t,r),o=!1),r=null}if(null==b)v===f||o&&e.data==f||(e.data=f);else{if(r=r&&Rr.call(e.childNodes),v=s.props||Br,!o&&null!=r)for(v={},u=0;u<e.attributes.length;u++)v[(p=e.attributes[u]).name]=p.value;for(u in v)if(p=v[u],"children"==u);else if("dangerouslySetInnerHTML"==u)h=p;else if(!(u in f)){if("value"==u&&"defaultValue"in f||"checked"==u&&"defaultChecked"in f)continue;aa(e,u,null,p,i)}for(u in f)p=f[u],"children"==u?c=p:"dangerouslySetInnerHTML"==u?d=p:"value"==u?g=p:"checked"==u?m=p:o&&"function"!=typeof p||v[u]===p||aa(e,u,p,v[u],i);if(d)o||h&&(d.__html==h.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(h&&(e.innerHTML=""),ta("template"==t.type?e.content:e,Qr(c)?c:[c],t,s,n,"foreignObject"==b?"http://www.w3.org/1999/xhtml":i,r,a,r?r[0]:s.__k&&Yr(s,0),o,l),null!=r)for(u=r.length;u--;)Wr(r[u]);o||(u="value","progress"==b&&null==g?e.removeAttribute("value"):null!=g&&(g!==e[u]||"progress"==b&&!g||"option"==b&&g!=v[u])&&aa(e,u,g,v[u],i),u="checked",null!=m&&m!=e[u]&&aa(e,u,m,v[u],i))}return e}function pa(e,t,s){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){kr.__e(e,s)}}function ga(e,t,s){var n,i;if(kr.unmount&&kr.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||pa(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){kr.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&ga(n[i],t,s||"function"!=typeof e.type);s||Wr(e.__e),e.__c=e.__=e.__e=void 0}function ma(e,t,s){return this.constructor(e,s)}function va(e,t,s){var n,i,r,a;t==document&&(t=document.documentElement),kr.__&&kr.__(e,t),i=(n="function"==typeof s)?null:s&&s.__k||t.__k,r=[],a=[],la(t,e=(!n&&s||t).__k=Gr(Kr,null,[e]),i||Br,Br,t.namespaceURI,!n&&s?[s]:i?null:t.firstChild?Rr.call(t.childNodes):null,r,!n&&s?s:i?i.__e:t.firstChild,n,a),da(r,e,a)}function fa(e,t,s){var n,i,r,a,o=Ur({},e.props);for(r in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)"key"==r?n=t[r]:"ref"==r?i=t[r]:o[r]=void 0===t[r]&&null!=a?a[r]:t[r];return arguments.length>2&&(o.children=arguments.length>3?Rr.call(arguments,2):s),Zr(e.type,o,n||e.key,i||e.ref,null)}Rr=zr.slice,kr={__e:function(e,t,s,n){for(var i,r,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},Ar=0,Jr.prototype.setState=function(e,t){var s;s=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=Ur({},this.state),"function"==typeof e&&(e=e(Ur({},s),this.props)),e&&Ur(s,e),null!=e&&this.__v&&(t&&this._sb.push(t),Xr(this))},Jr.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Xr(this))},Jr.prototype.render=Kr,Lr=[],Nr="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Or=function(e,t){return e.__v.__b-t.__v.__b},ea.__r=0,jr=/(PointerCapture)$|Capture$/i,qr=0,Mr=oa(!1),Fr=oa(!0);var ba,ya,Ca,wa=[],xa=kr,_a=xa.__b,Va=xa.__r,Ia=xa.diffed,Sa=xa.__c,Pa=xa.unmount,Ta=xa.__;function Ea(){for(var e;e=wa.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Aa),e.__H.__h.forEach(La),e.__H.__h=[]}catch(t){e.__H.__h=[],xa.__e(t,e.__v)}}xa.__b=function(e){ba=null,_a&&_a(e)},xa.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ta&&Ta(e,t)},xa.__r=function(e){Va&&Va(e);var t=(ba=e.__c).__H;t&&(ya===ba?(t.__h=[],ba.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(Aa),t.__h.forEach(La),t.__h=[])),ya=ba},xa.diffed=function(e){Ia&&Ia(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==wa.push(t)&&Ca===xa.requestAnimationFrame||((Ca=xa.requestAnimationFrame)||ka)(Ea)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),ya=ba=null},xa.__c=function(e,t){t.some(function(e){try{e.__h.forEach(Aa),e.__h=e.__h.filter(function(e){return!e.__||La(e)})}catch(s){t.some(function(e){e.__h&&(e.__h=[])}),t=[],xa.__e(s,e.__v)}}),Sa&&Sa(e,t)},xa.unmount=function(e){Pa&&Pa(e);var t,s=e.__c;s&&s.__H&&(s.__H.__.forEach(function(e){try{Aa(e)}catch(e){t=e}}),s.__H=void 0,t&&xa.__e(t,s.__v))};var Ra="function"==typeof requestAnimationFrame;function ka(e){var t,s=function(){clearTimeout(n),Ra&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(s,35);Ra&&(t=requestAnimationFrame(s))}function Aa(e){var t=ba,s=e.__c;"function"==typeof s&&(e.__c=void 0,s()),ba=t}function La(e){var t=ba;e.__c=e.__(),ba=t}function Da(e,t){for(var s in e)if("__source"!==s&&!(s in t))return!0;for(var n in t)if("__source"!==n&&e[n]!==t[n])return!0;return!1}function Na(e,t){this.props=e,this.context=t}(Na.prototype=new Jr).isPureReactComponent=!0,Na.prototype.shouldComponentUpdate=function(e,t){return Da(this.props,e)||Da(this.state,t)};var Oa=kr.__b;kr.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Oa&&Oa(e)},"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var ja=kr.__e;kr.__e=function(e,t,s,n){if(e.then)for(var i,r=t;r=r.__;)if((i=r.__c)&&i.__c)return null==t.__e&&(t.__e=s.__e,t.__k=s.__k),i.__c(e,t);ja(e,t,s,n)};var qa=kr.unmount;function Ma(e,t,s){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),e.__c.__H=null),null!=(e=function(e,t){for(var s in t)e[s]=t[s];return e}({},e)).__c&&(e.__c.__P===s&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(e){return Ma(e,t,s)})),e}function Fa(e,t,s){return e&&s&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(e){return Fa(e,t,s)}),e.__c&&e.__c.__P===t&&(e.__e&&s.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=s)),e}function Ba(){this.__u=0,this.o=null,this.__b=null}function za(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ha(){this.i=null,this.l=null}kr.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),qa&&qa(e)},(Ba.prototype=new Jr).__c=function(e,t){var s=t.__c,n=this;null==n.o&&(n.o=[]),n.o.push(s);var i=za(n.__v),r=!1,a=function(){r||(r=!0,s.__R=null,i?i(o):o())};s.__R=a;var o=function(){if(! --n.__u){if(n.state.__a){var e=n.state.__a;n.__v.__k[0]=Fa(e,e.__c.__P,e.__c.__O)}var t;for(n.setState({__a:n.__b=null});t=n.o.pop();)t.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},Ba.prototype.componentWillUnmount=function(){this.o=[]},Ba.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Ma(this.__b,s,n.__O=n.__P)}this.__b=null}var i=t.__a&&Gr(Kr,null,e.fallback);return i&&(i.__u&=-33),[Gr(Kr,null,t.__a?null:e.children),i]};var Qa=function(e,t,s){if(++s[1]===s[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(s=e.i;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;e.i=s=s[2]}};function Ua(e){return this.getChildContext=function(){return e.context},e.children}function Wa(e){var t=this,s=e.h;if(t.componentWillUnmount=function(){va(null,t.v),t.v=null,t.h=null},t.h&&t.h!==s&&t.componentWillUnmount(),!t.v){for(var n=t.__v;null!==n&&!n.__m&&null!==n.__;)n=n.__;t.h=s,t.v={nodeType:1,parentNode:s,childNodes:[],__k:{__m:n.__m},contains:function(){return!0},insertBefore:function(e,s){this.childNodes.push(e),t.h.insertBefore(e,s)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.h.removeChild(e)}}}va(Gr(Ua,{context:t.context},e.__v),t.v)}(Ha.prototype=new Jr).__a=function(e){var t=this,s=za(t.__v),n=t.l.get(e);return n[0]++,function(i){var r=function(){t.props.revealOrder?(n.push(i),Qa(t,e,n)):i()};s?s(r):r()}},Ha.prototype.render=function(e){this.i=null,this.l=new Map;var t=na(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var s=t.length;s--;)this.l.set(t[s],this.i=[1,0,this.i]);return e.children},Ha.prototype.componentDidUpdate=Ha.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,s){Qa(e,s,t)})};var Ga="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Za=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ka=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ja=/[A-Z0-9]/g,Ya="undefined"!=typeof document,$a=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};function Xa(e,t,s){return null==t.__k&&(t.textContent=""),va(e,t),"function"==typeof s&&s(),e?e.__c:null}Jr.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Jr.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var eo=kr.event;function to(){}function so(){return this.cancelBubble}function no(){return this.defaultPrevented}kr.event=function(e){return eo&&(e=eo(e)),e.persist=to,e.isPropagationStopped=so,e.isDefaultPrevented=no,e.nativeEvent=e};var io={enumerable:!1,configurable:!0,get:function(){return this.class}},ro=kr.vnode;kr.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,s=e.type,n={},i=-1===s.indexOf("-");for(var r in t){var a=t[r];if(!("value"===r&&"defaultValue"in t&&null==a||Ya&&"children"===r&&"noscript"===s||"class"===r||"className"===r)){var o=r.toLowerCase();"defaultValue"===r&&"value"in t&&null==t.value?r="value":"download"===r&&!0===a?a="":"translate"===o&&"no"===a?a=!1:"o"===o[0]&&"n"===o[1]?"ondoubleclick"===o?r="ondblclick":"onchange"!==o||"input"!==s&&"textarea"!==s||$a(t.type)?"onfocus"===o?r="onfocusin":"onblur"===o?r="onfocusout":Ka.test(r)&&(r=o):o=r="oninput":i&&Za.test(r)?r=r.replace(Ja,"-$&").toLowerCase():null===a&&(a=void 0),"oninput"===o&&n[r=o]&&(r="oninputCapture"),n[r]=a}}"select"==s&&n.multiple&&Array.isArray(n.value)&&(n.value=na(t.children).forEach(function(e){e.props.selected=-1!=n.value.indexOf(e.props.value)})),"select"==s&&null!=n.defaultValue&&(n.value=na(t.children).forEach(function(e){e.props.selected=n.multiple?-1!=n.defaultValue.indexOf(e.props.value):n.defaultValue==e.props.value})),t.class&&!t.className?(n.class=t.class,Object.defineProperty(n,"className",io)):(t.className&&!t.class||t.class&&t.className)&&(n.class=n.className=t.className),e.props=n}(e),e.$$typeof=Ga,ro&&ro(e)};var ao=kr.__r;kr.__r=function(e){ao&&ao(e),e.__c};var oo=kr.diffed;function lo(e){return function(e){return!!e&&e.$$typeof===Ga}(e)?fa.apply(null,arguments):e}kr.diffed=function(e){oo&&oo(e);var t=e.props,s=e.__e;null!=s&&"textarea"===e.type&&"value"in t&&t.value!==s.value&&(s.value=null==t.value?"":t.value)};var uo=function(e,t){return e(t)};class ho{constructor(){this.creatorHash={}}registerElement(e,t){this.creatorHash[e]=t}getAllTypes(){var e=new Array;for(var t in this.creatorHash)e.push(t);return e.sort()}isElementRegistered(e){return!!this.creatorHash[e]}createElement(e,t){var s=this.creatorHash[e];return null==s?null:s(t)}}ho.Instance=new ho;class co{static wrapRow(e,t,s){const n=e.getRowWrapperComponentName(s),i=e.getRowWrapperComponentData(s);return ho.Instance.createElement(n,{element:t,row:s,componentData:i})}static wrapElement(e,t,s){const n=e.getElementWrapperComponentName(s),i=e.getElementWrapperComponentData(s);return ho.Instance.createElement(n,{element:t,question:s,componentData:i})}static wrapQuestionContent(e,t,s){const n=e.getQuestionContentWrapperComponentName(s),i=e.getElementWrapperComponentData(s);return ho.Instance.createElement(n,{element:t,question:s,componentData:i})}static wrapItemValue(e,t,s,n){const i=e.getItemValueWrapperComponentName(n,s),r=e.getItemValueWrapperComponentData(n,s);return ho.Instance.createElement(i,{key:null==t?void 0:t.key,element:t,question:s,item:n,componentData:r})}static wrapMatrixCell(e,t,s,n="cell"){const i=e.getElementWrapperComponentName(s,n),r=e.getElementWrapperComponentData(s,n);return ho.Instance.createElement(i,{element:t,cell:s,componentData:r})}}In.platform="react";class po extends Jr{static renderLocString(e,t=null,s){return ho.Instance.createElement(e.renderAs,{locStr:e.renderAsData,style:t,key:s})}static renderQuestionDescription(e){var t=po.renderLocString(e.locDescription);return Gr("div",{style:e.hasDescription?void 0:{display:"none"},id:e.ariaDescriptionId,className:e.cssDescription},t)}constructor(e){super(e),this._allowComponentUpdate=!0,this.prevStateElements=[],this.propertyValueChangedHandler=(e,t,s)=>{if(e[t]!==s){if(e[t]=s,!this.canUsePropInState(t))return;if(this.isRendering)return;this.changedStatePropNameValue=t,this.setState(e=>{var n={};return n[t]=s,n})}}}componentDidMount(){this.makeBaseElementsReact()}componentWillUnmount(){this.unMakeBaseElementsReact(),this.disableStateElementsRerenderEvent(this.getStateElements())}componentDidUpdate(e,t){var s;this.makeBaseElementsReact();const n=this.getStateElements();this.disableStateElementsRerenderEvent((null!==(s=this.prevStateElements)&&void 0!==s?s:[]).filter(e=>!n.find(t=>t==e))),this.prevStateElements=[],this.getStateElements().forEach(e=>{e.afterRerender()})}allowComponentUpdate(){this._allowComponentUpdate=!0,this.forceUpdate()}denyComponentUpdate(){this._allowComponentUpdate=!1}shouldComponentUpdate(e,t){return this._allowComponentUpdate&&(this.unMakeBaseElementsReact(),this.prevStateElements=this.getStateElements()),this._allowComponentUpdate}render(){if(!this.canRender())return null;this.startEndRendering(1);var e=this.renderElement();return this.startEndRendering(-1),e&&(e=this.wrapElement(e)),this.changedStatePropNameValue=void 0,e}wrapElement(e){return e}get isRendering(){var e=this.getRenderedElements();for(let t of e)if(t.reactRendering>0)return!0;return!1}getRenderedElements(){return this.getStateElements()}startEndRendering(e){var t=this.getRenderedElements();for(let s of t)s.reactRendering||(s.reactRendering=0),s.reactRendering+=e}canRender(){return!0}renderElement(){return null}get changedStatePropName(){return this.changedStatePropNameValue}makeBaseElementsReact(){for(var e=this.getStateElements(),t=0;t<e.length;t++)e[t].enableOnElementRerenderedEvent(),this.makeBaseElementReact(e[t])}unMakeBaseElementsReact(){var e=this.getStateElements();this.unMakeBaseElementsReactive(e)}unMakeBaseElementsReactive(e){for(var t=0;t<e.length;t++)this.unMakeBaseElementReact(e[t])}disableStateElementsRerenderEvent(e){e.forEach(e=>{e.disableOnElementRerenderedEvent()})}getStateElements(){var e=this.getStateElement();return e?[e]:[]}getStateElement(){return null}get isDisplayMode(){return this.props.isDisplayMode||!1}renderLocString(e,t=null,s){return po.renderLocString(e,t,s)}canMakeReact(e){return!!e&&!!e.iteratePropertiesHash}isCurrentStateElement(e){return!!e&&!!e.setPropertyValueCoreHandler&&e.setPropertyValueCoreHandler===this.propertyValueChangedHandler}makeBaseElementReact(e){this.canMakeReact(e)&&(e.iteratePropertiesHash((e,t)=>{if(this.canUsePropInState(t)){var s=e[t];Array.isArray(s)&&(s.onArrayChanged=e=>{this.isRendering||(this.changedStatePropNameValue=t,this.setState(e=>{var n={};return n[t]=s,n}))})}}),e.setPropertyValueCoreHandler=this.propertyValueChangedHandler)}canUsePropInState(e){return!0}unMakeBaseElementReact(e){this.canMakeReact(e)&&(this.isCurrentStateElement(e),e.setPropertyValueCoreHandler=void 0,e.iteratePropertiesHash((e,t)=>{var s=e[t];Array.isArray(s)&&(s.onArrayChanged=()=>{})}))}}class go extends po{constructor(e){super(e)}get cssClasses(){return this.props.cssClasses}}class mo extends po{constructor(e){super(e)}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateDomElement()}componentDidMount(){super.componentDidMount(),this.updateDomElement()}componentWillUnmount(){if(super.componentWillUnmount(),this.questionBase){const e=this.content||this.control;this.questionBase.beforeDestroyQuestionElement(e),e&&e.removeAttribute("data-rendered")}}updateDomElement(){const e=this.content||this.control;e&&"r"!==e.getAttribute("data-rendered")&&(e.setAttribute("data-rendered","r"),this.questionBase.afterRenderQuestionElement(e))}get questionBase(){return this.props.question}getRenderedElements(){return[this.questionBase]}get creator(){return this.props.creator}canRender(){return!!this.questionBase&&!!this.creator}shouldComponentUpdate(e,t){return!(!super.shouldComponentUpdate(e,t)||this.questionBase.customWidget&&!this.questionBase.customWidgetData.isNeedRender&&!this.questionBase.customWidget.widgetJson.isDefaultRender&&!this.questionBase.customWidget.widgetJson.render)}get isDisplayMode(){return this.props.isDisplayMode||!!this.questionBase&&this.questionBase.isInputReadOnly||!1}wrapCell(e,t,s){if(!s)return t;const n=this.questionBase.survey;let i=null;return n&&(i=co.wrapMatrixCell(n,t,e,s)),null!=i?i:t}setControl(e){e&&(this.control=e)}setContent(e){e&&(this.content=e)}}class vo extends mo{constructor(e){super(e),this.updateValueOnEvent=e=>{a.isTwoValueEquals(this.questionBase.value,e.target.value,!1,!0,!1)||this.setValueCore(e.target.value)},this.updateValueOnEvent=this.updateValueOnEvent.bind(this)}get question(){return this.questionBase}setValueCore(e){this.questionBase.value=e}getValueCore(){return this.questionBase.value}updateDomElement(){if(this.control){const e=this.control,t=this.getValueCore();a.isTwoValueEquals(t,e.value,!1,!0,!1)||(e.value=this.getValue(t))}super.updateDomElement()}getValue(e){return a.isValueEmpty(e)?"":e}}class fo extends Jr{constructor(e){super(e),this.svgIconRef={current:null}}updateSvg(){this.props.iconName&&function(e,t,s,n,r,a){if(!r)return;"auto"!==e&&(r.style.width=(e||t||16)+"px",r.style.height=(e||s||16)+"px");const o=r.childNodes[0],l=function(e){const t=function(e){let t=xt.customIcons[e];return t?nt(t):(e=nt(e),t=xt.customIcons[e],t||null)}(e);return t||nt(e)}(n);o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+l);let u=r.getElementsByTagName("title")[0];a?(u||(u=i.getDocument().createElementNS("http://www.w3.org/2000/svg","title"),r.appendChild(u)),u.textContent=a):u&&r.removeChild(u)}(this.props.size,this.props.width,this.props.height,this.props.iconName,this.svgIconRef.current,this.props.title)}componentDidUpdate(){this.updateSvg()}render(){let e="sv-svg-icon";return this.props.className&&(e+=" "+this.props.className),this.props.iconName?Gr("svg",{className:e,style:this.props.style,onClick:this.props.onClick,ref:this.svgIconRef,role:"presentation"},Gr("use",null)):null}componentDidMount(){this.updateSvg()}}ho.Instance.registerElement("sv-svg-icon",e=>Gr(fo,e));class bo extends Jr{constructor(e){super(e)}render(){return Gr("div",{className:`sv-action-bar-separator ${this.props.cssClasses}`})}}ho.Instance.registerElement("sv-action-bar-separator",e=>Gr(bo,e));class yo extends po{constructor(e){super(e),this.ref={current:null}}get item(){return this.props.item}getStateElement(){return this.item}renderElement(){const e=this.item.getActionRootCss(),t=this.item.needSeparator?Gr(bo,null):null,s=ho.Instance.createElement(this.item.component||"sv-action-bar-item",{item:this.item});return Gr("div",{className:e,id:this.item.id,ref:this.ref},Gr("div",{className:"sv-action__content"},t,s))}componentWillUnmount(){super.componentWillUnmount(),this.item.updateModeCallback=void 0}componentDidMount(){super.componentDidMount(),this.item.updateModeCallback=(e,t)=>{queueMicrotask(()=>{uo?uo(()=>{this.item.mode=e}):this.item.mode=e,queueMicrotask(()=>{t(e,this.ref.current)})})},this.item.afterRender()}}class Co extends po{get item(){return this.props.item}getStateElement(){return this.item}renderElement(){return Gr(Kr,null,this.renderInnerButton())}renderText(){return this.item.hasTitle?Gr("span",{className:this.item.getActionBarItemTitleCss()},this.item.title):null}renderButtonContent(){const e=this.renderText(),t=this.item.iconName?Gr(fo,{className:this.item.cssClasses.itemIcon,size:this.item.iconSize,iconName:this.item.iconName,title:this.item.tooltip||this.item.title}):null;return Gr(Kr,null,t,e)}renderInnerButton(){const e=this.item.getActionBarItemCss(),t=this.item.tooltip||this.item.title,s=this.renderButtonContent(),n=this.item.disableTabStop?-1:void 0;return Mo(Gr("button",{className:e,type:"button",disabled:this.item.disabled,onMouseDown:e=>this.item.doMouseDown(e),onFocus:e=>this.item.doFocus(e),onClick:e=>this.item.doAction(e),title:t,tabIndex:n,"aria-checked":this.item.ariaChecked,"aria-expanded":this.item.ariaExpanded,role:this.item.ariaRole},s),this.item,{processEsc:!1})}}ho.Instance.registerElement("sv-action-bar-item",e=>Gr(Co,e));class wo extends po{constructor(e){super(e),this.containerRef={current:null},this.createModel()}get model(){return this.props.model}getStateElement(){return this.model}createModel(){var e;this.popup=(e=this.props.model).isModal?new pr(e):new cr(e)}setTargetElement(){const e=this.containerRef.current;this.popup.setComponentElement(e)}componentDidMount(){super.componentDidMount(),this.setTargetElement()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.setTargetElement()}componentWillUnmount(){super.componentWillUnmount(),this.popup.resetComponentElement()}shouldComponentUpdate(e,t){var s;if(!super.shouldComponentUpdate(e,t))return!1;const n=e.model!==this.popup.model;return n&&(null===(s=this.popup)||void 0===s||s.dispose(),this.createModel()),n}render(){let e;return this.popup.model=this.model,e=this.model.isModal?Gr(xo,{model:this.popup}):Gr(_o,{model:this.popup}),Gr("div",{ref:this.containerRef},e)}}ho.Instance.registerElement("sv-popup",e=>Gr(wo,e));class xo extends po{constructor(e){super(e),this.handleKeydown=e=>{this.model.onKeyDown(e)},this.clickInside=e=>{e.stopPropagation()}}get model(){return this.props.model}getStateElement(){return this.model}componentDidUpdate(e,t){super.componentDidUpdate(e,t),!this.model.isPositionSet&&this.model.isVisible&&this.model.updateOnShowing()}renderContainer(e){const t=e.showHeader?this.renderHeaderPopup(e):null,s=e.title?this.renderHeaderContent():null,n=this.renderContent(),i=e.showFooter?this.renderFooter(this.model):null;return Gr("div",{className:"sv-popup__container",style:{left:e.left,top:e.top,height:e.height,width:e.width,minWidth:e.minWidth},onClick:e=>{this.clickInside(e)}},t,Gr("div",{className:"sv-popup__body-content"},s,Gr("div",{className:"sv-popup__scrolling-content"},n),i))}renderHeaderContent(){return Gr("div",{className:"sv-popup__body-header"},this.model.title)}renderContent(){return Gr("div",{className:"sv-popup__content"},ho.Instance.createElement(this.model.contentComponentName,this.model.contentComponentData))}renderHeaderPopup(e){return null}renderFooter(e){return Gr("div",{className:"sv-popup__body-footer"},Gr(Io,{model:e.footerToolbar}))}render(){const e=this.renderContainer(this.model);return Gr("div",{tabIndex:-1,className:(new fe).append("sv-popup").append(this.model.styleClass).toString(),style:{display:this.model.isVisible?"":"none"},onClick:e=>{this.model.clickOutside(e)},onBlur:e=>{this.model.blur(e)},onKeyDown:this.handleKeydown},e)}componentDidMount(){super.componentDidMount(),this.model.isVisible&&this.model.updateOnShowing()}}class _o extends xo{renderHeaderPopup(e){const t=e;return t?Gr("span",{style:{left:t.pointerTarget.left,top:t.pointerTarget.top},className:"sv-popup__pointer"}):null}}class Vo extends Co{constructor(e){super(e)}renderInnerButton(){return Gr(Kr,null,super.renderInnerButton(),Gr(wo,{model:this.item.popupModel}))}componentDidMount(){this.viewModel=new Ne(this.item)}componentWillUnmount(){super.componentWillUnmount(),this.viewModel.dispose()}}ho.Instance.registerElement("sv-action-bar-item-dropdown",e=>Gr(Vo,e));class Io extends po{constructor(e){super(e),this.rootRef={current:null}}get handleClick(){return void 0===this.props.handleClick||this.props.handleClick}get model(){return this.props.model}componentDidMount(){if(super.componentDidMount(),!this.model.hasVisibleActions)return;const e=this.rootRef.current;e&&this.model.initResponsivityManager(e,e=>{setTimeout(e,100)})}componentWillUnmount(){super.componentWillUnmount(),this.model.resetResponsivityManager()}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),e.model!=this.props.model&&e.model.resetResponsivityManager(),this.model.hasVisibleActions){const e=this.rootRef.current;e&&this.model.initResponsivityManager(e,e=>{setTimeout(e,100)})}}getStateElement(){return this.model}renderElement(){if(!this.model.hasActions)return null;const e=this.renderItems();return Gr("div",{ref:this.rootRef,style:this.model.getRootStyle(),className:this.model.getRootCss(),onClick:this.handleClick?function(e){e.stopPropagation()}:void 0},e)}renderItems(){return this.model.renderedActions.concat([]).map((e,t)=>Gr(yo,{item:e,key:e.renderedId}))}}ho.Instance.registerElement("sv-action-bar",e=>Gr(Io,e));class So extends Jr{constructor(e){super(e)}get cssClasses(){return this.props.cssClasses}get element(){return this.props.element}render(){return this.element.isTitleRenderedAsString?po.renderLocString(this.element.locRenderedTitle):Gr(Kr,null,this.renderTitleSpans(this.element.getTitleOwner(),this.cssClasses))}renderTitleSpans(e,t){var s=e=>Gr("span",{"data-key":e,key:e}," "),n=[];e.isRequireTextOnStart&&(n.push(this.renderRequireText(e)),n.push(s("req-sp")));var i=e.no;return i&&(n.push(Gr("span",{"data-key":"q_num",key:"q_num",className:e.cssTitleNumber,style:{position:"static"},"aria-hidden":!0},i)),n.push(s("num-sp"))),e.isRequireTextBeforeTitle&&(n.push(this.renderRequireText(e)),n.push(s("req-sp"))),n.push(po.renderLocString(e.locRenderedTitle,null,"q_title")),e.isRequireTextAfterTitle&&(n.push(s("req-sp")),n.push(this.renderRequireText(e))),n}renderRequireText(e){return Gr("span",{"data-key":"req-text",key:"req-text",className:e.cssRequiredMark,"aria-hidden":!0},e.requiredMark)}}class Po extends Jr{get cssClasses(){return this.props.cssClasses}get element(){return this.props.element}render(){const e=Gr(So,{element:this.element,cssClasses:this.cssClasses});return this.element.hasTitleActions?Gr("div",{className:"sv-title-actions"},Gr("span",{className:"sv-title-actions__title"},e),Gr(Io,{model:this.element.getTitleToolbar()})):e}}Kt.Instance.registerRenderer("element","title-actions","sv-title-actions"),ho.Instance.registerElement("sv-title-actions",e=>Gr(Po,e));class To extends Jr{constructor(e){super(e)}get element(){return this.props.element}renderTitleExpandableSvg(){if(!this.element.getCssTitleExpandableSvg())return null;let e=this.element.isExpanded?"icon-collapse-16x16":"icon-expand-16x16";return Gr(fo,{className:this.element.getCssTitleExpandableSvg(),iconName:e,size:"auto"})}render(){const e=this.element;if(!e||!e.hasTitle)return null;const t=e.titleAriaLabel||void 0,s=this.renderTitleExpandableSvg(),n=Gr(Po,{element:e,cssClasses:e.cssClasses});let i;return e.hasTitleEvents&&(i=e=>{lt(e.nativeEvent)}),Gr(e.titleTagName,{className:e.cssTitle,id:e.ariaTitleId,"aria-label":t,tabIndex:e.titleTabIndex,"aria-expanded":e.titleAriaExpanded,role:e.titleAriaRole,onClick:undefined,onKeyUp:i},s,n)}}class Eo extends Jr{constructor(e){super(e),this.state={changed:0},this.rootRef={current:null}}get survey(){return this.props.survey}get css(){return this.survey.css}componentDidMount(){const e=this;this.survey.afterRenderHeader(this.rootRef.current),this.survey.locLogo.onChanged=function(){e.setState({changed:e.state.changed+1})}}componentWillUnmount(){this.survey.locLogo.onChanged=function(){}}renderTitle(){if(!this.survey.renderedHasTitle)return null;const e=po.renderLocString(this.survey.locDescription);return Gr("div",{className:this.css.headerText,style:{maxWidth:this.survey.titleMaxWidth}},Gr(To,{element:this.survey}),this.survey.renderedHasDescription?Gr("div",{className:this.css.description},e):null)}renderLogoImage(e){if(!e)return null;const t=this.survey.getElementWrapperComponentName(this.survey,"logo-image"),s=this.survey.getElementWrapperComponentData(this.survey,"logo-image");return ho.Instance.createElement(t,{data:s})}render(){return this.survey.renderedHasHeader?Gr("div",{className:this.css.header,ref:this.rootRef},this.renderLogoImage(this.survey.isLogoBefore),this.renderTitle(),this.renderLogoImage(this.survey.isLogoAfter),Gr("div",{className:this.css.headerClose})):null}}ho.Instance.registerElement("survey-header",e=>Gr(Eo,e));class Ro{constructor(){this.creatorHash={}}registerQuestion(e,t){this.creatorHash[e]=t}getAllTypes(){var e=new Array;for(var t in this.creatorHash)e.push(t);return e.sort()}createQuestion(e,t){var s=this.creatorHash[e];return null==s?null:s(t)}}Ro.Instance=new Ro;class ko extends Jr{render(){return Gr("div",{className:"sv-brand-info"},Gr("a",{className:"sv-brand-info__logo",href:"https://surveyjs.io/?utm_source=built-in_links&utm_medium=online_survey_tool&utm_campaign=landing_page"},Gr("img",{src:"https://surveyjs.io/Content/Images/poweredby.svg"})),Gr("div",{className:"sv-brand-info__text"},"Try and see how easy it is to ",Gr("a",{href:"https://surveyjs.io/create-survey?utm_source=built-in_links&utm_medium=online_survey_tool&utm_campaign=create_survey"},"create a survey")),Gr("div",{className:"sv-brand-info__terms"},Gr("a",{href:"https://surveyjs.io/TermsOfUse"},"Terms of Use & Privacy Statement")))}}class Ao extends po{get notifier(){return this.props.notifier}getStateElement(){return this.notifier}renderElement(){if(!this.notifier.isDisplayed)return null;const e={visibility:this.notifier.active?"visible":"hidden"};return Gr("div",{className:this.notifier.css,style:e,role:"alert","aria-live":"polite"},Gr("span",null,this.notifier.message),Gr(Io,{model:this.notifier.actionBar}))}}ho.Instance.registerElement("sv-notifier",e=>Gr(Ao,e));class Lo extends Jr{render(){const e=this.props.survey.getContainerContent(this.props.container),t=!1!==this.props.needRenderWrapper;return 0==e.length?null:t?Gr("div",{className:"sv-components-column sv-components-container-"+this.props.container},e.map(e=>ho.Instance.createElement(e.component,{survey:this.props.survey,model:e.data,container:this.props.container,key:e.id}))):Gr(Kr,null,e.map(e=>ho.Instance.createElement(e.component,{survey:this.props.survey,model:e.data,container:this.props.container,key:e.id})))}}ho.Instance.registerElement("sv-components-container",e=>Gr(Lo,e));class Do extends Jr{constructor(e){super(e),this.onIconsChanged=()=>{this.containerRef.current&&(this.containerRef.current.innerHTML=Pr.iconsRenderedHtml())},this.containerRef={current:null}}componentDidMount(){this.onIconsChanged(),Pr.onIconsChanged.add(this.onIconsChanged)}componentWillUnmount(){Pr.onIconsChanged.remove(this.onIconsChanged)}render(){return Gr("svg",{style:{display:"none"},id:"sv-icon-holder-global-container",ref:this.containerRef})}}class No extends po{constructor(e){super(e),this.isInitialized=!1,this.init=()=>{this.isInitialized||(xt.showDialog=(e,t)=>this.showDialog(e,t),this.isInitialized=!0)},this.clean=()=>{this.isInitialized&&(xt.showDialog=void 0,this.isInitialized=!1)},this.state={changed:0},this.descriptor={init:this.init,clean:this.clean}}static addModalDescriptor(e){xt.showDialog||e.init(),this.modalDescriptors.push(e)}static removeModalDescriptor(e){e.clean(),this.modalDescriptors.splice(this.modalDescriptors.indexOf(e),1),!xt.showDialog&&this.modalDescriptors[0]&&this.modalDescriptors[0].init()}renderElement(){return this.model?function(e,t){var s=Gr(Wa,{__v:e,h:t});return s.containerInfo=t,s}(Gr(xo,{model:this.model}),this.model.container):null}showDialog(e,t){return this.model=function(e,t){var s;const n=Object.assign({},e);n.verticalPosition="top",n.horizontalPosition="left",n.showPointer=!1,n.isModal=!0,n.displayMode=e.displayMode||"popup";const r=new Re(e.componentName,e.data,n);r.isFocusedContent=null===(s=e.isFocusedContent)||void 0===s||s;const a=new pr(r);if(t&&t.appendChild){var o=i.createElement("div");t.appendChild(o),a.setComponentElement(o)}a.container||a.initializePopupContainer();const l=(e,t)=>{t.isVisible||o&&a.resetComponentElement(),a.onVisibilityChanged.remove(l)};return a.onVisibilityChanged.add(l),a}(e,t),this.model.onVisibilityChanged.add((e,t)=>{t.isVisible||(this.model.dispose(),this.model=void 0,this.setState({changed:this.state.changed+1}))}),this.model.model.isVisible=!0,this.setState({changed:this.state.changed+1}),this.model}componentDidMount(){No.addModalDescriptor(this.descriptor)}componentWillUnmount(){this.model&&(this.model.dispose(),this.model=void 0),No.removeModalDescriptor(this.descriptor)}}No.modalDescriptors=[];var Oo={modernbooleancheckchecked:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><polygon points="19,10 14,10 14,5 10,5 10,10 5,10 5,14 10,14 10,19 14,19 14,14 19,14 "></polygon></svg>',modernbooleancheckind:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><path d="M22,0H2C0.9,0,0,0.9,0,2v20c0,1.1,0.9,2,2,2h20c1.1,0,2-0.9,2-2V2C24,0.9,23.1,0,22,0z M21,18L6,3h15V18z M3,6l15,15H3V6z"></path></svg>',modernbooleancheckunchecked:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><rect x="5" y="10" width="14" height="4"></rect></svg>',moderncheck:'<svg viewBox="0 0 24 24"><path d="M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"></path></svg>',modernradio:'<svg viewBox="-12 -12 24 24"><circle r="6" cx="0" cy="0"></circle></svg>',progressbutton:'<svg viewBox="0 0 10 10"><polygon points="2,2 0,4 5,9 10,4 8,2 5,5 "></polygon></svg>',removefile:'<svg viewBox="0 0 16 16"><path d="M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z M11,10l-1,1L8,9l-2,2l-1-1l2-2L5,6l1-1l2,2l2-2l1,1L9,8 L11,10z"></path></svg>',timercircle:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 160 160"><circle cx="80" cy="80" r="70" style="stroke: var(--sd-timer-stroke-background-color); stroke-width: var(--sd-timer-stroke-background-width)" stroke-dasharray="none" stroke-dashoffset="none"></circle><circle cx="80" cy="80" r="70"></circle></svg>',"add-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.75 12C15.75 12.41 15.41 12.75 15 12.75H12.75V15C12.75 15.41 12.41 15.75 12 15.75C11.59 15.75 11.25 15.41 11.25 15V12.75H9C8.59 12.75 8.25 12.41 8.25 12C8.25 11.59 8.59 11.25 9 11.25H11.25V9C11.25 8.59 11.59 8.25 12 8.25C12.41 8.25 12.75 8.59 12.75 9V11.25H15C15.41 11.25 15.75 11.59 15.75 12ZM21.75 12C21.75 17.38 17.38 21.75 12 21.75C6.62 21.75 2.25 17.38 2.25 12C2.25 6.62 6.62 2.25 12 2.25C17.38 2.25 21.75 6.62 21.75 12ZM20.25 12C20.25 7.45 16.55 3.75 12 3.75C7.45 3.75 3.75 7.45 3.75 12C3.75 16.55 7.45 20.25 12 20.25C16.55 20.25 20.25 16.55 20.25 12Z"></path></svg>',"arrowleft-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.7475 7.9975C14.7475 8.4075 14.4075 8.7475 13.9975 8.7475H3.8075L7.5275 12.4675C7.8175 12.7575 7.8175 13.2375 7.5275 13.5275C7.3775 13.6775 7.1875 13.7475 6.9975 13.7475C6.8075 13.7475 6.6175 13.6775 6.4675 13.5275L1.4675 8.5275C1.1775 8.2375 1.1775 7.7575 1.4675 7.4675L6.4675 2.4675C6.7575 2.1775 7.2375 2.1775 7.5275 2.4675C7.8175 2.7575 7.8175 3.2375 7.5275 3.5275L3.8075 7.2475H13.9975C14.4075 7.2475 14.7475 7.5875 14.7475 7.9975Z"></path></svg>',"arrowright-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.53 8.5275L9.53 13.5275C9.38 13.6775 9.19 13.7475 9 13.7475C8.81 13.7475 8.62 13.6775 8.47 13.5275C8.18 13.2375 8.18 12.7575 8.47 12.4675L12.19 8.7475H2C1.59 8.7475 1.25 8.4075 1.25 7.9975C1.25 7.5875 1.59 7.2475 2 7.2475H12.19L8.47 3.5275C8.18 3.2375 8.18 2.7575 8.47 2.4675C8.76 2.1775 9.24 2.1775 9.53 2.4675L14.53 7.4675C14.82 7.7575 14.82 8.2375 14.53 8.5275Z"></path></svg>',"camera-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.19 4.25H17.12C16.72 4.25 16.35 4.03 16.17 3.67C15.73 2.8 14.86 2.25 13.88 2.25H10.12C9.14 2.25 8.27 2.79 7.83 3.67C7.65 4.03 7.29 4.25 6.88 4.25H4.81C3.4 4.25 2.25 5.4 2.25 6.81V18.19C2.25 19.6 3.4 20.75 4.81 20.75H19.19C20.6 20.75 21.75 19.6 21.75 18.19V6.81C21.75 5.4 20.6 4.25 19.19 4.25ZM20.25 18.19C20.25 18.77 19.78 19.25 19.19 19.25H4.81C4.23 19.25 3.75 18.78 3.75 18.19V6.81C3.75 6.23 4.22 5.75 4.81 5.75H6.88C7.86 5.75 8.73 5.21 9.17 4.33C9.35 3.97 9.71 3.75 10.12 3.75H13.88C14.28 3.75 14.65 3.97 14.83 4.33C15.27 5.2 16.14 5.75 17.12 5.75H19.19C19.77 5.75 20.25 6.22 20.25 6.81V18.19ZM12 6.25C8.83 6.25 6.25 8.83 6.25 12C6.25 15.17 8.83 17.75 12 17.75C15.17 17.75 17.75 15.17 17.75 12C17.75 8.83 15.17 6.25 12 6.25ZM12 16.25C9.66 16.25 7.75 14.34 7.75 12C7.75 9.66 9.66 7.75 12 7.75C14.34 7.75 16.25 9.66 16.25 12C16.25 14.34 14.34 16.25 12 16.25ZM14.75 12C14.75 13.52 13.52 14.75 12 14.75C11.59 14.75 11.25 14.41 11.25 14C11.25 13.59 11.59 13.25 12 13.25C12.69 13.25 13.25 12.69 13.25 12C13.25 11.59 13.59 11.25 14 11.25C14.41 11.25 14.75 11.59 14.75 12Z"></path></svg>',"camera-32x32":'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M25 7.25H22.19C21.73 7.25 21.31 7 21.09 6.59L20.89 6.22C20.23 5.01 18.97 4.25 17.59 4.25H14.41C13.03 4.25 11.77 5 11.11 6.22L10.91 6.6C10.69 7 10.27 7.26 9.81 7.26H7C4.93 7.26 3.25 8.94 3.25 11.01V24.01C3.25 26.08 4.93 27.76 7 27.76H25C27.07 27.76 28.75 26.08 28.75 24.01V11C28.75 8.93 27.07 7.25 25 7.25ZM27.25 24C27.25 25.24 26.24 26.25 25 26.25H7C5.76 26.25 4.75 25.24 4.75 24V11C4.75 9.76 5.76 8.75 7 8.75H9.81C10.82 8.75 11.75 8.2 12.23 7.31L12.43 6.94C12.82 6.21 13.58 5.76 14.41 5.76H17.59C18.42 5.76 19.18 6.21 19.57 6.94L19.77 7.31C20.25 8.2 21.18 8.76 22.19 8.76H25C26.24 8.76 27.25 9.77 27.25 11.01V24.01V24ZM16 10.25C12.28 10.25 9.25 13.28 9.25 17C9.25 20.72 12.28 23.75 16 23.75C19.72 23.75 22.75 20.72 22.75 17C22.75 13.28 19.72 10.25 16 10.25ZM16 22.25C13.11 22.25 10.75 19.89 10.75 17C10.75 14.11 13.11 11.75 16 11.75C18.89 11.75 21.25 14.11 21.25 17C21.25 19.89 18.89 22.25 16 22.25ZM19.75 17C19.75 19.07 18.07 20.75 16 20.75C15.59 20.75 15.25 20.41 15.25 20C15.25 19.59 15.59 19.25 16 19.25C17.24 19.25 18.25 18.24 18.25 17C18.25 16.59 18.59 16.25 19 16.25C19.41 16.25 19.75 16.59 19.75 17Z"></path></svg>',"cancel-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.8099 11.75L15.2799 9.28C15.5699 8.99 15.5699 8.51 15.2799 8.22C14.9899 7.93 14.5099 7.93 14.2199 8.22L11.7499 10.69L9.27994 8.22C8.98994 7.93 8.50994 7.93 8.21994 8.22C7.92994 8.51 7.92994 8.99 8.21994 9.28L10.6899 11.75L8.21994 14.22C7.92994 14.51 7.92994 14.99 8.21994 15.28C8.36994 15.43 8.55994 15.5 8.74994 15.5C8.93994 15.5 9.12994 15.43 9.27994 15.28L11.7499 12.81L14.2199 15.28C14.3699 15.43 14.5599 15.5 14.7499 15.5C14.9399 15.5 15.1299 15.43 15.2799 15.28C15.5699 14.99 15.5699 14.51 15.2799 14.22L12.8099 11.75Z"></path></svg>',"check-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.0275 5.0275L6.5275 12.5275C6.3775 12.6775 6.1875 12.7475 5.9975 12.7475C5.8075 12.7475 5.6175 12.6775 5.4675 12.5275L2.4675 9.5275C2.1775 9.2375 2.1775 8.7575 2.4675 8.4675C2.7575 8.1775 3.2375 8.1775 3.5275 8.4675L5.9975 10.9375L12.9675 3.9675C13.2575 3.6775 13.7375 3.6775 14.0275 3.9675C14.3175 4.2575 14.3175 4.7375 14.0275 5.0275Z"></path></svg>',"check-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.5275 7.5275L9.5275 17.5275C9.3775 17.6775 9.1875 17.7475 8.9975 17.7475C8.8075 17.7475 8.6175 17.6775 8.4675 17.5275L4.4675 13.5275C4.1775 13.2375 4.1775 12.7575 4.4675 12.4675C4.7575 12.1775 5.2375 12.1775 5.5275 12.4675L8.9975 15.9375L18.4675 6.4675C18.7575 6.1775 19.2375 6.1775 19.5275 6.4675C19.8175 6.7575 19.8175 7.2375 19.5275 7.5275Z"></path></svg>',"chevrondown-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16.5275 10.5275L12.5275 14.5275C12.3775 14.6775 12.1875 14.7475 11.9975 14.7475C11.8075 14.7475 11.6175 14.6775 11.4675 14.5275L7.4675 10.5275C7.1775 10.2375 7.1775 9.7575 7.4675 9.4675C7.7575 9.1775 8.2375 9.1775 8.5275 9.4675L11.9975 12.9375L15.4675 9.4675C15.7575 9.1775 16.2375 9.1775 16.5275 9.4675C16.8175 9.7575 16.8175 10.2375 16.5275 10.5275Z"></path></svg>',"chevronright-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.35 8.34627L7.35 12.3463C7.25 12.4463 7.12 12.4963 7 12.4963C6.88 12.4963 6.74 12.4463 6.65 12.3463C6.45 12.1463 6.45 11.8363 6.65 11.6363L10.3 7.98627L6.65 4.34627C6.45 4.15627 6.45 3.83627 6.65 3.64627C6.85 3.45627 7.16 3.44627 7.35 3.64627L11.35 7.64627C11.55 7.84627 11.55 8.15627 11.35 8.35627V8.34627Z"></path></svg>',"clear-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12.35 11.65C12.55 11.85 12.55 12.16 12.35 12.36C12.25 12.46 12.12 12.51 12 12.51C11.88 12.51 11.74 12.46 11.65 12.36L8 8.71L4.35 12.36C4.25 12.46 4.12 12.51 4 12.51C3.88 12.51 3.74 12.46 3.65 12.36C3.45 12.16 3.45 11.85 3.65 11.65L7.3 8L3.65 4.35C3.45 4.16 3.45 3.84 3.65 3.65C3.85 3.46 4.16 3.45 4.35 3.65L8 7.3L11.65 3.65C11.85 3.45 12.16 3.45 12.36 3.65C12.56 3.85 12.56 4.16 12.36 4.36L8.71 8.01L12.36 11.66L12.35 11.65Z"></path></svg>',"clear-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.12 10.9325C20.64 10.4125 20.93 9.7225 20.93 8.9925C20.93 8.2625 20.64 7.5725 20.12 7.0525L16.95 3.8825C15.88 2.8125 14.13 2.8125 13.06 3.8825L3.88 13.0525C3.36 13.5725 3.07 14.2625 3.07 14.9925C3.07 15.7225 3.36 16.4125 3.88 16.9325L5.64 18.6925C6.57 19.6225 7.78 20.0825 9 20.0825C10.22 20.0825 11.43 19.6225 12.36 18.6925L20.12 10.9325ZM14.12 4.9325C14.36 4.6925 14.67 4.5625 15 4.5625C15.33 4.5625 15.65 4.6925 15.88 4.9325L19.05 8.1025C19.54 8.5925 19.54 9.3825 19.05 9.8725L12.99 15.9325L8.05 10.9925L14.12 4.9325ZM6.7 17.6325L4.94 15.8725C4.45 15.3825 4.45 14.5925 4.94 14.1025L7 12.0425L11.94 16.9825L11.3 17.6225C10.07 18.8525 7.93 18.8525 6.7 17.6225V17.6325ZM22.75 20.9925C22.75 21.4025 22.41 21.7425 22 21.7425H14C13.59 21.7425 13.25 21.4025 13.25 20.9925C13.25 20.5825 13.59 20.2425 14 20.2425H22C22.41 20.2425 22.75 20.5825 22.75 20.9925ZM4.75 20.9925C4.75 21.4025 4.41 21.7425 4 21.7425H2C1.59 21.7425 1.25 21.4025 1.25 20.9925C1.25 20.5825 1.59 20.2425 2 20.2425H4C4.41 20.2425 4.75 20.5825 4.75 20.9925Z"></path></svg>',"close-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.5275 12.4675C13.8175 12.7575 13.8175 13.2375 13.5275 13.5275C13.3775 13.6775 13.1875 13.7475 12.9975 13.7475C12.8075 13.7475 12.6175 13.6775 12.4675 13.5275L7.9975 9.0575L3.5275 13.5275C3.3775 13.6775 3.1875 13.7475 2.9975 13.7475C2.8075 13.7475 2.6175 13.6775 2.4675 13.5275C2.1775 13.2375 2.1775 12.7575 2.4675 12.4675L6.9375 7.9975L2.4675 3.5275C2.1775 3.2375 2.1775 2.7575 2.4675 2.4675C2.7575 2.1775 3.2375 2.1775 3.5275 2.4675L7.9975 6.9375L12.4675 2.4675C12.7575 2.1775 13.2375 2.1775 13.5275 2.4675C13.8175 2.7575 13.8175 3.2375 13.5275 3.5275L9.0575 7.9975L13.5275 12.4675Z"></path></svg>',"close-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.5275 18.4675C19.8175 18.7575 19.8175 19.2375 19.5275 19.5275C19.3775 19.6775 19.1875 19.7475 18.9975 19.7475C18.8075 19.7475 18.6175 19.6775 18.4675 19.5275L11.9975 13.0575L5.5275 19.5275C5.3775 19.6775 5.1875 19.7475 4.9975 19.7475C4.8075 19.7475 4.6175 19.6775 4.4675 19.5275C4.1775 19.2375 4.1775 18.7575 4.4675 18.4675L10.9375 11.9975L4.4675 5.5275C4.1775 5.2375 4.1775 4.7575 4.4675 4.4675C4.7575 4.1775 5.2375 4.1775 5.5275 4.4675L11.9975 10.9375L18.4675 4.4675C18.7575 4.1775 19.2375 4.1775 19.5275 4.4675C19.8175 4.7575 19.8175 5.2375 19.5275 5.5275L13.0575 11.9975L19.5275 18.4675Z"></path></svg>',"collapse-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 8C11.75 8.41 11.41 8.75 11 8.75H5C4.59 8.75 4.25 8.41 4.25 8C4.25 7.59 4.59 7.25 5 7.25H11C11.41 7.25 11.75 7.59 11.75 8Z"></path></svg>',"collapsedetails-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 8C11.75 8.41 11.41 8.75 11 8.75H5C4.59 8.75 4.25 8.41 4.25 8C4.25 7.59 4.59 7.25 5 7.25H11C11.41 7.25 11.75 7.59 11.75 8Z"></path></svg>',"delete-16x16":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13 3.25H10.75V3C10.75 2.04 9.96 1.25 9 1.25H7C6.04 1.25 5.25 2.04 5.25 3V3.25H3C2.59 3.25 2.25 3.59 2.25 4C2.25 4.41 2.59 4.75 3 4.75H3.25V13C3.25 13.96 4.04 14.75 5 14.75H11C11.96 14.75 12.75 13.96 12.75 13V4.75H13C13.41 4.75 13.75 4.41 13.75 4C13.75 3.59 13.41 3.25 13 3.25ZM6.75 3C6.75 2.86 6.86 2.75 7 2.75H9C9.14 2.75 9.25 2.86 9.25 3V3.25H6.75V3ZM11.25 13C11.25 13.14 11.14 13.25 11 13.25H5C4.86 13.25 4.75 13.14 4.75 13V4.75H11.25V13ZM9.25 6.25C9.66 6.25 10 6.59 10 7V11C10 11.41 9.66 11.75 9.25 11.75C8.84 11.75 8.5 11.41 8.5 11V7C8.5 6.59 8.84 6.25 9.25 6.25ZM7.5 7V11C7.5 11.41 7.16 11.75 6.75 11.75C6.34 11.75 6 11.41 6 11V7C6 6.59 6.34 6.25 6.75 6.25C7.16 6.25 7.5 6.59 7.5 7Z"></path></svg>',"delete-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.75 9V17C12.75 17.41 12.41 17.75 12 17.75C11.59 17.75 11.25 17.41 11.25 17V9C11.25 8.59 11.59 8.25 12 8.25C12.41 8.25 12.75 8.59 12.75 9ZM14.25 9V17C14.25 17.41 14.59 17.75 15 17.75C15.41 17.75 15.75 17.41 15.75 17V9C15.75 8.59 15.41 8.25 15 8.25C14.59 8.25 14.25 8.59 14.25 9ZM9 8.25C8.59 8.25 8.25 8.59 8.25 9V17C8.25 17.41 8.59 17.75 9 17.75C9.41 17.75 9.75 17.41 9.75 17V9C9.75 8.59 9.41 8.25 9 8.25ZM20.75 6C20.75 6.41 20.41 6.75 20 6.75H18.75V18C18.75 19.52 17.52 20.75 16 20.75H8C6.48 20.75 5.25 19.52 5.25 18V6.75H4C3.59 6.75 3.25 6.41 3.25 6C3.25 5.59 3.59 5.25 4 5.25H8.25V4C8.25 3.04 9.04 2.25 10 2.25H14C14.96 2.25 15.75 3.04 15.75 4V5.25H20C20.41 5.25 20.75 5.59 20.75 6ZM9.75 5.25H14.25V4C14.25 3.86 14.14 3.75 14 3.75H10C9.86 3.75 9.75 3.86 9.75 4V5.25ZM17.25 6.75H6.75V18C6.75 18.69 7.31 19.25 8 19.25H16C16.69 19.25 17.25 18.69 17.25 18V6.75Z"></path></svg>',"drag-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 8.75C15.19 8.75 15.75 8.19 15.75 7.5C15.75 6.81 15.19 6.25 14.5 6.25C13.81 6.25 13.25 6.81 13.25 7.5C13.25 8.19 13.81 8.75 14.5 8.75ZM14.5 7.25C14.64 7.25 14.75 7.36 14.75 7.5C14.75 7.78 14.25 7.78 14.25 7.5C14.25 7.36 14.36 7.25 14.5 7.25ZM9.5 6.25C8.81 6.25 8.25 6.81 8.25 7.5C8.25 8.19 8.81 8.75 9.5 8.75C10.19 8.75 10.75 8.19 10.75 7.5C10.75 6.81 10.19 6.25 9.5 6.25ZM9.25 7.5C9.25 7.36 9.36 7.25 9.5 7.25C9.64 7.25 9.75 7.36 9.75 7.5C9.75 7.78 9.25 7.78 9.25 7.5ZM14.5 11.25C13.81 11.25 13.25 11.81 13.25 12.5C13.25 13.19 13.81 13.75 14.5 13.75C15.19 13.75 15.75 13.19 15.75 12.5C15.75 11.81 15.19 11.25 14.5 11.25ZM14.25 12.5C14.25 12.36 14.36 12.25 14.5 12.25C14.64 12.25 14.75 12.36 14.75 12.5C14.75 12.78 14.25 12.78 14.25 12.5ZM9.5 11.25C8.81 11.25 8.25 11.81 8.25 12.5C8.25 13.19 8.81 13.75 9.5 13.75C10.19 13.75 10.75 13.19 10.75 12.5C10.75 11.81 10.19 11.25 9.5 11.25ZM9.25 12.5C9.25 12.36 9.36 12.25 9.5 12.25C9.64 12.25 9.75 12.36 9.75 12.5C9.75 12.78 9.25 12.78 9.25 12.5ZM14.5 16.25C13.81 16.25 13.25 16.81 13.25 17.5C13.25 18.19 13.81 18.75 14.5 18.75C15.19 18.75 15.75 18.19 15.75 17.5C15.75 16.81 15.19 16.25 14.5 16.25ZM14.25 17.5C14.25 17.36 14.36 17.25 14.5 17.25C14.64 17.25 14.75 17.36 14.75 17.5C14.75 17.78 14.25 17.78 14.25 17.5ZM9.5 16.25C8.81 16.25 8.25 16.81 8.25 17.5C8.25 18.19 8.81 18.75 9.5 18.75C10.19 18.75 10.75 18.19 10.75 17.5C10.75 16.81 10.19 16.25 9.5 16.25ZM9.25 17.5C9.25 17.36 9.36 17.25 9.5 17.25C9.64 17.25 9.75 17.36 9.75 17.5C9.75 17.78 9.25 17.78 9.25 17.5Z"></path></svg>',"draghorizontal-24x16":'<svg viewBox="0 0 24 16" xmlns="http://www.w3.org/2000/svg"><path d="M17.5 9.25C16.81 9.25 16.25 9.81 16.25 10.5C16.25 11.19 16.81 11.75 17.5 11.75C18.19 11.75 18.75 11.19 18.75 10.5C18.75 9.81 18.19 9.25 17.5 9.25ZM17.25 10.5C17.25 10.36 17.36 10.25 17.5 10.25C17.64 10.25 17.75 10.36 17.75 10.5C17.75 10.78 17.25 10.78 17.25 10.5ZM17.5 6.75C18.19 6.75 18.75 6.19 18.75 5.5C18.75 4.81 18.19 4.25 17.5 4.25C16.81 4.25 16.25 4.81 16.25 5.5C16.25 6.19 16.81 6.75 17.5 6.75ZM17.5 5.25C17.64 5.25 17.75 5.36 17.75 5.5C17.75 5.78 17.25 5.78 17.25 5.5C17.25 5.36 17.36 5.25 17.5 5.25ZM12.5 9.25C11.81 9.25 11.25 9.81 11.25 10.5C11.25 11.19 11.81 11.75 12.5 11.75C13.19 11.75 13.75 11.19 13.75 10.5C13.75 9.81 13.19 9.25 12.5 9.25ZM12.25 10.5C12.25 10.36 12.36 10.25 12.5 10.25C12.64 10.25 12.75 10.36 12.75 10.5C12.75 10.78 12.25 10.78 12.25 10.5ZM12.5 4.25C11.81 4.25 11.25 4.81 11.25 5.5C11.25 6.19 11.81 6.75 12.5 6.75C13.19 6.75 13.75 6.19 13.75 5.5C13.75 4.81 13.19 4.25 12.5 4.25ZM12.25 5.5C12.25 5.36 12.36 5.25 12.5 5.25C12.64 5.25 12.75 5.36 12.75 5.5C12.75 5.78 12.25 5.78 12.25 5.5ZM7.5 9.25C6.81 9.25 6.25 9.81 6.25 10.5C6.25 11.19 6.81 11.75 7.5 11.75C8.19 11.75 8.75 11.19 8.75 10.5C8.75 9.81 8.19 9.25 7.5 9.25ZM7.25 10.5C7.25 10.36 7.36 10.25 7.5 10.25C7.64 10.25 7.75 10.36 7.75 10.5C7.75 10.78 7.25 10.78 7.25 10.5ZM7.5 4.25C6.81 4.25 6.25 4.81 6.25 5.5C6.25 6.19 6.81 6.75 7.5 6.75C8.19 6.75 8.75 6.19 8.75 5.5C8.75 4.81 8.19 4.25 7.5 4.25ZM7.25 5.5C7.25 5.36 7.36 5.25 7.5 5.25C7.64 5.25 7.75 5.36 7.75 5.5C7.75 5.78 7.25 5.78 7.25 5.5Z"></path></svg>',"editsmall-16x16":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.1209 3.05249L12.9509 2.88249C11.8809 1.81249 10.1309 1.81249 9.06089 2.88249L3.47089 8.46249C3.37089 8.56249 3.31089 8.68249 3.27089 8.81249L2.27089 12.8125C2.21089 13.0625 2.28089 13.3425 2.47089 13.5225C2.61089 13.6625 2.80089 13.7425 3.00089 13.7425C3.06089 13.7425 3.12089 13.7425 3.18089 13.7225L7.18089 12.7225C7.31089 12.6925 7.43089 12.6225 7.53089 12.5225L13.1209 6.93249C14.1909 5.86249 14.1909 4.11249 13.1209 3.04249V3.05249ZM6.62089 11.3125L4.04089 11.9625L4.69089 9.38249L8.01089 6.06249L9.95089 8.00249L6.63089 11.3225L6.62089 11.3125ZM12.0609 5.87249L11.0009 6.93249L9.06089 4.99249L10.1209 3.93249C10.6109 3.44249 11.4009 3.44249 11.8909 3.93249L12.0609 4.10249C12.5509 4.59249 12.5509 5.38249 12.0609 5.87249Z"></path></svg>',"expand-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 8C11.75 8.41 11.41 8.75 11 8.75H8.75V11C8.75 11.41 8.41 11.75 8 11.75C7.59 11.75 7.25 11.41 7.25 11V8.75H5C4.59 8.75 4.25 8.41 4.25 8C4.25 7.59 4.59 7.25 5 7.25H7.25V5C7.25 4.59 7.59 4.25 8 4.25C8.41 4.25 8.75 4.59 8.75 5V7.25H11C11.41 7.25 11.75 7.59 11.75 8Z"></path></svg>',"expanddetails-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 8C11.75 8.41 11.41 8.75 11 8.75H8.75V11C8.75 11.41 8.41 11.75 8 11.75C7.59 11.75 7.25 11.41 7.25 11V8.75H5C4.59 8.75 4.25 8.41 4.25 8C4.25 7.59 4.59 7.25 5 7.25H7.25V5C7.25 4.59 7.59 4.25 8 4.25C8.41 4.25 8.75 4.59 8.75 5V7.25H11C11.41 7.25 11.75 7.59 11.75 8Z"></path></svg>',"file-72x72":'<svg viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><path d="M62.83 12.83L53.17 3.17C52.7982 2.79866 52.357 2.50421 51.8714 2.30346C51.3858 2.1027 50.8654 1.99959 50.34 2H14C12.4087 2 10.8826 2.63214 9.75735 3.75736C8.63214 4.88258 8 6.4087 8 8V64C8 65.5913 8.63214 67.1174 9.75735 68.2426C10.8826 69.3679 12.4087 70 14 70H58C59.5913 70 61.1174 69.3679 62.2426 68.2426C63.3679 67.1174 64 65.5913 64 64V15.66C64.0004 15.1346 63.8973 14.6142 63.6965 14.1286C63.4958 13.643 63.2013 13.2018 62.83 12.83ZM52 4.83L61.17 14H56C54.9391 14 53.9217 13.5786 53.1716 12.8284C52.4214 12.0783 52 11.0609 52 10V4.83ZM62 64C62 65.0609 61.5786 66.0783 60.8284 66.8284C60.0783 67.5786 59.0609 68 58 68H14C12.9391 68 11.9217 67.5786 11.1716 66.8284C10.4214 66.0783 10 65.0609 10 64V8C10 6.93914 10.4214 5.92172 11.1716 5.17157C11.9217 4.42143 12.9391 4 14 4H50V10C50 11.5913 50.6321 13.1174 51.7574 14.2426C52.8826 15.3679 54.4087 16 56 16H62V64ZM22 26H50V28H22V26ZM22 32H50V34H22V32ZM22 38H50V40H22V38ZM22 44H50V46H22V44Z"></path></svg>',"flip-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.53 17.4775C14.82 17.7675 14.82 18.2475 14.53 18.5375L11.53 21.5375C11.38 21.6875 11.19 21.7575 11 21.7575C10.81 21.7575 10.62 21.6875 10.47 21.5375C10.18 21.2475 10.18 20.7675 10.47 20.4775L12.2 18.7475C12.13 18.7475 12.07 18.7475 12 18.7475C6.62 18.7475 2.25 15.7475 2.25 12.0575C2.25 10.2975 3.22 8.6375 4.99 7.3875C5.33 7.1475 5.8 7.2275 6.03 7.5675C6.27 7.9075 6.19 8.3775 5.85 8.6075C4.49 9.5675 3.74 10.7875 3.74 12.0575C3.74 14.9175 7.44 17.2475 11.99 17.2475C12.05 17.2475 12.11 17.2475 12.17 17.2475L10.46 15.5375C10.17 15.2475 10.17 14.7675 10.46 14.4775C10.75 14.1875 11.23 14.1875 11.52 14.4775L14.52 17.4775H14.53ZM12 5.2575C11.93 5.2575 11.87 5.2575 11.8 5.2575L13.53 3.5275C13.82 3.2375 13.82 2.7575 13.53 2.4675C13.24 2.1775 12.76 2.1775 12.47 2.4675L9.47 5.4675C9.18 5.7575 9.18 6.2375 9.47 6.5275L12.47 9.5275C12.62 9.6775 12.81 9.7475 13 9.7475C13.19 9.7475 13.38 9.6775 13.53 9.5275C13.82 9.2375 13.82 8.7575 13.53 8.4675L11.82 6.7575C11.88 6.7575 11.94 6.7575 12 6.7575C16.55 6.7575 20.25 9.0875 20.25 11.9475C20.25 13.2075 19.5 14.4375 18.14 15.3975C17.8 15.6375 17.72 16.1075 17.96 16.4475C18.11 16.6575 18.34 16.7675 18.57 16.7675C18.72 16.7675 18.87 16.7275 19 16.6275C20.77 15.3775 21.75 13.7175 21.75 11.9575C21.75 8.2675 17.38 5.2675 12 5.2675V5.2575Z"></path></svg>',"folder-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.72 9.24C21.45 8.92 21.12 8.67 20.75 8.5V8C20.75 6.48 19.52 5.25 18 5.25H10.65C10.32 4.1 9.26 3.25 8 3.25H6C4.48 3.25 3.25 4.48 3.25 6V18C3.25 19.52 4.48 20.75 6 20.75H18.33C19.66 20.75 20.8 19.8 21.04 18.49L22.31 11.49C22.46 10.69 22.24 9.86 21.72 9.24ZM4.75 18V6C4.75 5.31 5.31 4.75 6 4.75H8C8.69 4.75 9.25 5.31 9.25 6C9.25 6.41 9.59 6.75 10 6.75H18C18.69 6.75 19.25 7.31 19.25 8V8.25H9.27C7.94 8.25 6.8 9.2 6.56 10.51L5.29 17.51C5.19 18.07 5.27 18.64 5.51 19.15C5.06 18.96 4.75 18.52 4.75 18ZM20.83 11.22L19.56 18.22C19.45 18.81 18.94 19.25 18.33 19.25H8C7.63 19.25 7.28 19.09 7.04 18.8C6.8 18.51 6.7 18.14 6.77 17.78L8.04 10.78C8.15 10.19 8.66 9.75 9.27 9.75H19.6C19.97 9.75 20.32 9.91 20.56 10.2C20.8 10.49 20.9 10.86 20.83 11.22Z"></path></svg>',"fullsize-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12 3.25H4C3.04 3.25 2.25 4.04 2.25 5V11C2.25 11.96 3.04 12.75 4 12.75H12C12.96 12.75 13.75 11.96 13.75 11V5C13.75 4.04 12.96 3.25 12 3.25ZM12.25 11C12.25 11.14 12.14 11.25 12 11.25H4C3.86 11.25 3.75 11.14 3.75 11V5C3.75 4.86 3.86 4.75 4 4.75H12C12.14 4.75 12.25 4.86 12.25 5V11Z"></path></svg>',"image-48x48":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M33 10.25H15C12.38 10.25 10.25 12.38 10.25 15V33C10.25 35.62 12.38 37.75 15 37.75H33C35.62 37.75 37.75 35.62 37.75 33V15C37.75 12.38 35.62 10.25 33 10.25ZM36.25 33C36.25 34.79 34.79 36.25 33 36.25H15C13.21 36.25 11.75 34.79 11.75 33V15C11.75 13.21 13.21 11.75 15 11.75H33C34.79 11.75 36.25 13.21 36.25 15V33ZM30.5 14.25C28.71 14.25 27.25 15.71 27.25 17.5C27.25 19.29 28.71 20.75 30.5 20.75C32.29 20.75 33.75 19.29 33.75 17.5C33.75 15.71 32.29 14.25 30.5 14.25ZM30.5 19.25C29.54 19.25 28.75 18.46 28.75 17.5C28.75 16.54 29.54 15.75 30.5 15.75C31.46 15.75 32.25 16.54 32.25 17.5C32.25 18.46 31.46 19.25 30.5 19.25ZM29.26 26.28C28.94 25.92 28.49 25.71 28.01 25.7C27.54 25.68 27.07 25.87 26.73 26.2L24.95 27.94L22.28 25.23C21.94 24.89 21.5 24.71 21 24.71C20.52 24.71 20.06 24.93 19.74 25.28L14.74 30.78C14.25 31.3 14.12 32.06 14.41 32.72C14.69 33.36 15.28 33.75 15.95 33.75H32.07C32.74 33.75 33.33 33.35 33.61 32.72C33.89 32.06 33.77 31.31 33.29 30.79L29.27 26.29L29.26 26.28ZM32.22 32.12C32.18 32.2 32.13 32.25 32.06 32.25H15.94C15.87 32.25 15.81 32.21 15.78 32.12C15.77 32.09 15.71 31.93 15.83 31.8L20.84 26.29C20.9 26.22 20.99 26.21 21.02 26.21C21.06 26.21 21.14 26.22 21.2 26.29L24.4 29.54C24.69 29.83 25.16 29.84 25.46 29.54L27.77 27.27C27.83 27.21 27.9 27.2 27.94 27.2C28.01 27.2 28.06 27.21 28.13 27.28L32.16 31.79C32.16 31.79 32.16 31.79 32.17 31.8C32.29 31.93 32.23 32.09 32.22 32.12Z"></path></svg>',"loading-48x48":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_19679_369428)"><path opacity="0.1" d="M24 40C15.18 40 8 32.82 8 24C8 15.18 15.18 8 24 8C32.82 8 40 15.18 40 24C40 32.82 32.82 40 24 40ZM24 12C17.38 12 12 17.38 12 24C12 30.62 17.38 36 24 36C30.62 36 36 30.62 36 24C36 17.38 30.62 12 24 12Z" fill="black" fill-opacity="0.91"></path><path d="M10 26C8.9 26 8 25.1 8 24C8 15.18 15.18 8 24 8C25.1 8 26 8.9 26 10C26 11.1 25.1 12 24 12C17.38 12 12 17.38 12 24C12 25.1 11.1 26 10 26Z"></path></g><defs><clipPath id="clip0_19679_369428"><rect width="32" height="32" fill="white" transform="translate(8 8)"></rect></clipPath></defs></svg>',"maximize-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.75 3V7C13.75 7.41 13.41 7.75 13 7.75C12.59 7.75 12.25 7.41 12.25 7V4.81L9.53 7.53C9.38 7.68 9.19 7.75 9 7.75C8.81 7.75 8.62 7.68 8.47 7.53C8.18 7.24 8.18 6.76 8.47 6.47L11.19 3.75H9C8.59 3.75 8.25 3.41 8.25 3C8.25 2.59 8.59 2.25 9 2.25H13C13.1 2.25 13.19 2.27 13.29 2.31C13.47 2.39 13.62 2.53 13.7 2.72C13.74 2.81 13.76 2.91 13.76 3.01L13.75 3ZM7.53 8.47C7.24 8.18 6.76 8.18 6.47 8.47L3.75 11.19V9C3.75 8.59 3.41 8.25 3 8.25C2.59 8.25 2.25 8.59 2.25 9V13C2.25 13.1 2.27 13.19 2.31 13.29C2.39 13.47 2.53 13.62 2.72 13.7C2.81 13.74 2.91 13.76 3.01 13.76H7.01C7.42 13.76 7.76 13.42 7.76 13.01C7.76 12.6 7.42 12.26 7.01 12.26H4.82L7.54 9.54C7.83 9.25 7.83 8.77 7.54 8.48L7.53 8.47Z"></path></svg>',"minimize-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.75 8C13.75 8.41 13.41 8.75 13 8.75H3C2.59 8.75 2.25 8.41 2.25 8C2.25 7.59 2.59 7.25 3 7.25H13C13.41 7.25 13.75 7.59 13.75 8Z"></path></svg>',"more-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 10.25C11.04 10.25 10.25 11.04 10.25 12C10.25 12.96 11.04 13.75 12 13.75C12.96 13.75 13.75 12.96 13.75 12C13.75 11.04 12.96 10.25 12 10.25ZM11.75 12C11.75 11.86 11.86 11.75 12 11.75C12.14 11.75 12.25 11.86 12.25 12C12.25 12.28 11.75 12.28 11.75 12ZM19 10.25C18.04 10.25 17.25 11.04 17.25 12C17.25 12.96 18.04 13.75 19 13.75C19.96 13.75 20.75 12.96 20.75 12C20.75 11.04 19.96 10.25 19 10.25ZM18.75 12C18.75 11.86 18.86 11.75 19 11.75C19.14 11.75 19.25 11.86 19.25 12C19.25 12.28 18.75 12.28 18.75 12ZM5 10.25C4.04 10.25 3.25 11.04 3.25 12C3.25 12.96 4.04 13.75 5 13.75C5.96 13.75 6.75 12.96 6.75 12C6.75 11.04 5.96 10.25 5 10.25ZM4.75 12C4.75 11.86 4.86 11.75 5 11.75C5.14 11.75 5.25 11.86 5.25 12C5.25 12.28 4.75 12.28 4.75 12Z"></path></svg>',"navmenu-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.25 7C3.25 6.59 3.59 6.25 4 6.25H15C15.41 6.25 15.75 6.59 15.75 7C15.75 7.41 15.41 7.75 15 7.75H4C3.59 7.75 3.25 7.41 3.25 7ZM20 11.25H4C3.59 11.25 3.25 11.59 3.25 12C3.25 12.41 3.59 12.75 4 12.75H20C20.41 12.75 20.75 12.41 20.75 12C20.75 11.59 20.41 11.25 20 11.25ZM9 16.25H4C3.59 16.25 3.25 16.59 3.25 17C3.25 17.41 3.59 17.75 4 17.75H9C9.41 17.75 9.75 17.41 9.75 17C9.75 16.59 9.41 16.25 9 16.25Z"></path></svg>',"noimage-48x48":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M30.4975 14.2475C28.7075 14.2475 27.2475 15.7075 27.2475 17.4975C27.2475 19.2875 28.7075 20.7475 30.4975 20.7475C32.2875 20.7475 33.7475 19.2875 33.7475 17.4975C33.7475 15.7075 32.2875 14.2475 30.4975 14.2475ZM30.4975 19.2475C29.5375 19.2475 28.7475 18.4575 28.7475 17.4975C28.7475 16.5375 29.5375 15.7475 30.4975 15.7475C31.4575 15.7475 32.2475 16.5375 32.2475 17.4975C32.2475 18.4575 31.4575 19.2475 30.4975 19.2475ZM13.5175 11.2175C13.4375 10.8075 13.7075 10.4175 14.1175 10.3375C14.4275 10.2775 14.7175 10.2475 14.9975 10.2475H32.9975C35.6175 10.2475 37.7475 12.3775 37.7475 14.9975V32.9975C37.7475 33.2775 37.7175 33.5675 37.6575 33.8775C37.5875 34.2375 37.2775 34.4875 36.9175 34.4875C36.8675 34.4875 36.8275 34.4875 36.7775 34.4775C36.3675 34.3975 36.1075 34.0075 36.1775 33.5975C36.2175 33.3775 36.2375 33.1775 36.2375 32.9975V14.9975C36.2375 13.2075 34.7775 11.7475 32.9875 11.7475H14.9975C14.8075 11.7475 14.6175 11.7675 14.3975 11.8075C13.9875 11.8875 13.5975 11.6175 13.5175 11.2075V11.2175ZM34.4775 36.7775C34.5575 37.1875 34.2875 37.5775 33.8775 37.6575C33.5675 37.7175 33.2775 37.7475 32.9975 37.7475H14.9975C12.3775 37.7475 10.2475 35.6175 10.2475 32.9975V14.9975C10.2475 14.7175 10.2775 14.4275 10.3375 14.1175C10.4175 13.7075 10.8075 13.4375 11.2175 13.5175C11.6275 13.5975 11.8875 13.9875 11.8175 14.3975C11.7775 14.6175 11.7575 14.8175 11.7575 14.9975V32.9975C11.7575 34.7875 13.2175 36.2475 15.0075 36.2475H33.0075C33.1975 36.2475 33.3875 36.2275 33.6075 36.1875C34.0075 36.1075 34.4075 36.3775 34.4875 36.7875L34.4775 36.7775ZM15.8275 31.7975C15.6975 31.9375 15.7575 32.0875 15.7775 32.1175C15.8175 32.1975 15.8675 32.2475 15.9375 32.2475H29.8175C30.2275 32.2475 30.5675 32.5875 30.5675 32.9975C30.5675 33.4075 30.2275 33.7475 29.8175 33.7475H15.9375C15.2675 33.7475 14.6775 33.3475 14.3975 32.7175C14.1075 32.0575 14.2375 31.2975 14.7275 30.7775L19.7275 25.2775C20.0475 24.9275 20.5075 24.7175 20.9875 24.7075C21.4875 24.7275 21.9375 24.8875 22.2675 25.2275L25.4675 28.4775C25.7575 28.7675 25.7575 29.2475 25.4675 29.5375C25.1675 29.8275 24.6975 29.8275 24.4075 29.5375L21.2075 26.2875C21.1475 26.2175 21.0675 26.1875 21.0275 26.2075C20.9875 26.2075 20.9075 26.2175 20.8475 26.2875L15.8375 31.7975H15.8275ZM38.5275 38.5275C38.3775 38.6775 38.1875 38.7475 37.9975 38.7475C37.8075 38.7475 37.6175 38.6775 37.4675 38.5275L9.4675 10.5275C9.1775 10.2375 9.1775 9.7575 9.4675 9.4675C9.7575 9.1775 10.2375 9.1775 10.5275 9.4675L38.5275 37.4675C38.8175 37.7575 38.8175 38.2375 38.5275 38.5275Z"></path></svg>',"ranking-arrows":'<svg viewBox="0 0 10 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 5L5 0L0 5H4V9H6V5H10Z"></path><path d="M6 19V15H4V19H0L5 24L10 19H6Z"></path></svg>',"rankingundefined-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 8C11.75 8.41 11.41 8.75 11 8.75H5C4.59 8.75 4.25 8.41 4.25 8C4.25 7.59 4.59 7.25 5 7.25H11C11.41 7.25 11.75 7.59 11.75 8Z"></path></svg>',"rating-star-2":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M24 39.5057L11.7226 45.9839C10.4095 46.6739 8.87606 45.5622 9.12525 44.096L11.4734 30.373L1.54411 20.6556C0.480254 19.6207 1.06489 17.8095 2.53128 17.5986L16.2559 15.5957L22.3994 3.10891C23.0512 1.77685 24.9488 1.77685 25.6102 3.10891L31.7441 15.5957L45.4687 17.5986C46.9351 17.8095 47.5197 19.6207 46.4559 20.6556L36.5266 30.373L38.8748 44.096C39.1239 45.5622 37.5905 46.6835 36.2774 45.9839L24 39.5057Z" fill="none" stroke-width="2"></path><path d="M24.3981 33.1305L24 32.9206L23.6019 33.1305L15.8715 37.2059L17.3542 28.5663L17.43 28.1246L17.1095 27.8113L10.83 21.6746L19.4965 20.4049L19.9405 20.3399L20.1387 19.9373L24 12.0936L27.8613 19.9373L28.0595 20.3399L28.5035 20.4049L37.17 21.6746L30.8905 27.8113L30.57 28.1246L30.6458 28.5663L32.1285 37.2059L24.3981 33.1305Z" stroke-width="1.70746"></path></svg>',"rating-star-small-2":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 19.3373L6.13001 22.4373C5.50001 22.7673 4.77001 22.2373 4.89001 21.5373L6.01001 14.9773L1.26001 10.3273C0.750007 9.83728 1.03001 8.96728 1.73001 8.86728L8.29001 7.90728L11.23 1.93728C11.54 1.29728 12.45 1.29728 12.77 1.93728L15.7 7.90728L22.26 8.86728C22.96 8.96728 23.24 9.83728 22.73 10.3273L17.98 14.9773L19.1 21.5373C19.22 22.2373 18.49 22.7773 17.86 22.4373L11.99 19.3373H12Z" fill="none" stroke-width="2"></path><path d="M12 15.9472L8.58001 17.7572L9.23001 13.9272L6.45001 11.2072L10.29 10.6472L12 7.17725L13.71 10.6472L17.55 11.2072L14.77 13.9272L15.42 17.7572L12 15.9472Z"></path></svg>',"rating-star-small":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><path d="M12 19.3373L6.13001 22.4373C5.50001 22.7673 4.77001 22.2373 4.89001 21.5373L6.01001 14.9773L1.26001 10.3273C0.750007 9.83728 1.03001 8.96728 1.73001 8.86728L8.29001 7.90728L11.23 1.93728C11.54 1.29728 12.45 1.29728 12.77 1.93728L15.7 7.90728L22.26 8.86728C22.96 8.96728 23.24 9.83728 22.73 10.3273L17.98 14.9773L19.1 21.5373C19.22 22.2373 18.49 22.7773 17.86 22.4373L11.99 19.3373H12Z"></path></g></svg>',"rating-star":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g><path d="M24 39.5057L11.7226 45.9839C10.4095 46.6739 8.87606 45.5622 9.12525 44.096L11.4734 30.373L1.54411 20.6556C0.480254 19.6207 1.06489 17.8095 2.53128 17.5986L16.2559 15.5957L22.3994 3.10891C23.0512 1.77685 24.9488 1.77685 25.6102 3.10891L31.7441 15.5957L45.4687 17.5986C46.9351 17.8095 47.5197 19.6207 46.4559 20.6556L36.5266 30.373L38.8748 44.096C39.1239 45.5622 37.5905 46.6835 36.2774 45.9839L24 39.5057Z"></path></g></svg>',"reorder-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.9444 10.75H15.0544C15.7144 10.75 16.3144 10.39 16.6144 9.80002C16.9144 9.22002 16.8644 8.52002 16.4844 7.98002L13.4244 3.71002C12.7644 2.79002 11.2344 2.79002 10.5744 3.71002L7.5244 7.99002C7.1444 8.53002 7.0944 9.22002 7.3944 9.81002C7.6944 10.4 8.2944 10.76 8.9544 10.76L8.9444 10.75ZM8.7444 8.86002L11.7944 4.58002C11.8644 4.49002 11.9544 4.48002 11.9944 4.48002C12.0344 4.48002 12.1344 4.49002 12.1944 4.58002L15.2544 8.86002C15.3344 8.97002 15.3044 9.07002 15.2744 9.12002C15.2444 9.17002 15.1844 9.26002 15.0544 9.26002H8.9444C8.8144 9.26002 8.7444 9.18002 8.7244 9.12002C8.7044 9.06002 8.6644 8.97002 8.7444 8.86002ZM15.0544 13.25H8.9444C8.2844 13.25 7.6844 13.61 7.3844 14.2C7.0844 14.78 7.1344 15.48 7.5144 16.02L10.5744 20.3C10.9044 20.76 11.4344 21.03 11.9944 21.03C12.5544 21.03 13.0944 20.76 13.4144 20.3L16.4744 16.02C16.8544 15.48 16.9044 14.79 16.6044 14.2C16.3044 13.61 15.7044 13.25 15.0444 13.25H15.0544ZM15.2644 15.15L12.2044 19.43C12.0744 19.61 11.9244 19.61 11.7944 19.43L8.7344 15.15C8.6544 15.04 8.6844 14.94 8.7144 14.89C8.7444 14.84 8.8044 14.75 8.9344 14.75H15.0444C15.1744 14.75 15.2444 14.83 15.2644 14.89C15.2844 14.95 15.3244 15.04 15.2444 15.15H15.2644Z"></path></svg>',"restoredown-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7.69 8.71C7.73 8.8 7.75 8.9 7.75 9V13C7.75 13.41 7.41 13.75 7 13.75C6.59 13.75 6.25 13.41 6.25 13V10.81L3.53 13.53C3.38 13.68 3.19 13.75 3 13.75C2.81 13.75 2.62 13.68 2.47 13.53C2.18 13.24 2.18 12.76 2.47 12.47L5.19 9.75H3C2.59 9.75 2.25 9.41 2.25 9C2.25 8.59 2.59 8.25 3 8.25H7C7.1 8.25 7.19 8.27 7.29 8.31C7.47 8.39 7.62 8.53 7.7 8.72L7.69 8.71ZM13 6.25H10.81L13.53 3.53C13.82 3.24 13.82 2.76 13.53 2.47C13.24 2.18 12.76 2.18 12.47 2.47L9.75 5.19V3C9.75 2.59 9.41 2.25 9 2.25C8.59 2.25 8.25 2.59 8.25 3V7C8.25 7.1 8.27 7.19 8.31 7.29C8.39 7.47 8.53 7.62 8.72 7.7C8.81 7.74 8.91 7.76 9.01 7.76H13.01C13.42 7.76 13.76 7.42 13.76 7.01C13.76 6.6 13.42 6.26 13.01 6.26L13 6.25Z"></path></svg>',"search-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.9975 2.25C9.7275 2.25 6.2475 5.73 6.2475 10C6.2475 11.87 6.9075 13.58 8.0175 14.92L2.4675 20.47C2.1775 20.76 2.1775 21.24 2.4675 21.53C2.6175 21.68 2.8075 21.75 2.9975 21.75C3.1875 21.75 3.3775 21.68 3.5275 21.53L9.0775 15.98C10.4175 17.08 12.1275 17.75 13.9975 17.75C18.2675 17.75 21.7475 14.27 21.7475 10C21.7475 5.73 18.2675 2.25 13.9975 2.25ZM13.9975 16.25C10.5475 16.25 7.7475 13.45 7.7475 10C7.7475 6.55 10.5475 3.75 13.9975 3.75C17.4475 3.75 20.2475 6.55 20.2475 10C20.2475 13.45 17.4475 16.25 13.9975 16.25Z"></path></svg>',"smiley-rate1-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 4.9938C4 4.44362 4.45 3.99348 5 3.99348H6.59L5.3 2.70306C4.91 2.31293 4.91 1.68272 5.3 1.2926C5.69 0.902468 6.32 0.902468 6.71 1.2926L9.71 4.29357C9.8 4.3836 9.88 4.49364 9.93 4.62368C10.03 4.86376 10.03 5.14385 9.93 5.38393C9.88 5.50397 9.81 5.614 9.71 5.71404L6.71 8.71501C6.51 8.91508 6.26 9.00511 6 9.00511C5.74 9.00511 5.49 8.90508 5.29 8.71501C4.9 8.32489 4.9 7.69468 5.29 7.30456L6.58 6.01413H4.99C4.44 6.01413 3.99 5.56399 3.99 5.01381L4 4.9938ZM14.08 5.37393C14.13 5.49397 14.2 5.604 14.3 5.70403L17.3 8.70501C17.5 8.90508 17.75 8.99511 18.01 8.99511C18.27 8.99511 18.52 8.89507 18.72 8.70501C19.11 8.31488 19.11 7.68468 18.72 7.29455L17.43 6.00413H19.02C19.57 6.00413 20.02 5.55399 20.02 5.00381C20.02 4.45363 19.57 4.00348 19.02 4.00348H17.43L18.72 2.71306C19.11 2.32293 19.11 1.69273 18.72 1.3026C18.33 0.912471 17.7 0.912471 17.31 1.3026L14.31 4.30358C14.22 4.39361 14.14 4.50364 14.09 4.63368C13.99 4.87376 13.99 5.15385 14.09 5.39393L14.08 5.37393ZM22 14.9971V20.999C22 22.6496 20.65 24 19 24H5C3.35 24 2 22.6496 2 20.999V14.9971C2 13.3465 3.35 11.9961 5 11.9961H19C20.65 11.9961 22 13.3465 22 14.9971ZM19 13.9967H16V16.9977H20V14.9971C20 14.4469 19.55 13.9967 19 13.9967ZM14 16.9977V13.9967H10V16.9977H14ZM10 18.9984V21.9993H14V18.9984H10ZM4 14.9971V16.9977H8V13.9967H5C4.45 13.9967 4 14.4469 4 14.9971ZM5 21.9993H8V18.9984H4V20.999C4 21.5492 4.45 21.9993 5 21.9993ZM20 20.999V18.9984H16V21.9993H19C19.55 21.9993 20 21.5492 20 20.999Z"></path></svg>',"smiley-rate10-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 23C6.85721 23 1.15412 19.9621 0.0134987 13.1669C-0.0765501 12.6272 0.293651 12.1076 0.833944 12.0177C1.38424 11.9277 1.89452 12.2975 1.98457 12.8371C2.92508 18.4732 7.69767 20.9914 12 20.9914C16.3023 20.9914 21.0749 18.4732 22.0154 12.8371C22.1055 12.2975 22.6158 11.9277 23.1661 12.0177C23.7063 12.1076 24.0765 12.6272 23.9865 13.1669C22.8559 19.9521 17.1428 23 11.99 23H12.01ZM21.165 6.15177C22.3056 5.01257 22.3056 3.16386 21.165 2.02465L21.0049 1.85477C19.9143 0.765533 18.1633 0.725561 17.0227 1.71487C15.8821 0.715568 14.1312 0.765533 13.0406 1.85477L12.8705 2.01466C11.7299 3.15386 11.7299 5.00257 12.8705 6.14178L17.0227 10.2889L21.175 6.14178L21.165 6.15177ZM15.742 3.27378L17.0127 4.54289L18.2834 3.27378C18.6436 2.91403 19.2239 2.91403 19.5841 3.27378L19.7442 3.43367C20.1044 3.79342 20.1044 4.37301 19.7442 4.73276L17.0127 7.46086L14.2812 4.73276C13.921 4.37301 13.921 3.79342 14.2812 3.43367L14.4413 3.27378C14.6214 3.09391 14.8515 3.00397 15.0917 3.00397C15.3318 3.00397 15.5619 3.09391 15.742 3.27378ZM11.1595 6.15177C12.3002 5.01257 12.3002 3.16386 11.1595 2.02465L10.9995 1.85477C9.90886 0.765533 8.15792 0.725561 7.0173 1.71487C5.87668 0.715568 4.12573 0.765533 3.03514 1.85477L2.86505 2.01466C1.72443 3.15386 1.72443 5.00257 2.86505 6.14178L7.0173 10.2889L11.1695 6.14178L11.1595 6.15177ZM5.7366 3.27378L7.00729 4.54289L8.27798 3.27378C8.63818 2.91403 9.21849 2.91403 9.57869 3.27378L9.73877 3.43367C10.099 3.79342 10.099 4.37301 9.73877 4.73276L7.00729 7.46086L4.27581 4.73276C3.91562 4.37301 3.91562 3.79342 4.27581 3.43367L4.4359 3.27378C4.61599 3.09391 4.84612 3.00397 5.08625 3.00397C5.32638 3.00397 5.5565 3.09391 5.7366 3.27378Z"></path></svg>',"smiley-rate2-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_15894_140103)"><path d="M4.88291 4.51001C4.47291 4.51001 4.08291 4.25001 3.94291 3.84001C3.76291 3.32001 4.03291 2.75001 4.55291 2.57001L8.32291 1.25001C8.84291 1.06001 9.41291 1.34001 9.59291 1.86001C9.77291 2.38001 9.50291 2.95001 8.98291 3.13001L5.20291 4.45001C5.09291 4.49001 4.98291 4.51001 4.87291 4.51001H4.88291ZM19.8129 3.89001C20.0229 3.38001 19.7729 2.79001 19.2629 2.59001L15.5529 1.07001C15.0429 0.860007 14.4529 1.11001 14.2529 1.62001C14.0429 2.13001 14.2929 2.72001 14.8029 2.92001L18.5029 4.43001C18.6229 4.48001 18.7529 4.50001 18.8829 4.50001C19.2729 4.50001 19.6529 4.27001 19.8129 3.88001V3.89001ZM3.50291 6.00001C2.64291 6.37001 1.79291 6.88001 1.00291 7.48001C0.79291 7.64001 0.64291 7.87001 0.59291 8.14001C0.48291 8.73001 0.87291 9.29001 1.45291 9.40001C2.04291 9.51001 2.60291 9.12001 2.71291 8.54001C2.87291 7.69001 3.12291 6.83001 3.50291 5.99001V6.00001ZM21.0429 8.55001C21.6029 10.48 24.2429 8.84001 22.7529 7.48001C21.9629 6.88001 21.1129 6.37001 20.2529 6.00001C20.6329 6.84001 20.8829 7.70001 21.0429 8.55001ZM21.5729 13.2C21.2529 14.2 22.5429 15.09 23.3629 14.39C23.8529 14 23.9229 13.29 23.5429 12.81C21.7429 10.67 22.1329 10.55 21.5829 13.2H21.5729ZM1.75291 11C1.22291 11.79 -0.14709 12.64 0.0129102 13.75C0.15291 14.36 0.75291 14.74 1.35291 14.6C2.98291 14.1 1.80291 12.22 1.75291 11ZM19.8829 17C19.8829 13.14 16.2929 10 11.8829 10C7.47291 10 3.88291 13.14 3.88291 17C3.88291 20.86 7.47291 24 11.8829 24C16.2929 24 19.8829 20.86 19.8829 17ZM17.8829 17C17.8829 19.76 15.1929 22 11.8829 22C8.57291 22 5.88291 19.76 5.88291 17C5.88291 14.24 8.57291 12 11.8829 12C15.1929 12 17.8829 14.24 17.8829 17Z"></path></g><defs><clipPath id="clip0_15894_140103"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg>',"smiley-rate3-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.01915 7C6.46961 7 6.01998 6.55 6.01998 6V2C6.01998 1.45 6.46961 1 7.01915 1C7.56869 1 8.01832 1.45 8.01832 2V6C8.01832 6.55 7.56869 7 7.01915 7ZM18.01 6V2C18.01 1.45 17.5604 1 17.0108 1C16.4613 1 16.0117 1.45 16.0117 2V6C16.0117 6.55 16.4613 7 17.0108 7C17.5604 7 18.01 6.55 18.01 6ZM16.4213 21.58L18.01 19.99L19.2989 21.28C19.6886 21.67 20.3181 21.67 20.7077 21.28C21.0974 20.89 21.0974 20.26 20.7077 19.87L19.4188 18.58C18.6395 17.8 17.3705 17.8 16.5912 18.58L15.0025 20.17L13.4138 18.58C12.6345 17.8 11.3655 17.8 10.5862 18.58L8.9975 20.17L7.40883 18.58C6.62948 17.8 5.36053 17.8 4.58118 18.58L3.29226 19.87C2.90258 20.26 2.90258 20.89 3.29226 21.28C3.68193 21.67 4.31141 21.67 4.70108 21.28L5.99001 19.99L7.57868 21.58C8.35803 22.36 9.62698 22.36 10.4063 21.58L11.995 19.99L13.5837 21.58C13.9734 21.97 14.4829 22.16 14.9925 22.16C15.5021 22.16 16.0117 21.97 16.4013 21.58H16.4213Z"></path></svg>',"smiley-rate4-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.06927 7C6.51927 7 6.06927 6.55 6.06927 6V2C6.06927 1.45 6.51927 1 7.06927 1C7.61927 1 8.06927 1.45 8.06927 2V6C8.06927 6.55 7.61927 7 7.06927 7ZM18.0693 6V2C18.0693 1.45 17.6193 1 17.0693 1C16.5193 1 16.0693 1.45 16.0693 2V6C16.0693 6.55 16.5193 7 17.0693 7C17.6193 7 18.0693 6.55 18.0693 6ZM22.5693 21.9C23.0693 21.66 23.2793 21.07 23.0393 20.57C21.1093 16.52 16.9093 14 12.0693 14C7.22927 14 3.02927 16.52 1.09927 20.57C0.859273 21.07 1.06927 21.67 1.56927 21.9C2.06927 22.14 2.65927 21.93 2.89927 21.43C4.49927 18.08 8.00927 16 12.0593 16C16.1093 16 19.6293 18.08 21.2193 21.43C21.3893 21.79 21.7493 22 22.1193 22C22.2593 22 22.4093 21.97 22.5493 21.9H22.5693Z"></path></svg>',"smiley-rate5-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.00572 7C6.45572 7 6.00572 6.55 6.00572 6V2C6.00572 1.45 6.45572 1 7.00572 1C7.55572 1 8.00572 1.45 8.00572 2V6C8.00572 6.55 7.55572 7 7.00572 7ZM18.0057 6V2C18.0057 1.45 17.5557 1 17.0057 1C16.4557 1 16.0057 1.45 16.0057 2V6C16.0057 6.55 16.4557 7 17.0057 7C17.5557 7 18.0057 6.55 18.0057 6ZM19.9457 21.33C20.1257 20.81 19.8557 20.24 19.3357 20.05C14.5457 18.35 9.45572 18.35 4.66572 20.05C4.14572 20.23 3.87572 20.81 4.05572 21.33C4.23572 21.85 4.80572 22.12 5.33572 21.94C9.69572 20.4 14.3057 20.4 18.6657 21.94C18.7757 21.98 18.8857 22 18.9957 22C19.4057 22 19.7957 21.74 19.9357 21.33H19.9457Z"></path></svg>',"smiley-rate6-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 7C6.45 7 6 6.55 6 6V2C6 1.45 6.45 1 7 1C7.55 1 8 1.45 8 2V6C8 6.55 7.55 7 7 7ZM18 6V2C18 1.45 17.55 1 17 1C16.45 1 16 1.45 16 2V6C16 6.55 16.45 7 17 7C17.55 7 18 6.55 18 6ZM21 21C21 20.45 20.55 20 20 20H4C3.45 20 3 20.45 3 21C3 21.55 3.45 22 4 22H20C20.55 22 21 21.55 21 21Z"></path></svg>',"smiley-rate7-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.0022 23.99C11.452 23.99 11.0018 23.5402 11.0018 22.9904C11.0018 22.4407 11.452 21.9909 12.0022 21.9909C16.3137 21.9909 21.0755 19.472 22.0158 13.8344C22.1058 13.2947 22.616 12.9248 23.1662 13.0148C23.7064 13.1047 24.0765 13.6245 23.9865 14.1643C22.8561 20.9513 17.144 24 11.9922 24L12.0022 23.99ZM8.00072 5.99783V1.99957C8.00072 1.4498 7.55056 1 7.00036 1C6.45016 1 6 1.4498 6 1.99957V5.99783C6 6.54759 6.45016 6.99739 7.00036 6.99739C7.55056 6.99739 8.00072 6.54759 8.00072 5.99783ZM18.0043 5.99783V1.99957C18.0043 1.4498 17.5542 1 17.004 1C16.4538 1 16.0036 1.4498 16.0036 1.99957V5.99783C16.0036 6.54759 16.4538 6.99739 17.004 6.99739C17.5542 6.99739 18.0043 6.54759 18.0043 5.99783Z"></path></svg>',"smiley-rate8-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 24C6.85721 24 1.15412 20.96 0.0134987 14.16C-0.0765501 13.62 0.293651 13.1 0.833944 13.01C1.38424 12.92 1.89452 13.29 1.98457 13.83C2.92508 19.47 7.69767 21.99 12 21.99C16.3023 21.99 21.0749 19.47 22.0154 13.83C22.1055 13.29 22.6158 12.92 23.1661 13.01C23.7063 13.1 24.0765 13.62 23.9865 14.16C22.8559 20.95 17.1428 24 11.99 24H12.01ZM8.00783 6V2C8.00783 1.45 7.55759 1 7.00729 1C6.45699 1 6.00675 1.45 6.00675 2V6C6.00675 6.55 6.45699 7 7.00729 7C7.55759 7 8.00783 6.55 8.00783 6ZM18.0133 6V2C18.0133 1.45 17.563 1 17.0127 1C16.4624 1 16.0122 1.45 16.0122 2V6C16.0122 6.55 16.4624 7 17.0127 7C17.563 7 18.0133 6.55 18.0133 6Z"></path></svg>',"smiley-rate9-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 24C6.85767 24 1.15509 20.96 0.0145752 14.16C-0.0354475 13.87 0.0445888 13.57 0.234675 13.35C0.424761 13.13 0.704888 13 0.995019 13H23.005C23.2951 13 23.5752 13.13 23.7653 13.35C23.9554 13.57 24.0354 13.87 23.9854 14.16C22.8549 20.95 17.1423 24 11.99 24H12.01ZM2.25559 15C3.61621 19.82 8.0182 22 12.01 22C16.0018 22 20.4038 19.82 21.7644 15H2.25559ZM8.00819 6V2C8.00819 1.45 7.55799 1 7.00774 1C6.45749 1 6.00729 1.45 6.00729 2V6C6.00729 6.55 6.45749 7 7.00774 7C7.55799 7 8.00819 6.55 8.00819 6ZM18.0127 6V2C18.0127 1.45 17.5625 1 17.0123 1C16.462 1 16.0118 1.45 16.0118 2V6C16.0118 6.55 16.462 7 17.0123 7C17.5625 7 18.0127 6.55 18.0127 6Z"></path></svg>'};class jo extends Jr{constructor(e){super(e),this.rootRef={current:null},this.model=new or,this.model.onInnerHeightChanged=e=>{this.props.onInnerHeightChanged&&this.props.onInnerHeightChanged(e)}}componentDidMount(){const e=this.rootRef.current;e&&this.model.setRootElement(e)}componentWillUnmount(){this.model.unsubscribeRootElement(),this.model.setRootElement(void 0)}render(){return this.props.disabled?Gr(Kr,null,this.props.children):Gr("div",{ref:this.rootRef,className:"sv-scroll__wrapper"},Gr("div",{className:"sv-scroll__scroller sv-drag-target-skipped",onScroll:()=>this.model.onScrollContainer()},Gr("div",{className:"sv-scroll__container"},this.props.children)),Gr("div",{className:"sv-scroll__scrollbar",onScroll:()=>this.model.onScrollScrollbar()},Gr("div",{className:"sv-scroll__scrollbar-sizer"})))}}ho.Instance.registerElement("svc-scroll",e=>Gr(jo,e)),Er("v1",{modernbooleancheckchecked:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><polygon points="19,10 14,10 14,5 10,5 10,10 5,10 5,14 10,14 10,19 14,19 14,14 19,14 "></polygon></svg>',modernbooleancheckind:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><path d="M22,0H2C0.9,0,0,0.9,0,2v20c0,1.1,0.9,2,2,2h20c1.1,0,2-0.9,2-2V2C24,0.9,23.1,0,22,0z M21,18L6,3h15V18z M3,6l15,15H3V6z"></path></svg>',modernbooleancheckunchecked:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><rect x="5" y="10" width="14" height="4"></rect></svg>',moderncheck:'<svg viewBox="0 0 24 24"><path d="M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"></path></svg>',modernradio:'<svg viewBox="-12 -12 24 24"><circle r="6" cx="0" cy="0"></circle></svg>',progressbutton:'<svg viewBox="0 0 10 10"><polygon points="2,2 0,4 5,9 10,4 8,2 5,5 "></polygon></svg>',removefile:'<svg viewBox="0 0 16 16"><path d="M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z M11,10l-1,1L8,9l-2,2l-1-1l2-2L5,6l1-1l2,2l2-2l1,1L9,8 L11,10z"></path></svg>',timercircle:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 160 160"><circle cx="80" cy="80" r="70" style="stroke: var(--sd-timer-stroke-background-color); stroke-width: var(--sd-timer-stroke-background-width)" stroke-dasharray="none" stroke-dashoffset="none"></circle><circle cx="80" cy="80" r="70"></circle></svg>',"add-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 11H17V13H13V17H11V13H7V11H11V7H13V11ZM23 12C23 18.1 18.1 23 12 23C5.9 23 1 18.1 1 12C1 5.9 5.9 1 12 1C18.1 1 23 5.9 23 12ZM21 12C21 7 17 3 12 3C7 3 3 7 3 12C3 17 7 21 12 21C17 21 21 17 21 12Z"></path></svg>',"arrowleft-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15 8.99999H4.4L8.7 13.3L7.3 14.7L0.599998 7.99999L7.3 1.29999L8.7 2.69999L4.4 6.99999H15V8.99999Z"></path></svg>',"arrowright-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1 6.99999H11.6L7.3 2.69999L8.7 1.29999L15.4 7.99999L8.7 14.7L7.3 13.3L11.6 8.99999H1V6.99999Z"></path></svg>',"camera-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.01 4H18.4C18.2 4 18.01 3.9 17.9 3.73L16.97 2.34C16.41 1.5 15.48 1 14.47 1H9.54C8.53 1 7.6 1.5 7.04 2.34L6.11 3.73C6 3.9 5.81 4 5.61 4H4C2.35 4 1 5.35 1 7V19C1 20.65 2.35 22 4 22H20C21.65 22 23 20.65 23 19V7C23 5.35 21.65 4 20 4H20.01ZM21.01 19C21.01 19.55 20.56 20 20.01 20H4.01C3.46 20 3.01 19.55 3.01 19V7C3.01 6.45 3.46 6 4.01 6H5.62C6.49 6 7.3 5.56 7.79 4.84L8.72 3.45C8.91 3.17 9.22 3 9.55 3H14.48C14.81 3 15.13 3.17 15.31 3.45L16.24 4.84C16.72 5.56 17.54 6 18.41 6H20.02C20.57 6 21.02 6.45 21.02 7V19H21.01ZM12.01 6C8.7 6 6.01 8.69 6.01 12C6.01 15.31 8.7 18 12.01 18C15.32 18 18.01 15.31 18.01 12C18.01 8.69 15.32 6 12.01 6ZM12.01 16C9.8 16 8.01 14.21 8.01 12C8.01 9.79 9.8 8 12.01 8C14.22 8 16.01 9.79 16.01 12C16.01 14.21 14.22 16 12.01 16ZM13.01 10C13.01 10.55 12.56 11 12.01 11C11.46 11 11.01 11.45 11.01 12C11.01 12.55 10.56 13 10.01 13C9.46 13 9.01 12.55 9.01 12C9.01 10.35 10.36 9 12.01 9C12.56 9 13.01 9.45 13.01 10Z"></path></svg>',"camera-32x32":'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M27 6H23.8C23.34 6 22.92 5.77 22.66 5.39L22.25 4.78C21.51 3.66 20.26 3 18.92 3H13.06C11.72 3 10.48 3.67 9.73 4.78L9.32 5.39C9.07 5.77 8.64 6 8.18 6H4.98C2.79 6 1 7.79 1 10V24C1 26.21 2.79 28 5 28H27C29.21 28 31 26.21 31 24V10C31 7.79 29.21 6 27 6ZM29 24C29 25.1 28.1 26 27 26H5C3.9 26 3 25.1 3 24V10C3 8.9 3.9 8 5 8H8.2C9.33 8 10.38 7.44 11 6.5L11.41 5.89C11.78 5.33 12.41 5 13.07 5H18.93C19.6 5 20.22 5.33 20.59 5.89L21 6.5C21.62 7.44 22.68 8 23.8 8H27C28.1 8 29 8.9 29 10V24ZM16 9C12.13 9 9 12.13 9 16C9 19.87 12.13 23 16 23C19.87 23 23 19.87 23 16C23 12.13 19.87 9 16 9ZM16 21C13.24 21 11 18.76 11 16C11 13.24 13.24 11 16 11C18.76 11 21 13.24 21 16C21 18.76 18.76 21 16 21ZM17 13C17 13.55 16.55 14 16 14C14.9 14 14 14.9 14 16C14 16.55 13.55 17 13 17C12.45 17 12 16.55 12 16C12 13.79 13.79 12 16 12C16.55 12 17 12.45 17 13Z"></path></svg>',"cancel-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.6 8.6L16.4 2.4C16 2 15.5 1.8 15 1.8C14.5 1.8 14 2 13.6 2.4L1.40005 14.6C0.600049 15.4 0.600049 16.6 1.40005 17.4L6.00005 22H12L22.6 11.4C23.3 10.6 23.3 9.3 22.6 8.6ZM11.1 20H6.80005L2.80005 16L6.20005 12.6L12.4 18.8L11.1 20ZM13.8 17.4L7.60005 11.2L15 3.8L21.2 10L13.8 17.4ZM16 20H23V22H14L16 20Z"></path></svg>',"check-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5.003 14.413L0.292999 9.70303L1.703 8.29303L5.003 11.583L14.293 2.29303L15.703 3.70303L5.003 14.413Z"></path></svg>',"check-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 20.1L1 12L3.1 9.9L9 15.9L20.9 4L23 6.1L9 20.1Z"></path></svg>',"chevrondown-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 15L17 10H7L12 15Z"></path></svg>',"chevronright-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5.64648 12.6465L6.34648 13.3465L11.7465 8.04648L6.34648 2.64648L5.64648 3.34648L10.2465 8.04648L5.64648 12.6465Z"></path></svg>',"clear-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.35 3.34999L12.65 2.64999L8.05002 7.24999L3.35002 2.64999L2.65002 3.34999L7.25002 8.04999L2.65002 12.65L3.35002 13.35L8.05002 8.74999L12.65 13.35L13.35 12.65L8.75002 8.04999L13.35 3.34999Z"></path></svg>',"clear-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.6 8.6L16.4 2.4C16 2 15.5 1.8 15 1.8C14.5 1.8 14 2 13.6 2.4L1.40005 14.6C0.600049 15.4 0.600049 16.6 1.40005 17.4L6.00005 22H12L22.6 11.4C23.3 10.6 23.3 9.3 22.6 8.6ZM11.1 20H6.80005L2.80005 16L6.20005 12.6L12.4 18.8L11.1 20ZM13.8 17.4L7.60005 11.2L15 3.8L21.2 10L13.8 17.4ZM16 20H23V22H14L16 20Z"></path></svg>',"close-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M9.43 8.0025L13.7 3.7225C14.09 3.3325 14.09 2.6925 13.7 2.2925C13.31 1.9025 12.67 1.9025 12.27 2.2925L7.99 6.5725L3.72 2.3025C3.33 1.9025 2.69 1.9025 2.3 2.3025C1.9 2.6925 1.9 3.3325 2.3 3.7225L6.58 8.0025L2.3 12.2825C1.91 12.6725 1.91 13.3125 2.3 13.7125C2.69 14.1025 3.33 14.1025 3.73 13.7125L8.01 9.4325L12.29 13.7125C12.68 14.1025 13.32 14.1025 13.72 13.7125C14.11 13.3225 14.11 12.6825 13.72 12.2825L9.44 8.0025H9.43Z"></path></svg>',"close-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.4101 12L20.7001 4.71C21.0901 4.32 21.0901 3.69 20.7001 3.3C20.3101 2.91 19.6801 2.91 19.2901 3.3L12.0001 10.59L4.71006 3.29C4.32006 2.9 3.68006 2.9 3.29006 3.29C2.90006 3.68 2.90006 4.32 3.29006 4.71L10.5801 12L3.29006 19.29C2.90006 19.68 2.90006 20.31 3.29006 20.7C3.49006 20.9 3.74006 20.99 4.00006 20.99C4.26006 20.99 4.51006 20.89 4.71006 20.7L12.0001 13.41L19.2901 20.7C19.4901 20.9 19.7401 20.99 20.0001 20.99C20.2601 20.99 20.5101 20.89 20.7101 20.7C21.1001 20.31 21.1001 19.68 20.7101 19.29L13.4201 12H13.4101Z"></path></svg>',"collapse-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 6L3 5L8 10L13 5L14 6L8 12L2 6Z"></path></svg>',"collapsedetails-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 7H3V9H13V7Z"></path></svg>',"delete-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15 2H14H11V1C11 0.4 10.6 0 10 0H7C6.4 0 6 0.4 6 1V2H3H2V4H3V14C3 15.1 3.9 16 5 16H12C13.1 16 14 15.1 14 14V4H15V2ZM7 1H10V2H7V1ZM12 14H5V4H12V14ZM7 13H6V5H7V13ZM9 13H8V5H9V13ZM11 13H10V5H11V13Z"></path></svg>',"delete-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 4H20H16V2C16 0.9 15.1 0 14 0H10C8.9 0 8 0.9 8 2V4H4H2V6H4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V6H22V4ZM10 2H14V4H10V2ZM18 20H6V6H8H16H18V20ZM14 8H16V18H14V8ZM11 8H13V18H11V8ZM8 8H10V18H8V8Z"></path></svg>',"drag-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 6C13 4.9 13.9 4 15 4C16.1 4 17 4.9 17 6C17 7.1 16.1 8 15 8C13.9 8 13 7.1 13 6ZM9 4C7.9 4 7 4.9 7 6C7 7.1 7.9 8 9 8C10.1 8 11 7.1 11 6C11 4.9 10.1 4 9 4ZM15 10C13.9 10 13 10.9 13 12C13 13.1 13.9 14 15 14C16.1 14 17 13.1 17 12C17 10.9 16.1 10 15 10ZM9 10C7.9 10 7 10.9 7 12C7 13.1 7.9 14 9 14C10.1 14 11 13.1 11 12C11 10.9 10.1 10 9 10ZM15 16C13.9 16 13 16.9 13 18C13 19.1 13.9 20 15 20C16.1 20 17 19.1 17 18C17 16.9 16.1 16 15 16ZM9 16C7.9 16 7 16.9 7 18C7 19.1 7.9 20 9 20C10.1 20 11 19.1 11 18C11 16.9 10.1 16 9 16Z"></path></svg>',"draghorizontal-24x16":'<svg viewBox="0 0 24 16" xmlns="http://www.w3.org/2000/svg"><path d="M18 9C19.1 9 20 9.9 20 11C20 12.1 19.1 13 18 13C16.9 13 16 12.1 16 11C16 9.9 16.9 9 18 9ZM20 5C20 3.9 19.1 3 18 3C16.9 3 16 3.9 16 5C16 6.1 16.9 7 18 7C19.1 7 20 6.1 20 5ZM14 11C14 9.9 13.1 9 12 9C10.9 9 10 9.9 10 11C10 12.1 10.9 13 12 13C13.1 13 14 12.1 14 11ZM14 5C14 3.9 13.1 3 12 3C10.9 3 10 3.9 10 5C10 6.1 10.9 7 12 7C13.1 7 14 6.1 14 5ZM8 11C8 9.9 7.1 9 6 9C4.9 9 4 9.9 4 11C4 12.1 4.9 13 6 13C7.1 13 8 12.1 8 11ZM8 5C8 3.9 7.1 3 6 3C4.9 3 4 3.9 4 5C4 6.1 4.9 7 6 7C7.1 7 8 6.1 8 5Z"></path></svg>',"editsmall-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.59 4.5884L11.42 2.4184C11.03 2.0284 10.52 1.8284 10.01 1.8284C9.5 1.8284 8.99 2.0284 8.6 2.4184L3.76 7.2384C2.63 8.3684 2 9.8884 2 11.4784V12.9884C2 13.5384 2.45 13.9884 3 13.9884H4.51C6.1 13.9884 7.63 13.3584 8.75 12.2284L13.58 7.3984C14.36 6.6184 14.36 5.3484 13.58 4.5684L13.59 4.5884ZM7.35 10.8284C6.59 11.5884 5.59 11.9984 4.52 11.9984H4.01V11.4884C4.01 10.4184 4.43 9.4184 5.18 8.6584L7.72 6.1184L9.89 8.2884L7.35 10.8284ZM11.3 6.8784L9.13 4.7084L10.01 3.8284L12.18 5.9984L11.3 6.8784Z"></path></svg>',"expand-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6 14L5 13L10 8L5 3L6 2L12 8L6 14Z"></path></svg>',"expanddetails-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 7H9V3H7V7H3V9H7V13H9V9H13V7Z"></path></svg>',"file-72x72":'<svg viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><path d="M62.83 12.83L53.17 3.17C52.7982 2.79866 52.357 2.50421 51.8714 2.30346C51.3858 2.1027 50.8654 1.99959 50.34 2H14C12.4087 2 10.8826 2.63214 9.75735 3.75736C8.63214 4.88258 8 6.4087 8 8V64C8 65.5913 8.63214 67.1174 9.75735 68.2426C10.8826 69.3679 12.4087 70 14 70H58C59.5913 70 61.1174 69.3679 62.2426 68.2426C63.3679 67.1174 64 65.5913 64 64V15.66C64.0004 15.1346 63.8973 14.6142 63.6965 14.1286C63.4958 13.643 63.2013 13.2018 62.83 12.83ZM52 4.83L61.17 14H56C54.9391 14 53.9217 13.5786 53.1716 12.8284C52.4214 12.0783 52 11.0609 52 10V4.83ZM62 64C62 65.0609 61.5786 66.0783 60.8284 66.8284C60.0783 67.5786 59.0609 68 58 68H14C12.9391 68 11.9217 67.5786 11.1716 66.8284C10.4214 66.0783 10 65.0609 10 64V8C10 6.93914 10.4214 5.92172 11.1716 5.17157C11.9217 4.42143 12.9391 4 14 4H50V10C50 11.5913 50.6321 13.1174 51.7574 14.2426C52.8826 15.3679 54.4087 16 56 16H62V64ZM22 26H50V28H22V26ZM22 32H50V34H22V32ZM22 38H50V40H22V38ZM22 44H50V46H22V44Z"></path></svg>',"flip-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23 12.0037C23 14.2445 21.7794 16.3052 19.5684 17.8257C19.3984 17.9458 19.1983 18.0058 19.0082 18.0058C18.688 18.0058 18.3779 17.8557 18.1778 17.5756C17.8677 17.1155 17.9777 16.4953 18.4379 16.1852C20.0887 15.0448 21.0091 13.5643 21.0091 12.0138C21.0091 8.70262 16.9673 6.01171 12.005 6.01171C11.4948 6.01171 10.9945 6.04172 10.5043 6.09173L11.7149 7.30215C12.105 7.69228 12.105 8.32249 11.7149 8.71263C11.5148 8.9127 11.2647 9.00273 11.0045 9.00273C10.7444 9.00273 10.4943 8.90269 10.2942 8.71263L6.58254 5.00136L10.2842 1.2901C10.6744 0.899964 11.3047 0.899964 11.6949 1.2901C12.085 1.68023 12.085 2.31045 11.6949 2.70058L10.3042 4.09105C10.8545 4.03103 11.4147 4.00102 11.985 4.00102C18.0578 4.00102 22.99 7.59225 22.99 12.0037H23ZM12.2851 15.2949C11.895 15.685 11.895 16.3152 12.2851 16.7054L13.4957 17.9158C13.0055 17.9758 12.4952 17.9958 11.995 17.9958C7.03274 17.9958 2.99091 15.3049 2.99091 11.9937C2.99091 10.4332 3.90132 8.95271 5.56207 7.82232C6.02228 7.51222 6.13233 6.89201 5.82219 6.43185C5.51205 5.97169 4.89177 5.86166 4.43156 6.17176C2.22055 7.69228 1 9.76299 1 11.9937C1 16.4052 5.93224 19.9965 12.005 19.9965C12.5753 19.9965 13.1355 19.9665 13.6858 19.9064L12.2951 21.2969C11.905 21.6871 11.905 22.3173 12.2951 22.7074C12.4952 22.9075 12.7453 22.9975 13.0055 22.9975C13.2656 22.9975 13.5157 22.8975 13.7158 22.7074L17.4275 18.9961L13.7158 15.2849C13.3256 14.8947 12.6953 14.8947 12.3051 15.2849L12.2851 15.2949Z"></path></svg>',"folder-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.93 9H21V7C21 6.46957 20.7893 5.96086 20.4142 5.58579C20.0391 5.21071 19.5304 5 19 5H10L8 3H4C3.46957 3 2.96086 3.21071 2.58579 3.58579C2.21071 3.96086 2 4.46957 2 5L2 21H21L23.89 11.63C23.9916 11.3244 24.0179 10.9988 23.9667 10.6809C23.9155 10.363 23.7882 10.0621 23.5958 9.80392C23.4034 9.54571 23.1514 9.33779 22.8614 9.19782C22.5714 9.05786 22.2519 8.99 21.93 9ZM4 5H7.17L8.59 6.41L9.17 7H19V9H6L4 15V5ZM22 11L19.54 19H4.77L7.44 11H22Z"></path></svg>',"fullsize-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12 13H4C2.9 13 2 12.1 2 11V5C2 3.9 2.9 3 4 3H12C13.1 3 14 3.9 14 5V11C14 12.1 13.1 13 12 13ZM4 5V11H12V5H4Z"></path></svg>',"image-48x48":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M36 8H12C9.79 8 8 9.79 8 12V36C8 38.21 9.79 40 12 40H36C38.21 40 40 38.21 40 36V12C40 9.79 38.21 8 36 8ZM38 36C38 37.1 37.1 38 36 38H12C10.9 38 10 37.1 10 36V12C10 10.9 10.9 10 12 10H36C37.1 10 38 10.9 38 12V36ZM14 17C14 15.34 15.34 14 17 14C18.66 14 20 15.34 20 17C20 18.66 18.66 20 17 20C15.34 20 14 18.66 14 17ZM27 24L36 36H12L19 27L23 29L27 24Z"></path></svg>',"loading-48x48":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_19679_369428)"><path opacity="0.1" d="M24 40C15.18 40 8 32.82 8 24C8 15.18 15.18 8 24 8C32.82 8 40 15.18 40 24C40 32.82 32.82 40 24 40ZM24 12C17.38 12 12 17.38 12 24C12 30.62 17.38 36 24 36C30.62 36 36 30.62 36 24C36 17.38 30.62 12 24 12Z" fill="black" fill-opacity="0.91"></path><path d="M10 26C8.9 26 8 25.1 8 24C8 15.18 15.18 8 24 8C25.1 8 26 8.9 26 10C26 11.1 25.1 12 24 12C17.38 12 12 17.38 12 24C12 25.1 11.1 26 10 26Z"></path></g><defs><clipPath id="clip0_19679_369428"><rect width="32" height="32" fill="white" transform="translate(8 8)"></rect></clipPath></defs></svg>',"maximize-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6.71 10.71L4.42 13H6.01C6.56 13 7.01 13.45 7.01 14C7.01 14.55 6.56 15 6.01 15H2C1.45 15 1 14.55 1 14V10C1 9.45 1.45 9 2 9C2.55 9 3 9.45 3 10V11.59L5.29 9.3C5.68 8.91 6.31 8.91 6.7 9.3C7.09 9.69 7.09 10.32 6.7 10.71H6.71ZM14 1H10C9.45 1 9 1.45 9 2C9 2.55 9.45 3 10 3H11.59L9.3 5.29C8.91 5.68 8.91 6.31 9.3 6.7C9.5 6.9 9.75 6.99 10.01 6.99C10.27 6.99 10.52 6.89 10.72 6.7L13.01 4.41V6C13.01 6.55 13.46 7 14.01 7C14.56 7 15.01 6.55 15.01 6V2C15.01 1.45 14.56 1 14.01 1H14Z"></path></svg>',"minimize-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 9H3C2.45 9 2 8.55 2 8C2 7.45 2.45 7 3 7H13C13.55 7 14 7.45 14 8C14 8.55 13.55 9 13 9Z"></path></svg>',"more-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 12C6 13.1 5.1 14 4 14C2.9 14 2 13.1 2 12C2 10.9 2.9 10 4 10C5.1 10 6 10.9 6 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM20 10C18.9 10 18 10.9 18 12C18 13.1 18.9 14 20 14C21.1 14 22 13.1 22 12C22 10.9 21.1 10 20 10Z"></path></svg>',"navmenu-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16 7H2V5H16V7ZM2 11V13H22V11H2ZM2 19H10V17H2V19Z"></path></svg>',"noimage-48x48":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M14 17.01C14 16.4167 14.1759 15.8366 14.5056 15.3433C14.8352 14.8499 15.3038 14.4654 15.8519 14.2384C16.4001 14.0113 17.0033 13.9519 17.5853 14.0676C18.1672 14.1834 18.7018 14.4691 19.1213 14.8887C19.5409 15.3082 19.8266 15.8428 19.9424 16.4247C20.0581 17.0067 19.9987 17.6099 19.7716 18.1581C19.5446 18.7062 19.1601 19.1748 18.6667 19.5044C18.1734 19.8341 17.5933 20.01 17 20.01C16.2044 20.01 15.4413 19.6939 14.8787 19.1313C14.3161 18.5687 14 17.8056 14 17.01ZM27.09 24.14L20 36.01H36L27.09 24.14ZM36.72 8.14L35.57 10.01H36C36.5304 10.01 37.0391 10.2207 37.4142 10.5958C37.7893 10.9709 38 11.4796 38 12.01V36.01C38 36.5404 37.7893 37.0491 37.4142 37.4242C37.0391 37.7993 36.5304 38.01 36 38.01H18.77L17.57 40.01H36C37.0609 40.01 38.0783 39.5886 38.8284 38.8384C39.5786 38.0883 40 37.0709 40 36.01V12.01C39.9966 11.0765 39.6668 10.1737 39.0678 9.45778C38.4688 8.74188 37.6382 8.25802 36.72 8.09V8.14ZM36.86 4.5L12.86 44.5L11.14 43.5L13.23 40.01H12C10.9391 40.01 9.92172 39.5886 9.17157 38.8384C8.42143 38.0883 8 37.0709 8 36.01V12.01C8 10.9491 8.42143 9.93172 9.17157 9.18157C9.92172 8.43143 10.9391 8.01 12 8.01H32.43L35.14 3.5L36.86 4.5ZM14.43 38.01L15.63 36.01H12L19 27.01L20.56 27.8L31.23 10.01H12C11.4696 10.01 10.9609 10.2207 10.5858 10.5958C10.2107 10.9709 10 11.4796 10 12.01V36.01C10 36.5404 10.2107 37.0491 10.5858 37.4242C10.9609 37.7993 11.4696 38.01 12 38.01H14.43Z"></path></svg>',"ranking-arrows":'<svg viewBox="0 0 10 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 5L5 0L0 5H4V9H6V5H10Z"></path><path d="M6 19V15H4V19H0L5 24L10 19H6Z"></path></svg>',"rankingundefined-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 7H3V9H13V7Z"></path></svg>',"rating-star-2":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M24 39.5057L11.7226 45.9839C10.4095 46.6739 8.87606 45.5622 9.12525 44.096L11.4734 30.373L1.54411 20.6556C0.480254 19.6207 1.06489 17.8095 2.53128 17.5986L16.2559 15.5957L22.3994 3.10891C23.0512 1.77685 24.9488 1.77685 25.6102 3.10891L31.7441 15.5957L45.4687 17.5986C46.9351 17.8095 47.5197 19.6207 46.4559 20.6556L36.5266 30.373L38.8748 44.096C39.1239 45.5622 37.5905 46.6835 36.2774 45.9839L24 39.5057Z" fill="none" stroke-width="2"></path><path d="M24.3981 33.1305L24 32.9206L23.6019 33.1305L15.8715 37.2059L17.3542 28.5663L17.43 28.1246L17.1095 27.8113L10.83 21.6746L19.4965 20.4049L19.9405 20.3399L20.1387 19.9373L24 12.0936L27.8613 19.9373L28.0595 20.3399L28.5035 20.4049L37.17 21.6746L30.8905 27.8113L30.57 28.1246L30.6458 28.5663L32.1285 37.2059L24.3981 33.1305Z" stroke-width="1.70746"></path></svg>',"rating-star-small-2":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 19.3373L6.13001 22.4373C5.50001 22.7673 4.77001 22.2373 4.89001 21.5373L6.01001 14.9773L1.26001 10.3273C0.750007 9.83728 1.03001 8.96728 1.73001 8.86728L8.29001 7.90728L11.23 1.93728C11.54 1.29728 12.45 1.29728 12.77 1.93728L15.7 7.90728L22.26 8.86728C22.96 8.96728 23.24 9.83728 22.73 10.3273L17.98 14.9773L19.1 21.5373C19.22 22.2373 18.49 22.7773 17.86 22.4373L11.99 19.3373H12Z" fill="none" stroke-width="2"></path><path d="M12 15.9472L8.58001 17.7572L9.23001 13.9272L6.45001 11.2072L10.29 10.6472L12 7.17725L13.71 10.6472L17.55 11.2072L14.77 13.9272L15.42 17.7572L12 15.9472Z"></path></svg>',"rating-star-small":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><path d="M12 19.3373L6.13001 22.4373C5.50001 22.7673 4.77001 22.2373 4.89001 21.5373L6.01001 14.9773L1.26001 10.3273C0.750007 9.83728 1.03001 8.96728 1.73001 8.86728L8.29001 7.90728L11.23 1.93728C11.54 1.29728 12.45 1.29728 12.77 1.93728L15.7 7.90728L22.26 8.86728C22.96 8.96728 23.24 9.83728 22.73 10.3273L17.98 14.9773L19.1 21.5373C19.22 22.2373 18.49 22.7773 17.86 22.4373L11.99 19.3373H12Z"></path></g></svg>',"rating-star":'<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g><path d="M24 39.5057L11.7226 45.9839C10.4095 46.6739 8.87606 45.5622 9.12525 44.096L11.4734 30.373L1.54411 20.6556C0.480254 19.6207 1.06489 17.8095 2.53128 17.5986L16.2559 15.5957L22.3994 3.10891C23.0512 1.77685 24.9488 1.77685 25.6102 3.10891L31.7441 15.5957L45.4687 17.5986C46.9351 17.8095 47.5197 19.6207 46.4559 20.6556L36.5266 30.373L38.8748 44.096C39.1239 45.5622 37.5905 46.6835 36.2774 45.9839L24 39.5057Z"></path></g></svg>',"reorder-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 5L12 0L7 5H11V9H13V5H17Z"></path><path d="M13 19V15H11V19H7L12 24L17 19H13Z"></path></svg>',"restoredown-16x16":'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15 6C15 6.55 14.55 7 14 7H10C9.45 7 9 6.55 9 6V2C9 1.45 9.45 1 10 1C10.55 1 11 1.45 11 2V3.59L13.29 1.29C13.49 1.09 13.74 1 14 1C14.26 1 14.51 1.1 14.71 1.29C15.1 1.68 15.1 2.31 14.71 2.7L12.42 4.99H14.01C14.56 4.99 15.01 5.44 15.01 5.99L15 6ZM6 9H2C1.45 9 0.999998 9.45 0.999998 10C0.999998 10.55 1.45 11 2 11H3.59L1.29 13.29C0.899998 13.68 0.899998 14.31 1.29 14.7C1.68 15.09 2.31 15.09 2.7 14.7L4.99 12.41V14C4.99 14.55 5.44 15 5.99 15C6.54 15 6.99 14.55 6.99 14V10C6.99 9.45 6.54 9 5.99 9H6Z"></path></svg>',"search-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2C9.6 2 6 5.6 6 10C6 11.8 6.6 13.5 7.7 14.9L2.3 20.3C1.9 20.7 1.9 21.3 2.3 21.7C2.5 21.9 2.7 22 3 22C3.3 22 3.5 21.9 3.7 21.7L9.1 16.3C10.5 17.4 12.2 18 14 18C18.4 18 22 14.4 22 10C22 5.6 18.4 2 14 2ZM14 16C10.7 16 8 13.3 8 10C8 6.7 10.7 4 14 4C17.3 4 20 6.7 20 10C20 13.3 17.3 16 14 16Z"></path></svg>',"smiley-rate1-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 4.9938C4 4.44362 4.45 3.99348 5 3.99348H6.59L5.3 2.70306C4.91 2.31293 4.91 1.68272 5.3 1.2926C5.69 0.902468 6.32 0.902468 6.71 1.2926L9.71 4.29357C9.8 4.3836 9.88 4.49364 9.93 4.62368C10.03 4.86376 10.03 5.14385 9.93 5.38393C9.88 5.50397 9.81 5.614 9.71 5.71404L6.71 8.71501C6.51 8.91508 6.26 9.00511 6 9.00511C5.74 9.00511 5.49 8.90508 5.29 8.71501C4.9 8.32489 4.9 7.69468 5.29 7.30456L6.58 6.01413H4.99C4.44 6.01413 3.99 5.56399 3.99 5.01381L4 4.9938ZM14.08 5.37393C14.13 5.49397 14.2 5.604 14.3 5.70403L17.3 8.70501C17.5 8.90508 17.75 8.99511 18.01 8.99511C18.27 8.99511 18.52 8.89507 18.72 8.70501C19.11 8.31488 19.11 7.68468 18.72 7.29455L17.43 6.00413H19.02C19.57 6.00413 20.02 5.55399 20.02 5.00381C20.02 4.45363 19.57 4.00348 19.02 4.00348H17.43L18.72 2.71306C19.11 2.32293 19.11 1.69273 18.72 1.3026C18.33 0.912471 17.7 0.912471 17.31 1.3026L14.31 4.30358C14.22 4.39361 14.14 4.50364 14.09 4.63368C13.99 4.87376 13.99 5.15385 14.09 5.39393L14.08 5.37393ZM22 14.9971V20.999C22 22.6496 20.65 24 19 24H5C3.35 24 2 22.6496 2 20.999V14.9971C2 13.3465 3.35 11.9961 5 11.9961H19C20.65 11.9961 22 13.3465 22 14.9971ZM19 13.9967H16V16.9977H20V14.9971C20 14.4469 19.55 13.9967 19 13.9967ZM14 16.9977V13.9967H10V16.9977H14ZM10 18.9984V21.9993H14V18.9984H10ZM4 14.9971V16.9977H8V13.9967H5C4.45 13.9967 4 14.4469 4 14.9971ZM5 21.9993H8V18.9984H4V20.999C4 21.5492 4.45 21.9993 5 21.9993ZM20 20.999V18.9984H16V21.9993H19C19.55 21.9993 20 21.5492 20 20.999Z"></path></svg>',"smiley-rate10-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 23C6.85721 23 1.15412 19.9621 0.0134987 13.1669C-0.0765501 12.6272 0.293651 12.1076 0.833944 12.0177C1.38424 11.9277 1.89452 12.2975 1.98457 12.8371C2.92508 18.4732 7.69767 20.9914 12 20.9914C16.3023 20.9914 21.0749 18.4732 22.0154 12.8371C22.1055 12.2975 22.6158 11.9277 23.1661 12.0177C23.7063 12.1076 24.0765 12.6272 23.9865 13.1669C22.8559 19.9521 17.1428 23 11.99 23H12.01ZM21.165 6.15177C22.3056 5.01257 22.3056 3.16386 21.165 2.02465L21.0049 1.85477C19.9143 0.765533 18.1633 0.725561 17.0227 1.71487C15.8821 0.715568 14.1312 0.765533 13.0406 1.85477L12.8705 2.01466C11.7299 3.15386 11.7299 5.00257 12.8705 6.14178L17.0227 10.2889L21.175 6.14178L21.165 6.15177ZM15.742 3.27378L17.0127 4.54289L18.2834 3.27378C18.6436 2.91403 19.2239 2.91403 19.5841 3.27378L19.7442 3.43367C20.1044 3.79342 20.1044 4.37301 19.7442 4.73276L17.0127 7.46086L14.2812 4.73276C13.921 4.37301 13.921 3.79342 14.2812 3.43367L14.4413 3.27378C14.6214 3.09391 14.8515 3.00397 15.0917 3.00397C15.3318 3.00397 15.5619 3.09391 15.742 3.27378ZM11.1595 6.15177C12.3002 5.01257 12.3002 3.16386 11.1595 2.02465L10.9995 1.85477C9.90886 0.765533 8.15792 0.725561 7.0173 1.71487C5.87668 0.715568 4.12573 0.765533 3.03514 1.85477L2.86505 2.01466C1.72443 3.15386 1.72443 5.00257 2.86505 6.14178L7.0173 10.2889L11.1695 6.14178L11.1595 6.15177ZM5.7366 3.27378L7.00729 4.54289L8.27798 3.27378C8.63818 2.91403 9.21849 2.91403 9.57869 3.27378L9.73877 3.43367C10.099 3.79342 10.099 4.37301 9.73877 4.73276L7.00729 7.46086L4.27581 4.73276C3.91562 4.37301 3.91562 3.79342 4.27581 3.43367L4.4359 3.27378C4.61599 3.09391 4.84612 3.00397 5.08625 3.00397C5.32638 3.00397 5.5565 3.09391 5.7366 3.27378Z"></path></svg>',"smiley-rate2-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_15894_140103)"><path d="M4.88291 4.51001C4.47291 4.51001 4.08291 4.25001 3.94291 3.84001C3.76291 3.32001 4.03291 2.75001 4.55291 2.57001L8.32291 1.25001C8.84291 1.06001 9.41291 1.34001 9.59291 1.86001C9.77291 2.38001 9.50291 2.95001 8.98291 3.13001L5.20291 4.45001C5.09291 4.49001 4.98291 4.51001 4.87291 4.51001H4.88291ZM19.8129 3.89001C20.0229 3.38001 19.7729 2.79001 19.2629 2.59001L15.5529 1.07001C15.0429 0.860007 14.4529 1.11001 14.2529 1.62001C14.0429 2.13001 14.2929 2.72001 14.8029 2.92001L18.5029 4.43001C18.6229 4.48001 18.7529 4.50001 18.8829 4.50001C19.2729 4.50001 19.6529 4.27001 19.8129 3.88001V3.89001ZM3.50291 6.00001C2.64291 6.37001 1.79291 6.88001 1.00291 7.48001C0.79291 7.64001 0.64291 7.87001 0.59291 8.14001C0.48291 8.73001 0.87291 9.29001 1.45291 9.40001C2.04291 9.51001 2.60291 9.12001 2.71291 8.54001C2.87291 7.69001 3.12291 6.83001 3.50291 5.99001V6.00001ZM21.0429 8.55001C21.6029 10.48 24.2429 8.84001 22.7529 7.48001C21.9629 6.88001 21.1129 6.37001 20.2529 6.00001C20.6329 6.84001 20.8829 7.70001 21.0429 8.55001ZM21.5729 13.2C21.2529 14.2 22.5429 15.09 23.3629 14.39C23.8529 14 23.9229 13.29 23.5429 12.81C21.7429 10.67 22.1329 10.55 21.5829 13.2H21.5729ZM1.75291 11C1.22291 11.79 -0.14709 12.64 0.0129102 13.75C0.15291 14.36 0.75291 14.74 1.35291 14.6C2.98291 14.1 1.80291 12.22 1.75291 11ZM19.8829 17C19.8829 13.14 16.2929 10 11.8829 10C7.47291 10 3.88291 13.14 3.88291 17C3.88291 20.86 7.47291 24 11.8829 24C16.2929 24 19.8829 20.86 19.8829 17ZM17.8829 17C17.8829 19.76 15.1929 22 11.8829 22C8.57291 22 5.88291 19.76 5.88291 17C5.88291 14.24 8.57291 12 11.8829 12C15.1929 12 17.8829 14.24 17.8829 17Z"></path></g><defs><clipPath id="clip0_15894_140103"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg>',"smiley-rate3-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.01915 7C6.46961 7 6.01998 6.55 6.01998 6V2C6.01998 1.45 6.46961 1 7.01915 1C7.56869 1 8.01832 1.45 8.01832 2V6C8.01832 6.55 7.56869 7 7.01915 7ZM18.01 6V2C18.01 1.45 17.5604 1 17.0108 1C16.4613 1 16.0117 1.45 16.0117 2V6C16.0117 6.55 16.4613 7 17.0108 7C17.5604 7 18.01 6.55 18.01 6ZM16.4213 21.58L18.01 19.99L19.2989 21.28C19.6886 21.67 20.3181 21.67 20.7077 21.28C21.0974 20.89 21.0974 20.26 20.7077 19.87L19.4188 18.58C18.6395 17.8 17.3705 17.8 16.5912 18.58L15.0025 20.17L13.4138 18.58C12.6345 17.8 11.3655 17.8 10.5862 18.58L8.9975 20.17L7.40883 18.58C6.62948 17.8 5.36053 17.8 4.58118 18.58L3.29226 19.87C2.90258 20.26 2.90258 20.89 3.29226 21.28C3.68193 21.67 4.31141 21.67 4.70108 21.28L5.99001 19.99L7.57868 21.58C8.35803 22.36 9.62698 22.36 10.4063 21.58L11.995 19.99L13.5837 21.58C13.9734 21.97 14.4829 22.16 14.9925 22.16C15.5021 22.16 16.0117 21.97 16.4013 21.58H16.4213Z"></path></svg>',"smiley-rate4-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.06927 7C6.51927 7 6.06927 6.55 6.06927 6V2C6.06927 1.45 6.51927 1 7.06927 1C7.61927 1 8.06927 1.45 8.06927 2V6C8.06927 6.55 7.61927 7 7.06927 7ZM18.0693 6V2C18.0693 1.45 17.6193 1 17.0693 1C16.5193 1 16.0693 1.45 16.0693 2V6C16.0693 6.55 16.5193 7 17.0693 7C17.6193 7 18.0693 6.55 18.0693 6ZM22.5693 21.9C23.0693 21.66 23.2793 21.07 23.0393 20.57C21.1093 16.52 16.9093 14 12.0693 14C7.22927 14 3.02927 16.52 1.09927 20.57C0.859273 21.07 1.06927 21.67 1.56927 21.9C2.06927 22.14 2.65927 21.93 2.89927 21.43C4.49927 18.08 8.00927 16 12.0593 16C16.1093 16 19.6293 18.08 21.2193 21.43C21.3893 21.79 21.7493 22 22.1193 22C22.2593 22 22.4093 21.97 22.5493 21.9H22.5693Z"></path></svg>',"smiley-rate5-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.00572 7C6.45572 7 6.00572 6.55 6.00572 6V2C6.00572 1.45 6.45572 1 7.00572 1C7.55572 1 8.00572 1.45 8.00572 2V6C8.00572 6.55 7.55572 7 7.00572 7ZM18.0057 6V2C18.0057 1.45 17.5557 1 17.0057 1C16.4557 1 16.0057 1.45 16.0057 2V6C16.0057 6.55 16.4557 7 17.0057 7C17.5557 7 18.0057 6.55 18.0057 6ZM19.9457 21.33C20.1257 20.81 19.8557 20.24 19.3357 20.05C14.5457 18.35 9.45572 18.35 4.66572 20.05C4.14572 20.23 3.87572 20.81 4.05572 21.33C4.23572 21.85 4.80572 22.12 5.33572 21.94C9.69572 20.4 14.3057 20.4 18.6657 21.94C18.7757 21.98 18.8857 22 18.9957 22C19.4057 22 19.7957 21.74 19.9357 21.33H19.9457Z"></path></svg>',"smiley-rate6-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 7C6.45 7 6 6.55 6 6V2C6 1.45 6.45 1 7 1C7.55 1 8 1.45 8 2V6C8 6.55 7.55 7 7 7ZM18 6V2C18 1.45 17.55 1 17 1C16.45 1 16 1.45 16 2V6C16 6.55 16.45 7 17 7C17.55 7 18 6.55 18 6ZM21 21C21 20.45 20.55 20 20 20H4C3.45 20 3 20.45 3 21C3 21.55 3.45 22 4 22H20C20.55 22 21 21.55 21 21Z"></path></svg>',"smiley-rate7-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.0022 23.99C11.452 23.99 11.0018 23.5402 11.0018 22.9904C11.0018 22.4407 11.452 21.9909 12.0022 21.9909C16.3137 21.9909 21.0755 19.472 22.0158 13.8344C22.1058 13.2947 22.616 12.9248 23.1662 13.0148C23.7064 13.1047 24.0765 13.6245 23.9865 14.1643C22.8561 20.9513 17.144 24 11.9922 24L12.0022 23.99ZM8.00072 5.99783V1.99957C8.00072 1.4498 7.55056 1 7.00036 1C6.45016 1 6 1.4498 6 1.99957V5.99783C6 6.54759 6.45016 6.99739 7.00036 6.99739C7.55056 6.99739 8.00072 6.54759 8.00072 5.99783ZM18.0043 5.99783V1.99957C18.0043 1.4498 17.5542 1 17.004 1C16.4538 1 16.0036 1.4498 16.0036 1.99957V5.99783C16.0036 6.54759 16.4538 6.99739 17.004 6.99739C17.5542 6.99739 18.0043 6.54759 18.0043 5.99783Z"></path></svg>',"smiley-rate8-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 24C6.85721 24 1.15412 20.96 0.0134987 14.16C-0.0765501 13.62 0.293651 13.1 0.833944 13.01C1.38424 12.92 1.89452 13.29 1.98457 13.83C2.92508 19.47 7.69767 21.99 12 21.99C16.3023 21.99 21.0749 19.47 22.0154 13.83C22.1055 13.29 22.6158 12.92 23.1661 13.01C23.7063 13.1 24.0765 13.62 23.9865 14.16C22.8559 20.95 17.1428 24 11.99 24H12.01ZM8.00783 6V2C8.00783 1.45 7.55759 1 7.00729 1C6.45699 1 6.00675 1.45 6.00675 2V6C6.00675 6.55 6.45699 7 7.00729 7C7.55759 7 8.00783 6.55 8.00783 6ZM18.0133 6V2C18.0133 1.45 17.563 1 17.0127 1C16.4624 1 16.0122 1.45 16.0122 2V6C16.0122 6.55 16.4624 7 17.0127 7C17.563 7 18.0133 6.55 18.0133 6Z"></path></svg>',"smiley-rate9-24x24":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 24C6.85767 24 1.15509 20.96 0.0145752 14.16C-0.0354475 13.87 0.0445888 13.57 0.234675 13.35C0.424761 13.13 0.704888 13 0.995019 13H23.005C23.2951 13 23.5752 13.13 23.7653 13.35C23.9554 13.57 24.0354 13.87 23.9854 14.16C22.8549 20.95 17.1423 24 11.99 24H12.01ZM2.25559 15C3.61621 19.82 8.0182 22 12.01 22C16.0018 22 20.4038 19.82 21.7644 15H2.25559ZM8.00819 6V2C8.00819 1.45 7.55799 1 7.00774 1C6.45749 1 6.00729 1.45 6.00729 2V6C6.00729 6.55 6.45749 7 7.00774 7C7.55799 7 8.00819 6.55 8.00819 6ZM18.0127 6V2C18.0127 1.45 17.5625 1 17.0123 1C16.462 1 16.0118 1.45 16.0118 2V6C16.0118 6.55 16.462 7 17.0123 7C17.5625 7 18.0127 6.55 18.0127 6Z"></path></svg>'}),Er("v2",Oo),Pr.registerIcons(Oo);class qo extends po{constructor(e){super(e),this.previousJSON={},this.isSurveyUpdated=!1,this.createSurvey(e),this.updateSurvey(e,{}),this.rootRef={current:null},this.rootNodeId=e.id||null,this.rootNodeClassName=e.className||""}getStateElement(){return this.survey}onSurveyUpdated(){if(this.survey){const e=this.rootRef.current;e&&this.survey.afterRenderSurvey(e),this.survey.startTimerFromUI(),this.setSurveyEvents()}}shouldComponentUpdate(e,t){return!!super.shouldComponentUpdate(e,t)&&(this.isModelJSONChanged(e)&&(this.destroySurvey(),this.createSurvey(e),this.updateSurvey(e,{}),this.isSurveyUpdated=!0),!0)}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateSurvey(this.props,e),this.isSurveyUpdated&&(this.onSurveyUpdated(),this.isSurveyUpdated=!1)}componentDidMount(){super.componentDidMount(),this.onSurveyUpdated()}destroySurvey(){this.survey&&(this.survey.renderCallback=void 0,this.survey.onPartialSend.clear(),this.survey.stopTimer(),this.survey.destroyResizeObserver())}componentWillUnmount(){super.componentWillUnmount(),this.destroySurvey()}doRender(){let e;e="completed"==this.survey.state?this.renderCompleted():"completedbefore"==this.survey.state?this.renderCompletedBefore():"loading"==this.survey.state?this.renderLoading():"empty"==this.survey.state?this.renderEmptySurvey():this.renderSurvey();const t=this.survey.backgroundImage?Gr("div",{className:this.css.rootBackgroundImage,style:this.survey.backgroundImageStyle}):null,s="basic"===this.survey.headerView?Gr(Eo,{survey:this.survey}):null;let n=Gr("div",{className:"sv_custom_header"});this.survey.hasLogo&&(n=null);const i=this.survey.getRootCss(),r=this.rootNodeClassName?this.rootNodeClassName+" "+i:i;return Gr("div",{id:this.rootNodeId,ref:this.rootRef,className:r,style:this.survey.themeVariables,lang:this.survey.locale||"en",dir:this.survey.localeDir},Gr(jo,{disabled:this.survey.rootScrollDisabled},this.survey.needRenderIcons?Gr(Do,null):null,Gr(No,null),Gr("div",{className:this.survey.wrapperFormCss},t,Gr("form",{onSubmit:function(e){e.preventDefault()}},Gr(jo,{disabled:this.survey.formScrollDisabled},n,Gr("div",{className:this.css.container},s,Gr(Lo,{survey:this.survey,container:"header",needRenderWrapper:!1}),e,Gr(Lo,{survey:this.survey,container:"footer",needRenderWrapper:!1})))),Gr(Ao,{notifier:this.survey.notifier}))))}renderElement(){return this.doRender()}get css(){return this.survey.css}set css(e){this.survey.css=e}renderCompleted(){return this.survey.showCompletedPage?Gr(Kr,null,Gr("div",{dangerouslySetInnerHTML:{__html:this.survey.processedCompletedHtml},className:this.survey.completedCss}),Gr(Lo,{survey:this.survey,container:"completePage",needRenderWrapper:!1})):null}renderCompletedBefore(){return Gr("div",{dangerouslySetInnerHTML:{__html:this.survey.processedCompletedBeforeHtml},className:this.survey.completedBeforeCss})}renderLoading(){return Gr("div",{dangerouslySetInnerHTML:{__html:this.survey.processedLoadingHtml},className:this.survey.loadingBodyCss})}renderSurvey(){var e=this.survey.activePage?this.renderPage(this.survey.activePage):null;this.survey.isShowStartingPage;var t=this.survey.activePage?this.survey.activePage.id:"";let s=this.survey.bodyCss;const n={};return this.survey.renderedWidth&&(n.maxWidth=this.survey.renderedWidth),Gr("div",{className:this.survey.bodyContainerCss},Gr(Lo,{survey:this.survey,container:"left"}),Gr("div",{className:"sv-components-column sv-components-column--expandable"},Gr(Lo,{survey:this.survey,container:"center"}),Gr("div",{id:t,className:s,style:n},Gr(Lo,{survey:this.survey,container:"contentTop"}),e,Gr(Lo,{survey:this.survey,container:"contentBottom"}),this.survey.showBrandInfo?Gr(ko,null):null)),Gr(Lo,{survey:this.survey,container:"right"}))}renderPage(e){return ho.Instance.createElement(this.survey.pageComponent||"sv-page",{survey:this.survey,page:e,css:this.css,creator:this})}renderEmptySurvey(){return Gr("div",{className:this.css.bodyEmpty},this.survey.emptySurveyText)}createSurvey(e){e||(e={}),this.previousJSON={},e?e.model?this.survey=e.model:e.json&&(this.previousJSON=e.json,this.survey=new In(e.json)):this.survey=new In,e.css&&(this.survey.css=this.css)}isModelJSONChanged(e){return e.model?this.survey!==e.model:!!e.json&&!a.isTwoValueEquals(e.json,this.previousJSON)}updateSurvey(e,t){if(e)for(var s in t=t||{},e)"model"!=s&&"children"!=s&&"json"!=s&&("css"!=s?e[s]!==t[s]&&(0==s.indexOf("on")&&this.survey[s]&&this.survey[s].add?(t[s]&&this.survey[s].remove(t[s]),this.survey[s].add(e[s])):this.survey[s]=e[s]):(this.survey.mergeValues(e.css,this.survey.getCss()),this.survey.updateNavigationCss(),this.survey.updateElementCss()))}setSurveyEvents(){var e=this;this.survey.renderCallback=function(){var t=e.state&&e.state.modelChanged?e.state.modelChanged:0;e.setState({modelChanged:t+1})},this.survey.onPartialSend.add(t=>{e.state&&e.setState(e.state)})}createQuestionElement(e){return Ro.Instance.createQuestion(e.isDefaultRendering()?e.getTemplate():e.getComponentName(),{question:e,isDisplayMode:e.isInputReadOnly,creator:this})}renderError(e,t,s,n){return ho.Instance.createElement(this.survey.questionErrorComponent,{key:e,error:t,cssClasses:s,element:n})}questionTitleLocation(){return this.survey.questionTitleLocation}questionErrorLocation(){return this.survey.questionErrorLocation}}function Mo(e,t,s={processEsc:!0,disableTabStop:!1}){return t&&t.disableTabStop||s&&s.disableTabStop?lo(e,{tabIndex:-1}):(s=Object.assign({},s),lo(e,{tabIndex:0,onKeyUp:e=>(e.preventDefault(),e.stopPropagation(),lt(e,s),!1),onKeyDown:e=>function(e,t={processEsc:!0}){if(t&&(t.__keyDownReceived=!0),e.target&&"true"===e.target.contentEditable)return;var s=e.which||e.keyCode;const n=[13,32];t.processEsc&&n.push(27),-1!==n.indexOf(s)&&e.preventDefault()}(e,s),onBlur:e=>ot(e)}))}ho.Instance.registerElement("survey",e=>Gr(qo,e));class Fo extends Jr{constructor(e){super(e),this.updateStateFunction=null,this.state={update:0}}get survey(){return this.props.survey}get css(){return this.props.css||this.survey.css}componentDidMount(){if(this.survey){var e=this;this.updateStateFunction=function(){e.setState({update:e.state.update+1})},this.survey.onPageVisibleChanged.add(this.updateStateFunction)}}componentWillUnmount(){this.survey&&this.updateStateFunction&&(this.survey.onPageVisibleChanged.remove(this.updateStateFunction),this.updateStateFunction=null)}}class Bo extends go{constructor(e){super(e),this.circleLength=440}getStateElement(){return this.timerModel}get timerModel(){return this.props.model}get progress(){return-this.timerModel.progress*this.circleLength}render(){if(!this.timerModel.isRunning)return null;let e=Gr("div",{className:this.timerModel.survey.getCss().timerRoot},this.timerModel.text);if(this.timerModel.showTimerAsClock){let t={strokeDasharray:this.circleLength,strokeDashoffset:this.progress};const s=this.timerModel.showProgress?Gr(fo,{className:this.timerModel.getProgressCss(),style:t,iconName:"icon-timercircle",size:"auto"}):null;e=Gr("div",{className:this.timerModel.rootCss},s,Gr("div",{className:this.timerModel.textContainerCss},Gr("span",{className:this.timerModel.majorTextCss},this.timerModel.clockMajorText),this.timerModel.clockMinorText?Gr("span",{className:this.timerModel.minorTextCss},this.timerModel.clockMinorText):null))}return e}}ho.Instance.registerElement("sv-timerpanel",e=>Gr(Bo,e));class zo extends po{constructor(e){super(e),this.element.cssClasses,this.rootRef={current:null}}getStateElement(){return this.element}get element(){return this.props.element}get index(){return this.props.index}get row(){return this.props.row}get survey(){return this.props.survey}get creator(){return this.props.creator}get css(){return this.props.css}componentDidMount(){super.componentDidMount(),this.rootRef.current&&this.element.setWrapperElement(this.rootRef.current)}componentWillUnmount(){super.componentWillUnmount(),this.element.setWrapperElement(void 0)}shouldComponentUpdate(e,t){return!!super.shouldComponentUpdate(e,t)&&(e.element!==this.element&&(e.element&&e.element.setWrapperElement(this.rootRef.current),this.element&&this.element.setWrapperElement(void 0)),this.element.cssClasses,!0)}renderElement(){const e=this.element,t=this.createElement(e,this.index);return Gr("div",{className:e.cssClassesValue.questionWrapper,style:e.rootStyle,"data-key":e.name+this.index,onFocus:()=>{const t=e;t&&t.isQuestion&&t.focusIn()},ref:this.rootRef},t)}createElement(e,t){if(!this.row.isNeedRender)return ho.Instance.createElement(e.skeletonComponentName,{element:e,css:this.css});let s=e.getTemplate();return ho.Instance.isElementRegistered(s)||(s="question"),ho.Instance.createElement(s,{element:e,creator:this.creator,survey:this.survey,css:this.css})}}class Ho extends po{constructor(e){super(e),this.rootRef={current:null},this.recalculateCss()}recalculateCss(){this.row.visibleElements.map(e=>e.cssClasses)}getStateElement(){return this.row}get row(){return this.props.row}get survey(){return this.props.survey}get creator(){return this.props.creator}get css(){return this.props.css}canRender(){return!!this.row&&!!this.survey&&!!this.creator}renderElementContent(){const e=this.row.visibleElements.map((e,t)=>Gr(zo,{element:e,index:t,row:this.row,survey:this.survey,creator:this.creator,css:this.css,key:e.id}));return Gr("div",{ref:this.rootRef,className:this.row.getRowCss()},e)}renderElement(){const e=this.survey,t=this.renderElementContent();return co.wrapRow(e,t,this.row)||t}componentDidMount(){super.componentDidMount();var e=this.rootRef.current;if(this.rootRef.current&&this.row.setRootElement(this.rootRef.current),e&&!this.row.isNeedRender){var t=e;this.lazyRenderingTimeout=setTimeout(()=>{this.row.startLazyRendering(t)},10)}}shouldComponentUpdate(e,t){return!!super.shouldComponentUpdate(e,t)&&(e.row!==this.row&&(e.row.isNeedRender=this.row.isNeedRender,e.row.setRootElement(this.rootRef.current),this.row.setRootElement(void 0),this.stopLazyRendering()),this.recalculateCss(),!0)}stopLazyRendering(){clearTimeout(this.lazyRenderingTimeout),this.row.stopLazyRendering(),this.row.isNeedRender=!this.row.isLazyRendering()}componentWillUnmount(){const e=this.isCurrentStateElement(this.getStateElement());super.componentWillUnmount(),e&&(this.row.setRootElement(void 0),this.stopLazyRendering())}createElement(e,t){const s=t?"-"+t:0;var n=e.getType();return ho.Instance.isElementRegistered(n)||(n="question"),ho.Instance.createElement(n,{key:e.name+s,element:e,creator:this.creator,survey:this.survey,css:this.css})}}class Qo extends po{constructor(e){super(e),this.rootRef={current:null}}getStateElement(){return this.panelBase}canUsePropInState(e){return"elements"!==e&&super.canUsePropInState(e)}get survey(){return this.getSurvey()}get creator(){return this.props.creator}get css(){return this.getCss()}get panelBase(){return this.getPanelBase()}getPanelBase(){return this.props.element||this.props.question}getSurvey(){return this.props.survey||(this.panelBase?this.panelBase.survey:null)}getCss(){return this.props.css}componentDidMount(){super.componentDidMount(),this.doAfterRender()}componentWillUnmount(){super.componentWillUnmount();var e=this.rootRef.current;e&&e.removeAttribute("data-rendered")}componentDidUpdate(e,t){super.componentDidUpdate(e,t),e.page&&this.survey&&this.survey.activePage&&e.page.id===this.survey.activePage.id||this.doAfterRender()}doAfterRender(){var e=this.rootRef.current;e&&this.survey&&(this.panelBase.isPanel?this.panelBase.afterRender(e):this.survey.afterRenderPage(e))}getIsVisible(){return this.panelBase.isVisible}canRender(){return super.canRender()&&!!this.survey&&!!this.panelBase&&!!this.panelBase.survey&&this.getIsVisible()}renderRows(e){return this.panelBase.visibleRows.map(t=>this.createRow(t,e))}createRow(e,t){return Gr(Ho,{key:e.id,row:e,survey:this.survey,creator:this.creator,css:t})}}class Uo extends po{getStateElement(){return this.props.counter}renderElement(){return Gr("div",{className:this.props.remainingCharacterCounter},this.props.counter.remainingCharacterCounter)}}ho.Instance.registerElement("sv-character-counter",e=>Gr(Uo,e));class Wo extends po{constructor(e){super(e),this.initialValue=this.viewModel.getTextValue()||"",this.textareaRef={current:null}}get viewModel(){return this.props.viewModel}canRender(){return!!this.viewModel.question}componentDidMount(){super.componentDidMount();let e=this.textareaRef.current;e&&this.viewModel.setElement(e)}componentWillUnmount(){super.componentWillUnmount(),this.viewModel.resetElement()}renderElement(){return Gr("textarea",{id:this.viewModel.id,className:this.viewModel.className,ref:this.textareaRef,disabled:this.viewModel.isDisabledAttr,readOnly:this.viewModel.isReadOnlyAttr,rows:this.viewModel.rows,cols:this.viewModel.cols,placeholder:this.viewModel.placeholder,maxLength:this.viewModel.maxLength,defaultValue:this.initialValue,onChange:e=>{this.viewModel.onTextAreaInput(e)},onFocus:e=>{this.viewModel.onTextAreaFocus(e)},onBlur:e=>{this.viewModel.onTextAreaBlur(e)},onKeyDown:e=>{this.viewModel.onTextAreaKeyDown(e)},"aria-required":this.viewModel.ariaRequired,"aria-label":this.viewModel.ariaLabel,"aria-labelledby":this.viewModel.ariaLabelledBy,"aria-describedby":this.viewModel.ariaDescribedBy,"aria-invalid":this.viewModel.ariaInvalid,"aria-errormessage":this.viewModel.ariaErrormessage,style:{resize:this.viewModel.question.resizeStyle}})}}ho.Instance.registerElement("sv-text-area",e=>Gr(Wo,e));class Go extends vo{renderCharacterCounter(){let e=null;return this.question.getMaxLength()&&(e=Gr(Uo,{counter:this.question.characterCounter,remainingCharacterCounter:this.question.cssClasses.remainingCharacterCounter})),e}constructor(e){super(e)}renderElement(){if(this.question.isReadOnlyRenderDiv())return Gr("div",null,this.question.value);const e=this.renderCharacterCounter(),t=this.props.question.textAreaModel;return Gr(Kr,null,Gr(Wo,{viewModel:t}),e)}}class Zo extends go{constructor(e){super(e),this.textAreaModel=this.getTextAreaModel()}canRender(){return!!this.props.question}getTextAreaModel(){return this.props.question.commentTextAreaModel}renderElement(){return this.props.question.isReadOnlyRenderDiv()?Gr("div",null,this.textAreaModel.getTextValue()||""):Gr(Wo,{key:this.getKey(),viewModel:this.textAreaModel})}getKey(){}}class Ko extends Zo{constructor(e){super(e)}getTextAreaModel(){return this.props.question.getCommentTextAreaModel(this.props.item)}getKey(){return this.props.item.normalizedId}}Ro.Instance.registerQuestion("comment",e=>Gr(Go,e));class Jo extends mo{constructor(e){super(e),this.widgetRef={current:null}}_afterRender(){if(this.questionBase.customWidget){let e=this.widgetRef.current;e&&(this.questionBase.customWidget.afterRender(this.questionBase,e),this.questionBase.customWidgetData.isNeedRender=!1)}}componentDidMount(){super.componentDidMount(),this.questionBase&&this._afterRender()}componentDidUpdate(e,t){super.componentDidUpdate(e,t);var s=!!this.questionBase.customWidget&&this.questionBase.customWidget.isDefaultRender;this.questionBase&&!s&&this._afterRender()}componentWillUnmount(){if(super.componentWillUnmount(),this.questionBase.customWidget){let e=this.widgetRef.current;e&&this.questionBase.customWidget.willUnmount(this.questionBase,e)}}canRender(){return super.canRender()&&this.questionBase.visible}renderElement(){let e=this.questionBase.customWidget;if(e.isDefaultRender)return Gr("div",{ref:this.widgetRef},this.creator.createQuestionElement(this.questionBase));let t=null;if(e.widgetJson.render)t=e.widgetJson.render(this.questionBase);else if(e.htmlTemplate){let t={__html:e.htmlTemplate};return Gr("div",{ref:this.widgetRef,dangerouslySetInnerHTML:t})}return Gr("div",{ref:this.widgetRef},t)}}class Yo extends po{get element(){return this.props.element}getRenderedElements(){return[this.element]}renderElement(){const e=this.element,t=e.hasTitle?Gr(To,{element:e}):null,s=e.hasDescriptionUnderTitle?po.renderQuestionDescription(this.element):null,n=e.hasAdditionalTitleToolbar?Gr(Io,{model:e.additionalTitleToolbar}):null,i={width:void 0};return e instanceof ts&&(i.width=e.titleWidth),Gr("div",{className:e.cssHeader,onClick:t=>e.clickTitleFunction&&e.clickTitleFunction(t.nativeEvent),style:i},t,s,n)}}class $o extends go{constructor(e){super(e)}get css(){return this.props.css}get summary(){return this.props.summary}renderElement(){return this.summary?this.summary.isEmpty()?this.renderNoItems():this.renderItems():null}renderItems(){return Gr("div",{className:this.css.summary},this.summary.items.map((e,t)=>this.renderItem(e,t)))}renderNoItems(){const e=this.summary.question;return ho.Instance.createElement("sv-placeholder-"+e.getTemplate(),{cssClasses:this.css,question:e})||Gr("div",null,this.renderLocString(this.summary.noEntry))}renderItem(e,t){const s=e.btnEdit?Gr("button",{className:this.css.summaryRowActionEdit,onClick:()=>e.btnEdit.action(),title:e.btnEdit.title},Gr(fo,{iconName:"icon-editsmall-16x16",iconSize:"auto"})):null,n=e.showRemove&&e.btnRemove?Gr("button",{className:this.css.summaryRowActionDelete,onClick:()=>e.btnRemove.action(),title:e.btnRemove.title},Gr(fo,{iconName:"icon-delete-16x16",iconSize:"auto"})):null;return Gr("div",{className:this.css.summaryRow,key:t},Gr("div",{className:this.css.summaryRowContent},this.renderLocString(e.locText)),Gr("div",{className:this.css.summaryRowActions},s,n))}}ho.Instance.registerElement("sv-singleinput-summary",e=>Gr($o,e));class Xo extends po{constructor(e){super(e)}getStateElement(){return this.props.model}get items(){return this.props.model.actions}get css(){return this.props.css}renderElement(){if(!this.items||!this.items.length)return null;const e=this.renderItems();return Gr("div",{className:this.css.breadcrumbsRoot},e)}renderItems(){const e=[];return this.items.concat([]).forEach((t,s)=>{s&&e.push(Gr(fo,{key:t.renderedId+"_separator",className:this.css.breadcrumbsSeparator,iconName:"arrowright-16x16",size:"auto"})),e.push(Gr(yo,{key:t.renderedId,item:t}))}),e}}ho.Instance.registerElement("sv-breadcrumbs",e=>Gr(Xo,e));class el extends po{static renderQuestionBody(e,t){return t.customWidget?Gr(Jo,{creator:e,question:t}):e.createQuestionElement(t)}constructor(e){super(e),this.isNeedFocus=!1,this.rootRef={current:null}}getStateElement(){return this.question}get question(){return this.props.element}get creator(){return this.props.creator}componentDidMount(){super.componentDidMount(),this.question&&(this.question.react=this),this.doAfterRender()}componentWillUnmount(){super.componentWillUnmount(),this.question&&(this.question.react=null);const e=this.rootRef.current;e&&e.removeAttribute("data-rendered")}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.doAfterRender()}doAfterRender(){if(this.isNeedFocus&&(this.question.isCollapsed||this.question.clickTitleFunction(),this.isNeedFocus=!1),this.question){var e=this.rootRef.current;e&&"r"!==e.getAttribute("data-rendered")&&(e.setAttribute("data-rendered","r"),this.question.afterRender&&this.question.afterRender(e))}}canRender(){return super.canRender()&&!!this.question&&!!this.creator}renderQuestionContent(){let e=this.question;var t={display:this.question.renderedIsExpanded?"":"none"},s=e.cssClasses,n=this.renderQuestion(),i=e&&e.hasComment?this.renderComment(s):null,r=e.hasDescriptionUnderInput?this.renderDescription():null;return Gr("div",{className:e.cssContent||void 0,style:t,"aria-hidden":e.contentAriaHidden,role:"presentation"},n,i,r)}renderElement(){var e=this.question,t=e.cssClasses,s=this.renderHeader(e),n=e.hasTitleOnLeftTop?s:null,i=e.hasTitleOnBottom?s:null;const r=this.question.showErrorsAboveQuestion?this.renderErrors(t,""):null,a=this.question.showErrorsBelowQuestion?this.renderErrors(t,""):null,o=e.getRootStyle(),l=e.singleInputHasActions?this.renderSingleInputBreadcrumbs(e,t):void 0,u=(e.singleInputSummary?this.renderSingleInputSummary(e,t):void 0)||(e.singleInputQuestion?this.renderSingleInputQuestion(e,t):void 0)||this.wrapQuestionContent(this.renderQuestionContent());return Gr(Kr,null,Gr("div",{ref:this.rootRef,id:e.id,className:e.getRootCss(),style:o,"data-name":e.name,role:e.ariaRole,"aria-required":this.question.ariaRequired,"aria-invalid":this.question.ariaInvalid,"aria-label":this.question.ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-describedby":e.ariaDescribedBy,"aria-expanded":e.ariaExpanded},l,r,n,u,i,a))}renderSingleInputQuestion(e,t){const s=e.singleInputQuestion,n=s.id;return Gr(el,{key:n,element:s,creator:this.creator,css:t})}renderSingleInputBreadcrumbs(e,t){return Gr(Xo,{model:e.singleInputActions,css:t})}renderSingleInputSummary(e,t){return Gr($o,{summary:e.singleInputSummary,creator:this.creator,css:t})}wrapElement(e){const t=this.question.survey;let s=null;return t&&(s=co.wrapElement(t,e,this.question)),null!=s?s:e}wrapQuestionContent(e){const t=this.question.survey;let s=null;return t&&(s=co.wrapQuestionContent(t,e,this.question)),null!=s?s:e}renderQuestion(){return el.renderQuestionBody(this.creator,this.question)}renderDescription(){return po.renderQuestionDescription(this.question)}renderComment(e){const t=po.renderLocString(this.question.locCommentText);return Gr("div",{className:this.question.getCommentAreaCss()},Gr("div",null,t),Gr(Zo,{question:this.question,cssClasses:e,isDisplayMode:this.question.isInputReadOnly}))}renderHeader(e){return e.singleInputHideHeader?null:Gr(Yo,{element:e})}renderErrors(e,t){return Gr(tl,{element:this.question,cssClasses:e,creator:this.creator,location:t,id:this.question.id+"_errors"})}}ho.Instance.registerElement("question",e=>Gr(el,e));class tl extends go{constructor(e){super(e),this.state=this.getState()}get id(){return this.props.element.id+"_errors"}get element(){return this.props.element}get creator(){return this.props.creator}getState(e=null){return e?{error:e.error+1}:{error:0}}canRender(){return!!this.element&&this.element.hasVisibleErrors}componentWillUnmount(){}renderElement(){const e=[];for(let t=0;t<this.element.renderedErrors.length;t++){const s="error"+t;e.push(this.creator.renderError(s,this.element.renderedErrors[t],this.cssClasses,this.element))}return Gr("div",{className:this.element.cssError,id:this.id},e)}}class sl extends go{constructor(e){super(e)}getStateElement(){return this.question}get question(){return this.getQuestion()}get creator(){return this.props.creator}getQuestion(){return this.props.question}get itemCss(){return this.props.itemCss}componentDidMount(){super.componentDidMount(),this.doAfterRender()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.doAfterRender()}doAfterRender(){}canRender(){return!!this.question}renderContent(){return Gr(Kr,null,this.renderQuestion())}getShowErrors(){return this.question.isVisible}renderQuestion(){return el.renderQuestionBody(this.creator,this.question)}}class nl extends sl{constructor(e){super(e),this.cellRef={current:null}}componentWillUnmount(){if(super.componentWillUnmount(),this.question){var e=this.cellRef.current;e&&e.removeAttribute("data-rendered")}}renderCellContent(){return Gr("div",{className:this.props.cell.cellQuestionWrapperClassName},this.renderQuestion())}renderElement(){var e=this.getCellStyle();const t=this.props.cell;return Gr("td",{ref:this.cellRef,className:this.itemCss,colSpan:t.colSpans,title:t.getTitle(),style:e,onFocus:()=>{t.focusIn()}},this.wrapCell(this.props.cell,this.renderCellContent()))}getCellStyle(){return null}getHeaderText(){return""}wrapCell(e,t){if(!e)return t;const s=this.question.survey;let n=null;return s&&(n=co.wrapMatrixCell(s,t,e,this.props.reason)),null!=n?n:t}}class il extends Jr{constructor(e){super(e),this.state={changed:0},this.question&&this.registerCallback(this.question)}get question(){return this.props.question}update(){this.setState({changed:this.state.changed+1})}getQuestionPropertiesToTrack(){return["errors"]}registerCallback(e){e.registerFunctionOnPropertiesValueChanged(this.getQuestionPropertiesToTrack(),()=>{this.update()},"__reactSubscription")}unRegisterCallback(e){e.unRegisterFunctionOnPropertiesValueChanged(this.getQuestionPropertiesToTrack(),"__reactSubscription")}componentDidUpdate(e){e.question&&e.question!==this.question&&this.unRegisterCallback(e.cell),this.question&&this.registerCallback(this.question)}componentWillUnmount(){this.question&&this.unRegisterCallback(this.question)}render(){return Gr(tl,{element:this.question,creator:this.props.creator,cssClasses:this.question.cssClasses})}}class rl extends Qo{constructor(e){super(e)}getPanelBase(){return this.props.page}get page(){return this.panelBase}renderElement(){var e=this.renderTitle(),t=this.renderDescription(),s=this.renderRows(this.panelBase.cssClasses);const n=Gr(tl,{element:this.panelBase,cssClasses:this.panelBase.cssClasses,creator:this.creator});return Gr("div",{ref:this.rootRef,className:this.page.cssRoot},e,t,n,s)}renderTitle(){return Gr(To,{element:this.page})}renderDescription(){if(!this.page._showDescription)return null;var e=po.renderLocString(this.page.locDescription);return Gr("div",{className:this.panelBase.cssClasses.page.description},e)}}ho.Instance.registerElement("sv-page",e=>Gr(rl,e));class al extends Qo{constructor(e){super(e),this.hasBeenExpanded=!1}get panel(){return this.panelBase}renderElement(){const e=this.renderHeader(),t=Gr(tl,{element:this.panelBase,cssClasses:this.panelBase.cssClasses,creator:this.creator}),s={paddingLeft:this.panel.innerPaddingLeft,display:this.panel.renderedIsExpanded?void 0:"none"};let n=null;if(this.panel.renderedIsExpanded){const e=this.renderRows(this.panelBase.cssClasses),t=this.panelBase.cssClasses.panel.content;n=this.renderContent(s,e,t)}return Gr("div",{ref:this.rootRef,className:this.panelBase.getContainerCss(),onFocus:()=>{this.panelBase&&this.panelBase.focusIn()},id:this.panelBase.id},this.panel.showErrorsAbovePanel?t:null,e,this.panel.showErrorsAbovePanel?null:t,n)}renderHeader(){return this.panel.hasTitle||this.panel.hasDescription?Gr(Yo,{element:this.panel}):null}wrapElement(e){const t=this.panel.survey;let s=null;return t&&(s=co.wrapElement(t,e,this.panel)),null!=s?s:e}renderContent(e,t,s){const n=this.renderBottom();return Gr("div",{style:e,className:s,id:this.panel.contentId,role:this.panel.ariaRole,"aria-labelledby":this.panel.ariaLabelledBy,"aria-label":this.panel.ariaLabel},t,n)}renderTitle(){return this.panelBase.title?Gr(To,{element:this.panelBase}):null}renderDescription(){if(!this.panelBase.description)return null;var e=po.renderLocString(this.panelBase.locDescription);return Gr("div",{className:this.panel.cssClasses.panel.description},e)}renderBottom(){const e=this.panel.getFooterToolbar();return e.hasActions?Gr(Io,{model:e}):null}getIsVisible(){return this.panelBase.getIsContentVisible()}}ho.Instance.registerElement("panel",e=>Gr(al,e));class ol extends al{constructor(e){super(e)}get flowPanel(){return this.panel}componentDidMount(){super.componentDidMount(),this.flowPanel&&(this.flowPanel.onCustomHtmlProducing=function(){return""},this.flowPanel.onGetHtmlForQuestion=this.renderQuestion)}componentWillUnmount(){super.componentWillUnmount(),this.flowPanel&&(this.flowPanel.onCustomHtmlProducing=null,this.flowPanel.onGetHtmlForQuestion=null)}getQuestion(e){return this.flowPanel.getQuestionByName(e)}renderQuestion(e){return"<question>"+e.name+"</question>"}renderRows(){const e=this.renderHtml();return e?[e]:[]}getNodeIndex(){return this.renderedIndex++}renderHtml(){if(!this.flowPanel)return null;const e="<span>"+this.flowPanel.produceHtml()+"</span>";if(!DOMParser)return Gr("div",{dangerouslySetInnerHTML:{__html:e}});const t=(new DOMParser).parseFromString(e,"text/xml");return this.renderedIndex=0,this.renderParentNode(t)}renderNodes(e){const t=[];for(let s=0;s<e.length;s++){const n=this.renderNode(e[s]);n&&t.push(n)}return t}getStyle(e){const t={};return"b"===e.toLowerCase()&&(t.fontWeight="bold"),"i"===e.toLowerCase()&&(t.fontStyle="italic"),"u"===e.toLowerCase()&&(t.textDecoration="underline"),t}renderParentNode(e){const t=e.nodeName.toLowerCase(),s=this.renderNodes(this.getChildDomNodes(e));return"div"===t?Gr("div",{key:this.getNodeIndex()},s):Gr("span",{key:this.getNodeIndex(),style:this.getStyle(t)},s)}renderNode(e){if(!this.hasTextChildNodesOnly(e))return this.renderParentNode(e);const t=e.nodeName.toLowerCase();if("question"===t){const t=this.flowPanel.getQuestionByName(e.textContent);if(!t)return null;const s=Gr(el,{key:t.name,element:t,creator:this.creator,css:this.css});return Gr("span",{key:this.getNodeIndex()},s)}return"div"===t?Gr("div",{key:this.getNodeIndex()},e.textContent):Gr("span",{key:this.getNodeIndex(),style:this.getStyle(t)},e.textContent)}getChildDomNodes(e){const t=[];for(let s=0;s<e.childNodes.length;s++)t.push(e.childNodes[s]);return t}hasTextChildNodesOnly(e){const t=e.childNodes;for(let e=0;e<t.length;e++)if("#text"!==t[e].nodeName.toLowerCase())return!1;return!0}renderContent(e,t){return Gr("f-panel",{style:e},t)}}ho.Instance.registerElement("flowpanel",e=>Gr(ol,e));class ll extends mo{constructor(e){super(e)}get question(){return this.questionBase}renderElement(){var e=this.question.cssClasses;return Gr("fieldset",{className:this.question.getSelectBaseRootCss(),ref:e=>this.setControl(e),role:this.question.a11y_input_ariaRole,"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.a11y_input_ariaLabel,"aria-labelledby":this.question.a11y_input_ariaLabelledBy,"aria-describedby":this.question.a11y_input_ariaDescribedBy,"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage},Gr("legend",{className:"sv-hidden"},this.question.locTitle.renderedHtml),this.getHeader(),this.question.hasColumns?this.getColumnedBody(e):this.getBody(e),this.getFooter())}getHeader(){if(this.question.hasHeadItems)return this.question.headItems.map((e,t)=>this.renderItem(e,!1,this.question.cssClasses))}getFooter(){if(this.question.hasFootItems)return this.question.footItems.map((e,t)=>this.renderItem(e,!1,this.question.cssClasses))}getColumnedBody(e){return Gr("div",{className:e.rootMultiColumn},this.getColumns(e))}getColumns(e){return this.question.columns.map((t,s)=>{var n=t.map((t,n)=>this.renderItem(t,0===s&&0===n,e,""+s+n));return Gr("div",{key:"column"+s+this.question.getItemsColumnKey(t),className:this.question.getColumnClass(),role:"presentation"},n)})}getBody(e){return this.question.blockedRow?Gr("div",{className:e.rootRow},this.getItems(e,this.question.dataChoices)):Gr(Kr,null,this.getItems(e,this.question.bodyItems))}getItems(e,t){for(var s=[],n=0;n<t.length;n++){var i=t[n],r=this.renderItem(i,0==n,e,""+n);r&&s.push(r)}return s}get textStyle(){return null}renderItem(e,t,s,n){const i=ho.Instance.createElement(this.question.itemComponent,{key:e.value,question:this.question,cssClasses:s,isDisplayMode:this.isDisplayMode,item:e,textStyle:this.textStyle,index:n,isFirst:t}),r=this.question.survey;let a=null;return r&&i&&(a=co.wrapItemValue(r,i,this.question,e)),null!=a?a:i}}class ul extends go{constructor(e){super(e),this.handleOnChange=e=>{this.question.clickItemHandler(this.item,e.target.checked)},this.rootRef={current:null}}getStateElement(){return this.item}get question(){return this.props.question}get item(){return this.props.item}get textStyle(){return this.props.textStyle}get isFirst(){return this.props.isFirst}get index(){return this.props.index}get hideCaption(){return!0===this.props.hideCaption}get ariaLabel(){return this.props.ariaLabel||null}componentDidUpdate(e,t){super.componentDidUpdate(e,t),e.item===this.props.item||this.question.isDesignMode||(this.props.item&&this.props.item.setRootElement(this.rootRef.current),e.item&&e.item.setRootElement(void 0))}shouldComponentUpdate(e,t){return!(!super.shouldComponentUpdate(e,t)||this.question.customWidget&&!this.question.customWidgetData.isNeedRender&&!this.question.customWidget.widgetJson.isDefaultRender&&!this.question.customWidget.widgetJson.render)}canRender(){return!!this.item&&!!this.question}renderElement(){const e=this.question.isItemSelected(this.item);return Gr(Kr,null,this.renderCheckbox(e,null),this.renderComment())}get inputStyle(){return null}renderComment(){return this.item.isCommentShowing?Gr("div",{className:this.question.getCommentAreaCss(!0)},Gr(Ko,{question:this.question,item:this.item,cssClasses:this.question.cssClasses})):null}renderCheckbox(e,t){const s=this.question.getItemId(this.item),n=this.question.getItemClass(this.item),i=this.question.getLabelClass(this.item),r=this.hideCaption?null:Gr("span",{className:this.cssClasses.controlLabel},this.renderLocString(this.item.locText,this.textStyle));return Gr("div",{className:n,role:"presentation",ref:this.rootRef},Gr("label",{className:i},Gr("input",{className:this.cssClasses.itemControl,type:"checkbox",name:this.question.name+this.item.id,value:this.item.value,id:s,style:this.inputStyle,disabled:!this.question.getItemEnabled(this.item),readOnly:this.question.isReadOnlyAttr,checked:e,onChange:this.handleOnChange,required:this.question.hasRequiredError(),"aria-label":this.ariaLabel}),this.cssClasses.materialDecorator?Gr("span",{className:this.cssClasses.materialDecorator},this.question.itemSvgIcon?Gr("svg",{className:this.cssClasses.itemDecorator},Gr("use",{xlinkHref:this.question.itemSvgIcon})):null):null,r),t)}componentDidMount(){super.componentDidMount(),this.question.isDesignMode||this.item.setRootElement(this.rootRef.current)}componentWillUnmount(){super.componentWillUnmount(),this.question.isDesignMode||this.item.setRootElement(void 0)}}ho.Instance.registerElement("survey-checkbox-item",e=>Gr(ul,e)),Ro.Instance.registerQuestion("checkbox",e=>Gr(ll,e));class dl extends mo{get question(){return this.questionBase}renderElement(){if(this.question.selectToRankEnabled){const e=!0;return Gr("div",{className:this.question.rootClass,ref:e=>this.setControl(e)},Gr("div",{className:this.question.getContainerClasses("from"),"data-ranking":"from-container"},this.getItems(this.question.renderedUnRankingChoices,e),0===this.question.renderedUnRankingChoices.length?Gr("div",{className:this.question.cssClasses.containerPlaceholder}," ",this.renderLocString(this.question.locSelectToRankEmptyRankedAreaText)," "):null),Gr("div",{className:this.question.cssClasses.containersDivider}),Gr("div",{className:this.question.getContainerClasses("to"),"data-ranking":"to-container"},this.getItems(),0===this.question.renderedRankingChoices.length?Gr("div",{className:this.question.cssClasses.containerPlaceholder}," ",this.renderLocString(this.question.locSelectToRankEmptyUnrankedAreaText)," "):null))}return Gr("div",{className:this.question.rootClass,ref:e=>this.setControl(e)},this.getItems())}getItems(e=this.question.renderedRankingChoices,t){const s=[];for(let n=0;n<e.length;n++){const i=e[n];s.push(this.renderItem(i,n,e=>{this.question.handleKeydown.call(this.question,e,i)},e=>{e.persist(),this.question.handlePointerDown.call(this.question,e,i,e.currentTarget)},e=>{e.persist(),this.question.handlePointerUp.call(this.question,e,i,e.currentTarget)},this.question.cssClasses,this.question.getItemClass(i),this.question,t))}return s}renderItem(e,t,s,n,i,r,a,o,l){e.renderedId;const u=this.renderLocString(e.locText),d=t,h=this.question.getNumberByIndex(d),c=this.question.getItemTabIndex(e),p=Gr(hl,{key:e.value,text:u,index:d,indexText:h,itemTabIndex:c,handleKeydown:s,handlePointerDown:n,handlePointerUp:i,cssClasses:r,itemClass:a,question:o,unrankedItem:l,item:e}),g=this.question.survey;let m=null;return g&&(m=co.wrapItemValue(g,p,this.question,e)),null!=m?m:p}}class hl extends go{get text(){return this.props.text}get index(){return this.props.index}get indexText(){return this.props.indexText}get handleKeydown(){return this.props.handleKeydown}get handlePointerDown(){return this.props.handlePointerDown}get handlePointerUp(){return this.props.handlePointerUp}get cssClasses(){return this.props.cssClasses}get itemClass(){return this.props.itemClass}get itemTabIndex(){return this.props.itemTabIndex}get question(){return this.props.question}get unrankedItem(){return this.props.unrankedItem}get item(){return this.props.item}renderEmptyIcon(){return Gr("svg",null,Gr("use",{xlinkHref:this.question.dashSvgIcon}))}renderElement(){let e=ho.Instance.createElement(this.question.itemComponent,{item:this.item,cssClasses:this.cssClasses});return Gr("div",{id:this.question.getItemId(this.item),tabIndex:this.itemTabIndex,className:this.itemClass,onKeyDown:this.handleKeydown,onPointerDown:this.handlePointerDown,onPointerUp:this.handlePointerUp,"data-sv-drop-target-ranking-item":this.index},Gr("div",{tabIndex:-1,style:{outline:"none"}},Gr("div",{className:this.cssClasses.itemGhostNode}),Gr("div",{className:this.cssClasses.itemContent},Gr("div",{className:this.cssClasses.itemIconContainer},Gr("svg",{className:this.question.getIconHoverCss()},Gr("use",{xlinkHref:this.question.dragDropSvgIcon})),Gr("svg",{className:this.question.getIconFocusCss()},Gr("use",{xlinkHref:this.question.arrowsSvgIcon}))),Gr("div",{className:this.question.getItemIndexClasses(this.item)},!this.unrankedItem&&this.indexText?this.indexText:this.renderEmptyIcon()),e)))}}class cl extends go{get item(){return this.props.item}get cssClasses(){return this.props.cssClasses}renderElement(){return Gr("div",{className:this.cssClasses.controlLabel},po.renderLocString(this.item.locText))}}ho.Instance.registerElement("sv-ranking-item",e=>Gr(cl,e)),Ro.Instance.registerQuestion("ranking",e=>Gr(dl,e));class pl extends po{constructor(e){super(e),this.handleOnMouseDown=this.handleOnMouseDown.bind(this)}get question(){return this.props.question}get item(){return this.props.item}get index(){return this.props.index}getStateElement(){return this.item}handleOnMouseDown(e){this.question.onMouseDown()}}class gl extends pl{render(){var e=this.renderLocString(this.item.locText);return Gr("label",{onMouseDown:this.handleOnMouseDown,className:this.question.getItemClassByText(this.item.itemValue,this.item.text)},Gr("input",{type:"radio",className:"sv-visuallyhidden",name:this.question.questionName,id:this.question.getInputId(this.index),value:this.item.value,disabled:this.question.isDisabledAttr,readOnly:this.question.isReadOnlyAttr,checked:this.question.value==this.item.value,onClick:this.props.handleOnClick,onChange:()=>{},"aria-label":this.question.ariaLabel}),Gr("span",{className:this.question.cssClasses.itemText,"data-text":this.item.text},e))}componentDidMount(){super.componentDidMount()}}ho.Instance.registerElement("sv-rating-item",e=>Gr(gl,e));class ml extends pl{render(){return Gr("label",{onMouseDown:this.handleOnMouseDown,className:this.question.getItemClass(this.item.itemValue),onMouseOver:e=>this.question.onItemMouseIn(this.item),onMouseOut:e=>this.question.onItemMouseOut(this.item),title:this.item.text},Gr("input",{type:"radio",className:"sv-visuallyhidden",name:this.question.questionName,id:this.question.getInputId(this.index),value:this.item.value,disabled:this.question.isDisabledAttr,readOnly:this.question.isReadOnlyAttr,checked:this.question.value==this.item.value,onClick:this.props.handleOnClick,onChange:()=>{},"aria-label":this.question.ariaLabel}),Gr(fo,{className:"sv-star",size:"auto",iconName:this.question.itemStarIcon}),Gr(fo,{className:"sv-star-2",size:"auto",iconName:this.question.itemStarIconAlt}))}}ho.Instance.registerElement("sv-rating-item-star",e=>Gr(ml,e));class vl extends pl{render(){return Gr("label",{onMouseDown:this.handleOnMouseDown,style:this.question.getItemStyle(this.item.itemValue,this.item.highlight),className:this.question.getItemClass(this.item.itemValue),onMouseOver:e=>this.question.onItemMouseIn(this.item),onMouseOut:e=>this.question.onItemMouseOut(this.item),title:this.item.text},Gr("input",{type:"radio",className:"sv-visuallyhidden",name:this.question.questionName,id:this.question.getInputId(this.index),value:this.item.value,disabled:this.question.isDisabledAttr,readOnly:this.question.isReadOnlyAttr,checked:this.question.value==this.item.value,onClick:this.props.handleOnClick,onChange:()=>{},"aria-label":this.question.ariaLabel}),Gr(fo,{size:"auto",iconName:this.question.getItemSmileyIconName(this.item.itemValue)}))}}ho.Instance.registerElement("sv-rating-item-smiley",e=>Gr(vl,e));class fl extends po{get item(){return this.props.item}getStateElement(){return this.item}render(){if(!this.item)return null;const e=this.props.item,t=this.renderDescription(e);return Gr("div",{className:"sd-rating-dropdown-item"},Gr("span",{className:"sd-rating-dropdown-item_text"},e.title),t)}renderDescription(e){return e.description?Gr("div",{className:"sd-rating-dropdown-item_description"},this.renderLocString(e.description,void 0,"locString")):null}}ho.Instance.registerElement("sv-rating-dropdown-item",e=>Gr(fl,e));class bl extends po{get model(){return this.props.model}get question(){return this.props.question}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateDomElement()}componentDidMount(){super.componentDidMount(),this.updateDomElement()}updateDomElement(){if(this.inputElement){const e=this.inputElement,t=this.model.inputStringRendered;a.isTwoValueEquals(t,e.value,!1,!0,!1)||(e.value=this.model.inputStringRendered)}}onChange(e){var t;const s=null===(t=e.target.getRootNode())||void 0===t?void 0:t.activeElement;e.target===s&&(this.model.inputStringRendered=e.target.value)}keyhandler(e){this.model.inputKeyHandler(e)}onBlur(e){this.question.onBlur(e)}onFocus(e){this.question.onFocus(e)}constructor(e){super(e)}getStateElement(){return this.model}render(){return Gr("div",{className:this.question.cssClasses.hint},this.model.showHintPrefix?Gr("div",{className:this.question.cssClasses.hintPrefix},Gr("span",null,this.model.hintStringPrefix)):null,Gr("div",{className:this.question.cssClasses.hintSuffixWrapper},this.model.showHintString?Gr("div",{className:this.question.cssClasses.hintSuffix},Gr("span",{style:{visibility:"hidden"},"data-bind":"text: model.filterString"},this.model.inputStringRendered),Gr("span",null,this.model.hintStringSuffix)):null,Gr("input",{type:"text",autoComplete:"off",id:this.question.getInputId(),inputMode:this.model.inputMode,ref:e=>this.inputElement=e,className:this.question.cssClasses.filterStringInput,disabled:this.question.isInputReadOnly,readOnly:!!this.model.filterReadOnly||void 0,size:this.model.inputStringRendered?void 0:1,role:this.model.ariaInputRole,"aria-required":this.model.ariaInputRequired,"aria-invalid":this.model.ariaInputInvalid,"aria-errormessage":this.model.ariaInputErrorMessage,"aria-expanded":this.model.ariaInputExpanded,"aria-label":this.model.ariaInputLabel,"aria-labelledby":this.model.ariaInputLabelledby,"aria-describedby":this.model.ariaInputDescribedby,"aria-controls":this.model.ariaInputControls,"aria-activedescendant":this.model.ariaInputActivedescendant,placeholder:this.model.filterStringPlaceholder,onKeyDown:e=>{this.keyhandler(e)},onChange:e=>{this.onChange(e)},onBlur:e=>{this.onBlur(e)},onFocus:e=>{this.onFocus(e)}})))}}Ro.Instance.registerQuestion("sv-tagbox-filter",e=>Gr(bl,e));class yl extends go{constructor(e){super(e),this.state={changed:0},this.setupModel()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.setupModel()}componentDidMount(){super.componentDidMount(),this.setupModel()}componentWillUnmount(){super.componentWillUnmount(),this.item&&(this.item.locText.onChanged=()=>{})}setupModel(){if(!this.item.locText)return;const e=this;this.item.locText.onChanged=()=>{e.setState({changed:e.state.changed+1})}}getStateElement(){return this.item}get item(){return this.props.item}canRender(){return!!this.item}renderElement(){return Gr("option",{value:this.item.value,disabled:!this.item.isEnabled},this.item.text)}}class Cl extends vo{constructor(){super(...arguments),this.click=e=>{var t;null===(t=this.question.dropdownListModel)||void 0===t||t.onClick(e)},this.chevronPointerDown=e=>{var t;null===(t=this.question.dropdownListModel)||void 0===t||t.chevronPointerDown(e)},this.clear=e=>{var t;null===(t=this.question.dropdownListModel)||void 0===t||t.onClear(e)},this.keyhandler=e=>{var t;null===(t=this.question.dropdownListModel)||void 0===t||t.keyHandler(e)},this.blur=e=>{this.updateInputDomElement(),this.question.onBlur(e)},this.focus=e=>{this.question.onFocus(e)}}get dropdownListModel(){return this.question.dropdownListModel}getStateElement(){return this.question.dropdownListModel}setValueCore(e){this.questionBase.renderedValue=e}getValueCore(){return this.questionBase.renderedValue}renderReadOnlyElement(){return this.question.locReadOnlyText?Gr("div",{className:this.question.cssClasses.controlValue},this.renderLocString(this.question.locReadOnlyText)):null}renderSelect(e){let t=null;const s=this.dropdownListModel;return t=this.question.isReadOnly?Gr("div",{id:this.question.inputId,role:null==s?void 0:s.ariaQuestionRole,"aria-label":null==s?void 0:s.ariaQuestionLabel,"aria-labelledby":null==s?void 0:s.ariaQuestionLabelledby,"aria-describedby":null==s?void 0:s.ariaQuestionDescribedby,"aria-expanded":"false","aria-readonly":"true","aria-disabled":"true",tabIndex:this.question.isDisabledAttr?void 0:0,className:this.question.getControlClass(),ref:e=>this.setControl(e)},this.renderReadOnlyElement(),this.renderEditorButtons()):Gr(Kr,null,this.renderInput(),this.question.isInputReadOnly?null:Gr(wo,{model:s.popupModel})),Gr("div",{className:e.selectWrapper,onClick:this.click},t)}renderValueElement(){return this.question.showInputFieldComponent?ho.Instance.createElement(this.question.inputFieldComponentName,{item:this.dropdownListModel.getSelectedAction(),question:this.question}):this.question.showSelectedItemLocText?this.renderLocString(this.question.selectedItemLocText):null}renderInput(){const e=this.dropdownListModel;let t=this.renderValueElement();return Gr("div",{id:this.question.inputId,className:this.question.getControlClass(),tabIndex:e.noTabIndex?void 0:0,disabled:this.question.isDisabledAttr,required:this.question.isRequired,onKeyDown:this.keyhandler,onBlur:this.blur,onFocus:this.focus,role:e.ariaQuestionRole,"aria-required":e.ariaQuestionRequired,"aria-invalid":e.ariaQuestionInvalid,"aria-errormessage":e.ariaQuestionErrorMessage,"aria-expanded":e.ariaQuestionExpanded,"aria-label":e.ariaQuestionLabel,"aria-labelledby":e.ariaQuestionLabelledby,"aria-describedby":e.ariaQuestionDescribedby,"aria-controls":e.ariaQuestionControls,"aria-activedescendant":e.ariaQuestionActivedescendant,ref:e=>this.setControl(e)},e.showHintPrefix?Gr("div",{className:this.question.cssClasses.hintPrefix},Gr("span",null,e.hintStringPrefix)):null,Gr("div",{className:this.question.cssClasses.controlValue},e.showHintString?Gr("div",{className:this.question.cssClasses.hintSuffix},Gr("span",{style:{visibility:"hidden"},"data-bind":"text: model.filterString"},e.inputStringRendered),Gr("span",null,e.hintStringSuffix)):null,t,e.needRenderInput?this.renderFilterInput():null),this.renderEditorButtons())}renderFilterInput(){const{root:e}=xt.environment,t=this.dropdownListModel;return Gr("input",{type:"text",autoComplete:"off",id:this.question.getInputId(),ref:e=>this.inputElement=e,className:this.question.cssClasses.filterStringInput,role:t.ariaInputRole,"aria-required":t.ariaInputRequired,"aria-invalid":t.ariaInputInvalid,"aria-errormessage":t.ariaInputErrorMessage,"aria-expanded":t.ariaInputExpanded,"aria-label":t.ariaInputLabel,"aria-labelledby":t.ariaInputLabelledby,"aria-describedby":t.ariaInputDescribedby,"aria-controls":t.ariaInputControls,"aria-activedescendant":t.ariaInputActivedescendant,placeholder:t.placeholderRendered,readOnly:!!t.filterReadOnly||void 0,tabIndex:t.noTabIndex?void 0:-1,disabled:this.question.isDisabledAttr,inputMode:t.inputMode,onChange:e=>{(e=>{var s;const n=null===(s=e.target.getRootNode())||void 0===s?void 0:s.activeElement;e.target===n&&(t.inputStringRendered=e.target.value)})(e)},onBlur:this.blur,onFocus:this.focus})}renderOther(e,t){return e&&e.isCommentShowing?Gr("div",{key:e.normalizedId,className:this.question.getCommentAreaCss(!0)},Gr(Ko,{question:this.question,item:e,cssClasses:this.question.cssClasses})):null}renderEditorButtons(){return Gr(Io,{model:this.dropdownListModel.editorButtons})}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateInputDomElement()}componentDidMount(){super.componentDidMount(),this.updateInputDomElement()}componentWillUnmount(){super.componentWillUnmount(),this.question.dropdownListModel&&(this.question.dropdownListModel.focused=!1)}updateInputDomElement(){if(this.inputElement){const e=this.inputElement,t=this.question.dropdownListModel.inputStringRendered;a.isTwoValueEquals(t,e.value,!1,!0,!1)||(e.value=this.question.dropdownListModel.inputStringRendered)}}}class wl extends Cl{constructor(e){super(e)}renderElement(){const e=this.question.cssClasses,t=this.renderOther(this.question.selectedItem,e),s=this.renderSelect(e);return Gr("div",{className:this.question.renderCssRoot},s,t)}}Ro.Instance.registerQuestion("dropdown",e=>Gr(wl,e));class xl extends go{constructor(e){super(e)}get question(){return this.props.question}get item(){return this.props.item}canRender(){return!!this.item&&!!this.question}renderElement(){return Gr("div",{className:"sv-tagbox__item"},Gr("div",{className:"sv-tagbox__item-text"},this.renderLocString(this.item.locText)),Gr("div",{className:this.question.cssClasses.cleanItemButton,onClick:e=>{this.question.dropdownListModel.deselectItem(this.item.value),e.stopPropagation()}},Gr(fo,{className:this.question.cssClasses.cleanItemButtonSvg,iconName:this.question.cssClasses.cleanItemButtonIconId,size:"auto"})))}}class _l extends Cl{constructor(e){super(e)}renderItem(e,t){return Gr(xl,{key:e,question:this.question,item:t})}renderInput(){const e=this.dropdownListModel,t=this.question.selectedChoices.map((e,t)=>this.renderItem("item"+t,e));return Gr("div",{id:this.question.inputId,className:this.question.getControlClass(),tabIndex:e.noTabIndex?void 0:0,disabled:this.question.isInputReadOnly,required:this.question.isRequired,onKeyDown:this.keyhandler,onBlur:this.blur,role:e.ariaQuestionRole,"aria-required":e.ariaQuestionRequired,"aria-invalid":e.ariaQuestionInvalid,"aria-errormessage":e.ariaQuestionErrorMessage,"aria-label":e.ariaQuestionLabel,"aria-labelledby":e.ariaQuestionLabelledby,"aria-describedby":e.ariaQuestionDescribedby,"aria-expanded":e.ariaQuestionExpanded,"aria-controls":e.ariaQuestionControls,"aria-activedescendant":e.ariaQuestionActivedescendant,ref:e=>this.setControl(e)},Gr("div",{className:this.question.cssClasses.controlValue},t,e.needRenderInput?Gr(bl,{model:e,question:this.question}):null),this.renderEditorButtons())}renderElement(){const e=this.question.cssClasses,t=this.renderOther(this.question.otherItem,e),s=this.renderSelect(e);return Gr("div",{className:this.question.renderCssRoot},s,t)}}Ro.Instance.registerQuestion("tagbox",e=>Gr(_l,e));class Vl extends wl{constructor(e){super(e)}renderSelect(e){const t=this.isDisplayMode?Gr("div",{id:this.question.inputId,className:this.question.getControlClass(),disabled:!0},this.question.readOnlyText):Gr("select",{id:this.question.inputId,className:this.question.getControlClass(),ref:e=>this.setControl(e),autoComplete:this.question.autocomplete,onChange:this.updateValueOnEvent,onInput:this.updateValueOnEvent,onClick:e=>{this.question.onClick(e)},onKeyUp:e=>{this.question.onKeyUp(e)},"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.a11y_input_ariaLabel,"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage,required:this.question.isRequired},this.question.allowClear?Gr("option",{value:""},this.question.placeholder):null,this.question.visibleChoices.map((e,t)=>Gr(yl,{key:"item"+t,item:e})));return Gr("div",{className:e.selectWrapper},t,this.createChevronButton())}createChevronButton(){return this.question.cssClasses.chevronButtonIconId?Gr("div",{className:this.question.cssClasses.chevronButton,"aria-hidden":"true",onPointerDown:this.chevronPointerDown},Gr(fo,{className:this.question.cssClasses.chevronButtonSvg,iconName:this.question.cssClasses.chevronButtonIconId,size:"auto"})):null}}Ro.Instance.registerQuestion("sv-dropdown-select",e=>Gr(Vl,e)),Kt.Instance.registerRenderer("dropdown","select","sv-dropdown-select");class Il extends mo{constructor(e){super(e),this.state={rowsChanged:0}}get question(){return this.questionBase}componentDidMount(){if(super.componentDidMount(),this.question){var e=this;this.question.visibleRowsChangedCallback=function(){e.setState({rowsChanged:e.state.rowsChanged+1})}}}componentWillUnmount(){super.componentWillUnmount(),this.question&&(this.question.visibleRowsChangedCallback=null)}renderElement(){for(var e=this.question.cssClasses,t=this.question.hasRows?Gr("td",null):null,s=[],n=0;n<this.question.visibleColumns.length;n++){var i=this.question.visibleColumns[n],r="column"+n,a=this.renderLocString(i.locText);const e={};this.question.columnMinWidth&&(e.minWidth=this.question.columnMinWidth,e.width=this.question.columnMinWidth),s.push(Gr("th",{className:this.question.cssClasses.headerCell,style:e,key:r},this.wrapCell({column:i},a,"column-header")))}var o=[],l=this.question.visibleRows;for(n=0;n<l.length;n++){var u=l[n];r="row-"+u.name+"-"+n,o.push(Gr(Sl,{key:r,question:this.question,cssClasses:e,row:u,isFirst:0==n}))}var d=this.question.showHeader?Gr("thead",{role:"presentation"},Gr("tr",null,t,s)):null;return Gr("div",{className:e.tableWrapper,ref:e=>this.setControl(e)},Gr("fieldset",{role:"radiogroup"},Gr("legend",{className:"sv-visuallyhidden"},this.question.locTitle.renderedHtml),Gr("table",{className:this.question.getTableCss(),role:"presentation"},d,Gr("tbody",null,o))))}}class Sl extends go{constructor(e){super(e)}getStateElement(){return this.row?this.row.item:super.getStateElement()}get question(){return this.props.question}get row(){return this.props.row}wrapCell(e,t,s){if(!s)return t;const n=this.question.survey;let i=null;return n&&(i=co.wrapMatrixCell(n,t,e,s)),null!=i?i:t}canRender(){return!!this.row}renderElement(){var e=null;if(this.question.hasRows){var t=this.renderLocString(this.row.locText);const s={};this.question.rowTitleWidth&&(s.minWidth=this.question.rowTitleWidth,s.width=this.question.rowTitleWidth),e=Gr("td",{style:s,className:this.row.rowTextClasses},this.wrapCell({row:this.row},t,"row-header"))}var s=this.generateTds();return Gr("tr",{className:this.row.rowClasses||void 0},e,s)}generateTds(){const e=[],t=this.row,s=this.question.cellComponent;for(var n=0;n<this.question.visibleColumns.length;n++){let i=null;const r=this.question.visibleColumns[n],a="value"+n;let o=this.question.getItemClass(t,r);if(this.question.hasCellText){const e=e=>()=>this.cellClick(t,e);i=Gr("td",{key:a,className:o,onClick:e?e(r):()=>{}},this.renderLocString(this.question.getCellDisplayLocText(t.name,r)))}else{const e=ho.Instance.createElement(s,{question:this.question,row:this.row,column:r,columnIndex:n,cssClasses:this.cssClasses,cellChanged:()=>{this.cellClick(this.row,r)}});i=Gr("td",{key:a,"data-responsive-title":r.locText.renderedHtml,className:this.question.cssClasses.cell},e)}e.push(i)}return e}cellClick(e,t){e.cellClick(t),this.setState({value:e.value})}}class Pl extends go{constructor(e){super(e),this.handleOnMouseDown=this.handleOnMouseDown.bind(this),this.handleOnChange=this.handleOnChange.bind(this)}handleOnChange(e){this.props.cellChanged&&this.props.cellChanged(),this.setState({value:this.row.isChecked(this.column)})}handleOnMouseDown(e){this.question.onMouseDown()}get question(){return this.props.question}get row(){return this.props.row}get column(){return this.props.column}get columnIndex(){return this.props.columnIndex}canRender(){return!!this.question&&!!this.row}renderElement(){const e=this.row.isChecked(this.column),t=this.question.inputId+"_"+this.row.name+"_"+this.columnIndex,s=this.question.getItemClass(this.row,this.column),n=this.question.getItemSvgIcon(this.row,this.column),i=this.question.isMobile?Gr("span",{className:this.question.cssClasses.cellResponsiveTitle},this.renderLocString(this.column.locText)):void 0;return Gr("label",{onMouseDown:this.handleOnMouseDown,className:s},this.renderInput(t,e),Gr("span",{className:this.question.cssMaterialDecorator},n?Gr("svg",{className:this.question.cssItemDecorator},Gr("use",{xlinkHref:n})):null),i)}renderInput(e,t){return Gr("input",{id:e,type:this.question.checkType,className:this.question.cssItemValue,name:this.row.fullName,value:this.column.value,disabled:this.row.isDisabledAttr,readOnly:this.row.isReadOnlyAttr,checked:t,onChange:this.handleOnChange,"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.getCellAriaLabel(this.row,this.column),"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage})}}ho.Instance.registerElement("survey-matrix-cell",e=>Gr(Pl,e)),Ro.Instance.registerQuestion("matrix",e=>Gr(Il,e));class Tl extends mo{constructor(e){super(e)}get question(){return this.questionBase}componentDidMount(){this.reactOnStrChanged()}componentWillUnmount(){this.question.locHtml.onChanged=function(){}}componentDidUpdate(e,t){this.reactOnStrChanged()}reactOnStrChanged(){this.question.locHtml.onChanged=()=>{this.setState({changed:this.state&&this.state.changed?this.state.changed+1:1})}}canRender(){return super.canRender()&&!!this.question.html}renderElement(){var e={__html:this.question.locHtml.renderedHtml};return Gr("div",{className:this.question.renderCssRoot,dangerouslySetInnerHTML:e})}}Ro.Instance.registerQuestion("html",e=>Gr(Tl,e));class El extends Jr{render(){return Gr("div",{className:"sd-loading-indicator"},Gr(fo,{iconName:"icon-loading",size:"auto"}))}}class Rl extends mo{constructor(e){super(e)}get question(){return this.questionBase}renderElement(){const e=this.question.allowShowPreview?this.renderPreview():null,t=this.question.showLoadingIndicator?this.renderLoadingIndicator():null,s=this.question.isPlayingVideo?this.renderVideo():null,n=this.question.showFileDecorator?this.renderFileDecorator():null,i=this.question.fileNavigatorVisible?Gr(Io,{model:this.question.fileNavigator}):null;let r;return r=this.question.isReadOnlyAttr?Gr("input",{readOnly:!0,type:"file",className:this.isDisplayMode?this.question.getReadOnlyFileCss():this.question.cssClasses.fileInput,id:this.question.inputId,ref:e=>this.setControl(e),style:this.isDisplayMode?{color:"transparent"}:{},multiple:this.question.allowMultiple,placeholder:this.question.title,accept:this.question.acceptedTypes}):this.question.isDisabledAttr?Gr("input",{disabled:!0,type:"file",className:this.isDisplayMode?this.question.getReadOnlyFileCss():this.question.cssClasses.fileInput,id:this.question.inputId,ref:e=>this.setControl(e),style:this.isDisplayMode?{color:"transparent"}:{},multiple:this.question.allowMultiple,placeholder:this.question.title,accept:this.question.acceptedTypes}):this.question.hasFileUI?Gr("input",{type:"file",disabled:this.isDisplayMode,tabIndex:-1,className:this.isDisplayMode?this.question.getReadOnlyFileCss():this.question.cssClasses.fileInput,id:this.question.inputId,ref:e=>this.setControl(e),style:this.isDisplayMode?{color:"transparent"}:{},"aria-required":this.question.ariaRequired,"aria-label":this.question.ariaLabel,"aria-invalid":this.question.ariaInvalid,"aria-errormessage":this.question.ariaErrormessage,multiple:this.question.allowMultiple,title:this.question.inputTitle,accept:this.question.acceptedTypes,capture:this.question.renderCapture}):null,Gr("div",{className:this.question.fileRootCss,ref:e=>this.setContent(e)},r,Gr("div",{className:this.question.cssClasses.dragArea,onDrop:this.question.onDrop,onDragOver:this.question.onDragOver,onDragLeave:this.question.onDragLeave,onDragEnter:this.question.onDragEnter},n,t,s,e,i))}renderFileDecorator(){const e=this.question.actionsContainerVisible?Gr(Io,{model:this.question.actionsContainer}):null;return Gr("div",{className:this.question.getFileDecoratorCss()},!!this.question.showDragAreaPlaceholder&&Gr("span",{className:this.question.cssClasses.dragAreaPlaceholder},this.renderLocString(this.question.locRenderedPlaceholder)),Gr("div",{className:this.question.cssClasses.wrapper},e))}renderPreview(){return ho.Instance.createElement("sv-file-preview",{question:this.question})}renderLoadingIndicator(){return Gr("div",{className:this.question.cssClasses.loadingIndicator},Gr(El,null))}renderVideo(){return Gr("div",{className:this.question.cssClasses.videoContainer},Gr(yo,{item:this.question.changeCameraAction}),Gr(yo,{item:this.question.closeCameraAction}),Gr("video",{autoPlay:!0,playsInline:!0,id:this.question.videoId,className:this.question.cssClasses.video}),Gr(yo,{item:this.question.takePictureAction}))}}Ro.Instance.registerQuestion("file",e=>Gr(Rl,e));class kl extends go{constructor(e){super(e)}get question(){return this.props.item&&this.props.item.data.question||this.props.data.question}render(){return Mo(Gr("label",{tabIndex:0,className:this.question.getChooseFileCss(),htmlFor:this.question.inputId,"aria-label":this.question.chooseButtonText,onClick:e=>this.question.chooseFile(e.nativeEvent)},this.question.cssClasses.chooseFileIconId?Gr(fo,{title:this.question.chooseButtonText,iconName:this.question.cssClasses.chooseFileIconId,size:"auto"}):null,Gr("span",null,this.question.chooseButtonText)))}}ho.Instance.registerElement("sv-file-choose-btn",e=>Gr(kl,e));class Al extends po{get question(){return this.props.question}get page(){return this.props.page}renderElement(){const e=this.page.items.map((e,t)=>ho.Instance.createElement("sv-file-item",{item:e,question:this.question,key:t}));return Gr("div",{className:this.page.css,id:this.page.id},e)}}class Ll extends po{get question(){return this.props.question}renderFileSign(e,t){return e&&t.name?Gr("div",{className:e},Gr("a",{href:t.content,onClick:e=>{this.question.doDownloadFile(e,t)},title:t.name,download:t.name,style:{width:this.question.imageWidth}},t.name)):null}renderElement(){const e=this.question.renderedPages.map((e,t)=>Gr(Al,{page:e,question:this.question,key:e.id}));return Gr("div",{className:this.question.cssClasses.fileList||void 0},e)}canRender(){return this.question.showPreviewContainer}}ho.Instance.registerElement("sv-file-preview",e=>Gr(Ll,e));class Dl extends po{get question(){return this.props.question}get item(){return this.props.item}renderFileSign(e,t){return e&&t.name?Gr("div",{className:e},Gr("a",{href:t.content,onClick:e=>{this.question.doDownloadFile(e,t)},title:t.name,download:t.name,style:{width:this.question.imageWidth}},t.name)):null}renderElement(){const e=this.item;return Gr("span",{className:this.question.cssClasses.previewItem,onClick:e=>this.question.doDownloadFileFromContainer(e)},this.renderFileSign(this.question.cssClasses.fileSign,e),Gr("div",{className:this.question.getImageWrapperCss(e)},this.question.canPreviewImage(e)?Gr("img",{src:e.content,style:{height:this.question.imageHeight,width:this.question.imageWidth},alt:"File preview"}):this.question.cssClasses.defaultImage?Gr(fo,{iconName:this.question.cssClasses.defaultImageIconId,size:"auto",className:this.question.cssClasses.defaultImage}):null,e.name&&!this.question.isReadOnly?Gr("div",{className:this.question.getRemoveButtonCss(),onClick:t=>this.question.doRemoveFile(e,t)},Gr("span",{className:this.question.cssClasses.removeFile},this.question.removeFileCaption),this.question.cssClasses.removeFileSvgIconId?Gr(fo,{title:this.question.removeFileCaption,iconName:this.question.cssClasses.removeFileSvgIconId,size:"auto",className:this.question.cssClasses.removeFileSvg}):null):null),this.renderFileSign(this.question.cssClasses.fileSignBottom,e))}canRender(){return this.question.showPreviewContainer}}ho.Instance.registerElement("sv-file-item",e=>Gr(Dl,e));class Nl extends mo{constructor(e){super(e)}get question(){return this.questionBase}renderElement(){for(var e=this.question.cssClasses,t=this.question.getRows(),s=[],n=0;n<t.length;n++)t[n].isVisible&&s.push(this.renderRow(n,t[n].cells,e));return Gr("table",{className:this.question.getQuestionRootCss()},Gr("tbody",null,s))}renderCell(e,t,s){let n;return n=e.isErrorsCell?Gr(il,{question:e.item.editor,creator:this.creator}):Gr(Ol,{question:this.question,item:e.item,creator:this.creator,cssClasses:t}),Gr("td",{key:"item"+s,className:e.className,onFocus:()=>{e.item.focusIn()}},n)}renderRow(e,t,s){const n="item"+e,i=[];for(let e=0;e<t.length;e++){const n=t[e];i.push(this.renderCell(n,s,e))}return Gr("tr",{key:n,className:s.row},i)}}class Ol extends go{get question(){return this.props.question}get item(){return this.props.item}getStateElements(){return[this.item,this.item.editor]}get creator(){return this.props.creator}renderElement(){const e=this.item,t=this.cssClasses,s={};return this.question.itemTitleWidth&&(s.minWidth=this.question.itemTitleWidth,s.width=this.question.itemTitleWidth),Gr("label",{className:this.question.getItemLabelCss(e)},Gr("span",{className:t.itemTitle,style:s},Gr(So,{element:e.editor,cssClasses:e.editor.cssClasses})),Gr(jl,{cssClasses:t,itemCss:this.question.getItemCss(),question:e.editor,creator:this.creator}))}}class jl extends sl{renderElement(){return Gr("div",{className:this.itemCss},this.renderContent())}}Ro.Instance.registerQuestion("multipletext",e=>Gr(Nl,e));class ql extends mo{constructor(e){super(e)}get question(){return this.questionBase}renderElement(){var e=this.question.cssClasses,t=null;return this.question.showClearButtonInContent&&(t=Gr("div",null,Gr("input",{type:"button",className:this.question.cssClasses.clearButton,onClick:()=>this.question.clearValue(!0),value:this.question.clearButtonCaption}))),Gr("fieldset",{className:this.question.getSelectBaseRootCss(),ref:e=>this.setControl(e),role:this.question.a11y_input_ariaRole,"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.a11y_input_ariaLabel,"aria-labelledby":this.question.a11y_input_ariaLabelledBy,"aria-describedby":this.question.a11y_input_ariaDescribedBy,"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage},this.question.hasColumns?this.getColumnedBody(e):this.getBody(e),this.getFooter(),t)}getFooter(){if(this.question.hasFootItems)return this.question.footItems.map((e,t)=>this.renderItem(e,!1,this.question.cssClasses))}getColumnedBody(e){return Gr("div",{className:e.rootMultiColumn},this.getColumns(e))}getColumns(e){var t=this.getStateValue();return this.question.columns.map((s,n)=>{var i=s.map((s,i)=>this.renderItem(s,t,e,""+n+i));return Gr("div",{key:"column"+n+this.question.getItemsColumnKey(s),className:this.question.getColumnClass(),role:"presentation"},i)})}getBody(e){return this.question.blockedRow?Gr("div",{className:e.rootRow},this.getItems(e,this.question.dataChoices)):Gr(Kr,null,this.getItems(e,this.question.bodyItems))}getItems(e,t){for(var s=[],n=this.getStateValue(),i=0;i<t.length;i++){var r=t[i],a=this.renderItem(r,n,e,""+i);s.push(a)}return s}get textStyle(){return null}renderItem(e,t,s,n){const i=ho.Instance.createElement(this.question.itemComponent,{key:e.value,question:this.question,cssClasses:s,isDisplayMode:this.isDisplayMode,item:e,textStyle:this.textStyle,index:n,isChecked:t===e.value}),r=this.question.survey;let a=null;return r&&(a=co.wrapItemValue(r,i,this.question,e)),null!=a?a:i}getStateValue(){return this.question.isEmpty()?"":this.question.renderedValue}}class Ml extends go{constructor(e){super(e),this.rootRef={current:null},this.handleOnChange=this.handleOnChange.bind(this),this.handleOnMouseDown=this.handleOnMouseDown.bind(this)}getStateElement(){return this.item}get question(){return this.props.question}get item(){return this.props.item}get textStyle(){return this.props.textStyle}get index(){return this.props.index}get isChecked(){return this.props.isChecked}get hideCaption(){return!0===this.props.hideCaption}get ariaLabel(){return this.props.ariaLabel||null}shouldComponentUpdate(e,t){return!(!super.shouldComponentUpdate(e,t)||!this.question||this.question.customWidget&&!this.question.customWidgetData.isNeedRender&&!this.question.customWidget.widgetJson.isDefaultRender&&!this.question.customWidget.widgetJson.render)}handleOnChange(e){this.question.clickItemHandler(this.item)}handleOnMouseDown(e){this.question.onMouseDown()}canRender(){return!!this.question&&!!this.item}componentDidUpdate(e,t){super.componentDidUpdate(e,t),e.item===this.props.item||this.question.isDesignMode||(this.props.item&&this.props.item.setRootElement(this.rootRef.current),e.item&&e.item.setRootElement(void 0))}renderElement(){return Gr(Kr,null,this.renderRadioButton(),this.renderComment())}renderComment(){return this.item.isCommentShowing?Gr("div",{className:this.question.getCommentAreaCss(!0)},Gr(Ko,{question:this.question,item:this.item,cssClasses:this.question.cssClasses})):null}renderRadioButton(){var e=this.question.getItemClass(this.item),t=this.question.getLabelClass(this.item),s=this.question.getControlLabelClass(this.item);const n=this.hideCaption?null:Gr("span",{className:s},this.renderLocString(this.item.locText,this.textStyle));return Gr("div",{className:e,role:"presentation",ref:this.rootRef},Gr("label",{onMouseDown:this.handleOnMouseDown,className:t},Gr("input",{"aria-errormessage":this.question.ariaErrormessage,className:this.cssClasses.itemControl,id:this.question.getItemId(this.item),type:"radio",name:this.question.questionName,checked:this.isChecked,value:this.item.value,disabled:!this.question.getItemEnabled(this.item),readOnly:this.question.isReadOnlyAttr,onChange:this.handleOnChange,"aria-label":this.ariaLabel}),this.cssClasses.materialDecorator?Gr("span",{className:this.cssClasses.materialDecorator},this.question.itemSvgIcon?Gr("svg",{className:this.cssClasses.itemDecorator},Gr("use",{xlinkHref:this.question.itemSvgIcon})):null):null,n))}componentDidMount(){super.componentDidMount(),this.question.isDesignMode||this.item.setRootElement(this.rootRef.current)}componentWillUnmount(){super.componentWillUnmount(),this.question.isDesignMode||this.item.setRootElement(void 0)}}ho.Instance.registerElement("survey-radiogroup-item",e=>Gr(Ml,e)),Ro.Instance.registerQuestion("radiogroup",e=>Gr(ql,e));class Fl extends vo{constructor(e){super(e)}renderInput(){const e=this.question.getControlClass(),t=this.question.renderedPlaceholder;if(this.question.isReadOnlyRenderDiv())return Gr("div",null,this.question.inputValue);const s=this.question.getMaxLength()?Gr(Uo,{counter:this.question.characterCounter,remainingCharacterCounter:this.question.cssClasses.remainingCharacterCounter}):null;return Gr(Kr,null,Gr("input",{id:this.question.inputId,disabled:this.question.isDisabledAttr,readOnly:this.question.isReadOnlyAttr,className:e,type:this.question.inputType,ref:e=>this.setControl(e),style:this.question.inputStyle,maxLength:this.question.getMaxLength(),min:this.question.renderedMin,max:this.question.renderedMax,step:this.question.renderedStep,size:this.question.inputSize,placeholder:t,list:this.question.dataListId,autoComplete:this.question.autocomplete,onBlur:e=>{this.question.onBlur(e)},onFocus:e=>{this.question.onFocus(e)},onChange:this.question.onChange,onClick:this.question.readOnlyBlocker,onPointerDown:this.question.readOnlyBlocker,onKeyUp:this.question.onKeyUp,onKeyDown:this.question.onKeyDown,onCompositionUpdate:e=>this.question.onCompositionUpdate(e.nativeEvent),"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.a11y_input_ariaLabel,"aria-labelledby":this.question.a11y_input_ariaLabelledBy,"aria-describedby":this.question.a11y_input_ariaDescribedBy,"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage}),s)}renderElement(){return this.question.dataListId?Gr("div",null,this.renderInput(),this.renderDataList()):this.renderInput()}setValueCore(e){this.question.inputValue=e}getValueCore(){return this.question.inputValue}renderDataList(){if(!this.question.dataListId)return null;var e=this.question.dataList;if(0==e.length)return null;for(var t=[],s=0;s<e.length;s++)t.push(Gr("option",{key:"item"+s,value:e[s]}));return Gr("datalist",{id:this.question.dataListId},t)}}Ro.Instance.registerQuestion("text",e=>Gr(Fl,e));class Bl extends mo{constructor(e){super(e),this.handleOnChange=this.handleOnChange.bind(this),this.handleOnClick=this.handleOnClick.bind(this),this.handleOnLabelClick=this.handleOnLabelClick.bind(this),this.handleOnSwitchClick=this.handleOnSwitchClick.bind(this),this.handleOnKeyDown=this.handleOnKeyDown.bind(this),this.checkRef={current:null}}getStateElement(){return this.question}get question(){return this.questionBase}doCheck(e){this.question.booleanValue=e}handleOnChange(e){this.doCheck(e.target.checked)}handleOnClick(e){this.question.onLabelClick(e,!0)}handleOnSwitchClick(e){this.question.onSwitchClickModel(e.nativeEvent)}handleOnLabelClick(e,t){this.question.onLabelClick(e,t)}handleOnKeyDown(e){this.question.onKeyDownCore(e)}updateDomElement(){if(!this.question)return;const e=this.checkRef.current;e&&(e.indeterminate=this.question.isIndeterminate),this.setControl(e),super.updateDomElement()}renderElement(){const e=this.question.cssClasses,t=this.question.getItemCss();return Gr("div",{className:e.root,onKeyDown:this.handleOnKeyDown},Gr("label",{className:t},Gr("input",{ref:this.checkRef,type:"checkbox",name:this.question.name,value:null===this.question.booleanValue?"":this.question.booleanValue,id:this.question.inputId,className:e.control,disabled:this.question.isDisabledAttr,readOnly:this.question.isReadOnlyAttr,checked:this.question.booleanValue||!1,onChange:this.handleOnChange,role:this.question.a11y_input_ariaRole,"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.a11y_input_ariaLabel,"aria-labelledby":this.question.a11y_input_ariaLabelledBy,"aria-describedby":this.question.a11y_input_ariaDescribedBy,"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage}),Gr("div",{className:e.sliderGhost,onClick:e=>this.handleOnLabelClick(e,this.question.swapOrder)},Gr("span",{className:this.question.getLabelCss(this.question.swapOrder)},this.renderLocString(this.question.locLabelLeft))),Gr("div",{className:e.switch,onClick:this.handleOnSwitchClick},Gr("span",{className:e.slider},this.question.isDeterminated&&e.sliderText?Gr("span",{className:e.sliderText},this.renderLocString(this.question.getCheckedLabel())):null)),Gr("div",{className:e.sliderGhost,onClick:e=>this.handleOnLabelClick(e,!this.question.swapOrder)},Gr("span",{className:this.question.getLabelCss(!this.question.swapOrder)},this.renderLocString(this.question.locLabelRight)))))}}Ro.Instance.registerQuestion("boolean",e=>Gr(Bl,e));class zl extends Bl{constructor(e){super(e)}renderElement(){const e=this.question.cssClasses,t=this.question.getCheckboxItemCss(),s=this.question.canRenderLabelDescription?po.renderQuestionDescription(this.question):null;return Gr("div",{className:e.rootCheckbox},Gr("div",{className:t},Gr("label",{className:e.checkboxLabel},Gr("input",{ref:this.checkRef,type:"checkbox",name:this.question.name,value:null===this.question.booleanValue?"":this.question.booleanValue,id:this.question.inputId,className:e.controlCheckbox,disabled:this.question.isDisabledAttr,readOnly:this.question.isReadOnlyAttr,checked:this.question.booleanValue||!1,onChange:this.handleOnChange,"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.a11y_input_ariaLabel,"aria-labelledby":this.question.a11y_input_ariaLabelledBy,"aria-describedby":this.question.a11y_input_ariaDescribedBy,"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage}),Gr("span",{className:e.checkboxMaterialDecorator},this.question.svgIcon?Gr("svg",{className:e.checkboxItemDecorator},Gr("use",{xlinkHref:this.question.svgIcon})):null,Gr("span",{className:"check"})),this.question.isLabelRendered&&Gr("span",{className:e.checkboxControlLabel,id:this.question.labelRenderedAriaID},Gr(Po,{element:this.question,cssClasses:this.question.cssClasses}))),s))}}Ro.Instance.registerQuestion("sv-boolean-checkbox",e=>Gr(zl,e)),Kt.Instance.registerRenderer("boolean","checkbox","sv-boolean-checkbox");class Hl extends Bl{constructor(e){super(e)}renderRadioItem(e,t){const s=this.question.cssClasses;return Gr("div",{role:"presentation",className:this.question.getRadioItemClass(s,e)},Gr("label",{className:s.radioLabel},Gr("input",{type:"radio",name:this.question.name,value:e,"aria-errormessage":this.question.ariaErrormessage,checked:e===this.question.value,disabled:this.question.isDisabledAttr,readOnly:this.question.isReadOnlyAttr,className:s.itemRadioControl,onChange:()=>{this.question.value=e}}),this.question.cssClasses.materialRadioDecorator?Gr("span",{className:s.materialRadioDecorator},this.question.itemSvgIcon?Gr("svg",{className:s.itemRadioDecorator},Gr("use",{xlinkHref:this.question.itemSvgIcon})):null):null,Gr("span",{className:s.radioControlLabel},this.renderLocString(t))))}renderElement(){const e=this.question.cssClasses;return Gr("div",{className:e.rootRadio},Gr("fieldset",{role:"presentation",className:e.radioFieldset},this.question.swapOrder?Gr(Kr,null,this.renderRadioItem(this.question.getValueTrue(),this.question.locLabelTrue),this.renderRadioItem(this.question.getValueFalse(),this.question.locLabelFalse)):Gr(Kr,null,this.renderRadioItem(this.question.getValueFalse(),this.question.locLabelFalse),this.renderRadioItem(this.question.getValueTrue(),this.question.locLabelTrue))))}}Ro.Instance.registerQuestion("sv-boolean-radio",e=>Gr(Hl,e)),Kt.Instance.registerRenderer("boolean","radio","sv-boolean-radio");class Ql extends mo{constructor(e){super(e),this.state={value:this.question.value}}get question(){return this.questionBase}renderElement(){return Gr("div",null)}}Ro.Instance.registerQuestion("empty",e=>Gr(Ql,e));class Ul extends po{constructor(e){super(e),this.root={current:null},this.onPointerDownHandler=e=>{this.parentMatrix.onPointerDown(e.nativeEvent,this.model.row)}}get model(){return this.props.model}get parentMatrix(){return this.props.parentMatrix}getStateElement(){return this.model}componentDidMount(){super.componentDidMount(),this.root.current&&this.model.setRootElement(this.root.current)}componentWillUnmount(){super.componentWillUnmount(),this.model.setRootElement(void 0)}shouldComponentUpdate(e,t){return!!super.shouldComponentUpdate(e,t)&&(e.model!==this.model&&(e.element&&e.element.setRootElement(this.root.current),this.model&&this.model.setRootElement(void 0)),!0)}render(){const e=this.model;return e.visible?Gr("tr",{ref:this.root,className:e.className,"data-sv-drop-target-matrix-row":e.dropTargetId,onPointerDown:e=>this.onPointerDownHandler(e)},this.props.children):null}}ho.Instance.registerElement("sv-matrix-row",e=>Gr(Ul,e));class Wl extends go{get question(){return this.props.item.data.question}renderElement(){return Gr("div",null,this.renderIcon())}renderIcon(){return this.question.iconDragElement?Gr("svg",{className:this.question.cssClasses.dragElementDecorator},Gr("use",{xlinkHref:this.question.iconDragElement})):Gr("span",{className:this.question.cssClasses.iconDrag})}}ho.Instance.registerElement("sv-matrix-drag-drop-icon",e=>Gr(Wl,e));class Gl extends po{get question(){return this.props.question}get creator(){return this.props.creator}get table(){return this.question.renderedTable}getStateElement(){return this.table}wrapCell(e,t,s){return this.props.wrapCell(e,t,s)}renderHeader(){const e=this.question.renderedTable;if(!e.showHeader)return null;const t=[],s=e.headerRow.cells;for(var n=0;n<s.length;n++){const e=s[n],i="column"+n,r={};e.width&&(r.width=e.width),e.minWidth&&(r.minWidth=e.minWidth);const a=this.renderCellContent(e,"column-header",{}),o=e.hasTitle?Gr("th",{className:e.className,key:i,style:r}," ",a," "):Gr("td",{className:e.className,key:i,style:r});t.push(o)}return Gr("thead",null,Gr("tr",null,t))}renderFooter(){const e=this.question.renderedTable;return e.showFooter?Gr("tfoot",null,this.renderRow("footer",e.footerRow,this.question.cssClasses,"row-footer")):null}renderRows(){const e=this.question.cssClasses,t=[],s=this.question.renderedTable.renderedRows;for(var n=0;n<s.length;n++)t.push(this.renderRow(s[n].id,s[n],e));return Gr("tbody",null,t)}renderRow(e,t,s,n){const i=[],r=t.cells;for(var a=0;a<r.length;a++)i.push(this.renderCell(r[a],s,n));return Gr(Kr,{key:"row"+e},"row-footer"==n?Gr("tr",null,i):Gr(Ul,{model:t,parentMatrix:this.question},i))}renderCell(e,t,s){const n="cell"+e.id;if(e.hasQuestion)return Gr($l,{key:n,cssClasses:t,cell:e,creator:this.creator,reason:s});if(e.isErrorsCell&&e.isErrorsCell)return Gr(Jl,{cell:e,key:n,keyValue:n,question:e.question,creator:this.creator});let i=s;i||(i=e.hasTitle?"row-header":"");const r=this.renderCellContent(e,i,t);let a=null;return(e.width||e.minWidth)&&(a={},e.width&&(a.width=e.width),e.minWidth&&(a.minWidth=e.minWidth)),Gr("td",{className:e.className,key:n,style:a,colSpan:e.colSpans,title:e.getTitle()},r)}renderCellContent(e,t,s){let n=null,i=null;if((e.width||e.minWidth)&&(i={},e.width&&(i.width=e.width),e.minWidth&&(i.minWidth=e.minWidth)),e.hasTitle){t="row-header";const s=this.renderLocString(e.locTitle),i=e.column?Gr(Yl,{column:e.column,question:this.question}):null;n=Gr(Kr,null,s,i)}if(e.isDragHandlerCell&&(n=Gr(Kr,null,Gr(Wl,{item:{data:{row:e.row,question:this.question}}}))),e.isActionsCell&&(n=ho.Instance.createElement("sv-matrixdynamic-actions-cell",{question:this.question,cssClasses:s,cell:e,model:e.item.getData()})),e.hasPanel&&(n=Gr(al,{key:e.panel.id,element:e.panel,survey:this.question.survey,cssClasses:s,isDisplayMode:this.isDisplayMode,creator:this.creator})),!n)return null;const r=Gr(Kr,null,n);return this.wrapCell(e,r,t)}renderElement(){const e=this.renderHeader(),t=this.renderFooter(),s=this.renderRows();return Gr("table",{className:this.question.getTableCss()},e,s,t)}}class Zl extends mo{constructor(e){super(e),this.question.renderedTable,this.state=this.getState()}get question(){return this.questionBase}getState(e=null){return{rowCounter:e?e.rowCounter+1:0}}updateStateOnCallback(){this.isRendering||this.setState(this.getState(this.state))}componentDidMount(){super.componentDidMount(),this.question.onRenderedTableResetCallback=()=>{this.updateStateOnCallback()}}componentWillUnmount(){super.componentWillUnmount(),this.question.onRenderedTableResetCallback=()=>{}}renderElement(){return this.renderTableDiv()}renderTableDiv(){return Gr("div",{className:this.question.cssClasses.tableWrapper,"data-sv-drop-target-matrix-row":this.question.renderedTable.wrapperDropTargetId,ref:e=>this.setControl(e)},Gr(Gl,{question:this.question,creator:this.creator,wrapCell:(e,t,s)=>this.wrapCell(e,t,s)}))}}class Kl extends go{constructor(e){super(e)}get model(){return this.props.model}renderElement(){return Gr(Io,{model:this.model,handleClick:!1})}}class Jl extends il{constructor(e){super(e)}get key(){return this.props.keyValue}get cell(){return this.props.cell}render(){return this.cell.isVisible?Gr("td",{className:this.cell.className,key:this.key,colSpan:this.cell.colSpans,title:this.cell.getTitle()},super.render()):null}getQuestionPropertiesToTrack(){return super.getQuestionPropertiesToTrack().concat(["visible"])}}ho.Instance.registerElement("sv-matrixdynamic-actions-cell",e=>Gr(Kl,e));class Yl extends go{constructor(e){super(e)}get column(){return this.props.column}get question(){return this.props.question}getStateElement(){return this.column}renderElement(){return this.column.isRenderedRequired?Gr(Kr,null,Gr("span",null," "),Gr("span",{className:this.question.cssClasses.cellRequiredMark},this.column.requiredMark)):null}}class $l extends nl{constructor(e){super(e)}get cell(){return this.props.cell}get itemCss(){return this.cell?this.cell.className:""}getQuestion(){return super.getQuestion()||(this.cell?this.cell.question:null)}doAfterRender(){var e=this.cellRef.current;if(e&&this.cell&&this.question&&this.question.survey&&"r"!==e.getAttribute("data-rendered")){e.setAttribute("data-rendered","r");const t={cell:this.cell,cellQuestion:this.question,htmlElement:e,row:this.cell.row,column:this.cell.cell.column};this.question.survey.matrixAfterCellRender(t),this.question.afterRenderCore(e)}}getShowErrors(){return this.question.isVisible&&(!this.cell.isChoice||this.cell.isFirstChoice)}getCellStyle(){var e=super.getCellStyle();return(this.cell.width||this.cell.minWidth)&&(e||(e={}),this.cell.width&&(e.width=this.cell.width),this.cell.minWidth&&(e.minWidth=this.cell.minWidth)),e}getHeaderText(){return this.cell.headers}renderElement(){return this.cell.isVisible?super.renderElement():null}renderCellContent(){const e=super.renderCellContent(),t=this.cell.showResponsiveTitle?Gr("span",{className:this.cell.responsiveTitleCss},this.renderLocString(this.cell.responsiveLocTitle),Gr(Yl,{column:this.cell.column,question:this.cell.matrix})):null;return Gr(Kr,null,t,e)}renderQuestion(){return this.question.isVisible?this.cell.isChoice?this.cell.isOtherChoice?this.renderOtherComment():this.cell.isCheckbox?this.renderCellCheckboxButton():this.renderCellRadiogroupButton():el.renderQuestionBody(this.creator,this.question):Gr(Kr,null)}renderOtherComment(){const e=this.cell.question,t=e.cssClasses||{};return Gr(Ko,{question:e,item:e.otherItem,cssClasses:t})}renderCellCheckboxButton(){var e=this.cell.question.id+"item"+this.cell.choiceIndex;return Gr(ul,{key:e,question:this.cell.question,cssClasses:this.cell.question.cssClasses,isDisplayMode:this.cell.question.isInputReadOnly,item:this.cell.item,isFirst:this.cell.isFirstChoice,index:this.cell.choiceIndex.toString(),hideCaption:!0,ariaLabel:this.getCellAriaLabel()})}renderCellRadiogroupButton(){var e=this.cell.question.id+"item"+this.cell.choiceIndex;return Gr(Ml,{key:e,question:this.cell.question,cssClasses:this.cell.question.cssClasses,isDisplayMode:this.cell.question.isInputReadOnly,item:this.cell.item,index:this.cell.choiceIndex.toString(),isChecked:this.cell.question.value===this.cell.item.value,isDisabled:this.cell.question.isReadOnly||!this.cell.item.isEnabled,hideCaption:!0,ariaLabel:this.getCellAriaLabel()})}getCellAriaLabel(){return this.question.parentQuestion.getCellAriaLabel(this.cell.row,this.cell.column)}}class Xl extends Zl{constructor(e){super(e)}}Ro.Instance.registerQuestion("matrixdropdown",e=>Gr(Xl,e));class eu extends Zl{constructor(e){super(e),this.handleOnRowAddClick=this.handleOnRowAddClick.bind(this)}get matrix(){return this.questionBase}handleOnRowAddClick(e){this.matrix.addRowUI()}renderElement(){var e=this.question.cssClasses,t=this.question.renderedTable.showTable?this.renderTableDiv():this.renderNoRowsContent(e);return Gr("div",null,this.renderAddRowButtonOnTop(e),t,this.renderAddRowButtonOnBottom(e))}renderAddRowButtonOnTop(e){return this.matrix.renderedTable.showAddRowOnTop?this.renderAddRowButton(e):null}renderAddRowButtonOnBottom(e){return this.matrix.renderedTable.showAddRowOnBottom?this.renderAddRowButton(e):null}renderNoRowsContent(e){return ho.Instance.createElement("sv-placeholder-matrixdynamic",{cssClasses:e,question:this.matrix})}renderAddRowButton(e,t=!1){return ho.Instance.createElement("sv-matrixdynamic-add-btn",{question:this.question,cssClasses:e,isEmptySection:t})}}Ro.Instance.registerQuestion("matrixdynamic",e=>Gr(eu,e));class tu extends go{constructor(e){super(e),this.handleOnRowAddClick=this.handleOnRowAddClick.bind(this)}get matrix(){return this.props.question}handleOnRowAddClick(e){this.matrix.addRowUI()}renderElement(){const e=this.renderLocString(this.matrix.locAddRowText),t=Gr("button",{className:this.matrix.getAddRowButtonCss(this.props.isEmptySection),type:"button",disabled:this.matrix.isInputReadOnly,onClick:this.matrix.isDesignMode?void 0:this.handleOnRowAddClick},e,Gr("span",{className:this.props.cssClasses.iconAdd},this.cssClasses.iconAddId&&Gr("svg",null,Gr("use",{xlinkHref:this.cssClasses.iconAddId}))));return this.props.isEmptySection?t:Gr("div",{className:this.props.cssClasses.footer},t)}}class su extends go{constructor(e){super(e)}renderElement(){const e=this.props.cssClasses,t=this.props.question,s=t.renderedTable.showAddRow,n=this.renderLocString(t.locNoRowsText),i=Gr("div",{className:e.noRowsText},n),r=s?this.renderAddRowButton(e,t):void 0;return Gr("div",{className:e.noRowsSection},i,r)}renderAddRowButton(e,t){return ho.Instance.createElement("sv-matrixdynamic-add-btn",{question:t,cssClasses:e,isEmptySection:!0})}}ho.Instance.registerElement("sv-matrixdynamic-add-btn",e=>Gr(tu,e)),ho.Instance.registerElement("sv-placeholder-matrixdynamic",e=>Gr(su,e));class nu extends mo{constructor(e){super(e)}get question(){return this.questionBase}componentDidMount(){super.componentDidMount(),this.setState({panelCounter:0});const e=this;this.question.panelCountChangedCallback=function(){e.updateQuestionRendering()},this.question.currentIndexChangedCallback=function(){e.updateQuestionRendering()},this.question.renderModeChangedCallback=function(){e.updateQuestionRendering()}}componentWillUnmount(){super.componentWillUnmount(),this.question.panelCountChangedCallback=()=>{},this.question.currentIndexChangedCallback=()=>{},this.question.renderModeChangedCallback=()=>{}}updateQuestionRendering(){this.setState({panelCounter:this.state?this.state.panelCounter+1:1})}renderElement(){const e=[],t=this.question.cssClasses;this.question.renderedPanels.forEach((s,n)=>{e.push(Gr(iu,{key:s.id,element:s,question:this.question,index:n,cssClasses:t,isDisplayMode:this.isDisplayMode,creator:this.creator}))});const s=this.question.isRangeShowing&&this.question.isProgressTopShowing?this.renderRange():null,n=this.renderNavigatorV2(),i=this.renderPlaceholder(t);return Gr("div",{className:t.root},this.question.hasTabbedMenu?Gr("div",{className:this.question.getTabsContainerCss()},Gr(Io,{model:this.question.tabbedMenu})):null,i,s,Gr("div",{className:this.question.cssClasses.panelsContainer},e),n)}renderRange(){return Gr("div",{className:this.question.cssClasses.progress},Gr("div",{className:this.question.cssClasses.progressBar,style:{width:this.question.progress},role:"progressbar","aria-label":this.question.progressBarAriaLabel}))}renderAddRowButton(){return ho.Instance.createElement("sv-paneldynamic-add-btn",{data:{question:this.question}})}renderNavigatorV2(){if(!this.question.showNavigation)return null;const e=this.question.isRangeShowing&&this.question.isProgressBottomShowing?this.renderRange():null;return Gr("div",{className:this.question.cssClasses.footer},Gr("hr",{className:this.question.cssClasses.separator}),e,this.question.showFooterToolbar?Gr("div",{className:this.question.cssClasses.footerButtonsContainer},Gr(Io,{model:this.question.footerToolbar})):null)}renderPlaceholder(e){return this.question.getShowNoEntriesPlaceholder()?ho.Instance.createElement("sv-placeholder-paneldynamic",{cssClasses:e,question:this.question}):null}}class iu extends al{get question(){return this.props.question}get index(){return this.props.index}getSurvey(){return this.question?this.question.survey:null}getCss(){const e=this.getSurvey();return e?e.getCss():{}}render(){const e=super.render(),t=this.renderButton(),s=this.question.showSeparator(this.index)?Gr("hr",{className:this.question.cssClasses.separator}):null;return Gr(Kr,null,Gr("div",{className:this.question.getPanelWrapperCss(this.panel)},e,t),s)}renderButton(){return this.question.canRenderRemovePanelOnRight(this.panel)?ho.Instance.createElement("sv-paneldynamic-remove-btn",{data:{question:this.question,panel:this.panel}}):null}}Ro.Instance.registerQuestion("paneldynamic",e=>Gr(nu,e));class ru extends go{constructor(e){super(e)}renderElement(){const e=this.props.cssClasses,t=this.props.question;return Gr("div",{className:e.noEntriesPlaceholder},Gr("span",null,this.renderLocString(t.locNoEntriesText)),this.renderAddRowButton(t))}renderAddRowButton(e){return ho.Instance.createElement("sv-paneldynamic-add-btn",{data:{question:e}})}}ho.Instance.registerElement("sv-placeholder-paneldynamic",e=>Gr(ru,e));class au extends Fo{constructor(e){super(e)}get isTop(){return this.props.isTop}get progress(){return this.survey.progressValue}get progressText(){return this.survey.progressText}get progressBarAriaLabel(){return this.survey.progressBarAriaLabel}render(){var e={width:this.progress+"%"};return Gr("div",{className:this.survey.getProgressCssClasses(this.props.container)},Gr("div",{style:e,className:this.css.progressBar,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-label":this.progressBarAriaLabel},Gr("span",{className:Yi.getProgressTextInBarCss(this.css)},this.progressText)),Gr("span",{className:Yi.getProgressTextUnderBarCss(this.css)},this.progressText))}}ho.Instance.registerElement("sv-progress-pages",e=>Gr(au,e)),ho.Instance.registerElement("sv-progress-questions",e=>Gr(au,e)),ho.Instance.registerElement("sv-progress-correctquestions",e=>Gr(au,e)),ho.Instance.registerElement("sv-progress-requiredquestions",e=>Gr(au,e));class ou extends Fo{constructor(e){super(e),this.listContainerRef={current:null}}get model(){return this.props.model}get container(){return this.props.container}onResize(e){this.setState({canShowItemTitles:e}),this.setState({canShowHeader:!e})}onUpdateScroller(e){this.setState({hasScroller:e})}onUpdateSettings(){this.setState({canShowItemTitles:this.model.showItemTitles}),this.setState({canShowFooter:!this.model.showItemTitles})}render(){return Gr("div",{className:this.model.getRootCss(this.props.container),style:{maxWidth:this.model.progressWidth},role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-label":this.model.progressBarAriaLabel},this.state.canShowHeader?Gr("div",{className:this.css.progressButtonsHeader},Gr("div",{className:this.css.progressButtonsPageTitle,title:this.model.headerText},this.model.headerText)):null,Gr("div",{className:this.css.progressButtonsContainer},Gr("div",{className:this.model.getScrollButtonCss(this.state.hasScroller,!0),role:"button",onClick:()=>this.clickScrollButton(this.listContainerRef.current,!0)}),Gr("div",{className:this.css.progressButtonsListContainer,ref:this.listContainerRef},Gr("ul",{className:this.css.progressButtonsList},this.getListElements())),Gr("div",{className:this.model.getScrollButtonCss(this.state.hasScroller,!1),role:"button",onClick:()=>this.clickScrollButton(this.listContainerRef.current,!1)})),this.state.canShowFooter?Gr("div",{className:this.css.progressButtonsFooter},Gr("div",{className:this.css.progressButtonsPageTitle,title:this.model.footerText},this.model.footerText)):null)}getListElements(){let e=[];return this.survey.visiblePages.forEach((t,s)=>{e.push(this.renderListElement(t,s))}),e}renderListElement(e,t){const s=po.renderLocString(e.locNavigationTitle);return Gr("li",{key:"listelement"+t,className:this.model.getListElementCss(t),onClick:this.model.isListElementClickable(t)?()=>this.model.clickListElement(e):void 0,"data-page-number":this.model.getItemNumber(e)},Gr("div",{className:this.css.progressButtonsConnector}),this.state.canShowItemTitles?Gr(Kr,null,Gr("div",{className:this.css.progressButtonsPageTitle,title:e.renderedNavigationTitle},s),Gr("div",{className:this.css.progressButtonsPageDescription,title:e.navigationDescription},e.navigationDescription)):null,Gr("div",{className:this.css.progressButtonsButton},Gr("div",{className:this.css.progressButtonsButtonBackground}),Gr("div",{className:this.css.progressButtonsButtonContent}),Gr("span",null,this.model.getItemNumber(e))))}clickScrollButton(e,t){e&&(e.scrollLeft+=70*(t?-1:1))}componentDidMount(){super.componentDidMount(),setTimeout(()=>{this.respManager=new yn(this.model,this.listContainerRef.current,this)},10)}componentWillUnmount(){this.respManager&&this.respManager.dispose(),super.componentWillUnmount()}}ho.Instance.registerElement("sv-progress-buttons",e=>Gr(ou,e));class lu extends po{constructor(e){super(e),this.handleKeydown=e=>{this.model.onKeyDown(e)},this.elementRef={current:null}}get model(){return this.props.model}get item(){return this.props.item}getStateElement(){return this.item}render(){if(!this.item)return null;const e=this.model.getItemClass(this.item),t=this.item.component||this.model.itemComponent,s=ho.Instance.createElement(t,{item:this.item,key:this.item.id,model:this.model}),n=Gr("div",{ref:this.elementRef,style:this.model.getItemStyle(this.item),className:this.model.cssClasses.itemBody,title:this.item.getTooltip(),onMouseOver:e=>{this.model.onItemHover(this.item)},onMouseLeave:e=>{this.model.onItemLeave(this.item)}},s),i=this.item.needSeparator?Gr("div",{className:this.model.cssClasses.itemSeparator}):null,r={display:this.model.isItemVisible(this.item)?null:"none"};return Mo(Gr("li",{className:e,role:this.model.listItemRole,style:r,id:this.item.elementId,"aria-selected":this.model.getA11yItemAriaSelected(this.item),"aria-checked":this.model.getA11yItemAriaChecked(this.item),onClick:e=>{this.model.onItemClick(this.item),e.stopPropagation()},onPointerDown:e=>this.model.onPointerDown(e,this.item)},i,n),this.item)}componentDidMount(){var e;super.componentDidMount(),this.model.onItemRended(this.item,null===(e=this.elementRef)||void 0===e?void 0:e.current)}}ho.Instance.registerElement("sv-list-item",e=>Gr(lu,e));class uu extends po{constructor(e){super(e),this.handleKeydown=e=>{this.model.onKeyDown(e)},this.handleMouseMove=e=>{this.model.onMouseMove(e)},this.state={filterString:this.model.filterString||""},this.listContainerRef={current:null}}get model(){return this.props.model}getStateElement(){return this.model}componentDidMount(){super.componentDidMount(),this.listContainerRef&&this.listContainerRef.current&&this.model.initListContainerHtmlElement(this.listContainerRef.current)}componentDidUpdate(e,t){var s;super.componentDidUpdate(e,t),this.model!==e.model&&(this.model&&(null===(s=this.listContainerRef)||void 0===s?void 0:s.current)&&this.model.initListContainerHtmlElement(this.listContainerRef.current),e.model&&e.model.initListContainerHtmlElement(void 0))}componentWillUnmount(){super.componentWillUnmount(),this.model&&this.model.initListContainerHtmlElement(void 0)}renderElement(){return Gr("div",{className:this.model.cssClasses.root,ref:this.listContainerRef},this.searchElementContent(),this.emptyContent(),this.renderList())}renderList(){if(!this.model.renderElements)return null;const e=this.renderItems(),t={display:this.model.isEmpty?"none":null};return Gr("ul",{className:this.model.getListClass(),style:t,role:this.model.listRole,"aria-label":this.model.a11ya11y_input_ariaLabel,id:this.model.elementId,onMouseDown:e=>{e.preventDefault()},onKeyDown:this.handleKeydown,onMouseMove:this.handleMouseMove},e)}renderItems(){if(!this.model)return null;const e=this.model.renderedActions;return e?e.map((e,t)=>Gr(lu,{model:this.model,item:e,key:"item"+t})):null}searchElementContent(){if(this.model.showFilter){const e=e=>{var t;const s=null===(t=e.target.getRootNode())||void 0===t?void 0:t.activeElement;e.target===s&&(this.model.filterString=e.target.value)},t=e=>{this.model.goToItems(e)},s=this.model.showSearchClearButton&&this.model.filterString?Gr("button",{className:this.model.cssClasses.searchClearButtonIcon,onClick:e=>{this.model.onClickSearchClearButton(e)}},Gr(fo,{iconName:"icon-searchclear",size:"auto"})):null;return Gr("div",{className:this.model.cssClasses.filter},Gr("div",{className:this.model.cssClasses.filterIcon},Gr(fo,{iconName:"icon-search",size:"auto"})),Gr("input",{type:"text",className:this.model.cssClasses.filterInput,"aria-label":this.model.filterStringPlaceholder,placeholder:this.model.filterStringPlaceholder,value:this.state.filterString,onKeyUp:t,onChange:e}),s)}return null}emptyContent(){const e={display:this.model.isEmpty?null:"none"};return Gr("div",{className:this.model.cssClasses.emptyContainer,style:e},Gr("div",{className:this.model.cssClasses.emptyText,"aria-label":this.model.emptyMessage},this.model.emptyMessage))}}ho.Instance.registerElement("sv-list",e=>Gr(uu,e));class du extends Fo{componentDidMount(){super.componentDidMount(),this.props.model.updateStickyTOCSize(this.survey.rootElement)}render(){const e=this.props.model;let t;return t=e.isMobile?Gr("div",{onClick:e.togglePopup},Gr(fo,{iconName:e.icon,size:24}),Gr(wo,{model:e.popupModel})):Gr(uu,{model:e.listModel}),Gr("div",{className:e.containerCss},t)}}ho.Instance.registerElement("sv-navigation-toc",e=>Gr(du,e));class hu extends mo{constructor(e){super(e),this.handleOnClick=this.handleOnClick.bind(this)}get question(){return this.questionBase}handleOnClick(e){this.question.setValueFromClick(e.target.value),this.setState({value:this.question.value})}renderItem(e,t){return ho.Instance.createElement(this.question.itemComponent,{question:this.question,item:e,index:t,key:"value"+t,handleOnClick:this.handleOnClick,isDisplayMode:this.isDisplayMode})}renderElement(){var e=this.question.cssClasses,t=this.question.minRateDescription?this.renderLocString(this.question.locMinRateDescription):null,s=this.question.maxRateDescription?this.renderLocString(this.question.locMaxRateDescription):null;return Gr("div",{className:this.question.ratingRootCss,ref:e=>this.setControl(e)},Gr("fieldset",{role:this.question.a11y_input_ariaRole,"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.a11y_input_ariaLabel,"aria-labelledby":this.question.a11y_input_ariaLabelledBy,"aria-describedby":this.question.a11y_input_ariaDescribedBy,"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage},Gr("legend",{role:"presentation",className:"sv-hidden"}),this.question.hasMinLabel?Gr("span",{className:e.minText},t):null,this.question.renderedRateItems.map((e,t)=>this.renderItem(e,t)),this.question.hasMaxLabel?Gr("span",{className:e.maxText},s):null))}}Ro.Instance.registerQuestion("rating",e=>Gr(hu,e));class cu extends Cl{constructor(e){super(e)}renderElement(){var e=this.question.cssClasses,t=this.renderSelect(e);return Gr("div",{className:this.question.cssClasses.rootDropdown},t)}}Ro.Instance.registerQuestion("sv-rating-dropdown",e=>Gr(cu,e)),Kt.Instance.registerRenderer("rating","dropdown","sv-rating-dropdown");class pu extends mo{constructor(e){super(e),this.rangeInputRef={current:null}}componentDidMount(){super.componentDidMount(),this.question.refreshInputRange(this.rangeInputRef.current)}get question(){return this.questionBase}getStateElement(){return this.question}renderElement(){const{cssClasses:e,showLabels:t,sliderType:s,getTrackPercentLeft:n,getTrackPercentRight:i,allowDragRange:r,setValueByClickOnPath:a}=this.question,o="single"===s&&r?null:this.getRangeInput(),l=this.getInputsAndThumbs(),u=t?this.getLabels():null;return Gr("div",{className:this.question.rootCss,ref:e=>this.setControl(e)},o,Gr("div",{className:e.visualContainer,onPointerUp:e=>{a(e.nativeEvent,this.control)}},Gr("div",{className:e.visualContainerSlider},Gr("div",{className:e.inverseTrackLeft,style:{width:n()+"%"}}),Gr("div",{className:e.inverseTrackRight,style:{width:i()+"%"}}),Gr("div",{className:e.rangeTrack,style:{left:n()+"%",right:i()+"%"}}),l)),u)}getInputsAndThumbs(){const e=[],t=this.question.renderedValue;for(let s=0;s<t.length;s++){const t=Gr(Kr,{key:s},this.getInput(s),this.getThumb(s));e.push(t)}return e}getThumb(e){const{cssClasses:t,getThumbContainerCss:s,tooltipVisibility:n,tooltipCss:i,getPercent:r,renderedValue:a,getTooltipValue:o}=this.question,l=a[e];let u=null;return"never"!==n&&(u=Gr("div",{className:i},Gr("div",{className:t.tooltipPanel},Gr("div",{className:t.tooltipValue},o(e))))),Gr("div",{className:s(e),style:{left:r(l)+"%"}},u,Gr("div",{className:t.thumb},Gr("div",{className:t.thumbDot})))}getInput(e){const{renderedMax:t,renderedMin:s,step:n,cssClasses:i,isDisabledAttr:r,renderedValue:a,handleOnChange:o,handlePointerDown:l,handlePointerUp:u,handleKeyDown:d,handleKeyUp:h,handleOnFocus:c,handleOnBlur:p}=this.question,g=a[e],m=Gr("input",{className:i.input,id:"sjs-slider-input-"+e,type:"range",min:s,max:t,step:n,value:g,onChange:t=>{o(t.nativeEvent,e)},onPointerDown:e=>{l(e.nativeEvent)},onPointerUp:e=>{e.stopPropagation(),u(e.nativeEvent)},onKeyDown:e=>{d(e.nativeEvent)},onKeyUp:e=>{h(e.nativeEvent)},onFocus:()=>{c(e)},onBlur:()=>{p()},disabled:r,"aria-required":this.question.a11y_input_ariaRequired,"aria-label":this.question.a11y_input_ariaLabel,"aria-labelledby":this.question.a11y_input_ariaLabelledBy,"aria-describedby":this.question.a11y_input_ariaDescribedBy,"aria-invalid":this.question.a11y_input_ariaInvalid,"aria-errormessage":this.question.a11y_input_ariaErrormessage});return m}getRangeInput(){const{renderedMax:e,renderedMin:t,step:s,cssClasses:n,handleRangeOnChange:i,handleRangePointerDown:r,handleRangePointerUp:a}=this.question;return Gr("input",{name:"range-input",id:"sjs-slider-input-range-input",ref:this.rangeInputRef,className:n.input,type:"range","aria-hidden":"true",min:t,max:e,step:s,tabIndex:-1,onChange:e=>{i(e.nativeEvent)},onPointerDown:e=>{e.persist(),r(e.nativeEvent,this.control)},onPointerUp:e=>{a(e.nativeEvent,this.control)}})}getLabels(){const e=[],{renderedLabels:t,cssClasses:s}=this.question;for(let s=0;s<t.length;s++){const n=ho.Instance.createElement("sv-slider-label-item",{item:t[s],question:this.question,key:t[s].id});e.push(n)}return Gr("div",{className:s.labelsContainer},Gr("div",null,e))}}Ro.Instance.registerQuestion("slider",e=>Gr(pu,e));class gu extends mo{constructor(e){super(e)}get question(){return this.questionBase}renderElement(){var e=this.question.cssClasses;return Gr("div",{id:this.question.inputId,className:e.root,ref:e=>this.setControl(e),"aria-live":"polite","aria-label":this.question.formatedValue},this.question.formatedValue)}}Ro.Instance.registerQuestion("expression",e=>Gr(gu,e));class mu extends qo{constructor(e){super(e),this.handleOnExpanded=this.handleOnExpanded.bind(this)}getStateElements(){return[this.popup,this.popup.survey]}handleOnExpanded(e){this.popup.changeExpandCollapse()}canRender(){return super.canRender()&&this.popup.isShowing}renderElement(){var e=this.renderWindowHeader(),t=this.renderBody();let s={};return this.popup.renderedWidth&&(s.width=this.popup.renderedWidth,s.maxWidth=this.popup.renderedWidth),Gr("div",{className:this.popup.cssRoot,style:s,onScroll:()=>this.popup.onScroll()},Gr("div",{className:this.popup.cssRootContent},e,t))}renderWindowHeader(){var e,t=this.popup,s=(t.cssHeaderRoot,null),n=null,i=null;return t.isCollapsed?(t.cssRootCollapsedMod,s=this.renderTitleCollapsed(t),e=this.renderExpandIcon()):e=this.renderCollapseIcon(),t.allowClose&&(n=this.renderCloseButton(this.popup)),t.allowFullScreen&&(i=this.renderAllowFullScreenButon(this.popup)),Gr("div",{className:t.cssHeaderRoot},s,Gr("div",{className:t.cssHeaderButtonsContainer},i,Gr("div",{className:t.cssHeaderCollapseButton,onClick:this.handleOnExpanded},e),n))}renderTitleCollapsed(e){return e.locTitle?Gr("div",{className:e.cssHeaderTitleCollapsed},e.locTitle.renderedHtml):null}renderExpandIcon(){return Gr(fo,{iconName:"icon-restore_16x16",size:16})}renderCollapseIcon(){return Gr(fo,{iconName:"icon-minimize_16x16",size:16})}renderCloseButton(e){return Gr("div",{className:e.cssHeaderCloseButton,onClick:()=>{e.hide(),"function"==typeof this.props.onClose&&this.props.onClose()}},Gr(fo,{iconName:"icon-close_16x16",size:16}))}renderAllowFullScreenButon(e){let t;return t=e.isFullScreen?Gr(fo,{iconName:"icon-back-to-panel_16x16",size:16}):Gr(fo,{iconName:"icon-full-screen_16x16",size:16}),Gr("div",{className:e.cssHeaderFullScreenButton,onClick:()=>{e.toggleFullScreen()}},t)}renderBody(){return Gr("div",{className:this.popup.cssBody},this.doRender())}createSurvey(e){e||(e={}),super.createSurvey(e),this.popup=new ar(null,this.survey),e.closeOnCompleteTimeout&&(this.popup.closeOnCompleteTimeout=e.closeOnCompleteTimeout),this.popup.allowClose=e.allowClose,this.popup.allowFullScreen=e.allowFullScreen,this.popup.isShowing=!0,this.popup.isExpanded||!e.expanded&&!e.isExpanded||this.popup.expand()}}class vu extends mo{constructor(e){super(e)}get question(){return this.questionBase}renderElement(){var e=this.question.cssClasses;return Gr("fieldset",{className:this.question.getSelectBaseRootCss(),style:this.question.getContainerStyle()},Gr("legend",{className:"sv-hidden"},this.question.locTitle.renderedHtml),this.question.hasColumns?this.getColumns(e):this.getItems(e))}getColumns(e){return this.question.columns.map((t,s)=>{var n=t.map((t,s)=>this.renderItem("item"+s,t,e));return Gr("div",{key:"column"+s+this.question.getItemsColumnKey(t),className:this.question.getColumnClass(),role:"presentation"},n)})}getItems(e){for(var t=[],s=0;s<this.question.visibleChoices.length;s++){var n=this.question.visibleChoices[s],i="item"+s;t.push(this.renderItem(i,n,e))}return t}get textStyle(){return{marginLeft:"3px",display:"inline",position:"static"}}renderItem(e,t,s){const n=Gr(fu,{key:e,question:this.question,item:t,cssClasses:s}),i=this.question.survey;let r=null;return i&&(r=co.wrapItemValue(i,n,this.question,t)),null!=r?r:n}}class fu extends go{constructor(e){super(e),this.handleOnChange=this.handleOnChange.bind(this)}getStateElement(){return this.item}componentDidMount(){super.componentDidMount(),this.reactOnStrChanged()}componentWillUnmount(){super.componentWillUnmount(),this.item.locImageLink.onChanged=function(){}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.reactOnStrChanged()}reactOnStrChanged(){this.item.locImageLink.onChanged=()=>{this.setState({locImageLinkchanged:this.state&&this.state.locImageLink?this.state.locImageLink+1:1})}}get cssClasses(){return this.props.cssClasses}get item(){return this.props.item}get question(){return this.props.question}handleOnChange(e){if(!this.question.isReadOnlyAttr){if(this.question.multiSelect)if(e.target.checked)this.question.value=this.question.value.concat(e.target.value);else{var t=this.question.value;t.splice(this.question.value.indexOf(e.target.value),1),this.question.value=t}else this.question.value=e.target.value;this.setState({value:this.question.value})}}renderElement(){const e=this.item,t=this.question,s=this.cssClasses;var n=t.isItemSelected(e),i=t.getItemClass(e),r=null;t.showLabel&&(r=Gr("span",{className:t.cssClasses.itemText},e.text?po.renderLocString(e.locText):e.value));var a={objectFit:this.question.imageFit},o=null;if(e.locImageLink.renderedHtml&&"image"===this.question.contentMode&&(o=Gr("img",{className:s.image,src:e.locImageLink.renderedHtml,width:this.question.renderedImageWidth,height:this.question.renderedImageHeight,alt:e.locText.renderedHtml,style:a,onLoad:t=>{this.question.onContentLoaded(e,t.nativeEvent)},onError:t=>{e.onErrorHandler(e,t.nativeEvent)}})),e.locImageLink.renderedHtml&&"video"===this.question.contentMode&&(o=Gr("video",{controls:!0,className:s.image,src:e.locImageLink.renderedHtml,width:this.question.renderedImageWidth,height:this.question.renderedImageHeight,style:a,onLoadedMetadata:t=>{this.question.onContentLoaded(e,t.nativeEvent)},onError:t=>{e.onErrorHandler(e,t.nativeEvent)}})),!e.locImageLink.renderedHtml||e.contentNotLoaded){let e={width:this.question.renderedImageWidth,height:this.question.renderedImageHeight,objectFit:this.question.imageFit};o=Gr("div",{className:s.itemNoImage,style:e},s.itemNoImageSvgIcon?Gr(fo,{className:s.itemNoImageSvgIcon,iconName:this.question.cssClasses.itemNoImageSvgIconId,size:48}):null)}return Gr("div",{className:i},Gr("label",{className:s.label},Gr("input",{className:s.itemControl,id:this.question.getItemId(e),type:this.question.inputType,name:this.question.questionName,checked:n,value:e.value,disabled:!this.question.getItemEnabled(e),readOnly:this.question.isReadOnlyAttr,onChange:this.handleOnChange,required:this.question.inputRequiredAttribute,"aria-label":e.locText.renderedHtml,"aria-invalid":this.question.ariaInvalid,"aria-errormessage":this.question.ariaErrormessage}),Gr("div",{className:this.question.cssClasses.itemDecorator},Gr("div",{className:this.question.cssClasses.imageContainer},this.question.cssClasses.checkedItemDecorator?Gr("span",{className:this.question.cssClasses.checkedItemDecorator,"aria-hidden":"true"},this.question.cssClasses.checkedItemSvgIconId?Gr(fo,{size:"auto",className:this.question.cssClasses.checkedItemSvgIcon,iconName:this.question.cssClasses.checkedItemSvgIconId}):null):null,o),r)))}}Ro.Instance.registerQuestion("imagepicker",e=>Gr(vu,e));class bu extends mo{constructor(e){super(e)}componentDidMount(){super.componentDidMount(),this.question.locImageLink.onChanged=()=>{this.forceUpdate()}}componentWillUnmount(){super.componentWillUnmount(),this.question.locImageLink.onChanged=()=>{}}get question(){return this.questionBase}renderElement(){var e=this.question.getImageCss(),t={objectFit:this.question.imageFit,width:this.question.renderedStyleWidth,height:this.question.renderedStyleHeight};this.question.imageLink&&!this.question.contentNotLoaded||(t.display="none");var s=null;"image"===this.question.renderedMode&&(s=Gr("img",{className:e,src:this.question.locImageLink.renderedHtml||null,alt:this.question.renderedAltText,width:this.question.renderedWidth,height:this.question.renderedHeight,style:t,onLoad:e=>{this.question.onLoadHandler()},onError:e=>{this.question.onErrorHandler()}})),"video"===this.question.renderedMode&&(s=Gr("video",{controls:!0,className:e,src:this.question.locImageLink.renderedHtml,width:this.question.renderedWidth,height:this.question.renderedHeight,style:t,onLoadedMetadata:e=>{this.question.onLoadHandler()},onError:e=>{this.question.onErrorHandler()}})),"youtube"===this.question.renderedMode&&(s=Gr("iframe",{className:e,src:this.question.locImageLink.renderedHtml,width:this.question.renderedWidth,height:this.question.renderedHeight,style:t,title:this.question.renderedAltText}));var n=null;return this.question.imageLink&&!this.question.contentNotLoaded||(n=Gr("div",{className:this.question.cssClasses.noImage},Gr(fo,{iconName:this.question.cssClasses.noImageSvgIconId,size:48}))),Gr("div",{className:this.question.cssClasses.root},s,n)}}Ro.Instance.registerQuestion("image",e=>Gr(bu,e));class yu extends mo{constructor(e){super(e),this.state={value:this.question.value}}get question(){return this.questionBase}renderElement(){var e=this.question.cssClasses;const t=this.question.showLoadingIndicator?this.renderLoadingIndicator():null;var s=this.renderCleanButton();return Gr("div",{className:e.root,ref:e=>this.setControl(e),style:{width:this.question.renderedCanvasWidth}},Gr("div",{className:e.placeholder,style:{display:this.question.needShowPlaceholder()?"":"none"}},this.renderLocString(this.question.locRenderedPlaceholder)),Gr("div",null,this.renderBackgroundImage(),Gr("canvas",{tabIndex:-1,className:this.question.cssClasses.canvas,onBlur:e=>{this.question.onBlur(e)}})),s,t)}renderBackgroundImage(){return this.question.backgroundImage?Gr("img",{className:this.question.cssClasses.backgroundImage,src:this.question.backgroundImage,style:{width:this.question.renderedCanvasWidth},role:"presentation"}):null}renderLoadingIndicator(){return Gr("div",{className:this.question.cssClasses.loadingIndicator},Gr(El,null))}renderCleanButton(){if(!this.question.canShowClearButton)return null;var e=this.question.cssClasses;return Gr("div",{className:e.controls},Gr("button",{type:"button",className:e.clearButton,title:this.question.clearButtonCaption,onClick:()=>this.question.clearValue(!0)},this.question.cssClasses.clearButtonIconId?Gr(fo,{iconName:this.question.cssClasses.clearButtonIconId,size:"auto"}):Gr("span",null,"✖")," "))}}Ro.Instance.registerQuestion("signaturepad",e=>Gr(yu,e));class Cu extends mo{constructor(e){super(e)}get question(){return this.questionBase}getStateElement(){return this.question}renderElement(){const e=this.renderItems();return Gr("div",{className:this.question.cssClasses.root},e)}renderItems(){return this.question.visibleChoices.map((e,t)=>Gr(wu,{key:this.question.inputId+"_"+t,item:e,question:this.question,index:t}))}}Ro.Instance.registerQuestion("buttongroup",e=>Gr(Cu,e));class wu extends po{constructor(e){super(e)}get index(){return this.props.index}get question(){return this.props.question}get item(){return this.props.item}getStateElement(){return this.item}renderElement(){this.model=new vr(this.question,this.item,this.index);const e=this.renderIcon(),t=this.renderInput(),s=this.renderCaption();return Gr("label",{className:this.model.css.label,title:this.model.caption.renderedHtml},t,Gr("div",{className:this.model.css.decorator},e,s))}renderIcon(){return this.model.iconName?Gr(fo,{className:this.model.css.icon,iconName:this.model.iconName,size:this.model.iconSize||24}):null}renderInput(){return Gr("input",{className:this.model.css.control,id:this.model.id,type:"radio",name:this.model.name,checked:this.model.selected,value:this.model.value,disabled:this.model.readOnly,onChange:()=>{this.model.onChange()},"aria-required":this.model.isRequired,"aria-label":this.model.caption.renderedHtml,"aria-invalid":this.model.hasErrors,"aria-errormessage":this.model.describedBy})}renderCaption(){if(!this.model.showCaption)return null;let e=this.renderLocString(this.model.caption);return Gr("span",{className:this.model.css.caption,title:this.model.caption.renderedHtml},e)}}class xu extends Cl{constructor(e){super(e)}renderElement(){const e=this.question.cssClasses,t=this.renderSelect(e);return Gr("div",{className:this.question.cssClasses.rootDropdown},t)}}Ro.Instance.registerQuestion("sv-buttongroup-dropdown",e=>Gr(xu,e)),Kt.Instance.registerRenderer("buttongroup","dropdown","sv-buttongroup-dropdown");class _u extends vo{constructor(e){super(e)}getStateElements(){const e=super.getStateElements();return this.question.contentQuestion&&e.push(this.question.contentQuestion),e}renderElement(){return el.renderQuestionBody(this.creator,this.question.contentQuestion)}}class Vu extends vo{constructor(e){super(e)}canRender(){return!!this.question.contentPanel}renderElement(){return Gr(al,{element:this.question.contentPanel,creator:this.creator,survey:this.question.survey})}}Ro.Instance.registerQuestion("custom",e=>Gr(_u,e)),Ro.Instance.registerQuestion("composite",e=>Gr(Vu,e));class Iu extends po{get model(){return this.props.model}get item(){return this.props.item}getStateElement(){return this.item}render(){if(!this.item)return null;const e=this.renderLocString(this.item.locTitle,void 0,"locString"),t=this.item.iconName?Gr(fo,{className:this.model.cssClasses.itemIcon,iconName:this.item.iconName,size:this.item.iconSize,"aria-label":this.item.title}):null,s=this.item.markerIconName?Gr(fo,{className:this.item.cssClasses.itemMarkerIcon,iconName:this.item.markerIconName,size:"auto"}):null;return Gr(Kr,null,t,e,s)}}ho.Instance.registerElement("sv-list-item-content",e=>Gr(Iu,e));class Su extends po{get model(){return this.props.model}get item(){return this.props.item}getStateElement(){return this.item}render(){var e;return this.item?Gr(Kr,null,ho.Instance.createElement("sv-list-item-content",{item:this.item,key:"content"+this.item.id,model:this.model}),Gr(wo,{model:null===(e=this.item)||void 0===e?void 0:e.popupModel})):null}}ho.Instance.registerElement("sv-list-item-group",e=>Gr(Su,e));class Pu extends Jr{constructor(e){super(e)}get survey(){return this.props.data}render(){const e=[];return e.push(Gr("div",{key:"logo-image",className:this.survey.logoClassNames},Gr("img",{className:this.survey.css.logoImage,src:this.survey.locLogo.renderedHtml||null,alt:this.survey.locTitle.renderedHtml,width:this.survey.renderedLogoWidth,height:this.survey.renderedLogoHeight,style:{objectFit:this.survey.logoFit,width:this.survey.renderedStyleLogoWidth,height:this.survey.renderedStyleLogoHeight}}))),Gr(Kr,null,e)}}ho.Instance.registerElement("sv-logo-image",e=>Gr(Pu,e));class Tu extends go{constructor(e){super(e),this.handleOnRowRemoveClick=this.handleOnRowRemoveClick.bind(this)}get question(){return this.props.item.data.question}get row(){return this.props.item.data.row}handleOnRowRemoveClick(e){this.question.removeRowUI(this.row)}renderElement(){var e=this.renderLocString(this.question.locRemoveRowText);return Gr("button",{className:this.question.getRemoveRowButtonCss(),type:"button",onClick:this.handleOnRowRemoveClick,disabled:this.question.isInputReadOnly},e,Gr("span",{className:this.question.cssClasses.iconRemove}))}}ho.Instance.registerElement("sv-matrix-remove-button",e=>Gr(Tu,e));class Eu extends go{constructor(e){super(e),this.handleOnShowHideClick=this.handleOnShowHideClick.bind(this)}getStateElement(){return this.props.item}get item(){return this.props.item}get question(){return this.props.item.data.question}get row(){return this.props.item.data.row}handleOnShowHideClick(e){this.row.showHideDetailPanelClick()}renderElement(){var e=this.row.isDetailPanelShowing,t=e,s=e?this.row.detailPanelId:void 0;return Gr("button",{type:"button",title:this.props.item.title,onClick:this.handleOnShowHideClick,className:this.question.getDetailPanelButtonCss(this.row),"aria-expanded":t,"aria-controls":s},Gr(fo,{className:this.question.getDetailPanelIconCss(this.row),iconName:this.question.getDetailPanelIconId(this.row),size:"auto"}))}}ho.Instance.registerElement("sv-matrix-detail-button",e=>Gr(Eu,e));class Ru extends go{constructor(e){super(e)}get data(){return this.props.item&&this.props.item.data||this.props.data}get question(){return this.props.item&&this.props.item.data.question||this.props.data.question}}class ku extends Ru{constructor(){super(...arguments),this.handleClick=e=>{this.question.addPanelUI()}}renderElement(){if(!this.question.canAddPanel)return null;const e=this.renderLocString(this.question.locAddPanelText);return Gr("button",{type:"button",id:this.question.addButtonId,className:this.question.getAddButtonCss(),onClick:this.handleClick},Gr("span",{className:this.question.cssClasses.buttonAddText},e))}}ho.Instance.registerElement("sv-paneldynamic-add-btn",e=>Gr(ku,e));class Au extends Ru{constructor(){super(...arguments),this.handleClick=e=>{this.question.removePanelUI(this.data.panel)}}renderElement(){const e=this.renderLocString(this.question.locRemovePanelText);return Gr("button",{id:this.question.getPanelRemoveButtonId(this.data.panel),className:this.question.getPanelRemoveButtonCss(),onClick:this.handleClick,type:"button"},Gr("span",{className:this.question.cssClasses.buttonRemoveText},e),Gr("span",{className:this.question.cssClasses.iconRemove}))}}ho.Instance.registerElement("sv-paneldynamic-remove-btn",e=>Gr(Au,e));class Lu extends Ru{constructor(){super(...arguments),this.handleClick=e=>{this.question.goToPrevPanel()}}renderElement(){return Gr("div",{title:this.question.panelPrevText,onClick:this.handleClick,className:this.question.getPrevButtonCss()},Gr(fo,{iconName:this.question.cssClasses.progressBtnIcon,size:"auto"}))}}ho.Instance.registerElement("sv-paneldynamic-prev-btn",e=>Gr(Lu,e));class Du extends Ru{constructor(){super(...arguments),this.handleClick=e=>{this.question.goToNextPanel()}}renderElement(){return Gr("div",{title:this.question.panelNextText,onClick:this.handleClick,className:this.question.getNextButtonCss()},Gr(fo,{iconName:this.question.cssClasses.progressBtnIcon,size:"auto"}))}}ho.Instance.registerElement("sv-paneldynamic-next-btn",e=>Gr(Du,e));class Nu extends Ru{renderElement(){return Gr("div",{className:this.question.cssClasses.progressText},this.question.progressText)}}ho.Instance.registerElement("sv-paneldynamic-progress-text",e=>Gr(Nu,e));class Ou extends go{get item(){return this.props.item}canRender(){return this.item.isVisible}renderElement(){return Gr("input",{className:this.item.innerCss,type:"button",disabled:this.item.disabled,onMouseDown:this.item.data&&this.item.data.mouseDown,onClick:this.item.action,title:this.item.getTooltip(),value:this.item.title})}}ho.Instance.registerElement("sv-nav-btn",e=>Gr(Ou,e));class ju extends Jr{constructor(e){super(e),this.onChangedHandler=(e,t)=>{this.isRendering||this.setState({changed:this.state&&this.state.changed?this.state.changed+1:1})},this.rootRef={current:null}}get locStr(){return this.props.locStr}get style(){return this.props.style}componentDidMount(){this.reactOnStrChanged()}componentWillUnmount(){this.locStr&&this.locStr.onStringChanged.remove(this.onChangedHandler)}componentDidUpdate(e,t){e.locStr&&e.locStr.onStringChanged.remove(this.onChangedHandler),this.reactOnStrChanged()}reactOnStrChanged(){this.locStr&&this.locStr.onStringChanged.add(this.onChangedHandler)}render(){if(!this.locStr)return null;this.isRendering=!0;const e=this.renderString();return this.isRendering=!1,e}renderString(){const e=this.locStr.allowLineBreaks?"sv-string-viewer sv-string-viewer--multiline":"sv-string-viewer";if(this.locStr.hasHtml){let t={__html:this.locStr.renderedHtml};return Gr("span",{ref:this.rootRef,className:e,style:this.style,dangerouslySetInnerHTML:t})}return Gr("span",{ref:this.rootRef,className:e,style:this.style},this.locStr.renderedHtml)}}ho.Instance.registerElement(Ze.defaultRenderer,e=>Gr(ju,e));class qu extends Jr{render(){const e=this.props.error,t=this.props.cssClasses;return Gr("div",null,Gr("span",{className:e.getCssIcon(t),"aria-hidden":"true"}),Gr("span",{className:this.props.cssClasses.error.item||void 0},Gr(ju,{locStr:e.locText})))}}ho.Instance.registerElement("sv-question-error",e=>Gr(qu,e));class Mu extends po{getStateElement(){return this.item}get item(){return this.props.item}get question(){return this.props.question}componentDidUpdate(e,t){super.componentDidUpdate(e,t)}renderElement(){const{cssClasses:e,handleLabelPointerUp:t,getLabelCss:s,getPercent:n}=this.question,{value:i,locText:r}=this.item;return Gr("div",{key:this.item.id,className:s(r),style:{left:n(i)+"%"},onPointerUp:e=>{t(e.nativeEvent,i)}},Gr("div",{className:e.labelTick}),Gr("div",{className:e.labelText},this.renderLocString(r)))}}ho.Instance.registerElement("sv-slider-label-item",e=>Gr(Mu,e));class Fu extends Jr{render(){var e,t;return Gr("div",{className:"sv-skeleton-element",id:null===(e=this.props.element)||void 0===e?void 0:e.id,style:{height:null===(t=this.props.element)||void 0===t?void 0:t.skeletonHeight}})}}ho.Instance.registerElement("sv-skeleton",e=>Gr(Fu,e));class Bu extends Jr{get model(){return this.props.model}renderLogoImage(){const e=this.model.survey.getElementWrapperComponentName(this.model.survey,"logo-image"),t=this.model.survey.getElementWrapperComponentData(this.model.survey,"logo-image");return ho.Instance.createElement(e,{data:t})}render(){return Gr("div",{className:"sv-header--mobile"},this.model.survey.hasLogo?Gr("div",{className:"sv-header__logo"},this.renderLogoImage()):null,this.model.survey.hasTitle?Gr("div",{className:"sv-header__title",style:{maxWidth:this.model.renderedTextAreaWidth}},Gr(To,{element:this.model.survey})):null,this.model.survey.renderedHasDescription?Gr("div",{className:"sv-header__description",style:{maxWidth:this.model.renderedTextAreaWidth}},Gr("div",{className:this.model.survey.css.description},po.renderLocString(this.model.survey.locDescription))):null)}}class zu extends Jr{get model(){return this.props.model}renderLogoImage(){const e=this.model.survey.getElementWrapperComponentName(this.model.survey,"logo-image"),t=this.model.survey.getElementWrapperComponentData(this.model.survey,"logo-image");return ho.Instance.createElement(e,{data:t})}render(){return Gr("div",{className:this.model.css,style:this.model.style},Gr("div",{className:"sv-header__cell-content",style:this.model.contentStyle},this.model.showLogo?Gr("div",{className:"sv-header__logo"},this.renderLogoImage()):null,this.model.showTitle?Gr("div",{className:"sv-header__title",style:{maxWidth:this.model.textAreaWidth}},Gr(To,{element:this.model.survey})):null,this.model.showDescription?Gr("div",{className:"sv-header__description",style:{maxWidth:this.model.textAreaWidth}},Gr("div",{className:this.model.survey.css.description},po.renderLocString(this.model.survey.locDescription))):null))}}class Hu extends po{get model(){return this.props.model}getStateElement(){return this.model}renderElement(){if(this.model.survey=this.props.survey,"advanced"!==this.props.survey.headerView||this.model.isEmpty)return null;let e=null;return e=this.props.survey.isMobile?Gr(Bu,{model:this.model}):Gr("div",{className:this.model.contentClasses,style:{maxWidth:this.model.maxWidth}},this.model.cells.map((e,t)=>Gr(zu,{key:t,model:e}))),Gr("div",{className:this.model.headerClasses,style:{height:this.model.renderedHeight}},this.model.backgroundImage?Gr("div",{style:this.model.backgroundImageStyle,className:this.model.backgroundImageClasses}):null,e)}componentDidMount(){super.componentDidMount(),this.model.processResponsiveness()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.model.processResponsiveness()}}ho.Instance.registerElement("sv-header",e=>Gr(Hu,e));class Qu extends Jr{constructor(e){super(e),this.onInput=e=>{this.locStr.text=e.target.innerText},this.onClick=e=>{e.preventDefault(),e.stopPropagation()},this.state={changed:0}}get locStr(){return this.props.locStr}get style(){return this.props.style}componentDidMount(){if(this.locStr){var e=this;this.locStr.onChanged=function(){e.setState({changed:e.state.changed+1})}}}componentWillUnmount(){this.locStr&&(this.locStr.onChanged=function(){})}render(){if(!this.locStr)return null;if(this.locStr.hasHtml){const e={__html:this.locStr.renderedHtml};return Gr("span",{className:"sv-string-editor",contentEditable:"true",suppressContentEditableWarning:!0,style:this.style,dangerouslySetInnerHTML:e,onBlur:this.onInput,onClick:this.onClick})}return Gr("span",{className:"sv-string-editor",contentEditable:"true",suppressContentEditableWarning:!0,style:this.style,onBlur:this.onInput,onClick:this.onClick},this.locStr.renderedHtml)}}function Uu(e,t,s={}){Xa(Gr(qo,Object.assign({model:e},s)),t)}function Wu(e){return this.each(function(){!function(e,t,s={}){Xa(Gr(mu,Object.assign({model:e},s)),t)}(e.model,this,e)})}ho.Instance.registerElement(Ze.editableRenderer,e=>Gr(Qu,e));let Gu=globalThis;"undefined"==typeof globalThis&&(Gu=window);let Zu=Gu.jQuery||Gu.$;if(void 0!==Zu)Ku(Zu);else try{Zu=require("jquery"),Ku(Zu)}catch(e){}function Ku(e){e.fn.extend({Survey:function(e){return this.each(function(){Uu(e.model,this,e)})},PopupSurvey:Wu,SurveyWindow:Wu})}In.platform="js-ui",In.prototype.render=function(e=null){this.renderCallback?this.renderCallback():Uu(this,e)};var Ju=s(7299);const Yu={name:"survey",version:"3.0.0",parameters:{survey_json:{type:Ju.QL.OBJECT,default:{}},survey_function:{type:Ju.QL.FUNCTION,default:null},validation_function:{type:Ju.QL.FUNCTION,default:null}},data:{response:{type:Ju.QL.OBJECT},rt:{type:Ju.QL.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}},$u={body:"jspsych-body",bodyContainer:"jspsych-body-container",question:{content:"jspsych-question-content",mainRoot:"jspsych-question-root"},page:{root:"jspsych-page"},footer:"jspsych-footer",navigation:{complete:"jspsych-nav-complete"},rowMultiple:"jspsych-row-multiple"};class Xu{constructor(e){this.jsPsych=e,this.jsPsych=e}static{this.info=Yu}applyStyles(e){e.applyTheme({cssVariables:{"--sjs-general-backcolor":"rgba(255, 255, 255, 1)","--sjs-general-backcolor-dim":"rgba(255, 255, 255, 1)","--sjs-general-backcolor-dim-light":"rgba(249, 249, 249, 1)","--sjs-general-forecolor":"rgba(0, 0, 0, 0.91)","--sjs-general-forecolor-light":"rgba(0, 0, 0, 0.45)","--sjs-general-dim-forecolor":"rgba(0, 0, 0, 0.91)","--sjs-general-dim-forecolor-light":"rgba(0, 0, 0, 0.45)","--sjs-primary-backcolor":"#474747","--sjs-primary-backcolor-light":"rgba(0, 0, 0, 0.1)","--sjs-primary-backcolor-dark":"#000000","--sjs-primary-forecolor":"rgba(255, 255, 255, 1)","--sjs-primary-forecolor-light":"rgba(255, 255, 255, 0.25)","--sjs-shadow-small":"0px 0px 0px 1px rgba(0, 0, 0, 0.15)","--sjs-shadow-small-reset":"0px 0px 0px 0px rgba(0, 0, 0, 0.15)","--sjs-shadow-medium":"0px 0px 0px 1px rgba(0, 0, 0, 0.1)","--sjs-shadow-large":"0px 8px 16px 0px rgba(0, 0, 0, 0.05)","--sjs-shadow-inner-reset":"0px 0px 0px 0px rgba(0, 0, 0, 0.15)","--sjs-border-light":"rgba(0, 0, 0, 0.15)","--sjs-border-default":"rgba(0, 0, 0, 0.15)","--sjs-border-inside":" rgba(0, 0, 0, 0.16)"},themeName:"plain",colorPalette:"light",isPanelless:!1})}createSurveyContainer(e){const t=document.createElement("div");return t.classList.add("jspsych-survey-container"),e.appendChild(t),t}trial(e,t){"{}"===JSON.stringify(t.survey_json)&&null===t.survey_function&&console.error("Survey plugin warning: you must define the survey using a non-empty JSON object and/or a survey function."),this.survey=new In(t.survey_json),null!==t.survey_function&&t.survey_function(this.survey),this.applyStyles(this.survey),this.survey.css=$u,t.validation_function&&this.survey.onValidateQuestion.add(t.validation_function),this.survey.onComplete.add((e,t)=>{const s=e.getAllQuestions(),n=Object.keys(e.data);for(const t of s)n.includes(t.name)||e.mergeData({[t.name]:t.defaultValue??null});document.querySelector(".jspsych-content-wrapper").style.display="flex",this.jsPsych.finishTrial({rt:Math.round(performance.now()-this.start_time),response:e.data})}),document.querySelector(".jspsych-content-wrapper").style.display="block";const s=this.createSurveyContainer(e);this.survey.render(s),this.start_time=performance.now()}}},4824:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(7299);const i={name:"html-button-response",version:"2.1.0",parameters:{stimulus:{type:n.QL.HTML_STRING,default:void 0},choices:{type:n.QL.STRING,default:void 0,array:!0},button_html:{type:n.QL.FUNCTION,default:function(e,t){return`<button class="jspsych-btn">${e}</button>`}},prompt:{type:n.QL.HTML_STRING,default:null},stimulus_duration:{type:n.QL.INT,default:null},trial_duration:{type:n.QL.INT,default:null},button_layout:{type:n.QL.STRING,default:"grid"},grid_rows:{type:n.QL.INT,default:1},grid_columns:{type:n.QL.INT,default:null},response_ends_trial:{type:n.QL.BOOL,default:!0},enable_button_after:{type:n.QL.INT,default:0}},data:{rt:{type:n.QL.INT},response:{type:n.QL.INT},stimulus:{type:n.QL.HTML_STRING}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}};class r{constructor(e){this.jsPsych=e}static{this.info=i}trial(e,t){const s=document.createElement("div");s.id="jspsych-html-button-response-stimulus",s.innerHTML=t.stimulus,e.appendChild(s);const n=document.createElement("div");if(n.id="jspsych-html-button-response-btngroup","grid"===t.button_layout){if(n.classList.add("jspsych-btn-group-grid"),null===t.grid_rows&&null===t.grid_columns)throw new Error("You cannot set `grid_rows` to `null` without providing a value for `grid_columns`.");const e=null===t.grid_columns?Math.ceil(t.choices.length/t.grid_rows):t.grid_columns,s=null===t.grid_rows?Math.ceil(t.choices.length/t.grid_columns):t.grid_rows;n.style.gridTemplateColumns=`repeat(${e}, 1fr)`,n.style.gridTemplateRows=`repeat(${s}, 1fr)`}else"flex"===t.button_layout&&n.classList.add("jspsych-btn-group-flex");for(const[e,s]of t.choices.entries()){n.insertAdjacentHTML("beforeend",t.button_html(s,e));const i=n.lastChild;i.dataset.choice=e.toString(),i.addEventListener("click",()=>{o(e)})}e.appendChild(n),null!==t.prompt&&e.insertAdjacentHTML("beforeend",t.prompt);var i=performance.now(),r={rt:null,button:null};const a=()=>{var e={rt:r.rt,stimulus:t.stimulus,response:r.button};this.jsPsych.finishTrial(e)};function o(e){var o=performance.now(),l=Math.round(o-i);r.button=parseInt(e),r.rt=l,s.classList.add("responded");for(const e of n.children)e.setAttribute("disabled","disabled");t.response_ends_trial&&a()}if(null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout(()=>{s.style.visibility="hidden"},t.stimulus_duration),t.enable_button_after>0){for(var l=document.querySelectorAll("#jspsych-html-button-response-btngroup button"),u=0;u<l.length;u++)l[u].setAttribute("disabled","disabled");this.jsPsych.pluginAPI.setTimeout(()=>{for(var e=document.querySelectorAll("#jspsych-html-button-response-btngroup button"),t=0;t<e.length;t++)e[t].removeAttribute("disabled")},t.enable_button_after)}null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(a,t.trial_duration)}simulate(e,t,s,n){"data-only"==t&&(n(),this.simulate_data_only(e,s)),"visual"==t&&this.simulate_visual(e,s,n)}create_simulation_data(e,t){const s={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0)+e.enable_button_after,response:this.jsPsych.randomization.randomInt(0,e.choices.length-1)},n=this.jsPsych.pluginAPI.mergeSimulationData(s,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,n),n}simulate_data_only(e,t){const s=this.create_simulation_data(e,t);this.jsPsych.finishTrial(s)}simulate_visual(e,t,s){const n=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),s(),null!==n.rt&&this.jsPsych.pluginAPI.clickTarget(i.querySelector(`#jspsych-html-button-response-btngroup [data-choice="${n.response}"]`),n.rt)}}},6290:(e,t,s)=>{s.d(t,{C3:()=>Dn,KR:()=>En,hZ:()=>Rn});var n=s(0),i=s(1711),r=s(3047),a=s(722);const o="@firebase/database",l="1.1.0";let u="";class d{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,r.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,r.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class h{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,r.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const c=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new d(t)}}catch(e){}return new h},p=c("localStorage"),g=c("sessionStorage"),m=new a.Vy("@firebase/database"),v=function(){let e=1;return function(){return e++}}(),f=function(e){const t=(0,r.kj)(e),s=new r.gz;s.update(t);const n=s.digest();return r.K3.encodeByteArray(n)},b=function(...e){let t="";for(let s=0;s<e.length;s++){const n=e[s];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?t+=b.apply(null,n):t+="object"==typeof n?(0,r.As)(n):n,t+=" "}return t};let y=null,C=!0;const w=function(...e){if(!0===C&&(C=!1,null===y&&!0===g.get("logging_enabled")&&(t=!0,(0,r.vA)(!s||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=a.$b.VERBOSE,y=m.log.bind(m),s&&g.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,g.remove("logging_enabled")))),y){const t=b.apply(null,e);y(t)}var t,s},x=function(e){return function(...t){w(e,...t)}},_=function(...e){const t="FIREBASE INTERNAL ERROR: "+b(...e);m.error(t)},V=function(...e){const t=`FIREBASE FATAL ERROR: ${b(...e)}`;throw m.error(t),new Error(t)},I=function(...e){const t="FIREBASE WARNING: "+b(...e);m.warn(t)},S=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},P="[MIN_NAME]",T="[MAX_NAME]",E=function(e,t){if(e===t)return 0;if(e===P||t===T)return-1;if(t===P||e===T)return 1;{const s=j(e),n=j(t);return null!==s?null!==n?s-n===0?e.length-t.length:s-n:-1:null!==n?1:e<t?-1:1}},R=function(e,t){return e===t?0:e<t?-1:1},k=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,r.As)(t))},A=function(e){if("object"!=typeof e||null===e)return(0,r.As)(e);const t=[];for(const s in e)t.push(s);t.sort();let s="{";for(let n=0;n<t.length;n++)0!==n&&(s+=","),s+=(0,r.As)(t[n]),s+=":",s+=A(e[t[n]]);return s+="}",s},L=function(e,t){const s=e.length;if(s<=t)return[e];const n=[];for(let i=0;i<s;i+=t)i+t>s?n.push(e.substring(i,s)):n.push(e.substring(i,i+t));return n};function D(e,t){for(const s in e)e.hasOwnProperty(s)&&t(s,e[s])}const N=function(e){(0,r.vA)(!S(e),"Invalid JSON number");let t,s,n,i,a;0===e?(s=0,n=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),s=i+1023,n=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(s=0,n=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(n%2?1:0),n=Math.floor(n/2);for(a=11;a;a-=1)o.push(s%2?1:0),s=Math.floor(s/2);o.push(t?1:0),o.reverse();const l=o.join("");let u="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()},O=new RegExp("^-?(0*)\\d{1,10}$"),j=function(e){if(O.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},q=function(e){try{e()}catch(e){setTimeout(()=>{const t=e.stack||"";throw I("Exception was thrown by user callback.",t),e},Math.floor(0))}},M=function(e,t){const s=setTimeout(e,t);return"number"==typeof s&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(s):"object"==typeof s&&s.unref&&s.unref(),s};class F{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,(0,n.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){I(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class B{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',I(e)}}class z{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}z.OWNER="owner";const H="5",Q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,U="ac",W="websocket",G="long_polling";class Z{constructor(e,t,s,n,i=!1,r="",a=!1,o=!1,l=null){this.secure=t,this.namespace=s,this.webSocketOnly=n,this.nodeAdmin=i,this.persistenceKey=r,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function K(e,t,s){let n;if((0,r.vA)("string"==typeof t,"typeof type must == string"),(0,r.vA)("object"==typeof s,"typeof params must == object"),t===W)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==G)throw new Error("Unknown connection type: "+t);n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(s.ns=e.namespace);const i=[];return D(s,(e,t)=>{i.push(e+"="+t)}),n+i.join("&")}class J{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,r.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,r.A4)(this.counters_)}}const Y={},$={};function X(e){const t=e.toString();return Y[t]||(Y[t]=new J),Y[t]}class ee{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&q(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const te="start";class se{constructor(e,t,s,n,i,r,a){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=n,this.authToken=i,this.transportSessionId=r,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x(e),this.stats_=X(t),this.urlFn=e=>(this.appCheckToken&&(e[U]=this.appCheckToken),K(t,G,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ee(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,r.$g)()||"complete"===document.readyState)e();else{let t=!1;const s=function(){document.body?t||(t=!0,e()):setTimeout(s,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&s()}),window.attachEvent("onload",s))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ne((...e)=>{const[t,s,n,i,r]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===te)this.id=s,this.password=n;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);s?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(s,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,s]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[te]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=H,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[U]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Q.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){se.forceAllow_=!0}static forceDisallow(){se.forceDisallow_=!0}static isAvailable(){return!((0,r.$g)()||!se.forceAllow_&&(se.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,r.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=(0,r.KA)(t),n=L(s,1840);for(let e=0;e<n.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,r.$g)())return;this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=e,s.pw=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,r.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ne{constructor(e,t,s,n){if(this.onDisconnect=s,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,r.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ne.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const n="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(n),this.myIFrame.doc.close()}catch(e){w("frame writing exception"),e.stack&&w(e.stack),w(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||w("No IE domain setting required")}catch(t){const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),s="",n=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const e=this.pendingSegs.shift();s=s+"&seg"+n+"="+e.seg+"&ts"+n+"="+e.ts+"&d"+n+"="+e.d,n++}return t+=s,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},n=setTimeout(s,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(n),s()})}addTag(e,t){(0,r.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const e=s.readyState;e&&"loaded"!==e&&"complete"!==e||(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{w("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(e){}},Math.floor(1))}}let ie=null;"undefined"!=typeof MozWebSocket?ie=MozWebSocket:"undefined"!=typeof WebSocket&&(ie=WebSocket);class re{constructor(e,t,s,n,i,r,a){this.connId=e,this.applicationId=s,this.appCheckToken=n,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x(this.connId),this.stats_=X(t),this.connURL=re.connectionURL_(t,r,a,n,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,n,i){const a={};return a.v=H,!(0,r.$g)()&&"undefined"!=typeof location&&location.hostname&&Q.test(location.hostname)&&(a.r="f"),t&&(a.s=t),s&&(a.ls=s),n&&(a[U]=n),i&&(a.p=i),K(e,W,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{let e;if((0,r.$g)()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${H}/${u}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,n=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;n&&(e.proxy={origin:n})}this.mySock=new ie(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){re.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&null!==ie&&!re.forceDisallow_}static previouslyFailed(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")}markConnectionHealthy(){p.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,r.$L)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,r.vA)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,r.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=L(t,16384);s.length>1&&this.sendString_(String(s.length));for(let e=0;e<s.length;e++)this.sendString_(s[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}re.responsesRequiredToBeHealthy=2,re.healthyTimeout=3e4;class ae{static get ALL_TRANSPORTS(){return[se,re]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=re&&re.isAvailable();let s=t&&!re.previouslyFailed();if(e.webSocketOnly&&(t||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[re];else{const e=this.transports_=[];for(const t of ae.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);ae.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ae.globalTransportInitialized_=!1;class oe{constructor(e,t,s,n,i,r,a,o,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=n,this.authToken_=i,this.onMessage_=r,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x("c:"+this.id+":"),this.transportManager_=new ae(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,s)},Math.floor(0));const n=e.healthyTimeout||0;n>0&&(this.healthyTimeout_=M(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=k("t",e),s=k("d",e);if("c"===t)this.onSecondaryControl_(s);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=k("t",e),s=k("d",e);"c"===t?this.onControl_(s):"d"===t&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=k("t",e);if("d"in e){const s=e.d;if("h"===t){const e={...s};this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(s):"r"===t?this.onReset_(s):"e"===t?_("Server Error: "+s):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,n=e.h;this.sessionId=e.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),H!==s&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),M(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):M(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class le{put(e,t,s,n){}merge(e,t,s,n){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}class ue{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,r.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let e=0;e<s.length;e++)s[e].callback.apply(s[e].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const n=this.getInitialEvent(e);n&&t.apply(s,n)}off(e,t,s){this.validateEventType_(e);const n=this.listeners_[e]||[];for(let e=0;e<n.length;e++)if(n[e].callback===t&&(!s||s===n[e].context))return void n.splice(e,1)}validateEventType_(e){(0,r.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class de extends ue{static getInstance(){return new de}constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,r.jZ)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return(0,r.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class he{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ce(){return new he("")}function pe(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ge(e){return e.pieces_.length-e.pieceNum_}function me(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new he(e.pieces_,t)}function ve(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function fe(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function be(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let s=e.pieceNum_;s<e.pieces_.length-1;s++)t.push(e.pieces_[s]);return new he(t,0)}function ye(e,t){const s=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)s.push(e.pieces_[t]);if(t instanceof he)for(let e=t.pieceNum_;e<t.pieces_.length;e++)s.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&s.push(e[t])}return new he(s,0)}function Ce(e){return e.pieceNum_>=e.pieces_.length}function we(e,t){const s=pe(e),n=pe(t);if(null===s)return t;if(s===n)return we(me(e),me(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function xe(e,t){if(ge(e)!==ge(t))return!1;for(let s=e.pieceNum_,n=t.pieceNum_;s<=e.pieces_.length;s++,n++)if(e.pieces_[s]!==t.pieces_[n])return!1;return!0}function _e(e,t){let s=e.pieceNum_,n=t.pieceNum_;if(ge(e)>ge(t))return!1;for(;s<e.pieces_.length;){if(e.pieces_[s]!==t.pieces_[n])return!1;++s,++n}return!0}class Ve{constructor(e,t){this.errorPrefix_=t,this.parts_=fe(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=(0,r.OE)(this.parts_[e]);Ie(this)}}function Ie(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Se(e))}function Se(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Pe extends ue{static getInstance(){return new Pe}constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return(0,r.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Te=1e3;class Ee extends le{constructor(e,t,s,n,i,a,o,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=n,this.onServerInfoUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.authOverride_=l,this.id=Ee.nextPersistentConnectionId_++,this.log_=x("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Te,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,r.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pe.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&de.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const n=++this.requestNumber_,i={r:n,a:e,b:t};this.log_((0,r.As)(i)),(0,r.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[n]=s)}get(e){this.initConnection_();const t=new r.cY,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const s=e.d;"ok"===e.s?t.resolve(s):t.reject(s)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const n=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(n),t.promise}listen(e,t,s,n){this.initConnection_();const i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,r.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,r.vA)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");const o={onComplete:n,hashFn:t,query:e,tag:s};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)})}sendListen_(e){const t=e.query,s=t._path.toString(),n=t._queryIdentifier;this.log_("Listen on "+s+" for "+n);const i={p:s};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const r=i.d,a=i.s;Ee.warnOnListenWarnings_(r,t),(this.listens.get(s)&&this.listens.get(s).get(n))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(s,n),e.onComplete&&e.onComplete(a,r))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,r.gR)(e,"w")){const s=(0,r.yw)(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();I(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,r.qc)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,r.Cv)(e)?"auth":"gauth",s={cred:e};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(t,s,t=>{const s=t.s,n=t.d||"error";this.authToken_===e&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,n))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,s=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)})}unlisten(e,t){const s=e._path.toString(),n=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+n),(0,r.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,n)&&this.connected_&&this.sendUnlisten_(s,n,e._queryObject,t)}sendUnlisten_(e,t,s,n){this.log_("Unlisten on "+e+" for "+t);const i={p:e};n&&(i.q=s,i.t=n),this.sendRequest("n",i)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,n){const i={p:t,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{n&&setTimeout(()=>{n(e.s,e.d)},Math.floor(0))})}put(e,t,s,n){this.putInternal("p",e,t,s,n)}merge(e,t,s,n){this.putInternal("m",e,t,s,n)}putInternal(e,t,s,n,i){this.initConnection_();const r={p:t,d:s};void 0!==i&&(r.h=i),this.outstandingPuts_.push({action:e,request:r,onComplete:n}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,n=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),n&&n(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,r.As)(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):_("Unrecognized action received from server: "+(0,r.As)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,r.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Te,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Te,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Te),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),n=this.id+":"+Ee.nextConnectionId_++,i=this.lastSessionId;let a=!1,o=null;const l=function(){o?o.close():(a=!0,s())},u=function(e){(0,r.vA)(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:l,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[r,l]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),this.authToken_=r&&r.accessToken,this.appCheckToken_=l&&l.token,o=new oe(n,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,e=>{I(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(e){this.log_("Failed to get token: "+e),a||(this.repoInfo_.nodeAdmin&&I(e),l())}}}interrupt(e){w("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){w("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,r.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Te,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;s=t?t.map(e=>A(e)).join("$"):"default";const n=this.removeListen_(e,s);n&&n.onComplete&&n.onComplete("permission_denied")}removeListen_(e,t){const s=new he(e).toString();let n;if(this.listens.has(s)){const e=this.listens.get(s);n=e.get(t),e.delete(t),0===e.size&&this.listens.delete(s)}else n=void 0;return n}onAuthRevoked_(e,t){w("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){w("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,r.$g)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+u.replace(/\./g,"-")]=1,(0,r.jZ)()?e["framework.cordova"]=1:(0,r.lV)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=de.getInstance().currentlyOnline();return(0,r.Im)(this.interruptReasons_)&&e}}Ee.nextPersistentConnectionId_=0,Ee.nextConnectionId_=0;class Re{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Re(e,t)}}class ke{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new Re(P,e),n=new Re(P,t);return 0!==this.compare(s,n)}minPost(){return Re.MIN}}let Ae;class Le extends ke{static get __EMPTY_NODE(){return Ae}static set __EMPTY_NODE(e){Ae=e}compare(e,t){return E(e.name,t.name)}isDefinedOn(e){throw(0,r.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Re.MIN}maxPost(){return new Re(T,Ae)}makePost(e,t){return(0,r.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Re(e,Ae)}toString(){return".key"}}const De=new Le;class Ne{constructor(e,t,s,n,i=null){this.isReverse_=n,this.resultGenerator_=i,this.nodeStack_=[];let r=1;for(;!e.isEmpty();)if(r=t?s(e.key,t):1,n&&(r*=-1),r<0)e=this.isReverse_?e.left:e.right;else{if(0===r){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Oe{constructor(e,t,s,n,i){this.key=e,this.value=t,this.color=null!=s?s:Oe.RED,this.left=null!=n?n:je.EMPTY_NODE,this.right=null!=i?i:je.EMPTY_NODE}copy(e,t,s,n,i){return new Oe(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=n?n:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let n=this;const i=s(e,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(e,t,s),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,s)),n.fixUp_()}removeMin_(){if(this.left.isEmpty())return je.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,n;if(s=this,t(e,s.key)<0)s.left.isEmpty()||s.left.isRed_()||s.left.left.isRed_()||(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),s.right.isEmpty()||s.right.isRed_()||s.right.left.isRed_()||(s=s.moveRedRight_()),0===t(e,s.key)){if(s.right.isEmpty())return je.EMPTY_NODE;n=s.right.min_(),s=s.copy(n.key,n.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Oe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Oe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Oe.RED=!0,Oe.BLACK=!1;class je{constructor(e,t=je.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new je(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Oe.BLACK,null,null))}remove(e){return new je(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oe.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),0===t)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,n=null;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),0===t){if(s.left.isEmpty())return n?n.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}t<0?s=s.left:t>0&&(n=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ne(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ne(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ne(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ne(this.root_,null,this.comparator_,!0,e)}}function qe(e,t){return E(e.name,t.name)}function Me(e,t){return E(e,t)}let Fe;je.EMPTY_NODE=new class{copy(e,t,s,n,i){return this}insert(e,t,s){return new Oe(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Be=function(e){return"number"==typeof e?"number:"+N(e):"string:"+e},ze=function(e){if(e.isLeafNode()){const t=e.val();(0,r.vA)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,r.gR)(t,".sv"),"Priority must be a string or number.")}else(0,r.vA)(e===Fe||e.isEmpty(),"priority of unexpected type.");(0,r.vA)(e===Fe||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let He,Qe,Ue;class We{static set __childrenNodeConstructor(e){He=e}static get __childrenNodeConstructor(){return He}constructor(e,t=We.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,r.vA)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ze(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new We(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:We.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ce(e)?this:".priority"===pe(e)?this.priorityNode_:We.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:We.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=pe(e);return null===s?t:t.isEmpty()&&".priority"!==s?this:((0,r.vA)(".priority"!==s||1===ge(e),".priority must be the last token in a path"),this.updateImmediateChild(s,We.__childrenNodeConstructor.EMPTY_NODE.updateChild(me(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Be(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?N(this.value_):this.value_,this.lazyHash_=f(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===We.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof We.__childrenNodeConstructor?-1:((0,r.vA)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,n=We.VALUE_TYPE_ORDER.indexOf(t),i=We.VALUE_TYPE_ORDER.indexOf(s);return(0,r.vA)(n>=0,"Unknown leaf type: "+t),(0,r.vA)(i>=0,"Unknown leaf type: "+s),n===i?"object"===s?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-n}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}We.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ge=new class extends ke{compare(e,t){const s=e.node.getPriority(),n=t.node.getPriority(),i=s.compareTo(n);return 0===i?E(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Re.MIN}maxPost(){return new Re(T,new We("[PRIORITY-POST]",Ue))}makePost(e,t){const s=Qe(e);return new Re(t,new We("[PRIORITY-POST]",s))}toString(){return".priority"}},Ze=Math.log(2);class Ke{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ze,10)),this.current_=this.count-1;const s=(n=this.count,parseInt(Array(n+1).join("1"),2));var n;this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Je=function(e,t,s,n){e.sort(t);const i=function(t,n){const r=n-t;let a,o;if(0===r)return null;if(1===r)return a=e[t],o=s?s(a):a,new Oe(o,a.node,Oe.BLACK,null,null);{const l=parseInt(r/2,10)+t,u=i(t,l),d=i(l+1,n);return a=e[l],o=s?s(a):a,new Oe(o,a.node,Oe.BLACK,u,d)}},r=function(t){let n=null,r=null,a=e.length;const o=function(t,n){const r=a-t,o=a;a-=t;const u=i(r+1,o),d=e[r],h=s?s(d):d;l(new Oe(h,d.node,n,null,u))},l=function(e){n?(n.left=e,n=e):(r=e,n=e)};for(let e=0;e<t.count;++e){const s=t.nextBitIsOne(),n=Math.pow(2,t.count-(e+1));s?o(n,Oe.BLACK):(o(n,Oe.BLACK),o(n,Oe.RED))}return r}(new Ke(e.length));return new je(n||t,r)};let Ye;const $e={};class Xe{static get Default(){return(0,r.vA)($e&&Ge,"ChildrenNode.ts has not been loaded"),Ye=Ye||new Xe({".priority":$e},{".priority":Ge}),Ye}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=(0,r.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof je?t:null}hasIndex(e){return(0,r.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,r.vA)(e!==De,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let n=!1;const i=t.getIterator(Re.Wrap);let a,o=i.getNext();for(;o;)n=n||e.isDefinedOn(o.node),s.push(o),o=i.getNext();a=n?Je(s,e.getCompare()):$e;const l=e.toString(),u={...this.indexSet_};u[l]=e;const d={...this.indexes_};return d[l]=a,new Xe(d,u)}addToIndexes(e,t){const s=(0,r.kH)(this.indexes_,(s,n)=>{const i=(0,r.yw)(this.indexSet_,n);if((0,r.vA)(i,"Missing index implementation for "+n),s===$e){if(i.isDefinedOn(e.node)){const s=[],n=t.getIterator(Re.Wrap);let r=n.getNext();for(;r;)r.name!==e.name&&s.push(r),r=n.getNext();return s.push(e),Je(s,i.getCompare())}return $e}{const n=t.get(e.name);let i=s;return n&&(i=i.remove(new Re(e.name,n))),i.insert(e,e.node)}});return new Xe(s,this.indexSet_)}removeFromIndexes(e,t){const s=(0,r.kH)(this.indexes_,s=>{if(s===$e)return s;{const n=t.get(e.name);return n?s.remove(new Re(e.name,n)):s}});return new Xe(s,this.indexSet_)}}let et;class tt{static get EMPTY_NODE(){return et||(et=new tt(new je(Me),null,Xe.Default))}constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&ze(this.priorityNode_),this.children_.isEmpty()&&(0,r.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||et}updatePriority(e){return this.children_.isEmpty()?this:new tt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?et:t}}getChild(e){const t=pe(e);return null===t?this:this.getImmediateChild(t).getChild(me(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,r.vA)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const s=new Re(e,t);let n,i;t.isEmpty()?(n=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(n=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(s,this.children_));const r=n.isEmpty()?et:this.priorityNode_;return new tt(n,r,i)}}updateChild(e,t){const s=pe(e);if(null===s)return t;{(0,r.vA)(".priority"!==pe(e)||1===ge(e),".priority must be the last token in a path");const n=this.getImmediateChild(s).updateChild(me(e),t);return this.updateImmediateChild(s,n)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,n=0,i=!0;if(this.forEachChild(Ge,(r,a)=>{t[r]=a.val(e),s++,i&&tt.INTEGER_REGEXP_.test(r)?n=Math.max(n,Number(r)):i=!1}),!e&&i&&n<2*s){const e=[];for(const s in t)e[s]=t[s];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Be(this.getPriority().val())+":"),this.forEachChild(Ge,(t,s)=>{const n=s.hash();""!==n&&(e+=":"+t+":"+n)}),this.lazyHash_=""===e?"":f(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const n=this.resolveIndex_(s);if(n){const s=n.getPredecessorKey(new Re(e,t));return s?s.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Re(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Re(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,e=>e);{const s=this.children_.getIteratorFrom(e.name,Re.Wrap);let n=s.peek();for(;null!=n&&t.compare(n,e)<0;)s.getNext(),n=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,e=>e);{const s=this.children_.getReverseIteratorFrom(e.name,Re.Wrap);let n=s.peek();for(;null!=n&&t.compare(n,e)>0;)s.getNext(),n=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===st?-1:0}withIndex(e){if(e===De||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new tt(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===De||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Ge),s=t.getIterator(Ge);let n=e.getNext(),i=s.getNext();for(;n&&i;){if(n.name!==i.name||!n.node.equals(i.node))return!1;n=e.getNext(),i=s.getNext()}return null===n&&null===i}return!1}return!1}}resolveIndex_(e){return e===De?null:this.indexMap_.get(e.toString())}}tt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const st=new class extends tt{constructor(){super(new je(Me),tt.EMPTY_NODE,Xe.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Re,{MIN:{value:new Re(P,tt.EMPTY_NODE)},MAX:{value:new Re(T,st)}}),Le.__EMPTY_NODE=tt.EMPTY_NODE,We.__childrenNodeConstructor=tt,Fe=st,Ue=st;const nt=!0;function it(e,t=null){if(null===e)return tt.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,r.vA)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new We(e,it(t));if(e instanceof Array||!nt){let s=tt.EMPTY_NODE;return D(e,(t,n)=>{if((0,r.gR)(e,t)&&"."!==t.substring(0,1)){const e=it(n);!e.isLeafNode()&&e.isEmpty()||(s=s.updateImmediateChild(t,e))}}),s.updatePriority(it(t))}{const s=[];let n=!1;if(D(e,(e,t)=>{if("."!==e.substring(0,1)){const i=it(t);i.isEmpty()||(n=n||!i.getPriority().isEmpty(),s.push(new Re(e,i)))}}),0===s.length)return tt.EMPTY_NODE;const i=Je(s,qe,e=>e.name,Me);if(n){const e=Je(s,Ge.getCompare());return new tt(i,it(t),new Xe({".priority":e},{".priority":Ge}))}return new tt(i,it(t),Xe.Default)}}!function(e){Qe=e}(it);class rt extends ke{constructor(e){super(),this.indexPath_=e,(0,r.vA)(!Ce(e)&&".priority"!==pe(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),n=this.extractChild(t.node),i=s.compareTo(n);return 0===i?E(e.name,t.name):i}makePost(e,t){const s=it(e),n=tt.EMPTY_NODE.updateChild(this.indexPath_,s);return new Re(t,n)}maxPost(){const e=tt.EMPTY_NODE.updateChild(this.indexPath_,st);return new Re(T,e)}toString(){return fe(this.indexPath_,0).join("/")}}const at=new class extends ke{compare(e,t){const s=e.node.compareTo(t.node);return 0===s?E(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Re.MIN}maxPost(){return Re.MAX}makePost(e,t){const s=it(e);return new Re(t,s)}toString(){return".value"}};function ot(e,t,s){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:s}}class lt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ge}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,r.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,r.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:P}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,r.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,r.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:T}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,r.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ge}copy(){const e=new lt;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ut(e){const t={};if(e.isDefault())return t;let s;if(e.index_===Ge?s="$priority":e.index_===at?s="$value":e.index_===De?s="$key":((0,r.vA)(e.index_ instanceof rt,"Unrecognized index type!"),s=e.index_.toString()),t.orderBy=(0,r.As)(s),e.startSet_){const s=e.startAfterSet_?"startAfter":"startAt";t[s]=(0,r.As)(e.indexStartValue_),e.startNameSet_&&(t[s]+=","+(0,r.As)(e.indexStartName_))}if(e.endSet_){const s=e.endBeforeSet_?"endBefore":"endAt";t[s]=(0,r.As)(e.indexEndValue_),e.endNameSet_&&(t[s]+=","+(0,r.As)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function dt(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let s=e.viewFrom_;""===s&&(s=e.isViewFromLeft()?"l":"r"),t.vf=s}return e.index_!==Ge&&(t.i=e.index_.toString()),t}class ht extends le{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,r.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,s,n){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=n,this.log_=x("p:rest:"),this.listens_={}}listen(e,t,s,n){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const a=ht.getListenId_(e,s),o={};this.listens_[a]=o;const l=ut(e._queryParams);this.restRequest_(i+".json",l,(e,t)=>{let l=t;if(404===e&&(l=null,e=null),null===e&&this.onDataUpdate_(i,l,!1,s),(0,r.yw)(this.listens_,a)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",n(t,null)}})}unlisten(e,t){const s=ht.getListenId_(e,t);delete this.listens_[s]}get(e){const t=ut(e._queryParams),s=e._path.toString(),n=new r.cY;return this.restRequest_(s+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(s,i,!1,null),n.resolve(i)):n.reject(new Error(i))}),n.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([n,i])=>{n&&n.accessToken&&(t.auth=n.accessToken),i&&i.token&&(t.ac=i.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,r.Am)(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(s&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=(0,r.$L)(o.responseText)}catch(e){I("Failed to parse JSON response for "+a+": "+o.responseText)}s(null,e)}else 401!==o.status&&404!==o.status&&I("Got unsuccessful REST response for "+a+" Status: "+o.status),s(o.status);s=null}},o.open("GET",a,!0),o.send()})}}class ct{constructor(){this.rootNode_=tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function pt(){return{value:null,children:new Map}}function gt(e,t,s){if(Ce(t))e.value=s,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,s);else{const n=pe(t);e.children.has(n)||e.children.set(n,pt()),gt(e.children.get(n),t=me(t),s)}}function mt(e,t,s){null!==e.value?s(t,e.value):function(e,t){e.children.forEach((e,s)=>{t(s,e)})}(e,(e,n)=>{mt(n,new he(t.toString()+"/"+e),s)})}class vt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&D(this.last_,(e,s)=>{t[e]=t[e]-s}),this.last_=e,t}}class ft{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new vt(e);const s=1e4+2e4*Math.random();M(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;D(e,(e,n)=>{n>0&&(0,r.gR)(this.statsToReport_,e)&&(t[e]=n,s=!0)}),s&&this.server_.reportStats(t),M(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var bt;function yt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(bt||(bt={}));class Ct{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=bt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ce(this.path)){if(null!=this.affectedTree.value)return(0,r.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new he(e));return new Ct(ce(),t,this.revert)}}return(0,r.vA)(pe(this.path)===e,"operationForChild called for unrelated child."),new Ct(me(this.path),this.affectedTree,this.revert)}}class wt{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=bt.OVERWRITE}operationForChild(e){return Ce(this.path)?new wt(this.source,ce(),this.snap.getImmediateChild(e)):new wt(this.source,me(this.path),this.snap)}}class xt{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=bt.MERGE}operationForChild(e){if(Ce(this.path)){const t=this.children.subtree(new he(e));return t.isEmpty()?null:t.value?new wt(this.source,ce(),t.value):new xt(this.source,ce(),t)}return(0,r.vA)(pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xt(this.source,me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _t{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ce(e))return this.isFullyInitialized()&&!this.filtered_;const t=pe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Vt(e,t,s,n,i,a){const o=n.filter(e=>e.type===s);o.sort((t,s)=>function(e,t,s){if(null==t.childName||null==s.childName)throw(0,r.Hk)("Should only compare child_ events.");const n=new Re(t.childName,t.snapshotNode),i=new Re(s.childName,s.snapshotNode);return e.index_.compare(n,i)}(e,t,s)),o.forEach(s=>{const n=function(e,t,s){return"value"===t.type||"child_removed"===t.type||(t.prevName=s.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,s,a);i.forEach(i=>{i.respondsTo(s.type)&&t.push(i.createEvent(n,e.query_))})})}function It(e,t){return{eventCache:e,serverCache:t}}function St(e,t,s,n){return It(new _t(t,s,n),e.serverCache)}function Pt(e,t,s,n){return It(e.eventCache,new _t(t,s,n))}function Tt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Et(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Rt;class kt{static fromObject(e){let t=new kt(null);return D(e,(e,s)=>{t=t.set(new he(e),s)}),t}constructor(e,t=(()=>(Rt||(Rt=new je(R)),Rt))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ce(),value:this.value};if(Ce(e))return null;{const s=pe(e),n=this.children.get(s);if(null!==n){const i=n.findRootMostMatchingPathAndValue(me(e),t);return null!=i?{path:ye(new he(s),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ce(e))return this;{const t=pe(e),s=this.children.get(t);return null!==s?s.subtree(me(e)):new kt(null)}}set(e,t){if(Ce(e))return new kt(t,this.children);{const s=pe(e),n=(this.children.get(s)||new kt(null)).set(me(e),t),i=this.children.insert(s,n);return new kt(this.value,i)}}remove(e){if(Ce(e))return this.children.isEmpty()?new kt(null):new kt(null,this.children);{const t=pe(e),s=this.children.get(t);if(s){const n=s.remove(me(e));let i;return i=n.isEmpty()?this.children.remove(t):this.children.insert(t,n),null===this.value&&i.isEmpty()?new kt(null):new kt(this.value,i)}return this}}get(e){if(Ce(e))return this.value;{const t=pe(e),s=this.children.get(t);return s?s.get(me(e)):null}}setTree(e,t){if(Ce(e))return t;{const s=pe(e),n=(this.children.get(s)||new kt(null)).setTree(me(e),t);let i;return i=n.isEmpty()?this.children.remove(s):this.children.insert(s,n),new kt(this.value,i)}}fold(e){return this.fold_(ce(),e)}fold_(e,t){const s={};return this.children.inorderTraversal((n,i)=>{s[n]=i.fold_(ye(e,n),t)}),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,ce(),t)}findOnPath_(e,t,s){const n=!!this.value&&s(t,this.value);if(n)return n;if(Ce(e))return null;{const n=pe(e),i=this.children.get(n);return i?i.findOnPath_(me(e),ye(t,n),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ce(),t)}foreachOnPath_(e,t,s){if(Ce(e))return this;{this.value&&s(t,this.value);const n=pe(e),i=this.children.get(n);return i?i.foreachOnPath_(me(e),ye(t,n),s):new kt(null)}}foreach(e){this.foreach_(ce(),e)}foreach_(e,t){this.children.inorderTraversal((s,n)=>{n.foreach_(ye(e,s),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,s)=>{s.value&&e(t,s.value)})}}class At{constructor(e){this.writeTree_=e}static empty(){return new At(new kt(null))}}function Lt(e,t,s){if(Ce(t))return new At(new kt(s));{const n=e.writeTree_.findRootMostValueAndPath(t);if(null!=n){const i=n.path;let r=n.value;const a=we(i,t);return r=r.updateChild(a,s),new At(e.writeTree_.set(i,r))}{const n=new kt(s),i=e.writeTree_.setTree(t,n);return new At(i)}}}function Dt(e,t,s){let n=e;return D(s,(e,s)=>{n=Lt(n,ye(t,e),s)}),n}function Nt(e,t){if(Ce(t))return At.empty();{const s=e.writeTree_.setTree(t,new kt(null));return new At(s)}}function Ot(e,t){return null!=jt(e,t)}function jt(e,t){const s=e.writeTree_.findRootMostValueAndPath(t);return null!=s?e.writeTree_.get(s.path).getChild(we(s.path,t)):null}function qt(e){const t=[],s=e.writeTree_.value;return null!=s?s.isLeafNode()||s.forEachChild(Ge,(e,s)=>{t.push(new Re(e,s))}):e.writeTree_.children.inorderTraversal((e,s)=>{null!=s.value&&t.push(new Re(e,s.value))}),t}function Mt(e,t){if(Ce(t))return e;{const s=jt(e,t);return new At(null!=s?new kt(s):e.writeTree_.subtree(t))}}function Ft(e){return e.writeTree_.isEmpty()}function Bt(e,t){return zt(ce(),e.writeTree_,t)}function zt(e,t,s){if(null!=t.value)return s.updateChild(e,t.value);{let n=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?((0,r.vA)(null!==i.value,"Priority writes must always be leaf nodes"),n=i.value):s=zt(ye(e,t),i,s)}),s.getChild(e).isEmpty()||null===n||(s=s.updateChild(ye(e,".priority"),n)),s}}function Ht(e,t){return es(t,e)}function Qt(e,t){if(e.snap)return _e(e.path,t);for(const s in e.children)if(e.children.hasOwnProperty(s)&&_e(ye(e.path,s),t))return!0;return!1}function Ut(e){return e.visible}function Wt(e,t,s){let n=At.empty();for(let i=0;i<e.length;++i){const a=e[i];if(t(a)){const e=a.path;let t;if(a.snap)_e(s,e)?(t=we(s,e),n=Lt(n,t,a.snap)):_e(e,s)&&(t=we(e,s),n=Lt(n,ce(),a.snap.getChild(t)));else{if(!a.children)throw(0,r.Hk)("WriteRecord should have .snap or .children");if(_e(s,e))t=we(s,e),n=Dt(n,t,a.children);else if(_e(e,s))if(t=we(e,s),Ce(t))n=Dt(n,ce(),a.children);else{const e=(0,r.yw)(a.children,pe(t));if(e){const s=e.getChild(me(t));n=Lt(n,ce(),s)}}}}}return n}function Gt(e,t,s,n,i){if(n||i){const r=Mt(e.visibleWrites,t);if(!i&&Ft(r))return s;if(i||null!=s||Ot(r,ce())){const r=function(e){return(e.visible||i)&&(!n||!~n.indexOf(e.writeId))&&(_e(e.path,t)||_e(t,e.path))};return Bt(Wt(e.allWrites,r,t),s||tt.EMPTY_NODE)}return null}{const n=jt(e.visibleWrites,t);if(null!=n)return n;{const n=Mt(e.visibleWrites,t);return Ft(n)?s:null!=s||Ot(n,ce())?Bt(n,s||tt.EMPTY_NODE):null}}}function Zt(e,t,s,n){return Gt(e.writeTree,e.treePath,t,s,n)}function Kt(e,t){return function(e,t,s){let n=tt.EMPTY_NODE;const i=jt(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ge,(e,t)=>{n=n.updateImmediateChild(e,t)}),n;if(s){const i=Mt(e.visibleWrites,t);return s.forEachChild(Ge,(e,t)=>{const s=Bt(Mt(i,new he(e)),t);n=n.updateImmediateChild(e,s)}),qt(i).forEach(e=>{n=n.updateImmediateChild(e.name,e.node)}),n}return qt(Mt(e.visibleWrites,t)).forEach(e=>{n=n.updateImmediateChild(e.name,e.node)}),n}(e.writeTree,e.treePath,t)}function Jt(e,t,s,n){return function(e,t,s,n,i){(0,r.vA)(n||i,"Either existingEventSnap or existingServerSnap must exist");const a=ye(t,s);if(Ot(e.visibleWrites,a))return null;{const t=Mt(e.visibleWrites,a);return Ft(t)?i.getChild(s):Bt(t,i.getChild(s))}}(e.writeTree,e.treePath,t,s,n)}function Yt(e,t){return function(e,t){return jt(e.visibleWrites,t)}(e.writeTree,ye(e.treePath,t))}function $t(e,t,s){return function(e,t,s,n){const i=ye(t,s),r=jt(e.visibleWrites,i);return null!=r?r:n.isCompleteForChild(s)?Bt(Mt(e.visibleWrites,i),n.getNode().getImmediateChild(s)):null}(e.writeTree,e.treePath,t,s)}function Xt(e,t){return es(ye(e.treePath,t),e.writeTree)}function es(e,t){return{treePath:e,writeTree:t}}class ts{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;(0,r.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,r.vA)(".priority"!==s,"Only non-priority child changes can be tracked.");const n=this.changeMap.get(s);if(n){const a=n.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(s,ot(s,e.snapshotNode,n.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(s);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(s,(i=s,{type:"child_removed",snapshotNode:n.oldSnap,childName:i}));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(s,function(e,t){return{type:"child_added",snapshotNode:t,childName:e}}(s,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,r.Hk)("Illegal combination of changes: "+e+" occurred after "+n);this.changeMap.set(s,ot(s,e.snapshotNode,n.oldSnap))}}else this.changeMap.set(s,e);var i}getChanges(){return Array.from(this.changeMap.values())}}const ss=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}};class ns{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new _t(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $t(this.writes_,e,t)}}getChildAfterChild(e,t,s){const n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Et(this.viewCache_),i=function(e,t,s,n,i,r){return function(e,t,s,n,i,r,a){let o;const l=Mt(e.visibleWrites,t),u=jt(l,ce());if(null!=u)o=u;else{if(null==s)return[];o=Bt(l,s)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),s=r?o.getReverseIteratorFrom(n,a):o.getIteratorFrom(n,a);let l=s.getNext();for(;l&&e.length<i;)0!==t(l,n)&&e.push(l),l=s.getNext();return e}}(e.writeTree,e.treePath,t,s,n,i,r)}(this.writes_,n,t,1,s,e);return 0===i.length?null:i[0]}}function is(e,t,s,n,i,a){const o=t.eventCache;if(null!=Yt(n,s))return t;{let l,u;if(Ce(s))if((0,r.vA)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const s=Et(t),i=Kt(n,s instanceof tt?s:tt.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),i,a)}else{const s=Zt(n,Et(t));l=e.filter.updateFullNode(t.eventCache.getNode(),s,a)}else{const d=pe(s);if(".priority"===d){(0,r.vA)(1===ge(s),"Can't have a priority with additional path components");const i=o.getNode();u=t.serverCache.getNode();const a=Jt(n,s,i,u);l=null!=a?e.filter.updatePriority(i,a):o.getNode()}else{const r=me(s);let h;if(o.isCompleteForChild(d)){u=t.serverCache.getNode();const e=Jt(n,s,o.getNode(),u);h=null!=e?o.getNode().getImmediateChild(d).updateChild(r,e):o.getNode().getImmediateChild(d)}else h=$t(n,d,t.serverCache);l=null!=h?e.filter.updateChild(o.getNode(),d,h,r,i,a):o.getNode()}}return St(t,l,o.isFullyInitialized()||Ce(s),e.filter.filtersNodes())}}function rs(e,t,s,n,i,r,a,o){const l=t.serverCache;let u;const d=a?e.filter:e.filter.getIndexedFilter();if(Ce(s))u=d.updateFullNode(l.getNode(),n,null);else if(d.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(s,n);u=d.updateFullNode(l.getNode(),e,null)}else{const e=pe(s);if(!l.isCompleteForPath(s)&&ge(s)>1)return t;const i=me(s),r=l.getNode().getImmediateChild(e).updateChild(i,n);u=".priority"===e?d.updatePriority(l.getNode(),r):d.updateChild(l.getNode(),e,r,i,ss,null)}const h=Pt(t,u,l.isFullyInitialized()||Ce(s),d.filtersNodes());return is(e,h,s,i,new ns(i,h,r),o)}function as(e,t,s,n,i,r,a){const o=t.eventCache;let l,u;const d=new ns(i,t,r);if(Ce(s))u=e.filter.updateFullNode(t.eventCache.getNode(),n,a),l=St(t,u,!0,e.filter.filtersNodes());else{const i=pe(s);if(".priority"===i)u=e.filter.updatePriority(t.eventCache.getNode(),n),l=St(t,u,o.isFullyInitialized(),o.isFiltered());else{const r=me(s),u=o.getNode().getImmediateChild(i);let h;if(Ce(r))h=n;else{const e=d.getCompleteChild(i);h=null!=e?".priority"===ve(r)&&e.getChild(be(r)).isEmpty()?e:e.updateChild(r,n):tt.EMPTY_NODE}l=u.equals(h)?t:St(t,e.filter.updateChild(o.getNode(),i,h,r,d,a),o.isFullyInitialized(),e.filter.filtersNodes())}}return l}function os(e,t){return e.eventCache.isCompleteForChild(t)}function ls(e,t,s){return s.foreach((e,s)=>{t=t.updateChild(e,s)}),t}function us(e,t,s,n,i,r,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,u=t;l=Ce(s)?n:new kt(null).setTree(s,n);const d=t.serverCache.getNode();return l.children.inorderTraversal((s,n)=>{if(d.hasChild(s)){const l=ls(0,t.serverCache.getNode().getImmediateChild(s),n);u=rs(e,u,new he(s),l,i,r,a,o)}}),l.children.inorderTraversal((s,n)=>{const l=!t.serverCache.isCompleteForChild(s)&&null===n.value;if(!d.hasChild(s)&&!l){const l=ls(0,t.serverCache.getNode().getImmediateChild(s),n);u=rs(e,u,new he(s),l,i,r,a,o)}}),u}function ds(e,t){const s=Et(e.viewCache_);return s&&(e.query._queryParams.loadsAllData()||!Ce(t)&&!s.getImmediateChild(pe(t)).isEmpty())?s.getChild(t):null}function hs(e,t,s,n){t.type===bt.MERGE&&null!==t.source.queryId&&((0,r.vA)(Et(e.viewCache_),"We should always have a full cache before handling merges"),(0,r.vA)(Tt(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,a=function(e,t,s,n,i){const a=new ts;let o,l;if(s.type===bt.OVERWRITE){const u=s;u.source.fromUser?o=as(e,t,u.path,u.snap,n,i,a):((0,r.vA)(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!Ce(u.path),o=rs(e,t,u.path,u.snap,n,i,l,a))}else if(s.type===bt.MERGE){const u=s;u.source.fromUser?o=function(e,t,s,n,i,r,a){let o=t;return n.foreach((n,l)=>{const u=ye(s,n);os(t,pe(u))&&(o=as(e,o,u,l,i,r,a))}),n.foreach((n,l)=>{const u=ye(s,n);os(t,pe(u))||(o=as(e,o,u,l,i,r,a))}),o}(e,t,u.path,u.children,n,i,a):((0,r.vA)(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),o=us(e,t,u.path,u.children,n,i,l,a))}else if(s.type===bt.ACK_USER_WRITE){const l=s;o=l.revert?function(e,t,s,n,i,a){let o;if(null!=Yt(n,s))return t;{const l=new ns(n,t,i),u=t.eventCache.getNode();let d;if(Ce(s)||".priority"===pe(s)){let s;if(t.serverCache.isFullyInitialized())s=Zt(n,Et(t));else{const e=t.serverCache.getNode();(0,r.vA)(e instanceof tt,"serverChildren would be complete if leaf node"),s=Kt(n,e)}d=e.filter.updateFullNode(u,s,a)}else{const i=pe(s);let r=$t(n,i,t.serverCache);null==r&&t.serverCache.isCompleteForChild(i)&&(r=u.getImmediateChild(i)),d=null!=r?e.filter.updateChild(u,i,r,me(s),l,a):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(u,i,tt.EMPTY_NODE,me(s),l,a):u,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Zt(n,Et(t)),o.isLeafNode()&&(d=e.filter.updateFullNode(d,o,a)))}return o=t.serverCache.isFullyInitialized()||null!=Yt(n,ce()),St(t,d,o,e.filter.filtersNodes())}}(e,t,l.path,n,i,a):function(e,t,s,n,i,r,a){if(null!=Yt(i,s))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=n.value){if(Ce(s)&&l.isFullyInitialized()||l.isCompleteForPath(s))return rs(e,t,s,l.getNode().getChild(s),i,r,o,a);if(Ce(s)){let n=new kt(null);return l.getNode().forEachChild(De,(e,t)=>{n=n.set(new he(e),t)}),us(e,t,s,n,i,r,o,a)}return t}{let u=new kt(null);return n.foreach((e,t)=>{const n=ye(s,e);l.isCompleteForPath(n)&&(u=u.set(e,l.getNode().getChild(n)))}),us(e,t,s,u,i,r,o,a)}}(e,t,l.path,l.affectedTree,n,i,a)}else{if(s.type!==bt.LISTEN_COMPLETE)throw(0,r.Hk)("Unknown operation type: "+s.type);o=function(e,t,s,n,i){const r=t.serverCache;return is(e,Pt(t,r.getNode(),r.isFullyInitialized()||Ce(s),r.isFiltered()),s,n,ss,i)}(e,t,s.path,n,a)}const u=a.getChanges();return function(e,t,s){const n=t.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),r=Tt(e);(s.length>0||!e.eventCache.isFullyInitialized()||i&&!n.getNode().equals(r)||!n.getNode().getPriority().equals(r.getPriority()))&&s.push({type:"value",snapshotNode:Tt(t)})}}(t,o,u),{viewCache:o,changes:u}}(e.processor_,i,t,s,n);var o,l;return o=e.processor_,l=a.viewCache,(0,r.vA)(l.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,r.vA)(l.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),(0,r.vA)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,function(e,t,s,n){const i=n?[n]:e.eventRegistrations_;return function(e,t,s,n){const i=[],r=[];return t.forEach(t=>{var s;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&r.push((s=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:s}))}),Vt(e,i,"child_removed",t,n,s),Vt(e,i,"child_added",t,n,s),Vt(e,i,"child_moved",r,n,s),Vt(e,i,"child_changed",t,n,s),Vt(e,i,"value",t,n,s),i}(e.eventGenerator_,t,s,i)}(e,a.changes,a.viewCache.eventCache.getNode(),null)}let cs,ps;function gs(e,t,s,n){const i=t.source.queryId;if(null!==i){const a=e.views.get(i);return(0,r.vA)(null!=a,"SyncTree gave us an op for an invalid query."),hs(a,t,s,n)}{let i=[];for(const r of e.views.values())i=i.concat(hs(r,t,s,n));return i}}function ms(e,t){let s=null;for(const n of e.views.values())s=s||ds(n,t);return s}class vs{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kt(null),this.pendingWriteTree_={visibleWrites:At.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fs(e,t,s,n,i){return function(e,t,s,n,i){(0,r.vA)(n>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:s,writeId:n,visible:i}),i&&(e.visibleWrites=Lt(e.visibleWrites,t,s)),e.lastWriteId=n}(e.pendingWriteTree_,t,s,n,i),i?ws(e,new wt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,s)):[]}function bs(e,t,s=!1){const n=function(e,t){for(let s=0;s<e.allWrites.length;s++){const n=e.allWrites[s];if(n.writeId===t)return n}return null}(e.pendingWriteTree_,t);if(function(e,t){const s=e.allWrites.findIndex(e=>e.writeId===t);(0,r.vA)(s>=0,"removeWrite called with nonexistent writeId.");const n=e.allWrites[s];e.allWrites.splice(s,1);let i=n.visible,a=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=s&&Qt(t,n.path)?i=!1:_e(n.path,t.path)&&(a=!0)),o--}return!!i&&(a?(function(e){e.visibleWrites=Wt(e.allWrites,Ut,ce()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(n.snap?e.visibleWrites=Nt(e.visibleWrites,n.path):D(n.children,t=>{e.visibleWrites=Nt(e.visibleWrites,ye(n.path,t))}),!0))}(e.pendingWriteTree_,t)){let t=new kt(null);return null!=n.snap?t=t.set(ce(),!0):D(n.children,e=>{t=t.set(new he(e),!0)}),ws(e,new Ct(n.path,t,s))}return[]}function ys(e,t,s){return ws(e,new wt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,s))}function Cs(e,t,s){const n=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,s)=>{const n=ms(s,we(e,t));if(n)return n});return Gt(n,t,i,s,!0)}function ws(e,t){return xs(t,e.syncPointTree_,null,Ht(e.pendingWriteTree_,ce()))}function xs(e,t,s,n){if(Ce(e.path))return _s(e,t,s,n);{const i=t.get(ce());null==s&&null!=i&&(s=ms(i,ce()));let r=[];const a=pe(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=s?s.getImmediateChild(a):null,t=Xt(n,a);r=r.concat(xs(o,l,e,t))}return i&&(r=r.concat(gs(i,e,n,s))),r}}function _s(e,t,s,n){const i=t.get(ce());null==s&&null!=i&&(s=ms(i,ce()));let r=[];return t.children.inorderTraversal((t,i)=>{const a=s?s.getImmediateChild(t):null,o=Xt(n,t),l=e.operationForChild(t);l&&(r=r.concat(_s(l,i,a,o)))}),i&&(r=r.concat(gs(i,e,n,s))),r}function Vs(e,t){return e.tagToQueryMap.get(t)}function Is(e){const t=e.indexOf("$");return(0,r.vA)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new he(e.substr(0,t))}}function Ss(e,t,s){const n=e.syncPointTree_.get(t);return(0,r.vA)(n,"Missing sync point for query tag that we're tracking"),gs(n,s,Ht(e.pendingWriteTree_,t),null)}class Ps{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ps(t)}node(){return this.node_}}class Ts{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ye(this.path_,e);return new Ts(this.syncTree_,t)}node(){return Cs(this.syncTree_,this.path_)}}const Es=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Rs=function(e,t,s){return e&&"object"==typeof e?((0,r.vA)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?ks(e[".sv"],t,s):"object"==typeof e[".sv"]?As(e[".sv"],t):void(0,r.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ks=function(e,t,s){if("timestamp"===e)return s.timestamp;(0,r.vA)(!1,"Unexpected server value: "+e)},As=function(e,t,s){e.hasOwnProperty("increment")||(0,r.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const n=e.increment;"number"!=typeof n&&(0,r.vA)(!1,"Unexpected increment value: "+n);const i=t.node();if((0,r.vA)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const a=i.getValue();return"number"!=typeof a?n:a+n},Ls=function(e,t,s){return Ds(e,new Ps(t),s)};function Ds(e,t,s){const n=e.getPriority().val(),i=Rs(n,t.getImmediateChild(".priority"),s);let r;if(e.isLeafNode()){const n=e,r=Rs(n.getValue(),t,s);return r!==n.getValue()||i!==n.getPriority().val()?new We(r,it(i)):e}{const n=e;return r=n,i!==n.getPriority().val()&&(r=r.updatePriority(new We(i))),n.forEachChild(Ge,(e,n)=>{const i=Ds(n,t.getImmediateChild(e),s);i!==n&&(r=r.updateImmediateChild(e,i))}),r}}class Ns{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function Os(e,t){let s=t instanceof he?t:new he(t),n=e,i=pe(s);for(;null!==i;){const e=(0,r.yw)(n.node.children,i)||{children:{},childCount:0};n=new Ns(i,n,e),s=me(s),i=pe(s)}return n}function js(e){return e.node.value}function qs(e,t){e.node.value=t,Hs(e)}function Ms(e){return e.node.childCount>0}function Fs(e,t){D(e.node.children,(s,n)=>{t(new Ns(s,e,n))})}function Bs(e,t,s,n){s&&!n&&t(e),Fs(e,e=>{Bs(e,t,!0,n)}),s&&n&&t(e)}function zs(e){return new he(null===e.parent?e.name:zs(e.parent)+"/"+e.name)}function Hs(e){null!==e.parent&&function(e,t,s){const n=function(e){return void 0===js(e)&&!Ms(e)}(s),i=(0,r.gR)(e.node.children,t);n&&i?(delete e.node.children[t],e.node.childCount--,Hs(e)):n||i||(e.node.children[t]=s.node,e.node.childCount++,Hs(e))}(e.parent,e.name,e)}const Qs=/[\[\].#$\/\u0000-\u001F\u007F]/,Us=/[\[\].#$\u0000-\u001F\u007F]/,Ws=10485760,Gs=function(e){return"string"==typeof e&&0!==e.length&&!Qs.test(e)},Zs=function(e){return"string"==typeof e&&0!==e.length&&!Us.test(e)},Ks=function(e,t,s,n){n&&void 0===t||Js((0,r.dI)(e,"value"),t,s)},Js=function(e,t,s){const n=s instanceof he?new Ve(s,e):s;if(void 0===t)throw new Error(e+"contains undefined "+Se(n));if("function"==typeof t)throw new Error(e+"contains a function "+Se(n)+" with contents = "+t.toString());if(S(t))throw new Error(e+"contains "+t.toString()+" "+Se(n));if("string"==typeof t&&t.length>Ws/3&&(0,r.OE)(t)>Ws)throw new Error(e+"contains a string greater than "+Ws+" utf8 bytes "+Se(n)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let s=!1,i=!1;if(D(t,(t,a)=>{if(".value"===t)s=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Gs(t)))throw new Error(e+" contains an invalid key ("+t+") "+Se(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,r.OE)(t),Ie(e)}(n,t),Js(e,a,n),function(e){const t=e.parts_.pop();e.byteLength_-=(0,r.OE)(t),e.parts_.length>0&&(e.byteLength_-=1)}(n)}),s&&i)throw new Error(e+' contains ".value" child '+Se(n)+" in addition to actual children.")}},Ys=function(e,t,s,n){if(!(n&&void 0===s||Zs(s)))throw new Error((0,r.dI)(e,t)+'was an invalid path = "'+s+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},$s=function(e,t,s,n){s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Ys(e,t,s,n)},Xs=function(e,t){if(".info"===pe(t))throw new Error(e+" failed = Can't modify data under /.info/")};class en{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tn(e,t){let s=null;for(let n=0;n<t.length;n++){const i=t[n],r=i.getPath();null===s||xe(r,s.path)||(e.eventLists_.push(s),s=null),null===s&&(s={events:[],path:r}),s.events.push(i)}s&&e.eventLists_.push(s)}function sn(e,t,s){tn(e,s),function(e,t){e.recursionDepth_++;let s=!0;for(let n=0;n<e.eventLists_.length;n++){const i=e.eventLists_[n];i&&(t(i.path)?(nn(e.eventLists_[n]),e.eventLists_[n]=null):s=!1)}s&&(e.eventLists_=[]),e.recursionDepth_--}(e,e=>_e(e,t)||_e(t,e))}function nn(e){for(let t=0;t<e.events.length;t++){const s=e.events[t];if(null!==s){e.events[t]=null;const n=s.getEventRunner();y&&w("event: "+s.toString()),q(n)}}}const rn=25;class an{constructor(e,t,s,n){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new en,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pt(),this.transactionQueueTree_=new Ns,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function on(e,t,s){if(e.stats_=X(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new ht(e.repoInfo_,(t,s,n,i)=>{dn(e,t,s,n,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>hn(e,!0),0);else{if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,r.As)(s)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Ee(e.repoInfo_,t,(t,s,n,i)=>{dn(e,t,s,n,i)},t=>{hn(e,t)},t=>{!function(e,t){D(t,(t,s)=>{cn(e,t,s)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,s),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(t){const s=t.toString();return $[s]||($[s]=new ft(e.stats_,e.server_)),$[s]}(e.repoInfo_),e.infoData_=new ct,e.infoSyncTree_=new vs({startListening:(t,s,n,i)=>{let r=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(r=ys(e.infoSyncTree_,t._path,a),setTimeout(()=>{i("ok")},0)),r},stopListening:()=>{}}),cn(e,"connected",!1),e.serverSyncTree_=new vs({startListening:(t,s,n,i)=>(e.server_.listen(t,n,s,(s,n)=>{const r=i(s,n);sn(e.eventQueue_,t._path,r)}),[]),stopListening:(t,s)=>{e.server_.unlisten(t,s)}})}function ln(e){const t=e.infoData_.getNode(new he(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function un(e){return Es({timestamp:ln(e)})}function dn(e,t,s,n,i){e.dataUpdateCount++;const a=new he(t);s=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,s):s;let o=[];if(i)if(n){const t=(0,r.kH)(s,e=>it(e));o=function(e,t,s,n){const i=Vs(e,n);if(i){const n=Is(i),r=n.path,a=n.queryId,o=we(r,t),l=kt.fromObject(s);return Ss(e,r,new xt(yt(a),o,l))}return[]}(e.serverSyncTree_,a,t,i)}else{const t=it(s);o=function(e,t,s,n){const i=Vs(e,n);if(null!=i){const n=Is(i),r=n.path,a=n.queryId,o=we(r,t);return Ss(e,r,new wt(yt(a),o,s))}return[]}(e.serverSyncTree_,a,t,i)}else if(n){const t=(0,r.kH)(s,e=>it(e));o=function(e,t,s){const n=kt.fromObject(s);return ws(e,new xt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}(e.serverSyncTree_,a,t)}else{const t=it(s);o=ys(e.serverSyncTree_,a,t)}let l=a;o.length>0&&(l=bn(e,a)),sn(e.eventQueue_,l,o)}function hn(e,t){cn(e,"connected",t),!1===t&&function(e){mn(e,"onDisconnectEvents");const t=un(e),s=pt();mt(e.onDisconnect_,ce(),(n,i)=>{const r=function(e,t,s,n){return Ds(t,new Ts(s,e),n)}(n,i,e.serverSyncTree_,t);gt(s,n,r)});let n=[];mt(s,ce(),(t,s)=>{n=n.concat(ys(e.serverSyncTree_,t,s));const i=_n(e,t);bn(e,i)}),e.onDisconnect_=pt(),sn(e.eventQueue_,ce(),n)}(e)}function cn(e,t,s){const n=new he("/.info/"+t),i=it(s);e.infoData_.updateSnapshot(n,i);const r=ys(e.infoSyncTree_,n,i);sn(e.eventQueue_,n,r)}function pn(e){return e.nextWriteId_++}function gn(e,t,s,n,i){mn(e,"set",{path:t.toString(),value:s,priority:n});const r=un(e),a=it(s,n),o=Cs(e.serverSyncTree_,t),l=Ls(a,o,r),u=pn(e),d=fs(e.serverSyncTree_,t,l,u,!0);tn(e.eventQueue_,d),e.server_.put(t.toString(),a.val(!0),(s,n)=>{const r="ok"===s;r||I("set at "+t+" failed: "+s);const a=bs(e.serverSyncTree_,u,!r);sn(e.eventQueue_,t,a),function(e,t,s,n){t&&q(()=>{if("ok"===s)t(null);else{const e=(s||"error").toUpperCase();let i=e;n&&(i+=": "+n);const r=new Error(i);r.code=e,t(r)}})}(0,i,s,n)});const h=_n(e,t);bn(e,h),sn(e.eventQueue_,h,[])}function mn(e,...t){let s="";e.persistentConnection_&&(s=e.persistentConnection_.id+":"),w(s,...t)}function vn(e,t,s){return Cs(e.serverSyncTree_,t,s)||tt.EMPTY_NODE}function fn(e,t=e.transactionQueueTree_){if(t||xn(e,t),js(t)){const s=Cn(e,t);(0,r.vA)(s.length>0,"Sending zero length transaction queue"),s.every(e=>0===e.status)&&function(e,t,s){const n=s.map(e=>e.currentWriteId),i=vn(e,t,n);let a=i;const o=i.hash();for(let e=0;e<s.length;e++){const n=s[e];(0,r.vA)(0===n.status,"tryToSendTransactionQueue_: items in queue should all be run."),n.status=1,n.retryCount++;const i=we(t,n.path);a=a.updateChild(i,n.currentOutputSnapshotRaw)}const l=a.val(!0),u=t;e.server_.put(u.toString(),l,n=>{mn(e,"transaction put response",{path:u.toString(),status:n});let i=[];if("ok"===n){const n=[];for(let t=0;t<s.length;t++)s[t].status=2,i=i.concat(bs(e.serverSyncTree_,s[t].currentWriteId)),s[t].onComplete&&n.push(()=>s[t].onComplete(null,!0,s[t].currentOutputSnapshotResolved)),s[t].unwatcher();xn(e,Os(e.transactionQueueTree_,t)),fn(e,e.transactionQueueTree_),sn(e.eventQueue_,t,i);for(let e=0;e<n.length;e++)q(n[e])}else{if("datastale"===n)for(let e=0;e<s.length;e++)3===s[e].status?s[e].status=4:s[e].status=0;else{I("transaction at "+u.toString()+" failed: "+n);for(let e=0;e<s.length;e++)s[e].status=4,s[e].abortReason=n}bn(e,t)}},o)}(e,zs(t),s)}else Ms(t)&&Fs(t,t=>{fn(e,t)})}function bn(e,t){const s=yn(e,t),n=zs(s);return function(e,t,s){if(0===t.length)return;const n=[];let i=[];const a=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){const l=t[o],u=we(s,l.path);let d,h=!1;if((0,r.vA)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,d=l.abortReason,i=i.concat(bs(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=rn)h=!0,d="maxretry",i=i.concat(bs(e.serverSyncTree_,l.currentWriteId,!0));else{const s=vn(e,l.path,a);l.currentInputSnapshot=s;const n=t[o].update(s.val());if(void 0!==n){Js("transaction failed: Data returned ",n,l.path);let t=it(n);"object"==typeof n&&null!=n&&(0,r.gR)(n,".priority")||(t=t.updatePriority(s.getPriority()));const o=l.currentWriteId,u=un(e),d=Ls(t,s,u);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=d,l.currentWriteId=pn(e),a.splice(a.indexOf(o),1),i=i.concat(fs(e.serverSyncTree_,l.path,d,l.currentWriteId,l.applyLocally)),i=i.concat(bs(e.serverSyncTree_,o,!0))}else h=!0,d="nodata",i=i.concat(bs(e.serverSyncTree_,l.currentWriteId,!0))}sn(e.eventQueue_,s,i),i=[],h&&(t[o].status=2,function(e){setTimeout(e,Math.floor(0))}(t[o].unwatcher),t[o].onComplete&&("nodata"===d?n.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):n.push(()=>t[o].onComplete(new Error(d),!1,null))))}xn(e,e.transactionQueueTree_);for(let e=0;e<n.length;e++)q(n[e]);fn(e,e.transactionQueueTree_)}(e,Cn(e,s),n),n}function yn(e,t){let s,n=e.transactionQueueTree_;for(s=pe(t);null!==s&&void 0===js(n);)n=Os(n,s),s=pe(t=me(t));return n}function Cn(e,t){const s=[];return wn(e,t,s),s.sort((e,t)=>e.order-t.order),s}function wn(e,t,s){const n=js(t);if(n)for(let e=0;e<n.length;e++)s.push(n[e]);Fs(t,t=>{wn(e,t,s)})}function xn(e,t){const s=js(t);if(s){let e=0;for(let t=0;t<s.length;t++)2!==s[t].status&&(s[e]=s[t],e++);s.length=e,qs(t,s.length>0?s:void 0)}Fs(t,t=>{xn(e,t)})}function _n(e,t){const s=zs(yn(e,t)),n=Os(e.transactionQueueTree_,t);return function(e,t){let s=e.parent;for(;null!==s;){if(t(s))return!0;s=s.parent}}(n,t=>{Vn(e,t)}),Vn(e,n),Bs(n,t=>{Vn(e,t)}),s}function Vn(e,t){const s=js(t);if(s){const n=[];let i=[],a=-1;for(let t=0;t<s.length;t++)3===s[t].status||(1===s[t].status?((0,r.vA)(a===t-1,"All SENT items should be at beginning of queue."),a=t,s[t].status=3,s[t].abortReason="set"):((0,r.vA)(0===s[t].status,"Unexpected transaction status in abort"),s[t].unwatcher(),i=i.concat(bs(e.serverSyncTree_,s[t].currentWriteId,!0)),s[t].onComplete&&n.push(s[t].onComplete.bind(null,new Error("set"),!1,null))));-1===a?qs(t,void 0):s.length=a+1,sn(e.eventQueue_,zs(t),i);for(let e=0;e<n.length;e++)q(n[e])}}const In=function(e,t){const s=Sn(e),n=s.namespace;"firebase.com"===s.domain&&V(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===s.domain||V("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===s.scheme||"wss"===s.scheme;return{repoInfo:new Z(s.host,s.secure,n,i,t,"",n!==s.subdomain),path:new he(s.pathString)}},Sn=function(e){let t="",s="",n="",i="",r="",a=!0,o="https",l=443;if("string"==typeof e){let u=e.indexOf("//");u>=0&&(o=e.substring(0,u-1),e=e.substring(u+2));let d=e.indexOf("/");-1===d&&(d=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(d,h)),d<h&&(i=function(e){let t="";const s=e.split("/");for(let e=0;e<s.length;e++)if(s[e].length>0){let n=s[e];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch(e){}t+="/"+n}return t}(e.substring(d,h)));const c=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const s of e.split("&")){if(0===s.length)continue;const n=s.split("=");2===n.length?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):I(`Invalid query segment '${s}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(u+1),10)):u=t.length;const p=t.slice(0,u);if("localhost"===p.toLowerCase())s="localhost";else if(p.split(".").length<=2)s=p;else{const e=t.indexOf(".");n=t.substring(0,e).toLowerCase(),s=t.substring(e+1),r=n}"ns"in c&&(r=c.ns)}return{host:t,port:l,domain:s,subdomain:n,secure:a,scheme:o,pathString:i,namespace:r}};class Pn{constructor(e,t,s,n){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=n}get key(){return Ce(this._path)?null:ve(this._path)}get ref(){return new Tn(this._repo,this._path)}get _queryIdentifier(){const e=dt(this._queryParams),t=A(e);return"{}"===t?"default":t}get _queryObject(){return dt(this._queryParams)}isEqual(e){if(!((e=(0,r.Ku)(e))instanceof Pn))return!1;const t=this._repo===e._repo,s=xe(this._path,e._path),n=this._queryIdentifier===e._queryIdentifier;return t&&s&&n}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let s=e.pieceNum_;s<e.pieces_.length;s++)""!==e.pieces_[s]&&(t+="/"+encodeURIComponent(String(e.pieces_[s])));return t||"/"}(this._path)}}class Tn extends Pn{constructor(e,t){super(e,t,new lt,!1)}get parent(){const e=be(this._path);return null===e?null:new Tn(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}function En(e,t){return(e=(0,r.Ku)(e))._checkNotDeleted("ref"),void 0!==t?function(e,t){return null===pe((e=(0,r.Ku)(e))._path)?$s("child","path",t,!1):Ys("child","path",t,!1),new Tn(e._repo,ye(e._path,t))}(e._root,t):e._root}function Rn(e,t){e=(0,r.Ku)(e),Xs("set",e._path),Ks("set",t,e._path,!1);const s=new r.cY;return gn(e._repo,e._path,t,null,s.wrapCallback(()=>{})),s.promise}!function(e){(0,r.vA)(!cs,"__referenceConstructor has already been defined"),cs=e}(Tn),function(e){(0,r.vA)(!ps,"__referenceConstructor has already been defined"),ps=e}(Tn);const kn={};function An(e,t,s,n,i){let a=n||e.options.databaseURL;void 0===a&&(e.options.projectId||V("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,l,u=In(a,i),d=u.repoInfo;"undefined"!=typeof process&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(o=!0,a=`http://${l}?ns=${d.namespace}`,u=In(a,i),d=u.repoInfo):o=!u.repoInfo.secure;const h=i&&o?new z(z.OWNER):new B(e.name,e.options,t);(function(e,t){const s=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Gs(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==s.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Zs(e)}(s))throw new Error((0,r.dI)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",u),Ce(u.path)||V("Database URL must point to the root of a Firebase Database (not including a child path).");const c=function(e,t,s,n){let i=kn[t.name];i||(i={},kn[t.name]=i);let r=i[e.toURLString()];return r&&V("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new an(e,false,s,n),i[e.toURLString()]=r,r}(d,e,h,new F(e,s));return new Ln(c,e)}class Ln{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(on(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tn(this._repo,ce())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const s=kn[t];s&&s[e.key]===e||V(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete s[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&V("Cannot call "+e+" on a deleted database.")}}function Dn(e=(0,n.Sx)(),t){const s=(0,n.j6)(e,"database").getImmediate({identifier:t});if(!s._instanceStarted){const e=(0,r.yU)("database");e&&function(e,t,s,n={}){(e=(0,r.Ku)(e))._checkNotDeleted("useEmulator");const i=`${t}:${s}`,a=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&(0,r.bD)(n,a.repoInfo_.emulatorOptions))return;V("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(a.repoInfo_.nodeAdmin)n.mockUserToken&&V('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new z(z.OWNER);else if(n.mockUserToken){const t="string"==typeof n.mockUserToken?n.mockUserToken:(0,r.Fy)(n.mockUserToken,e.app.options.projectId);o=new z(t)}(0,r.zJ)(t)&&((0,r.gE)(t),(0,r.P1)("Database",!0)),function(e,t,s,n){const i=t.lastIndexOf(":"),a=t.substring(0,i),o=(0,r.zJ)(a);e.repoInfo_=new Z(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,s),n&&(e.authTokenProvider_=n)}(a,i,n,o)}(s,...e)}return s}Ee.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ee.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function(e){u=e}(n.MF),(0,n.om)(new i.uA("database",(e,{instanceIdentifier:t})=>An(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,n.KO)(o,l,undefined),(0,n.KO)(o,l,"esm2020")},8517:(e,t,s)=>{s.d(t,{xI:()=>ls,zK:()=>Ke});var n=s(0),i=s(3047),r=s(722),a=s(1711);const o=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},l=new i.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new r.Vy("@firebase/auth");function d(e,...t){u.logLevel<=r.$b.ERROR&&u.error(`Auth (${n.MF}): ${e}`,...t)}function h(e,...t){throw m(e,...t)}function c(e,...t){return m(e,...t)}function p(e,t,s){const n={...o(),[t]:s};return new i.FA("auth","Firebase",n).create(t,{appName:e.name})}function g(e){return p(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function m(e,...t){if("string"!=typeof e){const s=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(s,...n)}return l.create(e,...t)}function v(e,t,...s){if(!e)throw m(t,...s)}function f(e){const t="INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function b(e,t){e||f(t)}function y(){return"undefined"!=typeof self&&self.location?.href||""}function C(){return"undefined"!=typeof self&&self.location?.protocol||null}class w{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.jZ)()||(0,i.lV)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===C()||"https:"===C()||(0,i.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){b(e.emulator,"Emulator should always be set here");const{url:s}=e.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}class _{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void f("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void f("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void f("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const V={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},I=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S=new w(3e4,6e4);function P(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function T(e,t,s,n,r={}){return E(e,r,async()=>{let r={},a={};n&&("GET"===t?a=n:r={body:JSON.stringify(n)});const o=(0,i.Am)({key:e.config.apiKey,...a}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...r};return(0,i.c1)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,i.zJ)(e.emulatorConfig.host)&&(u.credentials="include"),_.fetch()(await k(e,e.config.apiHost,s,o),u)})}async function E(e,t,s){e._canInitEmulator=!1;const n={...V,...t};try{const t=new L(e),i=await Promise.race([s(),t.promise]);t.clearNetworkTimeout();const r=await i.json();if("needConfirmation"in r)throw D(e,"account-exists-with-different-credential",r);if(i.ok&&!("errorMessage"in r))return r;{const t=i.ok?r.errorMessage:r.error.message,[s,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===s)throw D(e,"credential-already-in-use",r);if("EMAIL_EXISTS"===s)throw D(e,"email-already-in-use",r);if("USER_DISABLED"===s)throw D(e,"user-disabled",r);const o=n[s]||s.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw p(e,o,a);h(e,o)}}catch(t){if(t instanceof i.g)throw t;h(e,"network-request-failed",{message:String(t)})}}async function R(e,t,s,n,i={}){const r=await T(e,t,s,n,i);return"mfaPendingCredential"in r&&h(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function k(e,t,s,n){const i=`${t}${s}?${n}`,r=e,a=r.config.emulator?x(e.config,i):`${e.config.apiScheme}://${i}`;return I.includes(s)&&(await r._persistenceManagerAvailable,"COOKIE"===r._getPersistenceType())?r._getPersistence()._getFinalTarget(a).toString():a}function A(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(c(this.auth,"network-request-failed")),S.get())})}}function D(e,t,s){const n={appName:e.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const i=c(e,t,n);return i.customData._tokenResponse=s,i}function N(e){return void 0!==e&&void 0!==e.enterprise}class O{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return A(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function j(e,t){return T(e,"GET","/v2/recaptchaConfig",P(e,t))}async function q(e,t){return T(e,"POST","/v1/accounts:lookup",t)}function M(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function F(e){return 1e3*Number(e)}function B(e){const[t,s,n]=e.split(".");if(void 0===t||void 0===s||void 0===n)return d("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.u)(s);return e?JSON.parse(e):(d("Failed to decode base64 JWT payload"),null)}catch(e){return d("Caught error parsing JWT payload as JSON",e?.toString()),null}}function z(e){const t=B(e);return v(t,"internal-error"),v(void 0!==t.exp,"internal-error"),v(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function H(e,t,s=!1){if(s)return t;try{return await t}catch(t){throw t instanceof i.g&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Q{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class U{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=M(this.lastLoginAt),this.creationTime=M(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function W(e){const t=e.auth,s=await e.getIdToken(),n=await H(e,q(t,{idToken:s}));v(n?.users.length,t,"internal-error");const i=n.users[0];e._notifyReloadListener(i);const r=i.providerUserInfo?.length?G(i.providerUserInfo):[],a=(o=e.providerData,l=r,[...o.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var o,l;const u=e.isAnonymous,d=!(e.email&&i.passwordHash||a?.length),h=!!u&&d,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new U(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,c)}function G(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v(void 0!==e.idToken,"internal-error"),v(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):z(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){v(0!==e.length,"internal-error");const t=z(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(v(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:n,expiresIn:r}=await async function(e,t){const s=await E(e,{},async()=>{const s=(0,i.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:r}=e.config,a=await k(e,n,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:s};return e.emulatorConfig&&(0,i.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),_.fetch()(a,l)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}(e,t);this.updateTokensAndExpiration(s,n,Number(r))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*s}static fromJSON(e,t){const{refreshToken:s,accessToken:n,expirationTime:i}=t,r=new Z;return s&&(v("string"==typeof s,"internal-error",{appName:e}),r.refreshToken=s),n&&(v("string"==typeof n,"internal-error",{appName:e}),r.accessToken=n),i&&(v("number"==typeof i,"internal-error",{appName:e}),r.expirationTime=i),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return f("not implemented")}}function K(e,t){v("string"==typeof e||void 0===e,"internal-error",{appName:t})}class J{constructor({uid:e,auth:t,stsTokenManager:s,...n}){this.providerId="firebase",this.proactiveRefresh=new Q(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new U(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(e){const t=await H(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const s=(0,i.Ku)(e),n=await s.getIdToken(t),r=B(n);v(r&&r.exp&&r.auth_time&&r.iat,s.auth,"internal-error");const a="object"==typeof r.firebase?r.firebase:void 0,o=a?.sign_in_provider;return{claims:r,token:n,authTime:M(F(r.auth_time)),issuedAtTime:M(F(r.iat)),expirationTime:M(F(r.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=(0,i.Ku)(e);await W(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new J({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await W(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,n.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await H(this,async function(e,t){return T(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,n=t.email??void 0,i=t.phoneNumber??void 0,r=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:c,providerData:p,stsTokenManager:g}=t;v(d&&g,e,"internal-error");const m=Z.fromJSON(this.name,g);v("string"==typeof d,e,"internal-error"),K(s,e.name),K(n,e.name),v("boolean"==typeof h,e,"internal-error"),v("boolean"==typeof c,e,"internal-error"),K(i,e.name),K(r,e.name),K(a,e.name),K(o,e.name),K(l,e.name),K(u,e.name);const f=new J({uid:d,auth:e,email:n,emailVerified:h,displayName:s,isAnonymous:c,photoURL:r,phoneNumber:i,tenantId:a,stsTokenManager:m,createdAt:l,lastLoginAt:u});return p&&Array.isArray(p)&&(f.providerData=p.map(e=>({...e}))),o&&(f._redirectEventId=o),f}static async _fromIdTokenResponse(e,t,s=!1){const n=new Z;n.updateFromServerResponse(t);const i=new J({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:s});return await W(i),i}static async _fromGetAccountInfoResponse(e,t,s){const n=t.users[0];v(void 0!==n.localId,"internal-error");const i=void 0!==n.providerUserInfo?G(n.providerUserInfo):[],r=!(n.email&&n.passwordHash||i?.length),a=new Z;a.updateFromIdToken(s);const o=new J({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r}),l={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new U(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash||i?.length)};return Object.assign(o,l),o}}const Y=new Map;function $(e){b(e instanceof Function,"Expected a class definition");let t=Y.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Y.set(e,t),t)}class X{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}X.type="NONE";const ee=X;function te(e,t,s){return`firebase:${e}:${t}:${s}`}class se{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:n,name:i}=this.auth;this.fullUserKey=te(this.userKey,n.apiKey,i),this.fullPersistenceKey=te("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await q(this.auth,{idToken:e}).catch(()=>{});return t?J._fromGetAccountInfoResponse(this.auth,t,e):null}return J._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new se($(ee),e,s);const n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=n[0]||$(ee);const r=te(s,e.config.apiKey,e.name);let a=null;for(const s of t)try{const t=await s._get(r);if(t){let n;if("string"==typeof t){const s=await q(e,{idToken:t}).catch(()=>{});if(!s)break;n=await J._fromGetAccountInfoResponse(e,s,t)}else n=J._fromJSON(e,t);s!==i&&(a=n),i=s;break}}catch{}const o=n.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(r,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(r)}catch{}})),new se(i,e,s)):new se(i,e,s)}}function ne(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(oe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ie(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ue(t))return"Blackberry";if(de(t))return"Webos";if(re(t))return"Safari";if((t.includes("chrome/")||ae(t))&&!t.includes("edge/"))return"Chrome";if(le(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(t);if(2===s?.length)return s[1]}return"Other"}function ie(e=(0,i.ZQ)()){return/firefox\//i.test(e)}function re(e=(0,i.ZQ)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ae(e=(0,i.ZQ)()){return/crios\//i.test(e)}function oe(e=(0,i.ZQ)()){return/iemobile/i.test(e)}function le(e=(0,i.ZQ)()){return/android/i.test(e)}function ue(e=(0,i.ZQ)()){return/blackberry/i.test(e)}function de(e=(0,i.ZQ)()){return/webos/i.test(e)}function he(e=(0,i.ZQ)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ce(e=(0,i.ZQ)()){return he(e)||le(e)||de(e)||ue(e)||/windows phone/i.test(e)||oe(e)}function pe(e,t=[]){let s;switch(e){case"Browser":s=ne((0,i.ZQ)());break;case"Worker":s=`${ne((0,i.ZQ)())}-${e}`;break;default:s=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${n.MF}/${r}`}class ge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=t=>new Promise((s,n)=>{try{s(e(t))}catch(e){n(e)}});s.onAbort=t,this.queue.push(s);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}class me{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let s;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)s=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ve{constructor(e,t,s,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new be(this),this.idTokenSubscription=new be(this),this.beforeStateQueue=new ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await se.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await q(this,{idToken:e}),s=await J._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,n.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,n=s?._redirectEventId,r=await this.tryRedirectSignIn(e);t&&t!==n||!r?.user||(s=r.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(e){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await W(e)}catch(e){if("auth/network-request-failed"!==e?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,n.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,i.Ku)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,n.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,n.xZ)(this.app)?Promise.reject(g(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return T(e,"GET","/v2/passwordPolicy",P(e,t))}(this),t=new me(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new i.FA("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return T(e,"POST","/v2/accounts:revokeToken",P(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return null===e?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await se.create(this,[$(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,n){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let r=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(a,this,"internal-error"),a.then(()=>{r||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,s,n);return()=>{r=!0,i()}}{const s=e.addObserver(t);return()=>{r=!0,s()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if((0,n.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e,...t){u.logLevel<=r.$b.WARN&&u.warn(`Auth (${n.MF}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fe(e){return(0,i.Ku)(e)}class be{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.tD)(e=>this.observer=e)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ye={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ce(e){return ye.loadJS(e)}function we(e){return`__${e}${Math.floor(1e6*Math.random())}`}class xe{constructor(){this.enterprise=new _e}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _e{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ve="NO_RECAPTCHA";class Ie{constructor(e){this.type="recaptcha-enterprise",this.auth=fe(e)}async verify(e="verify",t=!1){function s(t,s,n){const i=window.grecaptcha;N(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{s(e)}).catch(()=>{s(Ve)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?(new xe).execute("siteKey",{action:"verify"}):new Promise((e,n)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,s)=>{j(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0!==n.recaptchaKey){const s=new O(n);return null==e.tenantId?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,t(s.siteKey)}s(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{s(e)})})})(this.auth).then(i=>{if(!t&&N(window.grecaptcha))s(i,e,n);else{if("undefined"==typeof window)return void n(new Error("RecaptchaVerifier is only supported in browser"));let t=ye.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ce(t).then(()=>{s(i,e,n)}).catch(e=>{n(e)})}}).catch(e=>{n(e)})})}}async function Se(e,t,s,n=!1,i=!1){const r=new Ie(e);let a;if(i)a=Ve;else try{a=await r.verify(s)}catch(e){a=await r.verify(s,!0)}const o={...t};if("mfaSmsEnrollment"===s||"mfaSmsSignIn"===s){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Pe(e,t,s,n,i){if("EMAIL_PASSWORD_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Se(e,t,s,"getOobCode"===s);return n(e,i)}return n(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Se(e,t,s,"getOobCode"===s);return n(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await Se(e,t,s);return n(e,i).catch(async i=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${s} flow.`);const i=await Se(e,t,s,!1,!0);return n(e,i)}return Promise.reject(i)})}{const i=await Se(e,t,s,!1,!0);return n(e,i)}}return Promise.reject(i+" provider is not supported.")}function Te(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ee(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Re{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return f("not implemented")}_getIdTokenResponse(e){return f("not implemented")}_linkToIdToken(e,t){return f("not implemented")}_getReauthenticationResolver(e){return f("not implemented")}}async function ke(e,t){return T(e,"POST","/v1/accounts:signUp",t)}async function Ae(e,t){return R(e,"POST","/v1/accounts:signInWithPassword",P(e,t))}class Le extends Re{constructor(e,t,s,n=null){super("password",s),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new Le(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Le(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Pe(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ae,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))}(e,{email:this._email,oobCode:this._password});default:h(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Pe(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ke,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:h(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function De(e,t){return R(e,"POST","/v1/accounts:signInWithIdp",P(e,t))}class Ne extends Re{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ne(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):h("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:s,signInMethod:n,...i}=t;if(!s||!n)return null;const r=new Ne(s,n);return r.idToken=i.idToken||void 0,r.accessToken=i.accessToken||void 0,r.secret=i.secret,r.nonce=i.nonce,r.pendingToken=i.pendingToken||null,r}_getIdTokenResponse(e){return De(e,this.buildRequest())}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,De(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,De(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.Am)(t)}return e}}async function Oe(e,t){return T(e,"POST","/v1/accounts:sendVerificationCode",P(e,t))}const je={USER_NOT_FOUND:"user-not-found"};class qe extends Re{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const s=await R(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t));if(s.temporaryProof)throw D(e,"account-exists-with-different-credential",s);return s}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,{...t,operation:"REAUTH"}),je)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:n,temporaryProof:i}=e;return s||t||n||i?new qe({verificationId:t,verificationCode:s,phoneNumber:n,temporaryProof:i}):null}}class Me{constructor(e){const t=(0,i.I9)((0,i.hp)(e)),s=t.apiKey??null,n=t.oobCode??null,r=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);v(s&&n&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=n,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=(0,i.I9)((0,i.hp)(e)).link,s=t?(0,i.I9)((0,i.hp)(t)).deep_link_id:null,n=(0,i.I9)((0,i.hp)(e)).deep_link_id;return(n?(0,i.I9)((0,i.hp)(n)).link:null)||n||s||t||e}(e);try{return new Me(t)}catch{return null}}}class Fe{constructor(){this.providerId=Fe.PROVIDER_ID}static credential(e,t){return Le._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Me.parseLink(t);return v(s,"argument-error"),Le._fromEmailAndCode(e,s.code,s.tenantId)}}Fe.PROVIDER_ID="password",Fe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Be{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ze extends Be{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class He extends ze{constructor(){super("facebook.com")}static credential(e){return Ne._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return He.credential(e.oauthAccessToken)}catch{return null}}}He.FACEBOOK_SIGN_IN_METHOD="facebook.com",He.PROVIDER_ID="facebook.com";class Qe extends ze{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ne._fromParams({providerId:Qe.PROVIDER_ID,signInMethod:Qe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qe.credentialFromTaggedObject(e)}static credentialFromError(e){return Qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Qe.credential(t,s)}catch{return null}}}Qe.GOOGLE_SIGN_IN_METHOD="google.com",Qe.PROVIDER_ID="google.com";class Ue extends ze{constructor(){super("github.com")}static credential(e){return Ne._fromParams({providerId:Ue.PROVIDER_ID,signInMethod:Ue.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ue.credentialFromTaggedObject(e)}static credentialFromError(e){return Ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ue.credential(e.oauthAccessToken)}catch{return null}}}Ue.GITHUB_SIGN_IN_METHOD="github.com",Ue.PROVIDER_ID="github.com";class We extends ze{constructor(){super("twitter.com")}static credential(e,t){return Ne._fromParams({providerId:We.PROVIDER_ID,signInMethod:We.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return We.credentialFromTaggedObject(e)}static credentialFromError(e){return We.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return We.credential(t,s)}catch{return null}}}We.TWITTER_SIGN_IN_METHOD="twitter.com",We.PROVIDER_ID="twitter.com";class Ge{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,n=!1){const i=await J._fromIdTokenResponse(e,s,n),r=Ze(s);return new Ge({user:i,providerId:r,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const n=Ze(s);return new Ge({user:e,providerId:n,_tokenResponse:s,operationType:t})}}function Ze(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function Ke(e){if((0,n.xZ)(e.app))return Promise.reject(g(e));const t=fe(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Ge({user:t.currentUser,providerId:null,operationType:"signIn"});const s=await async function(e,t){return R(e,"POST","/v1/accounts:signUp",P(e,t))}(t,{returnSecureToken:!0}),i=await Ge._fromIdTokenResponse(t,"signIn",s,!0);return await t._updateCurrentUser(i.user),i}class Je extends i.g{constructor(e,t,s,n){super(t.code,t.message),this.operationType=s,this.user=n,Object.setPrototypeOf(this,Je.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,n){return new Je(e,t,s,n)}}function Ye(e,t,s,n){return("reauthenticate"===t?s._getReauthenticationResolver(e):s._getIdTokenResponse(e)).catch(s=>{if("auth/multi-factor-auth-required"===s.code)throw Je._fromErrorAndOperation(e,s,t,n);throw s})}function $e(e,t){return T(e,"POST","/v2/accounts/mfaEnrollment:start",P(e,t))}new WeakMap;const Xe="__sak";class et{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xe,"1"),this.storage.removeItem(Xe),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class tt extends et{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ce(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),n=this.localCache[t];s!==n&&e(t,n,s)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,s)=>{this.notifyListeners(e,s)});const s=e.key;t?this.detachListener():this.stopPolling();const n=()=>{const e=this.storage.getItem(s);(t||this.localCache[s]!==e)&&this.notifyListeners(s,e)},r=this.storage.getItem(s);(0,i.lT)()&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const e of Array.from(s))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tt.type="LOCAL";const st=tt;class nt extends et{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nt.type="SESSION";const it=nt;class rt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const s=new rt(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:n,data:i}=t.data,r=this.handlersMap[n];if(!r?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:n});const a=Array.from(r).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:n,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function at(e="",t=10){let s="";for(let e=0;e<t;e++)s+=Math.floor(10*Math.random());return e+s}rt.receivers=[];class ot{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const n="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,r;return new Promise((a,o)=>{const l=at("",20);n.port1.start();const u=setTimeout(()=>{o(new Error("unsupported_event"))},s);r={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(r),n.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[n.port2])}).finally(()=>{r&&this.removeMessageHandler(r)})}}function lt(){return window}function ut(){return void 0!==lt().WorkerGlobalScope&&"function"==typeof lt().importScripts}const dt="firebaseLocalStorageDb",ht="firebaseLocalStorage",ct="fbase_key";class pt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gt(e,t){return e.transaction([ht],t?"readwrite":"readonly").objectStore(ht)}function mt(){const e=indexedDB.open(dt,1);return new Promise((t,s)=>{e.addEventListener("error",()=>{s(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ht,{keyPath:ct})}catch(e){s(e)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(ht)?t(s):(s.close(),await function(){const e=indexedDB.deleteDatabase(dt);return new pt(e).toPromise()}(),t(await mt()))})})}async function vt(e,t,s){const n=gt(e,!0).put({[ct]:t,value:s});return new pt(n).toPromise()}function ft(e,t){const s=gt(e,!0).delete(t);return new pt(s).toPromise()}class bt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await mt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ut()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rt._getInstance(ut()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new ot(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mt();return await vt(e,Xe,"1"),await ft(e,Xe),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>vt(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const s=gt(e,!1).get(t),n=await new pt(s).toPromise();return void 0===n?null:n.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ft(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=gt(e,!1).getAll();return new pt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],s=new Set;if(0!==e.length)for(const{fbase_key:n,value:i}of e)s.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(const e of Object.keys(this.localCache))this.localCache[e]&&!s.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const e of Array.from(s))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}bt.type="LOCAL";const yt=bt;function Ct(e,t){return T(e,"POST","/v2/accounts/mfaSignIn:start",P(e,t))}we("rcb"),new w(3e4,6e4);const wt="recaptcha";async function xt(e,t,s){if(!e._getRecaptchaConfig())try{await async function(e){const t=fe(e),s=await j(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new O(s);null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new Ie(t).verify()}(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let n;if(n="string"==typeof t?{phoneNumber:t}:t,"session"in n){const t=n.session;if("phoneNumber"in n){v("enroll"===t.type,e,"internal-error");const i=Pe(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:n.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},"mfaSmsEnrollment",async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Ve?(v(s?.type===wt,e,"argument-error"),$e(e,await _t(e,t,s))):$e(e,t),"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const i=n.multiFactorHint?.uid||n.multiFactorUid;v(i,e,"missing-multi-factor-info");const r=Pe(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},"mfaSmsSignIn",async(e,t)=>t.phoneSignInInfo.captchaResponse===Ve?(v(s?.type===wt,e,"argument-error"),Ct(e,await _t(e,t,s))):Ct(e,t),"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t=Pe(e,{phoneNumber:n.phoneNumber,clientType:"CLIENT_TYPE_WEB"},"sendVerificationCode",async(e,t)=>t.captchaResponse===Ve?(v(s?.type===wt,e,"argument-error"),Oe(e,await _t(e,t,s))):Oe(e,t),"PHONE_PROVIDER");return(await t.catch(e=>Promise.reject(e))).sessionInfo}}finally{s?._reset()}}async function _t(e,t,s){v(s.type===wt,e,"argument-error");const n=await s.verify();v("string"==typeof n,e,"argument-error");const i={...t};if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,s=i.phoneEnrollmentInfo.clientType,r=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n,captchaResponse:t,clientType:s,recaptchaVersion:r}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,s=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:e,clientType:t,recaptchaVersion:s}}),i}return Object.assign(i,{recaptchaToken:n}),i}class Vt{constructor(e){this.providerId=Vt.PROVIDER_ID,this.auth=fe(e)}verifyPhoneNumber(e,t){return xt(this.auth,e,(0,i.Ku)(t))}static credential(e,t){return qe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Vt.credentialFromTaggedObject(t)}static credentialFromError(e){return Vt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:s}=e;return t&&s?qe._fromTokenResponse(t,s):null}}Vt.PROVIDER_ID="phone",Vt.PHONE_SIGN_IN_METHOD="phone";class It extends Re{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return De(e,this._buildIdpRequest())}_linkToIdToken(e,t){return De(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return De(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function St(e){return async function(e,t,s=!1){if((0,n.xZ)(e.app))return Promise.reject(g(e));const i="signIn",r=await Ye(e,i,t),a=await Ge._fromIdTokenResponse(e,i,r);return s||await e._updateCurrentUser(a.user),a}(e.auth,new It(e),e.bypassAuthState)}function Pt(e){const{auth:t,user:s}=e;return v(s,t,"internal-error"),async function(e,t,s=!1){const{auth:i}=e;if((0,n.xZ)(i.app))return Promise.reject(g(i));const r="reauthenticate";try{const n=await H(e,Ye(i,r,t,e),s);v(n.idToken,i,"internal-error");const a=B(n.idToken);v(a,i,"internal-error");const{sub:o}=a;return v(e.uid===o,i,"user-mismatch"),Ge._forOperation(e,r,n)}catch(e){throw"auth/user-not-found"===e?.code&&h(i,"user-mismatch"),e}}(s,new It(e),e.bypassAuthState)}async function Tt(e){const{auth:t,user:s}=e;return v(s,t,"internal-error"),async function(e,t,s=!1){const n=await H(e,t._linkToIdToken(e.auth,await e.getIdToken()),s);return Ge._forOperation(e,"link",n)}(s,new It(e),e.bypassAuthState)}class Et{constructor(e,t,s,n,i=!1){this.auth=e,this.resolver=s,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:n,tenantId:i,error:r,type:a}=e;if(r)return void this.reject(r);const o={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return St;case"linkViaPopup":case"linkViaRedirect":return Tt;case"reauthViaPopup":case"reauthViaRedirect":return Pt;default:h(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rt=new w(2e3,1e4);class kt extends Et{constructor(e,t,s,n,i){super(e,t,n,i),this.provider=s,this.authWindow=null,this.pollId=null,kt.currentPopupAction&&kt.currentPopupAction.cancel(),kt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=at();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(c(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(c(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kt.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(c(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Rt.get())};e()}}kt.currentPopupAction=null;const At=new Map;class Lt extends Et{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=At.get(this.auth._key());if(!e){try{const t=await async function(e,t){const s=function(e){return te("pendingRedirect",e.config.apiKey,e.name)}(t),n=function(e){return $(e._redirectPersistence)}(e);if(!await n._isAvailable())return!1;const i="true"===await n._get(s);return await n._remove(s),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}At.set(this.auth._key(),e)}return this.bypassAuthState||At.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Dt(e,t){At.set(e._key(),t)}async function Nt(e,t,s=!1){if((0,n.xZ)(e.app))return Promise.reject(g(e));const i=fe(e),r=function(e,t){return t?$(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),a=new Lt(i,r,s),o=await a.execute();return o&&!s&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class Ot{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!qt(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(c(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jt(e))}saveEventToCache(e){this.cachedEventUids.add(jt(e)),this.lastProcessedEventTime=Date.now()}}function jt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function qt({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===t?.code}const Mt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ft=/^https?/;function Bt(e){const t=y(),{protocol:s,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===n?"chrome-extension:"===s&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===s&&i.hostname===n}if(!Ft.test(s))return!1;if(Mt.test(e))return n===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}const zt=new w(3e4,6e4);function Ht(){const e=lt().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function Qt(e){return new Promise((t,s)=>{function n(){Ht(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ht(),s(c(e,"network-request-failed"))},timeout:zt.get()})}if(lt().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!lt().gapi?.load){const t=we("iframefcb");return lt()[t]=()=>{gapi.load?n():s(c(e,"network-request-failed"))},Ce(`${ye.gapiScript}?onload=${t}`).catch(e=>s(e))}n()}}).catch(e=>{throw Ut=null,e})}let Ut=null;const Wt=new w(5e3,15e3),Gt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kt(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const s=t.emulator?x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:n.MF},a=Zt.get(e.config.apiHost);a&&(r.eid=a);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${s}?${(0,i.Am)(r).slice(1)}`}const Jt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yt{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const $t=encodeURIComponent("fac");async function Xt(e,t,s,r,a,o){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:s,redirectUrl:r,v:n.MF,eventId:a};if(t instanceof Be){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof ze){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const u=l;for(const e of Object.keys(u))void 0===u[e]&&delete u[e];const d=await e._getAppCheckToken(),h=d?`#${$t}=${encodeURIComponent(d)}`:"";return`${function({config:e}){return e.emulator?x(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.Am)(u).slice(1)}${h}`}const es="webStorageSupport",ts=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=it,this._completeRedirectFn=Nt,this._overrideRedirectResult=Dt}async _openPopup(e,t,s,n){return b(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()"),function(e,t,s,n=500,r=600){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u={...Jt,width:n.toString(),height:r.toString(),top:a,left:o},d=(0,i.ZQ)().toLowerCase();s&&(l=ae(d)?"_blank":s),ie(d)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,[t,s])=>`${e}${t}=${s},`,"");if(function(e=(0,i.ZQ)()){return he(e)&&!!window.navigator?.standalone}(d)&&"_self"!==l)return function(e,t){const s=document.createElement("a");s.href=e,s.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}(t||"",l),new Yt(null);const c=window.open(t||"",l,h);v(c,e,"popup-blocked");try{c.focus()}catch(e){}return new Yt(c)}(e,await Xt(e,t,s,y(),n),at())}async _openRedirect(e,t,s,n){return await this._originValidation(e),i=await Xt(e,t,s,y(),n),lt().location.href=i,new Promise(()=>{});var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:s}=this.eventManagers[t];return e?Promise.resolve(e):(b(s,"If manager is not set, promise should be"),s)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return Ut=Ut||Qt(e),Ut}(e),s=lt().gapi;return v(s,e,"internal-error"),t.open({where:document.body,url:Kt(e),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gt,dontclear:!0},t=>new Promise(async(s,n)=>{await t.restyle({setHideOnLeave:!1});const i=c(e,"network-request-failed"),r=lt().setTimeout(()=>{n(i)},Wt.get());function a(){lt().clearTimeout(r),s(t)}t.ping(a).then(a,()=>{n(i)})}))}(e),s=new Ot(e);return t.register("authEvent",t=>(v(t?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(es,{type:es},s=>{const n=s?.[0]?.[es];void 0!==n&&t(!!n),h(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return T(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Bt(e))return}catch{}h(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ce()||re()||he()}};var ss="@firebase/auth",ns="1.11.0";class is{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const rs=(0,i.XA)("authIdTokenMaxAge")||300;let as=null;const os=e=>async t=>{const s=t&&await t.getIdTokenResult(),n=s&&((new Date).getTime()-Date.parse(s.issuedAtTime))/1e3;if(n&&n>rs)return;const i=s?.token;as!==i&&(as=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ls(e=(0,n.Sx)()){const t=(0,n.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const s=function(e,t){const s=(0,n.j6)(e,"auth");if(s.isInitialized()){const e=s.getImmediate(),n=s.getOptions();if((0,i.bD)(n,t??{}))return e;h(e,"already-initialized")}return s.initialize({options:t})}(e,{popupRedirectResolver:ts,persistence:[yt,st,it]}),r=(0,i.XA)("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=os(e.toString());!function(e,t,s){(0,i.Ku)(e).beforeAuthStateChanged(t,s)}(s,t,()=>t(s.currentUser)),function(e){(0,i.Ku)(e).onIdTokenChanged(e=>t(e),void 0,void 0)}(s)}}const a=(0,i.Tj)("auth");return a&&function(e,t,s){const n=fe(e);v(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const r=!!s?.disableWarnings,a=Te(t),{host:o,port:l}=function(e){const t=Te(e),s=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const e=i[1];return{host:e,port:Ee(n.substr(e.length+1))}}{const[e,t]=n.split(":");return{host:e,port:Ee(t)}}}(t),u=null===l?"":`:${l}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator)return v(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),void v((0,i.bD)(d,n.config.emulator)&&(0,i.bD)(h,n.emulatorConfig),n,"emulator-config-failed");n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,(0,i.zJ)(o)?((0,i.gE)(`${a}//${o}${u}`),(0,i.P1)("Auth",!0)):r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(s,`http://${a}`),s}var us;ye={loadJS:e=>new Promise((t,s)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=e=>{const t=c("internal-error");t.customData=e,s(t)},n.type="text/javascript",n.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(n)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},us="Browser",(0,n.om)(new a.uA("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:r,authDomain:a}=s.options;v(r&&!r.includes(":"),"invalid-api-key",{appName:s.name});const o={apiKey:r,authDomain:a,clientPlatform:us,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pe(us)},l=new ve(s,n,i,o);return function(e,t){const s=t?.persistence||[],n=(Array.isArray(s)?s:[s]).map($);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t?.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),(0,n.om)(new a.uA("auth-internal",e=>{return t=fe(e.getProvider("auth").getImmediate()),new is(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,n.KO)(ss,ns,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(us)),(0,n.KO)(ss,ns,"esm2020")}}]);